{"version":3,"file":"main.js","mappings":";;;;;;;;;;;;;;;;;;;;;;AAA0C;AACgB;AACf;AACX;AAEU;AACU;AACJ;AACa;AAE/C,SAAUS,kBAAkB,CAACC,OAAO;EAChDV,2DAAO,CAACW,IAAI,CAAC,IAAI,EAAED,OAAO,CAAC;EAE3B,IAAI,CAACE,eAAe,GAAG,EAAE;EACzB,IAAI,CAACC,cAAc,GAAG,EAAE;AAC1B;AAEAT,+CAAQ,CAACK,kBAAkB,EAAET,2DAAO,CAAC;AAErCS,kBAAkB,CAACK,SAAS,CAACC,QAAQ,GAAG,EAAE,CAACC,MAAM,CAC/CP,kBAAkB,CAACK,SAAS,CAACC,QAAQ,EACrC,CAACV,gDAAiB,EAAEC,yDAAkB,EAAEC,yDAAc,CAAC,EACvD,CAACN,sEAAY,CAAC,CACf;AAED;;;;;AAKAQ,kBAAkB,CAACK,SAAS,CAACG,eAAe,GAAG,UAAUC,aAAa;EACpE,IAAIC,QAAQ,GAAGD,aAAa,CAACE,MAAM;EACnC,OAAOF,aAAa,CAACG,QAAQ;EAC7B,OAAOH,aAAa,CAACE,MAAM;EAC3B,IAAI,CAACR,eAAe,CAACU,IAAI,CAACJ,aAAa,CAAC;EAExC,IAAIK,MAAM,GAAG,IAAI,CAACC,GAAG,CAAC,QAAQ,CAAC;IAC7BC,cAAc,GAAG,IAAI,CAACD,GAAG,CAAC,gBAAgB,CAAC;EAE7C,IAAIE,WAAW,GAAGxB,gDAAM,CAAC;IAAEyB,cAAc,EAAET;EAAa,CAAE,EAAEA,aAAa,CAAC;EAC1E,IAAIU,WAAW,GAAGH,cAAc,CAACI,MAAM,CAAC,OAAO,EAAEH,WAAW,CAAC;EAE7D,IAAII,OAAO,CAACZ,aAAa,CAAC,EAAE;IAC1B,IAAI,CAACL,cAAc,CAACK,aAAa,CAACa,EAAE,CAAC,GAAGH,WAAW;;EAGrD,IAAIT,QAAQ,EAAE;IACZ,IAAIa,WAAW,GAAG,IAAI,CAACnB,cAAc,CAACM,QAAQ,CAAC;IAE/C,IAAIW,OAAO,CAACE,WAAW,CAAC,EAAE;MACxB,OAAOT,MAAM,CAACU,QAAQ,CAACL,WAAW,EAAEI,WAAW,EAAEA,WAAW,CAACD,EAAE,CAAC;;;EAGpE,OAAOR,MAAM,CAACU,QAAQ,CAACL,WAAW,CAAC;AACrC,CAAC;AAEDnB,kBAAkB,CAACK,SAAS,CAACoB,oBAAoB,GAAG,UAAUhB,aAAa;EACzE,IAAI,CAACN,eAAe,CAACU,IAAI,CAACJ,aAAa,CAAC;EAExC,IAAIK,MAAM,GAAG,IAAI,CAACC,GAAG,CAAC,QAAQ,CAAC;IAC7BC,cAAc,GAAG,IAAI,CAACD,GAAG,CAAC,gBAAgB,CAAC;IAC3CW,eAAe,GAAG,IAAI,CAACX,GAAG,CAAC,iBAAiB,CAAC;EAE/C,IAAIE,WAAW,GAAGxB,gDAAM,CAAC;IAAEyB,cAAc,EAAET;EAAa,CAAE,EAAEA,aAAa,CAAC;EAE1E,IAAIkB,UAAU,GAAGX,cAAc,CAACI,MAAM,CACpC,YAAY,EACZ3B,gDAAM,CAACwB,WAAW,EAAE;IAClBW,MAAM,EAAEF,eAAe,CAACX,GAAG,CAACN,aAAa,CAACmB,MAAM,CAAC;IACjDC,MAAM,EAAEH,eAAe,CAACX,GAAG,CAACN,aAAa,CAACoB,MAAM;GACjD,CAAC,EACFH,eAAe,CAACX,GAAG,CAACN,aAAa,CAACmB,MAAM,CAAC,CAACjB,MAAM,CACjD;EAED,OAAOG,MAAM,CAACgB,aAAa,CAACH,UAAU,CAAC;AACzC,CAAC;AAED;AACA3B,kBAAkB,CAACK,SAAS,CAAC0B,oBAAoB,GAAG,UAAUC,QAAQ;EACpE,IAAI,CAACjB,GAAG,CAAC,UAAU,CAAC,CAACkB,IAAI,CAAC,eAAe,EAAE,EAAE,CAAC;EAC9C,IAAI,CAAC9B,eAAe,GAAG,EAAE;EACzB,IAAI,CAACC,cAAc,GAAG,EAAE;EAExB,IAAI,CAAC8B,iBAAiB,CAACF,QAAQ,CAAC;AAClC,CAAC;AAED;;;;;AAKAhC,kBAAkB,CAACK,SAAS,CAAC6B,iBAAiB,GAAG,UAAUC,cAAc;EACvE,IAAI,CAACzC,iDAAO,CAACyC,cAAc,CAAC,EAAE;IAC5B,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;;EAG9C,IAAIC,MAAM,GAAG,EAAE;IACbC,WAAW,GAAG,EAAE;IAChBC,MAAM,GAAG,EAAE;EAEbJ,cAAc,CAACK,OAAO,CAAC,UAAU/B,aAAa;IAC5C,IAAIgC,YAAY,CAAChC,aAAa,CAAC,EAAE;MAC/B6B,WAAW,CAACzB,IAAI,CAACJ,aAAa,CAAC;KAChC,MAAM,IAAIY,OAAO,CAACZ,aAAa,CAAC,EAAE;MACjC8B,MAAM,CAAC1B,IAAI,CAACJ,aAAa,CAAC;KAC3B,MAAM;MACL4B,MAAM,CAACxB,IAAI,CAACJ,aAAa,CAAC;;EAE9B,CAAC,CAAC;EAEF;EACA;EACA8B,MAAM,CAACC,OAAO,CAAC,IAAI,CAAChC,eAAe,EAAE,IAAI,CAAC;EAC1C6B,MAAM,CAACG,OAAO,CAAC,IAAI,CAAChC,eAAe,EAAE,IAAI,CAAC;EAC1C8B,WAAW,CAACE,OAAO,CAAC,IAAI,CAACf,oBAAoB,EAAE,IAAI,CAAC;AACtD,CAAC;AAED;;;;;AAKAzB,kBAAkB,CAACK,SAAS,CAACqC,iBAAiB,GAAG;EAC/C,OAAO,IAAI,CAACvC,eAAe;AAC7B,CAAC;AAED;AACAH,kBAAkB,CAACK,SAAS,CAACsC,aAAa,GAAG,UAAUC,IAAI,GAAG,CAAC;AAE/D,SAASH,YAAY,CAACI,OAAO;EAC3B,OACEA,OAAO,CAACC,IAAI,KAAK/C,qEAAY,CAACgD,QAAQ,IACtCF,OAAO,CAACC,IAAI,KAAK/C,qEAAY,CAACiD,UAAU;AAE5C;AAEA,SAAS3B,OAAO,CAACwB,OAAO;EACtB,OAAOA,OAAO,IAAIA,OAAO,CAACC,IAAI,KAAK/C,qEAAY,CAACkD,KAAK;AACvD;;;;;;;;;;;;;;;AC1Ia;;AAEqB;AAElC;;;AAGc,SAAUC,OAAO,CAACC,QAAQ;EACtC,IAAI,CAACC,SAAS,GAAGD,QAAQ;AAC3B;AAEA;;;;;AAKA,SAASE,cAAc,CAACC,UAAU,EAAEC,cAAc,EAAEJ,QAAQ;EAC1D;EAEA,IAAIK,UAAU,GAAGC,kBAAkB,CAACF,cAAc,EAAED,UAAU,EAAEH,QAAQ,CAAC;EACzE,IAAIO,kBAAkB,GAAGF,UAAU,CAACG,QAAQ;EAC5C,IAAIC,kBAAkB,GAAGJ,UAAU,CAACK,QAAQ;EAE5CH,kBAAkB,CAAClB,OAAO,CAAEK,OAAO,IAAI;IACrCA,OAAO,CAAC3B,cAAc,CAACU,MAAM,GAAG4B,UAAU,CAAClC,EAAE;EAC/C,CAAC,CAAC;EAEFsC,kBAAkB,CAACpB,OAAO,CAAEK,OAAO,IAAI;IACrCA,OAAO,CAAC3B,cAAc,CAACW,MAAM,GAAG2B,UAAU,CAAClC,EAAE;EAC/C,CAAC,CAAC;EAEF,OAAOkC,UAAU;AACnB;AAEA,SAASC,kBAAkB,CAACF,cAAc,EAAED,UAAU,EAAEH,QAAQ;EAC9DI,cAAc,CAACO,CAAC,GAAGC,IAAI,CAACC,IAAI,CAC1BV,UAAU,CAACQ,CAAC,GAAG,CAACP,cAAc,CAACU,KAAK,IAAIX,UAAU,CAACW,KAAK,IAAI,CAAC,CAC9D;EACDV,cAAc,CAACW,CAAC,GAAGH,IAAI,CAACC,IAAI,CAC1BV,UAAU,CAACY,CAAC,GAAG,CAACX,cAAc,CAACY,MAAM,IAAIb,UAAU,CAACa,MAAM,IAAI,CAAC,CAChE;EAED1E,gDAAM,CAAC8D,cAAc,EAAE;IAAEa,IAAI,EAAEd,UAAU,CAACpC,cAAc,CAACkD;EAAI,CAAE,CAAC;EAEhE,OAAOjB,QAAQ,CAACkB,YAAY,CAACf,UAAU,EAAEC,cAAc,EAAE,EAAE,CAAC;AAC9D;AAEAL,OAAO,CAAC7C,SAAS,CAACgD,cAAc,GAAGA,cAAc;;;;;;;;;;;;;;;;;AC/CpC;;AAEmB;AACmB;AAEhB;AAEnC;;;AAGc,SAAUkB,mBAAmB,CAACpB,QAAQ;EAClD,IAAI,CAACqB,UAAU,GAAG,IAAItB,gDAAO,CAACC,QAAQ,CAAC;EACvC,IAAI,CAACC,SAAS,GAAGD,QAAQ;AAC3B;AAEAoB,mBAAmB,CAACE,OAAO,GAAG,CAAC,UAAU,CAAC;AAE1C;;;;;;;;AAQAF,mBAAmB,CAAClE,SAAS,CAACqE,UAAU,GAAG,UAAU7B,OAAO;EAC1D,IAAI8B,OAAO;EACX,IAAI9B,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC,OAAO,CAAC,EAAE;IAClCD,OAAO,GAAGL,gEAAkC,CAACzB,OAAO,CAACC,IAAI,CAAC;GAC3D,MAAM,IAAID,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC,YAAY,CAAC,EAAE;IAC9CD,OAAO,GAAGL,qEAAuC,CAACzB,OAAO,CAACC,IAAI,CAAC;;EAGjE,OAAO,IAAI,CAACiC,cAAc,CAAClC,OAAO,EAAE8B,OAAO,CAAC;AAC9C,CAAC;AAED;;;;;;;;;AASAJ,mBAAmB,CAAClE,SAAS,CAAC0E,cAAc,GAAG,UAC7ClC,OAAO,EACPyB,cAAc;EAEd,IAAIU,WAAW,GAAG,EAAE;EAEpB,IAAIC,IAAI,GAAG,IAAI;EAEfzC,iDAAO,CAAC8B,cAAc,EAAE,UAAUY,UAAU;IAC1C,IAAIC,KAAK,GAAGF,IAAI,CAACG,gBAAgB,CAACF,UAAU,EAAErC,OAAO,CAAC;IAEtDmC,WAAW,CAACnE,IAAI,CAACsE,KAAK,CAAC;EACzB,CAAC,CAAC;EAEF,OAAOH,WAAW;AACpB,CAAC;AAED;;;;;;;;;;AAUAT,mBAAmB,CAAClE,SAAS,CAAC+E,gBAAgB,GAAG,UAC/CF,UAAU,EACVrC,OAAO,EACPwC,MAAM;EAEN,IAAIhC,cAAc,GAAG,IAAI,CAACmB,UAAU,CAACnB,cAAc;EACnD,IAAIF,QAAQ,GAAG,IAAI,CAACC,SAAS;EAC7B,IAAIkC,aAAa,GAAG;IAClB,OAAOjC,cAAc,CAACR,OAAO,EAAEqC,UAAU,CAACrD,MAAM,EAAEsB,QAAQ,CAAC;EAC7D,CAAC;EAEDkC,MAAM,GAAGA,MAAM,IAAIC,aAAa;EAEhC,OAAO;IACLC,KAAK,EAAEL,UAAU,CAACK,KAAK;IACvBC,SAAS,EAAEN,UAAU,CAACM,SAAS;IAC/BlE,EAAE,EAAE4D,UAAU,CAACO,UAAU;IACzBJ,MAAM,EAAEA;GACT;AACH,CAAC;;;;;;;;;;;;;;;;;;AC3FiE;AACX;AAEvD,IAAIM,qBAAqB;AAEnB,SAAUC,wBAAwB,CAACC,cAAc;EACrDF,qBAAqB,GAAGE,cAAc;AACxC;AAEM,SAAUhB,mBAAmB,CAACT,IAAI;EACtC,MAAM0B,UAAU,GAAGH,qBAAqB,CAACI,iBAAiB,CACxDhG,4EAAY,CAACiG,KAAK,CACnB;EAED,IAAIC,aAAa,GAAG,EAAE;EACtB,IAAIC,CAAC,GAAG,CAAC;EAETJ,UAAU,CAACK,SAAS,EAAE,CAAC3D,OAAO,CAAE4D,SAAS,IAAI;IAC3C,IAAI,CAAChC,IAAI,CAACQ,QAAQ,CAACwB,SAAS,CAAC,EAAE;MAC7B,MAAMC,QAAQ,GAAGX,qEAAe,CAACU,SAAS,CAAC;MAC3CH,aAAa,CAACC,CAAC,CAAC,GAAG;QACjBX,KAAK,EAAE,YAAY,GAAGc,QAAQ;QAC9BZ,UAAU,EAAE,qBAAqB,GAAGY,QAAQ,CAACC,WAAW,EAAE;QAC1Dd,SAAS,EAAEG,qBAAqB,CAACY,cAAc,CAACH,SAAS,CAAC;QAC1DvE,MAAM,EAAE;UACNiB,IAAI,EAAEsD;;OAET;MACDF,CAAC,EAAE;;EAEP,CAAC,CAAC;EACF,OAAOD,aAAa;AACtB;AAEM,SAAUnB,wBAAwB,CAACV,IAAI;EAC3C,MAAMoC,eAAe,GAAGb,qBAAqB,CAACI,iBAAiB,CAC7DhG,4EAAY,CAAC0G,UAAU,CACxB;EAED,IAAIR,aAAa,GAAG,EAAE;EACtB,IAAIC,CAAC,GAAG,CAAC;EAETM,eAAe,CAACL,SAAS,EAAE,CAAC3D,OAAO,CAAEkE,cAAc,IAAI;IACrD,IAAI,CAACtC,IAAI,CAACQ,QAAQ,CAAC8B,cAAc,CAAC,EAAE;MAClC,MAAML,QAAQ,GAAGX,qEAAe,CAACgB,cAAc,CAAC;MAChDT,aAAa,CAACC,CAAC,CAAC,GAAG;QACjBX,KAAK,EAAE,YAAY,GAAGc,QAAQ;QAC9BZ,UAAU,EAAE,qBAAqB,GAAGY,QAAQ;QAC5Cb,SAAS,EAAEG,qBAAqB,CAACY,cAAc,CAACG,cAAc,CAAC;QAC/D7E,MAAM,EAAE;UACNiB,IAAI,EAAE4D;;OAET;;IAEHR,CAAC,EAAE;EACL,CAAC,CAAC;EACF,OAAOD,aAAa;AACtB;;;;;;;;;;;;;;;;;;;;;;;ACzDa;;AAEmB;AAEqD;AAE7C;AACyB;AACC;AACoB;AAC/B;AAEvD,IAAIc,gBAAgB;AACpB,IAAIpB,qBAAqB;AAEnB,SAAUqB,4BAA4B,CAACC,SAAS,EAAEpB,cAAc;EACpEkB,gBAAgB,GAAGE,SAAS;EAC5BtB,qBAAqB,GAAGE,cAAc;AACxC;AAEc,SAAUqB,6BAA6B,CACnDC,QAAQ,EACRC,OAAO,EACPC,SAAS,EACTrG,cAAc,EACdI,MAAM,EACNN,MAAM,EACNwG,UAAU,EACVC,SAAS,EACTC,mBAAmB,EACnBC,YAAY,EACZC,QAAQ,EACRvE,QAAQ;EAER,IAAIwE,YAAY;EAChB,IAAIC,eAAe;EAEnBT,QAAQ,CAACU,MAAM,CAAClB,2FAAkB,EAAE,IAAI,CAAC;EACzC,IAAImB,SAAS,GAAGX,QAAQ,CAACpG,GAAG,CAAC,WAAW,EAAE,KAAK,CAAC;EAEhD,IAAIgH,MAAM,GAAGnB,8CAAI,CAAC,IAAI,CAACoB,oBAAoB,EAAE,IAAI,CAAC;EAElD,MAAMC,WAAW,GAAGC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC;EAC1DF,WAAW,CAACG,QAAQ,GAAIC,EAAE,IAAI;IAC5B,MAAMC,OAAO,GAAG;MACdpH,cAAc,EAAE0G,eAAe,CAAC1G,cAAc;MAC9CqH,QAAQ,EAAEF,EAAE,CAACxG,MAAM,CAAC2G,KAAK;MACzB3F,OAAO,EAAE+E;KACV;IAEDH,YAAY,CAACgB,OAAO,CAAC,qBAAqB,EAAEH,OAAO,CAAC;IACpDvB,gBAAgB,CAAC2B,SAAS,EAAE;EAC9B,CAAC;EAEDnB,SAAS,CAACoB,gBAAgB,CAAC,YAAY,EAAEnB,mBAAmB,CAAC;EAC7DD,SAAS,CAACoB,gBAAgB,CAAC,cAAc,EAAEnB,mBAAmB,CAAC;EAE/D,IAAI,CAACQ,oBAAoB,GAAG,UAAUnF,OAAO;IAC3C,MAAM+F,mBAAmB,GAAG9B,oGAAsB,EAAE;IACpD,IAAI+B,OAAO,GAAGd,MAAM,CAAClF,OAAO,CAAC;IAE7B8E,YAAY,GAAG,UAAUmB,KAAK,EAAEjG,OAAO,EAAEkG,YAAY;MACnD3B,OAAO,CAAC4B,KAAK,CAACF,KAAK,EAAEjG,OAAO,EAAEkG,YAAY,CAAC;IAC7C,CAAC;IAED,IAAIlG,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAAC0G,UAAU,CAAC,EAAE;MAClD,IACEmC,mBAAmB,CAAChE,QAAQ,CAC1B/B,OAAO,CAACC,IAAI,CAACmG,OAAO,CAAClJ,4EAAY,CAAC0G,UAAU,EAAE,EAAE,CAAC,CAClD,EACD;QACAyC,cAAc,CAACL,OAAO,CAAC;;MAEzBM,sBAAsB,CAACN,OAAO,EAAElB,YAAY,CAAC;MAC7CyB,iBAAiB,CAACP,OAAO,CAAC;MAC1BQ,SAAS,CAACC,YAAY,EAAET,OAAO,CAAC;MAChCU,cAAc,CAACD,YAAY,EAAET,OAAO,CAAC;MACrCW,2BAA2B,CAACX,OAAO,CAAC;KACrC,MAAM,IAAIhG,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACiG,KAAK,CAAC,EAAE;MACpD,IACE4C,mBAAmB,CAAChE,QAAQ,CAC1B/B,OAAO,CAACC,IAAI,CAACmG,OAAO,CAAClJ,4EAAY,CAACiG,KAAK,EAAE,EAAE,CAAC,CAC7C,EACD;QACAkD,cAAc,CAACL,OAAO,CAAC;;MAEzBM,sBAAsB,CAACN,OAAO,EAAElB,YAAY,CAAC;MAC7CyB,iBAAiB,CAACP,OAAO,CAAC;MAC1BU,cAAc,CAACD,YAAY,EAAET,OAAO,CAAC;MACrCY,sBAAsB,CAACZ,OAAO,CAAC;KAChC,MAAM,IAAIhG,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACkD,KAAK,CAAC,EAAE;MACpD,OAAO4F,OAAO,CAACa,MAAM;MACrBN,iBAAiB,CAACP,OAAO,CAAC;MAC1BpJ,gDAAM,CAACoJ,OAAO,EAAE;QACdc,WAAW,EAAE;UACXC,KAAK,EAAE,MAAM;UACbpE,SAAS,EAAE,iBAAiB;UAC5BqE,KAAK,EAAE,qCAAqC;UAC5CxE,MAAM,EAAE;YACNyE,KAAK,EAAE,UAAUhB,KAAK,EAAEjG,OAAO;cAC7BM,QAAQ,CAAC4G,WAAW,CAAClH,OAAO,CAAC;cAC7BkE,gBAAgB,CAAC2B,SAAS,EAAE;YAC9B;;;OAGL,CAAC;MACFQ,cAAc,CAACL,OAAO,CAAC;KACxB,MAAM,IAAIhG,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACgD,QAAQ,CAAC,EAAE;MACvDiH,4BAA4B,CAACnB,OAAO,CAAC;MAErCK,cAAc,CAACL,OAAO,CAAC;MAEvBpJ,gDAAM,CAACoJ,OAAO,EAAE;QACda,MAAM,EAAE;UACNE,KAAK,EAAE,MAAM;UACbpE,SAAS,EAAE,iBAAiB;UAC5BqE,KAAK,EAAE,QAAQ;UACfxE,MAAM,EAAE;YACNyE,KAAK,EAAE,UAAUhB,KAAK,EAAEjG,OAAO;cAC7BM,QAAQ,CAAC8G,cAAc,CAAC;gBAAEpH;cAAO,CAAE,CAAC;cACpCkE,gBAAgB,CAAC2B,SAAS,EAAE;YAC9B;;;OAGL,CAAC;;IAGJ,OAAOG,OAAO;EAChB,CAAC;EAED,SAASmB,4BAA4B,CAACnB,OAAO;IAC3C,OAAOA,OAAO,CAACa,MAAM;IAErBjK,gDAAM,CAACoJ,OAAO,EAAE;MACdqB,eAAe,EAAE;QACfN,KAAK,EAAE,MAAM;QACbpE,SAAS,EAAE,mCAAmC;QAC9CqE,KAAK,EAAExC,SAAS,CAAC,kBAAkB,CAAC;QACpChC,MAAM,EAAE;UACN;UACAyE,KAAK,EAAE,UAAUhB,KAAK,EAAEjG,OAAO;YAC7BqH,eAAe,CAACrH,OAAO,CAAC;UAC1B;;;KAGL,CAAC;EACJ;EAEA,SAAS4G,sBAAsB,CAACZ,OAAO;IACrCpJ,gDAAM,CAACoJ,OAAO,EAAE;MACdI,OAAO,EAAE;QACPW,KAAK,EAAE,MAAM;QACbpE,SAAS,EAAE,wBAAwB;QACnCqE,KAAK,EAAExC,SAAS,CAAC,aAAa,CAAC;QAC/BhC,MAAM,EAAE;UACNyE,KAAK,EAAE,UAAUhB,KAAK,EAAEjG,OAAO;YAC7B,IAAIsH,QAAQ,GAAG1K,gDAAM,CAAC2K,sBAAsB,CAACvH,OAAO,CAAC,EAAE;cACrDwH,MAAM,EAAE;gBAAEvG,CAAC,EAAEgF,KAAK,CAAChF,CAAC;gBAAEI,CAAC,EAAE4E,KAAK,CAAC5E;cAAC;aACjC,CAAC;YACFqD,SAAS,CAAC+C,IAAI,CAACzH,OAAO,EAAE,YAAY,EAAEsH,QAAQ,CAAC;UACjD;;;KAGL,CAAC;EACJ;EAEA,SAASjB,cAAc,CAACL,OAAO;IAC7BpJ,gDAAM,CAACoJ,OAAO,EAAE;MACd0B,WAAW,EAAE;QACXX,KAAK,EAAE,MAAM;QACbpE,SAAS,EAAE,gCAAgC;QAC3CqE,KAAK,EAAExC,SAAS,CAAC,cAAc,CAAC;QAChChC,MAAM,EAAE;UACNyE,KAAK,EAAE,UAAUhB,KAAK,EAAEjG,OAAO;YAC7B+E,eAAe,GAAG/E,OAAO;YACzBoF,WAAW,CAAC6B,KAAK,EAAE;UACrB;;;KAGL,CAAC;EACJ;EAEA,SAASV,iBAAiB,CAACP,OAAO;IAChCpJ,gDAAM,CAACoJ,OAAO,EAAE;MACd,wBAAwB,EAAES,YAAY,CACpCvJ,4EAAY,CAACyK,cAAc,EAC3B,2BAA2B,EAC3B,gBAAgB,EAChB,SAAS;KAEZ,CAAC;EACJ;EAEA,SAASrB,sBAAsB,CAACN,OAAO,EAAElB,YAAY;IACnDlI,gDAAM,CAACoJ,OAAO,EAAE;MACdzB,OAAO,EAAE;QACPwC,KAAK,EAAE,SAAS;QAChBpE,SAAS,EAAE,sBAAsB;QACjCqE,KAAK,EAAExC,SAAS,CAAC,uBAAuB,CAAC;QACzChC,MAAM,EAAE;UACNyE,KAAK,EAAEnC,YAAY;UACnB8C,SAAS,EAAE9C;;;KAGhB,CAAC;EACJ;EAEA,SAAS4B,cAAc,CAACD,YAAY,EAAET,OAAO;IAC3C,IAAIrC,eAAe,GAAGb,qBAAqB,CAACI,iBAAiB,CAC3DhG,4EAAY,CAAC0G,UAAU,CACxB;IACDD,eAAe,CAACL,SAAS,EAAE,CAAC3D,OAAO,CAAEkE,cAAc,IAAI;MACrD,IAAItC,IAAI,GAAGsB,qEAAe,CAACgB,cAAc,CAAC;MAC1C,IAAIgE,IAAI,GAAG/E,qBAAqB,CAACY,cAAc,CAACG,cAAc,CAAC;MAC/D,IAAIrB,MAAM,GAAG,EAAE;MACfA,MAAM,CAAC,mBAAmB,GAAGjB,IAAI,CAAC,GAAGkF,YAAY,CAC/C5C,cAAc,EACdgE,IAAI,EACJtG,IAAI,EACJ,aAAa,CACd;MACD3E,gDAAM,CAACoJ,OAAO,EAAExD,MAAM,CAAC;IACzB,CAAC,CAAC;EACJ;EAEA,SAASgE,SAAS,CAACC,YAAY,EAAET,OAAO;IACtC,IAAI/C,UAAU,GAAGH,qBAAqB,CAACI,iBAAiB,CACtDhG,4EAAY,CAACiG,KAAK,CACnB;IACDF,UAAU,CAACK,SAAS,EAAE,CAAC3D,OAAO,CAAE4D,SAAS,IAAI;MAC3C,IAAIhC,IAAI,GAAGsB,qEAAe,CAACU,SAAS,CAAC;MACrC,IAAIsE,IAAI,GAAG/E,qBAAqB,CAACY,cAAc,CAACH,SAAS,CAAC;MAC1D,IAAIf,MAAM,GAAG,EAAE;MACfA,MAAM,CAAC,cAAc,GAAGjB,IAAI,CAAC,GAAGkF,YAAY,CAC1ClD,SAAS,EACTsE,IAAI,EACJtG,IAAI,EACJ,QAAQ,CACT;MACD3E,gDAAM,CAACoJ,OAAO,EAAExD,MAAM,CAAC;IACzB,CAAC,CAAC;EACJ;EAEA,SAASmE,2BAA2B,CAACX,OAAO;IAC1CpJ,gDAAM,CAACoJ,OAAO,EAAE;MACdI,OAAO,EAAE;QACPW,KAAK,EAAE,MAAM;QACbpE,SAAS,EAAE,wBAAwB;QACnCqE,KAAK,EAAExC,SAAS,CAAC,aAAa,CAAC;QAC/BhC,MAAM,EAAE;UACNyE,KAAK,EAAE,UAAUhB,KAAK,EAAEjG,OAAO;YAC7B,IAAIsH,QAAQ,GAAG1K,gDAAM,CAAC2K,sBAAsB,CAACvH,OAAO,CAAC,EAAE;cACrDwH,MAAM,EAAE;gBAAEvG,CAAC,EAAEgF,KAAK,CAAChF,CAAC;gBAAEI,CAAC,EAAE4E,KAAK,CAAC5E;cAAC;aACjC,CAAC;YACFqD,SAAS,CAAC+C,IAAI,CAACzH,OAAO,EAAE,YAAY,EAAEsH,QAAQ,CAAC;UACjD;;;KAGL,CAAC;EACJ;EAEA,SAASD,eAAe,CAACrH,OAAO;IAC9B,IAAIyF,OAAO;IACX,IAAIpH,cAAc,GAAG2B,OAAO,CAAC3B,cAAc;IAC3C,IAAIyJ,SAAS;IAEb,IAAI9H,OAAO,CAACjB,MAAM,CAACkB,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACiG,KAAK,CAAC,EAAE;MACpD2E,SAAS,GAAG,CAAC;KACd,MAAM;MACLA,SAAS,GAAG9D,6EAAuB,CAAChE,OAAO,EAAE4E,YAAY,CAAC;;IAE5Da,OAAO,GAAG;MACRpH,cAAc,EAAEA,cAAc;MAC9ByJ,SAAS,EAAEA,SAAS;MACpB9H,OAAO,EAAEA;KACV;IACD4E,YAAY,CAACgB,OAAO,CAAC,0BAA0B,EAAEH,OAAO,CAAC;EAC3D;EAEA,SAAS8B,sBAAsB,CAACvH,OAAO;IACrC,IAAI+H,QAAQ,GAAG,CAAC;IAEhB,IAAIC,gBAAgB,GAAG/J,MAAM,CAACgK,YAAY,EAAE;MAC1CC,GAAG,GAAGzD,UAAU,CAAC0D,MAAM,CAACnI,OAAO,CAAC,CAACoI,IAAI;IAEvC,IAAIC,WAAW,GAAGL,gBAAgB,CAACM,qBAAqB,EAAE;MACxDC,OAAO,GAAGL,GAAG,CAACI,qBAAqB,EAAE;IAEvC,IAAIE,GAAG,GAAGD,OAAO,CAACC,GAAG,GAAGH,WAAW,CAACG,GAAG;IACvC,IAAIC,IAAI,GAAGF,OAAO,CAACE,IAAI,GAAGJ,WAAW,CAACI,IAAI;IAE1C,OAAO;MACLxH,CAAC,EAAEwH,IAAI;MACPpH,CAAC,EAAEmH,GAAG,GAAGD,OAAO,CAACjH,MAAM,GAAGyG;KAC3B;EACH;EAEA;;;;;;;;;;;EAWA,SAAStB,YAAY,CAACxG,IAAI,EAAE0C,SAAS,EAAEqE,KAAK,EAAED,KAAK,EAAE3J,OAAO;IAC1D,IAAI,OAAO4J,KAAK,KAAK,QAAQ,EAAE;MAC7B5J,OAAO,GAAG4J,KAAK;MACfA,KAAK,GAAGxC,SAAS,CAAC,QAAQ,EAAE;QAAEvE,IAAI,EAAEA,IAAI,CAACmG,OAAO,CAAC,eAAe,EAAE,EAAE;MAAC,CAAE,CAAC;;IAG1E,SAASsC,WAAW,CAACzC,KAAK,EAAEjG,OAAO;MACjC,IAAI2I,KAAK,GAAGxK,cAAc,CAACyK,WAAW,CAAChM,gDAAM,CAAC;QAAEqD,IAAI,EAAEA;MAAI,CAAE,EAAE7C,OAAO,CAAC,CAAC;MACvE,IAAIqI,OAAO,GAAG;QACZtG,QAAQ,EAAE,CAACwJ,KAAK,CAAC;QACjBE,KAAK,EAAE,EAAE;QACT9J,MAAM,EAAEiB;OACT;MACDzB,MAAM,CAAC4H,KAAK,CAACF,KAAK,EAAE0C,KAAK,EAAElD,OAAO,CAAC;IACrC;IAEA,OAAO;MACLsB,KAAK,EAAEA,KAAK;MACZpE,SAAS,EAAEA,SAAS;MACpBqE,KAAK,EAAE,SAAS,GAAGA,KAAK;MACxBxE,MAAM,EAAE;QACNoF,SAAS,EAAE9C,YAAY;QACvBmC,KAAK,EAAEyB;;KAEV;EACH;AACF;AAEA5L,+CAAQ,CAACuH,6BAA6B,EAAEP,2FAAkB,CAAC;AAE3DO,6BAA6B,CAACzC,OAAO,GAAG,CACtC,UAAU,EACV,SAAS,EACT,WAAW,EACX,gBAAgB,EAChB,QAAQ,EACR,QAAQ,EACR,YAAY,EACZ,WAAW,EACX,qBAAqB,EACrB,cAAc,EACd,UAAU,EACV,UAAU,CACX;;;;;;;;;;;;;;;;;;;;AC/VY;;AAEqB;AAEF;AAE8C;AAEd;AAEN;AAE1D;;;AAGc,SAAUqH,yBAAyB,CAACC,WAAW,EAAEC,MAAM;EACnEL,oFAAkB,CAACzL,IAAI,CAAC,IAAI,EAAE6L,WAAW,EAAEC,MAAM,CAAC;EAElD,IAAI/G,IAAI,GAAG,IAAI;EACf,IAAIgH,oBAAoB,GAAG,IAAIJ,6DAAoB,EAAE;EAErD;;;;;;;;EAQA,IAAI,CAACzK,MAAM,GAAG,UAAU8K,WAAW,EAAEC,KAAK;IACxC,IAAIrJ,IAAI,GAAGqJ,KAAK,CAACrJ,IAAI;IAErB,IAAIoJ,WAAW,KAAK,OAAO,EAAE;MAC3B,OAAOjH,IAAI,CAACmH,UAAU,CACpBF,WAAW,EACXzM,gDAAM,CAAC;QAAEqD,IAAI,EAAE;MAAO,CAAE,EAAE8I,0EAAkB,EAAEO,KAAK,CAAC,CACrD;;IAGH;IACA,IAAI,eAAe,CAACE,IAAI,CAACvJ,IAAI,CAAC,EAAE;MAC9B,IAAI,CAACqJ,KAAK,CAACjL,cAAc,EAAE;QACzBiL,KAAK,CAACjL,cAAc,GAAG;UACrB4B,IAAI,EAAEA,IAAI;UACVsB,IAAI,EAAE+H,KAAK,CAAC/H,IAAI,GAAG+H,KAAK,CAAC/H,IAAI,GAAG;SACjC;;MAGH,IAAI+H,KAAK,CAAC7K,EAAE,EAAE;QACZ2K,oBAAoB,CAACK,UAAU,CAACH,KAAK,CAAC7K,EAAE,CAAC;OAC1C,MAAM;QACL6K,KAAK,CAAC7K,EAAE,GAAG2K,oBAAoB,CAACM,KAAK,CAACL,WAAW,CAAC;;MAEpDzM,gDAAM,CAAC0M,KAAK,CAACjL,cAAc,EAAE;QAC3BI,EAAE,EAAE6K,KAAK,CAAC7K;OACX,CAAC;MAEF,IAAIA,EAAE,GAAG6K,KAAK,CAAC7K,EAAE;MACjB6K,KAAK,CAACjL,cAAc,CAACH,GAAG,GAAG,UAAUyL,GAAG;QACtC,IAAIA,GAAG,KAAK,IAAI,EAAE;UAChB,OAAOlL,EAAE;;MAEb,CAAC;MACD6K,KAAK,CAACjL,cAAc,CAACuL,GAAG,GAAG,UAAUD,GAAG,EAAEhE,KAAK;QAC7C,IAAIgE,GAAG,KAAK,IAAI,EAAE;UAChB/M,gDAAM,CAAC0M,KAAK,CAACjL,cAAc,EAAE;YAAEI,EAAE,EAAEkH;UAAK,CAAE,CAAC;;MAE/C,CAAC;MAED,IAAI,CAAC2D,KAAK,CAACjL,cAAc,CAACwL,KAAK,EAAE;QAC/BjN,gDAAM,CAAC0M,KAAK,CAACjL,cAAc,EAAE;UAAEwL,KAAK,EAAE;QAAS,CAAE,CAAC;;MAEpDjN,gDAAM,CAAC0M,KAAK,CAACjL,cAAc,EAAE;QAAEyL,EAAE,EAAE;MAAE,CAAE,CAAC;MACxC,IAAI,CAACR,KAAK,CAACjL,cAAc,CAAC0L,WAAW,EAAE;QACrCnN,gDAAM,CAAC0M,KAAK,CAACjL,cAAc,EAAE;UAAE0L,WAAW,EAAE;QAAE,CAAE,CAAC;;MAGnD;MACA,IACE,CAAC,CAAC,YAAY,CAACP,IAAI,CAACvJ,IAAI,CAAC,IAAI,CAAC,cAAc,CAACuJ,IAAI,CAACvJ,IAAI,CAAC,KACvD,EAAG,SAAS,CAACuJ,IAAI,CAACvJ,IAAI,CAAC,IAAIqJ,KAAK,CAAChI,MAAM,IAAKgI,KAAK,CAAClI,KAAK,CAAC,EACxD;QACAxE,gDAAM,CAAC0M,KAAK,EAAElH,IAAI,CAAC4H,qBAAqB,CAAC/J,IAAI,CAAC,CAAC;;MAGjD,IAAI,EAAE,aAAa,IAAIqJ,KAAK,CAACjL,cAAc,CAAC,EAAE;QAC5C;QACA4L,MAAM,CAACC,cAAc,CAACZ,KAAK,CAACjL,cAAc,EAAE,aAAa,EAAE;UACzDsH,KAAK,EAAE,UAAU1F,IAAI;YACnB,OAAO,IAAI,CAACA,IAAI,KAAKA,IAAI;UAC3B;SACD,CAAC;;MAGJ,OAAOmC,IAAI,CAACmH,UAAU,CAACF,WAAW,EAAEC,KAAK,CAAC;;IAG5C,OAAOlH,IAAI,CAAC+H,iBAAiB,CAACd,WAAW,EAAEC,KAAK,CAAC;EACnD,CAAC;AACH;AAEAxM,+CAAQ,CAACmM,yBAAyB,EAAEH,oFAAkB,CAAC;AAEvDG,yBAAyB,CAACrH,OAAO,GAAG,CAAC,aAAa,EAAE,QAAQ,CAAC;AAE7D;;;;;;;;;;AAUAqH,yBAAyB,CAACzL,SAAS,CAACwM,qBAAqB,GAAG,UAAU/J,IAAI;EACxE,IAAIT,MAAM,GAAG;IACX4K,SAAS,EAAE;MAAEhJ,KAAK,EAAE,EAAE;MAAEE,MAAM,EAAE;IAAE,CAAE;IACpC,4BAA4B,EAAE;MAAEF,KAAK,EAAE,GAAG;MAAEE,MAAM,EAAE;IAAE,CAAE;IACxD,mBAAmB,EAAE;MAAEF,KAAK,EAAE,GAAG;MAAEE,MAAM,EAAE;IAAG;GAC/C;EAED,OAAO9B,MAAM,CAACS,IAAI,CAAC,IAAIT,MAAM,CAAC4K,SAAS;AACzC,CAAC;AAED,MAAMC,UAAU;;;;;;;;;;;;;;;AC7HH;;AAEb,IAAIC,MAAM,GAAG,EAAE;AAED,SAAUtB,oBAAoB,IAAI;AAEhDA,oBAAoB,CAACxL,SAAS,CAACkM,KAAK,GAAG,UAAUzJ,IAAI;EACnD,OAAOsK,UAAU,CAACtK,IAAI,CAAC;AACzB,CAAC;AAED+I,oBAAoB,CAACxL,SAAS,CAACiM,UAAU,GAAG,UAAUhL,EAAE;EACtD6L,MAAM,CAACtM,IAAI,CAACS,EAAE,CAAC;AACjB,CAAC;AAED,SAAS8L,UAAU,CAACtK,IAAI;EACtB,IAAIuK,QAAQ,GAAGC,YAAY,EAAE;EAE7B,IAAIhM,EAAE,GAAGwB,IAAI,GAAG,GAAG,GAAGyK,QAAQ,CAACF,QAAQ,CAAC;EAExC,OAAOG,UAAU,CAAClM,EAAE,CAAC,EAAE;IACrB+L,QAAQ,EAAE;IAEV/L,EAAE,GAAGwB,IAAI,GAAG,GAAG,GAAGyK,QAAQ,CAACF,QAAQ,CAAC;;EAGtCF,MAAM,CAACtM,IAAI,CAACS,EAAE,CAAC;EACf,OAAOA,EAAE;AACX;AAEA,SAASiM,QAAQ,CAACF,QAAQ;EACxB,IAAI/L,EAAE;EACN,IAAI+L,QAAQ,GAAG,IAAI,EAAE;IACnB/L,EAAE,GAAG,CAAC;GACP,MAAM,IAAI+L,QAAQ,GAAG,EAAE,EAAE;IACxB/L,EAAE,GAAG,KAAK,GAAG+L,QAAQ;GACtB,MAAM,IAAIA,QAAQ,GAAG,GAAG,EAAE;IACzB/L,EAAE,GAAG,IAAI,GAAG+L,QAAQ;GACrB,MAAM,IAAIA,QAAQ,GAAG,IAAI,EAAE;IAC1B/L,EAAE,GAAG,GAAG,GAAG+L,QAAQ;GACpB,MAAM;IACL/L,EAAE,GAAG,EAAE,GAAG+L,QAAQ;;EAEpB,OAAO/L,EAAE;AACX;AAEA,SAASgM,YAAY;EACnB,OAAOvJ,IAAI,CAAC0J,KAAK,CAAC1J,IAAI,CAAC2J,MAAM,EAAE,GAAG,KAAK,CAAC;AAC1C;AAEM,SAAUF,UAAU,CAAClM,EAAE;EAC3B,IAAIqM,IAAI,GAAG,KAAK;EAChBR,MAAM,CAAC3K,OAAO,CAAEK,OAAO,IAAI;IACzB,IAAIvB,EAAE,KAAKuB,OAAO,EAAE;MAClB8K,IAAI,GAAG,IAAI;;EAEf,CAAC,CAAC;EACF,OAAOA,IAAI;AACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzDa;;AAEmB;AAC4B;AACtC;AACoD;AACI;AAM5D;AAC0B;AACA;AACuB;AAKpC;AAE6B;AACI;AACE;AACR;AAE1D,IAAIuB,YAAY,GAAG,IAAIrB,2CAAG,EAAE;AAC5B,IAAIsB,OAAO,GAAG,EAAE;AAChB,MAAMC,aAAa,GAAG,OAAO;AAE7B;;;AAGA,IAAIvJ,cAAc;AAClB,IAAInE,eAAe;AACnB,IAAIuF,SAAS;AAEP,SAAUoI,kBAAkB,CAChC1J,qBAAqB,EACrB2J,sBAAsB,EACtBvI,gBAAgB;EAEhBlB,cAAc,GAAGF,qBAAqB;EACtCjE,eAAe,GAAG4N,sBAAsB;EACxCrI,SAAS,GAAGF,gBAAgB;AAC9B;AAEc,SAAUwI,mBAAmB,CACzC7H,QAAQ,EACR8H,MAAM,EACN1O,MAAM,EACN2O,YAAY,EACZC,OAAO,EACPjI,YAAY;EAEZmG,wEAAY,CAAC1N,IAAI,CAAC,IAAI,EAAEwH,QAAQ,EAAE,IAAI,CAAC;EAEvC,IAAIiI,UAAU,GAAGT,YAAY,CAACU,IAAI,EAAE;EACpC,IAAIC,OAAO,GAAG,EAAE;EAChB,IAAIC,YAAY,GAAGN,MAAM,CAACM,YAAY;EAEtC;EACA,SAASC,sBAAsB,CAACC,SAAS,EAAEnN,OAAO,EAAEoN,GAAG;IACrD;IACA;IACA;IAEA,IAAIC,WAAW,GAAGvB,gFAAc,EAAE;IAClC,IAAIwB,QAAQ,GAAGtN,OAAO,CAAC3B,cAAc;IAErC,IAAIgP,WAAW,CAACE,GAAG,EAAE;MACnBD,QAAQ,CAACE,MAAM,GAAGH,WAAW,CAACG,MAAM;;IAGtCJ,GAAG,CAACnM,CAAC,IAAI,EAAE;IACXmM,GAAG,CAAC/L,CAAC,IAAI,EAAE;IACXoM,YAAY,CAACN,SAAS,EAAE,GAAG,EAAEO,kBAAkB,CAACN,GAAG,CAAC,EAAEpN,OAAO,CAACC,IAAI,CAAC;IACnEmN,GAAG,CAACnM,CAAC,IAAI,EAAE;IACXmM,GAAG,CAAC/L,CAAC,IAAI,CAAC;IACVoM,YAAY,CAACN,SAAS,EAAE,GAAG,EAAEQ,kBAAkB,CAACP,GAAG,CAAC,EAAEpN,OAAO,CAACC,IAAI,CAAC;IAEnEqM,OAAO,CAACgB,QAAQ,CAACE,MAAM,CAAC,GAAG,IAAI;IAC/BJ,GAAG,CAACnM,CAAC,IAAI,CAAC;IACVmM,GAAG,CAAC/L,CAAC,IAAI,CAAC;IAEV,IAAIiM,QAAQ,CAACE,MAAM,GAAG,EAAE,EAAE;MACxBJ,GAAG,CAACnM,CAAC,IAAI,CAAC;;IAGZ,IAAI2M,iBAAiB,GAAGH,YAAY,CAClCN,SAAS,EACTG,QAAQ,CAACE,MAAM,EACfK,WAAW,CAACT,GAAG,CAAC,EAChBpN,OAAO,CAACC,IAAI,CACb;IACD8L,yEAAmB,CAAC6B,iBAAiB,EAAEN,QAAQ,CAACE,MAAM,CAAC;EACzD;EAEA;EACA,SAASK,WAAW,CAACT,GAAG;IACtB,OAAO;MACLA,GAAG,EAAEA,GAAG;MACRU,MAAM,EAAE,IAAI;MACZC,KAAK,EAAEnR,iDAAM,CAAC,EAAE,EAAEgQ,YAAY,CAACoB,gBAAgB,EAAE,EAAE;QACjDC,IAAI,EAAE,OAAO;QACb3G,QAAQ,EAAE;OACX;KACF;EACH;EAEA,SAASqG,kBAAkB,CAACP,GAAG;IAC7B,OAAO;MACLA,GAAG,EAAEA,GAAG;MACRU,MAAM,EAAE,IAAI;MACZC,KAAK,EAAEnR,iDAAM,CAAC,EAAE,EAAEgQ,YAAY,CAACoB,gBAAgB,EAAE,EAAE;QACjDC,IAAI,EAAE,OAAO;QACbC,QAAQ,EAAE,EAAE;QACZ5G,QAAQ,EAAE,UAAU;QACpB6G,UAAU,EAAE;OACb;KACF;EACH;EAEA,SAAST,kBAAkB,CAACN,GAAG;IAC7B,OAAO;MACLA,GAAG,EAAEA,GAAG;MACRU,MAAM,EAAE,IAAI;MACZC,KAAK,EAAEnR,iDAAM,CAAC,EAAE,EAAEgQ,YAAY,CAACoB,gBAAgB,EAAE,EAAE;QACjDC,IAAI,EAAE,OAAO;QACbC,QAAQ,EAAE,GAAG;QACb5G,QAAQ,EAAE,UAAU;QACpB6G,UAAU,EAAE;OACb;KACF;EACH;EAEA;EACA;EACA,SAASC,mBAAmB,CAACjB,SAAS,EAAEnN,OAAO,EAAEqO,KAAK,EAAEC,OAAO;IAC7D,IAAIjQ,cAAc,GAAG2B,OAAO,CAAC3B,cAAc;IAC3C,OAAOkQ,WAAW,CAChBpB,SAAS,EACT9O,cAAc,CAACkD,IAAI,EACnB;MACE6L,GAAG,EAAEpN,OAAO;MACZqO,KAAK,EAAEA,KAAK;MACZC,OAAO,EAAEA,OAAO,GAAGA,OAAO,GAAG,CAAC;MAC9BP,KAAK,EAAE;QACLE,IAAI,EAAE;;KAET,EACDjO,OAAO,CAACC,IAAI,CACb;EACH;EAEA;EACA,SAASuO,mBAAmB,CAACrB,SAAS,EAAEnN,OAAO;IAC7C,IAAIsN,QAAQ,GAAGtN,OAAO,CAAC3B,cAAc;IACrC,IAAIoQ,SAAS,GAAGzO,OAAO,CAACyO,SAAS;IACjC,IAAIC,KAAK,GAAGxC,8DAAU,CAACoB,QAAQ,CAAC/L,IAAI,CAAC;IAErC,IAAIvB,OAAO,CAACyO,SAAS,IAAI,IAAI,EAAE;MAC7B,IAAInH,QAAQ,GAAG6E,iEAAa,CAACsC,SAAS,EAAEC,KAAK,CAAC;MAC9C,IAAIC,UAAU,GAAG3O,OAAO,CAACyO,SAAS,CAACnH,QAAQ,CAACsH,QAAQ,CAAC;MACrD,IAAIC,QAAQ,GAAG7O,OAAO,CAACyO,SAAS,CAACnH,QAAQ,CAACsH,QAAQ,GAAG,CAAC,CAAC;MACvD,IAAIE,KAAK,GAAG1C,mEAAY,CAACuC,UAAU,EAAEE,QAAQ,CAAC;MAC9C,IAAIE,SAAS,GAAG,MAAM;MACtB,IAAIC,QAAQ,GAAG,GAAG;MAClB,IAAIC,MAAM,GAAG3H,QAAQ,CAACrG,CAAC;MAEvB;MACA,IAAI6N,KAAK,KAAK,CAAC,IAAIA,KAAK,KAAK,GAAG,EAAE;QAChCE,QAAQ,GAAG9N,IAAI,CAACgO,GAAG,CAACP,UAAU,CAAC1N,CAAC,GAAG4N,QAAQ,CAAC5N,CAAC,CAAC;QAC9C8N,SAAS,GAAG,QAAQ;QACpBE,MAAM,GACJ,CAACN,UAAU,CAAC1N,CAAC,GAAG4N,QAAQ,CAAC5N,CAAC,IAAI,CAAC,GAAGgL,yEAAkB,CAACqB,QAAQ,CAAC/L,IAAI,CAAC;;MAGvE,IAAI6L,GAAG,GAAG;QACR+B,SAAS,EAAEJ,SAAS;QACpB3N,KAAK,EAAE4N,QAAQ;QACf1N,MAAM,EAAE,EAAE;QACVL,CAAC,EAAEgO,MAAM;QACT5N,CAAC,EAAEiG,QAAQ,CAACjG;OACb;MAED,IAAIiM,QAAQ,CAAC/L,IAAI,IAAI+L,QAAQ,CAAC/L,IAAI,CAAC6N,MAAM,EAAE;QACzC,OAAOb,WAAW,CAChBpB,SAAS,EACTG,QAAQ,CAAC/L,IAAI,EACb;UACE6L,GAAG,EAAEA,GAAG;UACRU,MAAM,EAAE,IAAI;UACZC,KAAK,EAAEnR,iDAAM,CAAC,EAAE,EAAEgQ,YAAY,CAACoB,gBAAgB,EAAE,EAAE;YACjDC,IAAI,EAAE,OAAO;YACboB,QAAQ,EAAE,YAAY;YACtBC,YAAY,EAAE,YAAY;YAC1BC,OAAO,EAAE;WACV;SACF,EACDvP,OAAO,CAACC,IAAI,CACb;;;EAGP;EAEA;EACA,SAASuP,oBAAoB,CAACrC,SAAS,EAAEnN,OAAO;IAC9C,IAAIA,OAAO,IAAIA,OAAO,CAACjB,MAAM,EAAE;MAC7B,IAAIuO,QAAQ,GAAGtN,OAAO,CAAC3B,cAAc;MAErC,IAAI+O,GAAG,GAAGpB,0EAAoB,CAAChM,OAAO,CAAC;MAEvC,IACEsN,QAAQ,CAACE,MAAM,IAAI,IAAI,IACvBxN,OAAO,CAACjB,MAAM,CAACkB,IAAI,IACnBD,OAAO,CAACjB,MAAM,CAACkB,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACiG,KAAK,CAAC,EAChD;QACAa,6EAAuB,CAAChE,OAAO,EAAE4E,YAAY,CAAC;;MAGhD;MACA,IAAI0I,QAAQ,CAACE,MAAM,IAAIxN,OAAO,CAACjB,MAAM,CAACkB,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACiG,KAAK,CAAC,EAAE;QACvE+J,sBAAsB,CAACC,SAAS,EAAEnN,OAAO,EAAEoN,GAAG,CAAC;OAChD,MAAM;QACLE,QAAQ,CAACE,MAAM,GAAG,IAAI;;;EAG5B;EAEA;EACA,SAASC,YAAY,CAACN,SAAS,EAAEK,MAAM,EAAEpQ,OAAO,EAAE6C,IAAI;IACpD,IAAIuN,MAAM,GAAG,EAAE,EAAE;MACfA,MAAM,GAAGiC,MAAM,CAACjC,MAAM,CAAC;;IAEzBA,MAAM,GAAGiC,MAAM,CAACjC,MAAM,CAAC;IACvB,IAAIkC,IAAI,GAAG9C,YAAY,CAAC+C,UAAU,CAACnC,MAAM,IAAI,EAAE,EAAEpQ,OAAO,CAAC;IACzD,IAAIkE,MAAM,GAAG,CAAC;IAEdmK,kDAAU,CAACiE,IAAI,CAAC,CAACE,GAAG,CAAC,iBAAiB,CAAC;IAEvCC,cAAc,CAAC5P,IAAI,EAAEyP,IAAI,EAAEtS,OAAO,EAAEkE,MAAM,EAAE6L,SAAS,CAAC;IAEtD9B,iDAAS,CAAC8B,SAAS,EAAEuC,IAAI,CAAC;IAC1B,OAAOA,IAAI;EACb;EAEA;EACA,SAASG,cAAc,CAAC5P,IAAI,EAAEyP,IAAI,EAAEtS,OAAO,EAAEkE,MAAM,EAAE6L,SAAS;IAC5D,IAAI,YAAY,CAAC3D,IAAI,CAACvJ,IAAI,CAAC,EAAE;MAC3ByP,IAAI,CAACI,SAAS,GAAGC,yBAAyB,CACxCL,IAAI,CAAC3R,QAAQ,EACbX,OAAO,CAACgQ,GAAG,CAACnM,CAAC,EACb,CAAC,CACF;MACDyO,IAAI,CAACI,SAAS,GAAGE,yBAAyB,CACxCN,IAAI,CAAC3R,QAAQ,EACbX,OAAO,CAACgQ,GAAG,CAAC/L,CAAC,EACb,CAAC,CACF;KACF,MAAM,IAAI,QAAQ,CAACmI,IAAI,CAACvJ,IAAI,CAAC,EAAE;MAC9BqB,MAAM,GAAG6L,SAAS,CAAC8C,UAAU,CAACC,UAAU,CAAC5O,MAAM,CAAC6O,SAAS;MACzDT,IAAI,CAACI,SAAS,GAAGE,yBAAyB,CAACN,IAAI,CAAC3R,QAAQ,EAAEuD,MAAM,EAAE,CAAC,CAAC;KACrE,MAAM,IAAI,aAAa,CAACkI,IAAI,CAACvJ,IAAI,CAAC,EAAE;MACnCqB,MAAM,GAAG6L,SAAS,CAAC8C,UAAU,CAACC,UAAU,CAAC5O,MAAM,CAAC6O,SAAS;MACzDT,IAAI,CAACI,SAAS,GAAGE,yBAAyB,CAACN,IAAI,CAAC3R,QAAQ,EAAEuD,MAAM,EAAE,EAAE,CAAC;;EAEzE;EAEA;EACA,SAASiN,WAAW,CAACpB,SAAS,EAAEzK,KAAK,EAAEtF,OAAO,EAAE6C,IAAI;IAClD,IAAIyP,IAAI,GAAG9C,YAAY,CAAC+C,UAAU,CAACjN,KAAK,IAAI,EAAE,EAAEtF,OAAO,CAAC;IACxD,IAAIkE,MAAM,GAAG,CAAC;IAEdmK,kDAAU,CAACiE,IAAI,CAAC,CAACE,GAAG,CAAC,WAAW,CAAC;IACjCC,cAAc,CAAC5P,IAAI,EAAEyP,IAAI,EAAEtS,OAAO,EAAEkE,MAAM,EAAE6L,SAAS,CAAC;IAEtD9B,iDAAS,CAAC8B,SAAS,EAAEuC,IAAI,CAAC;IAC1B,OAAOA,IAAI;EACb;EAEA;EACA,SAASM,yBAAyB,CAACjS,QAAQ,EAAEsD,CAAC,EAAE+O,MAAM;IACpD,IAAIrS,QAAQ,EAAE;MACZ,IAAIsS,MAAM,GAAG,EAAE;MACf,KAAK,IAAIhN,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGtF,QAAQ,CAACqR,MAAM,EAAE/L,CAAC,EAAE,EAAE;QACxCgN,MAAM,IAAItS,QAAQ,CAACsF,CAAC,CAAC,CAACiN,SAAS,CAAClK,OAAO,CACrC,eAAe,EACf,KAAK,IAAImK,MAAM,CAAClP,CAAC,CAAC,GAAG+O,MAAM,GAAG,EAAE,GAAG/M,CAAC,CAAC,GAAG,GAAG,CAC5C;;MAEH,OAAOgN,MAAM;;EAEjB;EAEA;EACA,SAASN,yBAAyB,CAAChS,QAAQ,EAAEkD,CAAC,EAAEmP,MAAM;IACpD,IAAIrS,QAAQ,EAAE;MACZ,IAAIsS,MAAM,GAAG,EAAE;MACf,KAAK,IAAIhN,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGtF,QAAQ,CAACqR,MAAM,EAAE/L,CAAC,EAAE,EAAE;QACxCgN,MAAM,IAAItS,QAAQ,CAACsF,CAAC,CAAC,CAACiN,SAAS,CAAClK,OAAO,CACrC,eAAe,EACf,KAAK,IAAImK,MAAM,CAACtP,CAAC,CAAC,GAAGmP,MAAM,GAAG,EAAE,CAAC,GAAG,GAAG,CACxC;;MAEH,OAAOC,MAAM;;EAEjB;EAEA;EACA,IAAI,CAACG,SAAS,GAAG,UAAUrD,SAAS,EAAEnN,OAAO;IAC3C,IAAI,CAACA,OAAO,CAAC3B,cAAc,CAACoS,WAAW,EAAE;MACvCzQ,OAAO,CAAC3B,cAAc,CAACoS,WAAW,GAAGlE,aAAa;;IAEpD,IAAImE,IAAI,GAAGC,QAAQ,CACjBxD,SAAS,EACTnN,OAAO,CAACoB,KAAK,EACbpB,OAAO,CAACsB,MAAM,EACd,CAAC,EACD1E,iDAAM,CACJ;MACEqR,IAAI,EAAE,MAAM;MACZ2C,MAAM,EAAE5Q,OAAO,CAAC3B,cAAc,CAACoS;KAChC,EACDzQ,OAAO,CAACsJ,KAAK,CACd,CACF;IACD8E,mBAAmB,CAACjB,SAAS,EAAEnN,OAAO,EAAE,UAAU,EAAE,CAAC,CAAC;IAEtD,OAAO0Q,IAAI;EACb,CAAC;EAED,SAASG,kBAAkB,CAAC7Q,OAAO,EAAE8Q,OAAO;IAC1C,IAAI,CAAC9Q,OAAO,CAAC3B,cAAc,CAACoS,WAAW,EAAE;MACvCzQ,OAAO,CAAC3B,cAAc,CAACoS,WAAW,GAAGlE,aAAa;;IAEpD,MAAMwE,KAAK,GAAGD,OAAO,CAACC,KAAK,CAAC,YAAY,CAAC;IACzC,IAAIA,KAAK,IAAIA,KAAK,CAAC3B,MAAM,GAAG,CAAC,EAAE;MAC7B,OAAO0B,OAAO,CAAC1K,OAAO,CACpB,YAAY,EACZ,QAAQ,GAAGpG,OAAO,CAAC3B,cAAc,CAACoS,WAAW,GAAG,GAAG,CACpD;KACF,MAAM;MACL,MAAMO,KAAK,GAAGF,OAAO,CAACG,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC;MAC1C,OACEH,OAAO,CAACI,SAAS,CAAC,CAAC,EAAEF,KAAK,CAAC,GAC3B,UAAU,GACVhR,OAAO,CAAC3B,cAAc,CAACoS,WAAW,GAClC,IAAI,GACJK,OAAO,CAACI,SAAS,CAACF,KAAK,CAAC;;EAG9B;EAEA,SAASG,UAAU,CAACL,OAAO,EAAE9Q,OAAO;IAClC,IAAI8Q,OAAO,CAACM,UAAU,CAAC,MAAM,CAAC,EAAE;MAC9B,OACE,gIAAgI,GAChI,4CAA4C,GAC5CN,OAAO,GACP,WAAW;KAEd,MAAM;MACL,OAAOD,kBAAkB,CAAC7Q,OAAO,EAAE8Q,OAAO,CAAC;;EAE/C;EAEA,IAAI,CAACO,SAAS,GAAG,UAAUC,CAAC,EAAEtR,OAAO;IACnC,IAAIuR,wBAAwB,GAAG;QAC3BnQ,KAAK,EAAEpB,OAAO,CAACoB,KAAK;QACpBE,MAAM,EAAEtB,OAAO,CAACsB;OACjB;MACDkQ,KAAK;IACP,IAAIV,OAAO,GAAG9N,cAAc,CAACyO,cAAc,CACzCvU,4EAAY,CAACiG,KAAK,EAClBnD,OAAO,CAACC,IAAI,CACb;IACD6Q,OAAO,GAAGK,UAAU,CAACL,OAAO,EAAE9Q,OAAO,CAAC;IACtCwR,KAAK,GAAG9F,iDAAS,CAACoF,OAAO,CAAC;IAE1BvF,+CAAO,CAACiG,KAAK,EAAED,wBAAwB,CAAC;IACxClG,iDAAS,CAACiG,CAAC,EAAEE,KAAK,CAAC;IAEnBpD,mBAAmB,CAACkD,CAAC,EAAEtR,OAAO,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC;IAC7C,OAAOwR,KAAK;EACd,CAAC;EAED,IAAI,CAACE,cAAc,GAAG,UAAUJ,CAAC,EAAEtR,OAAO;IACxC,IAAIuR,wBAAwB,GAAG;QAC3BnQ,KAAK,EAAEpB,OAAO,CAACoB,KAAK,GAAG,IAAI;QAC3BE,MAAM,EAAEtB,OAAO,CAACsB,MAAM,GAAG,IAAI;QAC7BL,CAAC,EAAEjB,OAAO,CAACoB,KAAK,GAAG,CAAC,GAAG,EAAE;QACzBC,CAAC,EAAErB,OAAO,CAACsB,MAAM,GAAG,CAAC,GAAG;OACzB;MACDqQ,UAAU;IACZ,IAAIb,OAAO,GAAG9N,cAAc,CAACyO,cAAc,CACzCvU,4EAAY,CAAC0G,UAAU,EACvB5D,OAAO,CAACC,IAAI,CACb;IACD6Q,OAAO,GAAGK,UAAU,CAACL,OAAO,EAAE9Q,OAAO,CAAC;IACtC2R,UAAU,GAAGjG,iDAAS,CAACoF,OAAO,CAAC;IAE/BvF,+CAAO,CAACoG,UAAU,EAAEJ,wBAAwB,CAAC;IAC7ClG,iDAAS,CAACiG,CAAC,EAAEK,UAAU,CAAC;IACxBvD,mBAAmB,CAACkD,CAAC,EAAEtR,OAAO,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC;IAE7C,OAAO2R,UAAU;EACnB,CAAC;EAED,SAASC,mBAAmB,CAAC5R,OAAO;IAClC,IAAI,CAACA,OAAO,CAAC3B,cAAc,CAACoS,WAAW,EAAE;MACvCzQ,OAAO,CAAC3B,cAAc,CAACoS,WAAW,GAAG,OAAO;;IAE9C,IAAInH,KAAK,GAAG,EAAE;IACd,OAAO2D,YAAY,CAAC3D,KAAK,EAAE;MACzBsH,MAAM,EAAE5Q,OAAO,CAAC3B,cAAc,CAACoS,WAAW;MAC1CxC,IAAI,EAAE,MAAM;MACZ4D,WAAW,EAAE,GAAG;MAChBC,cAAc,EAAE,OAAO;MACvBC,SAAS,EAAEC,MAAM,CACf,UAAU,EACV,OAAO,EACPhS,OAAO,CAAC3B,cAAc,CAACoS,WAAW;KAErC,CAAC;EACJ;EAEA,IAAI,CAACwB,YAAY,GAAG,UAAUX,CAAC,EAAEtR,OAAO;IACtCkS,oBAAoB,CAAClS,OAAO,CAAC;IAE7B,IAAIA,OAAO,EAAE;MACX,IAAIsJ,KAAK,GAAGsI,mBAAmB,CAAC5R,OAAO,CAAC;MAExC,IAAIiB,CAAC,GAAGoK,iDAAS,CAACiG,CAAC,EAAEnG,2EAAU,CAACnL,OAAO,CAACyO,SAAS,EAAEnF,KAAK,CAAC,CAAC;MAC1DkF,mBAAmB,CAAC8C,CAAC,EAAEtR,OAAO,CAAC;MAC/BwP,oBAAoB,CAAC8B,CAAC,EAAEtR,OAAO,CAAC;MAEhC;MACA;MACA;MACA;MACAmS,mBAAmB,CAACb,CAAC,CAACc,aAAa,CAAC;MAEpC,OAAOnR,CAAC;;EAEZ,CAAC;EAED,SAASoR,wBAAwB,CAACC,KAAK,EAAEvT,MAAM;IAC7C,IAAIuT,KAAK,CAACjR,CAAC,GAAGtC,MAAM,CAACsC,CAAC,GAAG,EAAE,EAAE;MAC3B,IAAIiR,KAAK,CAACrR,CAAC,GAAGlC,MAAM,CAACkC,CAAC,GAAG,CAAC,IAAIqR,KAAK,CAACrR,CAAC,GAAGlC,MAAM,CAACkC,CAAC,GAAG,EAAE,EAAE;QACrD,IAAIsR,UAAU,GAAGC,aAAa,CAACzT,MAAM,CAAC;QACtC,IAAIA,MAAM,CAACsC,CAAC,GAAG,EAAE,GAAGkR,UAAU,GAAGD,KAAK,CAACjR,CAAC,EAAE;UACxCiR,KAAK,CAACjR,CAAC,IAAIkR,UAAU;;;;EAI7B;EAEA,SAASL,oBAAoB,CAAClS,OAAO;IACnC,IAAIjB,MAAM,GAAGiB,OAAO,CAACjB,MAAM;IAC3B,IAAIC,MAAM,GAAGgB,OAAO,CAAChB,MAAM;IAE3B,IAAIyP,SAAS,GAAGzO,OAAO,CAACyO,SAAS;IACjC,IAAIE,UAAU,GAAGF,SAAS,CAAC,CAAC,CAAC;IAC7B,IAAII,QAAQ,GAAGJ,SAAS,CAACA,SAAS,CAACW,MAAM,GAAG,CAAC,CAAC;IAE9C,IAAIT,UAAU,IAAIE,QAAQ,IAAI9P,MAAM,IAAIC,MAAM,EAAE;MAC9CqT,wBAAwB,CAAC1D,UAAU,EAAE5P,MAAM,CAAC;MAC5CsT,wBAAwB,CAACxD,QAAQ,EAAE9P,MAAM,CAAC;;EAE9C;EAEA,SAASyT,aAAa,CAACxS,OAAO;IAC5B,IAAIvB,EAAE,GAAGuB,OAAO,CAACvB,EAAE;IACnB,IAAI2R,MAAM,GAAG,CAAC;IAEd,IAAIqC,OAAO,GAAGpN,QAAQ,CAACqN,sBAAsB,CAAC,uBAAuB,CAAC;IACtE,KAAK,IAAIrP,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoP,OAAO,CAACrD,MAAM,EAAE/L,CAAC,EAAE,EAAE;MACvC,IAAIsP,OAAO,GAAGF,OAAO,CAACG,IAAI,CAACvP,CAAC,CAAC,CAACwP,YAAY,CAAC,iBAAiB,CAAC;MAC7D,IAAIF,OAAO,KAAKlU,EAAE,EAAE;QAClB,IAAIqU,MAAM,GAAGL,OAAO,CAACG,IAAI,CAACvP,CAAC,CAAC;QAC5B,IAAIqM,IAAI,GAAGoD,MAAM,CAACC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACjD,IAAIC,MAAM,GAAGtD,IAAI,CAACqD,oBAAoB,CAAC,OAAO,CAAC;QAC/C,IAAIE,KAAK,GAAGD,MAAM,CAACA,MAAM,CAAC5D,MAAM,GAAG,CAAC,CAAC;QACrCgB,MAAM,GAAG6C,KAAK,CAACJ,YAAY,CAAC,GAAG,CAAC;;;IAGpC,OAAOzC,MAAM,GAAG,EAAE;EACpB;EAEA,SAAS+B,mBAAmB,CAACe,gBAAgB;IAC3C,IAAIA,gBAAgB,EAAE;MACpB,IAAIC,SAAS,GAAGD,gBAAgB,CAACH,oBAAoB,CAAC,UAAU,CAAC;MACjE,IAAII,SAAS,CAAC/D,MAAM,GAAG,CAAC,EAAE;QACxB+D,SAAS,CAAC,CAAC,CAAC,CAACC,YAAY,CACvB,QAAQ,EACRD,SAAS,CAAC,CAAC,CAAC,CAACN,YAAY,CAAC,QAAQ,CAAC,CACpC;;;EAGP;EAEA,IAAI,CAACQ,gBAAgB,GAAG,UAAU/B,CAAC,EAAEtR,OAAO;IAC1C,IAAIsJ,KAAK,GAAG,EAAE;IACdA,KAAK,GAAG2D,YAAY,CAAC3D,KAAK,EAAE;MAC1BsH,MAAM,EAAE,SAAS;MACjBiB,WAAW,EAAE,GAAG;MAChBC,cAAc,EAAE,OAAO;MACvBwB,eAAe,EAAE;KAClB,CAAC;IAEF,OAAOjI,iDAAS,CAACiG,CAAC,EAAEnG,2EAAU,CAACnL,OAAO,CAACyO,SAAS,EAAEnF,KAAK,CAAC,CAAC;EAC3D,CAAC;EAED,IAAI,CAACiK,cAAc,GAAG,UAAUpG,SAAS,EAAEnN,OAAO;IAChD,IAAI+N,KAAK,GAAG;MACVE,IAAI,EAAE,MAAM;MACZ2C,MAAM,EAAE;KACT;IAED,IAAIlB,IAAI,GAAG1P,OAAO,CAAC3B,cAAc,CAACqR,IAAI,IAAI,EAAE;IAC5C,IAAI1P,OAAO,CAAC3B,cAAc,CAACqR,IAAI,EAAE;MAC/B,IAAIpO,MAAM,GAAG2J,uFAAsB,EAAE;MAErC,IAAI3J,MAAM,KAAK,CAAC,IAAItB,OAAO,CAAC3B,cAAc,CAACmP,MAAM,EAAE;QACjDlM,MAAM,GAAGtB,OAAO,CAAC3B,cAAc,CAACmP,MAAM;;MAExC5Q,iDAAM,CAACoD,OAAO,EAAE;QACdsB,MAAM,EAAEA;OACT,CAAC;MAEF;MACA;MACA1E,iDAAM,CAACoD,OAAO,CAAC3B,cAAc,EAAE;QAC7BmP,MAAM,EAAElM;OACT,CAAC;;IAGJ,IAAIkS,WAAW,GAAG7C,QAAQ,CACxBxD,SAAS,EACTnN,OAAO,CAACoB,KAAK,EACbpB,OAAO,CAACsB,MAAM,EACd,CAAC,EACD,CAAC,EACDyM,KAAK,CACN;IACD,IAAI0F,YAAY,GAAG5G,OAAO,CAAC6G,aAAa,CAAC,iBAAiB,EAAE;MAC1DC,YAAY,EAAE,CAAC;MACfC,YAAY,EAAE,CAAC;MACfC,cAAc,EAAE7T,OAAO,CAACoB,KAAK;MAC7B0S,eAAe,EAAE9T,OAAO,CAACsB,MAAM;MAC/BgG,QAAQ,EAAE;QACRyM,EAAE,EAAE,GAAG;QACPC,EAAE,EAAE;;KAEP,CAAC;IAEFC,QAAQ,CAAC9G,SAAS,EAAEsG,YAAY,EAAE;MAChC7C,MAAM,EAAE;KACT,CAAC;IAEFrC,WAAW,CAACpB,SAAS,EAAEuC,IAAI,EAAE;MAC3BtC,GAAG,EAAEpN,OAAO;MACZqO,KAAK,EAAE,UAAU;MACjBC,OAAO,EAAE,CAAC;MACVP,KAAK,EAAE;QACLE,IAAI,EAAE;;KAET,CAAC;IAEF,OAAOuF,WAAW;EACpB,CAAC;EAED;EACA,SAASS,QAAQ,CAAC9G,SAAS,EAAE+G,CAAC,EAAE5K,KAAK;IACnCA,KAAK,GAAG2D,YAAY,CAAC3D,KAAK,EAAE,CAAC,SAAS,CAAC,EAAE;MACvCuI,WAAW,EAAE,CAAC;MACdjB,MAAM,EAAE;KACT,CAAC;IAEF,IAAIuD,IAAI,GAAGzI,iDAAS,CAAC,MAAM,CAAC;IAC5BH,+CAAO,CAAC4I,IAAI,EAAE;MAAED,CAAC,EAAEA;IAAC,CAAE,CAAC;IACvB3I,+CAAO,CAAC4I,IAAI,EAAE7K,KAAK,CAAC;IAEpB+B,iDAAS,CAAC8B,SAAS,EAAEgH,IAAI,CAAC;IAE1B,OAAOA,IAAI;EACb;EAEA,SAASxD,QAAQ,CAACxD,SAAS,EAAE/L,KAAK,EAAEE,MAAM,EAAE8S,CAAC,EAAEhE,MAAM,EAAE9G,KAAK;IAC1D,IAAIuC,mDAAQ,CAACuE,MAAM,CAAC,EAAE;MACpB9G,KAAK,GAAG8G,MAAM;MACdA,MAAM,GAAG,CAAC;;IAGZA,MAAM,GAAGA,MAAM,IAAI,CAAC;IACpB9G,KAAK,GAAG2D,YAAY,CAAC3D,KAAK,EAAE;MAC1BsH,MAAM,EAAE,OAAO;MACfiB,WAAW,EAAE,CAAC;MACd5D,IAAI,EAAE;KACP,CAAC;IAEF,IAAIyC,IAAI,GAAGhF,iDAAS,CAAC,MAAM,CAAC;IAC5BH,+CAAO,CAACmF,IAAI,EAAE;MACZzP,CAAC,EAAEmP,MAAM;MACT/O,CAAC,EAAE+O,MAAM;MACThP,KAAK,EAAEA,KAAK,GAAGgP,MAAM,GAAG,CAAC;MACzB9O,MAAM,EAAEA,MAAM,GAAG8O,MAAM,GAAG,CAAC;MAC3BiE,EAAE,EAAED,CAAC;MACLE,EAAE,EAAEF;KACL,CAAC;IAEF7I,+CAAO,CAACmF,IAAI,EAAEpH,KAAK,CAAC;IACpB+B,iDAAS,CAAC8B,SAAS,EAAEuD,IAAI,CAAC;IAE1B,OAAOA,IAAI;EACb;EAEA;EACA,SAASsB,MAAM,CAAC/R,IAAI,EAAEgO,IAAI,EAAE2C,MAAM;IAChC,IAAInS,EAAE,GAAGwB,IAAI,GAAG,GAAG,GAAGgO,IAAI,GAAG,GAAG,GAAG2C,MAAM,GAAG,GAAG,GAAG9D,UAAU;IAE5D,IAAI,CAACE,OAAO,CAACvO,EAAE,CAAC,EAAE;MAChB8V,YAAY,CAACtU,IAAI,EAAEgO,IAAI,EAAE2C,MAAM,CAAC;;IAElC,OAAO,OAAO,GAAGnS,EAAE,GAAG,GAAG;EAC3B;EAEA,SAAS8V,YAAY,CAACtU,IAAI,EAAEgO,IAAI,EAAE2C,MAAM;IACtC,IAAInS,EAAE,GAAGwB,IAAI,GAAG,GAAG,GAAGgO,IAAI,GAAG,GAAG,GAAG2C,MAAM,GAAG,GAAG,GAAG9D,UAAU;IAE5D,IAAI7M,IAAI,KAAK,UAAU,EAAE;MACvB,IAAIuU,eAAe,GAAG9I,iDAAS,CAAC,MAAM,CAAC;MACvCH,+CAAO,CAACiJ,eAAe,EAAE;QAAEN,CAAC,EAAE;MAAwB,CAAE,CAAC;MAEzDO,SAAS,CAAChW,EAAE,EAAE;QACZuB,OAAO,EAAEwU,eAAe;QACxBE,GAAG,EAAE;UAAEzT,CAAC,EAAE,EAAE;UAAEI,CAAC,EAAE;QAAE,CAAE;QACrBsT,KAAK,EAAE,GAAG;QACVrL,KAAK,EAAE;UACL2E,IAAI,EAAE2C,MAAM;UACZA,MAAM,EAAEA;;OAEX,CAAC;;EAEN;EAEA,SAAS6D,SAAS,CAAChW,EAAE,EAAErB,OAAO;IAC5B,IAAIkM,KAAK,GAAG1M,iDAAM,CAChB;MACEqR,IAAI,EAAE,OAAO;MACb4D,WAAW,EAAE,CAAC;MACd+C,aAAa,EAAE,OAAO;MACtBtB,eAAe,EAAE;KAClB,EACDlW,OAAO,CAACkM,KAAK,CACd;IAED,IAAIoL,GAAG,GAAGtX,OAAO,CAACsX,GAAG,IAAI;MAAEzT,CAAC,EAAE,CAAC;MAAEI,CAAC,EAAE;IAAC,CAAE;IACvC,IAAIsT,KAAK,GAAGvX,OAAO,CAACuX,KAAK,IAAI,CAAC;IAE9B;IACA,IAAIrL,KAAK,CAACgK,eAAe,KAAK,MAAM,EAAE;MACpChK,KAAK,CAACgK,eAAe,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC;;IAGpC,IAAItB,MAAM,GAAGtG,iDAAS,CAAC,QAAQ,CAAC;IAEhCH,+CAAO,CAACnO,OAAO,CAAC4C,OAAO,EAAEsJ,KAAK,CAAC;IAC/B+B,iDAAS,CAAC2G,MAAM,EAAE5U,OAAO,CAAC4C,OAAO,CAAC;IAClCuL,+CAAO,CAACyG,MAAM,EAAE;MACdvT,EAAE,EAAEA,EAAE;MACNoW,OAAO,EAAE,WAAW;MACpBC,IAAI,EAAEJ,GAAG,CAACzT,CAAC;MACX8T,IAAI,EAAEL,GAAG,CAACrT,CAAC;MACX2T,WAAW,EAAE,EAAE,GAAGL,KAAK;MACvBM,YAAY,EAAE,EAAE,GAAGN,KAAK;MACxBO,MAAM,EAAE;KACT,CAAC;IAEF,IAAIC,IAAI,GAAGvJ,+CAAQ,CAAC,MAAM,EAAE3N,MAAM,CAACmX,IAAI,CAAC;IACxC,IAAI,CAACD,IAAI,EAAE;MACTA,IAAI,GAAGzJ,iDAAS,CAAC,MAAM,CAAC;MACxBL,iDAAS,CAACpN,MAAM,CAACmX,IAAI,EAAED,IAAI,CAAC;;IAE9B9J,iDAAS,CAAC8J,IAAI,EAAEnD,MAAM,CAAC;IACvBhF,OAAO,CAACvO,EAAE,CAAC,GAAGuT,MAAM;EACtB;EAEA;EACA,IAAI,CAACqD,iBAAiB,GAAG,UAAU1M,KAAK;IACtC,IAAI2M,SAAS,GAAGC,WAAW,CAAC5M,KAAK,CAAC;IAClC,OAAOuC,iFAAgB,CAACoK,SAAS,CAAC;EACpC,CAAC;EAED,IAAI,CAACE,YAAY,GAAG,UAAU7M,KAAK;IACjC,IAAI2M,SAAS,GAAGC,WAAW,CAAC5M,KAAK,CAAC;IAClC,OAAOuC,iFAAgB,CAACoK,SAAS,CAAC;EACpC,CAAC;EAED,IAAI,CAACG,eAAe,GAAG,UAAU3W,UAAU;IACzC,IAAI2P,SAAS,GAAG3P,UAAU,CAAC2P,SAAS,CAACiH,GAAG,CAAC,UAAUpE,CAAC;MAClD,OAAOA,CAAC,CAACqE,QAAQ,IAAIrE,CAAC;IACxB,CAAC,CAAC;IAEF,IAAIsE,YAAY,GAAG,CAAC,CAAC,GAAG,EAAEnH,SAAS,CAAC,CAAC,CAAC,CAACxN,CAAC,EAAEwN,SAAS,CAAC,CAAC,CAAC,CAACpN,CAAC,CAAC,CAAC;IAE1DoN,SAAS,CAAC9O,OAAO,CAAC,UAAUkW,QAAQ,EAAE7E,KAAK;MACzC,IAAIA,KAAK,KAAK,CAAC,EAAE;QACf4E,YAAY,CAAC5X,IAAI,CAAC,CAAC,GAAG,EAAE6X,QAAQ,CAAC5U,CAAC,EAAE4U,QAAQ,CAACxU,CAAC,CAAC,CAAC;;IAEpD,CAAC,CAAC;IACF,OAAO6J,iFAAgB,CAAC0K,YAAY,CAAC;EACvC,CAAC;EAED,IAAI,CAACE,YAAY,GAAG,UAAUnN,KAAK;IACjC,IAAI2M,SAAS,GAAGC,WAAW,CAAC5M,KAAK,CAAC;IAClC,OAAOuC,iFAAgB,CAACoK,SAAS,CAAC;EACpC,CAAC;AACH;AAEAxY,+CAAQ,CAAC4P,mBAAmB,EAAE3B,wEAAY,CAAC;AAE3C2B,mBAAmB,CAAC9K,OAAO,GAAG,CAC5B,UAAU,EACV,QAAQ,EACR,QAAQ,EACR,cAAc,EACd,SAAS,EACT,cAAc,CACf;AAED8K,mBAAmB,CAAClP,SAAS,CAACuY,SAAS,GAAG,UAAU/V,OAAO;EACzD,OAAO,eAAe,CAACwJ,IAAI,CAACxJ,OAAO,CAACC,IAAI,CAAC;AAC3C,CAAC;AAEDyM,mBAAmB,CAAClP,SAAS,CAACwY,SAAS,GAAG,UAAU1E,CAAC,EAAEtR,OAAO;EAC5D;EACA,IAAI,CAACyP,MAAM,CAACjS,SAAS,CAAC4T,UAAU,EAAE;IAChCnH,MAAM,CAACC,cAAc,CAACuF,MAAM,CAACjS,SAAS,EAAE,YAAY,EAAE;MACpDmI,KAAK,EAAE,UAAUsQ,MAAM,EAAEC,GAAG;QAC1BA,GAAG,GAAG,CAACA,GAAG,IAAIA,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,CAACA,GAAG;QAChC,OAAO,IAAI,CAAChF,SAAS,CAACgF,GAAG,EAAEA,GAAG,GAAGD,MAAM,CAAC7G,MAAM,CAAC,KAAK6G,MAAM;MAC5D;KACD,CAAC;;EAGJ,IAAIhW,IAAI,GAAGD,OAAO,CAACC,IAAI;EACvBD,OAAO,CAAC3B,cAAc,CAAC4B,IAAI,GAAGA,IAAI;EAElCpB,eAAe,CAACsX,iBAAiB,EAAE;EACnC/R,SAAS,CAACyB,SAAS,EAAE;EAErB,IAAI5F,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACiG,KAAK,CAAC,EAAE;IACrC,OAAO,IAAI,CAACkO,SAAS,CAACC,CAAC,EAAEtR,OAAO,CAAC;GAClC,MAAM,IAAIC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAAC0G,UAAU,CAAC,EAAE;IACjD,OAAO,IAAI,CAAC8N,cAAc,CAACJ,CAAC,EAAEtR,OAAO,CAAC;GACvC,MAAM,IAAIC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACyK,cAAc,CAAC,EAAE;IACrD,OAAO,IAAI,CAAC4L,cAAc,CAACjC,CAAC,EAAEtR,OAAO,CAAC;GACvC,MAAM,IAAIC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACkD,KAAK,CAAC,EAAE;IAC5C,OAAO,IAAI,CAACoQ,SAAS,CAACc,CAAC,EAAEtR,OAAO,CAAC;;AAErC,CAAC;AAED0M,mBAAmB,CAAClP,SAAS,CAAC4Y,YAAY,GAAG,UAAUzN,KAAK;EAC1D,IAAI1I,IAAI,GAAG0I,KAAK,CAAC1I,IAAI;EAErB,IAAIA,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACiG,KAAK,CAAC,EAAE;IACrC,OAAO,IAAI,CAAC2S,YAAY,CAACnN,KAAK,CAAC;GAChC,MAAM,IAAI1I,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAAC0G,UAAU,CAAC,EAAE;IACjD,OAAO,IAAI,CAACyR,iBAAiB,CAAC1M,KAAK,CAAC;GACrC,MAAM,IAAI1I,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACkD,KAAK,CAAC,EAAE;IAC5C,OAAO,IAAI,CAACoV,YAAY,CAAC7M,KAAK,CAAC;;AAEnC,CAAC;AAED+D,mBAAmB,CAAClP,SAAS,CAAC6Y,cAAc,GAAG,UAAU/E,CAAC,EAAEtR,OAAO;EACjE,IAAIC,IAAI,GAAGD,OAAO,CAACC,IAAI;EAEvBmE,SAAS,CAACyB,SAAS,EAAE;EAErB;EACA,IAAI,CAAC7F,OAAO,CAAC3B,cAAc,CAAC4B,IAAI,EAAE;IAChCD,OAAO,CAAC3B,cAAc,CAAC4B,IAAI,GAAGA,IAAI;;EAEpC,IAAIA,IAAI,KAAK/C,4EAAY,CAACgD,QAAQ,EAAE;IAClC,OAAO,IAAI,CAAC+R,YAAY,CAACX,CAAC,EAAEtR,OAAO,CAAC;GACrC,MAAM,IAAIC,IAAI,KAAK/C,4EAAY,CAACiD,UAAU,EAAE;IAC3C,OAAO,IAAI,CAACkT,gBAAgB,CAAC/B,CAAC,EAAEtR,OAAO,CAAC;;AAE5C,CAAC;AAED;AACA0M,mBAAmB,CAAClP,SAAS,CAAC8Y,iBAAiB,GAAG,UAAUxX,UAAU;EACpE,IAAImB,IAAI,GAAGnB,UAAU,CAACmB,IAAI;EAE1B,IAAIA,IAAI,KAAK/C,4EAAY,CAACgD,QAAQ,IAAID,IAAI,KAAK/C,4EAAY,CAACiD,UAAU,EAAE;IACtE,OAAO,IAAI,CAACsV,eAAe,CAAC3W,UAAU,CAAC;;AAE3C,CAAC;AAED;AACA,SAASyW,WAAW,CAAC5M,KAAK;EACxB,IAAIyH,MAAM,GAAG,CAAC;EACd,IAAInP,CAAC,GAAG0H,KAAK,CAAC1H,CAAC;IACbI,CAAC,GAAGsH,KAAK,CAACtH,CAAC;IACXD,KAAK,GAAGuH,KAAK,CAACvH,KAAK,GAAG,CAAC,GAAGgP,MAAM;IAChC9O,MAAM,GAAGqH,KAAK,CAACrH,MAAM,GAAG,CAAC,GAAG8O,MAAM;EAEpC,OAAO,CACL,CAAC,GAAG,EAAEnP,CAAC,EAAEI,CAAC,CAAC,EACX,CAAC,GAAG,EAAED,KAAK,EAAE,CAAC,CAAC,EACf,CAAC,GAAG,EAAEA,KAAK,EAAEE,MAAM,CAAC,EACpB,CAAC,GAAG,EAAE,CAACF,KAAK,EAAEE,MAAM,CAAC,EACrB,CAAC,GAAG,EAAE,CAACF,KAAK,EAAE,CAAC,CAAC,EAChB,CAAC,GAAG,CAAC,CACN;AACH;;;;;;;;;;;;;;;;;;;;AClzBa;;AAEoC;AAEjB;AAEsC;AACJ;AACtC;AAE5B,MAAMuV,aAAa,GAAG,IAAI;AAC1B,MAAMC,QAAQ,GAAG,GAAG;AAEpB,SAASC,aAAa,CAAC7W,OAAO;EAC5B,OAAOA,OAAO,IAAI,eAAe,CAACwJ,IAAI,CAACxJ,OAAO,CAACC,IAAI,CAAC;AACtD;AAEA,SAAS6W,kBAAkB,CAAC9W,OAAO;EACjC,OAAOA,OAAO,IAAI,oBAAoB,CAACwJ,IAAI,CAACxJ,OAAO,CAACC,IAAI,CAAC;AAC3D;AAEA,SAAS8W,OAAO,CAAC/W,OAAO;EACtB,OAAOA,OAAO,IAAI,uBAAuB,CAACwJ,IAAI,CAACxJ,OAAO,CAACC,IAAI,CAAC;AAC9D;AAEA,SAAS+W,YAAY,CAAChX,OAAO;EAC3B,OAAOA,OAAO,IAAI,yBAAyB,CAACwJ,IAAI,CAACxJ,OAAO,CAACC,IAAI,CAAC;AAChE;AAEA,SAASgX,UAAU,CAACjX,OAAO;EACzB,OAAOA,OAAO,IAAI,uBAAuB,CAACwJ,IAAI,CAACxJ,OAAO,CAACC,IAAI,CAAC;AAC9D;AAEA,SAASL,YAAY,CAACI,OAAO;EAC3B,OAAOA,OAAO,IAAI,yBAAyB,CAACwJ,IAAI,CAACxJ,OAAO,CAACC,IAAI,CAAC;AAChE;AAEA,SAASiX,YAAY,CAAClX,OAAO;EAC3B,OAAOA,OAAO,IAAI,6BAA6B,CAACwJ,IAAI,CAACxJ,OAAO,CAACC,IAAI,CAAC;AACpE;AAEA;;;AAGA,SAASkX,UAAU,CAACpY,MAAM,EAAEC,MAAM;EAChC;EACA,IACE8X,kBAAkB,CAAC9X,MAAM,CAAC,IAC1B,CAAC6X,aAAa,CAAC9X,MAAM,CAAC,IACtB,CAAC8X,aAAa,CAAC7X,MAAM,CAAC,EACtB;IACA;;EAGF;EACA,IAAID,MAAM,KAAKC,MAAM,EAAE;IACrB;;EAGF;EACA,IAAI+X,OAAO,CAAChY,MAAM,CAAC,IAAIgY,OAAO,CAAC/X,MAAM,CAAC,EAAE;IACtC;;EAGF;EACA,IAAIiY,UAAU,CAAClY,MAAM,CAAC,IAAIkY,UAAU,CAACjY,MAAM,CAAC,EAAE;IAC5C;;EAGF;EACA,IAAIY,YAAY,CAACb,MAAM,CAAC,IAAIa,YAAY,CAACZ,MAAM,CAAC,EAAE;IAChD;;EAGF;EACA;EACA,IAAIkY,YAAY,CAAClY,MAAM,CAAC,EAAE;IACxB,OAAO;MAAEiB,IAAI,EAAE/C,4EAAY,CAACiD;IAAU,CAAE;;EAG1C,OAAO;IAAEF,IAAI,EAAE/C,4EAAY,CAACgD;EAAQ,CAAE;AACxC;AAEA,SAASkX,SAAS,CAACzO,KAAK,EAAE0O,SAAS;EACjC,IAAIX,yCAAE,CAAC/N,KAAK,EAAEzL,4EAAY,CAACkD,KAAK,CAAC,EAAE;IACjC,IAAIiX,SAAS,EAAE;MACb,IAAIC,SAAS,GAAG;QAAErW,CAAC,EAAE0H,KAAK,CAAC1H,CAAC;QAAEI,CAAC,EAAEsH,KAAK,CAACtH,CAAC,GAAGsH,KAAK,CAACrH;MAAM,CAAE;MACzD,IAAIiW,UAAU,GAAG;QAAEtW,CAAC,EAAE0H,KAAK,CAAC1H,CAAC,GAAG0H,KAAK,CAACvH,KAAK;QAAEC,CAAC,EAAEsH,KAAK,CAACtH,CAAC,GAAGsH,KAAK,CAACrH;MAAM,CAAE;MACxE,IAAIkW,UAAU,GAAG;QAAEvW,CAAC,EAAE0H,KAAK,CAAC1H,CAAC,GAAG0H,KAAK,CAACvH,KAAK;QAAEC,CAAC,EAAEsH,KAAK,CAACtH;MAAC,CAAE;MAEzD,IAAIgW,SAAS,CAACpW,CAAC,KAAK0H,KAAK,CAAC1H,CAAC,IAAIoW,SAAS,CAAChW,CAAC,KAAKsH,KAAK,CAACtH,CAAC,EAAE;QACtD;QACA,IAAIgW,SAAS,CAACpW,CAAC,GAAGsW,UAAU,CAACtW,CAAC,GAAG2V,QAAQ,EAAE;UACzCha,gDAAM,CAACya,SAAS,EAAE;YAAEpW,CAAC,EAAEsW,UAAU,CAACtW,CAAC,GAAG2V;UAAQ,CAAE,CAAC;;QAEnD,IAAIS,SAAS,CAAChW,CAAC,GAAGkW,UAAU,CAAClW,CAAC,GAAGuV,QAAQ,EAAE;UACzCha,gDAAM,CAACya,SAAS,EAAE;YAAEhW,CAAC,EAAEkW,UAAU,CAAClW,CAAC,GAAGuV;UAAQ,CAAE,CAAC;;;MAIrD,IAAIS,SAAS,CAACpW,CAAC,KAAK0H,KAAK,CAAC1H,CAAC,IAAIoW,SAAS,CAAChW,CAAC,KAAKsH,KAAK,CAACtH,CAAC,EAAE;QACtD;QACA,IAAIgW,SAAS,CAACpW,CAAC,GAAGuW,UAAU,CAACvW,CAAC,GAAG2V,QAAQ,EAAE;UACzCha,gDAAM,CAACya,SAAS,EAAE;YAAEpW,CAAC,EAAEuW,UAAU,CAACvW,CAAC,GAAG2V;UAAQ,CAAE,CAAC;;;MAIrD,IAAIS,SAAS,CAACpW,CAAC,KAAK0H,KAAK,CAAC1H,CAAC,IAAIoW,SAAS,CAAChW,CAAC,KAAKsH,KAAK,CAACtH,CAAC,EAAE;QACtD;QACA,IAAIgW,SAAS,CAAChW,CAAC,GAAGiW,SAAS,CAACjW,CAAC,GAAGuV,QAAQ,EAAE;UACxCha,gDAAM,CAACya,SAAS,EAAE;YAAEhW,CAAC,EAAEiW,SAAS,CAACjW,CAAC,GAAGuV;UAAQ,CAAE,CAAC;;;MAIpD,IAAIS,SAAS,CAAC/V,MAAM,GAAGsV,QAAQ,EAAE;QAC/Bha,gDAAM,CAACya,SAAS,EAAE;UAChB/V,MAAM,EAAEsV;SACT,CAAC;;MAEJ,IAAIS,SAAS,CAACjW,KAAK,GAAGwV,QAAQ,EAAE;QAC9Bha,gDAAM,CAACya,SAAS,EAAE;UAChBjW,KAAK,EAAEwV;SACR,CAAC;;;IAGN,OAAO,IAAI;;EAGb,OAAO,KAAK;AACd;AAEA,SAASa,SAAS,CAACtY,QAAQ,EAAEH,MAAM,EAAED,MAAM;EACzC,IAAI,CAAC2Y,KAAK,CAAC7a,OAAO,CAACsC,QAAQ,CAAC,EAAE;IAC5BA,QAAQ,GAAG,CAACA,QAAQ,CAAC;;EAGvB;EACA,IAAIJ,MAAM,EAAE;IACV,OAAO,KAAK;;EAGd;EACA,IAAII,QAAQ,CAACiQ,MAAM,KAAK,CAAC,EAAE;IACzB,OAAO,KAAK;;EAGd;EACA,IAAI,CAACpQ,MAAM,EAAE;IACX,OAAO,IAAI;;EAGb;EACA,IAAI,CAAC6X,aAAa,CAAC7X,MAAM,CAAC,EAAE;IAC1B,OAAO,KAAK;;EAGd,OAAO,QAAQ;AACjB;AAEA,SAAS2Y,sBAAsB,CAAC5Y,MAAM,EAAEC,MAAM,EAAEF,UAAU;EACxD;EACA,IAAImY,UAAU,CAACnY,UAAU,CAAC,IAAIoY,YAAY,CAAClY,MAAM,CAAC,EAAE;IAClD,OAAO,KAAK;;EAGd;EACA,IACEY,YAAY,CAACd,UAAU,CAAC,IACxBoY,YAAY,CAACnY,MAAM,CAAC,IACpBmY,YAAY,CAAClY,MAAM,CAAC,EACpB;IACA,OAAO,KAAK;;EAGd;EACA,OAAO,EACLY,YAAY,CAACd,UAAU,CAAC,IACxB,CAACoY,YAAY,CAAClY,MAAM,CAAC,KACpB+X,OAAO,CAAChY,MAAM,CAAC,IAAIiY,YAAY,CAACjY,MAAM,CAAC,CAAC,CAC1C;AACH;AAEA;;;AAGc,SAAU6Y,gBAAgB,CAAC/S,QAAQ;EAC/C4R,kFAAY,CAACpZ,IAAI,CAAC,IAAI,EAAEwH,QAAQ,CAAC;AACnC;AAEA/H,+CAAQ,CAAC8a,gBAAgB,EAAEnB,kFAAY,CAAC;AAExCmB,gBAAgB,CAAChW,OAAO,GAAG,CAAC,UAAU,CAAC;AAEvCgW,gBAAgB,CAACpa,SAAS,CAACqa,IAAI,GAAG;EAChC;;;EAGA,SAASC,SAAS,CAACnP,KAAK,EAAE3J,MAAM;IAC9B;IACA,IAAI,CAAC6X,aAAa,CAAClO,KAAK,CAAC,EAAE;MACzB;;IAGF;IACA,OAAO,CAACkO,aAAa,CAAC7X,MAAM,CAAC,IAAI8X,kBAAkB,CAAC9X,MAAM,CAAC;EAC7D;EAEA,IAAI,CAAC+Y,OAAO,CAAC,iBAAiB,EAAE,UAAUtS,OAAO;IAC/C,MAAMtG,QAAQ,GAAGsG,OAAO,CAACtG,QAAQ;MAC/BmI,QAAQ,GAAG7B,OAAO,CAAC6B,QAAQ;MAC3BtI,MAAM,GAAGyG,OAAO,CAACzG,MAAM;IAEzB,OAAOuX,+CAAK,CAACpX,QAAQ,EAAE,UAAUa,OAAO;MACtC,IAAIJ,YAAY,CAACI,OAAO,CAAC,EAAE;QACzB,OAAOmX,UAAU,CAACnX,OAAO,CAACjB,MAAM,EAAEiB,OAAO,CAAChB,MAAM,EAAEgB,OAAO,CAAC;;MAG5D,IAAIA,OAAO,CAACgY,IAAI,EAAE;QAChB,OAAOP,SAAS,CAACzX,OAAO,EAAEA,OAAO,CAACgY,IAAI,EAAE,IAAI,EAAE1Q,QAAQ,CAAC;;MAGzD,OAAOwQ,SAAS,CAAC9X,OAAO,EAAEhB,MAAM,EAAE,IAAI,EAAEsI,QAAQ,CAAC;IACnD,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,IAAI,CAACyQ,OAAO,CAAC,eAAe,EAAEpB,aAAa,EAAE,UAAUlR,OAAO;IAC5D,IAAIzG,MAAM,GAAGyG,OAAO,CAACzG,MAAM;MACzBQ,MAAM,GAAGiG,OAAO,CAACjG,MAAM;IAEzB,IAAIS,IAAI;IAER;IACA;IAEA;IACA;IACA,OAAOuW,gDAAM,CACXhX,MAAM,EACN,UAAU6Q,MAAM,EAAE4H,CAAC;MACjB,IAAIhY,IAAI,KAAKiY,SAAS,EAAE;QACtBjY,IAAI,GAAG4W,aAAa,CAACoB,CAAC,CAAC;;MAGzB,IAAIhY,IAAI,KAAK4W,aAAa,CAACoB,CAAC,CAAC,IAAI5H,MAAM,KAAK,KAAK,EAAE;QACjD,OAAO,KAAK;;MAGd,OAAOyH,SAAS,CAACG,CAAC,EAAEjZ,MAAM,CAAC;IAC7B,CAAC,EACDkZ,SAAS,CACV;EACH,CAAC,CAAC;EAEF,IAAI,CAACH,OAAO,CAAC,cAAc,EAAEpB,aAAa,EAAE,UAAUlR,OAAO;IAC3D,IAAIzG,MAAM,GAAGyG,OAAO,CAACzG,MAAM;MACzB2J,KAAK,GAAGlD,OAAO,CAACkD,KAAK;IAEvB,OAAOmP,SAAS,CAACnP,KAAK,EAAE3J,MAAM,CAAC;EACjC,CAAC,CAAC;EAEF,IAAI,CAAC+Y,OAAO,CAAC,mBAAmB,EAAEpB,aAAa,EAAE,UAAUlR,OAAO;IAChE,IAAI1G,MAAM,GAAG0G,OAAO,CAAC1G,MAAM;MACzBC,MAAM,GAAGyG,OAAO,CAACzG,MAAM;IAEzB,OAAOmY,UAAU,CAACpY,MAAM,EAAEC,MAAM,CAAC;EACnC,CAAC,CAAC;EAEF,IAAI,CAAC+Y,OAAO,CAAC,sBAAsB,EAAEpB,aAAa,EAAE,UAAUlR,OAAO;IACnE,IAAI3G,UAAU,GAAG2G,OAAO,CAAC3G,UAAU;MACjCC,MAAM,GAAG0G,OAAO,CAAC0S,KAAK,IAAI1S,OAAO,CAAC1G,MAAM;MACxCC,MAAM,GAAGyG,OAAO,CAACzG,MAAM;IAEzB;IACA,IAAIqR,MAAM,GAAGsH,sBAAsB,CAAC5Y,MAAM,EAAEC,MAAM,EAAEF,UAAU,CAAC;IAE/D,IAAI,CAACuR,MAAM,EAAE;MACX;;IAGF;IAEA,OAAO8G,UAAU,CAACpY,MAAM,EAAEC,MAAM,EAAEF,UAAU,CAAC;EAC/C,CAAC,CAAC;EAEF,IAAI,CAACiZ,OAAO,CAAC,cAAc,EAAE,UAAUtS,OAAO;IAC5C,IAAIkD,KAAK,GAAGlD,OAAO,CAACkD,KAAK;MACvB0O,SAAS,GAAG5R,OAAO,CAAC4R,SAAS;IAE/B,OAAOD,SAAS,CAACzO,KAAK,EAAE0O,SAAS,CAAC;EACpC,CAAC,CAAC;AACJ,CAAC;AAEDO,gBAAgB,CAACpa,SAAS,CAAC2Z,UAAU,GAAGA,UAAU;AAClDS,gBAAgB,CAACpa,SAAS,CAACia,SAAS,GAAGA,SAAS;AAChDG,gBAAgB,CAACpa,SAAS,CAACqZ,aAAa,GAAGA,aAAa;AACxDe,gBAAgB,CAACpa,SAAS,CAAC4Z,SAAS,GAAGA,SAAS;;;;;;;;;;;;;;;;;;;;;ACvSnC;;AAEmB;AAEQ;AAEmC;AAKlC;AAEI;AACmB;AAEhE;;;;AAIc,SAAUsB,kBAAkB,CAAC7T,QAAQ,EAAE8T,MAAM;EACzDN,iFAAkB,CAAChb,IAAI,CAAC,IAAI,EAAEwH,QAAQ,CAAC;EAEvC,SAAS+T,mBAAmB,CAACC,CAAC;IAC5B,IAAIpT,OAAO,GAAGoT,CAAC,CAACpT,OAAO;MACrBkD,KAAK,GAAGlD,OAAO,CAACkD,KAAK;MACrBtK,cAAc,GAAGsK,KAAK,CAACtK,cAAc;IAEvC,IAAI,CAACsK,KAAK,IAAI,CAACA,KAAK,CAAC1I,IAAI,CAAC8B,QAAQ,CAAC7E,qEAAY,CAAC4b,WAAW,CAAC,EAAE;MAC5D;;IAGF,IAAIhb,MAAM,GAAG6K,KAAK,CAAC7K,MAAM;IACzB,IAAIwB,cAAc,GAAGqZ,MAAM,CAACrb,eAAe;IAE3C;IACA,IAAI,CAACQ,MAAM,EAAE;MACX0a,uEAAgB,CAAClZ,cAAc,EAAEjB,cAAc,CAAC;KACjD,MAAM;MACLia,oEAAa,CAAChZ,cAAc,EAAEjB,cAAc,CAAC;;IAG/C;IACAzB,gDAAM,CAACyB,cAAc,EAAE+Z,8CAAI,CAACzP,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;IAE/C;IACA,IAAIA,KAAK,CAAC1I,IAAI,KAAK/C,qEAAY,CAACkD,KAAK,EAAE;MACrCxD,gDAAM,CAACyB,cAAc,EAAE+Z,8CAAI,CAACzP,KAAK,EAAE,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC;MAExD;MACA;MACA,IAAI7K,MAAM,IAAI,IAAI,EAAE;QAClB2a,0DAAmB,CAAC3a,MAAM,EAAE6K,KAAK,CAAC;;;IAGtC,IACEA,KAAK,IACLA,KAAK,CAAC7K,MAAM,IACZ,MAAM,IAAI6K,KAAK,CAAC7K,MAAM,IACtB6K,KAAK,CAAC7K,MAAM,CAACmC,IAAI,KAAK/C,qEAAY,CAACkD,KAAK,EACxC;MACAxD,gDAAM,CAACyB,cAAc,EAAE;QACrBP,MAAM,EAAE6K,KAAK,CAAC7K,MAAM,CAACW;OACtB,CAAC;;EAEN;EAEA,SAASsa,sBAAsB,CAACF,CAAC;IAC/B,IAAIpT,OAAO,GAAGoT,CAAC,CAACpT,OAAO;MACrB3G,UAAU,GAAG2G,OAAO,CAAC3G,UAAU;MAC/BC,MAAM,GAAGD,UAAU,CAACC,MAAM;MAC1BC,MAAM,GAAGF,UAAU,CAACE,MAAM;MAC1BX,cAAc,GAAGS,UAAU,CAACT,cAAc;IAE5C,IAAIwa,CAAC,CAACG,SAAS,EAAE;MACfha,MAAM,GAAG6Z,CAAC,CAACG,SAAS;;IAEtB,IAAIH,CAAC,CAACI,SAAS,EAAE;MACfla,MAAM,GAAG8Z,CAAC,CAACI,SAAS;;IAGtB,IAAInb,MAAM,GAAGgB,UAAU,CAAChB,MAAM;IAC9B,IAAIwB,cAAc,GAAGqZ,MAAM,CAACrb,eAAe;IAE3C;IACA,IAAI,CAACQ,MAAM,EAAE;MACX0a,uEAAgB,CAAClZ,cAAc,EAAEjB,cAAc,CAAC;KACjD,MAAM;MACLia,oEAAa,CAAChZ,cAAc,EAAEjB,cAAc,CAAC;;IAG/C;IACAzB,gDAAM,CAACyB,cAAc,EAAE;MACrBoQ,SAAS,EAAEyK,aAAa,CAACpa,UAAU;KACpC,CAAC;IAEF,IAAIC,MAAM,EAAE;MACV,IAAI,CAACV,cAAc,CAACU,MAAM,EAAE;QAC1BnC,gDAAM,CAACyB,cAAc,EAAE;UAAEU,MAAM,EAAEA,MAAM,CAACN;QAAE,CAAE,CAAC;OAC9C,MAAM;QACLJ,cAAc,CAACU,MAAM,GAAGA,MAAM,CAACN,EAAE;;;IAGrC,IAAIO,MAAM,EAAE;MACV,IAAI,CAACX,cAAc,CAACW,MAAM,EAAE;QAC1BpC,gDAAM,CAACyB,cAAc,EAAE;UAAEW,MAAM,EAAEA,MAAM,CAACP;QAAE,CAAE,CAAC;OAC9C,MAAM;QACLJ,cAAc,CAACW,MAAM,GAAGA,MAAM,CAACP,EAAE;;;EAGvC;EAEA,SAASya,aAAa,CAACpa,UAAU;IAC/B,OAAOA,UAAU,CAAC2P,SAAS,CAACiH,GAAG,CAAC,UAAUpE,CAAC;MACzC,IAAIA,CAAC,CAACqE,QAAQ,EAAE;QACd,OAAO;UACLA,QAAQ,EAAE;YACR1U,CAAC,EAAEqQ,CAAC,CAACqE,QAAQ,CAAC1U,CAAC;YACfI,CAAC,EAAEiQ,CAAC,CAACqE,QAAQ,CAACtU;WACf;UACDJ,CAAC,EAAEqQ,CAAC,CAACrQ,CAAC;UACNI,CAAC,EAAEiQ,CAAC,CAACjQ;SACN;OACF,MAAM;QACL,OAAO;UACLJ,CAAC,EAAEqQ,CAAC,CAACrQ,CAAC;UACNI,CAAC,EAAEiQ,CAAC,CAACjQ;SACN;;IAEL,CAAC,CAAC;EACJ;EAEA,IAAI,CAAC8X,QAAQ,CACX,CACE,cAAc,EACd,YAAY,EACZ,cAAc,EACd,cAAc,EACd,+BAA+B,CAChC,EACDC,oBAAoB,CAACR,mBAAmB,CAAC,CAC1C;EAED,IAAI,CAACS,QAAQ,CACX,CACE,cAAc,EACd,YAAY,EACZ,cAAc,EACd,cAAc,EACd,+BAA+B,CAChC,EACDD,oBAAoB,CAACR,mBAAmB,CAAC,CAC1C;EAED,IAAI,CAACO,QAAQ,CACX,CACE,mBAAmB,EACnB,sBAAsB,EACtB,4BAA4B,EAC5B,mBAAmB,EACnB,mBAAmB,EACnB,iBAAiB,CAClB,EACDC,oBAAoB,CAACL,sBAAsB,CAAC,CAC7C;EAED,IAAI,CAACM,QAAQ,CACX,CACE,mBAAmB,EACnB,sBAAsB,EACtB,4BAA4B,EAC5B,mBAAmB,EACnB,mBAAmB,EACnB,iBAAiB,CAClB,EACDD,oBAAoB,CAACL,sBAAsB,CAAC,CAC7C;AACH;AAEA;AACA,SAASK,oBAAoB,CAACE,EAAE;EAC9B,OAAQrT,KAAK,IAAI;IACf,MAAMR,OAAO,GAAGQ,KAAK,CAACR,OAAO;IAC7B,MAAMzF,OAAO,GAAGyF,OAAO,CAACkD,KAAK,IAAIlD,OAAO,CAAC3G,UAAU;IAEnD,IAAI+X,aAAa,CAAC7W,OAAO,CAAC,EAAE;MAC1BsZ,EAAE,CAACrT,KAAK,CAAC;;EAEb,CAAC;AACH;AAEA,SAAS4Q,aAAa,CAAC7W,OAAO;EAC5B,OAAOA,OAAO,IAAI,cAAc,CAACwJ,IAAI,CAACxJ,OAAO,CAACC,IAAI,CAAC;AACrD;AAEAnD,+CAAQ,CAAC4b,kBAAkB,EAAEL,iFAAkB,CAAC;AAEhDK,kBAAkB,CAAC9W,OAAO,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrMtC;;AAEuD;AACZ;AACM;AACZ;AACI;AACoB;AAChB;AACX;AACe;AACK;AACJ;AACK;AACkC;AACd;AACpB;AACrB;AAE/C,iEAAe;EACbqY,WAAW,EAAE,CAACR,uEAAY,EAAEG,4EAAgB,EAAED,wEAAe,CAAC;EAC9DO,QAAQ,EAAE,CACR,qBAAqB,EACrB,iBAAiB,EACjB,kBAAkB,EAClB,oBAAoB,EACpB,oBAAoB,EACpB,qBAAqB,CACtB;EACD/b,cAAc,EAAE,CAAC,MAAM,EAAE8K,kEAAyB,CAAC;EACnDkR,mBAAmB,EAAE,CAAC,MAAM,EAAEzN,4DAAmB,CAAC;EAClD0N,eAAe,EAAE,CAAC,MAAM,EAAEb,mEAAkB,CAAC;EAC7Cc,gBAAgB,EAAE,CAAC,MAAM,EAAEzC,yDAAgB,CAAC;EAC5C0C,kBAAkB,EAAE,CAAC,MAAM,EAAE5B,2DAAkB,CAAC;EAChD6B,kBAAkB,EAAE,CAAC,MAAM,EAAElW,kFAA6B,CAAC;EAC3DmW,kBAAkB,EAAE,CAAC,MAAM,EAAEhB,qFAAc,CAAC;EAC5C3M,OAAO,EAAE,CAAC,MAAM,EAAE6M,iEAAO,CAAC;EAC1B/U,mBAAmB,EAAE,CAAC,MAAM,EAAEjD,wEAAmB,CAAC;EAClDkD,YAAY,EAAE,CAAC,MAAM,EAAEiV,4EAAY,CAAC;EACpCY,kBAAkB,EAAE,CAAC,MAAM,EAAEX,yEAAkB,CAAC;EAChDC,mCAAmC,EAAE,CACnC,MAAM,EACNA,0FAAmC,CACpC;EACDzZ,QAAQ,EAAE,CAAC,MAAM,EAAE0Z,4DAAU;CAC9B;;;;;;;;;;;;;;;;;;;AC7CY;;AAOK;AAE+C;AACE;AACtC;AAE7B,MAAMW,aAAa,GAAG,oBAAoB;EACxCC,mBAAmB,GAAG,kBAAkB;AAE1C,IAAIC,mBAAmB,GAAG,CAAC;AAErB,SAAU5P,sBAAsB;EACpC,OAAO4P,mBAAmB;AAC5B;AAEc,SAAUC,qBAAqB,CAACjW,QAAQ,EAAE5G,MAAM,EAAE4O,OAAO;EACrE,IAAIzK,IAAI,GAAG,IAAI;EAEf,IAAI2Y,YAAY,GAAG9c,MAAM,CAAC+c,eAAe,EAAE;EAC3C,IAAIhb,OAAO,EAAEib,mBAAmB,EAAEC,GAAG;EAErCrW,QAAQ,CAACsW,EAAE,CAAC,wBAAwB,EAAE,UAAU1V,OAAO;IACrD,IAAI2V,cAAc,GAAG3V,OAAO,CAAC4V,MAAM;IAEnCrb,OAAO,GAAGob,cAAc,CAACpb,OAAO,CAAC0C,KAAK,IAAI0Y,cAAc,CAACpb,OAAO;IAEhE;IACA,IAAI0W,yCAAE,CAAC1W,OAAO,EAAE9C,qEAAY,CAACyK,cAAc,CAAC,EAAE;MAC5CsT,mBAAmB,GAAGhd,MAAM,CAACqd,eAAe,CAACtb,OAAO,CAAC;MAErDkb,GAAG,GAAGxP,gDAAS,CAAC,GAAG,CAAC;MAEpBmP,mBAAmB,GAAG7a,OAAO,CAACsB,MAAM;MAEpC,IAAImS,YAAY,GAAG5G,OAAO,CAAC6G,aAAa,CAAC,iBAAiB,EAAE;QAC1DC,YAAY,EAAE,CAAC;QACfC,YAAY,EAAE,CAAC;QACfC,cAAc,EAAE7T,OAAO,CAACoB,KAAK;QAC7B0S,eAAe,EAAE9T,OAAO,CAACsB,MAAM;QAC/BgG,QAAQ,EAAE;UACRyM,EAAE,EAAE,GAAG;UACPC,EAAE,EAAE;;OAEP,CAAC;MAEF,IAAIG,IAAI,GAAI/R,IAAI,CAAC+R,IAAI,GAAGzI,gDAAS,CAAC,MAAM,CAAE;MAE1CH,8CAAO,CAAC4I,IAAI,EAAE;QACZD,CAAC,EAAET,YAAY;QACf5B,WAAW,EAAE,CAAC;QACdjB,MAAM,EAAE2K,cAAc,CAACvb,OAAO;OAC/B,CAAC;MAEFqL,gDAAS,CAAC6P,GAAG,EAAE/G,IAAI,CAAC;MAEpB9I,gDAAS,CAAC0P,YAAY,EAAEG,GAAG,CAAC;MAE5B1W,+EAAS,CAAC0W,GAAG,EAAElb,OAAO,CAACiB,CAAC,EAAEjB,OAAO,CAACqB,CAAC,CAAC;;IAGtC,IAAIqV,yCAAE,CAAC1W,OAAO,EAAE9C,qEAAY,CAACyK,cAAc,CAAC,IAAI3H,OAAO,CAACwb,WAAW,EAAE;MACnEvd,MAAM,CAACwW,SAAS,CAACzU,OAAO,EAAE2a,aAAa,CAAC;KACzC,MAAM,IACL3a,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,qEAAY,CAACiG,KAAK,CAAC,IACzCnD,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,qEAAY,CAAC0G,UAAU,CAAC,IAC9C5D,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,qEAAY,CAACgD,QAAQ,CAAC,IAC5CF,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,qEAAY,CAACkD,KAAK,CAAC,EACzC;MACAnC,MAAM,CAACwW,SAAS,CAACzU,OAAO,EAAE4a,mBAAmB,CAAC;;EAElD,CAAC,CAAC;EAEF/V,QAAQ,CAACsW,EAAE,CAAC,sBAAsB,EAAE,UAAU1V,OAAO;IACnD;IACA,IAAIiR,yCAAE,CAAC1W,OAAO,EAAE9C,qEAAY,CAACyK,cAAc,CAAC,EAAE;MAC5C,IAAIrG,MAAM,GAAGmE,OAAO,CAACnE,MAAM;QACzBma,EAAE,GAAGhW,OAAO,CAACgW,EAAE;MAEjB,IAAIC,gBAAgB,GAAGxa,IAAI,CAACya,GAAG,CAC5B3b,OAAO,CAACsB,MAAM,GAAG2Z,mBAAmB,CAAC3Z,MAAM,IAAKA,MAAM,GAAGma,EAAE,CAAC,EAC7D,CAAC,CACF;MACDZ,mBAAmB,GAAGa,gBAAgB;MAEtC,IAAIjI,YAAY,GAAG5G,OAAO,CAAC6G,aAAa,CAAC,iBAAiB,EAAE;QAC1DC,YAAY,EAAE,CAAC;QACfC,YAAY,EAAE,CAAC;QACfC,cAAc,EAAE7T,OAAO,CAACoB,KAAK;QAC7B0S,eAAe,EAAE4H,gBAAgB;QACjCpU,QAAQ,EAAE;UACRyM,EAAE,EAAE,GAAG;UACPC,EAAE,EAAE;;OAEP,CAAC;MAEFzI,8CAAO,CAACnJ,IAAI,CAAC+R,IAAI,EAAE;QACjBD,CAAC,EAAET;OACJ,CAAC;;EAEN,CAAC,CAAC;EAEF5O,QAAQ,CAACsW,EAAE,CACT,CAAC,wBAAwB,EAAE,sBAAsB,CAAC,EAClD,UAAU1V,OAAO;IACf,IAAI2V,cAAc,GAAG3V,OAAO,CAAC4V,MAAM;IAEnC,IAAID,cAAc,EAAE;MAClBnd,MAAM,CAAC2d,YAAY,CACjBR,cAAc,CAACpb,OAAO,CAAC0C,KAAK,IAAI0Y,cAAc,CAACpb,OAAO,EACtD2a,aAAa,CACd;MACD1c,MAAM,CAAC2d,YAAY,CAAC5b,OAAO,EAAE4a,mBAAmB,CAAC;;IAGnD5a,OAAO,GAAGkY,SAAS;IACnB+C,mBAAmB,GAAG/C,SAAS;IAE/B,IAAIgD,GAAG,EAAE;MACPR,gDAAS,CAACQ,GAAG,CAAC;MAEdA,GAAG,GAAGhD,SAAS;;EAEnB,CAAC,CACF;AACH;AAEA4C,qBAAqB,CAAClZ,OAAO,GAAG,CAAC,UAAU,EAAE,QAAQ,EAAE,SAAS,CAAC;AAEjE;AAEA,SAAS2Z,cAAc;EACrB,OAAO,OAAO;AAChB;;;;;;;;;;;;;;;;;;;;;;;AC3Ia;;AAEqB;AAEqB;AAEiB;AAOpC;AAE+B;AACtC;AAE7B,IAAIa,iBAAiB;AAErB,IAAI/O,WAAW,GAAG,CAAC;AACnB,IAAIgP,QAAQ,GAAG,KAAK;AAEd,SAAUC,8BAA8B,CAACC,kBAAkB;EAC/DH,iBAAiB,GAAGG,kBAAkB;AACxC;AAEM,SAAUzQ,cAAc;EAC5B,IAAI0B,MAAM,GAAG;IAAED,GAAG,EAAE8O,QAAQ;IAAE7O,MAAM,EAAEH;EAAW,CAAE;EACnDgP,QAAQ,GAAG,KAAK;EAChB,OAAO7O,MAAM;AACf;AAEM,SAAUgP,cAAc,CAACjP,GAAG;EAChC8O,QAAQ,GAAG9O,GAAG;AAChB;AAEc,SAAUkP,sBAAsB,CAC5C5X,QAAQ,EACR5G,MAAM,EACNye,aAAa,EACbpc,QAAQ,EACRqc,aAAa,EACb/P,YAAY,EACZ6N,kBAAkB;EAElB,IAAI,CAACmC,OAAO,GAAG3e,MAAM;EACrB,IAAI,CAACsC,SAAS,GAAGD,QAAQ;EACzB,IAAI,CAACuc,aAAa,GAAGjQ,YAAY;EACjC,IAAI,CAACkQ,mBAAmB,GAAGrC,kBAAkB;EAE7CiC,aAAa,CAAC5W,gBAAgB,CAAC,IAAI,CAAC;EAEpC;EACAjB,QAAQ,CAACsW,EAAE,CAAC,kBAAkB,EAAE,UAAUlV,KAAK;IAC7C8W,kBAAkB,CAAC9W,KAAK,CAACjG,OAAO,EAAE,IAAI,CAAC;IACvC,IAAI0W,yCAAE,CAACzQ,KAAK,CAACjG,OAAO,EAAE9C,qEAAY,CAACgD,QAAQ,CAAC,EAAE;MAC5C;MACAmN,WAAW,GAAGpH,KAAK,CAACjG,OAAO,CAAC3B,cAAc,CAACmP,MAAM;MACjD6O,QAAQ,GAAG,IAAI;MACfK,aAAa,CAACM,QAAQ,EAAE;;EAE5B,CAAC,CAAC;EAEF;EACAnY,QAAQ,CAACsW,EAAE,CACT,CACE,mBAAmB,EACnB,WAAW,EACX,yBAAyB,EACzB,WAAW,EACX,gBAAgB,CACjB,EACD;IACE,IAAIuB,aAAa,CAACO,QAAQ,EAAE,EAAE;MAC5BP,aAAa,CAACM,QAAQ,EAAE;;EAE5B,CAAC,CACF;EAED;EACAnY,QAAQ,CAACsW,EAAE,CAAC,CAAC,sBAAsB,CAAC,EAAE;IACpC,IAAIuB,aAAa,CAACO,QAAQ,EAAE,EAAE;MAC5BP,aAAa,CAACQ,MAAM,EAAE;;EAE1B,CAAC,CAAC;EAEFrY,QAAQ,CAACsW,EAAE,CAAC,wBAAwB,EAAE,UAAUlV,KAAK;IACnD0W,aAAa,CAACQ,cAAc,EAAE;IAC9B,IAAInd,OAAO,GAAGiG,KAAK,CAACoV,MAAM,CAACrb,OAAO;IAClCod,kBAAkB,CAACpd,OAAO,CAAC;EAC7B,CAAC,CAAC;EAEF6E,QAAQ,CAACsW,EAAE,CAAC,YAAY,EAAE,GAAG,EAAE,UAAUlV,KAAK;IAC5C,IAAIjG,OAAO,GAAGiG,KAAK,CAAC0C,KAAK;MACvB0U,UAAU,GAAGpX,KAAK,CAACR,OAAO,CAAC4X,UAAU;MACrCC,OAAO,GAAGrX,KAAK,CAACqX,OAAO;IAEzB,IAAIA,OAAO,EAAE;MACX;;IAGF,IAAI,CAACD,UAAU,EAAE;MACf;;IAEF,IAAI,CAAC3G,yCAAE,CAAC1W,OAAO,EAAE9C,qEAAY,CAACgD,QAAQ,CAAC,EAAE;MACvC6c,kBAAkB,CAAC/c,OAAO,CAAC;;EAE/B,CAAC,CAAC;EAEF6E,QAAQ,CAACsW,EAAE,CAAC,eAAe,EAAE,GAAG,EAAE,UAAUlV,KAAK;IAC/C8W,kBAAkB,CAAC9W,KAAK,CAAC0C,KAAK,CAAC;EACjC,CAAC,CAAC;EAEF,SAASoU,kBAAkB,CAAC/c,OAAO,EAAEud,KAAK;IACxC,IACEA,KAAK,IACLxB,sFAAK,CAAC/b,OAAO,EAAE,CAAC9C,qEAAY,CAACyK,cAAc,CAAC,CAAC,IAC7C3H,OAAO,CAAC3B,cAAc,CAAC4B,IAAI,CAAC8B,QAAQ,CAAC7E,qEAAY,CAAC4b,WAAW,CAAC,EAC9D;MACA4D,aAAa,CAACc,QAAQ,CAACxd,OAAO,CAAC;;EAEnC;EAEA,SAASod,kBAAkB,CAACpd,OAAO;IACjC,IAAIyd,UAAU,GAAGpY,QAAQ,CAACqN,sBAAsB,CAC9C,4BAA4B,CAC7B;IACD+K,UAAU,CAAC,CAAC,CAAC,CAACC,KAAK,EAAE;IACrB5B,0DAAY,CACV2B,UAAU,CAAC,CAAC,CAAC,EACbrB,iBAAiB,CAACuB,mBAAmB,EAAE,EACvC3d,OAAO,CACR;EACH;AACF;AAEAyc,sBAAsB,CAAC7a,OAAO,GAAG,CAC/B,UAAU,EACV,QAAQ,EACR,eAAe,EACf,UAAU,EACV,eAAe,EACf,cAAc,EACd,oBAAoB,CACrB;AAED;;;;;;;AAOA6a,sBAAsB,CAACjf,SAAS,CAACggB,QAAQ,GAAG,UAAUxd,OAAO;EAC3D;EACA,IAAIA,OAAO,CAACvB,EAAE,KAAK,oBAAoB,EAAE;IACvC;;EAEF,IAAIiR,IAAI,GAAGmM,sDAAQ,CAAC7b,OAAO,CAAC;EAE5B,IAAI0P,IAAI,KAAKwI,SAAS,EAAE;IACtB;;EAGF,IAAIzS,OAAO,GAAG;IACZiK,IAAI,EAAEA;GACP;EAED;EACA,IAAIkO,MAAM,GAAG,IAAI,CAACC,cAAc,CAAC7d,OAAO,CAAC;EAEzCpD,gDAAM,CAAC6I,OAAO,EAAEmY,MAAM,CAAC;EAEvB,IAAIxgB,OAAO,GAAG,EAAE;EAEhB;EACA,IAAI6e,2EAAe,CAACjc,OAAO,CAAC,EAAE;IAC5BpD,gDAAM,CAACQ,OAAO,EAAE;MACd0gB,UAAU,EAAE;KACb,CAAC;;EAGJ;EACA,IAAIpH,yCAAE,CAAC1W,OAAO,EAAE9C,qEAAY,CAACyK,cAAc,CAAC,EAAE;IAC5C/K,gDAAM,CAACQ,OAAO,EAAE;MACd2gB,SAAS,EAAE,IAAI;MACfD,UAAU,EAAE;KACb,CAAC;;EAGJlhB,gDAAM,CAAC6I,OAAO,EAAE;IACdrI,OAAO,EAAEA;GACV,CAAC;EAEF,OAAOqI,OAAO;AAChB,CAAC;AAED;;;;;;;;AAQAgX,sBAAsB,CAACjf,SAAS,CAACqgB,cAAc,GAAG,UAAU7d,OAAO;EACjE,IAAI/B,MAAM,GAAG,IAAI,CAAC2e,OAAO;EAEzB,IAAI5d,MAAM,GAAGgB,OAAO,CAAC0C,KAAK,IAAI1C,OAAO;EAErC,IAAIge,IAAI,GAAG/f,MAAM,CAACqd,eAAe,CAACtc,MAAM,CAAC;EAEzC,IAAIif,GAAG,GAAG;IACRhd,CAAC,EAAE+c,IAAI,CAAC/c,CAAC,GAAG+c,IAAI,CAAC5c,KAAK,GAAG,CAAC;IAC1BC,CAAC,EAAE2c,IAAI,CAAC3c,CAAC,GAAG2c,IAAI,CAAC1c,MAAM,GAAG;GAC3B;EAED;EACA,IAAIsc,MAAM,GAAG;IAAE3c,CAAC,EAAE+c,IAAI,CAAC/c,CAAC;IAAEI,CAAC,EAAE2c,IAAI,CAAC3c;EAAC,CAAE;EAErC;;EAEA,IAAI6c,IAAI,GAAGjgB,MAAM,CAACigB,IAAI,EAAE;EACxB,IAAIC,YAAY,GAAG,IAAI,CAACtB,aAAa,CAACuB,eAAe,EAAE;IACrDC,aAAa,GAAG,IAAI,CAACxB,aAAa,CAAC7O,gBAAgB,EAAE;EAEvD;EACA,IAAIsQ,gBAAgB,GAAGD,aAAa,CAACnQ,QAAQ,GAAGgQ,IAAI;IAClDK,kBAAkB,GAAGF,aAAa,CAACG,UAAU;IAC7CC,eAAe,GAAGN,YAAY,CAACjQ,QAAQ,GAAGgQ,IAAI;IAC9CQ,iBAAiB,GAAGP,YAAY,CAACK,UAAU;EAE7C,IAAIzQ,KAAK,GAAG;IACVI,UAAU,EAAE,IAAI,CAAC0O,aAAa,CAACuB,eAAe,EAAE,CAACjQ,UAAU;IAC3DwQ,UAAU,EAAE,IAAI,CAAC9B,aAAa,CAACuB,eAAe,EAAE,CAACO;GAClD;EAED;EACA,IAAIjI,yCAAE,CAAC1W,OAAO,EAAE9C,qEAAY,CAACkD,KAAK,CAAC,EAAE;IACnCxD,gDAAM,CAACghB,MAAM,EAAE;MACbgB,QAAQ,EAAEZ,IAAI,CAAC5c,KAAK,GAAG,GAAG,GAAG,GAAG,GAAG4c,IAAI,CAAC5c,KAAK,GAAG,GAAG,GAAG,GAAG;MACzDyd,QAAQ,EAAEb,IAAI,CAAC5c,KAAK;MACpB0d,SAAS,EAAE,EAAE,GAAGZ,IAAI;MACpBjd,CAAC,EAAE+c,IAAI,CAAC/c,CAAC;MACTI,CAAC,EAAE2c,IAAI,CAAC3c;KACT,CAAC;IAEFzE,gDAAM,CAACmR,KAAK,EAAE;MACZG,QAAQ,EAAEuQ,eAAe,GAAG,IAAI;MAChCD,UAAU,EAAEE,iBAAiB;MAC7BK,UAAU,EAAE,CAAC,GAAGb,IAAI,GAAG,IAAI;MAC3Bc,aAAa,EAAE,CAAC,GAAGd,IAAI,GAAG,IAAI;MAC9Be,WAAW,EAAE,CAAC,GAAGf,IAAI,GAAG,IAAI;MAC5BgB,YAAY,EAAE,CAAC,GAAGhB,IAAI,GAAG,IAAI;MAC7B/O,SAAS,EAAE;KACZ,CAAC;;EAGJ;EACA;EACA,IACE,uBAAuB,CAAC3F,IAAI,CAACxJ,OAAO,CAACC,IAAI,CAAC,IAC1C,4BAA4B,CAACuJ,IAAI,CAACxJ,OAAO,CAACC,IAAI,CAAC,EAC/C;IACArD,gDAAM,CAACghB,MAAM,EAAE;MACbxc,KAAK,EAAE4c,IAAI,CAAC5c,KAAK;MACjB0d,SAAS,EAAE,EAAE;MACbzd,CAAC,EAAE2c,IAAI,CAAC3c,CAAC,GAAG2c,IAAI,CAAC1c,MAAM,GAAG,EAAE;MAC5BL,CAAC,EAAE+c,IAAI,CAAC/c;KACT,CAAC;IAEFrE,gDAAM,CAACmR,KAAK,EAAE;MACZG,QAAQ,EAAEuQ,eAAe,GAAG,IAAI;MAChCD,UAAU,EAAEE,iBAAiB;MAC7BK,UAAU,EAAE,CAAC,GAAGb,IAAI,GAAG,IAAI;MAC3Bc,aAAa,EAAE,CAAC,GAAGd,IAAI,GAAG,IAAI;MAC9Be,WAAW,EAAE,CAAC,GAAGf,IAAI,GAAG,IAAI;MAC5BgB,YAAY,EAAE,CAAC,GAAGhB,IAAI,GAAG;KAC1B,CAAC;;EAGJ,IAAI9c,KAAK,GAAG,EAAE,GAAG8c,IAAI;IACnBa,UAAU,GAAG,CAAC,GAAGb,IAAI;IACrBc,aAAa,GAAG,CAAC,GAAGd,IAAI;EAE1B;EACA,IAAIlf,MAAM,CAACwc,WAAW,EAAE;IACtB5e,gDAAM,CAACghB,MAAM,EAAE;MACbxc,KAAK,EAAEA,KAAK;MACZE,MAAM,EAAE0c,IAAI,CAAC1c,MAAM,GAAGyd,UAAU,GAAGC,aAAa;MAChD/d,CAAC,EAAEgd,GAAG,CAAChd,CAAC,GAAGG,KAAK,GAAG,CAAC;MACpBC,CAAC,EAAE2c,IAAI,CAAC3c,CAAC,GAAG0d;KACb,CAAC;IAEFniB,gDAAM,CAACmR,KAAK,EAAE;MACZG,QAAQ,EAAEoQ,gBAAgB,GAAG,IAAI;MACjCE,UAAU,EAAED,kBAAkB;MAC9BQ,UAAU,EAAEA,UAAU,GAAG,IAAI;MAC7BC,aAAa,EAAEA,aAAa,GAAG;KAChC,CAAC;;EAGJ;EACA,IACE/C,2EAAe,CAACjd,MAAM,CAAC,IACvB,CAACkd,4EAAgB,CAACld,MAAM,CAAC,IACzB,CAACmd,mEAAO,CAACnd,MAAM,CAAC,EAChB;IACA,IAAImgB,gBAAgB,GAAGnD,+EAAmB,CAAChc,OAAO,CAAC;IAEnD,IAAIof,YAAY,GAAGnhB,MAAM,CAACqd,eAAe,CAAC;MACxCra,CAAC,EAAEke,gBAAgB,CAACle,CAAC;MACrBI,CAAC,EAAE8d,gBAAgB,CAAC9d,CAAC;MACrBD,KAAK,EAAE,CAAC;MACRE,MAAM,EAAE;KACT,CAAC;IAEF,IAAIA,MAAM,GAAGgd,gBAAgB,GAAGS,UAAU,GAAGC,aAAa;IAE1DpiB,gDAAM,CAACghB,MAAM,EAAE;MACbxc,KAAK,EAAEA,KAAK;MACZE,MAAM,EAAEA,MAAM;MACdL,CAAC,EAAEme,YAAY,CAACne,CAAC,GAAGG,KAAK,GAAG,CAAC;MAC7BC,CAAC,EAAE+d,YAAY,CAAC/d,CAAC,GAAGC,MAAM,GAAG;KAC9B,CAAC;IAEF1E,gDAAM,CAACmR,KAAK,EAAE;MACZG,QAAQ,EAAEoQ,gBAAgB,GAAG,IAAI;MACjCE,UAAU,EAAED,kBAAkB;MAC9BQ,UAAU,EAAEA,UAAU,GAAG,IAAI;MAC7BC,aAAa,EAAEA,aAAa,GAAG;KAChC,CAAC;;EAGJ;EACA,IAAItI,yCAAE,CAAC1W,OAAO,EAAE9C,qEAAY,CAACyK,cAAc,CAAC,EAAE;IAC5C/K,gDAAM,CAACghB,MAAM,EAAE;MACbxc,KAAK,EAAE4c,IAAI,CAAC5c,KAAK;MACjBE,MAAM,EAAE0c,IAAI,CAAC1c,MAAM;MACnBsd,QAAQ,EAAE,EAAE,GAAGV,IAAI;MACnBY,SAAS,EAAE,EAAE,GAAGZ;KACjB,CAAC;IAEFthB,gDAAM,CAACmR,KAAK,EAAE;MACZoB,SAAS,EAAE,MAAM;MACjB4P,UAAU,EAAE,CAAC,GAAGb,IAAI,GAAG,IAAI;MAC3Bc,aAAa,EAAE,CAAC,GAAGd,IAAI,GAAG,IAAI;MAC9Be,WAAW,EAAE,CAAC,GAAGf,IAAI,GAAG,IAAI;MAC5BgB,YAAY,EAAE,CAAC,GAAGhB,IAAI,GAAG,IAAI;MAC7BhQ,QAAQ,EAAEuQ,eAAe,GAAG,IAAI;MAChCD,UAAU,EAAEE;KACb,CAAC;;EAGJ,OAAO;IAAEd,MAAM,EAAEA,MAAM;IAAE7P,KAAK,EAAEA;EAAK,CAAE;AACzC,CAAC;AAED0O,sBAAsB,CAACjf,SAAS,CAAC6hB,MAAM,GAAG,UACxCrf,OAAO,EACPsf,QAAQ,EACRC,iBAAiB,EACjB3B,MAAM;EAEN,IAAIvG,SAAS,EAAE2G,IAAI;EAEnB,IAAItH,yCAAE,CAAC1W,OAAO,EAAE9C,qEAAY,CAACyK,cAAc,CAAC,EAAE;IAC5CqW,IAAI,GAAG,IAAI,CAACpB,OAAO,CAACtB,eAAe,CAACtb,OAAO,CAAC;IAE5CqX,SAAS,GAAG;MACVpW,CAAC,EAAEjB,OAAO,CAACiB,CAAC;MACZI,CAAC,EAAErB,OAAO,CAACqB,CAAC;MACZD,KAAK,EAAGpB,OAAO,CAACoB,KAAK,GAAG4c,IAAI,CAAC5c,KAAK,GAAIwc,MAAM,CAACxc,KAAK;MAClDE,MAAM,EAAGtB,OAAO,CAACsB,MAAM,GAAG0c,IAAI,CAAC1c,MAAM,GAAIsc,MAAM,CAACtc;KACjD;;EAGH,IAAI,CAACf,SAAS,CAACif,WAAW,CAACxf,OAAO,EAAEsf,QAAQ,EAAEjI,SAAS,CAAC;AAC1D,CAAC;;;;;;;;;;;;;;;;;;;;;;AC1XY;;AAEqD;AACrC;AAE7B,SAASoI,YAAY,CAACnS,QAAQ;EAC5B,IACEA,QAAQ,CAACrN,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACiG,KAAK,CAAC,IAC1CmK,QAAQ,CAACrN,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAAC0G,UAAU,CAAC,IAC/C0J,QAAQ,CAACrN,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACgD,QAAQ,CAAC,IAC7CoN,QAAQ,CAACrN,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACkD,KAAK,CAAC,EAC1C;IACA,OAAO,MAAM;;EAGf,IAAIsW,yCAAE,CAACpJ,QAAQ,EAAEpQ,4EAAY,CAACyK,cAAc,CAAC,EAAE;IAC7C,OAAO,MAAM;;AAEjB;AAEA,SAAS+X,aAAa,CAACpS,QAAQ;EAC7B,IAAIoJ,yCAAE,CAACpJ,QAAQ,EAAEpQ,4EAAY,CAACgD,QAAQ,CAAC,EAAE;IACvC,OAAO,QAAQ;;AAEnB;AAEM,SAAU2b,QAAQ,CAAC7b,OAAO;EAC9B,IAAIsN,QAAQ;EACZ,IAAItN,OAAO,CAAC3B,cAAc,EAAE;IAC1BiP,QAAQ,GAAGtN,OAAO,CAAC3B,cAAc;GAClC,MAAM;IACLiP,QAAQ,GAAGtN,OAAO;;EAEpB,IAAIsL,IAAI,GAAGmU,YAAY,CAACnS,QAAQ,CAAC;EACjC,IAAIhC,IAAI,IAAIgC,QAAQ,EAAE;IACpB,OAAOA,QAAQ,CAAChC,IAAI,CAAC,IAAI,EAAE;;AAE/B;AAEM,SAAUqU,SAAS,CAAC3f,OAAO;EAC/B,IAAIsN,QAAQ,GAAGtN,OAAO,CAAC3B,cAAc;IACnCiN,IAAI,GAAGoU,aAAa,CAACpS,QAAQ,CAAC;EAEhC,IAAIhC,IAAI,EAAE;IACR,OAAOgC,QAAQ,CAAChC,IAAI,CAAC,IAAI,EAAE;;AAE/B;AAEM,SAAUsU,QAAQ,CAAC5f,OAAO,EAAE0P,IAAI;EACpC,IAAIpC,QAAQ;EACZ,IAAItN,OAAO,CAAC3B,cAAc,EAAE;IAC1BiP,QAAQ,GAAGtN,OAAO,CAAC3B,cAAc;GAClC,MAAM;IACLiP,QAAQ,GAAGtN,OAAO;;EAEpB,IAAIsL,IAAI,GAAGmU,YAAY,CAACnS,QAAQ,CAAC;EAEjC,IAAIhC,IAAI,EAAE;IACRgC,QAAQ,CAAChC,IAAI,CAAC,GAAGoE,IAAI;;EAGvB,OAAO1P,OAAO;AAChB;AAEM,SAAU6f,SAAS,CAAC7f,OAAO,EAAE8f,UAAU;EAC3C,IAAIxS,QAAQ,GAAGtN,OAAO,CAAC3B,cAAc;IACnCiN,IAAI,GAAGoU,aAAa,CAACpS,QAAQ,CAAC;EAEhC,IAAIhC,IAAI,EAAE;IACRgC,QAAQ,CAAChC,IAAI,CAAC,GAAGwU,UAAU;;EAG7B,OAAO9f,OAAO;AAChB;AAEA;AACM,SAAU+f,oBAAoB,CAACtR,SAAS,EAAEuR,aAAa;EAC3D,IAAIC,gBAAgB,GAAG,CAAC;EACxB,IAAIC,UAAU,GAAG,EAAE;EAEnB,KAAK,IAAI7c,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoL,SAAS,CAACW,MAAM,EAAE/L,CAAC,EAAE,EAAE;IACzC,IAAI2c,aAAa,CAAC3c,CAAC,CAAC,KAAK,CAAC,IAAI2c,aAAa,CAAC3c,CAAC,CAAC,KAAK,GAAG,EAAE;MACtD,IAAI+L,MAAM,GAAGlO,IAAI,CAACgO,GAAG,CAACT,SAAS,CAACpL,CAAC,CAAC,CAACpC,CAAC,GAAGwN,SAAS,CAACpL,CAAC,GAAG,CAAC,CAAC,CAACpC,CAAC,CAAC;MAC1D,IAAImO,MAAM,GAAG8Q,UAAU,EAAE;QACvBD,gBAAgB,GAAG5c,CAAC;;;;EAI1B,OAAO4c,gBAAgB;AACzB;AAEA;AACM,SAAUhU,kBAAkB,CAACyD,IAAI;EACrC,IAAI,CAACA,IAAI,EAAE;IACT,OAAO,CAAC;;EAGV,IAAIyQ,QAAQ,GAAGzQ,IAAI,CAACN,MAAM,GAAG,GAAG;EAChC+Q,QAAQ,GAAGA,QAAQ,GAAG,CAAC;EAEvB;EACAA,QAAQ,IAAI,EAAE;EACd,OAAOA,QAAQ;AACjB;AAEA;;;AAGM,SAAUrE,YAAY,CAACsE,GAAG,EAAEC,GAAG,EAAErgB,OAAO;EAC5CsgB,aAAa,EAAE;EAEf;;EAEA,IAAIC,YAAY;EAEhB;EACAH,GAAG,CAACI,gBAAgB,CAAC,OAAO,EAAE;IAC5B;IACA,IAAIxgB,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAAC0G,UAAU,CAAC,EAAE;MAClD,IAAI,CAAC+B,KAAK,GAAG,IAAI,CAACmK,SAAS;;IAE7B,IAAI2Q,gBAAgB;MAClBC,gBAAgB;MAChBC,GAAG,GAAG,IAAI,CAAChb,KAAK;IAElB;IACA2a,aAAa,EAAE;IACfC,YAAY,GAAG,CAAC,CAAC;IAEjB;IACAE,gBAAgB,GAAGpb,QAAQ,CAACub,aAAa,CAAC,KAAK,CAAC;IAChDH,gBAAgB,CAACrN,YAAY,CAAC,IAAI,EAAE,mBAAmB,CAAC;IACxDqN,gBAAgB,CAACrN,YAAY,CAAC,OAAO,EAAE,oBAAoB,CAAC;IAE5D;IACA,IAAI,CAACyN,UAAU,CAACC,WAAW,CAACL,gBAAgB,CAAC;IAE7C;IACA,KAAK,MAAMlf,IAAI,IAAI8e,GAAG,EAAE;MACtB;MACA,IAAIM,GAAG,EAAE;QACP,IAAIpf,IAAI,CAACwf,MAAM,CAAC,CAAC,EAAEJ,GAAG,CAACvR,MAAM,CAAC,CAAC4R,WAAW,EAAE,IAAIL,GAAG,CAACK,WAAW,EAAE,EAAE;UACjE;UACAN,gBAAgB,GAAGrb,QAAQ,CAACub,aAAa,CAAC,KAAK,CAAC;UAEhD;UACAF,gBAAgB,CAAC5Q,SAAS,GACxB,UAAU,GACVvO,IAAI,CAACwf,MAAM,CAAC,CAAC,EAAEJ,GAAG,CAACvR,MAAM,CAAC,GAC1B,WAAW,GACX7N,IAAI,CAACwf,MAAM,CAACJ,GAAG,CAACvR,MAAM,CAAC;UAEzB;UACAsR,gBAAgB,CAAC5Q,SAAS,IACxB,8BAA8B,GAAGvO,IAAI,GAAG,IAAI;UAE9C;UACAmf,gBAAgB,CAACO,OAAO,GAAG;YACzB;YACAb,GAAG,CAACza,KAAK,GAAG,IAAI,CAACoN,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAACpN,KAAK;YACvDya,GAAG,CAACtQ,SAAS,GAAG,IAAI,CAACiD,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAACpN,KAAK;YAE3D;;YAEA2a,aAAa,EAAE;UACjB,CAAC;UACDG,gBAAgB,CAACK,WAAW,CAACJ,gBAAgB,CAAC;;;;IAKpD;IACA,IAAI1gB,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACiG,KAAK,CAAC,EAAE;MAC7Csd,gBAAgB,CAAC1S,KAAK,CAACmT,UAAU,GAAG,QAAQ;;EAEhD,CAAC,CAAC;EAEF;EACAd,GAAG,CAACe,SAAS,GAAG,UAAUtI,CAAC;IACzB,IAAI4H,gBAAgB,GAAGpb,QAAQ,CAACC,cAAc,CAAC,mBAAmB,CAAC;IACnE,IAAImb,gBAAgB,EAAE;MACpBA,gBAAgB,GAAGA,gBAAgB,CAAC1N,oBAAoB,CAAC,KAAK,CAAC;;IAEjE,IAAI8F,CAAC,CAACuI,OAAO,KAAK,EAAE,EAAE;MACpB;;MAEAb,YAAY,EAAE;MAEd;MACAc,SAAS,CAACZ,gBAAgB,CAAC;KAC5B,MAAM,IAAI5H,CAAC,CAACuI,OAAO,KAAK,EAAE,EAAE;MAC3B;MACA;;MAEAb,YAAY,EAAE;MAEd;MACAc,SAAS,CAACZ,gBAAgB,CAAC;KAC5B,MAAM,IAAI5H,CAAC,CAACuI,OAAO,KAAK,EAAE,EAAE;MAC3B;MACAvI,CAAC,CAACyI,cAAc,EAAE;MAClB,IAAIf,YAAY,GAAG,CAAC,CAAC,EAAE;QACrB;QACA,IAAIE,gBAAgB,IAAIA,gBAAgB,CAACF,YAAY,CAAC,EAAE;UACtDE,gBAAgB,CAACF,YAAY,CAAC,CAACtZ,KAAK,EAAE;;;;EAI9C,CAAC;EAED,SAASoa,SAAS,CAACZ,gBAAgB;IACjC;IACA,IAAI,CAACA,gBAAgB,IAAIA,gBAAgB,CAACrR,MAAM,GAAG,CAAC,EAAE,OAAO,KAAK;IAElE;IACAmS,YAAY,CAACd,gBAAgB,CAAC;IAC9B,IAAIF,YAAY,IAAIE,gBAAgB,CAACrR,MAAM,EAAEmR,YAAY,GAAG,CAAC;IAC7D,IAAIA,YAAY,GAAG,CAAC,EAAEA,YAAY,GAAGE,gBAAgB,CAACrR,MAAM,GAAG,CAAC;IAEhE;IACAqR,gBAAgB,CAACF,YAAY,CAAC,CAACiB,SAAS,CAAC5R,GAAG,CAAC,qBAAqB,CAAC;EACrE;EAEA,SAAS2R,YAAY,CAACd,gBAAgB;IACpC;IACA,IAAIA,gBAAgB,CAACrR,MAAM,GAAG,CAAC,EAAE;MAC/B,KAAK,MAAMwD,IAAI,IAAI6N,gBAAgB,EAAE;QACnC7N,IAAI,CAAC4O,SAAS,CAACjJ,MAAM,CAAC,qBAAqB,CAAC;;;EAGlD;EAEA,SAAS+H,aAAa,CAACmB,QAAQ;IAC7B;;IAEA,IAAIhB,gBAAgB,GAClBpb,QAAQ,CAACqN,sBAAsB,CAAC,oBAAoB,CAAC;IACvD,KAAK,MAAME,IAAI,IAAI6N,gBAAgB,EAAE;MACnC,IAAIgB,QAAQ,IAAI7O,IAAI,IAAI6O,QAAQ,IAAIrB,GAAG,EAAE;QACvCxN,IAAI,CAACiO,UAAU,CAACa,WAAW,CAAC9O,IAAI,CAAC;;;EAGvC;EAEA;EACAvN,QAAQ,CAACmb,gBAAgB,CAAC,OAAO,EAAE,UAAU3H,CAAC;IAC5CyH,aAAa,CAACzH,CAAC,CAAC7Z,MAAM,CAAC;EACzB,CAAC,CAAC;AACJ;;;;;;;;;;;;;;;;;;;;;;ACxPa;;AAE4D;AACf;AACE;AAEG;AACM;AACT;AACE;AACd;AAEhD,iEAAe;EACbib,WAAW,EAAE,CAAC0H,8EAAmB,EAAEhlB,sEAAY,EAAEilB,iEAAmB,CAAC;EACrE1H,QAAQ,EAAE,CAAC,wBAAwB,EAAE,uBAAuB,CAAC;EAC7D2H,sBAAsB,EAAE,CAAC,MAAM,EAAEpF,+DAAsB,CAAC;EACxDqF,qBAAqB,EAAE,CAAC,MAAM,EAAEhH,8DAAqB,CAAC;EACtDL,kBAAkB,EAAE,CAAC,MAAM,EAAEX,yEAAkB,CAAC;EAChDlV,YAAY,EAAE,CAAC,MAAM,EAAEiV,2EAAY,CAAC;EACpCvZ,QAAQ,EAAE,CAAC,OAAO,EAAE0Z,4DAAU;CAC/B;;;;;;;;;;;;;;;;;;;ACpBY;;AAEwC;AACQ;AAEvD,SAAU9N,UAAU,CAAC6V,GAAG;EAC5B,OAAOA,GAAG,CAACC,KAAK,CAAC,YAAY,CAAC,CAAC5S,MAAM;AACvC;AAEA;AACM,SAAUjD,aAAa,CAACsC,SAAS,EAAEC,KAAK,GAAG,CAAC;EAChD,IAAIuT,eAAe,GAAGxT,SAAS,CAACW,MAAM;EACtC,IAAI8S,kBAAkB;EACtB,IAAIC,IAAI;EACR,IAAIC,IAAI;EAER,IAAIH,eAAe,GAAG,CAAC,EAAE;IACvB,IAAIjC,aAAa,GAAG,IAAItI,KAAK,CAACuK,eAAe,GAAG,CAAC,CAAC;IAClD,KAAK,IAAI5e,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4e,eAAe,GAAG,CAAC,EAAE5e,CAAC,EAAE,EAAE;MAC5C;MACA2c,aAAa,CAAC3c,CAAC,CAAC,GAAG+I,mEAAY,CAACqC,SAAS,CAACpL,CAAC,CAAC,EAAEoL,SAAS,CAACpL,CAAC,GAAG,CAAC,CAAC,CAAC;;IAGjE,IAAI4c,gBAAgB,GAAGF,kEAAoB,CAACtR,SAAS,EAAEuR,aAAa,CAAC;IAErEmC,IAAI,GAAGE,cAAc,CACnB5T,SAAS,CAACwR,gBAAgB,CAAC,EAC3BxR,SAAS,CAACwR,gBAAgB,GAAG,CAAC,CAAC,CAChC;IACDmC,IAAI,GAAGE,cAAc,CACnB7T,SAAS,CAACwR,gBAAgB,CAAC,EAC3BxR,SAAS,CAACwR,gBAAgB,GAAG,CAAC,CAAC,EAC/BvR,KAAK,CACN;IAEDwT,kBAAkB,GAAG;MACnBjhB,CAAC,EAAEkhB,IAAI;MACP9gB,CAAC,EAAE+gB,IAAI;MACPxT,QAAQ,EAAEqR;KACX;IAED,OAAOiC,kBAAkB;GAC1B,MAAM;IACLC,IAAI,GAAGE,cAAc,CAAC5T,SAAS,CAAC,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAC,CAAC,CAAC;IACjD2T,IAAI,GAAGE,cAAc,CAAC7T,SAAS,CAAC,CAAC,CAAC,EAAEA,SAAS,CAAC,CAAC,CAAC,EAAEC,KAAK,CAAC;IAExDwT,kBAAkB,GAAG;MACnBjhB,CAAC,EAAEkhB,IAAI;MACP9gB,CAAC,EAAE+gB,IAAI;MACPxT,QAAQ,EAAE;KACX;IAED,OAAOsT,kBAAkB;;AAE7B;AAEA;AACM,SAAUG,cAAc,CAAC1T,UAAU,EAAEE,QAAQ;EACjD,IAAIC,KAAK,GAAG1C,mEAAY,CAACuC,UAAU,EAAEE,QAAQ,CAAC;EAC9C,IAAI0T,OAAO,GAAG,CAAC;EACf,IAAIC,WAAW,GAAG,CAAC;EACnB,IAAI1T,KAAK,KAAK,CAAC,IAAIA,KAAK,KAAK,GAAG,IAAIA,KAAK,KAAK,EAAE,IAAIA,KAAK,KAAK,GAAG,EAAE;IACjEyT,OAAO,GAAG,CAAC;GACZ,MAAM,IAAIzT,KAAK,GAAG,CAAC,IAAIA,KAAK,GAAG,EAAE,EAAE;IAClC;IACAyT,OAAO,GAAG,CAAC,GAAGzT,KAAK,GAAG,CAAC;GACxB,MAAM,IAAIA,KAAK,GAAG,EAAE,IAAIA,KAAK,GAAG,GAAG,EAAE;IACpC;IACA0T,WAAW,GAAG1T,KAAK,GAAG,EAAE;IACxByT,OAAO,GAAG,CAAC,GAAGC,WAAW,GAAG,EAAE;GAC/B,MAAM,IAAI1T,KAAK,GAAG,GAAG,IAAIA,KAAK,GAAG,GAAG,EAAE;IACrC;IACA0T,WAAW,GAAG1T,KAAK,GAAG,GAAG;IACzByT,OAAO,GAAGC,WAAW,GAAG,EAAE;GAC3B,MAAM,IAAI1T,KAAK,GAAG,GAAG,EAAE;IACtB;IACA0T,WAAW,GAAG1T,KAAK,GAAG,GAAG;IACzByT,OAAO,GAAG,CAAC,GAAGC,WAAW,GAAG,CAAC;;EAE/B,OAAOD,OAAO,GAAG,CAAC5T,UAAU,CAAC1N,CAAC,GAAG4N,QAAQ,CAAC5N,CAAC,IAAI,CAAC;AAClD;AAEA;AACM,SAAUqhB,cAAc,CAAC3T,UAAU,EAAEE,QAAQ,EAAEH,KAAK,GAAG,CAAC;EAC5D,IAAII,KAAK,GAAG1C,mEAAY,CAACuC,UAAU,EAAEE,QAAQ,CAAC;EAC9C,IAAI4T,OAAO,GAAG,CAAC;EACf,IAAID,WAAW,GAAG,CAAC;EAEnB,IAAI1T,KAAK,KAAK,CAAC,IAAIA,KAAK,KAAK,GAAG,EAAE;IAChC2T,OAAO,GAAG,EAAE;GACb,MAAM,IAAI3T,KAAK,KAAK,EAAE,IAAIA,KAAK,KAAK,GAAG,EAAE;IACxC2T,OAAO,GAAG,CAAC;GACZ,MAAM,IAAI3T,KAAK,GAAG,CAAC,IAAIA,KAAK,GAAG,EAAE,EAAE;IAClC;IACA2T,OAAO,GAAG,EAAE,GAAG3T,KAAK,GAAG,CAAC;GACzB,MAAM,IAAIA,KAAK,GAAG,EAAE,IAAIA,KAAK,GAAG,GAAG,EAAE;IACpC;IACA0T,WAAW,GAAG1T,KAAK,GAAG,EAAE;IACxB2T,OAAO,GAAI,CAACD,WAAW,GAAG,CAAC,GAAI9T,KAAK;GACrC,MAAM,IAAII,KAAK,GAAG,GAAG,IAAIA,KAAK,GAAG,GAAG,EAAE;IACrC;IACA0T,WAAW,GAAG1T,KAAK,GAAG,GAAG;IACzB2T,OAAO,GAAG,EAAE,GAAGD,WAAW,GAAG,CAAC;GAC/B,MAAM,IAAI1T,KAAK,GAAG,GAAG,EAAE;IACtB;IACA0T,WAAW,GAAG1T,KAAK,GAAG,GAAG;IACzB2T,OAAO,GAAI,CAACD,WAAW,GAAG,CAAC,GAAI9T,KAAK;;EAEtC,OAAO+T,OAAO,GAAG,CAAC9T,UAAU,CAACtN,CAAC,GAAGwN,QAAQ,CAACxN,CAAC,IAAI,CAAC;AAClD;;;;;;;;;;;;;;;;;AC7Ga;;AAEiD;AAE9B;AAElB,SAAU2Y,UAAU,CAChCnV,QAAQ,EACR1G,cAAc,EACdyG,YAAY,EACZyV,gBAAgB;EAEhBqI,8EAAQ,CAACrlB,IAAI,CAAC,IAAI,EAAEwH,QAAQ,EAAE1G,cAAc,EAAEyG,YAAY,EAAEyV,gBAAgB,CAAC;AAC/E;AAEAqI,8EAAQ,CAACllB,SAAS,CAACgiB,WAAW,GAAG,UAAUxf,OAAO,EAAEsf,QAAQ,EAAEjI,SAAS;EACrE,IACErX,OAAO,CAAC3B,cAAc,GAClBihB,QAAQ,KAAKtf,OAAO,CAAC3B,cAAc,CAACkD,IAAI,GACxC+d,QAAQ,KAAKtf,OAAO,CAACuB,IAAI,EAC7B;IACA,IAAI,eAAe,CAACiI,IAAI,CAACxJ,OAAO,CAACC,IAAI,CAAC,EAAE;MACtC,IAAI,CAAC0iB,aAAa,CAAC/c,OAAO,CAAC,2BAA2B,EAAE;QACtD5F,OAAO,EAAEA,OAAO;QAChBsf,QAAQ,EAAEA,QAAQ;QAClBjI,SAAS,EAAEA;OACZ,CAAC;KACH,MAAM;MACL,IAAI,CAACsL,aAAa,CAAC/c,OAAO,CAAC,qBAAqB,EAAE;QAChD5F,OAAO,EAAEA,OAAO;QAChBsf,QAAQ,EAAEA,QAAQ;QAClBjI,SAAS,EAAEA;OACZ,CAAC;;;AAGR,CAAC;AAEDqL,8EAAQ,CAACllB,SAAS,CAAColB,YAAY,GAAG,UAAU5iB,OAAO,EAAE8H,SAAS,EAAEuP,SAAS;EACvE,IACErX,OAAO,CAAC3B,cAAc,GAClByJ,SAAS,KAAK9H,OAAO,CAAC3B,cAAc,CAACmP,MAAM,GAC3C1F,SAAS,KAAK9H,OAAO,CAACwN,MAAM,EAChC;IACA,IAAI,eAAe,CAAChE,IAAI,CAACxJ,OAAO,CAACC,IAAI,CAAC,EAAE;MACtC,IAAI,CAAC0iB,aAAa,CAAC/c,OAAO,CAAC,2BAA2B,EAAE;QACtD5F,OAAO,EAAEA,OAAO;QAChB8H,SAAS,EAAEA,SAAS;QACpBuP,SAAS,EAAEA;OACZ,CAAC;KACH,MAAM;MACL,IAAI,CAACsL,aAAa,CAAC/c,OAAO,CAAC,qBAAqB,EAAE;QAChD5F,OAAO,EAAEA,OAAO;QAChB8H,SAAS,EAAEA,SAAS;QACpBuP,SAAS,EAAEA;OACZ,CAAC;;;AAGR,CAAC;AAEDqL,8EAAQ,CAACllB,SAAS,CAACgE,YAAY,GAAG,UAAUqhB,QAAQ,EAAEC,QAAQ,EAAEja,KAAK;EACnE,IAAIpD,OAAO,GAAG;IACZod,QAAQ,EAAEA,QAAQ;IAClBE,OAAO,EAAED,QAAQ;IACjBja,KAAK,EAAEA,KAAK,IAAI;GACjB;EAED,IAAI,CAAC8Z,aAAa,CAAC/c,OAAO,CAAC,eAAe,EAAEH,OAAO,CAAC;EACpD,OAAOA,OAAO,CAACqd,QAAQ;AACzB,CAAC;AAEDJ,8EAAQ,CAACllB,SAAS,CAAC0J,WAAW,GAAG,UAAUlH,OAAO;EAChD,IAAI,CAAC2iB,aAAa,CAAC/c,OAAO,CAAC,kCAAkC,EAAE;IAC7D5F,OAAO,EAAEA;GACV,CAAC;EACF,IAAI,CAACoH,cAAc,CAAC;IAAEpH;EAAO,CAAE,CAAC;AAClC,CAAC;AAEDlD,8CAAQ,CAACkd,UAAU,EAAE0I,8EAAQ,CAAC;AAE9B1I,UAAU,CAACpY,OAAO,GAAG,CACnB,UAAU,EACV,gBAAgB,EAChB,cAAc,EACd,kBAAkB,CACnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpFY;;AAEkD;AACW;AAChB;AACX;AACe;AACK;AACJ;AACM;AACd;AACc;AACkC;AAC9C;AACnB;AACa;AACkB;AACoB;AAEzF,iEAAe;EACbqY,WAAW,EAAE,CAACR,uEAAY,EAAEG,4EAAgB,EAAED,wEAAe,CAAC;EAC9DO,QAAQ,EAAE,CACR,qBAAqB,EACrB,iBAAiB,EACjB,kBAAkB,EAClB,oBAAoB,EACpB,oBAAoB,EACpB,qBAAqB,CACtB;EACD/b,cAAc,EAAE,CAAC,MAAM,EAAE8K,kEAAyB,CAAC;EACnDkR,mBAAmB,EAAE,CAAC,MAAM,EAAEzN,4DAAmB,CAAC;EAClD0N,eAAe,EAAE,CAAC,MAAM,EAAEb,mEAAkB,CAAC;EAC7Cc,gBAAgB,EAAE,CAAC,MAAM,EAAEzC,yDAAgB,CAAC;EAC5C0C,kBAAkB,EAAE,CAAC,MAAM,EAAE5B,2DAAkB,CAAC;EAChD6B,kBAAkB,EAAE,CAAC,MAAM,EAAElW,kFAA6B,CAAC;EAC3DmW,kBAAkB,EAAE,CAAC,MAAM,EAAEhB,qFAAc,CAAC;EAC5C3M,OAAO,EAAE,CAAC,MAAM,EAAE6M,iEAAO,CAAC;EAC1B/U,mBAAmB,EAAE,CAAC,MAAM,EAAEjD,wEAAmB,CAAC;EAClDkD,YAAY,EAAE,CAAC,MAAM,EAAEiV,4EAAY,CAAC;EACpCY,kBAAkB,EAAE,CAAC,MAAM,EAAEX,yEAAkB,CAAC;EAChDC,mCAAmC,EAAE,CACnC,MAAM,EACNA,0FAAmC,CACpC;EACDzZ,QAAQ,EAAE,CAAC,MAAM,EAAE0Z,mDAAU;CAC9B;;;;;;;;;;;;;;;;;;;;;;;;AC7CY;;AAEwC;AAErD,IAAIgJ,cAAc,GAAG,EAAE;AACvB,IAAIC,sBAAsB,GAAG,CAAC,KAAK,CAAC;AAEpC,IAAIC,qBAAqB;AAEnB,SAAUC,mBAAmB,CAACC,4BAA4B;EAC9DF,qBAAqB,GAAGE,4BAA4B;AACtD;AAEA;AACM,SAAUpX,oBAAoB,CAAChM,OAAO;EAC1C,IAAI+O,SAAS,GAAG,QAAQ;EACxB,IAAIC,QAAQ,GAAG,EAAE;EACjB,IAAIqU,SAAS,GAAG,EAAE;EAClB,IAAI/b,QAAQ,GAAG6E,iEAAa,CAACnM,OAAO,CAACyO,SAAS,CAAC;EAE/C,OAAO;IACLU,SAAS,EAAEJ,SAAS;IACpB3N,KAAK,EAAE4N,QAAQ;IACf1N,MAAM,EAAE+hB,SAAS;IACjBpiB,CAAC,EAAEqG,QAAQ,CAACrG,CAAC;IACbI,CAAC,EAAEiG,QAAQ,CAACjG;GACb;AACH;AAEA;AACM,SAAU2C,uBAAuB,CAACsf,eAAe,EAAE1e,YAAY;EACnE,MAAM0I,QAAQ,GAAGgW,eAAe,CAACjlB,cAAc;EAC/C,MAAMklB,WAAW,GAAG,CAAC,CAAC,CAAC;EACvB,IAAIC,YAAY,GAAG,CAAC,CAAC;EAErB,MAAMC,oBAAoB,GAAGP,qBAAqB,CAACQ,uBAAuB,EAAE;EAE5ED,oBAAoB,CAAC9jB,OAAO,CAAEK,OAAO,IAAI;IACvC,IAAIA,OAAO,CAAC3B,cAAc,CAACmP,MAAM,EAAE;MACjC+V,WAAW,CAACvlB,IAAI,CAAC,CAACgC,OAAO,CAAC3B,cAAc,CAACmP,MAAM,CAAC;;EAEpD,CAAC,CAAC;EACF,KAAK,IAAInK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkgB,WAAW,CAACnU,MAAM,EAAE/L,CAAC,EAAE,EAAE;IAC3C,IAAI,CAACkgB,WAAW,CAACxhB,QAAQ,CAACsB,CAAC,CAAC,EAAE;MAC5B,IAAI,CAACkgB,WAAW,CAACxhB,QAAQ,CAACsB,CAAC,CAAC,EAAE;QAC5BmgB,YAAY,GAAGngB,CAAC;QAChBA,CAAC,GAAGkgB,WAAW,CAACnU,MAAM;;;;EAI5B,IAAIoU,YAAY,KAAK,CAAC,CAAC,EAAE;IACvBA,YAAY,GAAGD,WAAW,CAACnU,MAAM;;EAGnCuU,iCAAiC,CAC/BF,oBAAoB,EACpBD,YAAY,EACZ5e,YAAY,CACb;EACD0I,QAAQ,CAACE,MAAM,GAAGgW,YAAY;EAC9B,OAAOA,YAAY;AACrB;AAEA;AACM,SAAUG,iCAAiC,CAC/CF,oBAAoB,EACpBD,YAAY,EACZ5e,YAAY;EAEZ6e,oBAAoB,CAAC9jB,OAAO,CAAEK,OAAO,IAAI;IACvC,IAAIwN,MAAM,GAAG,CAACxN,OAAO,CAAC3B,cAAc,CAACmP,MAAM;IAE3C,IAAIA,MAAM,IAAIgW,YAAY,EAAE;MAC1BA,YAAY,EAAE;MACdI,UAAU,CAAC;QACThf,YAAY,CAACgB,OAAO,CAAC,kBAAkB,EAAE;UACvCvH,cAAc,EAAE2B,OAAO,CAAC3B,cAAc;UACtCihB,QAAQ,EAAEtf,OAAO,CAAC3B,cAAc,CAACkD,IAAI;UACrCuG,SAAS,EAAE0F,MAAM;UACjBxN,OAAO,EAAEA;SACV,CAAC;MACJ,CAAC,EAAE,EAAE,CAAC;;EAEV,CAAC,CAAC;AACJ;AAEA;AACM,SAAU6jB,8BAA8B,CAC5CJ,oBAAoB,EACpBD,YAAY,EACZ3e,QAAQ;EAER;EACA,IAAIif,gBAAgB,GAAG,CAAC,EAAE,CAAC;EAC3BL,oBAAoB,CAAC9jB,OAAO,CAAEokB,QAAQ,IAAI;IACxC,IAAI,CAACD,gBAAgB,CAACC,QAAQ,CAAC1lB,cAAc,CAACmP,MAAM,CAAC,EAAE;MACrDsW,gBAAgB,CAACC,QAAQ,CAAC1lB,cAAc,CAACmP,MAAM,CAAC,GAAG,EAAE;;IAEvDsW,gBAAgB,CAACC,QAAQ,CAAC1lB,cAAc,CAACmP,MAAM,CAAC,CAACxP,IAAI,CAAC+lB,QAAQ,CAAC;EACjE,CAAC,CAAC;EAEF;EACA,IAAIC,aAAa,GAAGR,YAAY;EAChC,KACEQ,aAAa,EACbA,aAAa,GAAGF,gBAAgB,CAAC1U,MAAM,EACvC4U,aAAa,EAAE,EACf;IACA,IAAIF,gBAAgB,CAACE,aAAa,CAAC,EAAE;MACnCR,YAAY,EAAE;MACdS,mBAAmB,CACjBH,gBAAgB,CAACE,aAAa,CAAC,EAC/BR,YAAY,EACZ3e,QAAQ,CACT;;;AAGP;AAEA;AACM,SAAUqf,gBAAgB;EAC9B,IAAIC,YAAY,GAAG,EAAE;EACrB,IAAIC,UAAU,GAAGlB,qBAAqB,CAACQ,uBAAuB,EAAE;EAEhE,KAAK,IAAIrgB,CAAC,GAAG+gB,UAAU,CAAChV,MAAM,GAAG,CAAC,EAAE/L,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;IAC/C,IAAI5E,EAAE,GAAG2lB,UAAU,CAAC/gB,CAAC,CAAC,CAAChF,cAAc,CAACI,EAAE;IACxC,IAAI+O,MAAM,GAAG4W,UAAU,CAAC/gB,CAAC,CAAC,CAAChF,cAAc,CAACmP,MAAM;IAChD2W,YAAY,CAACnmB,IAAI,CAAC;MAAES,EAAE,EAAEA,EAAE;MAAE+O,MAAM,EAAEA;IAAM,CAAE,CAAC;;EAE/C,OAAO2W,YAAY;AACrB;AAEM,SAAUpY,mBAAmB,CAACsY,cAAc,EAAE7W,MAAM;EACxDwV,cAAc,CAACxV,MAAM,CAAC,GAAG6W,cAAc;AACzC;AAEM,SAAUC,mBAAmB,CAAC9W,MAAM,EAAE+W,KAAK;EAC/CtB,sBAAsB,CAACzV,MAAM,CAAC,GAAG+W,KAAK;AACxC;AAEA;;;AAGM,SAAUC,iBAAiB;EAC/B,OAAOxB,cAAc,CAACyB,KAAK,CAAC,CAAC,CAAC;AAChC;AAEM,SAAUC,yBAAyB;EACvC,OAAOzB,sBAAsB,CAACwB,KAAK,CAAC,CAAC,CAAC;AACxC;AAEA,SAASR,mBAAmB,CAACU,YAAY,EAAEnB,YAAY,EAAE3e,QAAQ;EAC/D,IAAI8f,YAAY,EAAE;IAChBA,YAAY,CAAChlB,OAAO,CAAEK,OAAO,IAAI;MAC/B,IAAIA,OAAO,EAAE;QACX,IAAI3B,cAAc,GAAG2B,OAAO,CAAC3B,cAAc;QAC3C,IAAIA,cAAc,EAAE;UAClBA,cAAc,CAACmP,MAAM,GAAGgW,YAAY;;QAEtC3e,QAAQ,CAACzF,IAAI,CAAC,iBAAiB,EAAE;UAAEY;QAAO,CAAE,CAAC;;IAEjD,CAAC,CAAC;;AAEN;;;;;;;;;;;;;;;;;;;;;ACnKa;;AAEqB;AACmD;AACZ;AACP;AACX;AACe;AAEtE;;;AAIA,IAAIgD,cAAc;AAClB,IAAI+hB,aAAa;AAEX,SAAUC,iBAAiB,CAACliB,qBAAqB,EAAEmiB,oBAAoB;EAC3EjiB,cAAc,GAAGF,qBAAqB;EACtCiiB,aAAa,GAAGE,oBAAoB;AACtC;AAEc,SAAUC,eAAe,CACrCC,OAAO,EACP5mB,MAAM,EACNJ,cAAc,EACdinB,SAAS,EACTC,SAAS;EAET,IAAI,CAACC,OAAO,GAAG/mB,MAAM;EACrB,IAAI,CAACgnB,eAAe,GAAGpnB,cAAc;EACrC,IAAI,CAACqnB,UAAU,GAAGJ,SAAS;EAC3B,IAAI,CAACK,UAAU,GAAGJ,SAAS;EAE3BF,OAAO,CAACrf,gBAAgB,CAAC,IAAI,CAAC;AAChC;AAEAof,eAAe,CAACtjB,OAAO,GAAG,CACxB,SAAS,EACT,QAAQ,EACR,gBAAgB,EAChB,WAAW,EACX,WAAW,EACX,UAAU,CACX;AAEDsjB,eAAe,CAAC1nB,SAAS,CAACkoB,iBAAiB,GAAG;EAC5C,IAAI1f,OAAO,GAAG,EAAE;IACdzH,MAAM,GAAG,IAAI,CAAC+mB,OAAO;IACrBnnB,cAAc,GAAG,IAAI,CAAConB,eAAe;IACrCH,SAAS,GAAG,IAAI,CAACI,UAAU;IAC3BH,SAAS,GAAG,IAAI,CAACI,UAAU;EAE7B,SAASE,YAAY,CAAC1lB,IAAI,EAAE8G,KAAK,EAAEpE,SAAS,EAAEqE,KAAK,EAAE5J,OAAO;IAC1D,SAASwoB,cAAc,CAAC3f,KAAK;MAC3B,IAAI0C,KAAK,GAAGxK,cAAc,CAACyK,WAAW,CAAChM,gDAAM,CAAC;QAAEqD,IAAI,EAAEA;MAAI,CAAE,EAAE7C,OAAO,CAAC,CAAC;MAEvER,gDAAM,CAAC+L,KAAK,CAACtK,cAAc,EAAE;QAC3BI,EAAE,EAAEkK,KAAK,CAAClK;OACX,CAAC;MAEF,IAAIrB,OAAO,EAAE;QACXuL,KAAK,CAACtK,cAAc,CAACyL,EAAE,CAAC+b,UAAU,GAAGzoB,OAAO,CAACyoB,UAAU;;MAGzDtnB,MAAM,CAAC4H,KAAK,CAACF,KAAK,EAAE0C,KAAK,CAAC;IAC5B;IAEA,IAAImd,SAAS,GAAG7lB,IAAI,CAACmG,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC;IAEjD,OAAO;MACLW,KAAK,EAAEA,KAAK;MACZpE,SAAS,EAAEA,SAAS;MACpBqE,KAAK,EAAE,SAAS,GAAGA,KAAK,IAAI,CAAqB;MACjDxE,MAAM,EAAE;QACNoF,SAAS,EAAEge,cAAc;QACzB3e,KAAK,EAAE2e;;KAEV;EACH;EAEA,OAAOG,WAAW,CAAC/f,OAAO,EAAEof,SAAS,EAAEC,SAAS,EAAEM,YAAY,CAAC;AACjE,CAAC;AAED,SAASK,mBAAmB,CAACC,WAAW;EACtC,MAAMC,OAAO,GAAG7gB,QAAQ,CAACub,aAAa,CAAC,OAAO,CAAC;EAC/Cvb,QAAQ,CAAC8gB,IAAI,CAACrF,WAAW,CAACoF,OAAO,CAAC;EAElC,IAAIE,cAAc,GAAG,IAAIvB,mFAAU,EAAE;EAErCuB,cAAc,CAACC,UAAU,CAACJ,WAAW,CAAC;EACtC,IAAIK,kBAAkB,GAAGF,cAAc,CAAC9iB,SAAS,EAAE;EAEnDgjB,kBAAkB,CAAC3mB,OAAO,CAAE4B,IAAI,IAAI;IAClC,IAAIyB,cAAc,CAACujB,yBAAyB,EAAE,CAACC,GAAG,CAACjlB,IAAI,CAAC,EAAE;MACxD,IAAIklB,GAAG,GAAGL,cAAc,CAACloB,GAAG,CAACqD,IAAI,CAAC;MAElC,MAAMmlB,SAAS,GACb,qBAAqB,GACrBnlB,IAAI,CAACkC,WAAW,EAAE,GAClB,WAAW,GACX,kBAAkB,GAClB,yCAAyC,GACzCkjB,YAAY,CAACF,GAAG,CAAC,GACjB,KAAK,GACL,gBAAgB;MAClBP,OAAO,CAACU,KAAK,CAACC,UAAU,CAACH,SAAS,EAAER,OAAO,CAACU,KAAK,CAACE,QAAQ,CAAC1X,MAAM,CAAC;;EAEtE,CAAC,CAAC;AACJ;AAEA,SAAS2W,WAAW,CAAC/f,OAAO,EAAEof,SAAS,EAAEC,SAAS,EAAEM,YAAY;EAC9D,IAAIoB,MAAM,GAAG/jB,cAAc,EAAEgkB,kCAAkC,EAAE;EAEjE,IAAIf,WAAW,GAAGgB,YAAY,CAACC,OAAO,CAACpC,wEAAkB,CAAC;EAE1D,IAAImB,WAAW,EAAE;IACfA,WAAW,GAAGkB,IAAI,CAACC,KAAK,CAACnB,WAAW,CAAC;IACrC,IAAIoB,iBAAiB,CAACpB,WAAW,CAAC,EAAE;MAClCA,WAAW,GAAGqB,gCAAgC,CAACrB,WAAW,CAAC;;IAE7D,IAAIA,WAAW,CAACnkB,OAAO,IAAImkB,WAAW,CAACnkB,OAAO,CAACnC,OAAO,EAAE;MACtD,MAAM4nB,eAAe,GAAG,IAAI1C,mFAAU,EAAE;MACxCoB,WAAW,CAACnkB,OAAO,CAACnC,OAAO,CAAE2C,KAAK,IAAI;QACpCilB,eAAe,CAACC,QAAQ,CAACllB,KAAK,CAAC;MACjC,CAAC,CAAC;MACFsiB,mGAAqB,CAAC2C,eAAe,CAAC;MACtCvB,mBAAmB,CAACC,WAAW,CAAC;;;EAIpCjjB,cAAc,EAAEykB,oBAAoB,CAACV,MAAM,CAACW,MAAM,EAAEX,MAAM,CAACY,WAAW,CAAC;EAEvE,IAAI1kB,UAAU,GAAGD,cAAc,EAAEE,iBAAiB,CAAChG,4EAAY,CAACiG,KAAK,CAAC;EAEtEF,UAAU,EAAEK,SAAS,EAAE,CAAC3D,OAAO,CAAE4D,SAAS,IAAI;IAC5CqkB,oBAAoB,CAACrkB,SAAS,EAAEoiB,YAAY,EAAE3f,OAAO,EAAE,OAAO,CAAC;EACjE,CAAC,CAAC;EAEFpJ,gDAAM,CAACoJ,OAAO,EAAE;IACd,iBAAiB,EAAE;MACjBe,KAAK,EAAE,OAAO;MACd8gB,SAAS,EAAE;;GAEd,CAAC;EAEF,IAAIlkB,eAAe,GAAGX,cAAc,EAAEE,iBAAiB,CACrDhG,4EAAY,CAAC0G,UAAU,CACxB;EAEDD,eAAe,EAAEL,SAAS,EAAE,CAAC3D,OAAO,CAAEkE,cAAc,IAAI;IACtD+jB,oBAAoB,CAAC/jB,cAAc,EAAE8hB,YAAY,EAAE3f,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;EACxE,CAAC,CAAC;;EAEFpJ,gDAAM,CAACoJ,OAAO,EAAE;IACd,sBAAsB,EAAE;MACtBe,KAAK,EAAE,YAAY;MACnB8gB,SAAS,EAAE;KACZ;IACD,mBAAmB,EAAElC,YAAY,CAC/BzoB,4EAAY,CAACkD,KAAK,EAClB,OAAO,EACP,8BAA8B,EAC9B,OAAO,CACR;IACD,iBAAiB,EAAE;MACjB2G,KAAK,EAAE,OAAO;MACd8gB,SAAS,EAAE;KACZ;IACD,YAAY,EAAE;MACZ9gB,KAAK,EAAE,OAAO;MACdpE,SAAS,EAAE,sBAAsB;MACjCqE,KAAK,EAAE,yBAAyB;MAChCxE,MAAM,EAAE;QACNyE,KAAK,EAAE,UAAUhB,KAAK;UACpBof,SAAS,CAACyC,iBAAiB,CAAC7hB,KAAK,CAAC;QACpC;;KAEH;IACD,YAAY,EAAE;MACZc,KAAK,EAAE,OAAO;MACdpE,SAAS,EAAE,sBAAsB;MACjCqE,KAAK,EAAE,uCAAuC;MAC9CxE,MAAM,EAAE;QACNyE,KAAK,EAAE,UAAUhB,KAAK;UACpBmf,SAAS,CAAC0C,iBAAiB,CAAC7hB,KAAK,CAAC;QACpC;;;GAGL,CAAC;EAEF,OAAOD,OAAO;AAChB;AAEA,SAAS4hB,oBAAoB,CAACrkB,SAAS,EAAEoiB,YAAY,EAAE3f,OAAO,EAAErD,SAAS;EACvE,IAAIpB,IAAI,GAAGsB,qEAAe,CAACU,SAAS,CAAC;EACrC,IAAIsE,IAAI,GAAG7E,cAAc,CAACU,cAAc,CAACH,SAAS,CAAC;EAEnD,IAAIf,MAAM,GAAG,EAAE;EACfA,MAAM,CAAC,cAAc,GAAGG,SAAS,GAAGpB,IAAI,CAAC,GAAGokB,YAAY,CACtDpiB,SAAS,EACTZ,SAAS,EACTkF,IAAI,EACJtG,IAAI,CACL;EACD3E,gDAAM,CAACoJ,OAAO,EAAExD,MAAM,CAAC;AACzB;AAEA,SAAS6kB,iBAAiB,CAACpB,WAAW;EACpC,OAAO,EACLhc,MAAM,CAAC8d,IAAI,CAAC9B,WAAW,CAAC,CAAC7W,MAAM,KAAK,CAAC,IACrCnF,MAAM,CAAC8d,IAAI,CAAC9B,WAAW,CAAC,CAAC,CAAC,CAAC,KAAK,SAAS,CAC1C;AACH;AAEA,SAASqB,gCAAgC,CAACrB,WAAW;EACnD,IAAI+B,IAAI,GAAG,IAAInD,mFAAU,EAAE;EAC3B5a,MAAM,CAAC8d,IAAI,CAAC9B,WAAW,CAAC,CAACtmB,OAAO,CAAEgK,GAAG,IAAI;IACvCqe,IAAI,CAACpe,GAAG,CAACD,GAAG,EAAEsc,WAAW,CAACtc,GAAG,CAAC,CAAC;EACjC,CAAC,CAAC;EACF,OAAOqe,IAAI;AACb;AAEA;AACA;AACA,SAASrB,YAAY,CAACF,GAAG;EACvB,OACE,gIAAgI,GAChI,4CAA4C,GAC5CA,GAAG,GACH,WAAW;AAEf;;;;;;;;;;;;;;;;ACvOa;;AAE6C;AAE1D;;;AAIA,IAAIvD,qBAAqB;AACnB,SAAU+E,+BAA+B,CAAC7E,4BAA4B;EAC1EF,qBAAqB,GAAGE,4BAA4B;AACtD;AAEc,SAAU8E,qBAAqB,CAACtjB,YAAY,EAAEC,QAAQ;EAClED,YAAY,CAACujB,eAAe,CAC1B,0BAA0B,EAC1BC,wBAAwB,CACzB;EACDxjB,YAAY,CAACujB,eAAe,CAAC,kBAAkB,EAAEE,gBAAgB,CAAC;EAElE;EACA;EACA,SAASA,gBAAgB,CAAC/nB,QAAQ;IAChC,IAAI,CAACgoB,UAAU,GAAG,UAAU7iB,OAAO;MACjCA,OAAO,CAAC8iB,QAAQ,GAAG9iB,OAAO,CAACpH,cAAc,CAACkD,IAAI,IAAI,GAAG;MAErD,IAAIinB,iBAAiB,GAAGtE,sEAAgB,EAAE;MAC1C5jB,QAAQ,CAACkf,WAAW,CAAC/Z,OAAO,CAACpH,cAAc,EAAEoH,OAAO,CAAC6Z,QAAQ,CAAC;MAC9Dhf,QAAQ,CAACsiB,YAAY,CAACnd,OAAO,CAACpH,cAAc,EAAEoH,OAAO,CAACqC,SAAS,CAAC;MAEhErC,OAAO,CAACgjB,SAAS,GAAGhjB,OAAO,CAACpH,cAAc,CAACmP,MAAM;MACjD/H,OAAO,CAAC+iB,iBAAiB,GAAGA,iBAAiB;IAC/C,CAAC;IAED,IAAI,CAAC5iB,OAAO,GAAG,UAAUH,OAAO;MAC9B,IAAI6H,QAAQ,GAAG7H,OAAO,CAACpH,cAAc;MACrC,IAAI2B,OAAO,GAAGyF,OAAO,CAACzF,OAAO;MAE7B,IAAIyF,OAAO,CAAC6Z,QAAQ,IAAI7Z,OAAO,CAAC6Z,QAAQ,CAAClQ,MAAM,GAAG,CAAC,EAAE;QACnD3J,OAAO,CAAC6Z,QAAQ,GAAG,GAAG;;MAGxBhS,QAAQ,CAAC/L,IAAI,GAAGkE,OAAO,CAAC6Z,QAAQ;MAChChS,QAAQ,CAACE,MAAM,GAAG/H,OAAO,CAACqC,SAAS;MAEnCjD,QAAQ,CAACzF,IAAI,CAAC,iBAAiB,EAAE;QAAEY;MAAO,CAAE,CAAC;IAC/C,CAAC;IAED,IAAI,CAAC0oB,MAAM,GAAG,UAAUjjB,OAAO;MAC7B,IAAI6H,QAAQ,GAAG7H,OAAO,CAACpH,cAAc;MACrC,IAAI2B,OAAO,GAAGyF,OAAO,CAACzF,OAAO;MAC7BsN,QAAQ,CAAC/L,IAAI,GAAGkE,OAAO,CAAC8iB,QAAQ;MAChCjb,QAAQ,CAACE,MAAM,GAAG/H,OAAO,CAACgjB,SAAS;MAEnCE,qCAAqC,CACnCljB,OAAO,CAAC+iB,iBAAiB,EACzB3jB,QAAQ,CACT;MAEDA,QAAQ,CAACzF,IAAI,CAAC,iBAAiB,EAAE;QAAEY;MAAO,CAAE,CAAC;IAC/C,CAAC;EACH;EAEA;EACA,SAASooB,wBAAwB,CAAC9nB,QAAQ;IACxC,IAAI,CAACgoB,UAAU,GAAG,UAAU7iB,OAAO;MACjCA,OAAO,CAACgjB,SAAS,GAAGhjB,OAAO,CAACpH,cAAc,CAACmP,MAAM;MACjD/H,OAAO,CAACmjB,YAAY,GAAGnjB,OAAO,CAACzF,OAAO,CAACyO,SAAS;MAChDhJ,OAAO,CAAClE,IAAI,GAAGkE,OAAO,CAACpH,cAAc,CAACkD,IAAI;MAE1C,IAAI,CAACkE,OAAO,CAACgjB,SAAS,EAAE;QACtBhjB,OAAO,CAACgjB,SAAS,GAAG,CAAC;;MAEvBnoB,QAAQ,CAACsiB,YAAY,CAACnd,OAAO,CAACpH,cAAc,EAAEoH,OAAO,CAACqC,SAAS,CAAC;IAClE,CAAC;IAED,IAAI,CAAClC,OAAO,GAAG,UAAUH,OAAO;MAC9B,IAAIpH,cAAc,GAAGoH,OAAO,CAACpH,cAAc;MAC3C,IAAI2B,OAAO,GAAGyF,OAAO,CAACzF,OAAO;MAC7B,IAAI6oB,UAAU,GAAG7oB,OAAO,CAACjB,MAAM;MAC/B,IAAI+pB,YAAY,GAAG,EAAE;MACrB,IAAIra,SAAS,GAAGzO,OAAO,CAACyO,SAAS;MAEjC,KAAK,IAAIpL,CAAC,GAAGoL,SAAS,CAACW,MAAM,GAAG,CAAC,EAAE/L,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC9CylB,YAAY,CAAC9qB,IAAI,CAACyQ,SAAS,CAACpL,CAAC,CAAC,CAAC;;MAGjCrD,OAAO,CAACjB,MAAM,GAAGiB,OAAO,CAAChB,MAAM;MAC/BX,cAAc,CAACU,MAAM,GAAGV,cAAc,CAACW,MAAM;MAC7CgB,OAAO,CAAChB,MAAM,GAAG6pB,UAAU;MAC3BxqB,cAAc,CAACW,MAAM,GAAG6pB,UAAU,CAACpqB,EAAE;MAErCJ,cAAc,CAACkD,IAAI,GAAGkE,OAAO,CAAClE,IAAI;MAClClD,cAAc,CAACmP,MAAM,GAAG/H,OAAO,CAACqC,SAAS;MACzC9H,OAAO,CAACyO,SAAS,GAAGqa,YAAY;MAEhCjkB,QAAQ,CAACzF,IAAI,CAAC,iBAAiB,EAAE;QAAEY;MAAO,CAAE,CAAC;IAC/C,CAAC;IAED,IAAI,CAAC0oB,MAAM,GAAG,UAAUjjB,OAAO;MAC7B,IAAI6H,QAAQ,GAAG7H,OAAO,CAACpH,cAAc;MACrC,IAAI2B,OAAO,GAAGyF,OAAO,CAACzF,OAAO;MAC7B,IAAI6oB,UAAU,GAAG7oB,OAAO,CAACjB,MAAM;MAE/BiB,OAAO,CAACjB,MAAM,GAAGiB,OAAO,CAAChB,MAAM;MAC/BsO,QAAQ,CAACvO,MAAM,GAAGuO,QAAQ,CAACtO,MAAM;MACjCgB,OAAO,CAAChB,MAAM,GAAG6pB,UAAU;MAC3Bvb,QAAQ,CAACtO,MAAM,GAAG6pB,UAAU,CAACpqB,EAAE;MAE/B6O,QAAQ,CAAC/L,IAAI,GAAGkE,OAAO,CAAClE,IAAI;MAE5B+L,QAAQ,CAACE,MAAM,GAAG/H,OAAO,CAACgjB,SAAS;MACnCzoB,OAAO,CAACyO,SAAS,GAAGhJ,OAAO,CAACmjB,YAAY;MAExC/jB,QAAQ,CAACzF,IAAI,CAAC,iBAAiB,EAAE;QAAEY;MAAO,CAAE,CAAC;IAC/C,CAAC;EACH;AACF;AAEA;AACA,SAAS2oB,qCAAqC,CAACxE,YAAY,EAAEtf,QAAQ;EACnE,IAAIuf,UAAU,GAAGlB,qBAAqB,CAAC6F,sBAAsB,EAAE;EAC/D,KAAK,IAAI1lB,CAAC,GAAG+gB,UAAU,CAAChV,MAAM,GAAG,CAAC,EAAE/L,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;IAC/C,KAAK,IAAI2lB,CAAC,GAAG7E,YAAY,CAAC/U,MAAM,GAAG,CAAC,EAAE4Z,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;MACjD,IAAI7E,YAAY,CAAC6E,CAAC,CAAC,CAACvqB,EAAE,CAACsD,QAAQ,CAACqiB,UAAU,CAAC/gB,CAAC,CAAC,CAAChF,cAAc,CAACI,EAAE,CAAC,EAAE;QAChE,IAAIuB,OAAO,GAAGokB,UAAU,CAAC/gB,CAAC,CAAC;QAC3BrD,OAAO,CAAC3B,cAAc,CAACmP,MAAM,GAAG2W,YAAY,CAAC6E,CAAC,CAAC,CAACxb,MAAM;QACtDwb,CAAC,GAAG,CAAC,CAAC;QACNnkB,QAAQ,CAACzF,IAAI,CAAC,iBAAiB,EAAE;UAAEY;QAAO,CAAE,CAAC;QAC7CmkB,YAAY,CAAC8E,MAAM,CAACD,CAAC,EAAE,CAAC,CAAC;;;;AAIjC;;;;;;;;;;;;;;;ACrIa;;AAE6B;AAE5B,SAAUG,oBAAoB,CAACvkB,YAAY,EAAEC,QAAQ;EACjED,YAAY,CAACujB,eAAe,CAAC,qBAAqB,EAAEiB,mBAAmB,CAAC;EACxExkB,YAAY,CAACujB,eAAe,CAC1B,kCAAkC,EAClCkB,0BAA0B,CAC3B;EAED,SAASD,mBAAmB;IAC1B,IAAI,CAACd,UAAU,GAAG,UAAU7iB,OAAO;MACjCA,OAAO,CAAC6jB,QAAQ,GAAG7jB,OAAO,CAACpH,cAAc,CAACoS,WAAW;IACvD,CAAC;IAED,IAAI,CAAC7K,OAAO,GAAG,UAAUH,OAAO;MAC9B,IAAI6H,QAAQ,GAAG7H,OAAO,CAACpH,cAAc;MACrC,IAAI2B,OAAO,GAAGyF,OAAO,CAACzF,OAAO;MAE7BsN,QAAQ,CAACmD,WAAW,GAAGhL,OAAO,CAACC,QAAQ;MAEvCb,QAAQ,CAACzF,IAAI,CAAC,iBAAiB,EAAE;QAAEY;MAAO,CAAE,CAAC;IAC/C,CAAC;IAED,IAAI,CAAC0oB,MAAM,GAAG,UAAUjjB,OAAO;MAC7B,IAAI6H,QAAQ,GAAG7H,OAAO,CAACpH,cAAc;MACrC,IAAI2B,OAAO,GAAGyF,OAAO,CAACzF,OAAO;MAE7BsN,QAAQ,CAACmD,WAAW,GAAGhL,OAAO,CAAC6jB,QAAQ;MAEvCzkB,QAAQ,CAACzF,IAAI,CAAC,iBAAiB,EAAE;QAAEY;MAAO,CAAE,CAAC;IAC/C,CAAC;EACH;EAEA,SAASqpB,0BAA0B;IACjC,IAAI,CAACf,UAAU,GAAG,UAAUiB,GAAG;MAC7BA,GAAG,CAACzrB,MAAM,GAAGyrB,GAAG,CAACvpB,OAAO,CAAClC,MAAM;MAC/ByrB,GAAG,CAACxrB,QAAQ,GAAGwrB,GAAG,CAACvpB,OAAO,CAACjC,QAAQ,CAAC0mB,KAAK,EAAE;IAC7C,CAAC;IAED,IAAI,CAAC7e,OAAO,GAAG,UAAU2jB,GAAG;MAC1B,IAAIvpB,OAAO,GAAGupB,GAAG,CAACvpB,OAAO;MACzBupB,GAAG,CAACxrB,QAAQ,CAAC4B,OAAO,CAAE6pB,KAAK,IAAI;QAC7BN,sDAAe,CAAClpB,OAAO,EAAEwpB,KAAK,CAAC;QAC/B3kB,QAAQ,CAACzF,IAAI,CAAC,iBAAiB,EAAE;UAAEY,OAAO,EAAEwpB;QAAK,CAAE,CAAC;MACtD,CAAC,CAAC;MACF3kB,QAAQ,CAACzF,IAAI,CAAC,cAAc,EAAE;QAAEY;MAAO,CAAE,CAAC;IAC5C,CAAC;IAED,IAAI,CAAC0oB,MAAM,GAAG,UAAUa,GAAG;MACzB,IAAIvpB,OAAO,GAAGupB,GAAG,CAACvpB,OAAO;MACzB6E,QAAQ,CAACzF,IAAI,CAAC,aAAa,EAAE;QAAEY;MAAO,CAAE,CAAC;MAEzCupB,GAAG,CAACvpB,OAAO,CAACjC,QAAQ,CAAC4B,OAAO,CAAE6pB,KAAK,IAAI;QACrC/Q,mBAAmB,CAACzY,OAAO,EAAEwpB,KAAK,CAAC;MACrC,CAAC,CAAC;IACJ,CAAC;EACH;AACF;;;;;;;;;;;;;;AC3DA;;;AAGc,SAAUzP,mCAAmC,CACzDnV,YAAY,EACZ6kB,YAAY;EAEZ7kB,YAAY,CAACujB,eAAe,CAC1B,oCAAoC,EACpCuB,eAAe,CAChB;EAED,SAASA,eAAe;IACtB,IAAI,CAAC9jB,OAAO,GAAG,UAAU2jB,GAAG;MAC1BA,GAAG,CAACI,QAAQ,GAAGF,YAAY,CAACG,QAAQ,EAAE;MACtCL,GAAG,CAACM,cAAc,GAAGJ,YAAY,CAACK,cAAc,EAAE;MAElDL,YAAY,CAACM,yBAAyB,CACpCR,GAAG,CAACS,QAAQ,EACZT,GAAG,CAACU,cAAc,EAClB,KAAK,CACN;IACH,CAAC;IAED,IAAI,CAACvB,MAAM,GAAG,UAAUa,GAAG;MACzBE,YAAY,CAACM,yBAAyB,CACpCR,GAAG,CAACI,QAAQ,EACZJ,GAAG,CAACM,cAAc,EAClB,KAAK,CACN;IACH,CAAC;EACH;AACF;;;;;;;;;;;;;;AChCa;;AAEC,SAAUK,mBAAmB,CAACtlB,YAAY,EAAEC,QAAQ;EAChED,YAAY,CAACujB,eAAe,CAAC,+BAA+B,EAAEgC,UAAU,CAAC;EAEzE,SAASA,UAAU,CAAC7pB,QAAQ;IAC1B,IAAI,CAACgoB,UAAU,GAAG,UAAU7iB,OAAO;MACjC,IAAI2kB,gBAAgB,GAAG3kB,OAAO,CAACtG,QAAQ;MAEvCsG,OAAO,CAAC8iB,QAAQ,GAAG6B,gBAAgB,CAAC,CAAC,CAAC,CAAC/rB,cAAc,CAACkD,IAAI;MAE1D6oB,gBAAgB,CAACzqB,OAAO,CAAEK,OAAO,IAAI;QACnCM,QAAQ,CAACkf,WAAW,CAACxf,OAAO,CAAC3B,cAAc,EAAEgsB,OAAO,CAACC,QAAQ,CAAC;MAChE,CAAC,CAAC;IACJ,CAAC;IAED,IAAI,CAAC1kB,OAAO,GAAG,UAAUH,OAAO;MAC9B,IAAI2kB,gBAAgB,GAAG3kB,OAAO,CAACtG,QAAQ;MACvCirB,gBAAgB,CAACzqB,OAAO,CAAEK,OAAO,IAAI;QACnC,IAAIsN,QAAQ,GAAGtN,OAAO,CAAC3B,cAAc;QACrCiP,QAAQ,CAAC/L,IAAI,GAAGkE,OAAO,CAAC6kB,QAAQ;QAEhCzlB,QAAQ,CAACzF,IAAI,CAAC,iBAAiB,EAAE;UAAEY;QAAO,CAAE,CAAC;MAC/C,CAAC,CAAC;IACJ,CAAC;IAED,IAAI,CAAC0oB,MAAM,GAAG,UAAUjjB,OAAO;MAC7B,IAAI2kB,gBAAgB,GAAG3kB,OAAO,CAACtG,QAAQ;MACvCirB,gBAAgB,CAACzqB,OAAO,CAAEK,OAAO,IAAI;QACnC,IAAIsN,QAAQ,GAAGtN,OAAO,CAAC3B,cAAc;QACrCiP,QAAQ,CAAC/L,IAAI,GAAGkE,OAAO,CAAC8iB,QAAQ;QAEhC1jB,QAAQ,CAACzF,IAAI,CAAC,iBAAiB,EAAE;UAAEY;QAAO,CAAE,CAAC;MAC/C,CAAC,CAAC;IACJ,CAAC;EACH;AACF;;;;;;;;;;;;;;;;;;ACpCa;;AAOoB;AAOG;AAE8B;AAClB;AAEhD,MAAMwqB,eAAe,GAAG;EACtBppB,KAAK,EAAE,CAAC;EACRE,MAAM,EAAE;CACT;AAED;;;AAGc,SAAUwY,kBAAkB,CACxCxZ,QAAQ,EACRsM,YAAY,EACZhI,YAAY;EAEZA,YAAY,CAACujB,eAAe,CAAC,2BAA2B,EAAEuB,eAAe,CAAC;EAE1E,SAASA,eAAe;IACtB;;;;;;;;IASA,IAAI,CAACpB,UAAU,GAAG,UAAUiB,GAAG;MAC7B,IAAIvpB,OAAO,GAAGupB,GAAG,CAACvpB,OAAO;QACvB3B,cAAc,GAAG2B,OAAO,CAAC3B,cAAc;QACvCihB,QAAQ,GAAGiK,GAAG,CAACjK,QAAQ;QACvBxX,SAAS,GAAGyhB,GAAG,CAACzhB,SAAS;MAE3B,IACE,CAACqU,mEAAO,CAACnc,OAAO,CAAC,IACjBic,2EAAe,CAACjc,OAAO,CAAC,IACxB,CAACkc,4EAAgB,CAAClc,OAAO,CAAC,KACzBsf,QAAQ,KAAK,EAAE,IAAIxX,SAAS,KAAK,EAAE,CAAC,EACrC;QACA;QACA,IAAIiX,UAAU,GAAG,CAAC;QAElB,IAAI0L,WAAW,GAAGzO,+EAAmB,CAAChc,OAAO,CAAC;QAE9CyqB,WAAW,GAAG;UACZxpB,CAAC,EAAEwpB,WAAW,CAACxpB,CAAC;UAChBI,CAAC,EAAEopB,WAAW,CAACppB,CAAC,GAAG0d;SACpB;QAEDze,QAAQ,CAACoqB,WAAW,CAAC1qB,OAAO,EAAEyqB,WAAW,EAAE;UACzChsB,EAAE,EAAEJ,cAAc,CAACI,EAAE,GAAG,QAAQ;UAChCJ,cAAc,EAAEA;SACjB,CAAC;;IAEN,CAAC;IAED,IAAI,CAACuH,OAAO,GAAG,UAAU2jB,GAAG;MAC1BA,GAAG,CAAChB,QAAQ,GAAG1M,+DAAQ,CAAC0N,GAAG,CAACvpB,OAAO,CAAC;MACpCupB,GAAG,CAACd,SAAS,GAAG9I,gEAAS,CAAC4J,GAAG,CAACvpB,OAAO,CAAC;MACtC,OAAO2qB,OAAO,CAACpB,GAAG,CAACvpB,OAAO,EAAEupB,GAAG,CAACjK,QAAQ,EAAEiK,GAAG,CAACzhB,SAAS,CAAC;IAC1D,CAAC;IAED,IAAI,CAAC4gB,MAAM,GAAG,UAAUa,GAAG;MACzB,OAAOoB,OAAO,CAACpB,GAAG,CAACvpB,OAAO,EAAEupB,GAAG,CAAChB,QAAQ,EAAEgB,GAAG,CAACd,SAAS,CAAC;IAC1D,CAAC;IAED,IAAI,CAACmC,WAAW,GAAG,UAAUrB,GAAG;MAC9B,IAAIvpB,OAAO,GAAGupB,GAAG,CAACvpB,OAAO;QACvB0C,KAAK,GAAG1C,OAAO,CAAC0C,KAAK,IAAI1C,OAAO;QAChCsf,QAAQ,GAAGiK,GAAG,CAACjK,QAAQ;QACvBjI,SAAS,GAAGkS,GAAG,CAAClS,SAAS;MAE3B,IAAI8E,mEAAO,CAACzZ,KAAK,CAAC,IAAI4c,QAAQ,CAACuL,IAAI,EAAE,KAAK,EAAE,EAAE;QAC5CvqB,QAAQ,CAACwqB,WAAW,CAACpoB,KAAK,CAAC;QAE3B;;MAGF;MACA,IACE,CAACuZ,2EAAe,CAACjc,OAAO,CAAC,IACzB,CAAC0W,yCAAE,CAAC1W,OAAO,EAAE9C,4EAAY,CAACyK,cAAc,CAAC,EACzC;QACA;;MAGF,IAAIojB,EAAE,GAAGR,wDAAiB,CAAC7nB,KAAK,CAAC;MAEjC,IAAIgN,IAAI,GAAGqb,EAAE,CAACxpB,IAAI,IAAIwpB,EAAE,CAACrb,IAAI;MAE7B;MACA,IAAI,CAACA,IAAI,EAAE;QACT;;MAGF;MACA,IAAI,OAAO2H,SAAS,KAAK,WAAW,EAAE;QACpCA,SAAS,GAAGzK,YAAY,CAACoe,iBAAiB,CAACtoB,KAAK,EAAEgN,IAAI,CAAC;;MAGzD;MACA;MACA,IAAI2H,SAAS,EAAE;QACb/W,QAAQ,CAAC2qB,WAAW,CAACvoB,KAAK,EAAE2U,SAAS,EAAEmT,eAAe,CAAC;;IAE3D,CAAC;EACH;AACF;AAEA,SAASG,OAAO,CAAC3qB,OAAO,EAAE0P,IAAI,EAAEoQ,UAAU;EACxC;EACA,IAAIpd,KAAK,GAAG1C,OAAO,CAAC0C,KAAK,IAAI1C,OAAO;EAEpC,IAAIwN,MAAM,GAAGxN,OAAO,CAACwN,MAAM,IAAIxN,OAAO;EAEtC,IAAIwb,WAAW,GAAGxb,OAAO,CAACwb,WAAW,IAAIxb,OAAO;EAEhD,IAAIkrB,YAAY,GAAGlrB,OAAO,CAACkrB,YAAY,IAAIlrB,OAAO;EAClD4f,+DAAQ,CAACld,KAAK,EAAEgN,IAAI,CAAC;EACrBmQ,gEAAS,CAACrS,MAAM,EAAEsS,UAAU,CAAC;EAE7B,OAAO,CAACpd,KAAK,EAAE8Y,WAAW,EAAEhO,MAAM,EAAE0d,YAAY,CAAC;AACnD;AAEApR,kBAAkB,CAAClY,OAAO,GAAG,CAAC,UAAU,EAAE,cAAc,EAAE,cAAc,CAAC;;;;;;;;;;;;;;;;;;;AC7IzC;AAE1B,SAAU8U,EAAE,CAAC1W,OAAO,EAAEC,IAAI;EAC9B,MAAM8qB,EAAE,GAAGR,iBAAiB,CAACvqB,OAAO,CAAC;EAErC,OAAO+qB,EAAE,IAAI,OAAOA,EAAE,CAACK,WAAW,IAAI,UAAU,IAAIL,EAAE,CAACK,WAAW,CAACnrB,IAAI,CAAC;AAC1E;AAEM,SAAUsqB,iBAAiB,CAACvqB,OAAO;EACvC,OAAQA,OAAO,IAAIA,OAAO,CAAC3B,cAAc,IAAK2B,OAAO;AACvD;AAEM,SAAU+b,KAAK,CAAC/b,OAAO,EAAEqrB,KAAK;EAClC,OAAOF,8CAAI,CAACE,KAAK,EAAE,UAAUC,CAAC;IAC5B,OAAO5U,EAAE,CAAC1W,OAAO,EAAEsrB,CAAC,CAAC;EACvB,CAAC,CAAC;AACJ;AAEM,SAAU7S,mBAAmB,CAAC3a,MAAM,EAAE6K,KAAK;EAC/C7K,MAAM,CAACC,QAAQ,CAAC0mB,KAAK,EAAE,CAAC9kB,OAAO,CAAE4rB,UAAU,IAAI;IAC7C,IAAIA,UAAU,CAAC9sB,EAAE,KAAKkK,KAAK,CAAClK,EAAE,EAAE;MAC9B,IAAI8sB,UAAU,CAACtqB,CAAC,IAAI0H,KAAK,CAAC1H,CAAC,IAAIsqB,UAAU,CAACtqB,CAAC,IAAI0H,KAAK,CAAC1H,CAAC,GAAG0H,KAAK,CAACvH,KAAK,EAAE;QACpE,IAAImqB,UAAU,CAAClqB,CAAC,IAAIsH,KAAK,CAACtH,CAAC,IAAIkqB,UAAU,CAAClqB,CAAC,IAAIsH,KAAK,CAACtH,CAAC,GAAGsH,KAAK,CAACrH,MAAM,EAAE;UACrEiqB,UAAU,CAACztB,MAAM,GAAG6K,KAAK;UACzB,IAAI,CAACA,KAAK,CAAC5K,QAAQ,CAACgE,QAAQ,CAACwpB,UAAU,CAAC,EAAE;YACxC5iB,KAAK,CAAC5K,QAAQ,CAACC,IAAI,CAACutB,UAAU,CAAC;;;;;EAKzC,CAAC,CAAC;AACJ;AAEM,SAAUrC,eAAe,CAACprB,MAAM,EAAE6K,KAAK;EAC3C,MAAM6iB,WAAW,GAAG1tB,MAAM,CAACA,MAAM;EAEjCA,MAAM,CAACC,QAAQ,CAACwa,MAAM,CAAC5P,KAAK,CAAC;EAC7B6iB,WAAW,CAACztB,QAAQ,CAAC6R,GAAG,CAACjH,KAAK,CAAC;EAE/BA,KAAK,CAAC7K,MAAM,GAAG0tB,WAAW;EAE1B,MAAMC,QAAQ,GAAGpmB,QAAQ,CAACqmB,aAAa,CACrC,mBAAmB,GAAG/iB,KAAK,CAAClK,EAAE,GAAG,GAAG,CACrC,CAAC2T,aAAa;EACf,MAAMuZ,QAAQ,GAAGF,QAAQ,CAACrZ,aAAa;EACvC,MAAMwZ,cAAc,GAAGD,QAAQ,CAACvZ,aAAa,CAACA,aAAa;EAC3DuZ,QAAQ,CAACjK,WAAW,CAAC+J,QAAQ,CAAC;EAC9BG,cAAc,CAAC9K,WAAW,CAAC2K,QAAQ,CAAC;AACtC;;;;;;;;;;;;;;;AC3C6C;AAE7C,IAAIQ,WAAW,GAAG,CAAC;AAEnB;AACM,SAAUC,mCAAmC,CACjDllB,KAAK,EACLmlB,WAAW,EACXC,KAAK,EACLC,GAAG,EACHjrB,KAAK;EAEL4F,KAAK,GAAGA,KAAK,CAACZ,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAACA,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;EAErD,IAAIkmB,YAAY,GAAGC,WAAW,CAACvlB,KAAK,EAAE5F,KAAK,CAAC;EAC5C,IAAIorB,kBAAkB,GAAGC,iBAAiB,CAACN,WAAW,EAAE/qB,KAAK,CAAC;EAE9D;EACA,IAAIsrB,UAAU,GACZ,qGAAqG,IACpGN,KAAK,GAAG,EAAE,CAAC,GACZ,GAAG,IACFC,GAAG,GAAGJ,WAAW,CAAC,GACnB,2BAA2B,GAC3BK,YAAY,GACZE,kBAAkB,GAClB,cAAc;EAChB,OAAO;IAAEE,UAAU;IAAET;EAAW,CAAE;AACpC;AAEA,SAASM,WAAW,CAAC7c,IAAI,EAAEtO,KAAK;EAC9B,IAAIurB,UAAU,GAAGtnB,QAAQ,CAACub,aAAa,CAAC,QAAQ,CAAC;EACjD,IAAI2I,GAAG,GAAGoD,UAAU,CAACC,UAAU,CAAC,IAAI,CAAC;EACrCrD,GAAG,CAACsD,IAAI,GAAG,YAAY;EAEvB,OAAOC,eAAe,CAACpd,IAAI,EAAEtO,KAAK,EAAEmoB,GAAG,EAAE,EAAE,EAAEwC,iFAAqB,EAAE,EAAE,CAAC;AACzE;AAEA,SAASU,iBAAiB,CAAC/c,IAAI,EAAEtO,KAAK;EACpC,IAAI+qB,WAAW,GAAG,EAAE;EACpB,IAAIY,gBAAgB,GAAGrd,IAAI,CAACsS,KAAK,CAAC,MAAM,CAAC;EAEzC,IAAI2K,UAAU,GAAGtnB,QAAQ,CAACub,aAAa,CAAC,QAAQ,CAAC;EACjD,IAAI2I,GAAG,GAAGoD,UAAU,CAACC,UAAU,CAAC,IAAI,CAAC;EACrCrD,GAAG,CAACsD,IAAI,GAAG,YAAY;EAEvB,KAAK,IAAIxpB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0pB,gBAAgB,CAAC3d,MAAM,EAAE/L,CAAC,EAAE,EAAE;IAChD8oB,WAAW,IAAIW,eAAe,CAC5BC,gBAAgB,CAAC1pB,CAAC,CAAC,EACnBjC,KAAK,EACLmoB,GAAG,EACH,CAAC,EACDuC,uFAA2B,EAC3B,EAAE,CACH;;EAEH,OAAOK,WAAW;AACpB;AAEA,SAASW,eAAe,CAACpd,IAAI,EAAEtO,KAAK,EAAEmoB,GAAG,EAAEyD,OAAO,EAAEC,YAAY,EAAE/e,QAAQ;EACxE,IAAIgf,SAAS,GAAG,EAAE;EAClB,IAAIC,KAAK,GAAGzd,IAAI,CAACsS,KAAK,CAAC,GAAG,CAAC;EAE3B,IAAIoL,OAAO,GACT,6FAA6F,GAC7Flf,QAAQ,GACR,8CAA8C;EAEhD,IAAImf,QAAQ,GAAGhoB,QAAQ,CAACioB,eAAe,CAACzB,oEAAQ,EAAE,OAAO,CAAC;EAC1D,IAAI0B,QAAQ,GAAGloB,QAAQ,CAACmoB,cAAc,CAACL,KAAK,CAAC,CAAC,CAAC,CAAC;EAEhDE,QAAQ,CAACja,YAAY,CAAC,GAAG,EAAE4Y,yEAAa,CAAC;EACzCqB,QAAQ,CAACja,YAAY,CAAC,GAAG,EAAE4Z,OAAO,GAAGf,WAAW,CAAC;EACjDoB,QAAQ,CAACja,YAAY,CAAC,WAAW,EAAElF,QAAQ,CAAC;EAC5Cmf,QAAQ,CAACvM,WAAW,CAACyM,QAAQ,CAAC;EAE9B,KAAK,IAAIvE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmE,KAAK,CAAC/d,MAAM,EAAE4Z,CAAC,EAAE,EAAE;IACrC,IAAIqE,QAAQ,CAACpd,UAAU,IAAIod,QAAQ,CAACpd,UAAU,CAACwd,IAAI,EAAE;MACnD,IAAIC,GAAG,GAAGL,QAAQ,CAACpd,UAAU,CAACwd,IAAI,CAACre,MAAM;MACzCme,QAAQ,CAACE,IAAI,IAAI,GAAG,GAAGN,KAAK,CAACnE,CAAC,CAAC;MAE/B,IAAIO,GAAG,CAACoE,WAAW,CAACJ,QAAQ,CAACE,IAAI,CAAC,CAACrsB,KAAK,GAAGA,KAAK,GAAG,EAAE,EAAE;QACrD6qB,WAAW,IAAIgB,YAAY;QAC3BI,QAAQ,CAACpd,UAAU,CAACwd,IAAI,GAAGJ,QAAQ,CAACpd,UAAU,CAACwd,IAAI,CAAChJ,KAAK,CAAC,CAAC,EAAEiJ,GAAG,CAAC,CAAC,CAAC;QAEnER,SAAS,IAAIE,OAAO,GAAGC,QAAQ,CAAC/c,SAAS,GAAG,SAAS,CAAC,CAAC;QAEvD;QACA+c,QAAQ,GAAGhoB,QAAQ,CAACioB,eAAe,CAACzB,oEAAQ,EAAE,OAAO,CAAC;QACtD0B,QAAQ,GAAGloB,QAAQ,CAACmoB,cAAc,CAACL,KAAK,CAACnE,CAAC,CAAC,CAAC;QAC5CqE,QAAQ,CAACja,YAAY,CAAC,GAAG,EAAE4Y,yEAAa,CAAC;QACzCqB,QAAQ,CAACja,YAAY,CAAC,GAAG,EAAE4Z,OAAO,GAAGf,WAAW,CAAC;QACjDoB,QAAQ,CAACvM,WAAW,CAACyM,QAAQ,CAAC;;;;EAIpCtB,WAAW,IAAIgB,YAAY;EAE3BC,SAAS,IAAIE,OAAO,GAAGC,QAAQ,CAAC/c,SAAS,GAAG,SAAS;EACrD,OAAO4c,SAAS;AAClB;;;;;;;;;;;;;;;ACzG8C;AAqBvC,MAAMU,kBAAkB,GAAmB;EAChD7jB,WAAW,EAAEmO,SAAS;EACtBrO,KAAK,EAAEqO,SAAS;EAChBpO,EAAE,EAAEoO,SAAS;EACbha,GAAG,EAAEga,SAAS;EACdtO,GAAG,EAAEsO,SAAS;EAEdzZ,EAAE,EAAE,MAAM;EACV8C,IAAI,EAAE,MAAM;EAEZtB,IAAI,EAAE/C,uDAAY,CAAC0G,UAAU;EAE7B3C,CAAC,EAAE,CAAC;EACJI,CAAC,EAAE,CAAC;EACJC,MAAM,EAAE,EAAE;EACVF,KAAK,EAAE,EAAE;EACTqP,WAAW,EAAEyH;CACd;;;;;;;;;;;;;;ACtCK,MAAO2V,aAAa;EAIxBC,YAAYpG,MAAgB,EAAEC,WAAqB;IACjD,IAAI,CAACD,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,WAAW,GAAGA,WAAW;EAChC;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPF;AACO,MAAMoG,OAAO,GAAG,cAAc;AAErC;AACO,MAAMC,aAAa,GAAG,WAAW;AACjC,MAAMC,mBAAmB,GAAG,iBAAiB;AAC7C,MAAMC,mBAAmB,GAAG,kBAAkB;AAErD;AACO,MAAMpJ,kBAAkB,GAAG,eAAe;AAC1C,MAAMqJ,wBAAwB,GAAG,wBAAwB;AAEhE;AACO,MAAMC,wBAAwB,GAAG,CAAC;AAClC,MAAMC,0BAA0B,GAAG,CAAC;AAE3C;AACO,MAAMC,iBAAiB,GAAG,IAAI;AAC9B,MAAMC,gBAAgB,GAAG,kBAAkB;AAC3C,MAAMC,cAAc,GAAG,gBAAgB;AACvC,MAAMC,aAAa,GAAG,eAAe;AAE5C;AACO,MAAMC,gBAAgB,GAAG,gBAAgB;;;;;;;;;;;;;;;ACvB1C,MAAO7J,UAAU;EAGrBiJ;IACE,IAAI,CAAChsB,OAAO,GAAG,EAAE;EACnB;EAEA,IAAIsN,MAAM;IACR,OAAO,IAAI,CAACtN,OAAO,CAACsN,MAAM;EAC5B;EAEAuf,GAAG;IACD,OAAO,IAAI,CAAC7sB,OAAO;EACrB;EAEA8sB,IAAI;IACF,OAAO,IAAI,CAAC9sB,OAAO,CAACsN,MAAM;EAC5B;EAEAyf,OAAO;IACL,OAAO,IAAI,CAAC/sB,OAAO,CAACsN,MAAM,IAAI,CAAC;EACjC;EAEAoX,GAAG,CAAC7c,GAAW;IACb,OAAO,IAAI,CAAC7H,OAAO,CAACqpB,IAAI,CAAE7oB,KAAK,IAAKA,KAAK,CAACqH,GAAG,KAAKA,GAAG,CAAC;EACxD;EAEAC,GAAG,CAACD,GAAW,EAAEhE,KAAU;IACzB,IAAI,CAAC,IAAI,CAAC6gB,GAAG,CAAC7c,GAAG,CAAC,EAAE;MAClB,IAAI,CAAC7H,OAAO,CAAC9D,IAAI,CAAC,IAAI8wB,KAAK,CAACnpB,KAAK,EAAEgE,GAAG,CAAC,CAAC;;EAE5C;EAEAiG,GAAG,CAACjK,KAAU,EAAEgE,GAAW;IACzB,IAAI,CAACC,GAAG,CAACD,GAAG,EAAEhE,KAAK,CAAC;EACtB;EAEA6hB,QAAQ,CAACllB,KAAY;IACnB,IAAI,CAAC,IAAI,CAACkkB,GAAG,CAAClkB,KAAK,CAACqH,GAAG,CAAC,EAAE;MACxB,IAAI,CAAC7H,OAAO,CAAC9D,IAAI,CAAC,IAAI8wB,KAAK,CAACxsB,KAAK,CAACqD,KAAK,EAAErD,KAAK,CAACqH,GAAG,CAAC,CAAC;;EAExD;EAEArG,SAAS;IACP,OAAO,IAAI,CAACxB,OAAO,CAAC4T,GAAG,CAAEpT,KAAK,IAAKA,KAAK,CAACqH,GAAG,CAAC;EAC/C;EAEAolB,OAAO,CAACjc,MAAW;IACjB7I,MAAM,CAAC8d,IAAI,CAACjV,MAAM,CAAC,CAACnT,OAAO,CAAEgK,GAAG,IAAI;MAClC,IAAI,CAACC,GAAG,CAACD,GAAG,EAAEmJ,MAAM,CAACnJ,GAAG,CAAC,CAAC;IAC5B,CAAC,CAAC;EACJ;EAEA0c,UAAU,CAAC2B,IAAgB;IACzBA,IAAI,CAAClmB,OAAO,CAACnC,OAAO,CAAE2C,KAAK,IAAK,IAAI,CAACklB,QAAQ,CAACllB,KAAK,CAAC,CAAC;EACvD;EAEA0sB,KAAK;IACH,IAAI,CAACltB,OAAO,GAAG,EAAE;EACnB;EAEA+E,MAAM,CAAC8C,GAAW;IAChB,IAAI,CAAC7H,OAAO,GAAG,IAAI,CAACA,OAAO,CAACmtB,MAAM,CAAE3sB,KAAK,IAAKA,KAAK,CAACqH,GAAG,KAAKA,GAAG,CAAC;EAClE;EAEAzL,GAAG,CAACyL,GAAW;IACb,MAAMulB,KAAK,GAAG,IAAI,CAACptB,OAAO,CAACmtB,MAAM,CAAE3sB,KAAK,IAAKA,KAAK,CAACqH,GAAG,KAAKA,GAAG,CAAC;IAC/D,OAAOulB,KAAK,CAAC,CAAC,CAAC,GAAGA,KAAK,CAAC,CAAC,CAAC,CAACvpB,KAAK,GAAG,IAAI;EACzC;EAEAwpB,IAAI,CAAC7V,EAAkC;IACrC,IAAI,CAACxX,OAAO,CAACqtB,IAAI,CAAC7V,EAAE,CAAC;EACvB;EAEA8V,UAAU;IACR,IAAI,CAACttB,OAAO,CAACqtB,IAAI,CAAC,CAACE,CAAQ,EAAEC,CAAQ,KAAI;MACvC,IAAID,CAAC,CAAC1lB,GAAG,CAAC5H,QAAQ,CAAC,SAAS,CAAC,IAAIutB,CAAC,CAAC3lB,GAAG,CAAC5H,QAAQ,CAAC,SAAS,CAAC,EAAE;QAC1D,IAAIstB,CAAC,CAAC1lB,GAAG,GAAG2lB,CAAC,CAAC3lB,GAAG,EAAE,OAAO,CAAC,CAAC,CAAC,KACxB;UACH,OAAO,CAAC;;OAEX,MAAM;QACL,IAAI0lB,CAAC,CAAC1lB,GAAG,CAAC5H,QAAQ,CAAC,SAAS,CAAC,EAAE;UAC7B,OAAO,CAAC,CAAC;SACV,MAAM;UACL,OAAO,CAAC;;;IAGd,CAAC,CAAC;EACJ;;AAGI,MAAO+sB,KAAK;EAIhBhB,YAAYnoB,KAAU,EAAEgE,GAAW;IACjC,IAAI,CAAChE,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACgE,GAAG,GAAGA,GAAG;EAChB;;;;;;;;;;;;;;;;;;;;ACnGgD;AACI;AACR;AACO;AAmBrD,MAAM6H,KAAK,GAAG+d,eAAe,CAAC3B,+DAAkB,CAAC;AACjDpc,KAAK,CAACvR,IAAI,GAAG/C,uDAAY,CAACiG,KAAK;AAExB,MAAMqsB,6BAA6B,GAA8B;EACtEjuB,IAAI,EAAE2sB,2DAAmB;EACzBxG,MAAM,EAAE,CAAC,QAAQ,CAAC;EAClBC,WAAW,EAAE,CAAC,UAAU;CACzB;AAEK,SAAU8H,yBAAyB,CAACC,cAIzC;EACC,MAAMC,UAAU,GAAG,IAAI9K,8DAAU,EAAE;EACnC,MAAM+K,eAAe,GAAG,IAAI/K,8DAAU,EAAE;EACxC5a,MAAM,CAAC8d,IAAI,CAAC2H,cAAc,CAAChI,MAAM,CAAC,CAAC/nB,OAAO,CAAEgK,GAAG,IAAI;IACjDgmB,UAAU,CAAC/f,GAAG,CAAC8f,cAAc,CAAChI,MAAM,CAAC/d,GAAG,CAAC,EAAEA,GAAG,CAAC;EACjD,CAAC,CAAC;EACFM,MAAM,CAAC8d,IAAI,CAAC2H,cAAc,CAAC/H,WAAW,CAAC,CAAChoB,OAAO,CAAEgK,GAAG,IAAI;IACtDimB,eAAe,CAAChgB,GAAG,CAAC8f,cAAc,CAAC/H,WAAW,CAAChe,GAAG,CAAC,EAAEA,GAAG,CAAC;EAC3D,CAAC,CAAC;EAEF,OAAO;IACLpI,IAAI,EAAEmuB,cAAc,CAACnuB,IAAI;IACzBmmB,MAAM,EAAEiI,UAAU;IAClBhI,WAAW,EAAEiI;GACd;AACH;;;;;;;;;;;;;;AClDO,IAAK1yB,YAQX;AARD,WAAYA,YAAY;EACtBA,iDAAiC;EACjCA,qDAAqC;EACrCA,2CAA2B;EAC3BA,qDAAqC;EACrCA,2CAA2B;EAC3BA,6DAA6C;EAC7CA,4CAA4B;AAC9B,CAAC,EARWA,YAAY,KAAZA,YAAY;;;;;;;;;;;;;;;;;;;ACAiD;AACY;AACjB;AAElB;AAE5C,MAAO2yB,iBAAiB;EAK5B/B,YAAYgC,iBAA6B;IAJzC,eAAU,GAAG5B,2DAAmB;IAK9B,IAAI,CAAC4B,iBAAiB,GAAGA,iBAAiB;EAC5C;EAEA;;;EAGAC,cAAc;IACZ,OAAOC,WAAW;EACpB;EAEAC,qBAAqB,CAACH,iBAA6B;IACjD,IAAI,CAACA,iBAAiB,GAAGA,iBAAiB;EAC5C;EAEAI,aAAa,CACXxI,MAAgB,EAChBiI,UAAsB,EACtBhI,WAAqB,EACrBiI,eAA2B;IAE3B,MAAMO,gBAAgB,GAA2B,EAAE;IAEnDzI,MAAM,CAAC/nB,OAAO,CAAE4B,IAAY,IAAI;MAC9B,IAAI,CAAC,IAAI,CAACuuB,iBAAiB,CAACtJ,GAAG,CAACjlB,IAAI,CAAC,EAAE;QACrC4uB,gBAAgB,CAAC5uB,IAAI,CAAC,GAAGouB,UAAU,CAACzxB,GAAG,CAACqD,IAAI,CAAC;;IAEjD,CAAC,CAAC;IAEFomB,WAAW,CAAChoB,OAAO,CAAE4B,IAAY,IAAI;MACnC,IAAI,CAAC,IAAI,CAACuuB,iBAAiB,CAACtJ,GAAG,CAACjlB,IAAI,CAAC,EAAE;QACrC4uB,gBAAgB,CAAC5uB,IAAI,CAAC,GAAGquB,eAAe,CAAC1xB,GAAG,CAACqD,IAAI,CAAC;;IAEtD,CAAC,CAAC;IACF,MAAM6uB,KAAK,GAAG,IAAIvL,mFAAU,EAAE;IAC9B5a,MAAM,CAAC8d,IAAI,CAACoI,gBAAgB,CAAC,CAACxwB,OAAO,CAAEgK,GAAG,IAAI;MAC5CymB,KAAK,CAACxmB,GAAG,CAACD,GAAG,EAAEwmB,gBAAgB,CAACxmB,GAAG,CAAC,CAAC;IACvC,CAAC,CAAC;IAEFib,mGAAqB,CAACwL,KAAK,CAAC;EAC9B;EAEAC,gBAAgB,CAACC,mBAAwC;IACvD,IAAI,CAACC,UAAU,GAAGD,mBAAmB,CAAC/uB,IAAI;IAE1C,IAAImmB,MAAM,GAAG4I,mBAAmB,CAAC5I,MAAM;IACvC,IAAIC,WAAW,GAAG2I,mBAAmB,CAAC3I,WAAW;IAEjD,IAAI,CAACuI,aAAa,CAChBxI,MAAM,CAACpkB,SAAS,EAAE,EAClBokB,MAAM,EACNC,WAAW,CAACrkB,SAAS,EAAE,EACvBqkB,WAAW,CACZ;IAED,OAAO,IAAIkG,8EAAa,CAACnG,MAAM,CAACpkB,SAAS,EAAE,EAAEqkB,WAAW,CAACrkB,SAAS,EAAE,CAAC;EACvE;;AAGF;AAEA;;;;;AAKA,MAAMktB,YAAY,GAAG;EACnB9I,MAAM,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,CAAC;EAC5CC,WAAW,EAAE,CACX,OAAO,EACP,MAAM,EACN,OAAO,EACP,OAAO,EACP,OAAO,EACP,SAAS,EACT,UAAU,EACV,cAAc,EACd,OAAO,EACP,QAAQ,EACR,YAAY,EACZ,aAAa,EACb,KAAK,EACL,KAAK,EACL,OAAO,EACP,OAAO,EACP,MAAM,EACN,MAAM,EACN,MAAM,EACN,YAAY,EACZ,OAAO,EACP,gBAAgB,EAChB,gBAAgB,EAChB,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,UAAU,EACV,QAAQ,EACR,MAAM,EACN,OAAO,EACP,WAAW,EACX,WAAW,EACX,QAAQ,EACR,OAAO,EACP,KAAK,EACL,cAAc,EACd,QAAQ,EACR,WAAW,EACX,eAAe,EACf,QAAQ,EACR,KAAK,EACL,QAAQ,EACR,YAAY,EACZ,UAAU,EACV,MAAM,EACN,OAAO,EACP,SAAS,EACT,UAAU,EACV,QAAQ,EACR,SAAS,EACT,UAAU,EACV,OAAO,EACP,YAAY,EACZ,QAAQ,EACR,SAAS,EACT,SAAS,EACT,KAAK,EACL,UAAU,EACV,OAAO,EACP,SAAS,EACT,QAAQ,EACR,YAAY,EACZ,WAAW,EACX,WAAW,EACX,WAAW,EACX,MAAM,EACN,QAAQ,EACR,MAAM,EACN,OAAO,EACP,SAAS,EACT,eAAe,EACf,gBAAgB,EAChB,aAAa,EACb,UAAU,EACV,UAAU,EACV,OAAO,EACP,OAAO,EACP,WAAW,EACX,MAAM,EACN,QAAQ,EACR,UAAU,EACV,YAAY,EACZ,eAAe,EACf,OAAO,EACP,WAAW,EACX,OAAO;CAEV;AAED;;;AAGO,MAAMqI,WAAW,GAAG;EACzBtI,MAAM,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,QAAQ,CAAC;EACrCC,WAAW,EAAE,CAAC,UAAU,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,cAAc,EAAE,MAAM;CAC5E;;;;;;;;;;;;;;AC9KK,MAAO8I,kBAAkB;EAO7B3C,YACE/J,QAA8B,EAC9B2M,4BAAqC,EACrCC,gBAAyB,EACzBC,MAAW;IAEX,IAAI,CAAC7M,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAAC2M,4BAA4B,GAAGA,4BAA4B;IAChE,IAAI,CAACC,gBAAgB,GAAGA,gBAAgB;IACxC,IAAI,CAACC,MAAM,GAAGA,MAAM;EACtB;;;;;;;;;;;;;;;;ACnBI,MAAOC,gBAAgB;EAI3B/C,YAAY9mB,KAAa,EAAE5J,OAAuB;IAChD,IAAI,CAAC4J,KAAK,GAAGA,KAAK;IAClB,IAAI,CAAC5J,OAAO,GAAGA,OAAO;EACxB;;AAGI,MAAO0zB,YAAY;EAKvBhD,YAAYpe,IAAY,EAAEqhB,OAAe,EAAEzX,EAAO;IAChD,IAAI,CAAC5J,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACqhB,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACzX,EAAE,GAAGA,EAAE;EACd;;;;;;;;;;;;;;;ACnBI,MAAO0X,cAAc;EAOzBlD,YACE9mB,KAAa,EACbiqB,QAAgB,EAChBC,MAAe,EACfC,SAAkB,KAAK,EACvBC,QAAiB;IAEjB,IAAI,CAACpqB,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACiqB,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,QAAQ,GAAGA,QAAQ;EAC1B;;;;;;;;;;;;;;;;;;;;;ACnBK,MAAMC,uBAAuB,GAAG,OAAO;AACvC,MAAMC,YAAY,GAAG,OAAO;AAC5B,MAAMC,YAAY,GAAG,KAAK;AAE1B,MAAMC,iCAAiC,GAAG,SAAS;AACnD,MAAMC,sBAAsB,GAAG,OAAO;AACtC,MAAMC,eAAe,GAAG,OAAO;AAC/B,MAAMC,sBAAsB,GAAG,GAAG;;;;;;;;;;;;;;;;;;ACPgC;AAElE,IAAIC,aAAa,GAAG,IAAI/M,mFAAU,EAAE;AACpC,MAAMgN,QAAQ,GAAG;EACtBC,MAAM,EACJ,2WAA2W;EAC7WC,KAAK,EACH,0oBAA0oB;EAC5oBC,GAAG,EAAE,0oBAA0oB;EAC/oBC,YAAY,EACV,qOAAqO;EACvOC,KAAK,EACH,2bAA2b;EAC7bC,KAAK,EACH,oPAAoP;EACtPC,OAAO,EACL,uSAAuS;EACzSC,QAAQ,EACN,uVAAuV;EACzVC,KAAK,EACH,y/CAAy/C;EAC3/CC,KAAK,EACH,8UAA8U;EAChVC,MAAM,EACJ,+YAA+Y;EACjZ,aAAa,EACX,2gBAA2gB;EAC7gB,cAAc,EACZ,mNAAmN;EACrNC,UAAU,EACR,2QAA2Q;EAC7QC,IAAI,EAAE,4NAA4N;EAClOC,KAAK,EACH,sUAAsU;EACxUC,GAAG,EAAE,8aAA8a;EACnbC,GAAG,EAAE,giBAAgiB;EACriBC,KAAK,EACH,ueAAue;EACzeC,KAAK,EACH,2bAA2b;EAC7bC,IAAI,EAAE,0cAA0c;EAChdC,IAAI,EAAE,wnBAAwnB;EAC9nBC,IAAI,EAAE,izBAAizB;EACvzBC,UAAU,EACR,2gBAA2gB;EAC7gBC,KAAK,EACH,oQAAoQ;EACtQ,gBAAgB,EACd,0TAA0T;EAC5T,gBAAgB,EACd,+SAA+S;EACjTC,OAAO,EACL,wjBAAwjB;EAC1jBC,OAAO,EACL,4VAA4V;EAC9VC,OAAO,EACL,qnBAAqnB;EACvnBC,OAAO,EACL,unBAAunB;EACznBC,MAAM,EACJ,2LAA2L;EAC7LC,OAAO,EACL,4UAA4U;EAC9UC,QAAQ,EACN,8PAA8P;EAChQC,MAAM,EACJ,2PAA2P;EAC7PC,IAAI,EAAE,+kBAA+kB;EACrlBC,KAAK,EACH,sgBAAsgB;EACxgBC,SAAS,EACP,m2BAAm2B;EACr2BC,GAAG,EAAE,keAAke;EACveC,QAAQ,EACN,q6CAAq6C;EACv6CC,SAAS,EACP,kTAAkT;EACpTC,MAAM,EACJ,8SAA8S;EAChTC,SAAS,EACP,gTAAgT;EAClTC,UAAU,EACR,0XAA0X;EAC5XC,MAAM,EACJ,sUAAsU;EACxUC,GAAG,EAAE,ieAAie;EACteC,MAAM,EACJ,sVAAsV;EACxVC,GAAG,EAAE,0LAA0L;EAC/LC,OAAO,EACL,0UAA0U;EAC5UC,QAAQ,EACN,+XAA+X;EACjYC,KAAK,EACH,uVAAuV;EACzVC,MAAM,EACJ,meAAme;EACreC,OAAO,EACL,qSAAqS;EACvSC,QAAQ,EACN,wQAAwQ;EAC1QC,OAAO,EACL,4PAA4P;EAC9P,eAAe,EACb,ogBAAogB;EACtgBC,MAAM,EACJ,6RAA6R;EAC/RC,KAAK,EACH,6SAA6S;EAC/SC,OAAO,EACL,6XAA6X;EAC/XC,QAAQ,EACN,2RAA2R;EAC7RC,KAAK,EACH,+cAA+c;EACjdC,UAAU,EACR,+QAA+Q;EACjRC,SAAS,EACP,oQAAoQ;EACtQ,WAAW,EACT,sWAAsW;EACxWC,OAAO,EACL,8NAA8N;EAChO,gBAAgB,EACd,qaAAqa;EACvaC,IAAI,EAAE,4VAA4V;EAClWC,KAAK,EACH,meAAme;EACreC,IAAI,EAAE,8dAA8d;EACpeC,MAAM,EACJ,ueAAue;EACzeC,IAAI,EAAE,wSAAwS;EAC9SC,KAAK,EACH,oYAAoY;EACtYC,MAAM,EACJ,skBAAskB;EACxkB,eAAe,EACb,gXAAgX;EAClX,aAAa,EACX,wQAAwQ;EAC1QC,QAAQ,EACN,qeAAqe;EACveC,KAAK,EACH,mTAAmT;EACrTC,KAAK,EACH,qWAAqW;EACvWC,SAAS,EACP,yRAAyR;EAC3RC,IAAI,EAAE,oUAAoU;EAC1UC,MAAM,EACJ,wXAAwX;EAC1XC,QAAQ,EACN,0bAA0b;EAC5b,UAAU,EACR,kYAAkY;EACpY,YAAY,EACV,qYAAqY;EACvY,eAAe,EACb,koBAAkoB;EACpoBC,KAAK,EACH,ydAAyd;EAC3dC,MAAM,EACJ,0YAA0Y;EAC5YC,KAAK,EACH,uQAAuQ;EACzQC,SAAS,EACP,6RAA6R;EAC/R,YAAY,EACV,8ZAA8Z;EACha,WAAW,EACT;CACH;AAEK,SAAUzyB,sBAAsB;EACpC,MAAM0yB,YAAY,GAAG,IAAI9R,mFAAU,EAAE;EAErC8R,YAAY,CAAC5H,OAAO,CAAC8C,QAAQ,CAAC;EAE9B,OAAO8E,YAAY,CAACrzB,SAAS,EAAE;AACjC;AAEM,SAAUshB,qBAAqB,CAACgS,QAAoB;EACxDhF,aAAa,GAAGgF,QAAQ;AAC1B;;;;;;;;;;;;;;ACvLO,IAAKC,cAKX;AALD,WAAYA,cAAc;EACxBA,yDAAuC;EACvCA,mEAAiD;EACjDA,mEAAiD;EACjDA,uDAAqC;AACvC,CAAC,EALWA,cAAc,KAAdA,cAAc;;;;;;;;;;;;;;;ACApB,MAAOC,YAAY;EAIvBhJ,YAAYiJ,MAAW,EAAEC,GAAQ;IAC/B,IAAI,CAACD,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,GAAG,GAAGA,GAAG;EAChB;;AAGK,MAAMC,gBAAgB,GAAiB;EAC5CF,MAAM,EAAE5P,IAAI,CAACC,KAAK,CAChB,aAAa,GACX,0FAA0F,GAC1F,wQAAwQ,GACxQ,uDAAuD,GACvD,8GAA8G,GAC9G,+CAA+C,GAC/C,whBAAwhB,GACxhB,gFAAgF,GAChF,sIAAsI,GACtI,gIAAgI,GAChI,yLAAyL,GACzL,gFAAgF,GAChF,iDAAiD,GACjD,8JAA8J,GAC9J,8EAA8E,GAC9E,kiBAAkiB,GACliB,8HAA8H,GAC9H,6aAA6a,GAC7a,qHAAqH,GACrH,gKAAgK,GAChK,0JAA0J,GAC1J,8KAA8K,GAC9K,WAAW,CACd;EACD4P,GAAG,EACD,GAAG,GACH,yJAAyJ,GACzJ,iJAAiJ,GACjJ,8IAA8I,GAC9I,8GAA8G,GAC9G;CACH;;;;;;;;;;;;;;;;;AC3CM,MAAMnL,QAAQ,GAAG,4BAA4B;AAC7C,MAAMG,aAAa,GAAG,GAAG;AACzB,MAAMD,qBAAqB,GAAG,EAAE;AAChC,MAAMD,2BAA2B,GAAG,EAAE;;;;;;;;;;;;;;;;;;;;;ACFE;AACmE;AACH;AACA;AAClE;AACO;;AAW9C,MAAO0L,sBAAsB;AAAtBA,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;QAAtBA;AAAsB;AAAtBA,sBAAsB;YAFvBN,yDAAY,EAAEI,uDAAW,EAAEC,4DAAc;AAAA;;sHAExCC,sBAAsB;IAAAC,eAP/BN,0HAAyB,EACzBC,uHAAwB,EACxBC,uHAAwB;IAAAK,UAGhBR,yDAAY,EAAEI,uDAAW,EAAEC,4DAAc;IAAAI,UADzCR,0HAAyB;EAAA;AAAA;;;;;;;;;;;;;;;;;ACbU;AAC0C;;AAOnF,MAAOU,8BAA8B;AAA9BA,8BAA8B;mBAA9BA,8BAA8B;AAAA;AAA9BA,8BAA8B;QAA9BA;AAA8B;AAA9BA,8BAA8B;YAF/BX,yDAAY;AAAA;;sHAEXW,8BAA8B;IAAAJ,eAJ1BG,iGAAsB;IAAAF,UAE3BR,yDAAY;IAAAS,UADZC,iGAAsB;EAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;ACLa;AACwE;AACH;AACS;AACR;AACd;AACD;AACzD;AACO;AACgB;;AAkB9D,MAAOQ,cAAc;AAAdA,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA;AAAc;AAAdA,cAAc;YAFfZ,6EAAsB,EAAEN,yDAAY,EAAEI,wDAAW,EAAEC,4DAAc;AAAA;;sHAEhEa,cAAc;IAAAX,eAdvBK,iIAA4B,EAC5BI,+GAAwB,EACxBC,8GAAwB,EACxBJ,4HAAqB,EACrBC,qIAAwB,EACxBC,6HAAsB;IAAAP,UAOdF,6EAAsB,EAAEN,yDAAY,EAAEI,wDAAW,EAAEC,4DAAc;IAAAI,UAJzEO,+GAAwB,EACxBJ,iIAA4B,EAC5BK,8GAAwB;EAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;ACjBa;;;;;;;;;;;ICPzCE,4DAAAA,eAAgF;IAE5DA,oDAAAA,uBAAgB;IAAAA,0DAAAA,EAAiB;IAEnDA,4DAAAA,0BAAsC;IAElCA,uDAAAA,kBAAwE;IACxEA,4DAAAA,gBAAW;IAAAA,oDAAAA,cAAO;IAAAA,0DAAAA,EAAY;IAEhCA,4DAAAA,cAA4B;IACfA,oDAAAA,gBAAQ;IAAAA,0DAAAA,EAAY;IAC/BA,uDAAAA,mBAME;IACJA,0DAAAA,EAAM;IACNA,4DAAAA,cAA4B;IACfA,oDAAAA,cAAM;IAAAA,0DAAAA,EAAY;IAC7BA,uDAAAA,mBAME;IACJA,0DAAAA,EAAM;IACNA,4DAAAA,iBAKC;IADCA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA;MAAA;MAAA;MAAA,OAASA,yDAAAA,iDAAuD;IAAA,EAAC;IAEjEA,oDAAAA,eACF;IAAAA,0DAAAA,EAAS;;;;IA9B2BA,uDAAAA,GAAmC;IAAnCA,wDAAAA,uCAAmC;IAUnEA,uDAAAA,GAAgC;IAAhCA,wDAAAA,oCAAgC;IAUhCA,uDAAAA,GAA8B;IAA9BA,wDAAAA,kCAA8B;;;ADZhC,MAAOjB,wBAAwB;EACnCtJ,YACYwK,qBAAmD,EACrDC,QAAqB;IADnB,0BAAqB,GAArBD,qBAAqB;IACvB,aAAQ,GAARC,QAAQ;EACf;EAEHC,IAAI,CAACC,SAAkB,EAAEC,MAAc,EAAEC,QAAgB;IACvD,IACE,IAAI,CAACL,qBAAqB,CAACM,gBAAgB,CAAC;MAC1CH,SAAS;MACTC,MAAM;MACNC;KACD,CAAC,EACF;MACA,IAAI,CAACJ,QAAQ,CAAC9wB,IAAI,CAAC,6BAA6B,EAAEyQ,SAAS,EAAE;QAC3D2gB,QAAQ,EAAEvK,8EAAiB;QAC3BwK,UAAU,EAAEvK,6EAAgBA;OAC7B,CAAC;KACH,MAAM;MACL,IAAI,CAACgK,QAAQ,CAAC9wB,IAAI,CAChB,yDAAyD,EACzDyQ,SAAS,EACT;QACE2gB,QAAQ,EAAE,CAAC,GAAGvK,8EAAiB;QAC/BwK,UAAU,EAAEtK,2EAAcA;OAC3B,CACF;;EAEL;;AA5BW4I,wBAAwB;mBAAxBA,wBAAwB;AAAA;AAAxBA,wBAAwB;QAAxBA,wBAAwB;EAAA2B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCdrCd,wDAAAA,uEAsCW;;;;MAtCAA,wDAAAA,SAAAA,yDAAAA,iDAAmD;;;;;;;;;;;;;;;;;;;;;;;;;ACOxD,MAAOlB,yBAAyB;AAAzBA,yBAAyB;mBAAzBA,yBAAyB;AAAA;AAAzBA,yBAAyB;QAAzBA,yBAAyB;EAAA4B;EAAAC;EAAAC;EAAAE;IAAA;MCPtCd,uDAAAA,2BAAwB;;;;;;;;;;;;;;;;;;;;;;;;;;ACOiB;;;;;;;;;;ICGnCA,4DAAAA,aAA6D;IAEjCA,oDAAAA,GAAiB;IAAAA,0DAAAA,EAAM;IAC/CA,4DAAAA,aAAuB;IAAAA,oDAAAA,GAAgB;IAAAA,0DAAAA,EAAM;IAE/CA,4DAAAA,gBAKC;IADCA,wDAAAA;MAAA;MAAA;MAAA;MAAA,OAASA,yDAAAA,2BAAgB;IAAA,EAAC;IAE1BA,oDAAAA,mBACF;IAAAA,0DAAAA,EAAS;;;;IAViBA,uDAAAA,GAAiB;IAAjBA,+DAAAA,gBAAiB;IAClBA,uDAAAA,GAAgB;IAAhBA,+DAAAA,eAAgB;;;;;;IAJ7CA,4DAAAA,aAAwD;IACtDA,wDAAAA,kEAaM;IACNA,4DAAAA,aAAkB;IAChBA,uDAAAA,UAAW;IACXA,4DAAAA,gBAKC;IADCA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA,OAASA,yDAAAA,yBAAiB;IAAA,EAAC;IAE3BA,oDAAAA,0BACF;IAAAA,0DAAAA,EAAS;;;;IAvBYA,uDAAAA,GAAS;IAATA,wDAAAA,0BAAS;;;;;IA6BfA,oDAAAA,uBAAgB;;;ADxBjC,MAAOhB,wBAAwB;EAInCvJ,YACUsL,eAAgC,EAChCb,QAAqB;IADrB,oBAAe,GAAfa,eAAe;IACf,aAAQ,GAARb,QAAQ;IALlB,WAAM,GAAY,EAAE;IAOlB,IAAI,CAACc,YAAY,GAAG,IAAI,CAACD,eAAe,CAACE,uBAAuB,CAACC,SAAS,CACxE,MAAM,IAAI,CAACC,UAAU,EAAE,CACxB;EACH;EAEAC,QAAQ;IACN,IAAI,CAACD,UAAU,EAAE;EACnB;EAEAA,UAAU;IACR,IAAI,CAACE,MAAM,GAAG,IAAI,CAACN,eAAe,CAACO,iBAAiB,EAAE;EACxD;EAEAC,SAAS,CAACC,KAAY;IACpB,IAAI,CAACT,eAAe,CAACQ,SAAS,CAACC,KAAK,CAAC;IACrC,IAAI,CAACtB,QAAQ,CAAC9wB,IAAI,CAAC,cAAc,EAAEyQ,SAAS,EAAE;MAC5C2gB,QAAQ,EAAEvK,8EAAiB;MAC3BwK,UAAU,EAAEvK,6EAAgBA;KAC7B,CAAC;EACJ;EAEAuL,eAAe;IACb,IAAI,CAACV,eAAe,CAACU,eAAe,EAAE;EACxC;;AA/BWzC,wBAAwB;mBAAxBA,wBAAwB;AAAA;AAAxBA,wBAAwB;QAAxBA,wBAAwB;EAAA0B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCfrCd,4DAAAA,oBAAe;MAGSA,oDAAAA,kBAAU;MAAAA,0DAAAA,EAAkB;MAC9CA,4DAAAA,4BAAuB;MACrBA,oDAAAA,GAEF;MAAAA,0DAAAA,EAAwB;MAE1BA,wDAAAA,4DA0BM;MACRA,0DAAAA,EAAsB;MAGxBA,wDAAAA,mFAAAA,oEAAAA,CAAqD;;;;MAlC7CA,uDAAAA,GAEF;MAFEA,gEAAAA,mHAEF;MAEkBA,uDAAAA,GAAqB;MAArBA,wDAAAA,2BAAqB;;;;;;;;;;;;;;;;;;;;;;;ACDvC,MAAO0B,gBAAgB;EAC3BjM,YAAoBkM,cAA8B;IAA9B,mBAAc,GAAdA,cAAc;EAAmB;EAErDP,QAAQ;IACN,IAAI,CAACO,cAAc,CAACC,QAAQ,EAAE;EAChC;;AALWF,gBAAgB;mBAAhBA,gBAAgB;AAAA;AAAhBA,gBAAgB;QAAhBA,gBAAgB;EAAAhB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCR7Bd,uDAAAA,aAAuB;;;;;;;;;;;;;;;;;;;;;;;;;ACCkD;;;;;;;;AAUnE,MAAO8B,uBAAuB;EAUlCrM,YACUsM,EAAsB,EACtBC,SAAgD,EAC/B5M,IAAwB;IAFzC,OAAE,GAAF2M,EAAE;IACF,cAAS,GAATC,SAAS;IAGjB,IAAI,CAACtW,QAAQ,GAAG0J,IAAI,CAAC1J,QAAQ;IAC7B,IAAI,CAACuW,aAAa,GAAG7M,IAAI,CAAC1J,QAAQ,CAAC1lB,cAAc,CAACkD,IAAI;IACtD,IAAI,CAACmvB,4BAA4B,GAAGjD,IAAI,CAACiD,4BAA4B;IACrE,IAAI,CAAC6J,cAAc,GAAG9M,IAAI,CAAC1J,QAAQ,CAAC1lB,cAAc,CAACmP,MAAM;IACzD,IAAI,CAACmjB,gBAAgB,GAAGlD,IAAI,CAACkD,gBAAgB;IAE7C,IAAI,CAACC,MAAM,GAAGnD,IAAI,CAACmD,MAAM;IAEzB,IAAI,CAAC4J,IAAI,GAAG,IAAI,CAACJ,EAAE,CAACrzB,KAAK,CAAC;MACxBuzB,aAAa,EAAE,CAAC,IAAI,CAACA,aAAa,EAAE,EAAE,CAAC;MACvCC,cAAc,EAAE,CAAC,IAAI,CAACA,cAAc,EAAE,EAAE,CAAC;MACzCE,eAAe,EAAE,CAAC,IAAI,CAAC/J,4BAA4B,EAAE,EAAE;KACxD,CAAC;EACJ;EAEAgK,QAAQ;IACN,IAAI,CAAChK,4BAA4B,GAAG,CAAC,IAAI,CAACA,4BAA4B;IACtE,IAAI,CAAC8J,IAAI,CAACG,UAAU,CAAC;MACnBF,eAAe,EAAE,IAAI,CAAC/J;KACvB,CAAC;EACJ;EAEA8H,IAAI;IACF,IAAI,CAAC5H,MAAM,CAAC;MACV7M,QAAQ,EAAE,IAAI,CAACA,QAAQ;MACvB,GAAG,IAAI,CAACyW,IAAI,CAAC70B;KACd,CAAC;IACF,IAAI,CAAC00B,SAAS,CAACO,KAAK,EAAE;EACxB;EAEAA,KAAK;IACH,IAAI,CAACP,SAAS,CAACO,KAAK,EAAE;EACxB;;AA/CWT,uBAAuB;mBAAvBA,uBAAuB,wUAaxBD,qEAAe;AAAA;AAbdC,uBAAuB;QAAvBA,uBAAuB;EAAApB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCXpCd,4DAAAA,yBAAoB;MACdA,oDAAAA,oBAAa;MAAAA,0DAAAA,EAAK;MACtBA,4DAAAA,cAAyB;MAGRA,oDAAAA,aAAM;MAAAA,0DAAAA,EAAY;MAC7BA,uDAAAA,eAAiE;MACnEA,0DAAAA,EAAiB;MACjBA,4DAAAA,eAIE;MADAA,wDAAAA;QAAA,OAAU9O,cAAU;MAAA,EAAC;MAHvB8O,0DAAAA,EAIE;MACFA,oDAAAA,kBACF;MAAAA,0DAAAA,EAAM;MACNA,4DAAAA,yBAAkC;MACrBA,oDAAAA,aAAK;MAAAA,0DAAAA,EAAY;MAC5BA,uDAAAA,mBAMY;MACdA,0DAAAA,EAAiB;MAIrBA,4DAAAA,0BAAoB;MACMA,wDAAAA;QAAA,OAAS9O,WAAO;MAAA,EAAC;MAAC8O,oDAAAA,cAAM;MAAAA,0DAAAA,EAAS;MACzDA,4DAAAA,iBAAyD;MAAjBA,wDAAAA;QAAA,OAAS9O,UAAM;MAAA,EAAC;MAAC8O,oDAAAA,YAAI;MAAAA,0DAAAA,EAAS;;;MA5BhEA,uDAAAA,GAAkB;MAAlBA,wDAAAA,uBAAkB;MACjBA,uDAAAA,GAA4B;MAA5BA,wDAAAA,iCAA4B;;;;;;;;;;;;;;;;;;;;;;;;;ACFoC;AAET;;;;;;;;;ICsB5DA,4DAAAA,gBAMC;IADCA,wDAAAA;MAAA;MAAA;MAAA;MAAA,OAASA,yDAAAA,sBAAW;IAAA,EAAC;IAErBA,oDAAAA,GACF;IAAAA,0DAAAA,EAAS;;;;IAJPA,wDAAAA,4BAAwB;IAGxBA,uDAAAA,GACF;IADEA,gEAAAA,0BACF;;;ADvBE,MAAOyC,qBAAqB;EAUhChN,YACUuM,SAA8C,EAC7B5M,IAAsB;IADvC,cAAS,GAAT4M,SAAS;IAGjB,IAAI,CAACU,SAAS,GAAG,IAAIF,0EAAe,CAAU,IAAI,CAAC;IACnD,IAAI,CAACG,kBAAkB,GAAG,IAAIH,0EAAe,CAAU,IAAI,CAAC;IAC5D,IAAI,CAAC7zB,KAAK,GAAGymB,IAAI,CAACzmB,KAAK;IACvB,IAAI,CAAC5J,OAAO,GAAGqwB,IAAI,CAACrwB,OAAO;EAC7B;EAEAq8B,QAAQ,IAAU;EAElBwB,QAAQ,CAAC53B,CAAS;IAChB,IAAI,CAACjG,OAAO,CAACiG,CAAC,CAAC,CAACiW,EAAE,CAAC,IAAI,CAACyhB,SAAS,CAACp1B,KAAK,EAAE,IAAI,CAACq1B,kBAAkB,CAACr1B,KAAK,CAAC;IACvE,IAAI,CAACi1B,KAAK,EAAE;EACd;EAEAA,KAAK;IACH,IAAI,CAACP,SAAS,CAACO,KAAK,EAAE;EACxB;EAEAM,eAAe,CAACC,MAAa;IAC3B;IACA,IAAI,CAACJ,SAAS,CAAChuB,IAAI,CAACouB,MAAM,CAACn8B,MAAM,CAACo8B,OAAO,CAAC;EAC5C;EAEAC,wBAAwB,CAACF,MAAa;IACpC;IACA,IAAI,CAACH,kBAAkB,CAACjuB,IAAI,CAACouB,MAAM,CAACn8B,MAAM,CAACo8B,OAAO,CAAC;EACrD;;AAvCWN,qBAAqB;mBAArBA,qBAAqB,uMAYtBZ,qEAAe;AAAA;AAZdY,qBAAqB;QAArBA,qBAAqB;EAAA/B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCVlCd,4DAAAA,yBAAoB;MACdA,oDAAAA,GAAW;MAAAA,0DAAAA,EAAK;MACpBA,4DAAAA,YAAO;MAIHA,wDAAAA;QAAA,OAAU9O,2BAAuB;MAAA,EAAC;;MAHpC8O,0DAAAA,EAIE;MACFA,oDAAAA,2CACF;MAAAA,0DAAAA,EAAQ;MACRA,uDAAAA,SAAI;MACJA,4DAAAA,YAAO;MAIHA,wDAAAA;QAAA,OAAU9O,oCAAgC;MAAA,EAAC;;MAH7C8O,0DAAAA,EAIE;MACFA,oDAAAA,4DACF;MAAAA,0DAAAA,EAAQ;MAEVA,4DAAAA,0BAAoB;MAClBA,uDAAAA,UAAM;MAENA,4DAAAA,WAAK;MACqBA,wDAAAA;QAAA,OAAS9O,WAAO;MAAA,EAAC;MAAC8O,oDAAAA,cAAM;MAAAA,0DAAAA,EAAS;MACzDA,wDAAAA,iEAQS;MACXA,0DAAAA,EAAM;;;MAjCFA,uDAAAA,GAAW;MAAXA,+DAAAA,WAAW;MAIXA,uDAAAA,GAA6B;MAA7BA,wDAAAA,YAAAA,yDAAAA,sBAA6B;MAS7BA,uDAAAA,GAAsC;MAAtCA,wDAAAA,YAAAA,yDAAAA,gCAAsC;MAYnBA,uDAAAA,GAAY;MAAZA,wDAAAA,wBAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChB/B,MAAOiD,qBAAqB;EAKhCxN,YACUsM,EAAsB,EACtBC,SAA8C,EAC9C5Q,YAA0B;IAF1B,OAAE,GAAF2Q,EAAE;IACF,cAAS,GAATC,SAAS;IACT,iBAAY,GAAZ5Q,YAAY;IAEpB,IAAI,CAACziB,KAAK,GACR,IAAI,CAACyiB,YAAY,CAACG,QAAQ,EAAE,KAAK,+BAA+B,GAC5D,EAAE,GACF,IAAI,CAACH,YAAY,CAACG,QAAQ,EAAE;IAClC,IAAI,CAACuC,WAAW,GAAG,IAAI,CAAC1C,YAAY,CAACK,cAAc,EAAE;IAErD,IAAI,CAAC0Q,IAAI,GAAG,IAAI,CAACJ,EAAE,CAACrzB,KAAK,CAAC;MACxBC,KAAK,EAAE,CAAC,IAAI,CAACA,KAAK,EAAE,EAAE,CAAC;MACvBmlB,WAAW,EAAE,CAAC,IAAI,CAACA,WAAW,EAAE,EAAE;KACnC,CAAC;EACJ;EAEAsN,QAAQ,IAAU;EAElBjB,IAAI;IACF,IAAI,CAAC/O,YAAY,CAACM,yBAAyB,CACzC,IAAI,CAACyQ,IAAI,CAACt8B,GAAG,CAAC,OAAO,CAAC,EAAEyH,KAAK,EAC7B,IAAI,CAAC60B,IAAI,CAACt8B,GAAG,CAAC,aAAa,CAAC,EAAEyH,KAAK,EACnC,IAAI,CACL;IACD,IAAI,CAAC00B,SAAS,CAACO,KAAK,EAAE;EACxB;EAEAA,KAAK;IACH,IAAI,CAACP,SAAS,CAACO,KAAK,EAAE;EACxB;;AAnCWU,qBAAqB;mBAArBA,qBAAqB;AAAA;AAArBA,qBAAqB;QAArBA,qBAAqB;EAAAvC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCVlCd,4DAAAA,yBAAoB;MAGHA,oDAAAA,YAAK;MAAAA,0DAAAA,EAAY;MAC5BA,uDAAAA,eAAsD;MACxDA,0DAAAA,EAAiB;MACjBA,uDAAAA,SAAM;MACNA,4DAAAA,wBAAoC;MACvBA,oDAAAA,kBAAW;MAAAA,0DAAAA,EAAY;MAClCA,uDAAAA,mBAKY;MACdA,0DAAAA,EAAiB;MAIrBA,4DAAAA,0BAAoB;MACMA,wDAAAA;QAAA,OAAS9O,WAAO;MAAA,EAAC;MAAC8O,oDAAAA,cAAM;MAAAA,0DAAAA,EAAS;MACzDA,4DAAAA,iBAAyD;MAAjBA,wDAAAA;QAAA,OAAS9O,UAAM;MAAA,EAAC;MAAC8O,oDAAAA,YAAI;MAAAA,0DAAAA,EAAS;;;MApBhEA,uDAAAA,GAAkB;MAAlBA,wDAAAA,uBAAkB;;;;;;;;;;;;;;;;;;;;;;;ACA+C;;;;;;;ICCvEA,4DAAAA,cAAkD;IAAAA,oDAAAA,GAAe;IAAAA,0DAAAA,EAAO;;;;IAAtBA,uDAAAA,GAAe;IAAfA,gEAAAA,0BAAe;;;;;IACjEA,4DAAAA,WAAyC;IAAAA,oDAAAA,GAAc;IAAAA,0DAAAA,EAAI;;;;IAAxCA,mEAAAA,0BAAAA,2DAAAA,CAAqB;IAACA,uDAAAA,GAAc;IAAdA,+DAAAA,iBAAc;;;;;;IAGzDA,4DAAAA,yBAA8C;IACVA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA,OAASA,yDAAAA,eAAO;IAAA,EAAC;IAACA,oDAAAA,YAAK;IAAAA,0DAAAA,EAAS;;;ADE9D,MAAOkD,mBAAmB;EAO9BzN,YACUuM,SAA4C,EAC3B5M,IAAoB;IADrC,cAAS,GAAT4M,SAAS;IAGjB,IAAI,CAACrzB,KAAK,GAAGymB,IAAI,CAACzmB,KAAK;IACvB,IAAI,CAACiqB,QAAQ,GAAGxD,IAAI,CAACwD,QAAQ;IAC7B,IAAI,CAACuK,iBAAiB,GAAG,CAAC/N,IAAI,CAACyD,MAAM;IACrC,IAAI,CAACuK,OAAO,GAAGhO,IAAI,CAAC0D,MAAM;IAC1B,IAAI,CAACC,QAAQ,GAAG3D,IAAI,CAAC2D,QAAQ,IAAI,EAAE;EACrC;EAEAsK,eAAe;IACb,MAAMC,IAAI,GAAGt2B,QAAQ,CAACqN,sBAAsB,CAC1C,cAAc,CACf,CAAC,CAAC,CAAwB;IAC3BipB,IAAI,CAAC5tB,KAAK,CAACzM,MAAM,GAAGq6B,IAAI,CAACC,YAAY,GAAG,IAAI;EAC9C;EAEAhB,KAAK;IACH,IAAI,CAACP,SAAS,CAACO,KAAK,EAAE;EACxB;;AA3BWW,mBAAmB;mBAAnBA,mBAAmB,uMASpBrB,qEAAe;AAAA;AATdqB,mBAAmB;QAAnBA,mBAAmB;EAAAxC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCThCd,4DAAAA,4BAAoC;MACPA,oDAAAA,GAAW;MAAAA,0DAAAA,EAAK;MAC3CA,wDAAAA,yDAAwE;MACxEA,wDAAAA,mDAA2D;MAC7DA,0DAAAA,EAAqB;MAErBA,wDAAAA,qFAEqB;;;MAPQA,uDAAAA,GAAW;MAAXA,+DAAAA,WAAW;MACVA,uDAAAA,GAAoB;MAApBA,wDAAAA,4BAAoB;MAC5CA,uDAAAA,GAAa;MAAbA,wDAAAA,qBAAa;MAGEA,uDAAAA,GAAuB;MAAvBA,wDAAAA,+BAAuB;;;;;;;;;;;;;;;;;;;;;;;;;ACEtC,MAAOwD,8BAA8B;EACzC/N,YACUuM,SAAuD;IAAvD,cAAS,GAATA,SAAS;EAChB;EAEHO,KAAK;IACH,IAAI,CAACP,SAAS,CAACO,KAAK,EAAE;EACxB;;AAPWiB,8BAA8B;mBAA9BA,8BAA8B;AAAA;AAA9BA,8BAA8B;QAA9BA,8BAA8B;EAAA9C;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCR3Cd,4DAAAA,yBAAoB;MACdA,oDAAAA,uBAAgB;MAAAA,0DAAAA,EAAK;MACzBA,4DAAAA,8BAA+C;MAAzBA,wDAAAA;QAAA,OAAgB9O,WAAO;MAAA,EAAC;MAAC8O,0DAAAA,EAAuB;;;;;;;;;;;;;;;;;;;;;;;ACMlE,MAAOL,wBAAwB;EALrClK;IASU,kBAAa,GAAG,KAAK;;EAE7B,IAAIrvB,EAAE;IACJ,OACE,oCAAoC,GACpC,IAAI,CAACoJ,IAAI,CAACtG,IAAI,CAACkC,WAAW,EAAE,GAC5B,GAAG,IACF,IAAI,CAACoE,IAAI,CAACmP,YAAY,GAAG,YAAY,GAAG,OAAO,CAAC;EAErD;EAEA,IAAIzV,IAAI;IACN,OAAO,IAAI,CAACsG,IAAI,CAACtG,IAAI;EACvB;EAEAu6B,kBAAkB;IAChB,IAAI,CAACC,UAAU,EAAE;EACnB;EAEQA,UAAU;IAChB,MAAMC,GAAG,GAAG32B,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC7G,EAAE,CAAqB;IAChE,IAAIu9B,GAAG,IAAI,CAAC,IAAI,CAACC,aAAa,EAAE;MAC9BD,GAAG,CAACvV,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC5e,IAAI,CAACq0B,GAAG;MAC5B,IAAI,CAACD,aAAa,GAAG,IAAI;;EAE7B;;AA7BWjE,wBAAwB;mBAAxBA,wBAAwB;AAAA;AAAxBA,wBAAwB;QAAxBA,wBAAwB;EAAAe;EAAAoD;IAAAt0B;EAAA;EAAAmxB;EAAAC;EAAAC;EAAAC;IAAA;MCRrCd,4DAAAA,aAA6B;MAC3BA,uDAAAA,aAAoE;MACpEA,4DAAAA,mBAA4B;MAAAA,oDAAAA,GAAe;MAAAA,0DAAAA,EAAY;;;MADlDA,uDAAAA,GAAa;MAAbA,mEAAAA,cAAa;MAAcA,mEAAAA,iBAAgB;MAACA,wDAAAA,sBAAAA,2DAAAA,CAAgB;MACrCA,uDAAAA,GAAe;MAAfA,+DAAAA,eAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEM;AAGZ;AAEoB;AACuB;;;;;;;;;;;;;;ICkGtEA,4DAAAA,wBAIC;IACCA,uDAAAA,6BAGsB;IACxBA,0DAAAA,EAAgB;;;;IAPdA,wDAAAA,cAAa;IAIXA,uDAAAA,GAAqB;IAArBA,wDAAAA,yBAAqB;;;AD/F/B,MAAOP,4BAA4B;EAYvChK,YACU7I,oBAAgD,EAChDniB,qBAA4C,EAC5Cu5B,0BAAsD,EACtD5vB,sBAA8C;IAH9C,yBAAoB,GAApBwY,oBAAoB;IACpB,0BAAqB,GAArBniB,qBAAqB;IACrB,+BAA0B,GAA1Bu5B,0BAA0B;IAC1B,2BAAsB,GAAtB5vB,sBAAsB;IAbhC,WAAM,GAAG,IAAIouB,kDAAe,CAAiBhE,uFAAc,CAACyF,gBAAgB,CAAC;IAE7E,mBAAc,GAAG,IAAIzB,kDAAe,CAAW,EAAE,CAAC;IAClD,wBAAmB,GAAG,IAAIA,kDAAe,CAAW,EAAE,CAAC;IAGvD,iBAAY,GAAG,IAAIA,kDAAe,CAAW,EAAE,CAAC;IAChD,yBAAoB,GAAG,IAAIA,kDAAe,CAAW,EAAE,CAAC;IAQtD,IAAI,CAAC0B,wBAAwB,GAC3B,IAAI,CAACF,0BAA0B,CAACG,sBAAsB,EAAE,CAAC72B,KAAK;IAEhE,IAAI,CAACksB,QAAQ,GAAG,IAAIgJ,kDAAe,CACjC,IAAI,CAAC/3B,qBAAqB,CAAC25B,iBAAiB,EAAE,CAC/C;IACD,IAAI,CAAC5K,QAAQ,CAAC0H,SAAS,CAAE1H,QAAQ,IAAI;MACnC,IAAI,CAAC6K,YAAY,CAAC3vB,IAAI,CAAC8kB,QAAQ,CAACvuB,SAAS,EAAE,CAAC6rB,IAAI,CAAC,IAAI,CAACC,UAAU,CAAC,CAAC;IACpE,CAAC,CAAC;IAEF,IAAI,CAACuN,cAAc,GAAG,IAAI,CAACN,0BAA0B,CAACO,eAAe;IACrE,IAAI,CAACC,mBAAmB,GACtB,IAAI,CAACR,0BAA0B,CAACS,oBAAoB;EACxD;EAEArD,QAAQ;IACN,IAAI,CAACxK,MAAM,CAACsK,SAAS,CAAEt5B,IAAI,IAAI;MAC7B,IAAI88B,WAAW,GAAG,IAAI,CAACC,uBAAuB,CAAC/8B,IAAI,CAAC;MACpD,IAAI,CAACg9B,oBAAoB,CAAClwB,IAAI,CAACgwB,WAAW,CAAC5N,IAAI,CAAC,IAAI,CAACC,UAAU,CAAC,CAAC;IACnE,CAAC,CAAC;EACJ;EAEQA,UAAU,CAACC,CAAS,EAAEC,CAAS;IACrC,IAAID,CAAC,CAACttB,QAAQ,CAAC,SAAS,CAAC,IAAIutB,CAAC,CAACvtB,QAAQ,CAAC,SAAS,CAAC,EAAE;MAClD,IAAIstB,CAAC,GAAGC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,KAChB;QACH,OAAO,CAAC;;KAEX,MAAM;MACL,IAAID,CAAC,CAACttB,QAAQ,CAAC,SAAS,CAAC,EAAE;QACzB,OAAO,CAAC,CAAC;OACV,MAAM;QACL,OAAO,CAAC;;;EAGd;EAEA;EACAm7B,4CAA4C;IAC1C,IAAI,CAACb,0BAA0B,CAACc,WAAW,EAAE;EAC/C;EAEAC,wBAAwB;IACtB,IAAI,CAACf,0BAA0B,CAACnf,MAAM,EAAE;EAC1C;EAEA;EACAmgB,UAAU;IACR,IAAI,CAAChB,0BAA0B,CAACgB,UAAU,CACxC,IAAI,CAAC5wB,sBAAsB,CAAC6wB,YAAY,EAAE,CAC3C;EACH;EAEAC,YAAY;IACV,IAAI,CAAClB,0BAA0B,CAACkB,YAAY,EAAE;EAChD;EAEA;EACAC,eAAe;IACbn4B,QAAQ,CAACC,cAAc,CAAC,YAAY,CAAC,EAAE2B,KAAK,EAAE;EAChD;EAEAw2B,UAAU;IACR;IACA,MAAMC,KAAK,GAAGr4B,QAAQ,CAACC,cAAc,CAAC,YAAY,CAAC,CAACo4B,KAAK;IACzD,KAAK,IAAIC,aAAa,IAAID,KAAK,EAAE;MAC/B,MAAME,MAAM,GAAG,IAAIC,UAAU,EAAE;MAC/B,MAAMt8B,IAAI,GAAG66B,yEAAgB,CAACuB,aAAa,CAACp8B,IAAI,CAAC;MACjD,MAAMu8B,QAAQ,GAAGv8B,IAAI,GAAG,SAAS;MAEjCq8B,MAAM,CAACG,SAAS,GAAIllB,CAA4B,IAAI;QAClD,IAAIA,CAAC,CAAC7Z,MAAM,EAAE;UACZ,MAAMynB,GAAG,GAAW5N,CAAC,CAAC7Z,MAAM,CAACqR,MAA2B;UACxD,IAAI,CAACvN,qBAAqB,CAACk7B,sBAAsB,CAACvX,GAAG,EAAEqX,QAAQ,CAAC;UAChE,IAAI,CAACh7B,qBAAqB,CAACm7B,mBAAmB,CAACH,QAAQ,EAAErX,GAAG,CAAC;UAE7D,IAAI,CAACoL,QAAQ,CAAC9kB,IAAI,CAAC,IAAI,CAACjK,qBAAqB,CAAC25B,iBAAiB,EAAE,CAAC;UAClE,IAAI,CAACxN,MAAM,CAACliB,IAAI,CAAC,IAAI,CAACkiB,MAAM,CAACtpB,KAAK,CAAC;UAEnC,IAAI,CAAC02B,0BAA0B,CAAC6B,UAAU,CAACJ,QAAQ,CAAC;;MAExD,CAAC;MACDF,MAAM,CAACO,aAAa,CAACR,aAAa,CAAC;;EAEvC;EAEA;EACAS,iBAAiB;IACf/4B,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC,EAAE2B,KAAK,EAAE;EAClD;EAEAo3B,YAAY;IACV;IACA,MAAMC,eAAe,GAAGj5B,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC,CAACo4B,KAAK,CAAC,CAAC,CAAC;IACxE,MAAME,MAAM,GAAG,IAAIC,UAAU,EAAE;IAE/BD,MAAM,CAACG,SAAS,GAAIllB,CAA4B,IAAI;MAClD,MAAM6W,cAAc,GAAGvI,IAAI,CAACC,KAAK,CAC/BvO,CAAC,CAAC7Z,MAAM,EAAEqR,MAA2B,CAKtC;MACD,MAAM0W,MAAM,GAAG0I,oGAAyB,CAACC,cAAc,CAAC;MACxD,IAAI,CAACzK,oBAAoB,CAACsZ,iBAAiB,CAACxX,MAAM,EAAE,KAAK,CAAC;MAE1D,IAAI,CAACsV,0BAA0B,CAACmC,mBAAmB,CAACzX,MAAM,CAAC;IAC7D,CAAC;IAED6W,MAAM,CAACa,UAAU,CAACH,eAAe,CAAC;EACpC;EAEA;EACAI,eAAe;IACb,IAAI,IAAI,CAACzP,MAAM,CAACtpB,KAAK,KAAKkxB,uFAAc,CAAC8H,iBAAiB,EAAE;MAC1D,IAAI,CAAC1P,MAAM,CAACliB,IAAI,CAAC8pB,uFAAc,CAAC8H,iBAAiB,CAAC;KACnD,MAAM;MACL,IAAI,CAAC1P,MAAM,CAACliB,IAAI,CAAC8pB,uFAAc,CAACyF,gBAAgB,CAAC;;EAErD;EAEAsC,oBAAoB;IAClB,IAAI,IAAI,CAAC3P,MAAM,CAACtpB,KAAK,KAAKkxB,uFAAc,CAACgI,sBAAsB,EAAE;MAC/D,IAAI,CAAC5P,MAAM,CAACliB,IAAI,CAAC8pB,uFAAc,CAACgI,sBAAsB,CAAC;KACxD,MAAM;MACL,IAAI,CAAC5P,MAAM,CAACliB,IAAI,CAAC8pB,uFAAc,CAACyF,gBAAgB,CAAC;;EAErD;EAEAwC,mBAAmB;IACjB,IAAI,IAAI,CAAC7P,MAAM,CAACtpB,KAAK,KAAKkxB,uFAAc,CAACkI,sBAAsB,EAAE;MAC/D,IAAI,CAAC9P,MAAM,CAACliB,IAAI,CAAC8pB,uFAAc,CAACkI,sBAAsB,CAAC;KACxD,MAAM;MACL,IAAI,CAAC9P,MAAM,CAACliB,IAAI,CAAC8pB,uFAAc,CAACyF,gBAAgB,CAAC;;EAErD;EAEA0C,mBAAmB,CAAC7D,MAAW;IAC7B,MAAM8D,qBAAqB,GAAG,IAAI,CAACjC,uBAAuB,CACxD,IAAI,CAAC/N,MAAM,CAACtpB,KAAK,CAClB,CAACspB,MAAM,CAAE1tB,IAAI,IACZA,IAAI,CAACkC,WAAW,EAAE,CAAC1B,QAAQ,CAACo5B,MAAM,CAACn8B,MAAM,CAAC2G,KAAK,CAAClC,WAAW,EAAE,CAAC,CAC/D;IACD,IAAI,CAACw5B,oBAAoB,CAAClwB,IAAI,CAACkyB,qBAAqB,CAAC9P,IAAI,CAAC,IAAI,CAACC,UAAU,CAAC,CAAC;EAC7E;EAEQ4N,uBAAuB,CAAC/8B,IAAoB;IAClD,IAAI88B,WAAW,GAAa,EAAE;IAC9B,QAAQ98B,IAAI;MACV,KAAK42B,uFAAc,CAACyF,gBAAgB;QAClCS,WAAW,GAAG,IAAI,CAACL,YAAY,CAAC/2B,KAAK;QACrC;MACF,KAAKkxB,uFAAc,CAAC8H,iBAAiB;QACnC5B,WAAW,GAAG,IAAI,CAACL,YAAY,CAAC/2B,KAAK,CAACspB,MAAM,CAAE1tB,IAAI,IAChD,IAAI,CAAC86B,0BAA0B,CAAC6C,WAAW,CAAC39B,IAAI,CAAC,CAClD;QACD;MACF,KAAKs1B,uFAAc,CAACgI,sBAAsB;QACxC9B,WAAW,GAAG,IAAI,CAACL,YAAY,CAAC/2B,KAAK,CAACspB,MAAM,CAAE1tB,IAAI,IAChD,IAAI,CAAC86B,0BAA0B,CAAC8C,gBAAgB,CAAC59B,IAAI,CAAC,CACvD;QACD;MACF,KAAKs1B,uFAAc,CAACkI,sBAAsB;QACxChC,WAAW,GAAG,IAAI,CAACL,YAAY,CAAC/2B,KAAK,CAACspB,MAAM,CACzC1tB,IAAI,IACH,CAAC,IAAI,CAAC86B,0BAA0B,CAAC6C,WAAW,CAAC39B,IAAI,CAAC,IAClD,CAAC,IAAI,CAAC86B,0BAA0B,CAAC8C,gBAAgB,CAAC59B,IAAI,CAAC,CAC1D;QACD;IAAM;IAEV,OAAOw7B,WAAW;EACpB;;AA9LWjF,4BAA4B;mBAA5BA,4BAA4B;AAAA;AAA5BA,4BAA4B;QAA5BA,4BAA4B;EAAAiB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCnBzCd,4DAAAA,aAAqB;MAI0BA,wDAAAA;QAAA,OAAS9O,qBAAiB;MAAA,EAAC;MAChE8O,4DAAAA,cAAyD;MAAAA,oDAAAA,aAAM;MAAAA,0DAAAA,EAAO;MACtEA,4DAAAA,eASE;MADAA,wDAAAA;QAAA,OAAU9O,gBAAY;MAAA,EAAC;MARzB8O,0DAAAA,EASE;MAEJA,4DAAAA,gBAKC;MADCA,wDAAAA;QAAA,OAAS9O,kDAA8C;MAAA,EAAC;MAExD8O,4DAAAA,cAAyD;MAACA,oDAAAA,cAAK;MAAAA,0DAAAA,EAAO;MAG1EA,4DAAAA,cAAuB;MACrBA,uDAAAA,WAAW;MACXA,4DAAAA,WAAK;MAAAA,oDAAAA,eAAO;MAAAA,0DAAAA,EAAM;MAClBA,4DAAAA,iBAKC;MADCA,wDAAAA;QAAA,OAAS9O,yBAAqB;MAAA,EAAC;;MAE/B8O,4DAAAA,YAAM;MAAAA,oDAAAA,YAAI;MAAAA,0DAAAA,EAAO;MAEnBA,uDAAAA,WAAW;MACXA,4DAAAA,iBAKC;MADCA,wDAAAA;QAAA,OAAS9O,qBAAiB;MAAA,EAAC;;MAE3B8O,4DAAAA,YAAM;MAAAA,oDAAAA,cAAM;MAAAA,0DAAAA,EAAO;MAErBA,uDAAAA,WAAW;MACXA,4DAAAA,kBAOC;MADCA,wDAAAA;QAAA,OAAS9O,0BAAsB;MAAA,EAAC;;MAEhC8O,4DAAAA,YAAM;MAAAA,oDAAAA,mBAAW;MAAAA,0DAAAA,EAAO;MAE1BA,uDAAAA,WAAW;MACXA,4DAAAA,iBAME;MADAA,wDAAAA;QAAA,OAAS9O,+BAA2B;MAAA,EAAC;MALvC8O,0DAAAA,EAME;MAEJA,4DAAAA,eAAyB;MACoBA,wDAAAA;QAAA,OAAS9O,kBAAc;MAAA,EAAC;MACjE8O,4DAAAA,eACG;MAAAA,oDAAAA,eAAO;MAAAA,0DAAAA,EACT;MAEHA,4DAAAA,kBAIC;MADCA,wDAAAA;QAAA,OAAS9O,uBAAmB;MAAA,EAAC;MAE7B8O,4DAAAA,eACG;MAAAA,oDAAAA,iBAAS;MAAAA,0DAAAA,EACX;MACDA,4DAAAA,iBAQE;MADAA,wDAAAA;QAAA,OAAU9O,kBAAc;MAAA,EAAC;MAP3B8O,0DAAAA,EAQE;MAEJA,uDAAAA,eAA2B;MAC3BA,4DAAAA,kBAIC;MADCA,wDAAAA;QAAA,OAAS9O,8BAA0B;MAAA,EAAC;MAEpC8O,4DAAAA,eAAyD;MAAAA,oDAAAA,aAAK;MAAAA,0DAAAA,EAAO;MAEvEA,4DAAAA,kBAAgE;MAAvBA,wDAAAA;QAAA,OAAS9O,gBAAY;MAAA,EAAC;MAC7D8O,4DAAAA,eAAyD;MAAAA,oDAAAA,YAAI;MAAAA,0DAAAA,EAAO;MAK1EA,4DAAAA,eAAiC;MAIzBA,wDAAAA,uFASgB;;MAClBA,0DAAAA,EAAgB;MAMxBA,uDAAAA,8BAA+D;MACjEA,0DAAAA,EAAM;;;MA9FIA,uDAAAA,IAAkE;MAAlEA,yDAAAA,eAAAA,yDAAAA,iDAAkE;MASlEA,uDAAAA,GAA8D;MAA9DA,yDAAAA,gBAAAA,yDAAAA,4CAA8D;MAS9DA,uDAAAA,GAEC;MAFDA,yDAAAA,qBAAAA,yDAAAA,kDAEC;MA0DwBA,uDAAAA,IAA+B;MAA/BA,wDAAAA,YAAAA,yDAAAA,mCAA+B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IC5F5DA,4DAAAA,uBAMC;IAHCA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA,OAAYA,yDAAAA,0BAAkB,WAAW,CAAC;IAAA,EAAC;MAAA;MAAA;MAAA;MAAA,OAC9BA,yDAAAA,0BAAe,WAAW,CAAC;IAAA,EADG;MAAA;MAAA;MAAA;MAAA;MAAA,OAEnCA,yDAAAA,oCAAyB,IAAI,OAAI;IAAA,EAFE;IAI3CA,uDAAAA,+BAEyB;IAC3BA,0DAAAA,EAAgB;;;;;IAFZA,uDAAAA,GAAiC;IAAjCA,wDAAAA,4CAAiC;;;;;;IAQrCA,4DAAAA,uBAMC;IAHCA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA,OAAYA,yDAAAA,2BAAkB,gBAAgB,CAAC;IAAA,EAAC;MAAA;MAAA;MAAA;MAAA,OACnCA,yDAAAA,2BAAe,gBAAgB,CAAC;IAAA,EADG;MAAA;MAAA;MAAA;MAAA;MAAA,OAExCA,yDAAAA,qCAAyB,KAAK,OAAI;IAAA,EAFM;IAIhDA,uDAAAA,+BAEyB;IAC3BA,0DAAAA,EAAgB;;;;;IAFZA,uDAAAA,GAAiC;IAAjCA,wDAAAA,4CAAiC;;;AC9BrC,MAAOJ,sBAAsB;EASjCnK,YACUsR,oBAAgD,EACxD3V,YAA0B;IADlB,yBAAoB,GAApB2V,oBAAoB;IAPtB,gBAAW,GAAW,EAAE;IACxB,iBAAY,GAAG,CAAC;IAExB,oBAAe,GAAG,IAAI,CAACA,oBAAoB,CAACxC,eAAe;IAC3D,yBAAoB,GAAG,IAAI,CAACwC,oBAAoB,CAACtC,oBAAoB;IAMnE,IAAI,CAACvM,UAAU,GAAG9G,YAAY,CAAC4V,WAAW;EAC5C;EAEA5F,QAAQ,IAAU;EAElB6F,UAAU,CAACr5B,KAAY;IACrB;IACA,IAAI,CAACm5B,oBAAoB,CAACE,UAAU,CAACr5B,KAAK,CAACjH,MAAM,CAAC2G,KAAK,CAAC;EAC1D;EAEA45B,cAAc,CAACzB,QAAgB;IAC7B,OAAO,IAAI,CAACsB,oBAAoB,CAACG,cAAc,CAACzB,QAAQ,CAAC,CAACn4B,KAAK;EACjE;EAEA65B,SAAS,CAACrE,MAAiB,EAAEsE,QAAgB;IAC3C,IAAI,IAAI,CAACC,WAAW,KAAKD,QAAQ,EAAE;MACjCtE,MAAM,CAAC7Z,cAAc,EAAE;;EAE3B;EAEAqe,MAAM,CAACxE,MAAiB,EAAE2C,QAAgB,EAAEpW,MAAe,EAAE1W,KAAa;IACxE,IAAI4uB,IAAI;IACR,IAAIlY,MAAM,EAAE;MACVkY,IAAI,GAAG,IAAI,CAAChD,eAAe;KAC5B,MAAM;MACLgD,IAAI,GAAG,IAAI,CAAC9C,oBAAoB;;IAElC,MAAM+C,UAAU,GAAGD,IAAI,CAACj6B,KAAK;IAC7B,MAAMiN,IAAI,GAAGitB,UAAU,CAAC,IAAI,CAACC,YAAY,CAAC;IAC1CD,UAAU,CAAC5W,MAAM,CAAC,IAAI,CAAC6W,YAAY,EAAE,CAAC,CAAC;IACvCD,UAAU,CAAC5W,MAAM,CAACjY,KAAK,EAAE,CAAC,EAAE4B,IAAI,CAAC;IACjCgtB,IAAI,CAAC7yB,IAAI,CAAC8yB,UAAU,CAAC;IAErB,IAAInY,MAAM,EAAE;MACV,IAAI,CAAC0X,oBAAoB,CAACW,iBAAiB,CAACF,UAAU,CAAC;KACxD,MAAM;MACL,IAAI,CAACT,oBAAoB,CAACY,qBAAqB,CAACH,UAAU,CAAC;;EAE/D;EAEAI,WAAW,CAACjvB,KAAa,EAAE0uB,WAAmB;IAC5C,IAAI,CAACA,WAAW,GAAGA,WAAW;IAC9B,IAAI,CAACI,YAAY,GAAG9uB,KAAK;EAC3B;;AAxDWinB,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;QAAtBA,sBAAsB;EAAAc;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDXnCd,4DAAAA,aAAoC;MAE5BA,oDAAAA,oBAAa;MAAAA,0DAAAA,EAAK;MACtBA,4DAAAA,WAAM;MAKAA,wDAAAA;QAAA,OAAS9O,sBAAkB;MAAA,EAAC;;MAH9B8O,0DAAAA,EAKE;MAIRA,4DAAAA,aAAqC;MAC/BA,oDAAAA,uBAAe;MAAAA,0DAAAA,EAAK;MACxBA,4DAAAA,gBAAU;MACRA,wDAAAA,gFAUgB;;MAClBA,0DAAAA,EAAW;MAEbA,4DAAAA,cAA4B;MACtBA,oDAAAA,6BAAqB;MAAAA,0DAAAA,EAAK;MAC9BA,4DAAAA,gBAAU;MACRA,wDAAAA,gFAUgB;;MAClBA,0DAAAA,EAAW;;;MAnCLA,uDAAAA,GAA4B;MAA5BA,wDAAAA,UAAAA,yDAAAA,uBAA4B;MASTA,uDAAAA,GAA4B;MAA5BA,wDAAAA,YAAAA,yDAAAA,6BAA4B;MAgB5BA,uDAAAA,GAAiC;MAAjCA,wDAAAA,YAAAA,yDAAAA,kCAAiC;;;;;;;;;;;;;;;;;;;;;;;;AEhCvB;;;;;AAQjC,MAAON,qBAAqB;EAahC,IAAIx2B,IAAI;IACN,OAAO,IAAI,CAACu8B,QAAQ;EACtB;EAEA,IAAIr/B,EAAE;IACJ,OAAO,4BAA4B,GAAG,IAAI,CAACq/B,QAAQ;EACrD;EAEAhQ,YAAoBuO,0BAAsD;IAAtD,+BAA0B,GAA1BA,0BAA0B;IAnB9C,aAAQ,GAAW,EAAE;IAEb,kBAAa,GAAG,KAAK;IAE7B;IACA,SAAI,GAAG,IAAIxB,iDAAe,CAAe,EAAE,CAAC;IAe1C,IAAI,CAAC9jB,OAAO,GAAG,IAAI8jB,iDAAe,CAAU,KAAK,CAAC;IAClD,IAAI,CAACqF,YAAY,GAAG,IAAIrF,iDAAe,CAAU,KAAK,CAAC;IACvD,IAAI,CAACsF,MAAM,GAAG,IAAItF,iDAAe,CAAU,IAAI,CAAC;EAClD;EAEApB,QAAQ;IACN,IAAI,CAAC5xB,IAAI,GAAG,IAAI,CAACw0B,0BAA0B,CAACkD,cAAc,CAAC,IAAI,CAACzB,QAAQ,CAAC;IACzE,IAAI,CAACj2B,IAAI,CAAC0xB,SAAS,CAAE5zB,KAAK,IAAI;MAC5B,IAAI,CAACoR,OAAO,CAAChK,IAAI,CAACpH,KAAK,CAACoR,OAAO,CAAC;MAChC,IAAI,CAACmpB,YAAY,CAACnzB,IAAI,CAACpH,KAAK,CAACqR,YAAY,CAAC;MAC1C,IAAI,CAACmpB,MAAM,CAACpzB,IAAI,CAAC,EAAEpH,KAAK,CAACoR,OAAO,IAAIpR,KAAK,CAACqR,YAAY,CAAC,CAAC;IAC1D,CAAC,CAAC;IACF,IAAI,CAACD,OAAO,CAAChK,IAAI,CAAC,IAAI,CAAClF,IAAI,CAAClC,KAAK,CAACoR,OAAO,CAAC;IAC1C,IAAI,CAACmpB,YAAY,CAACnzB,IAAI,CAAC,IAAI,CAAClF,IAAI,CAAClC,KAAK,CAACqR,YAAY,CAAC;IACpD,IAAI,CAACmpB,MAAM,CAACpzB,IAAI,CACd,EAAE,IAAI,CAAClF,IAAI,CAAClC,KAAK,CAACoR,OAAO,IAAI,IAAI,CAAClP,IAAI,CAAClC,KAAK,CAACqR,YAAY,CAAC,CAC3D;EACH;EAEA8kB,kBAAkB;IAChB,IAAI,CAACC,UAAU,EAAE;EACnB;EAEQA,UAAU;IAChB,MAAMC,GAAG,GAAG32B,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC7G,EAAE,CAAqB;IAChE,IAAIu9B,GAAG,IAAI,CAAC,IAAI,CAACC,aAAa,EAAE;MAC9BD,GAAG,CAACvV,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC5e,IAAI,CAAClC,KAAK,EAAEu2B,GAAG;MACnC,IAAI,CAACD,aAAa,GAAG,IAAI;;EAE7B;EAEAmE,UAAU;IACR,IAAI,CAAC/D,0BAA0B,CAACgE,eAAe,CAC7C,IAAI,CAACvC,QAAQ,EACb,IAAI,CAACj2B,IAAI,CAAClC,KAAK,CAACoR,OAAO,CACxB;EACH;EAEAupB,WAAW;IACT,IAAI,CAACjE,0BAA0B,CAACkE,UAAU,CAAC,IAAI,EAAE,IAAI,CAACzC,QAAQ,CAAC;EACjE;EAEA0C,gBAAgB;IACd,IAAI,CAACnE,0BAA0B,CAACoE,eAAe,CAAC,IAAI,EAAE,IAAI,CAAC3C,QAAQ,CAAC;EACtE;;AAlEW/F,qBAAqB;mBAArBA,qBAAqB;AAAA;AAArBA,qBAAqB;QAArBA,qBAAqB;EAAAgB;EAAAoD;IAAA2B;EAAA;EAAA9E;EAAAC;EAAAC;EAAAC;IAAA;MCVlCd,4DAAAA,aAA2B;MAEvBA,uDAAAA,aAA0D;MAC1DA,4DAAAA,aAAkB;MAAAA,oDAAAA,GAAU;MAAAA,0DAAAA,EAAM;MAEpCA,4DAAAA,aAAoB;MAGdA,wDAAAA;QAAA,OAAU9O,gBAAY;MAAA,EAAC;;;MAIvB8O,4DAAAA,eAAgC;MAAAA,oDAAAA,YAAI;MAAAA,0DAAAA,EAAO;MAE7CA,4DAAAA,4BAKC;MAHCA,wDAAAA;QAAA,OAAU9O,iBAAa;MAAA,EAAC;;;;MAIxB8O,4DAAAA,eAAgC;MAAAA,oDAAAA,aAAK;MAAAA,0DAAAA,EAAO;MAE9CA,4DAAAA,4BAKC;MAHCA,wDAAAA;QAAA,OAAU9O,sBAAkB;MAAA,EAAC;;;;MAI7B8O,4DAAAA,eAAgC;MAAAA,oDAAAA,kBAAU;MAAAA,0DAAAA,EAAO;;;MA1BhDA,uDAAAA,GAAa;MAAbA,mEAAAA,cAAa;MAAqBA,mEAAAA,iBAAgB;MACrCA,uDAAAA,GAAU;MAAVA,+DAAAA,UAAU;MAMxBA,uDAAAA,GAAwB;MAAxBA,wDAAAA,UAAAA,yDAAAA,oBAAwB;MAMxBA,uDAAAA,GAA8C;MAA9CA,yDAAAA,yBAAAA,yDAAAA,sBAA8C;MAE9CA,wDAAAA,UAAAA,yDAAAA,sBAAyB;MAMzBA,uDAAAA,GAAwD;MAAxDA,yDAAAA,8BAAAA,yDAAAA,2BAAwD;MAExDA,wDAAAA,UAAAA,yDAAAA,2BAA8B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfQ;AACa;AAC6B;AACpB;AACc;AAKmC;AAC7B;AAKjD;;;;;;;;;;;;;;;ICenCA,6DAAAA,eAGC;IACCA,qDAAAA,gBACF;IAAAA,2DAAAA,EAAO;;;;;IACPA,6DAAAA,cAAyE;IACvEA,qDAAAA,gBACF;IAAAA,2DAAAA,EAAO;;;;;;IA2BTA,6DAAAA,iBAKC;IADCA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,2BAAmB,KAAK,CAAC;IAAA,EAAC;IAEnCA,6DAAAA,eAAuD;IAACA,qDAAAA,oBAAY;IAAAA,2DAAAA,EAAO;;;;;;IAE7EA,6DAAAA,iBAKC;IADCA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,2BAAmB,IAAI,CAAC;IAAA,EAAC;IAElCA,6DAAAA,eAAuD;IAACA,qDAAAA,mBAAW;IAAAA,2DAAAA,EAAO;;;;;;IAzF9EA,6DAAAA,UAAkC;IAI9BA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,2BAAkB;IAAA,EAAC;IAE5BA,6DAAAA,cAAgD;IAACA,qDAAAA,aAAK;IAAAA,2DAAAA,EAAO;IAE/DA,6DAAAA,gBAIC;IADCA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,8BAAqB;IAAA,EAAC;IAE/BA,6DAAAA,cAAyE;IACvEA,qDAAAA,mBACF;IAAAA,2DAAAA,EAAO;IAETA,6DAAAA,gBAKC;IACkDA,qDAAAA,kBAAU;IAAAA,2DAAAA,EAAO;IAEpEA,6DAAAA,gBAQE;IAFAA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAUA,0DAAAA,iBAAQ;IAAA,EAAC;IANrBA,2DAAAA,EAQE;IACFA,6DAAAA,iBAKC;IADCA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,6BAAoB;IAAA,EAAC;IAE9BA,yDAAAA,oEAKO;;IACPA,yDAAAA,oEAEO;;IACTA,2DAAAA,EAAS;IACTA,6DAAAA,kBAKC;IADCA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,sBAAa;IAAA,EAAC;IAEvBA,6DAAAA,eAAgD;IAACA,qDAAAA,oBAAW;IAAAA,2DAAAA,EAAO;IAErEA,6DAAAA,kBAIC;IADCA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,sCAA6B;IAAA,EAAC;IAEvCA,6DAAAA,eAAgD;IAACA,qDAAAA,cAAK;IAAAA,2DAAAA,EAAO;IAG/DA,6DAAAA,kBAAuE;IAAzBA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,uBAAc;IAAA,EAAC;IACpEA,6DAAAA,gBAGC;IACCA,qDAAAA,kBACF;IAAAA,2DAAAA,EAAO;IAGTA,yDAAAA,yEAOS;;IACTA,yDAAAA,yEAOS;;IACXA,2DAAAA,EAAM;;;;IAjDCA,wDAAAA,IAAyB;IAAzBA,yDAAAA,UAAAA,0DAAAA,yBAAyB;IAIqBA,wDAAAA,GAAsB;IAAtBA,yDAAAA,SAAAA,0DAAAA,yBAAsB;IAgCtEA,wDAAAA,IAA6B;IAA7BA,yDAAAA,SAAAA,0DAAAA,gCAA6B;IAQ7BA,wDAAAA,GAAgC;IAAhCA,yDAAAA,UAAAA,0DAAAA,iCAAgC;;;;;;IAiBnCA,6DAAAA,iBAKC;IADCA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,4BAAmB,KAAK,CAAC;IAAA,EAAC;IAEnCA,6DAAAA,eAAuD;IAACA,qDAAAA,oBAAY;IAAAA,2DAAAA,EAAO;;;;;;IAE7EA,6DAAAA,iBAKC;IADCA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,4BAAmB,IAAI,CAAC;IAAA,EAAC;IAElCA,6DAAAA,eAAuD;IAACA,qDAAAA,mBAAW;IAAAA,2DAAAA,EAAO;;;;;;IAzB9EA,6DAAAA,UAA+B;IACsBA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,uBAAc;IAAA,EAAC;IACzEA,6DAAAA,cAAgD;IAACA,qDAAAA,sBAAc;IAAAA,2DAAAA,EAAO;IAExEA,6DAAAA,iBAAmE;IAArBA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,mBAAU;IAAA,EAAC;IAChEA,6DAAAA,cAAgD;IAACA,qDAAAA,kBAAU;IAAAA,2DAAAA,EAAO;IAEpEA,6DAAAA,iBAAwE;IAAvBA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,qBAAY;IAAA,EAAC;IACrEA,6DAAAA,cAAgD;IAACA,qDAAAA,aAAK;IAAAA,2DAAAA,EAAO;IAG/DA,yDAAAA,yEAOS;;IACTA,yDAAAA,yEAOS;;IACXA,2DAAAA,EAAM;;;;IAbDA,wDAAAA,IAA6B;IAA7BA,yDAAAA,SAAAA,0DAAAA,gCAA6B;IAQ7BA,wDAAAA,GAAgC;IAAhCA,yDAAAA,UAAAA,0DAAAA,gCAAgC;;;ADlF/B,MAAOT,sBAAsB;EAMjC9J,YACU6S,eAAgC,EAChClX,YAA0B,EAC1BuQ,cAA8B,EAC9B4G,kBAAsC,EACtC18B,gBAAkC,EAClC28B,aAA4B,EAC5BC,aAA4B,EAC5BC,aAA4B,EAC5BC,aAAuC,EACvCzI,QAAqB;IATrB,oBAAe,GAAfoI,eAAe;IACf,iBAAY,GAAZlX,YAAY;IACZ,mBAAc,GAAduQ,cAAc;IACd,uBAAkB,GAAlB4G,kBAAkB;IAClB,qBAAgB,GAAhB18B,gBAAgB;IAChB,kBAAa,GAAb28B,aAAa;IACb,kBAAa,GAAbC,aAAa;IACb,kBAAa,GAAbC,aAAa;IACb,kBAAa,GAAbC,aAAa;IACb,aAAQ,GAARzI,QAAQ;IAEhB,IAAI,CAAC0I,SAAS,GAAG,IAAI,CAACL,kBAAkB,CAACM,SAAS;IAClD,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACj9B,gBAAgB,CAACk9B,MAAM;IAC5C,IAAI,CAACC,eAAe,GAAG,IAAI,CAAC5X,YAAY,CAAC6X,gBAAgB;EAC3D;EACAC,MAAM;IACJ;IACA,MAAMC,QAAQ,GAAGn8B,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,CAACo4B,KAAK,CAAC,CAAC,CAAC,CAACn8B,IAAI;IAChE,IAAIigC,QAAQ,CAACC,QAAQ,CAAC,MAAM,CAAC,EAAE;MAC7B,IAAI,CAACT,aAAa,CAACU,SAAS;MAC1B;MACAr8B,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,CAACo4B,KAAK,CAAC,CAAC,CAAC,EAC1C8D,QAAQ,EACR,KAAK,CACN;KACF,MAAM,IAAIA,QAAQ,CAACC,QAAQ,CAAC,UAAU,CAAC,EAAE;MACxC,IAAI,CAACT,aAAa,CAACU,SAAS;MAC1B;MACAr8B,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,CAACo4B,KAAK,CAAC,CAAC,CAAC,EAC1C8D,QAAQ,EACR,IAAI,CACL;KACF,MAAM,IAAIA,QAAQ,CAACC,QAAQ,CAAC,MAAM,CAAC,EAAE;MACpC,IAAI,CAACT,aAAa,CAACW,SAAS;MAC1B;MACAt8B,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,CAACo4B,KAAK,CAAC,CAAC,CAAC,EAC1C8D,QAAQ,EACR,KAAK,CACN;KACF,MAAM,IAAIA,QAAQ,CAACC,QAAQ,CAAC,UAAU,CAAC,EAAE;MACxC,IAAI,CAACT,aAAa,CAACW,SAAS;MAC1B;MACAt8B,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,CAACo4B,KAAK,CAAC,CAAC,CAAC,EAC1C8D,QAAQ,EACR,IAAI,CACL;;IAEH,IAAI,CAACxH,cAAc,CAAC4H,mBAAmB,EAAE;EAC3C;EAEAC,kBAAkB,CAACC,IAAa;IAC9B,IAAI,CAACrY,YAAY,CAACoY,kBAAkB,CAACC,IAAI,CAAC;EAC5C;EAEAC,YAAY;IACV,IAAI,CAACpB,eAAe,CAACl5B,IAAI,EAAE;EAC7B;EAEA;EACAu6B,kBAAkB;IAChB,IAAI,IAAI,CAACjB,aAAa,CAACkB,uBAAuB,EAAE,EAAE;MAChD,MAAMC,iBAAiB,GAAG,IAAIpR,yEAAY,CACxC,KAAK,EACL,wGAAwG,EACxG,CAACiK,SAAkB,EAAEC,kBAA2B,KAAK,IAAI,CAAC+F,aAAa,CAACoB,WAAW,CAACpH,SAAS,EAAEC,kBAAkB,CAAC,CACnH;MACD,MAAMoH,iBAAiB,GAAG,IAAItR,yEAAY,CACxC,KAAK,EACL,8FAA8F,EAC9F,CAACiK,SAAkB,EAAEC,kBAA2B,KAAK,IAAI,CAAC+F,aAAa,CAACsB,WAAW,EAAE,CACtF;MACD,MAAMC,iBAAiB,GAAG,IAAIxR,yEAAY,CACxC,KAAK,EACL,mFAAmF,EACnF,CAACiK,SAAkB,EAAEC,kBAA2B,KAAK,IAAI,CAAC+F,aAAa,CAACwB,WAAW,CAACxH,SAAS,CAAC,CAC/F;MACD,MAAMyH,kBAAkB,GAAG,IAAI1R,yEAAY,CACzC,mBAAmB,EACnB,wEAAwE,EACxE,CAACiK,SAAkB,EAAEC,kBAA2B,KAAK,IAAI,CAAC+F,aAAa,CAAC0B,wBAAwB,EAAE,CACnG;MAED,MAAM1b,MAAM,GAAG,IAAI2Z,sEAAe,EAAE;MACpC3Z,MAAM,CAAC2b,YAAY,GAAG,KAAK;MAC3B3b,MAAM,CAAC4b,SAAS,GAAG,IAAI;MACvB5b,MAAM,CAAC0G,IAAI,GAAG,IAAIoD,6EAAgB,CAAC,QAAQ,EAAE,CAC3CqR,iBAAiB,EACjBE,iBAAiB,EACjBE,iBAAiB,EACjBE,kBAAkB,CACnB,CAAC;MAEF,IAAI,CAAC3B,aAAa,CAAC+B,UAAU,CAAC9H,gGAAqB,EAAE/T,MAAM,CAAC;KAC7D,MAAM;MACL,IAAI,CAACwR,QAAQ,CAAC9wB,IAAI,CAAC,gCAAgC,EAAEyQ,SAAS,EAAE;QAC9D2gB,QAAQ,EAAEvK,uEAAiB;QAC3BwK,UAAU,EAAErK,mEAAaA;OAC1B,CAAC;;EAEN;EAEAoU,gBAAgB;IACd,MAAM9b,MAAM,GAAG,IAAI2Z,sEAAe,EAAE;IACpC3Z,MAAM,CAAC2b,YAAY,GAAG,KAAK;IAC3B3b,MAAM,CAAC4b,SAAS,GAAG,IAAI;IACvB,IAAI,CAAC9B,aAAa,CAAC+B,UAAU,CAACtH,gGAAqB,EAAEvU,MAAM,CAAC;EAC9D;EAEA+b,2BAA2B;IACzB,MAAM97B,KAAK,GAAG,oBAAoB;IAClC,MAAM+7B,YAAY,GAChB,4BAA4B,GAC5B,oDAAoD,GACpD,+BAA+B,GAC/B,gCAAgC,GAChC,mCAAmC,GACnC,kCAAkC,GAClC,0BAA0B,GAC1B,uBAAuB,GACvB,wBAAwB,GACxB,sBAAsB;IAExB,MAAMhc,MAAM,GAAG,IAAI2Z,sEAAe,EAAE;IACpC3Z,MAAM,CAAC2b,YAAY,GAAG,KAAK;IAC3B3b,MAAM,CAAC4b,SAAS,GAAG,IAAI;IAEvB5b,MAAM,CAAC0G,IAAI,GAAG,IAAIuD,yEAAc,CAAChqB,KAAK,EAAE+7B,YAAY,EAAE,IAAI,CAAC;IAE3D,IAAI,CAAClC,aAAa,CAAC+B,UAAU,CAACrH,0FAAmB,EAAExU,MAAM,CAAC;EAC5D;EAEAic,mBAAmB;IACjB,IAAI,IAAI,CAACjC,aAAa,CAACkB,uBAAuB,EAAE,EAAE;MAChD,MAAMlb,MAAM,GAAG,IAAI2Z,sEAAe,EAAE;MACpC3Z,MAAM,CAAC2b,YAAY,GAAG,KAAK;MAC3B3b,MAAM,CAAC4b,SAAS,GAAG,IAAI;MAEvB,IAAI,CAAC9B,aAAa,CAAC+B,UAAU,CAAC/G,6HAA8B,EAAE9U,MAAM,CAAC;KACtE,MAAM;MACL,IAAI,CAACwR,QAAQ,CAAC9wB,IAAI,CAChB,+CAA+C,EAC/CyQ,SAAS,EACT;QACE2gB,QAAQ,EAAEvK,uEAAiB;QAC3BwK,UAAU,EAAErK,mEAAaA;OAC1B,CACF;;EAEL;EAEA;EACAwU,WAAW;IACT,IAAI,CAACnC,aAAa,CAACmC,WAAW,EAAE;EAClC;EAEAC,UAAU;IACR,IAAI,CAACpC,aAAa,CAACoC,UAAU,EAAE;EACjC;EAEAC,YAAY;IACV,IAAI,CAACrC,aAAa,CAACqC,YAAY,EAAE;EACnC;EAEAC,QAAQ;IACN,IAAI,CAACtC,aAAa,CAACsC,QAAQ,EAAE;EAC/B;;AA5KWxL,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;QAAtBA,sBAAsB;EAAAmB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MChCnCd,yDAAAA,4DA2FM;;MACNA,yDAAAA,2DA2BM;;;;MAvHAA,yDAAAA,UAAAA,0DAAAA,sBAA0B;MA4F1BA,wDAAAA,GAAuB;MAAvBA,yDAAAA,SAAAA,0DAAAA,sBAAuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3FyB;;;;;;;;;;;ICMlDA,4DAAAA,cAAoD;IAClDA,oDAAAA,GAAoC;;IAAAA,0DAAAA,EACrC;;;;IADCA,uDAAAA,GAAoC;IAApCA,gEAAAA,YAAAA,yDAAAA,oCAAoC;;;;;IAQ1CA,4DAAAA,kBAA8E;IAC9CA,oDAAAA,GAA0B;;IAAAA,0DAAAA,EAAO;;;;IAAjCA,uDAAAA,GAA0B;IAA1BA,+DAAAA,CAAAA,yDAAAA,4BAA0B;;;ADNpD,MAAOiL,eAAe;EAW1BxV,YACUrE,YAA0B,EAC1BqX,aAA4B,EAC5BF,kBAAsC;IAFtC,iBAAY,GAAZnX,YAAY;IACZ,kBAAa,GAAbqX,aAAa;IACb,uBAAkB,GAAlBF,kBAAkB;IAb5B,WAAM,GAAG,IAAI,CAACnX,YAAY,CAAC8Z,MAAM;IACjC,iBAAY,GAAG,IAAI,CAAC9Z,YAAY,CAAC+Z,YAAY;IAC7C,qBAAgB,GAAG,IAAI,CAAC/Z,YAAY,CAAC6X,gBAAgB;IACrD,uBAAkB,GAAG,IAAI,CAAC7X,YAAY,CAAC4V,WAAW;IAKlD,cAAS,GAAG,KAAK;IAOf,IAAI,CAAC4B,SAAS,GAAG,IAAI,CAACL,kBAAkB,CAACM,SAAS;IAElD,IAAI,CAACuC,gBAAgB,GAAGJ,mDAAa,CAAC,CACpC,IAAI,CAACvC,aAAa,CAAC4C,YAAY,EAC/B,IAAI,CAAC5C,aAAa,CAAC6C,cAAc,CAClC,CAAC,CAACC,IAAI,CAACluB,yCAAG,CAAC,CAAC,CAACmuB,IAAI,EAAEC,KAAK,CAAC,KAAK,GAAGD,IAAI,IAAIC,KAAK,EAAE,CAAC,CAAC;EACrD;;AAtBWR,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;QAAfA,eAAe;EAAAvK;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCX5Bd,4DAAAA,qBAA6C;MAGhBA,oDAAAA,GAAqB;;MAAAA,0DAAAA,EAAO;MAErDA,4DAAAA,cAAqB;MAAAA,oDAAAA,GAAiC;;MAAAA,0DAAAA,EAAO;MAC7DA,uDAAAA,cAAsC;MACtCA,wDAAAA,uDAEC;;MAEDA,uDAAAA,eAAkC;MAGpCA,0DAAAA,EAAkB;MAEpBA,wDAAAA,+DAEW;;;;MAfkBA,uDAAAA,GAAqB;MAArBA,gEAAAA,KAAAA,yDAAAA,wBAAqB;MAEzBA,uDAAAA,GAAiC;MAAjCA,gEAAAA,KAAAA,yDAAAA,oCAAiC;MAE3BA,uDAAAA,GAAuB;MAAvBA,wDAAAA,SAAAA,yDAAAA,uBAAuB;MASRA,uDAAAA,GAA8B;MAA9BA,wDAAAA,SAAAA,yDAAAA,+BAA8B;;;;;;;;;;;;;;;;;;;;;;;;;;AChBG;AACxC;;;;;;;;;;ICGjCA,4DAAAA,oBAEC;IAIGA,wDAAAA;MAAA;MAAA;MAAA;MAAA,OAAUA,yDAAAA,yDAA8C;IAAA,EAAC;IAH3DA,0DAAAA,EAIE;;;;IAFAA,uDAAAA,GAA8B;IAA9BA,wDAAAA,kCAA8B;;;;;;IASlCA,4DAAAA,oBAEC;IAIGA,wDAAAA;MAAA;MAAA;MAAA;MAAA,OAAUA,yDAAAA,qDAA0C;IAAA,EAAC;IAHvDA,0DAAAA,EAIE;;;;IAFAA,uDAAAA,GAA4B;IAA5BA,wDAAAA,gCAA4B;;;ADZhC,MAAOF,wBAAwB;EAUnCrK,YAAoBkW,sBAA8C;IAA9C,2BAAsB,GAAtBA,sBAAsB;IAF1C,iBAAY,GAAuB,IAAID,uDAAY,EAAQ;IAGzD,IAAI,CAACC,sBAAsB,CAACC,uBAAuB,EAAE;IACrD,IAAI,CAACC,iBAAiB,GAAG,IAAI,CAACF,sBAAsB,CAACrmB,mBAAmB,EAAE;IAC1E,IAAI,CAACwmB,eAAe,GAAG,IAAI,CAACH,sBAAsB,CAACI,iBAAiB,EAAE;IAEtE,IAAI,CAACC,wBAAwB,GAAG,IAAIxJ,iDAAe,CAAC,IAAI,CAACqJ,iBAAiB,CAAC;IAC3E,IAAI,CAACI,sBAAsB,GAAG,IAAIzJ,iDAAe,CAAC,IAAI,CAACsJ,eAAe,CAAC;EACzE;EAEAzI,eAAe;IACb,IAAI,CAACsI,sBAAsB,CAACC,uBAAuB,EAAE;IACrD,IAAI,CAACI,wBAAwB,CAACt3B,IAAI,CAChC,IAAI,CAACi3B,sBAAsB,CAACrmB,mBAAmB,EAAE,CAClD;IACD,IAAI,CAAC2mB,sBAAsB,CAACv3B,IAAI,CAC9B,IAAI,CAACi3B,sBAAsB,CAACI,iBAAiB,EAAE,CAChD;EACH;EAEA5L,IAAI;IACF,IAAI,CAAC0L,iBAAiB,GAAG,IAAI,CAACG,wBAAwB,CAAC1+B,KAAK;IAC5D,IAAI,CAACw+B,eAAe,GAAG,IAAI,CAACG,sBAAsB,CAAC3+B,KAAK;IAExD,MAAM4+B,aAAa,GAAa,EAAE;IAClC,MAAMC,qBAAqB,GAAa,EAAE;IAE1C,MAAMC,eAAe,GAAa,EAAE;IACpC,MAAMC,uBAAuB,GAAa,EAAE;IAE5C,IAAI,CAACP,eAAe,CACjBlV,MAAM,CAAEI,CAAC,IAAKA,CAAC,CAAC9tB,IAAI,KAAK8tB,CAAC,CAACsV,YAAY,CAAC,CACxChlC,OAAO,CAAEokB,QAAQ,IAAI;MACpBwgB,aAAa,CAACvmC,IAAI,CAAC+lB,QAAQ,CAACxiB,IAAI,CAAC;MACjCijC,qBAAqB,CAACxmC,IAAI,CAAC+lB,QAAQ,CAAC4gB,YAAY,CAAC;IACnD,CAAC,CAAC;IAEJ,IAAI,CAACT,iBAAiB,CACnBjV,MAAM,CAAE2V,CAAC,IAAKA,CAAC,CAACrjC,IAAI,KAAKqjC,CAAC,CAACD,YAAY,CAAC,CACxChlC,OAAO,CAAEklC,UAAU,IAAI;MACtBJ,eAAe,CAACzmC,IAAI,CAAC6mC,UAAU,CAACtjC,IAAI,CAAC;MACrCmjC,uBAAuB,CAAC1mC,IAAI,CAAC6mC,UAAU,CAACF,YAAY,CAAC;IACvD,CAAC,CAAC;IAEJ,IAAI,CAACX,sBAAsB,CAACc,gBAAgB,CAC1CP,aAAa,EACbC,qBAAqB,EACrBC,eAAe,EACfC,uBAAuB,CACxB;IACD,IAAI,CAACK,YAAY,CAACC,IAAI,EAAE;EAC1B;EAEA9nB,MAAM;IACJ,IAAI,CAACgnB,iBAAiB,CAACvkC,OAAO,CAAEilC,CAAC,IAAI;MACnCA,CAAC,CAACrjC,IAAI,GAAGqjC,CAAC,CAACD,YAAY;IACzB,CAAC,CAAC;IACF,IAAI,CAACR,eAAe,CAACxkC,OAAO,CAAE0vB,CAAC,IAAI;MACjCA,CAAC,CAAC9tB,IAAI,GAAG8tB,CAAC,CAACsV,YAAY;IACzB,CAAC,CAAC;IAEF,IAAI,CAACN,wBAAwB,CAACt3B,IAAI,CAAC,IAAI,CAACm3B,iBAAiB,CAAC;IAC1D,IAAI,CAACI,sBAAsB,CAACv3B,IAAI,CAAC,IAAI,CAACo3B,eAAe,CAAC;EACxD;EAEAc,mBAAmB,CAAC9J,MAAa,EAAE+J,aAAyB;IAC1D,IAAIpjC,OAAO,GAAG,IAAI,CAACwiC,sBAAsB,CAAC3+B,KAAK;IAC/C7D,OAAO,CAACmtB,MAAM,CACXpW,CAAC,IAAKA,CAAC,CAAC8rB,YAAY,KAAKO,aAAa,CAACP;IACxC;IAAA,CACD,CAAC,CAAC,CAAC,CAACpjC,IAAI,GAAG45B,MAAM,CAACn8B,MAAM,CAAC2G,KAAK;IAC/B,IAAI,CAAC2+B,sBAAsB,CAACv3B,IAAI,CAACjL,OAAO,CAAC;EAC3C;EAEAqjC,qBAAqB,CAAChK,MAAa,EAAEiK,eAA2B;IAC9D,IAAItjC,OAAO,GAAG,IAAI,CAACuiC,wBAAwB,CAAC1+B,KAAK;IACjD7D,OAAO,CAACmtB,MAAM,CACXpW,CAAC,IAAKA,CAAC,CAAC8rB,YAAY,KAAKS,eAAe,CAACT;IAC1C;IAAA,CACD,CAAC,CAAC,CAAC,CAACpjC,IAAI,GAAG45B,MAAM,CAACn8B,MAAM,CAAC2G,KAAK;IAC/B,IAAI,CAAC0+B,wBAAwB,CAACt3B,IAAI,CAACjL,OAAO,CAAC;EAC7C;;AA1FWq2B,wBAAwB;mBAAxBA,wBAAwB;AAAA;AAAxBA,wBAAwB;QAAxBA,wBAAwB;EAAAY;EAAAsM;IAAAN;EAAA;EAAA/L;EAAAC;EAAAC;EAAAC;IAAA;MCXrCd,4DAAAA,aAA6B;MAErBA,oDAAAA,kBAAW;MAAAA,0DAAAA,EAAK;MACpBA,4DAAAA,eAAU;MACRA,wDAAAA,gFAQgB;;MAClBA,0DAAAA,EAAW;MAEbA,4DAAAA,aAA0B;MACMA,oDAAAA,iBAAU;MAAAA,0DAAAA,EAAK;MAC7CA,4DAAAA,gBAAU;MACRA,wDAAAA,kFAQgB;;MAClBA,0DAAAA,EAAW;MAGfA,4DAAAA,iBAAuB;MAMnBA,wDAAAA;QAAA,OAAS9O,UAAM;MAAA,EAAC;MAEhB8O,4DAAAA,eAAgD;MAAAA,oDAAAA,qBAAa;MAAAA,0DAAAA,EAAO;MACpEA,4DAAAA,eAA6B;MAAAA,oDAAAA,2BAAmB;MAAAA,0DAAAA,EAAO;;;MAlCvBA,uDAAAA,GAAmC;MAAnCA,wDAAAA,YAAAA,yDAAAA,qCAAmC;MAcrCA,uDAAAA,GAAiC;MAAjCA,wDAAAA,YAAAA,yDAAAA,oCAAiC;;;;;;;;;;;;;;;;;;;;;;;ACZ7D,MAAOH,wBAAwB;AAAxBA,wBAAwB;mBAAxBA,wBAAwB;AAAA;AAAxBA,wBAAwB;QAAxBA,wBAAwB;EAAAa;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCPrCd,4DAAAA,aAAqB;MACnBA,uDAAAA,4BAA+C;MACjDA,0DAAAA,EAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACE6C;;;;;;;;;;;;ICyBjDA,uDAAAA,2BAEwB;;;;;IACxBA,uDAAAA,mCAG4B;;;ADtBxB,MAAOiN,iBAAiB;EAK5BxX,YACU6S,eAAgC,EAChC3G,cAA8B,EAC9BqC,0BAAsD;IAFtD,oBAAe,GAAfsE,eAAe;IACf,mBAAc,GAAd3G,cAAc;IACd,+BAA0B,GAA1BqC,0BAA0B;IANpC,wBAAmB,GAAG,IAAIxB,iDAAe,CAAU,KAAK,CAAC;IACzD,4BAAuB,GAAG,IAAIA,iDAAe,CAAU,IAAI,CAAC;EAMzD;EAEHD,KAAK;IACH,MAAM2K,kBAAkB,GACtB,IAAI,CAAClJ,0BAA0B,CAACmJ,6BAA6B,EAAE;IACjE,IAAID,kBAAkB,EAAE;MACtB,IAAI,CAACvL,cAAc,CAACyL,OAAO,CAACF,kBAAkB,CAAC;;IAEjD,IAAI,CAAC5E,eAAe,CAAC/F,KAAK,EAAE;EAC9B;EAEA8K,mBAAmB;IACjB,IAAI,CAACC,mBAAmB,CAAC54B,IAAI,CAAC,IAAI,CAAC;IACnC,IAAI,CAAC64B,uBAAuB,CAAC74B,IAAI,CAAC,KAAK,CAAC;EAC1C;EAEA84B,uBAAuB;IACrB,IAAI,CAACF,mBAAmB,CAAC54B,IAAI,CAAC,KAAK,CAAC;IACpC,IAAI,CAAC64B,uBAAuB,CAAC74B,IAAI,CAAC,IAAI,CAAC;EACzC;;AA5BWu4B,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;QAAjBA,iBAAiB;EAAAvM;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCb9Bd,4DAAAA,aAAsB;MAGkCA,wDAAAA;QAAA,OAAS9O,WAAO;MAAA,EAAC;MACjE8O,4DAAAA,cAAyD;MACvDA,oDAAAA,kBAAU;MAAAA,0DAAAA,EACX;MAEHA,4DAAAA,aAA0B;MAKtBA,wDAAAA;QAAA,OAAS9O,6BAAyB;MAAA,EAAC;;MAEnC8O,4DAAAA,cAAuB;MAAAA,oDAAAA,uCAA+B;MAAAA,0DAAAA,EAAO;MAE/DA,4DAAAA,iBAKC;MADCA,wDAAAA;QAAA,OAAS9O,yBAAqB;MAAA,EAAC;;MAE/B8O,4DAAAA,eAAuB;MAAAA,oDAAAA,wBAAgB;MAAAA,0DAAAA,EAAO;MAMtDA,wDAAAA,yFAEwB;;MACxBA,wDAAAA,iGAG4B;;MAC9BA,0DAAAA,EAAM;;;MAzBIA,uDAAAA,GAAmD;MAAnDA,yDAAAA,cAAAA,yDAAAA,oCAAmD;MAQnDA,uDAAAA,GAA+C;MAA/CA,yDAAAA,cAAAA,yDAAAA,iCAA+C;MAWpDA,uDAAAA,GAAiC;MAAjCA,wDAAAA,SAAAA,yDAAAA,kCAAiC;MAGjCA,uDAAAA,GAAqC;MAArCA,wDAAAA,SAAAA,yDAAAA,sCAAqC;;;;;;;;;;;;;;;;;;;;;;;AChCL;AAMI;;;AAEzC,MAAM0N,0BAA0B,GAAG,uBAAuB;AAE1D,MAAMC,oBAAoB,GAA0B;EAClDvN,SAAS,EAAE,KAAK;EAChBE,QAAQ,EAAEtK,uFAA0B;EACpCqK,MAAM,EAAEtK,qFAAwBA;CACjC;AAKK,MAAO6X,4BAA4B;EAOvCnY,YAAoBoY,cAA8B;IAA9B,mBAAc,GAAdA,cAAc;IAN1B,kBAAa,GAAGF,oBAAoB;IAE3B,yBAAoB,GACnC,IAAIF,+CAAa,CAAwB,CAAC,CAAC;IACpC,mBAAc,GAAG,IAAI,CAACK,oBAAoB,CAACC,YAAY,EAAE;IAGhE,IAAI,CAACC,uBAAuB,EAAE;EAChC;EAEQA,uBAAuB;IAC7B,IAAI,CAAC9H,iBAAiB,EAAE;IACxB,IAAI,CAAC4H,oBAAoB,CAACp5B,IAAI,CAAC,IAAI,CAACgY,aAAa,CAAC;EACpD;EAEA6T,gBAAgB,CAAC7T,aAAoC;IACnD,IAAI;MACF,IAAI,CAACA,aAAa,GAAGA,aAAa;MAClC,IAAI,CAACuhB,iBAAiB,EAAE;MACxB,IAAI,CAACH,oBAAoB,CAACp5B,IAAI,CAACgY,aAAa,CAAC;MAC7C,OAAO,IAAI;KACZ,CAAC,MAAM;MACN,OAAO,KAAK;;EAEhB;EAEQwZ,iBAAiB;IACvB,IAAI,CAACxZ,aAAa,GAChB,IAAI,CAACmhB,cAAc,CAAChoC,GAAG,CAAC6nC,0BAA0B,CAAC,IACnDC,oBAAoB;EACxB;EAEQM,iBAAiB;IACvB,IAAI,CAACJ,cAAc,CAACt8B,GAAG,CAACm8B,0BAA0B,EAAE,IAAI,CAAChhB,aAAa,CAAC;EACzE;;AAnCWkhB,4BAA4B;mBAA5BA,4BAA4B;AAAA;AAA5BA,4BAA4B;SAA5BA,4BAA4B;EAAAM,SAA5BN,4BAA4B;EAAAO,YAF3B;AAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZ4C;AACoB;AAO3C;AAEV;;;;;;;;;AAExB,MAAME,UAAU,GAAG,gBAAgB;AAKpC,MAAOC,eAAe;EAI1B7Y,YACUwK,qBAAmD,EACnDyI,aAA4B,EAC5B6F,qBAA4C,EAC5CC,eAAgC,EAChCtO,QAAqB,EACrB2N,cAA8B,EAC9Bzc,YAA0B;IAN1B,0BAAqB,GAArB6O,qBAAqB;IACrB,kBAAa,GAAbyI,aAAa;IACb,0BAAqB,GAArB6F,qBAAqB;IACrB,oBAAe,GAAfC,eAAe;IACf,aAAQ,GAARtO,QAAQ;IACR,mBAAc,GAAd2N,cAAc;IACd,iBAAY,GAAZzc,YAAY;IATtB,4BAAuB,GAAG,IAAIgd,yCAAO,EAAQ;IAW3C,IAAI,CAACnO,qBAAqB,CAACwO,cAAc,CAACvN,SAAS,CAAExU,aAAa,IAChE,IAAI,CAACgiB,mBAAmB,CAAChiB,aAAa,CAAC,CACxC;EACH;EAEA4U,iBAAiB;IACf,MAAMD,MAAM,GAAG,IAAI,CAACsN,UAAU,EAAE;IAChC,IAAI,CAACC,UAAU,CAACvN,MAAM,CAAC;IACvB,OAAOA,MAAM;EACf;EAEAE,SAAS,CAACC,KAAY;IACpB,MAAMnK,cAAc,GAAGmK,KAAK,CAACqN,YAAY,CAACnQ,MAAM;IAChD,MAAMhQ,MAAM,GAAG0I,6FAAyB,CAACC,cAAc,CAAC;IACxD,MAAMyX,KAAK,GAAGhgB,IAAI,CAACC,KAAK,CAACyS,KAAK,CAACqN,YAAY,CAAClQ,GAAG,CAAC;IAEhD,IAAI,CAACvN,YAAY,CAACM,yBAAyB,CACzC8P,KAAK,CAAC7yB,KAAK,EACX6yB,KAAK,CAAC1N,WAAW,EACjB,KAAK,CACN;IAED,MAAMib,UAAU,GAAG,IAAI,CAACR,qBAAqB,CAACS,iBAAiB,CAC7DF,KAAK,EACLjqC,qEAAY,CAACiG,KAAK,CACnB;IACD,MAAMmkC,eAAe,GAAG,IAAI,CAACV,qBAAqB,CAACS,iBAAiB,CAClEF,KAAK,EACLjqC,qEAAY,CAAC0G,UAAU,CACxB;IACD,IAAI,CAACgjC,qBAAqB,CAACW,oBAAoB,CAC7CH,UAAU,EACVE,eAAe,EACfvgB,MAAM,CACP;IACD,IAAI,CAAC8f,eAAe,CAACW,WAAW,CAACL,KAAK,EAAE,IAAI,EAAEpgB,MAAM,EAAE,KAAK,CAAC;EAC9D;EAEA+S,eAAe;IACb,IAAI,CAACoM,cAAc,CAACt8B,GAAG,CAAC88B,UAAU,EAAE,EAAE,CAAC;IACvC,IAAI,CAACpN,uBAAuB,CAACvsB,IAAI,EAAE;EACrC;EAEQg6B,mBAAmB,CAAChiB,aAAoC;IAC9D,IAAI,CAAC0iB,SAAS,EAAE;IAEhB,IAAI1iB,aAAa,CAAC0T,SAAS,EAAE;MAC3B,IAAI,CAACiP,UAAU,CAAC3iB,aAAa,CAAC4T,QAAQ,EAAE5T,aAAa,CAAC2T,MAAM,CAAC;;EAEjE;EAEQ+O,SAAS;IACf,IAAI,IAAI,CAACE,aAAa,EAAE;MACtBC,aAAa,CAAC,IAAI,CAACD,aAAa,CAAC;MACjC,IAAI,CAACA,aAAa,GAAGzvB,SAAS;;EAElC;EAEQwvB,UAAU,CAAC/O,QAAgB,EAAED,MAAc;IACjD,IAAI,CAACiP,aAAa,GAAGE,WAAW,CAAC,MAAK;MACpC,MAAMnO,MAAM,GAAG,IAAI,CAACC,iBAAiB,EAAE;MACvC,MAAMmO,QAAQ,GAAG,IAAI,CAACC,WAAW,EAAE;MACnC,IAAIC,SAAS,GAAGtP,MAAM,GAAG,CAAC;MAC1B,IAAIgB,MAAM,CAACtqB,MAAM,GAAG,CAAC,EAAE;QACrB44B,SAAS,GAAGA,SAAS,IAAI,CAAC,IAAI,CAACC,MAAM,CAACH,QAAQ,EAAEpO,MAAM,CAAC,CAAC,CAAC,CAAC;;MAE5D,IAAIsO,SAAS,EAAE;QACbtO,MAAM,CAACwO,OAAO,CAAC,IAAI,CAACH,WAAW,EAAE,CAAC;QAClC,OAAOrO,MAAM,CAACtqB,MAAM,GAAGspB,MAAM,EAAE;UAC7BgB,MAAM,CAACyO,GAAG,EAAE;;QAEd,IAAI,CAACC,WAAW,CAAC1O,MAAM,CAAC;QACxB,IAAI,CAACnB,QAAQ,CAAC9wB,IAAI,CAAC,aAAa,EAAEyQ,SAAS,EAAE;UAC3C4gB,UAAU,EAAErK,0EAAa;UACzBoK,QAAQ,EAAEvK,8EAAiBA;SAC5B,CAAC;QACF,IAAI,CAACgL,uBAAuB,CAACvsB,IAAI,EAAE;;IAEvC,CAAC,EAAE4rB,QAAQ,GAAG,KAAK,CAAC;EACtB;EAEQsP,MAAM,CAAC5Y,CAAQ,EAAEC,CAAQ;IAC/B,OACED,CAAC,CAACroB,KAAK,KAAKsoB,CAAC,CAACtoB,KAAK,IACnBqoB,CAAC,CAAClD,WAAW,KAAKmD,CAAC,CAACnD,WAAW,IAC/BhF,IAAI,CAACkhB,SAAS,CAAChZ,CAAC,CAAC6X,YAAY,CAAC,KAAK/f,IAAI,CAACkhB,SAAS,CAAC/Y,CAAC,CAAC4X,YAAY,CAAC;EAErE;EAEQkB,WAAW,CAAC1O,MAAe;IACjC,IAAI,CAACwM,cAAc,CAACt8B,GAAG,CAAC88B,UAAU,EAAEhN,MAAM,CAAC;EAC7C;EAEQsN,UAAU;IAChB,OAAO,IAAI,CAACd,cAAc,CAAChoC,GAAG,CAACwoC,UAAU,CAAC,IAAI,EAAE;EAClD;EAEQqB,WAAW;IACjB,MAAM/Q,GAAG,GAAG7P,IAAI,CAACkhB,SAAS,CAAC,IAAI,CAACxB,eAAe,CAACyB,QAAQ,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;IACpE,MAAMpB,YAAY,GAAG,IAAI,CAACnG,aAAa,CAACwH,kBAAkB,CAACvR,GAAG,CAAC;IAE/D,MAAMwR,IAAI,GAAG,IAAIC,IAAI,EAAE,CAACC,QAAQ,EAAE,CAACjkB,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;IAE/C,OAAO;MACLzd,KAAK,EAAE,IAAI,CAACyiB,YAAY,CAACG,QAAQ,EAAE;MACnCuC,WAAW,EAAE,IAAI,CAAC1C,YAAY,CAACK,cAAc,EAAE;MAC/Cod,YAAY;MACZsB;KACD;EACH;EAEQvB,UAAU,CAACvN,MAAe;IAChCA,MAAM,CAACvK,IAAI,CAAC,CAACE,CAAQ,EAAEC,CAAQ,KAAI;MACjC,MAAMqZ,KAAK,GAAGF,IAAI,CAACrhB,KAAK,CAACiI,CAAC,CAACmZ,IAAI,CAAC;MAChC,MAAMI,KAAK,GAAGH,IAAI,CAACrhB,KAAK,CAACkI,CAAC,CAACkZ,IAAI,CAAC;MAChC,OAAOG,KAAK,GAAGC,KAAK,GAAG,CAAC,GAAG,CAAC;IAC9B,CAAC,CAAC;EACJ;;AAlIWjC,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;SAAfA,eAAe;EAAAJ,SAAfI,eAAe;EAAAH,YAFd;AAAM;;;;;;;;;;;;;;;;;ACpBqD;AAIxB;;AAK3C,MAAOqC,cAAc;EACzBj/B,GAAG,CAACD,GAAW,EAAEhE,KAAU;IACzBshB,YAAY,CAAC6hB,OAAO,CAACn/B,GAAG,EAAEwd,IAAI,CAACkhB,SAAS,CAAC1iC,KAAK,CAAC,CAAC;EAClD;EAEAzH,GAAG,CAACyL,GAAW;IACb,MAAMo/B,IAAI,GAAG9hB,YAAY,CAACC,OAAO,CAACvd,GAAG,CAAC;IACtC,IAAIo/B,IAAI,EAAE;MACR,OAAO5hB,IAAI,CAACC,KAAK,CAAC2hB,IAAI,CAAC;;IAEzB,OAAO,IAAI;EACb;EAEAC,UAAU,CAACr/B,GAAW;IACpBsd,YAAY,CAAC+hB,UAAU,CAACr/B,GAAG,CAAC;EAC9B;EAEAs/B,4BAA4B,CAACC,oBAAyC;IACpE,OACEA,oBAAoB,CAACxhB,MAAM,CAACpkB,SAAS,EAAE,CAAC8L,MAAM,GAAG,CAAC,IAClD85B,oBAAoB,CAACvhB,WAAW,CAACrkB,SAAS,EAAE,CAAC8L,MAAM,GAAG,CAAC,IACvD,CAAC85B,oBAAoB,CAACxhB,MAAM,CACzBiH,GAAG,EAAE,CACLxD,IAAI,CAAEtS,CAAC,IAAK,OAAOA,CAAC,CAAClT,KAAK,KAAK,QAAQ,CAAC,IAC3C,CAACujC,oBAAoB,CAACvhB,WAAW,CAC9BgH,GAAG,EAAE,CACLxD,IAAI,CAAEtS,CAAC,IAAK,OAAOA,CAAC,CAAClT,KAAK,KAAK,QAAQ,CAAC;EAE/C;EAEAwjC,4BAA4B;IAC1B,MAAMC,YAAY,GAAGniB,YAAY,CAACC,OAAO,CAACiH,8EAAwB,CAAC;IAEnE,IAAI,CAACib,YAAY,EAAE;MACjB;KACD,MAAM;MACL,MAAMF,oBAAoB,GAAGzZ,6FAAyB,CACpDtI,IAAI,CAACC,KAAK,CAACgiB,YAAY,CAAC,CACzB;MACD,IAAI,IAAI,CAACH,4BAA4B,CAACC,oBAAoB,CAAC,EAAE;QAC3D,OAAOA,oBAAoB;;;IAG/B;EACF;EAEAG,4BAA4B,CAACtiB,MAA2B;IACtD,MAAMW,MAAM,GAER,EAAE;IACNX,MAAM,CAACW,MAAM,CAACpkB,SAAS,EAAE,CAAC3D,OAAO,CAAEgK,GAAG,IAAI;MACxC+d,MAAM,CAAC/d,GAAG,CAAC,GAAGod,MAAM,CAACW,MAAM,CAACxpB,GAAG,CAACyL,GAAG,CAAC;IACtC,CAAC,CAAC;IACF,MAAMge,WAAW,GAEb,EAAE;IACNZ,MAAM,CAACY,WAAW,CAACrkB,SAAS,EAAE,CAAC3D,OAAO,CAAEgK,GAAG,IAAI;MAC7Cge,WAAW,CAAChe,GAAG,CAAC,GAAGod,MAAM,CAACY,WAAW,CAACzpB,GAAG,CAACyL,GAAG,CAAC;IAChD,CAAC,CAAC;IAEF,MAAM2/B,gBAAgB,GAAG;MACvB/nC,IAAI,EAAEwlB,MAAM,CAACxlB,IAAI;MACjBmmB,MAAM,EAAEA,MAAM;MACdC,WAAW,EAAEA;KACd;IAEDV,YAAY,CAAC6hB,OAAO,CAClB3a,8EAAwB,EACxBhH,IAAI,CAACkhB,SAAS,CAACiB,gBAAgB,EAAE,IAAI,EAAE,CAAC,CAAC,CAC1C;EACH;;AAtEWT,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;SAAdA,cAAc;EAAAtC,SAAdsC,cAAc;EAAArC,YAFb;AAAM;;;;;;;;;;;;;;;;ACHd,MAAO+C,mBAAmB;EAG9Bzb,eAAe;EAEf0b,eAAe,CAAC5kC,YAAiB;IAC/B,IAAI,CAACA,YAAY,GAAGA,YAAY;EAClC;EAEAgB,OAAO,CAACpD,MAAc,EAAEinC,OAAY;IAClC,IAAI,CAAC7kC,YAAY,CAACgB,OAAO,CAACpD,MAAM,EAAEinC,OAAO,CAAC;EAC5C;;AAXWF,mBAAmB;mBAAnBA,mBAAmB;AAAA;AAAnBA,mBAAmB;SAAnBA,mBAAmB;EAAAhD,SAAnBgD,mBAAmB;EAAA/C,YAFlB;AAAM;;;;;;;;;;;;;;;;;;ACId,MAAOkD,aAAa;EACxB5b,YAAoB6b,SAAoB;IAApB,cAAS,GAATA,SAAS;EAAc;EAE3C/G,UAAU,CAACgH,MAA0B,EAAE7iB,MAAuB;IAC5D,IAAI,CAAC4iB,SAAS,CAACliC,IAAI,CAACmiC,MAAM,EAAE7iB,MAAM,CAAC;EACrC;;AALW2iB,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;SAAbA,aAAa;EAAAnD,SAAbmD,aAAa;EAAAlD,YAFZ;AAAM;;;;;;;;;;;;;;;;ACJmB;;AAKjC,MAAOqD,gBAAgB;EAH7B/b;IAIU,mBAAc,GAAG,IAAI+M,iDAAe,CAAU,KAAK,CAAC;IAC5D,WAAM,GAAG,IAAI,CAACiP,cAAc,CAAC1D,YAAY,EAAE;;EAE3CvgC,SAAS;IACP,IAAI,CAACikC,cAAc,CAAC/8B,IAAI,CAAC,IAAI,CAAC;EAChC;EAEAg9B,SAAS;IACP,IAAI,CAACD,cAAc,CAAC/8B,IAAI,CAAC,KAAK,CAAC;EACjC;EAEA,IAAIi9B,KAAK;IACP,OAAO,IAAI,CAACF,cAAc,CAACnkC,KAAK;EAClC;;AAdWkkC,gBAAgB;mBAAhBA,gBAAgB;AAAA;AAAhBA,gBAAgB;SAAhBA,gBAAgB;EAAAtD,SAAhBsD,gBAAgB;EAAArD,YAFf;AAAM;;;;;;;;;;;;;;;;;;ACD8C;AAUZ;;;AAKtD;;;AAGM,MAAOyD,sBAAsB;EACjCnc,YAAoBrhB,sBAA8C;IAA9C,2BAAsB,GAAtBA,sBAAsB;EAA2B;EAErEy9B,OAAO;IACL,IAAI,CAACC,gBAAgB,EAAE;IACvB,IAAI,CAAC19B,sBAAsB,CACxB29B,mBAAmB,EAAE,CACrB3lB,KAAK,EAAE,CACP/mB,MAAM,CAAC,IAAI,CAAC+O,sBAAsB,CAAC49B,YAAY,EAAE,CAAC5lB,KAAK,EAAE,CAAC,CAC1D/O,GAAG,CAAEmD,CAAC,IAAKA,CAAC,CAACxa,cAAc,CAAC,CAC5BsB,OAAO,CAAEK,OAAO,IAAI;MACnB,MAAMsqC,SAAS,GAAGjlC,QAAQ,CAACqmB,aAAa,CACtC,mBAAmB,GAAG1rB,OAAO,CAACvB,EAAE,GAAG,GAAG,CACvC;MACD;MACA6rC,SAAS,CAACv8B,KAAK,CAACw8B,OAAO,GAAG,OAAO;IACnC,CAAC,CAAC;EACN;EAEAC,QAAQ,CAACC,UAAqB,EAAEtH,YAAwB;IACtD,IAAI,CAACgH,gBAAgB,EAAE;IACvB,MAAMO,QAAQ,GAAG,IAAI,CAACC,cAAc,CAACF,UAAU,CAACh4B,OAAO,CAAC;IAExDi4B,QAAQ,CAAC/qC,OAAO,CAAEK,OAAO,IAAI;MAC3B,MAAMsqC,SAAS,GAAGjlC,QAAQ,CAACqmB,aAAa,CACtC,mBAAmB,GAAG1rB,OAAO,CAACvB,EAAE,GAAG,GAAG,CACvC;MACD,IAAI6rC,SAAS,EAAE;QACb;QACAA,SAAS,CAACv8B,KAAK,CAACw8B,OAAO,GAAG,MAAM;;IAEpC,CAAC,CAAC;IAEF,IAAI,CAACK,cAAc,CACjBzH,YAAY,GACRsH,UAAU,CAACh4B,OAAO,CAACwc,MAAM,CAAE4b,CAAC,IAAK,CAAC1H,YAAY,CAAC1wB,OAAO,CAAC1Q,QAAQ,CAAC8oC,CAAC,CAAC,CAAC,GACnEJ,UAAU,CAACh4B,OAAO,CACvB;IAEDg4B,UAAU,CAACh4B,OAAO,CAAC9S,OAAO,CAAEK,OAAO,IAAI;MACrC,MAAMsqC,SAAS,GAAGjlC,QAAQ,CAACqmB,aAAa,CACtC,mBAAmB,GAAG1rB,OAAO,CAACvB,EAAE,GAAG,GAAG,CACvC;MACD,IAAI6rC,SAAS,EAAE;QACb;QACAA,SAAS,CAACv8B,KAAK,CAACw8B,OAAO,GAAG,OAAO;;IAErC,CAAC,CAAC;EACJ;EAEAO,uBAAuB,CAAC/mB,QAA4B;IAClD,MAAMgnB,UAAU,GAAGhnB,QAAQ,CAAC3R,aAAa,EAAEM,sBAAsB,CAC/D,iBAAiB,CAClB,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC;IACb,OAAO;MACLs4B,mBAAmB,EAAED,UAAU,CAAC,CAAC,CAAC;MAClCE,aAAa,EAAEF,UAAU,CAAC,CAAC;KAC5B;EACH;EAEQZ,gBAAgB;IACtB,MAAMe,aAAa,GAAG,IAAI,CAACz+B,sBAAsB,CAAC0+B,gBAAgB,EAAE;IACpE,MAAMC,cAAc,GAAG,IAAI,CAAC3+B,sBAAsB,CAAC4+B,iBAAiB,EAAE;IAEtEH,aAAa,CAACvrC,OAAO,CAAEokB,QAAQ,IAAI;MACjC,MAAM2H,aAAa,GAAGrmB,QAAQ,CAACqmB,aAAa,CAC1C,mBAAmB,GAAG3H,QAAQ,CAACtlB,EAAE,GAAG,GAAG,CACxC;MACD,IAAIitB,aAAa,EAAE;QACjB,MAAM4f,iBAAiB,GACrB5f,aAAa,CAAC3Y,oBAAoB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QAEnDu4B,iBAAiB,CAACv9B,KAAK,CAAC6C,MAAM,GAC5BmT,QAAQ,CAAC1lB,cAAc,CAACoS,WAAW,IAAI,OAAO;QAChD66B,iBAAiB,CAACv9B,KAAK,CAAC8D,WAAW,GAAG0f,iFAAY;QAElD,MAAM;UAAEyZ,mBAAmB;UAAEC;QAAa,CAAE,GAC1C,IAAI,CAACH,uBAAuB,CAACQ,iBAAiB,CAAC;QACjD,IAAIN,mBAAmB,IAAIC,aAAa,EAAE;UACxCD,mBAAmB,CAACj9B,KAAK,CAACE,IAAI,GAAGojB,4FAAuB;UACxD4Z,aAAa,CAACl9B,KAAK,CAACE,IAAI,GAAGqjB,iFAAY;;;IAG7C,CAAC,CAAC;IAEF8Z,cAAc,CAACzrC,OAAO,CAAEb,UAAU,IAAI;MACpC;MACA,MAAMysC,mBAAmB,GAAGlmC,QAAQ,CACjCqmB,aAAa,CAAC,mBAAmB,GAAG5sB,UAAU,CAACL,EAAE,GAAG,GAAG,CAAC,CACxDsU,oBAAoB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;MAEtCw4B,mBAAmB,CAACx9B,KAAK,CAAC6C,MAAM,GAC9B9R,UAAU,CAACT,cAAc,CAACoS,WAAW,IAAI,OAAO;MAClD86B,mBAAmB,CAACx9B,KAAK,CAAC8D,WAAW,GAAG,KAAK;IAC/C,CAAC,CAAC;EACJ;EAEQ+4B,cAAc,CAACY,WAA6B;IAClDA,WAAW,CACRvc,MAAM,CAAEpW,CAAC,IAAKA,CAAC,CAAC5Y,IAAI,KAAK/C,4EAAY,CAACgD,QAAQ,CAAC,CAC/CP,OAAO,CAAEokB,QAAQ,IAAI;MACpB,MAAM2H,aAAa,GAAGrmB,QAAQ,CAACqmB,aAAa,CAC1C,mBAAmB,GAAG3H,QAAQ,CAACtlB,EAAE,GAAG,GAAG,CACxC;MACD,IAAIitB,aAAa,EAAE;QACjB,MAAM4f,iBAAiB,GACrB5f,aAAa,CAAC3Y,oBAAoB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QAEnDu4B,iBAAiB,CAACv9B,KAAK,CAAC6C,MAAM,GAAG8gB,oFAAe;QAChD4Z,iBAAiB,CAACv9B,KAAK,CAAC8D,WAAW,GAAG8f,2FAAsB;QAE5D,MAAM;UAAEqZ,mBAAmB;UAAEC;QAAa,CAAE,GAC1C,IAAI,CAACH,uBAAuB,CAACQ,iBAAiB,CAAC;QACjD,IAAIL,aAAa,IAAID,mBAAmB,EAAE;UACxCA,mBAAmB,CAACj9B,KAAK,CAACE,IAAI,GAAGujB,sGAAiC;UAClEyZ,aAAa,CAACl9B,KAAK,CAACE,IAAI,GAAGwjB,2FAAsB;;;IAGvD,CAAC,CAAC;EACN;EAEQkZ,cAAc,CAACc,aAA+B;IACpD,MAAMC,gBAAgB,GAAqB,EAAE;IAC7C,MAAMC,UAAU,GAAG,IAAI,CAACl/B,sBAAsB,CAC3C29B,mBAAmB,EAAE,CACrB1sC,MAAM,CAAC,IAAI,CAAC+O,sBAAsB,CAAC49B,YAAY,EAAE,CAAC;IAErDsB,UAAU,CAAChsC,OAAO,CAAEK,OAAO,IAAI;MAC7B,IAAI,CAACyrC,aAAa,CAAC1pC,QAAQ,CAAC/B,OAAO,CAAC3B,cAAc,CAAC,EAAE;QACnD,IAAI2B,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACiD,UAAU,CAAC,EAAE;UAClD;UACA,IAAI,CAACH,OAAO,CAACjB,MAAM,CAACkB,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACkD,KAAK,CAAC,EAAE;YACrDsrC,gBAAgB,CAAC1tC,IAAI,CAACgC,OAAO,CAAC3B,cAAc,CAAC;WAC9C,MAAM;YACL;YACAotC,aAAa,CAACztC,IAAI,CAACgC,OAAO,CAAChB,MAAM,CAAC;;SAErC,MAAM;UACL0sC,gBAAgB,CAAC1tC,IAAI,CAACgC,OAAO,CAAC3B,cAAc,CAAC;;;IAGnD,CAAC,CAAC;IACF,OAAOqtC,gBAAgB;EACzB;;AA/IWzB,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;SAAtBA,sBAAsB;EAAA1D,SAAtB0D,sBAAsB;EAAAzD,YALrB;AAAM;;;;;;;;;;;;;;;;;;;;;;ACbqD;AACP;AAME;AAEA;;;;;AAK9D,MAAOoF,0BAA0B;EACrC9d,YACUhrB,qBAA4C,EAC5C2J,sBAA8C,EAC9Cgd,YAA0B;IAF1B,0BAAqB,GAArB3mB,qBAAqB;IACrB,2BAAsB,GAAtB2J,sBAAsB;IACtB,iBAAY,GAAZgd,YAAY;EACnB;EAEHoiB,aAAa,CAACtb,UAAkB;IAC9B,IAAI,CAAC9G,YAAY,CAACoiB,aAAa,CAC7Btb,UAAU,GAAGA,UAAU,GAAGrC,yEAAmB,CAC9C;EACH;EAEA4d,mBAAmB;IACjB,MAAMxb,mBAAmB,GAAG,IAAI,CAACyb,gCAAgC,EAAE;IACnE,IAAI,CAACzb,mBAAmB,EAAE;MACxB;;IAGF,MAAM0b,gBAAgB,GAAG7kB,IAAI,CAACkhB,SAAS,CAAC/X,mBAAmB,EAAE,IAAI,EAAE,CAAC,CAAC;IACrE,MAAMkR,QAAQ,GAAG,IAAI,CAAC/X,YAAY,CAACwiB,aAAa,EAAE;IAClD,MAAMjsC,OAAO,GAAGqF,QAAQ,CAACub,aAAa,CAAC,GAAG,CAAC;IAE3C5gB,OAAO,CAACoT,YAAY,CAClB,MAAM,EACN,gCAAgC,GAAG84B,kBAAkB,CAACF,gBAAgB,CAAC,CACxE;IACDhsC,OAAO,CAACoT,YAAY,CAAC,UAAU,EAAEouB,QAAQ,GAAG,SAAS,CAAC;IACtDxhC,OAAO,CAAC+N,KAAK,CAACw8B,OAAO,GAAG,MAAM;IAC9BllC,QAAQ,CAAC8mC,IAAI,CAACrrB,WAAW,CAAC9gB,OAAO,CAAC;IAElCA,OAAO,CAACiH,KAAK,EAAE;IAEf5B,QAAQ,CAAC8mC,IAAI,CAACzqB,WAAW,CAAC1hB,OAAO,CAAC;EACpC;EAEAu+B,iBAAiB,CACf6N,YAAiC,EACjCC,gBAAgB,GAAG,IAAI;IAEvB,IAAIC,SAAS,GAAG,IAAIznB,mFAAU,EAAE;IAChC,IAAI0nB,cAAc,GAAG,IAAI1nB,mFAAU,EAAE;IAErC,IAAIunB,YAAY,CAAC1kB,MAAM,CAACpkB,SAAS,EAAE,EAAE;MACnCgpC,SAAS,GAAGF,YAAY,CAAC1kB,MAAM;MAC/B6kB,cAAc,GAAGH,YAAY,CAACzkB,WAAW;KAC1C,MAAM;MACL2kB,SAAS,CAACvd,OAAO,CAACqd,YAAY,CAAC1kB,MAAM,CAAC;MACtC6kB,cAAc,CAACxd,OAAO,CAACqd,YAAY,CAACzkB,WAAW,CAAC;;IAGlD,MAAM6kB,SAAS,GAAGF,SAAS,CAAChpC,SAAS,EAAE;IACvC,MAAMmpC,cAAc,GAAGF,cAAc,CAACjpC,SAAS,EAAE;IAEjD,IAAI,CAACR,qBAAqB,CAACykC,oBAAoB,CAAC,EAAE,EAAE,EAAE,EAAE6E,YAAY,CAAC;IAErE,IAAI,CAACtpC,qBAAqB,CACvB4pC,oBAAoB,EAAE,CACtBxc,aAAa,CAACsc,SAAS,EAAEF,SAAS,EAAEG,cAAc,EAAEF,cAAc,CAAC;IAEtE,IAAI,CAACzpC,qBAAqB,CAAC6pC,+BAA+B,CACxDzvC,4EAAY,CAACiG,KAAK,EAClBqpC,SAAS,CAAC92B,GAAG,CAAE2Z,CAAC,IAAKnyB,4EAAY,CAACiG,KAAK,GAAGksB,CAAC,CAAC,CAC7C;IACD,IAAI,CAACvsB,qBAAqB,CAAC6pC,+BAA+B,CACxDzvC,4EAAY,CAAC0G,UAAU,EACvB6oC,cAAc,CAAC/2B,GAAG,CAAEkvB,CAAC,IAAK1nC,4EAAY,CAAC0G,UAAU,GAAGghC,CAAC,CAAC,CACvD;IAED,IAAIyH,gBAAgB,EAAE;MACpB,MAAMO,iBAAiB,GAAGR,YAAY,CAAC7qC,IAAI;MAC3C,IAAI,CAACsqC,aAAa,CAACe,iBAAiB,CAAC;;EAEzC;EAEAC,uBAAuB;IACrB,MAAMnlB,MAAM,GAAG,IAAI,CAAC5kB,qBAAqB,CAACgqC,mBAAmB,EAAE;IAC/D,MAAMnlB,WAAW,GAAG,IAAI,CAAC7kB,qBAAqB,CAACiqC,wBAAwB,EAAE;IAEzE,IAAIzc,mBAAmB;IAEvB,IAAI5I,MAAM,CAACkH,IAAI,EAAE,GAAG,CAAC,IAAIjH,WAAW,CAACiH,IAAI,EAAE,GAAG,CAAC,EAAE;MAC/C0B,mBAAmB,GAAG,IAAI,CAAC0c,4BAA4B,CACrDtlB,MAAM,EACNC,WAAW,CACZ;;IAEH,OAAO2I,mBAAmB;EAC5B;EAEAyb,gCAAgC;IAC9B,MAAMkB,oBAAoB,GAAG,IAAI,CAACJ,uBAAuB,EAAE;IAE3D,IAAII,oBAAoB,EAAE;MACxB,MAAMvlB,MAAM,GAAQ,EAAE;MACtB,MAAMC,WAAW,GAAQ,EAAE;MAE3BslB,oBAAoB,CAACvlB,MAAM,CAACiH,GAAG,EAAE,CAAChvB,OAAO,CAAE2C,KAAK,IAAI;QAClDolB,MAAM,CAACplB,KAAK,CAACqH,GAAG,CAAC,GAAGrH,KAAK,CAACqD,KAAK;MACjC,CAAC,CAAC;MACFsnC,oBAAoB,CAACtlB,WAAW,CAACgH,GAAG,EAAE,CAAChvB,OAAO,CAAE2C,KAAK,IAAI;QACvDqlB,WAAW,CAACrlB,KAAK,CAACqH,GAAG,CAAC,GAAGrH,KAAK,CAACqD,KAAK;MACtC,CAAC,CAAC;MAEF,OAAO;QACLpE,IAAI,EAAE0rC,oBAAoB,CAAC1rC,IAAI;QAC/BmmB,MAAM,EAAEA,MAAM;QACdC,WAAW,EAAEA;OACd;;IAEH;EACF;EAEAulB,yCAAyC;IACvC,OAAO;MACL3rC,IAAI,EAAE,IAAI,CAACkoB,YAAY,CAACwiB,aAAa,EAAE,IAAI/d,yEAAmB;MAC9DxG,MAAM,EAAE,IAAI,CAAC5kB,qBAAqB,CAC/BgqC,mBAAmB,EAAE,CACrBxpC,SAAS,EAAE,CACXoS,GAAG,CAAE2Z,CAAC,IAAKA,CAAC,CAACjpB,OAAO,CAAClJ,4EAAY,CAACiG,KAAK,EAAE,EAAE,CAAC,CAAC;MAChDwkB,WAAW,EAAE,IAAI,CAAC7kB,qBAAqB,CACpCiqC,wBAAwB,EAAE,CAC1BzpC,SAAS,EAAE,CACXoS,GAAG,CAAEkvB,CAAC,IAAKA,CAAC,CAACx+B,OAAO,CAAClJ,4EAAY,CAAC0G,UAAU,EAAE,EAAE,CAAC;KACrD;EACH;EAEAupC,0CAA0C;IACxC,MAAMC,aAAa,GAAG,IAAI,CAACC,sBAAsB,EAAE;IAEnDrd,yEAAW,CAACtI,MAAM,CAAC/nB,OAAO,CAAEm+B,QAAQ,IAAI;MACtCsP,aAAa,CAAC1lB,MAAM,CAAC9X,GAAG,CACtB,IAAI,CAAC9M,qBAAqB,CAACwqC,aAAa,CAACxP,QAAQ,CAAC,EAClDA,QAAQ,CACT;IACH,CAAC,CAAC;IACF9N,yEAAW,CAACrI,WAAW,CAAChoB,OAAO,CAAEm+B,QAAQ,IAAI;MAC3CsP,aAAa,CAACzlB,WAAW,CAAC/X,GAAG,CAC3B,IAAI,CAAC9M,qBAAqB,CAACwqC,aAAa,CAACxP,QAAQ,CAAC,EAClDA,QAAQ,CACT;IACH,CAAC,CAAC;IAEF,OAAOsP,aAAa;EACtB;EAEQJ,4BAA4B,CAClCrd,UAAsB,EACtBC,eAA2B;IAE3B,MAAM2d,UAAU,GAAG5d,UAAU,CAACrsB,SAAS,EAAE;IACzC,MAAMkqC,eAAe,GAAG5d,eAAe,CAACtsB,SAAS,EAAE;IACnD,MAAMmqC,SAAS,GAAG,IAAI5oB,mFAAU,EAAE;IAClC,MAAM6oB,cAAc,GAAG,IAAI7oB,mFAAU,EAAE;IAEvC;IACA0oB,UAAU,CAAC5tC,OAAO,CAAE6R,KAAK,IAAI;MAC3Bi8B,SAAS,CAAC79B,GAAG,CACX+f,UAAU,CAACzxB,GAAG,CAACsT,KAAK,CAAC,EACrBA,KAAK,CAACpL,OAAO,CAAClJ,4EAAY,CAACiG,KAAK,EAAE,EAAE,CAAC,CACtC;IACH,CAAC,CAAC;IACFqqC,eAAe,CAAC7tC,OAAO,CAAEgS,UAAU,IAAI;MACrC+7B,cAAc,CAAC99B,GAAG,CAChBggB,eAAe,CAAC1xB,GAAG,CAACyT,UAAU,CAAC,EAC/BA,UAAU,CAACvL,OAAO,CAAClJ,4EAAY,CAAC0G,UAAU,EAAE,EAAE,CAAC,CAChD;IACH,CAAC,CAAC;IAEF,OAAO;MACLrC,IAAI,EAAE,IAAI,CAACkoB,YAAY,CAACwiB,aAAa,EAAE;MACvCvkB,MAAM,EAAE+lB,SAAS;MACjB9lB,WAAW,EAAE+lB;KACd;EACH;EAEQL,sBAAsB;IAC5B,MAAMtmB,MAAM,GAAG;MACbxlB,IAAI,EAAE2sB,yEAAmB;MACzBxG,MAAM,EAAE,IAAI7C,mFAAU,EAAE;MACxB8C,WAAW,EAAE,IAAI9C,mFAAU;KAC5B;IAED,IAAI8oB,gBAAgB,GAAG,IAAI,CAAClhC,sBAAsB,CAAC29B,mBAAmB,EAAE;IAExEuD,gBAAgB,CACbj4B,GAAG,CAAEmD,CAAC,IAAKA,CAAC,CAACxa,cAAc,CAAC,CAC5BsB,OAAO,CAAEK,OAAO,IAAI;MACnB,MAAMC,IAAI,GAAGD,OAAO,CAACC,IAAI,CACtBmG,OAAO,CAAClJ,4EAAY,CAACiG,KAAK,EAAE,EAAE,CAAC,CAC/BiD,OAAO,CAAClJ,4EAAY,CAAC0G,UAAU,EAAE,EAAE,CAAC;MACvC,IAAI5D,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACiG,KAAK,CAAC,EAAE;QAC7C,IAAIsjB,GAAG,GAAG,IAAI,CAAC3jB,qBAAqB,CAACwqC,aAAa,CAACrtC,IAAI,CAAC,IAAI,EAAE;QAC9D8mB,MAAM,CAACW,MAAM,CAAC9X,GAAG,CAAC6W,GAAG,EAAExmB,IAAI,CAAC;OAC7B,MAAM,IAAID,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAAC0G,UAAU,CAAC,EAAE;QACzD,IAAI6iB,GAAG,GAAG,IAAI,CAAC3jB,qBAAqB,CAACwqC,aAAa,CAACrtC,IAAI,CAAC,IAAI,EAAE;QAC9D8mB,MAAM,CAACY,WAAW,CAAC/X,GAAG,CAAC6W,GAAG,EAAExmB,IAAI,CAAC;;IAErC,CAAC,CAAC;IAEJ,OAAO8mB,MAAM;EACf;;AAzMW6kB,0BAA0B;mBAA1BA,0BAA0B;AAAA;AAA1BA,0BAA0B;SAA1BA,0BAA0B;EAAArF,SAA1BqF,0BAA0B;EAAApF,YAFzB;AAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVmB;AAGc;AACW;AAEO;AAQhC;;;;;;;;;AAQjC,MAAOoH,0BAA0B;EAWrC9f,YACU7I,oBAAgD,EAChDniB,qBAA4C,EAC5Ck+B,aAAuC,EACvCvX,YAA0B,EAC1Byc,cAA8B,EAC9Bz5B,sBAA8C,EAC9C8rB,QAAqB;IANrB,yBAAoB,GAApBtT,oBAAoB;IACpB,0BAAqB,GAArBniB,qBAAqB;IACrB,kBAAa,GAAbk+B,aAAa;IACb,iBAAY,GAAZvX,YAAY;IACZ,mBAAc,GAAdyc,cAAc;IACd,2BAAsB,GAAtBz5B,sBAAsB;IACtB,aAAQ,GAAR8rB,QAAQ;IAfV,qBAAgB,GAAG,IAAI1T,4EAAU,EAAE;IAEnC,4BAAuB,GAAG,KAAK;IAEvC,oBAAe,GAAG,IAAIgW,kDAAe,CAAW,EAAE,CAAC;IACnD,yBAAoB,GAAG,IAAIA,kDAAe,CAAW,EAAE,CAAC;IAYtD,IAAI,CAAC0B,wBAAwB,GAAG,IAAI1B,kDAAe,CACjD,IAAI,CAAC5V,oBAAoB,CAACioB,yCAAyC,EAAE,CACtE;IAED,IAAI,CAACpQ,oBAAoB,CAAC/vB,IAAI,CAC5B,IAAI,CAACwvB,wBAAwB,CAAC52B,KAAK,CAACgiB,WAAW,CAChD;IACD,IAAI,CAACiV,eAAe,CAAC7vB,IAAI,CAAC,IAAI,CAACwvB,wBAAwB,CAAC52B,KAAK,CAAC+hB,MAAM,CAAC;IAErE5kB,qBAAqB,CAClB+qC,oBAAoB,EAAE,CACtBvqC,SAAS,EAAE,CACX3D,OAAO,CAAEm+B,QAAQ,IAAI;MACpB,IAAI,CAACgQ,oBAAoB,CAAChQ,QAAQ,CAAC;IACrC,CAAC,CAAC;IAEJkD,aAAa,CAAC+M,0BAA0B,CAACxU,SAAS,CAAExS,MAAM,IAAI;MAC5D,IAAI,CAACyX,mBAAmB,CAACzX,MAAM,CAAC;IAClC,CAAC,CAAC;IACF,MAAMinB,yBAAyB,GAC7B,IAAI,CAAC9H,cAAc,CAACiD,4BAA4B,EAAE;IACpD,IAAI6E,yBAAyB,EAAE;MAC7B,IAAI,CAACxP,mBAAmB,CAACwP,yBAAyB,EAAE,KAAK,CAAC;;IAE5D,MAAMC,qBAAqB,GAAG,IAAI,CAACjN,aAAa,CAACkN,wBAAwB,EAAE;IAC3E,IAAID,qBAAqB,EAAE;MACzB,IAAI,CAACzP,mBAAmB,CAACyP,qBAAqB,EAAE,KAAK,CAAC;;EAE1D;EAEAzP,mBAAmB,CACjB4N,YAAiC,EACjC/O,UAAU,GAAG,IAAI;IAEjB,MAAMmP,SAAS,GAAGJ,YAAY,CAAC1kB,MAAM,CAACpkB,SAAS,EAAE;IACjD,MAAMmpC,cAAc,GAAGL,YAAY,CAACzkB,WAAW,CAACrkB,SAAS,EAAE;IAE3DkpC,SAAS,CAAC7sC,OAAO,CAAEm+B,QAAQ,IAAI;MAC7B,IAAI,CAAC,IAAI,CAACqQ,gBAAgB,CAAC3nB,GAAG,CAACsX,QAAQ,CAAC,EAAE;QACxC,IAAI,CAACgQ,oBAAoB,CAAChQ,QAAQ,CAAC;;MAErC,MAAMsQ,kBAAkB,GAAG,IAAI,CAACxR,eAAe,CAACj3B,KAAK;MACrD,IAAI,CAACyoC,kBAAkB,CAACrsC,QAAQ,CAAC+7B,QAAQ,CAAC,EAAE;QAC1C,IAAI,CAACuQ,WAAW,CAACvQ,QAAQ,CAAC;;IAE9B,CAAC,CAAC;IACF2O,cAAc,CAAC9sC,OAAO,CAAEm+B,QAAQ,IAAI;MAClC,IAAI,CAAC,IAAI,CAACqQ,gBAAgB,CAAC3nB,GAAG,CAACsX,QAAQ,CAAC,EAAE;QACxC,IAAI,CAACgQ,oBAAoB,CAAChQ,QAAQ,CAAC;;MAErC,MAAMwQ,uBAAuB,GAAG,IAAI,CAACxR,oBAAoB,CAACn3B,KAAK;MAC/D,IAAI,CAAC2oC,uBAAuB,CAACvsC,QAAQ,CAAC+7B,QAAQ,CAAC,EAAE;QAC/C,IAAI,CAACyQ,gBAAgB,CAACzQ,QAAQ,CAAC;;IAEnC,CAAC,CAAC;IACF,IAAIT,UAAU,EAAE;MACd,IAAI,CAACA,UAAU,CAAC,IAAI,CAAC5wB,sBAAsB,CAAC6wB,YAAY,EAAE,EAAE,IAAI,CAAC;;EAErE;EAEA;EACAd,sBAAsB;IACpB,OAAO,IAAI,CAACD,wBAAwB;EACtC;EAEAgD,cAAc,CAACzB,QAAgB;IAC7B,OAAO,IAAI,CAACqQ,gBAAgB,CAACjwC,GAAG,CAAC4/B,QAAQ,CAAC;EAC5C;EAEAoB,WAAW,CAACpB,QAAgB;IAC1B,OACE,IAAI,CAACvB,wBAAwB,CAAC52B,KAAK,CAAC+hB,MAAM,CAACuH,MAAM,CAC9Czd,KAAa,IAAKA,KAAK,KAAKssB,QAAQ,CACtC,CAAC1uB,MAAM,GAAG,CAAC;EAEhB;EAEA+vB,gBAAgB,CAACrB,QAAgB;IAC/B,OACE,IAAI,CAACvB,wBAAwB,CAAC52B,KAAK,CAACgiB,WAAW,CAACsH,MAAM,CACnDtd,UAAkB,IAAKA,UAAU,KAAKmsB,QAAQ,CAChD,CAAC1uB,MAAM,GAAG,CAAC;EAEhB;EAEAkwB,UAAU,CAAC/O,UAAkB;IAC3B,IAAI,CAAC9G,YAAY,CAACoiB,aAAa,CAACtb,UAAU,CAAC;IAC3C,MAAMie,aAAa,GAAG,IAAI,CAACjS,wBAAwB,CAAC52B,KAAK;IACzD6oC,aAAa,CAACjtC,IAAI,GAAGgvB,UAAU;IAC/B,IAAI,CAACgM,wBAAwB,CAACxvB,IAAI,CAACyhC,aAAa,CAAC;EACnD;EAEA;EACAnO,eAAe,CAACvC,QAAgB,EAAE/mB,OAAgB;IAChD,IAAIA,OAAO,EAAE;MACX,IAAI,CAAC03B,aAAa,CAAC3Q,QAAQ,CAAC;KAC7B,MAAM;MACL,IAAI,CAAC4Q,kBAAkB,CAAC5Q,QAAQ,CAAC;;IAEnC,IAAI,CAAC6Q,UAAU,CAAC,KAAK,EAAE,KAAK,EAAE7Q,QAAQ,CAAC;EACzC;EAEAyC,UAAU,CAACxpB,OAAgB,EAAEvF,KAAa;IACxC,IAAIuF,OAAO,EAAE;MACX,IAAI,CAAC43B,UAAU,CAAC,IAAI,EAAE,KAAK,EAAEn9B,KAAK,CAAC;MACnC,IAAI,CAAC68B,WAAW,CAAC78B,KAAK,CAAC;MACvB,IAAI,CAACk9B,kBAAkB,CAACl9B,KAAK,CAAC;KAC/B,MAAM;MACL,IAAI,CAACi9B,aAAa,CAACj9B,KAAK,CAAC;MACzB,IAAI,CAACm9B,UAAU,CAAC,KAAK,EAAE,KAAK,EAAEn9B,KAAK,CAAC;;EAExC;EAEAivB,eAAe,CAACP,YAAqB,EAAE2E,UAAkB;IACvD,IAAI3E,YAAY,EAAE;MAChB,IAAI,CAACyO,UAAU,CAAC,KAAK,EAAE,IAAI,EAAE9J,UAAU,CAAC;MACxC,IAAI,CAAC0J,gBAAgB,CAAC1J,UAAU,CAAC;MACjC,IAAI,CAAC4J,aAAa,CAAC5J,UAAU,CAAC;KAC/B,MAAM;MACL,IAAI,CAAC6J,kBAAkB,CAAC7J,UAAU,CAAC;MACnC,IAAI,CAAC8J,UAAU,CAAC,KAAK,EAAE,KAAK,EAAE9J,UAAU,CAAC;;EAE7C;EAEAwJ,WAAW,CAAC78B,KAAa;IACvB,MAAM7L,KAAK,GAAG,IAAI,CAAC42B,wBAAwB,CAAC52B,KAAK;IACjD,IAAI,CAACA,KAAK,CAAC+hB,MAAM,CAAC3lB,QAAQ,CAACyP,KAAK,CAAC,EAAE;MACjC7L,KAAK,CAAC+hB,MAAM,CAAC1pB,IAAI,CAACwT,KAAK,CAAC;MACxB,IAAI,CAAC+qB,wBAAwB,CAACxvB,IAAI,CAACpH,KAAK,CAAC;MACzC,IAAI,CAACipC,kBAAkB,EAAE;;EAE7B;EAEAL,gBAAgB,CAAC58B,UAAkB;IACjC,MAAMhM,KAAK,GAAG,IAAI,CAAC42B,wBAAwB,CAAC52B,KAAK;IACjD,IAAI,CAACA,KAAK,CAACgiB,WAAW,CAAC5lB,QAAQ,CAAC4P,UAAU,CAAC,EAAE;MAC3ChM,KAAK,CAACgiB,WAAW,CAAC3pB,IAAI,CAAC2T,UAAU,CAAC;MAClC,IAAI,CAAC4qB,wBAAwB,CAACxvB,IAAI,CAACpH,KAAK,CAAC;MACzC,IAAI,CAACkpC,uBAAuB,EAAE;;EAElC;EAEAJ,aAAa,CAACj9B,KAAa;IACzB,IAAI,IAAI,CAAC+qB,wBAAwB,EAAE;MACjC,IAAI,CAACA,wBAAwB,CAACxvB,IAAI,CAAC;QACjCxL,IAAI,EAAE,IAAI,CAACg7B,wBAAwB,CAAC52B,KAAK,CAACpE,IAAI;QAC9CmmB,MAAM,EAAE,IAAI,CAAC6U,wBAAwB,CAAC52B,KAAK,CAAC+hB,MAAM,CAACuH,MAAM,CACtDI,CAAS,IAAK,CAACA,CAAC,CAACttB,QAAQ,CAACyP,KAAK,CAAC,CAClC;QACDmW,WAAW,EAAE,IAAI,CAAC4U,wBAAwB,CAAC52B,KAAK,CAACgiB;OAClD,CAAC;;IAEJ,IAAI,CAACinB,kBAAkB,EAAE;EAC3B;EAEAF,kBAAkB,CAAC7J,UAAkB;IACnC,IAAI,IAAI,CAACtI,wBAAwB,EAAE;MACjC,IAAI,CAACA,wBAAwB,CAACxvB,IAAI,CAAC;QACjCxL,IAAI,EAAE,IAAI,CAACg7B,wBAAwB,CAAC52B,KAAK,CAACpE,IAAI;QAC9CmmB,MAAM,EAAE,IAAI,CAAC6U,wBAAwB,CAAC52B,KAAK,CAAC+hB,MAAM;QAClDC,WAAW,EAAE,IAAI,CAAC4U,wBAAwB,CAAC52B,KAAK,CAACgiB,WAAW,CAACsH,MAAM,CAChE2V,CAAS,IAAK,CAACA,CAAC,CAAC7iC,QAAQ,CAAC8iC,UAAU,CAAC;OAEzC,CAAC;;IAEJ,IAAI,CAACgK,uBAAuB,EAAE;EAChC;EAEA7O,qBAAqB,CAACH,UAAoB;IACxC,MAAMl6B,KAAK,GAAG,IAAI,CAAC42B,wBAAwB,CAAC52B,KAAK;IACjDA,KAAK,CAACgiB,WAAW,GAAGkY,UAAU;IAC9B,IAAI,CAACtD,wBAAwB,CAACxvB,IAAI,CAACpH,KAAK,CAAC;IACzC,IAAI,CAACkpC,uBAAuB,EAAE;EAChC;EAEA9O,iBAAiB,CAACF,UAAoB;IACpC,MAAMl6B,KAAK,GAAG,IAAI,CAAC42B,wBAAwB,CAAC52B,KAAK;IACjDA,KAAK,CAAC+hB,MAAM,GAAGmY,UAAU;IACzB,IAAI,CAACtD,wBAAwB,CAACxvB,IAAI,CAACpH,KAAK,CAAC;IACzC,IAAI,CAACipC,kBAAkB,EAAE;EAC3B;EAEQA,kBAAkB;IACxB,IAAI,CAAChS,eAAe,CAAC7vB,IAAI,CAAC,IAAI,CAACwvB,wBAAwB,CAAC52B,KAAK,CAAC+hB,MAAM,CAAC;IACrE,IAAI,CAAConB,uBAAuB,GAAG,IAAI;EACrC;EAEQD,uBAAuB;IAC7B,IAAI,CAAC/R,oBAAoB,CAAC/vB,IAAI,CAC5B,IAAI,CAACwvB,wBAAwB,CAAC52B,KAAK,CAACgiB,WAAW,CAChD;IACD,IAAI,CAACmnB,uBAAuB,GAAG,IAAI;EACrC;EAEA;EACA3R,WAAW;IACT,MAAM4R,aAAa,GACjB,IAAI,CAAC9pB,oBAAoB,CAACkoB,0CAA0C,EAAE;IAExE,IAAI,CAACrQ,oBAAoB,CAACn3B,KAAK,CAAChG,OAAO,CAAEqvC,cAAc,IAAI;MACzD,IAAI,CAACD,aAAa,CAACpnB,WAAW,CAACnB,GAAG,CAACwoB,cAAc,CAAC,EAAE;QAClD,IAAI,CAACN,kBAAkB,CAACM,cAAc,CAAC;;IAE3C,CAAC,CAAC;IACF,IAAI,CAACpS,eAAe,CAACj3B,KAAK,CAAChG,OAAO,CAAEsvC,SAAS,IAAI;MAC/C,IAAI,CAACF,aAAa,CAACrnB,MAAM,CAAClB,GAAG,CAACyoB,SAAS,CAAC,EAAE;QACxC,IAAI,CAACR,aAAa,CAACQ,SAAS,CAAC;;IAEjC,CAAC,CAAC;IAEF,IAAI,CAAC1S,wBAAwB,CAACxvB,IAAI,CAAC;MACjCxL,IAAI,EAAEwtC,aAAa,CAACxtC,IAAI;MACxBmmB,MAAM,EAAEqnB,aAAa,CAACrnB,MAAM,CAACpkB,SAAS,EAAE;MACxCqkB,WAAW,EAAEonB,aAAa,CAACpnB,WAAW,CAACrkB,SAAS;KACpB,CAAC;IAE/B,IAAI,CAAC4rC,8BAA8B,EAAE;EACvC;EAEAhyB,MAAM;IACJ,IAAI,CAACqf,wBAAwB,CAACxvB,IAAI,CAChC,IAAI,CAACkY,oBAAoB,CAACioB,yCAAyC,EAAE,CACtE;IACD,IAAI,CAACgC,8BAA8B,EAAE;IACrC,IAAI,CAACC,2BAA2B,EAAE;EACpC;EAEQA,2BAA2B;IACjC,IAAI,CAACP,kBAAkB,EAAE;IACzB,IAAI,CAACC,uBAAuB,EAAE;EAChC;EAEA;EACAxR,UAAU,CAAC+R,SAAuB,EAAEC,QAAQ,GAAG,KAAK;IAClD,MAAMC,aAAa,GAAa,EAAE;IAClC,MAAMC,kBAAkB,GAAa,EAAE;IACvC,IAAI,IAAI,CAACT,uBAAuB,EAAE;MAChC,MAAMN,aAAa,GAAG,IAAI,CAACgB,yBAAyB,EAAE;MAEtD,MAAMC,mBAAmB,GAAGjB,aAAa,CAAC9mB,MAAM,CAACpkB,SAAS,EAAE;MAC5D8rC,SAAS,EAAE1nB,MAAM,CAAC/nB,OAAO,CAAE6R,KAAK,IAAI;QAClC,IACE,CAACi+B,mBAAmB,EAAE1tC,QAAQ,CAACyP,KAAK,CAAC,IACrC,CAAC89B,aAAa,CAACvtC,QAAQ,CAACyP,KAAK,CAAC,EAC9B;UACA89B,aAAa,CAACtxC,IAAI,CAACwT,KAAK,CAAC;;MAE7B,CAAC,CAAC;MACF,MAAMk+B,wBAAwB,GAAGlB,aAAa,CAAC7mB,WAAW,CAACrkB,SAAS,EAAE;MACtE8rC,SAAS,EAAEO,WAAW,CAAChwC,OAAO,CAAEklC,UAAU,IAAI;QAC5C,IACE,CAAC6K,wBAAwB,EAAE3tC,QAAQ,CAAC8iC,UAAU,CAAC,IAC/C,CAAC0K,kBAAkB,CAACxtC,QAAQ,CAAC8iC,UAAU,CAAC,EACxC;UACA0K,kBAAkB,CAACvxC,IAAI,CAAC6mC,UAAU,CAAC;;MAEvC,CAAC,CAAC;MAEF,IAAI,CAACyK,aAAa,CAAClgC,MAAM,IAAI,CAACmgC,kBAAkB,CAACngC,MAAM,EAAE;QACvD,IAAI,CAACwgC,yBAAyB,GAAGpB,aAAa;QAE9C,IAAI,CAACqB,WAAW,CAACrB,aAAa,CAAC;QAE/B,IAAI,CAACtI,cAAc,CAACmD,4BAA4B,CAC9C,IAAI,CAACuG,yBAAyB,CAC/B;QACD,IAAI,CAACrX,QAAQ,CAAC9wB,IAAI,CAChB4nC,QAAQ,GACJ,qCAAqC,GACrC,iCAAiC,EACrCn3B,SAAS,EACT;UACE2gB,QAAQ,EAAEvK,uEAAiB;UAC3BwK,UAAU,EAAEvK,sEAAgBA;SAC7B,CACF;;KAEJ,MAAM;MACL,IAAI,CAACgK,QAAQ,CAAC9wB,IAAI,CAChB4nC,QAAQ,GACJ,iCAAiC,GACjC,8BAA8B,EAClCn3B,SAAS,EACT;QACE2gB,QAAQ,EAAEvK,uEAAiB;QAC3BwK,UAAU,EAAErK,mEAAaA;OAC1B,CACF;;IAEH,IAAI6gB,aAAa,CAAClgC,MAAM,IAAImgC,kBAAkB,CAACngC,MAAM,EAAE;MACrD,IAAIkgC,aAAa,CAAClgC,MAAM,EAAE;QACxB,MAAMsY,MAAM,GAAG4nB,aAAa,CAACQ,IAAI,CAAC,IAAI,CAAC;QACvC,IAAI,CAACvX,QAAQ,CAAC9wB,IAAI,CAChB,2EAA2EigB,MAAM,EAAE,EACnFxP,SAAS,EACT;UACE2gB,QAAQ,EAAEvK,uEAAiB,GAAG,CAAC;UAC/BwK,UAAU,EAAErK,mEAAaA;SAC1B,CACF;;MAEH,IAAI8gB,kBAAkB,CAACngC,MAAM,EAAE;QAC7B,MAAMugC,WAAW,GAAGJ,kBAAkB,CAACO,IAAI,CAAC,IAAI,CAAC;QACjD,IAAI,CAACvX,QAAQ,CAAC9wB,IAAI,CAChB,gFAAgFkoC,WAAW,EAAE,EAC7Fz3B,SAAS,EACT;UACE2gB,QAAQ,EAAEvK,uEAAiB,GAAG,CAAC;UAC/BwK,UAAU,EAAErK,mEAAaA;SAC1B,CACF;;;EAGP;EAEA8O,YAAY;IACV,IAAI,CAACtY,oBAAoB,CAAC6mB,mBAAmB,EAAE;EACjD;EAEAtG,6BAA6B;IAC3B,MAAMuK,IAAI,GAAG,IAAI,CAACH,yBAAyB;IAC3C,IAAI,CAACA,yBAAyB,GAAG13B,SAAS;IAE1C,OAAO63B,IAAI;EACb;EAEQP,yBAAyB;IAC/B,MAAM9nB,MAAM,GAAG,IAAI7C,4EAAU,EAAE;IAC/B,MAAM8C,WAAW,GAAG,IAAI9C,4EAAU,EAAE;IAEpC,IAAI,CAAC0X,wBAAwB,CAAC52B,KAAK,CAAC+hB,MAAM,CAAC/nB,OAAO,CAAEM,IAAY,IAAI;MAClEynB,MAAM,CAAC9X,GAAG,CAAC,IAAI,CAAC9M,qBAAqB,CAACwqC,aAAa,CAACrtC,IAAI,CAAC,EAAEA,IAAI,CAAC;IAClE,CAAC,CAAC;IACF,IAAI,CAACs8B,wBAAwB,CAAC52B,KAAK,CAACgiB,WAAW,CAAChoB,OAAO,CAAEM,IAAY,IAAI;MACvE0nB,WAAW,CAAC/X,GAAG,CAAC,IAAI,CAAC9M,qBAAqB,CAACwqC,aAAa,CAACrtC,IAAI,CAAC,EAAEA,IAAI,CAAC;IACvE,CAAC,CAAC;IAEF,OAAO;MACLsB,IAAI,EAAE,IAAI,CAACg7B,wBAAwB,CAAC52B,KAAK,CAACpE,IAAI,IAAI,EAAE;MACpDmmB,MAAM;MACNC;KACD;EACH;EAEA;EACAuW,UAAU,CAACJ,QAAgB;IACzB,MAAMkS,QAAQ,GAAG,IAAInrB,4EAAU,EAAE;IACjCmrB,QAAQ,CAACpgC,GAAG,CAAC,IAAI,CAACqgC,aAAa,CAACnS,QAAQ,CAAC,EAAEA,QAAQ,CAAC;IACpD,IAAI,CAACh7B,qBAAqB,CAACotC,aAAa,CAACF,QAAQ,CAAC;IAClD,IAAI,CAAClC,oBAAoB,CAAChQ,QAAQ,CAAC;EACrC;EAEQgQ,oBAAoB,CAAChQ,QAAgB;IAC3C,IAAI,CAACqQ,gBAAgB,CAACv+B,GAAG,CACvB,IAAIirB,kDAAe,CAAC;MAClBt5B,IAAI,EAAEu8B,QAAQ;MACd5B,GAAG,EAAE,IAAI,CAAC+T,aAAa,CAACnS,QAAQ,CAAC;MACjC/mB,OAAO,EAAE,IAAI,CAACmoB,WAAW,CAACpB,QAAQ,CAAC;MACnC9mB,YAAY,EAAE,IAAI,CAACmoB,gBAAgB,CAACrB,QAAQ;KAC7C,CAAC,EACFA,QAAQ,CACT;EACH;EAEQ6Q,UAAU,CAChB53B,OAAgB,EAChBmpB,YAAqB,EACrBpC,QAAgB;IAEhB,MAAMqS,oBAAoB,GAAG,IAAI,CAAC5Q,cAAc,CAACzB,QAAQ,CAAC;IAC1D,MAAMj2B,IAAI,GAAGsoC,oBAAoB,CAACxqC,KAAK;IACvCkC,IAAI,CAACkP,OAAO,GAAGA,OAAO;IACtBlP,IAAI,CAACmP,YAAY,GAAGkpB,YAAY;IAEhCiQ,oBAAoB,CAACpjC,IAAI,CAAClF,IAAI,CAAC;EACjC;EAEQqnC,8BAA8B;IACpC,MAAMkB,wBAAwB,GAAG,IAAI,CAAC7T,wBAAwB,CAAC52B,KAAK;IACpE,IAAI,CAACwoC,gBAAgB,CAAC7qC,SAAS,EAAE,CAAC3D,OAAO,CAAEm+B,QAAQ,IAAI;MACrD,IAAIsS,wBAAwB,CAAC1oB,MAAM,CAAC3lB,QAAQ,CAAC+7B,QAAQ,CAAC,EAAE;QACtD,IAAI,CAAC6Q,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE7Q,QAAQ,CAAC;OACvC,MAAM,IAAIsS,wBAAwB,CAACzoB,WAAW,CAAC5lB,QAAQ,CAAC+7B,QAAQ,CAAC,EAAE;QAClE,IAAI,CAAC6Q,UAAU,CAAC,KAAK,EAAE,IAAI,EAAE7Q,QAAQ,CAAC;OACvC,MAAM;QACL,IAAI,CAAC6Q,UAAU,CAAC,KAAK,EAAE,KAAK,EAAE7Q,QAAQ,CAAC;;IAE3C,CAAC,CAAC;EACJ;EAEQmS,aAAa,CAAC1uC,IAAY;IAChC,IAAIu8B,QAAgB;IACpB,IAAIv8B,IAAI,CAACQ,QAAQ,CAAC7E,qEAAY,CAAC4b,WAAW,CAAC,EAAE;MAC3CglB,QAAQ,GAAGj7B,8DAAe,CAACtB,IAAI,CAAC;KACjC,MAAM;MACLu8B,QAAQ,GAAGv8B,IAAI;;IAEjB,MAAM8uC,MAAM,GAAG,IAAI,CAACvtC,qBAAqB,CAACwqC,aAAa,CAACxP,QAAQ,CAAC;IAEjE,IAAI,CAACuS,MAAM,EAAE;MACX,OAAO,EAAE;;IAGX,IAAIA,MAAM,CAACj/B,UAAU,CAAC,MAAM,CAAC,EAAE;MAC7B,OAAOi/B,MAAM;KACd,MAAM;MACL,OAAO,qBAAqB,GAAGA,MAAM;;EAEzC;EAEQR,WAAW,CAACrB,aAAkC;IACpD,IAAI,CAACL,gBAAgB,CAClB7qC,SAAS,EAAE,CACX3D,OAAO,CAAEiT,IAAI,IAAK,IAAI,CAACytB,eAAe,CAACztB,IAAI,EAAE,IAAI,CAACssB,WAAW,CAACtsB,IAAI,CAAC,CAAC,CAAC;IACxE47B,aAAa,CAAC9mB,MAAM,CACjBpkB,SAAS,EAAE,CACX3D,OAAO,CAAE6R,KAAK,IAAK,IAAI,CAAC+uB,UAAU,CAAC,IAAI,EAAE/uB,KAAK,CAAC,CAAC;IACnDg9B,aAAa,CAAC7mB,WAAW,CACtBrkB,SAAS,EAAE,CACX3D,OAAO,CAAEgS,UAAU,IAAK,IAAI,CAAC8uB,eAAe,CAAC,IAAI,EAAE9uB,UAAU,CAAC,CAAC;EACpE;;AAxbWi8B,0BAA0B;mBAA1BA,0BAA0B;AAAA;AAA1BA,0BAA0B;SAA1BA,0BAA0B;EAAArH,SAA1BqH,0BAA0B;EAAApH,YAFzB;AAAM;;;;;;;;;;;;;;;;;;;;;;ACxBqD;AACP;AACX;AAID;AAIL;AAIQ;;AAElD,MAAM8J,WAAW,GAAG,oBAAoB;AAKzC,MAAOC,qBAAqB;EAWhCziB;IAVQ,wBAAmB,GAAG,IAAIjJ,mFAAU,EAAE;IACtC,yBAAoB,GAAG,IAAIA,mFAAU,EAAE;IAEvC,sBAAiB,GAAG,IAAIA,mFAAU,EAAE;IACpC,0BAAqB,GAAG,IAAIA,mFAAU,EAAE;IAO9C,IAAI,CAACiL,iBAAiB,CAACf,OAAO,CAAC8C,kFAAQ,CAAC;IACxC,IAAI,CAAC2e,UAAU,GAAG,IAAI3gB,sFAAiB,CAAC,IAAI,CAACC,iBAAiB,CAAC;EACjE;EAEArI,oBAAoB,CAACC,MAAgB,EAAEC,WAAqB;IAC1D,IAAI,CAACD,MAAM,IAAIA,MAAM,CAACtY,MAAM,IAAI,CAAC,EAAE;MACjCsY,MAAM,GAAGsI,gFAAW,CAACtI,MAAM;;IAE7B,IAAI,CAACC,WAAW,IAAIA,WAAW,CAACvY,MAAM,IAAI,CAAC,EAAE;MAC3CuY,WAAW,GAAGqI,gFAAW,CAACrI,WAAW;;IAGvC,MAAM8oB,QAAQ,GAAG,IAAI5rB,mFAAU,EAAE;IACjC4rB,QAAQ,CAAC1hB,OAAO,CAAC8C,kFAAQ,CAAC;IAC1B4e,QAAQ,CAACpqB,UAAU,CAAC,IAAI,CAACE,yBAAyB,EAAE,CAAC;IAErD,IAAI,CAACmqB,cAAc,CACjBhpB,MAAM,EACN+oB,QAAQ,EACR,IAAI,CAACE,mBAAmB,EACxBzzC,4EAAY,CAACiG,KAAK,CACnB;IACD,IAAI,CAACutC,cAAc,CACjB/oB,WAAW,EACX8oB,QAAQ,EACR,IAAI,CAACG,oBAAoB,EACzB1zC,4EAAY,CAAC0G,UAAU,CACxB;EACH;EAEQ8sC,cAAc,CACpB3oB,IAAc,EACd0oB,QAAoB,EACpBI,UAAsB,EACtBC,UAAwB;IAExBD,UAAU,CAAC7hB,KAAK,EAAE;IAClB,KAAK,MAAMrlB,GAAG,IAAIoe,IAAI,EAAE;MACtB,MAAMxmB,IAAI,GAAGuvC,UAAU,GAAGnnC,GAAG;MAC7BknC,UAAU,CAACjhC,GAAG,CAAC6gC,QAAQ,CAACvyC,GAAG,CAACyL,GAAG,CAAC,EAAEpI,IAAI,CAAC;;IAGzCsvC,UAAU,CAACvtC,SAAS,EAAE,CAAC3D,OAAO,CAAE2C,KAAK,IAAI;MACvC,MAAMf,IAAI,GAAGsB,qEAAe,CAACP,KAAK,CAAC;MACnC,IAAI,CAAC27B,mBAAmB,CACtB37B,KAAK,EACLguC,WAAW,GAAGlU,kEAAgB,CAAC76B,IAAI,CAACkC,WAAW,EAAE,CAAC,CACnD;IACH,CAAC,CAAC;EACJ;EAEAujB,kCAAkC;IAChC,IAAI,IAAI,CAAC+pB,mBAAmB,EAAE;MAC5B,OAAO,IAAI,CAACP,UAAU,CAACngB,gBAAgB,CAAC,IAAI,CAAC0gB,mBAAmB,CAAC;;IAEnE,OAAO,IAAI,CAACP,UAAU,CAACzgB,cAAc,EAAE;EACzC;EAEAihB,mBAAmB,CAAC/wC,IAAkB,EAAEd,QAA0B;IAChE,IAAI8xC,UAAsB;IAC1B,IAAIhxC,IAAI,KAAK/C,4EAAY,CAACiG,KAAK,EAAE;MAC/B8tC,UAAU,GAAG,IAAI,CAACN,mBAAmB;KACtC,MAAM,IAAI1wC,IAAI,KAAK/C,4EAAY,CAAC0G,UAAU,EAAE;MAC3CqtC,UAAU,GAAG,IAAI,CAACL,oBAAoB;;IAGxC,IAAIM,KAAK,GAAG,IAAI;IAChB,IAAI/xC,QAAQ,EAAE;MACZA,QAAQ,CAACQ,OAAO,CAAEK,OAAO,IAAI;QAC3B,IAAI,CAACixC,UAAU,CAACzqB,GAAG,CAACxmB,OAAO,CAACC,IAAI,CAAC,EAAE;UACjCixC,KAAK,GAAG,KAAK;;MAEjB,CAAC,CAAC;KACH,MAAM;MACL,OAAO,KAAK;;IAEd,OAAOA,KAAK;EACd;EAEA;EAEAvE,+BAA+B,CAC7BwE,cAA4B,EAC5BC,SAAmB;IAEnB,IAAIH,UAAsB;IAC1B,IAAIE,cAAc,KAAKj0C,4EAAY,CAACiG,KAAK,EAAE;MACzC8tC,UAAU,GAAG,IAAI,CAACN,mBAAmB;KACtC,MAAM,IAAIQ,cAAc,KAAKj0C,4EAAY,CAAC0G,UAAU,EAAE;MACrDqtC,UAAU,GAAG,IAAI,CAACL,oBAAoB;;IAGxC,MAAMH,QAAQ,GAAG,IAAI5rB,mFAAU,EAAE;IACjC4rB,QAAQ,CAAC1hB,OAAO,CAAC8C,kFAAQ,CAAC;IAC1B4e,QAAQ,CAACpqB,UAAU,CAACuL,uFAAa,CAAC;IAElCwf,SAAS,CAACzxC,OAAO,CAAEM,IAAI,IAAI;MACzB,IAAI,CAACgxC,UAAU,CAACzqB,GAAG,CAACvmB,IAAI,CAAC,EAAE;QACzB,MAAMsB,IAAI,GAAGsB,qEAAe,CAAC5C,IAAI,CAAC;QAClC,MAAMwmB,GAAG,GAAGgqB,QAAQ,CAACvyC,GAAG,CAACqD,IAAI,CAAC;QAC9B,IAAIklB,GAAG,EAAE;UACP,IAAI,CAAC4qB,mBAAmB,CAACF,cAAc,EAAElxC,IAAI,EAAEwmB,GAAG,CAAC;UACnD,IAAI,CAACwX,mBAAmB,CACtBh+B,IAAI,EACJm8B,kEAAgB,CAACkU,WAAW,GAAG/uC,IAAI,CAACkC,WAAW,EAAE,CAAC,CACnD;;;IAGP,CAAC,CAAC;EACJ;EAEA;EACAw6B,mBAAmB,CAAC18B,IAAY,EAAEklB,GAAW;IAC3C,IAAI,CAAC6qB,qBAAqB,CAAC1nC,GAAG,CAACrI,IAAI,EAAEklB,GAAG,CAAC;EAC3C;EAEA8qB,wBAAwB,CACtBnK,UAA4B,EAC5BE,eAAiC;IAEjC,IAAI,CAAC,IAAI,CAAC0J,mBAAmB,CAAC9zC,4EAAY,CAACiG,KAAK,EAAEikC,UAAU,CAAC,EAAE;MAC7D,IAAI,CAACuF,+BAA+B,CAClCzvC,4EAAY,CAACiG,KAAK,EAClBikC,UAAU,CAAC1xB,GAAG,CAAE1V,OAAO,IAAKA,OAAO,CAACC,IAAI,CAAC,CAC1C;;IAEH,IAAI,CAAC,IAAI,CAAC+wC,mBAAmB,CAAC9zC,4EAAY,CAAC0G,UAAU,EAAE0jC,eAAe,CAAC,EAAE;MACvE,IAAI,CAACqF,+BAA+B,CAClCzvC,4EAAY,CAAC0G,UAAU,EACvB0jC,eAAe,CAAC5xB,GAAG,CAAE1V,OAAO,IAAKA,OAAO,CAACC,IAAI,CAAC,CAC/C;;EAEL;EAEAoxC,mBAAmB,CAACpxC,IAAkB,EAAEsB,IAAY,EAAEklB,GAAW;IAC/D,IAAI,CAACllB,IAAI,CAACQ,QAAQ,CAAC9B,IAAI,CAAC,EAAE;MACxBsB,IAAI,GAAGtB,IAAI,GAAGsB,IAAI;;IAGpB,IAAI0vC,UAAU,GAAG,IAAIpsB,mFAAU,EAAE;IACjC,IAAI5kB,IAAI,KAAK/C,4EAAY,CAACiG,KAAK,EAAE;MAC/B8tC,UAAU,GAAG,IAAI,CAACN,mBAAmB;KACtC,MAAM,IAAI1wC,IAAI,KAAK/C,4EAAY,CAAC0G,UAAU,EAAE;MAC3CqtC,UAAU,GAAG,IAAI,CAACL,oBAAoB;;IAExCK,UAAU,CAACrnC,GAAG,CAACrI,IAAI,EAAEklB,GAAG,CAAC;EAC3B;EAEA8gB,oBAAoB,CAClB7f,MAAwB,EACxBC,WAA6B,EAC7BZ,MAA2B;IAE3B,MAAM5nB,QAAQ,GAAqB,EAAE;IAErCuoB,MAAM,CAAC/nB,OAAO,CAAE0vB,CAAC,IAAKlwB,QAAQ,CAACnB,IAAI,CAACqxB,CAAC,CAAC,CAAC;IACvC1H,WAAW,CAAChoB,OAAO,CAAEilC,CAAC,IAAKzlC,QAAQ,CAACnB,IAAI,CAAC4mC,CAAC,CAAC,CAAC;IAE5C,MAAM3e,WAAW,GAAG,IAAIpB,mFAAU,EAAE;IAEpC,MAAM8K,UAAU,GAAG,IAAI9K,mFAAU,EAAE;IACnC,MAAM+K,eAAe,GAAG,IAAI/K,mFAAU,EAAE;IACxCkC,MAAM,CAACW,MAAM,CAACpkB,SAAS,EAAE,CAAC3D,OAAO,CAAEgK,GAAG,IAAI;MACxCgmB,UAAU,CAAC/f,GAAG,CAACmX,MAAM,CAACW,MAAM,CAACxpB,GAAG,CAACyL,GAAG,CAAC,EAAEA,GAAG,CAAC;IAC7C,CAAC,CAAC;IACFod,MAAM,CAACY,WAAW,CAACrkB,SAAS,EAAE,CAAC3D,OAAO,CAAEgK,GAAG,IAAI;MAC7CimB,eAAe,CAAChgB,GAAG,CAACmX,MAAM,CAACY,WAAW,CAACzpB,GAAG,CAACyL,GAAG,CAAC,EAAEA,GAAG,CAAC;IACvD,CAAC,CAAC;IAEF,IAAI,CAAC6nC,gCAAgC,CAAC7hB,UAAU,EAAE1J,WAAW,CAAC;IAC9D,IAAI,CAACurB,gCAAgC,CAAC5hB,eAAe,EAAE3J,WAAW,CAAC;IAEnE9mB,QAAQ,CAACQ,OAAO,CAAEK,OAAO,IAAI;MAC3B,MAAMuB,IAAI,GAAG66B,kEAAgB,CAC3Bp8B,OAAO,CAACC,IAAI,CACTmG,OAAO,CAAClJ,4EAAY,CAACiG,KAAK,EAAE,EAAE,CAAC,CAC/BiD,OAAO,CAAClJ,4EAAY,CAAC0G,UAAU,EAAE,EAAE,CAAC,CACxC;MACD,IACE,CAAC5D,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACiG,KAAK,CAAC,IACxCnD,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAAC0G,UAAU,CAAC,KAChD,CAAC,IAAI,CAAC64B,iBAAiB,EAAE,CAACjW,GAAG,CAACjlB,IAAI,CAAC,EACnC;QACA,IAAI,CAAC08B,mBAAmB,CACtBqS,WAAW,GAAG/uC,IAAI,CAACkC,WAAW,EAAE,EAChCzD,OAAO,CAACC,IAAI,CACb;;IAEL,CAAC,CAAC;IAEF,IAAI,CAACwxC,uBAAuB,CAACxrB,WAAW,CAAC;IACzC,IAAI,CAACsrB,wBAAwB,CAAC7pB,MAAM,EAAEC,WAAW,CAAC;EACpD;EAEQ6pB,gCAAgC,CACtCE,iBAA6B,EAC7BzrB,WAAuB;IAEvByrB,iBAAiB,CAACpuC,SAAS,EAAE,CAAC3D,OAAO,CAAE4B,IAAI,IAAI;MAC7C,MAAMowC,aAAa,GAAGvV,kEAAgB,CAAC76B,IAAI,CAAC;MAC5C,IAAI,CAAC,IAAI,CAACk7B,iBAAiB,EAAE,CAACjW,GAAG,CAACmrB,aAAa,CAAC,EAAE;QAChD1rB,WAAW,CAACrW,GAAG,CAAC8hC,iBAAiB,CAACxzC,GAAG,CAACqD,IAAI,CAAC,EAAEowC,aAAa,CAAC;;IAE/D,CAAC,CAAC;EACJ;EAEA;EAEAF,uBAAuB,CAACxrB,WAAuB;IAC7CA,WAAW,CAAC3iB,SAAS,EAAE,CAAC3D,OAAO,CAAEgK,GAAG,IAAI;MACtC,MAAMioC,MAAM,GAAG3rB,WAAW,CAAC/nB,GAAG,CAACyL,GAAG,CAAC;MACnC,IAAI,CAACq0B,sBAAsB,CAAC4T,MAAM,CAACnrB,GAAG,EAAE9c,GAAG,CAAC;IAC9C,CAAC,CAAC;IACF,IAAI,CAACumC,aAAa,CAACjqB,WAAW,CAAC;EACjC;EAEA+X,sBAAsB,CAAC6T,KAAa,EAAEtwC,IAAY;IAChDqwB,uFAAa,CAAChoB,GAAG,CAACrI,IAAI,EAAEswC,KAAK,CAAC;EAChC;EAEA3B,aAAa,CAACjqB,WAAuB;IACnC,MAAMC,OAAO,GAAG7gB,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC;IACnD2gB,WAAW,CAAC3iB,SAAS,EAAE,CAAC3D,OAAO,CAAEgK,GAAG,IAAI;MACtC,MAAM8c,GAAG,GAAGR,WAAW,CAAC/nB,GAAG,CAACyL,GAAG,CAAC;MAChC,MAAM+c,SAAS,GACb,GAAG,GACH4pB,WAAW,GACXlU,kEAAgB,CAACzyB,GAAG,CAAClG,WAAW,EAAE,CAAC,GACnC,kDAAkD,GAClD,IAAI,CAACkjB,YAAY,CAACF,GAAG,CAAC,GACtB,mBAAmB;MACrB;MACAP,OAAO,EAAEU,KAAK,EAAEC,UAAU,CAACH,SAAS,EAAER,OAAO,CAACU,KAAK,CAACE,QAAQ,CAAC1X,MAAM,CAAC;IACtE,CAAC,CAAC;EACJ;EAEQuX,YAAY,CAACF,GAAW;IAC9B,OACE,0KAA0K,GAC1KA,GAAG,GACH,WAAW;EAEf;EAEA;EAEAgW,iBAAiB;IACf,MAAMqV,cAAc,GAAG,IAAIjtB,mFAAU,EAAE;IACvCitB,cAAc,CAACzrB,UAAU,CAAC,IAAI,CAACyJ,iBAAiB,CAAC;IACjDgiB,cAAc,CAACzrB,UAAU,CAAC,IAAI,CAACE,yBAAyB,EAAE,CAAC;IAC3D,OAAOurB,cAAc;EACvB;EAEAvrB,yBAAyB;IACvB,MAAMwrB,YAAY,GAAG,IAAIltB,mFAAU,EAAE;IACrC+M,uFAAa,CAACtuB,SAAS,EAAE,CAAC3D,OAAO,CAAEgK,GAAG,IAAI;MACxC,IAAI,CAAC,IAAI,CAACmmB,iBAAiB,CAACtJ,GAAG,CAAC7c,GAAG,CAAC,EAAE;QACpCooC,YAAY,CAACnoC,GAAG,CAACD,GAAG,EAAEioB,uFAAa,CAAC1zB,GAAG,CAACyL,GAAG,CAAC,CAAC;;IAEjD,CAAC,CAAC;IACF,OAAOooC,YAAY;EACrB;EAEA7uC,iBAAiB,CAACjD,IAAkB;IAClC,IAAIA,IAAI,KAAK/C,4EAAY,CAACiG,KAAK,EAAE;MAC/B,OAAO,IAAI,CAACwtC,mBAAmB;KAChC,MAAM,IAAI1wC,IAAI,KAAK/C,4EAAY,CAAC0G,UAAU,EAAE;MAC3C,OAAO,IAAI,CAACgtC,oBAAoB;;IAElC,OAAO,IAAI/rB,mFAAU,EAAE;EACzB;EAEAmtB,qBAAqB,CAAC/xC,IAAkB;IACtC,OAAO,IAAI,CAACiD,iBAAiB,CAACjD,IAAI,CAAC,CAACqD,SAAS,EAAE;EACjD;EAEAmO,cAAc,CAACxR,IAAkB,EAAEsB,IAAY;IAC7C,IAAItB,IAAI,KAAK/C,4EAAY,CAACiG,KAAK,EAAE;MAC/B,IAAI,CAAC5B,IAAI,CAAC6P,UAAU,CAAClU,4EAAY,CAACiG,KAAK,CAAC,EAAE;QACxC5B,IAAI,GAAGrE,4EAAY,CAACiG,KAAK,GAAG5B,IAAI;;MAElC,OAAO,IAAI,CAACovC,mBAAmB,CAACzyC,GAAG,CAACqD,IAAI,CAAC;KAC1C,MAAM,IAAItB,IAAI,KAAK/C,4EAAY,CAAC0G,UAAU,EAAE;MAC3C,IAAI,CAACrC,IAAI,CAAC6P,UAAU,CAAClU,4EAAY,CAAC0G,UAAU,CAAC,EAAE;QAC7CrC,IAAI,GAAGrE,4EAAY,CAAC0G,UAAU,GAAGrC,IAAI;;MAEvC,OAAO,IAAI,CAACqvC,oBAAoB,CAAC1yC,GAAG,CAACqD,IAAI,CAAC;;IAE5C,OAAO,IAAI;EACb;EAEAmC,cAAc,CAACzD,IAAkB;IAC/B,OAAO,IAAI,CAACqxC,qBAAqB,CAACpzC,GAAG,CAAC+B,IAAI,CAAC;EAC7C;EAEAqtC,aAAa,CAAC/rC,IAAY;IACxB,IAAI,IAAI,CAACuuB,iBAAiB,CAACtJ,GAAG,CAACjlB,IAAI,CAAC,EAAE;MACpC,OAAO,IAAI,CAACuuB,iBAAiB,CAAC5xB,GAAG,CAACqD,IAAI,CAAC;KACxC,MAAM,IAAIqwB,uFAAa,CAACpL,GAAG,CAACjlB,IAAI,CAAC,EAAE;MAClC,OAAOqwB,uFAAa,CAAC1zB,GAAG,CAACqD,IAAI,CAAC;;IAEhC,OAAO,IAAI;EACb;EAEA8lC,iBAAiB,CACfloC,QAA0B,EAC1Bc,IAAkB;IAElB,MAAMgyC,aAAa,GAAQ,EAAE;IAC7B9yC,QAAQ,CAACQ,OAAO,CAAEK,OAAO,IAAI;MAC3B,IAAIA,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC9B,IAAI,CAAC,EAAE;QAC/BgyC,aAAa,CAACj0C,IAAI,CAACgC,OAAO,CAAC;;IAE/B,CAAC,CAAC;IACF,OAAOiyC,aAAa;EACtB;EAEApE,oBAAoB;IAClB,OAAO,IAAI,CAAC/d,iBAAiB;EAC/B;EAEAgd,mBAAmB;IACjB,OAAO,IAAI,CAAC6D,mBAAmB;EACjC;EAEA5D,wBAAwB;IACtB,OAAO,IAAI,CAAC6D,oBAAoB;EAClC;EAEAlE,oBAAoB;IAClB,OAAO,IAAI,CAAC8D,UAAU;EACxB;EAEA0B,sBAAsB,CAACnB,mBAAwC;IAC7D,IAAI,CAACA,mBAAmB,GAAGA,mBAAmB;EAChD;;AA3VWR,qBAAqB;mBAArBA,qBAAqB;AAAA;AAArBA,qBAAqB;SAArBA,qBAAqB;EAAAhK,SAArBgK,qBAAqB;EAAA/J,YAFpB;AAAM;;;;;;;;;;;;;;;;AClB8C;;AAS5D,MAAO2L,sBAAsB;EAHnCrkB;IAKU,qBAAgB,GAAG,KAAK;;EAEhC;;;;EAIA3X,iBAAiB;IACf,IAAI,CAAC,IAAI,CAACi8B,gBAAgB,EAAE;MAC1B,IAAI,IAAI,CAACC,QAAQ,CAACC,cAAc,EAAE;QAChC,IAAI,CAACD,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACC,cAAc,CAACtyC,OAAO,CAACjC,QAAQ;QAC7D,IAAI,CAACq0C,gBAAgB,GAAG,IAAI;;;EAGlC;EAEAG,kBAAkB,CAACF,QAAa;IAC9B,IAAI,CAACA,QAAQ,GAAGA,QAAQ,CAACG,SAAS;EACpC;EAEAxjB,KAAK;IACH,IAAI,CAACqjB,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACD,gBAAgB,GAAG,KAAK;EAC/B;EAEAK,8BAA8B;IAC5B,IAAI,IAAI,CAACJ,QAAQ,EAAE;MACjB,MAAMK,oBAAoB,GAAG,IAAI,CAACtI,mBAAmB,EAAE;MACvD,MAAM1qC,MAAM,GAAG,IAAI,CAAC2qC,YAAY,EAAE;MAElC,MAAMsI,UAAU,GAAmB,EAAE;MAErC,IAAI,CAACC,uBAAuB,CAACF,oBAAoB,EAAEC,UAAU,EAAEjzC,MAAM,CAAC;MAEtE,OAAOizC,UAAU;;IAEnB,OAAO,EAAE;EACX;EAEQC,uBAAuB,CAC7BF,oBAAoC,EACpCC,UAA0B,EAC1BjzC,MAA2B;IAE3BgzC,oBAAoB,CAAC/yC,OAAO,CAAEkzC,aAAa,IAAI;MAC7C,IAAIA,aAAa,CAAC5yC,IAAI,KAAK/C,4EAAY,CAACgD,QAAQ,EAAE;QAChDyyC,UAAU,CAAC30C,IAAI,CAAC60C,aAAa,CAAC;;MAGhC;MAAA,KACK;QACH,IAAIA,aAAa,CAAC5yC,IAAI,KAAK/C,4EAAY,CAACyK,cAAc,EAAE;UACtDkrC,aAAa,CAACx0C,cAAc,CAAC+C,KAAK,GAAGyxC,aAAa,CAACzxC,KAAK;UACxDyxC,aAAa,CAACx0C,cAAc,CAACiD,MAAM,GAAGuxC,aAAa,CAACvxC,MAAM;;QAE5D,IAAI,CAACqxC,UAAU,CAAC5wC,QAAQ,CAAC8wC,aAAa,CAAC,EAAE;UACvCF,UAAU,CAACzK,OAAO,CAAC2K,aAAa,CAAC;;;IAGvC,CAAC,CAAC;IAEFnzC,MAAM,CAACC,OAAO,CAAEoH,KAAK,IAAI;MACvB4rC,UAAU,CAAC30C,IAAI,CAAC+I,KAAK,CAAC;IACxB,CAAC,CAAC;EACJ;EAEAokC,gBAAgB;IACd,MAAM/mB,UAAU,GAA2B,EAAE;IAE7C,IAAI,CAACgmB,mBAAmB,EAAE,CAACzqC,OAAO,CAAEK,OAAO,IAAI;MAC7C,IAAIA,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACgD,QAAQ,CAAC,EAAE;QAChDkkB,UAAU,CAACpmB,IAAI,CAACgC,OAA+B,CAAC;;IAEpD,CAAC,CAAC;IACF,OAAOokB,UAAU;EACnB;EAEAinB,iBAAiB;IACf,MAAM5rC,WAAW,GAA2B,EAAE;IAC9C,IAAI,CAAC2qC,mBAAmB,EAAE,CAACzqC,OAAO,CAAEK,OAAO,IAAI;MAC7C,MAAMC,IAAI,GAAGD,OAAO,CAACC,IAAI;MACzB,IAAIA,IAAI,KAAK/C,4EAAY,CAACiD,UAAU,EAAE;QACpCV,WAAW,CAACzB,IAAI,CAACgC,OAA+B,CAAC;;IAErD,CAAC,CAAC;IACF,OAAOP,WAAW;EACpB;EAEA2qC,mBAAmB;IACjB,MAAMuB,UAAU,GAAmB,EAAE;IACrC,MAAMmH,YAAY,GAAwB,EAAE;IAE5C,IAAI,CAACC,kBAAkB,CAACD,YAAY,EAAEnH,UAAU,CAAC;IAEjD;IACA;IACA;IACA,IAAItoC,CAAC,GAAGyvC,YAAY,CAAC1jC,MAAM,GAAG,CAAC;IAC/B,OAAO0jC,YAAY,CAAC1jC,MAAM,IAAI,CAAC,EAAE;MAC/B,MAAM4jC,YAAY,GAAGF,YAAY,CAAC3K,GAAG,EAAE;MACvC;MACA6K,YAAY,CAACj1C,QAAQ,CAAC4B,OAAO,CAAE6pB,KAAmB,IAAI;QACpD,MAAMvpB,IAAI,GAAGupB,KAAK,CAACvpB,IAAI;QACvB,IAAIA,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACkD,KAAK,CAAC,EAAE;UACrC0yC,YAAY,CAAC90C,IAAI,CAACwrB,KAA0B,CAAC;;MAEjD,CAAC,CAAC;MACFnmB,CAAC,GAAGyvC,YAAY,CAAC1jC,MAAM,GAAG,CAAC;;IAE7B,OAAOu8B,UAAU;EACnB;EAEA;EACAtB,YAAY;IACV,MAAMyI,YAAY,GAAwB,EAAE;IAC5C,MAAMnH,UAAU,GAAmB,EAAE;IAErC,IAAI,CAACoH,kBAAkB,CAACD,YAAY,EAAEnH,UAAU,CAAC;IAEjD,KAAK,MAAM5kC,KAAK,IAAI+rC,YAAY,EAAE;MAChC/rC,KAAK,CAAChJ,QAAQ,EAAE4B,OAAO,CAAE6pB,KAAmB,IAAI;QAC9C,IAAIA,KAAK,CAACvpB,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACkD,KAAK,CAAC,EAAE;UAC3C0yC,YAAY,CAAC90C,IAAI,CAACwrB,KAA0B,CAAC;;MAEjD,CAAC,CAAC;;IAEJ,OAAOspB,YAAY;EACrB;EAEQC,kBAAkB,CACxBD,YAAiC,EACjCnH,UAA0B;IAE1B,MAAMsH,oBAAoB,GAAGhpC,MAAM,CAAC8d,IAAI,CAAC,IAAI,CAACsqB,QAAQ,CAAC;IACvD,KAAK,IAAI9wC,IAAI,IAAI0xC,oBAAoB,EAAE;MACrC,MAAM3wC,KAAK,GAAG,IAAI,CAAC+vC,QAAQ,CAAC9wC,IAAI,CAAC,CAACvB,OAAO;MACzC,IAAIsC,KAAK,CAACjE,cAAc,EAAE;QACxB,MAAM4B,IAAI,GAAGqC,KAAK,CAACrC,IAAI;QACvB,IAAIA,IAAI,IAAIA,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACkD,KAAK,CAAC,EAAE;UAC7C;UACA0yC,YAAY,CAAC90C,IAAI,CAACsE,KAAK,CAAC;SACzB,MAAM,IAAIrC,IAAI,EAAE;UACf0rC,UAAU,CAAC3tC,IAAI,CAACsE,KAAK,CAAC;;;;EAI9B;EAEA;EACAohB,uBAAuB;IACrB,MAAMD,oBAAoB,GAA2B,EAAE;IACvD,MAAMW,UAAU,GAAG,IAAI,CAAC+mB,gBAAgB,EAAE;IAE1C/mB,UAAU,CAACzkB,OAAO,CAAEokB,QAA8B,IAAI;MACpD,IAAIA,QAAQ,CAAChlB,MAAM,EAAEkB,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACiG,KAAK,CAAC,EAAE;QACtDsgB,oBAAoB,CAACzlB,IAAI,CAAC+lB,QAAQ,CAAC;;IAEvC,CAAC,CAAC;IACF,OAAON,oBAAoB;EAC7B;EAEA6Z,YAAY;IACV,MAAM5V,MAAM,GAAG,IAAI,CAACwrB,YAAY,EAAE;IAClC,MAAMvD,WAAW,GAAG,IAAI,CAACwD,iBAAiB,EAAE;IAE5C,OAAO;MACLzrB,MAAM,EAAEA,MAAM,CAAChS,GAAG,CAAE2Z,CAAC,IAAKA,CAAC,CAACpvB,IAAI,CAACmG,OAAO,CAAClJ,4EAAY,CAACiG,KAAK,EAAE,EAAE,CAAC,CAAC;MACjEwsC,WAAW,EAAEA,WAAW,CAACj6B,GAAG,CAAEkvB,CAAC,IAC7BA,CAAC,CAAC3kC,IAAI,CAACmG,OAAO,CAAClJ,4EAAY,CAAC0G,UAAU,EAAE,EAAE,CAAC;KAE9C;EACH;EAEQsvC,YAAY;IAClB,OAAO,IAAI,CAAC9I,mBAAmB,EAAE,CAACnb,MAAM,CAAEmkB,EAAE,IAC1CA,EAAE,CAACnzC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACiG,KAAK,CAAC,CACrC;EACH;EAEQgwC,iBAAiB;IACvB,OAAO,IAAI,CAAC/I,mBAAmB,EAAE,CAACnb,MAAM,CAAEmkB,EAAE,IAC1CA,EAAE,CAACnzC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAAC0G,UAAU,CAAC,CAC1C;EACH;;AAxLWuuC,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;SAAtBA,sBAAsB;EAAA5L,SAAtB4L,sBAAsB;EAAA3L,YAFrB;AAAM;;;;;;;;;;;;;;;;;;;;;;;;;ACPyC;AAEK;AAOV;;;;;;;;;AAKlD,MAAO8M,aAAa;EAOxBxlB,YACU7I,oBAAgD,EAChDwE,YAA0B,EAC1BvlB,gBAAkC,EAClCqvC,UAAsB,EACtBC,UAAsB,EACtBC,uBAAgD,EAChD5M,eAAgC;IANhC,yBAAoB,GAApB5hB,oBAAoB;IACpB,iBAAY,GAAZwE,YAAY;IACZ,qBAAgB,GAAhBvlB,gBAAgB;IAChB,eAAU,GAAVqvC,UAAU;IACV,eAAU,GAAVC,UAAU;IACV,4BAAuB,GAAvBC,uBAAuB;IACvB,oBAAe,GAAf5M,eAAe;IAVzB,UAAK,GAAG,EAAE;IACV,gBAAW,GAAG,EAAE;IAWd,IAAI,CAAC6M,iBAAiB,GAAG,IAAI,CAACjqB,YAAY,CAAC8Z,MAAM,CAAChK,SAAS,CACxDvyB,KAAa,IAAI;MAChB,IAAI,CAACA,KAAK,GAAGA,KAAK;IACpB,CAAC,CACF;IACD,IAAI,CAAC2sC,uBAAuB,GAAG,IAAI,CAAClqB,YAAY,CAAC+Z,YAAY,CAACjK,SAAS,CACpEpN,WAAmB,IAAI;MACtB,IAAI,CAACA,WAAW,GAAGA,WAAW;IAChC,CAAC,CACF;EACH;EAEAynB,WAAW;IACT,IAAI,CAACF,iBAAiB,CAACG,WAAW,EAAE;IACpC,IAAI,CAACF,uBAAuB,CAACE,WAAW,EAAE;EAC5C;EAEA5R,uBAAuB;IACrB,OAAO,IAAI,CAAC4E,eAAe,CAACyB,QAAQ,EAAE,CAACl5B,MAAM,IAAI,CAAC;EACpD;EAEAm5B,kBAAkB,CAACuL,WAAgB;IACjC,OAAO,IAAIhd,4EAAY,CACrB,IAAI,CAAC7R,oBAAoB,CAAC8mB,gCAAgC,EAAE,EAC5D+H,WAAW,CACZ;EACH;EAEAzR,WAAW;IACT,MAAMrL,GAAG,GAAG,IAAI,CAAC+c,mBAAmB,EAAE;IACtC,MAAM7M,YAAY,GAAG,IAAI,CAACqB,kBAAkB,CAACvR,GAAG,CAAC;IACjD,MAAM+R,IAAI,GAAG5hB,IAAI,CAACkhB,SAAS,CAACnB,YAAY,EAAE,IAAI,EAAE,CAAC,CAAC;IAElD,MAAM1F,QAAQ,GAAG6R,2EAAkB,CACjC,IAAI,CAACrsC,KAAK,GAAG,GAAG,GAAG,IAAIyhC,IAAI,EAAE,CAACC,QAAQ,EAAE,CAACjkB,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CACtD;IAED,IAAI,CAACuvB,YAAY,CACfjL,IAAI,EACJ,gCAAgC,EAChCvH,QAAQ,EACR,MAAM,EACN,IAAI,CACL;EACH;EAEQwS,YAAY,CAClBvmB,IAAY,EACZwmB,QAAgB,EAChBzS,QAAgB,EAChB0S,UAAkB,EAClBnK,SAAkB;IAElB,MAAM/pC,OAAO,GAAGqF,QAAQ,CAACub,aAAa,CAAC,GAAG,CAAC;IAC3C5gB,OAAO,CAACoT,YAAY,CAAC,MAAM,EAAE6gC,QAAQ,GAAG/H,kBAAkB,CAACze,IAAI,CAAC,CAAC;IACjEztB,OAAO,CAACoT,YAAY,CAAC,UAAU,EAAEouB,QAAQ,GAAG0S,UAAU,CAAC;IAEvDl0C,OAAO,CAAC+N,KAAK,CAACw8B,OAAO,GAAG,MAAM;IAC9BllC,QAAQ,CAAC8mC,IAAI,CAACrrB,WAAW,CAAC9gB,OAAO,CAAC;IAElCA,OAAO,CAACiH,KAAK,EAAE;IAEf,IAAI8iC,SAAS,EAAE;MACb,IAAI,CAAC7lC,gBAAgB,CAAC6lC,SAAS,EAAE;;IAGnC1kC,QAAQ,CAAC8mC,IAAI,CAACzqB,WAAW,CAAC1hB,OAAO,CAAC;EACpC;EAEAmiC,WAAW,CAACpH,SAAkB,EAAEC,kBAA2B;IACzD,MAAMmM,KAAK,GAAG,IAAI,CAAC4M,mBAAmB,EAAE;IACxC,MAAM/c,GAAG,GAAG,IAAI,CAACuR,kBAAkB,CAACpB,KAAK,CAAC;IAE1C,MAAMgN,OAAO,GAAG,IAAI,CAACX,UAAU,CAACY,aAAa,CAC3C,IAAI,CAACptC,KAAK,EACV,IAAI,CAACmlB,WAAW,EAChB6K,GAAG,EACH+D,SAAS,EACTC,kBAAkB,CACnB;IAED,IAAI,CAACgZ,YAAY,CACfG,OAAO,EACP,4CAA4C,EAC5Cd,2EAAkB,CAAC,IAAI,CAACrsC,KAAK,CAAC,EAC9B,UAAU,EACV,IAAI,CACL;EACH;EAEAu7B,WAAW,CAACxH,SAAkB;IAC5B,MAAM98B,MAAM,GAAGoH,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC;IAChD,IAAIrH,MAAM,EAAE;MACV,MAAMo2C,SAAS,GAAGp2C,MAAM,CAACyU,sBAAsB,CAAC,eAAe,CAAC;MAChE,MAAM4hC,WAAW,GAAGD,SAAS,CAAC,CAAC,CAAC,CAACthC,oBAAoB,CAAC,KAAK,CAAC;MAC5D,MAAMwhC,eAAe,GAAGD,WAAW,CAAC,CAAC,CAAC;MACtC,MAAME,QAAQ,GAAGD,eAAe,CAAC7hC,sBAAsB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;MACtE,MAAM+hC,SAAS,GAAGD,QAAQ,CAAC9hC,sBAAsB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;MAElE,MAAMgiC,KAAK,GAAGrvC,QAAQ,CAACub,aAAa,CAAC,KAAK,CAAC;MAE3C;MACA,IAAIsb,GAAG,GAAG,IAAI,CAACqX,UAAU,CAACoB,UAAU,CAACH,QAAQ,EAAED,eAAe,CAAC;MAE/DrY,GAAG,GAAG,IAAI,CAACqX,UAAU,CAACqB,UAAU,CAC9B1Y,GAAG,EACHuY,SAAS,EACT,IAAI,CAACtoB,WAAW,EAChB,IAAI,CAACnlB,KAAK,EACV+zB,SAAS,CACV;MAED2Z,KAAK,CAACG,MAAM,GAAG,MAAK;QAClB,MAAMloB,UAAU,GAAGtnB,QAAQ,CAACub,aAAa,CAAC,QAAQ,CAAC;QAEnD;QACA+L,UAAU,CAACvrB,KAAK,GAAG,IAAI,CAACmyC,UAAU,CAACuB,QAAQ,EAAE,GAAG,EAAE;QAClDnoB,UAAU,CAACrrB,MAAM,GAAG,IAAI,CAACiyC,UAAU,CAACwB,SAAS,EAAE,GAAG,EAAE;QAEpD,MAAMxrB,GAAG,GAAGoD,UAAU,CAACC,UAAU,CAAC,IAAI,CAAC;QACvC,IAAIrD,GAAG,EAAE;UACP;UACAA,GAAG,CAAC7Y,IAAI,CAAC,CAAC,EAAE,CAAC,EAAEic,UAAU,CAACvrB,KAAK,EAAEurB,UAAU,CAACrrB,MAAM,CAAC;UACnDioB,GAAG,CAACyrB,SAAS,GAAG,OAAO;UACvBzrB,GAAG,CAACtb,IAAI,EAAE;UAEVsb,GAAG,CAAC0rB,SAAS,CAACP,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;;QAG5B,MAAMQ,KAAK,GAAGvoB,UAAU,CAACwoB,SAAS,CAAC,WAAW,CAAC;QAC/C,MAAMC,GAAG,GAAG/vC,QAAQ,CAACub,aAAa,CAAC,GAAG,CAAC;QACvCw0B,GAAG,CAAChiC,YAAY,CACd,UAAU,EACVigC,2EAAkB,CAAC,IAAI,CAACrsC,KAAK,CAAC,GAC5B,GAAG,GACH,IAAIyhC,IAAI,EAAE,CAAC4M,WAAW,EAAE,CAAC5wB,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,GACrC,MAAM,CACT;QACD2wB,GAAG,CAAChiC,YAAY,CAAC,MAAM,EAAE8hC,KAAK,CAAC;QAC/B7vC,QAAQ,CAAC8mC,IAAI,CAACrrB,WAAW,CAACs0B,GAAG,CAAC;QAC9BA,GAAG,CAACnuC,KAAK,EAAE;QACX5B,QAAQ,CAAC8mC,IAAI,CAACzqB,WAAW,CAAC0zB,GAAG,CAAC;QAE9B;QACAV,KAAK,CAACjuB,GAAG,GAAG,EAAE;MAChB,CAAC;MACDiuB,KAAK,CAACnvC,QAAQ,GAAGmvC,KAAK,CAACG,MAAM;MAE7BH,KAAK,CAACtzC,KAAK,GAAG,IAAI,CAACmyC,UAAU,CAACuB,QAAQ,EAAE;MACxCJ,KAAK,CAACpzC,MAAM,GAAG,IAAI,CAACiyC,UAAU,CAACwB,SAAS,EAAE;MAE1CL,KAAK,CAACjuB,GAAG,GAAG,qBAAqB,GAAGyV,GAAG;;EAE3C;EAEAuG,wBAAwB;IACtB,MAAMjB,QAAQ,GAAG6R,2EAAkB,CACjC,IAAI,CAACrsC,KAAK,GAAG,GAAG,GAAG,IAAIyhC,IAAI,EAAE,CAACC,QAAQ,EAAE,CAACjkB,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CACtD;IACD,IAAI,CAACgvB,uBAAuB,CAAChR,wBAAwB,CAACjB,QAAQ,CAAC,CAAC8T,IAAI,EAAE;EACxE;EAEQvB,mBAAmB;IACzB,MAAM5M,KAAK,GAAG,IAAI,CAACN,eAAe,CAACyB,QAAQ,EAAe;IAC1DnB,KAAK,CAACnpC,IAAI,CAAC;MAAEu3C,IAAI,EAAE,IAAI,CAAC9rB,YAAY,CAACK,cAAc;IAAE,CAAE,CAAC;IACxDqd,KAAK,CAACnpC,IAAI,CAAC;MAAEw3C,OAAO,EAAEznB,6DAAOA;IAAA,CAAE,CAAC;IAChC,OAAOoZ,KAAK;EACd;;AAvLWmM,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;SAAbA,aAAa;EAAA/M,SAAb+M,aAAa;EAAA9M,YAFZ;AAAM;;;;;;;;;;;;;;;;;;;;;;ACbuC;AAE3D;AACsB;;;;AAMtB;;;AAGM,MAAOkP,uBAAuB;EAClC5nB,YACUgT,aAA4B,EAC5BrX,YAA0B;IAD1B,kBAAa,GAAbqX,aAAa;IACb,iBAAY,GAAZrX,YAAY;EACnB;EAOHksB,iBAAiB,CAAC13C,MAAW,EAAE23C,SAAc,EAAEC,OAAY;IACzD,IAAI,CAACA,OAAO,GAAGA,OAAO;EACxB;EAEQ,OAAOC,kBAAkB,CAAC5Z,GAAQ;IACxC,MAAM6Z,iBAAiB,GACrB,wDAAwD;IAC1D,MAAMhlC,KAAK,GAAGmrB,GAAG,CAACnrB,KAAK,CAACglC,iBAAiB,CAAC;IAC1C,OAAOhlC,KAAK,CAAC,CAAC,CAAC;EACjB;EAEA;;;;;EAMM0xB,wBAAwB,CAACjB,QAAgB;IAAA;IAAA;MAC7C,MAAM2S,OAAO,GAAG,EAAE;MAClB;MACA,KAAI,CAACrT,aAAa,CAACmC,WAAW,EAAE;MAChC,IAAI;QACF,MAAM5yB,MAAM,SAAS,KAAI,CAACwlC,OAAO,CAACG,OAAO,CAAC,EAAE,CAAC;QAC7C,KAAI,CAACC,6BAA6B,CAChC5lC,MAAM,EACN,KAAI,CAACywB,aAAa,CAACoV,oBAAoB,EAAE,CAC1C;QACD/B,OAAO,CAACn2C,IAAI,CAAC;UACXm4C,OAAO,EAAET,uBAAuB,CAACtB,aAAa,CAAC/jC,MAAM,CAAC6rB,GAAG,CAAC;UAC1Dka,UAAU,EAAE;SACb,CAAC;OACH,CAAC,OAAOC,GAAG,EAAE;QACZC,KAAK,CAAC,yCAAyC,GAAGD,GAAG,CAAC;;MAExD,OACE,KAAI,CAACvV,aAAa,CAACoV,oBAAoB,EAAE,GACzC,KAAI,CAACpV,aAAa,CAACyV,gBAAgB,EAAE,EACrC;QACA,KAAI,CAACzV,aAAa,CAACsC,QAAQ,EAAE;QAC7B,IAAI;UACF,MAAM/yB,MAAM,SAAS,KAAI,CAACwlC,OAAO,CAACG,OAAO,CAAC,EAAE,CAAC;UAC7C,KAAI,CAACC,6BAA6B,CAChC5lC,MAAM,EACN,KAAI,CAACywB,aAAa,CAACoV,oBAAoB,EAAE,CAC1C;UACD/B,OAAO,CAACn2C,IAAI,CAAC;YACXm4C,OAAO,EAAET,uBAAuB,CAACtB,aAAa,CAAC/jC,MAAM,CAAC6rB,GAAG,CAAC;YAC1Dka,UAAU,EAAE;WACb,CAAC;SACH,CAAC,OAAOC,GAAG,EAAE;UACZC,KAAK,CAAC,yCAAyC,GAAGD,GAAG,CAAC;;;MAG1D,KAAI,CAACvV,aAAa,CAACoC,UAAU,EAAE;MAE/B;MACA,MAAMsT,gBAAgB,GAAGnxC,QAAQ,CAACC,cAAc,CAAC,mBAAmB,CAAC;MACrE,MAAMmxC,IAAI,GAAGhB,mDAAY,CAACe,gBAAgB,EAAE1mC,SAAS,CAAC;MACtD,MAAM4mC,YAAY,GAAG;QACnBC,MAAM,EAAE,QAAQ;QAChB3vC,KAAK,EAAE,KAAI,CAACyiB,YAAY,CAACG,QAAQ,EAAE;QACnCuC,WAAW,EAAE,KAAI,CAAC1C,YAAY,CAACK,cAAc,EAAE;QAC/C8sB,SAAS,EAAEzC,OAAO;QAClB0C,eAAe,EAAE,KAAI,CAACA,eAAe;QACrCC,WAAW,EAAE,KAAI,CAACA;OACnB;MACD,MAAM92C,OAAO,GAAGqF,QAAQ,CAACub,aAAa,CAAC,GAAG,CAAC;MAC3C5gB,OAAO,CAACoT,YAAY,CAClB,MAAM,EACN,+BAA+B,GAC7B,KAAI,CAAC2jC,sBAAsB,CAACN,IAAI,EAAEC,YAAY,CAAC,CAClD;MACD12C,OAAO,CAACoT,YAAY,CAAC,UAAU,EAAEigC,oEAAkB,CAAC7R,QAAQ,CAAC,GAAG,OAAO,CAAC;MACxExhC,OAAO,CAAC+N,KAAK,CAACw8B,OAAO,GAAG,MAAM;MAC9BllC,QAAQ,CAAC8mC,IAAI,CAACrrB,WAAW,CAAC9gB,OAAO,CAAC;MAClCA,OAAO,CAACiH,KAAK,EAAE;MACf5B,QAAQ,CAAC8mC,IAAI,CAACzqB,WAAW,CAAC1hB,OAAO,CAAC;IAAC;EACrC;EAEQ+2C,sBAAsB,CAC5BN,IAAS,EACTC,YAOC;IAED,OAAOD,IAAI,CAACC,YAAY,CAAC,CAACtwC,OAAO,CAAC,WAAW,EAAE,UAAU,CAAC;EAC5D;EAEA;EACQ,OAAOguC,aAAa,CAAClY,GAAQ;IACnC,IAAIzO,IAAI,GAAG8B,eAAe,CAAC2M,GAAG,CAAC;IAE/B;IACA;IACA,IAAI8a,YAAY,GAAGvpB,IAAI,CAACxc,OAAO,CAAC,SAAS,CAAC;IAE1C,MAAM4D,OAAO,GAAG6gC,uBAAuB,CAACI,kBAAkB,CAACroB,IAAI,CAAC;IAEhE,IAAIrB,KAAa;IACjB,IAAIhrB,KAAa;IACjB,IAAIirB,GAAW;IACf,IAAI/qB,MAAc;IAClB,MAAM21C,YAAY,GAAGpiC,OAAO,CAACmN,KAAK,CAAC,IAAI,CAAC;IAExCoK,KAAK,GAAG,CAAC6qB,YAAY,CAAC,CAAC,CAAC;IACxB5qB,GAAG,GAAG,CAAC4qB,YAAY,CAAC,CAAC,CAAC;IACtB71C,KAAK,GAAG,CAAC61C,YAAY,CAAC,CAAC,CAAC;IACxB31C,MAAM,GAAG,CAAC21C,YAAY,CAAC,CAAC,CAAC;IAEzB,IAAI71C,KAAK,GAAG,GAAG,EAAE;MACfA,KAAK,IAAI,GAAG;;IAGd,MAAM81C,SAAS,GAAGzpB,IAAI,CAACvc,SAAS,CAAC,CAAC,EAAE8lC,YAAY,CAAC;IACjDA,YAAY,GAAGvpB,IAAI,CAACxc,OAAO,CAAC,WAAW,CAAC;IACxC,MAAMkmC,OAAO,GAAG1pB,IAAI,CAACvc,SAAS,CAAC8lC,YAAY,CAAC;IAC5CG,OAAO,CAACjmC,SAAS,CAAC8lC,YAAY,CAAC;IAE/BvpB,IAAI,GAAGypB,SAAS,GAAG,IAAI,CAACE,YAAY,CAAChrB,KAAK,EAAEC,GAAG,EAAEjrB,KAAK,EAAEE,MAAM,CAAC,GAAG61C,OAAO;IAEzE,OAAOjL,kBAAkB,CAACze,IAAI,CAAC;EACjC;EAEQ,OAAO2pB,YAAY,CACzBhrB,KAAa,EACbC,GAAW,EACXjrB,KAAa,EACbE,MAAc;IAEd,OACE,cAAc,GACd,iBAAiB,GACjB,sCAAsC,GACtC,YAAY,GACZ8qB,KAAK,GACL,GAAG,GACHC,GAAG,GACH,GAAG,IACFD,KAAK,GAAGhrB,KAAK,CAAC,GACf,GAAG,IACFirB,GAAG,GAAG/qB,MAAM,CAAC;EAElB;EAEA;;;;;;;EAOQ20C,6BAA6B,CACnC5lC,MAAuB,EACvBgnC,YAAoB;IAEpB,MAAMliC,IAAI,GAAG9E,MAAM,CAAC6rB,GAAG,CAAChrB,SAAS,CAC/Bb,MAAM,CAAC6rB,GAAG,CAACjrB,OAAO,CAAC,QAAQ,CAAC,EAC5BZ,MAAM,CAAC6rB,GAAG,CAACjrB,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAClC;IACD,MAAM+Q,KAAK,GAAG7M,IAAI,CAAC6M,KAAK,CAAC,UAAU,CAAC;IAEpC,IAAIs1B,OAAO,GAAGt1B,KAAK,CAAC,CAAC,CAAC;IAEtB,KAAK,IAAI3e,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2e,KAAK,CAAC5S,MAAM,EAAE/L,CAAC,EAAE,EAAE;MACrC,MAAMk0C,GAAG,GAAGv1B,KAAK,CAAC3e,CAAC,CAAC,CAAC0N,KAAK,CAAC,eAAe,CAAC;MAC3CwmC,GAAG,EAAE53C,OAAO,CAAElB,EAAE,IAAI;QAClB,MAAM+4C,WAAW,GAAG/4C,EAAE,CAACyS,SAAS,CAAC,CAAC,EAAEzS,EAAE,CAAC2Q,MAAM,GAAG,CAAC,CAAC;QAClD,MAAMqoC,KAAK,GACTD,WAAW,CAAC/yB,KAAK,CAAC,CAAC,EAAEhmB,EAAE,CAAC2Q,MAAM,GAAG,CAAC,CAAC,GACnC,UAAU,GACVioC,YAAY,GACZG,WAAW,CAAC/yB,KAAK,CAAC+yB,WAAW,CAACpoC,MAAM,GAAG,CAAC,CAAC;QAC3C;QACAiB,MAAM,CAAC6rB,GAAG,GAAG7rB,MAAM,CAAC6rB,GAAG,CAACwb,UAAU,CAACF,WAAW,EAAEC,KAAK,CAAC;MACxD,CAAC,CAAC;MACFH,OAAO,IAAI,uCAAuC,GAAGt1B,KAAK,CAAC3e,CAAC,CAAC;;IAG/DgN,MAAM,CAAC6rB,GAAG,GAAG7rB,MAAM,CAAC6rB,GAAG,CAAC91B,OAAO,CAAC+O,IAAI,EAAEmiC,OAAO,CAAC;EAChD;;AAnMW5B,uBAAuB;mBAAvBA,uBAAuB;AAAA;AAAvBA,uBAAuB;SAAvBA,uBAAuB;EAAAnP,SAAvBmP,uBAAuB;EAAAlP,YALtB;AAAM;;;;;;;;;;;;;;;;ACPoE;;AAOlF,MAAOmR,UAAU;EAIrB7pB;IACE,IAAI,CAAC1sB,KAAK,GAAG,CAAC;IACd,IAAI,CAACE,MAAM,GAAG,CAAC;EACjB;EAEQs2C,YAAY;IAClB,MAAMC,EAAE,GAAGC,SAAS,CAACC,SAAS;IAC9B,IAAIC,GAAG;IACP,IAAIC,CAAC,GACHJ,EAAE,CAAC9mC,KAAK,CACN,8DAA8D,CAC/D,IAAI,EAAE;IACT,IAAI,UAAU,CAACvH,IAAI,CAACyuC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACzBD,GAAG,GAAG,iBAAiB,CAACE,IAAI,CAACL,EAAE,CAAC,IAAI,EAAE;MACtC,OAAO;QAAEt2C,IAAI,EAAE,IAAI;QAAEi0C,OAAO,EAAEwC,GAAG,CAAC,CAAC,CAAC,IAAI;MAAE,CAAE;;IAE9C,IAAIC,CAAC,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;MACrBD,GAAG,GAAGH,EAAE,CAAC9mC,KAAK,CAAC,qBAAqB,CAAC;MACrC,IAAIinC,GAAG,IAAI,IAAI,EAAE;QACf,OAAO;UAAEz2C,IAAI,EAAEy2C,GAAG,CAAC,CAAC,CAAC,CAAC5xC,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC;UAAEovC,OAAO,EAAEwC,GAAG,CAAC,CAAC;QAAC,CAAE;;;IAGpEC,CAAC,GAAGA,CAAC,CAAC,CAAC,CAAC,GAAG,CAACA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAACH,SAAS,CAACK,OAAO,EAAEL,SAAS,CAACM,UAAU,EAAE,IAAI,CAAC;IACzE;IACA,IAAI,CAACJ,GAAG,GAAGH,EAAE,CAAC9mC,KAAK,CAAC,iBAAiB,CAAC,KAAK,IAAI,EAAE;MAC/CknC,CAAC,CAAChvB,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE+uB,GAAG,CAAC,CAAC,CAAC,CAAC;;IAExB,OAAO;MAAEz2C,IAAI,EAAE02C,CAAC,CAAC,CAAC,CAAC;MAAEzC,OAAO,EAAEyC,CAAC,CAAC,CAAC;IAAC,CAAE;EACtC;EAEA;EACAI,aAAa,CAACnc,GAAW;IACvB,IAAIoc,GAAG,GAAG,KAAK;IAEf,MAAMC,OAAO,GAAG,IAAI,CAACX,YAAY,EAAE;IAEnC,MAAMr2C,IAAI,GAAGg3C,OAAO,CAACh3C,IAAI;IACzB,MAAMi0C,OAAO,GAAGgD,QAAQ,CAACD,OAAO,CAAC/C,OAAO,CAAC;IAEzC;IACA,IAAIj0C,IAAI,CAACQ,QAAQ,CAAC,QAAQ,CAAC,EAAE;MAC3B,IAAIyzC,OAAO,IAAI,EAAE,EAAE;QACjB8C,GAAG,GAAG,IAAI;QACV;;KAEH,MAAM,IAAI/2C,IAAI,CAACQ,QAAQ,CAAC,SAAS,CAAC,EAAE;MACnCu2C,GAAG,GAAG,IAAI;MAEV;;;IAEF,IAAIA,GAAG,EAAE;MACP,OAAOpc,GAAG,CAACn6B,QAAQ,CAAC,GAAG,CAAC,EAAE;QACxBm6B,GAAG,GAAGA,GAAG,CAAC91B,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC;;;IAGjC,OAAO81B,GAAG;EACZ;EAEAuc,qBAAqB,CAACvc,GAAgB;IACpC,IAAI9P,KAAK,GAAG,CAAC;IACb,IAAIssB,MAAM,GAAG,CAAC;IACd,IAAIrsB,GAAG,GAAG,CAAC;IACX,IAAIssB,KAAK,GAAG,CAAC;IAEb,MAAMx5C,QAAQ,GAAG+8B,GAAG,CAACxpB,sBAAsB,CAAC,WAAW,CAAC;IAExD;IACA,KAAK,IAAIrP,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGlE,QAAQ,CAACiQ,MAAM,EAAE/L,CAAC,EAAE,EAAE;MACxC,MAAMrD,OAAO,GAAGb,QAAQ,CAACkE,CAAC,CAAC;MAC3B,MAAMu1C,GAAG,GAAG54C,OAAO,CAACjC,QAAQ;MAE5B,IAAI86C,OAAe;MACnB,IAAIC,QAAgB;MACpB,IAAIC,KAAa;MACjB,IAAIC,OAAe;MAEnB,MAAMC,SAAS,GAAGL,GAAG,CAAC,CAAC,CAAC,CAAC/lC,YAAY,CAAC,WAAW,CAAC;MAClD,IAAIomC,SAAS,EAAE;QACb,IAAIC,IAAI;QAER,IAAID,SAAS,CAACl3C,QAAQ,CAAC,QAAQ,CAAC,EAAE;UAChCk3C,SAAS,CAAC7yC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC;UAChC6yC,SAAS,CAAC7yC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;UAC1B8yC,IAAI,GAAGD,SAAS,CAACj3B,KAAK,CAAC,GAAG,CAAC;UAC3B62B,OAAO,GAAGL,QAAQ,CAACU,IAAI,CAAC,CAAC,CAAC,CAAC;UAC3BH,KAAK,GAAGP,QAAQ,CAACU,IAAI,CAAC,CAAC,CAAC,CAAC;SAC1B,MAAM;UACLD,SAAS,CAAC7yC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC;UACnC6yC,SAAS,CAAC7yC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;UAC1B8yC,IAAI,GAAGD,SAAS,CAACj3B,KAAK,CAAC,GAAG,CAAC;UAC3B62B,OAAO,GAAGL,QAAQ,CAACU,IAAI,CAAC,CAAC,CAAC,CAAC;UAC3BH,KAAK,GAAGP,QAAQ,CAACU,IAAI,CAAC,CAAC,CAAC,CAAC;;QAG3B,MAAMC,KAAK,GAAGP,GAAG,CAAC,CAAC,CAAC,CAAC7lC,oBAAoB,CAAC,MAAM,CAAC;QACjD,MAAMqmC,SAAS,GAAGD,KAAK,CAACA,KAAK,CAAC/pC,MAAM,GAAG,CAAC,CAAC;QAEzC,MAAMhO,KAAK,GAAGg4C,SAAS,CAACvmC,YAAY,CAAC,OAAO,CAAC;QAE7CimC,QAAQ,GAAGD,OAAO,GAAGL,QAAQ,CAACp3C,KAAK,IAAI,IAAI,GAAGA,KAAK,GAAG,GAAG,CAAC;QAC1D43C,OAAO,GAAGD,KAAK,GAAGH,GAAG,CAAC,CAAC,CAAC,CAACtwC,qBAAqB,EAAE,CAAChH,MAAM;OACxD,MAAM;QACL,MAAM63C,KAAK,GAAGn5C,OAAO,CAAC+S,oBAAoB,CAAC,MAAM,CAAC;QAClD,MAAMqmC,SAAS,GAAGD,KAAK,CAACA,KAAK,CAAC/pC,MAAM,GAAG,CAAC,CAAC;QAEzC,MAAMnO,CAAC,GAAGm4C,SAAS,CAACvmC,YAAY,CAAC,GAAG,CAAC;QACrC,MAAMxR,CAAC,GAAG+3C,SAAS,CAACvmC,YAAY,CAAC,GAAG,CAAC;QAErCgmC,OAAO,GAAGL,QAAQ,CAACv3C,CAAC,IAAI,IAAI,GAAGA,CAAC,GAAG,GAAG,CAAC;QACvC83C,KAAK,GAAGP,QAAQ,CAACn3C,CAAC,IAAI,IAAI,GAAGA,CAAC,GAAG,GAAG,CAAC;QAErC,MAAMD,KAAK,GAAGg4C,SAAS,CAACvmC,YAAY,CAAC,OAAO,CAAC;QAC7C,MAAMvR,MAAM,GAAG83C,SAAS,CAACvmC,YAAY,CAAC,QAAQ,CAAC;QAE/CimC,QAAQ,GAAGD,OAAO,GAAGL,QAAQ,CAACp3C,KAAK,IAAI,IAAI,GAAGA,KAAK,GAAG,GAAG,CAAC;QAC1D43C,OAAO,GAAGD,KAAK,GAAGP,QAAQ,CAACl3C,MAAM,IAAI,IAAI,GAAGA,MAAM,GAAG,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;;;MAElE,IAAIu3C,OAAO,GAAGzsB,KAAK,EAAE;QACnBA,KAAK,GAAGysB,OAAO;;MAEjB,IAAIC,QAAQ,GAAGJ,MAAM,EAAE;QACrBA,MAAM,GAAGI,QAAQ;;MAEnB,IAAIC,KAAK,GAAG1sB,GAAG,EAAE;QACfA,GAAG,GAAG0sB,KAAK;;MAEb,IAAIC,OAAO,GAAGL,KAAK,EAAE;QACnBA,KAAK,GAAGK,OAAO;;;IAInB3sB,GAAG,IAAI,EAAE,CAAC,CAAC;IAEX,OAAO;MACLD,KAAK;MACLssB,MAAM;MACNrsB,GAAG;MACHssB;KACD;EACH;EAEA/D,UAAU,CACR1Y,GAAW,EACXuY,SAAc,EACdtoB,WAAmB,EACnBnlB,KAAa,EACb+zB,SAAkB;IAElB,MAAM3tB,GAAG,GAAG,IAAI,CAACqrC,qBAAqB,CAAChE,SAAS,CAAC;IACjD,IAAIuC,YAAY,GAAG9a,GAAG,CAACjrB,OAAO,CAAC,SAAS,CAAC;IAEzC,IAAI,CAACooC,uBAAuB,CAACjsC,GAAG,CAAC;IAEjC,MAAM;MAAEsf,UAAU;MAAET;IAAW,CAAE,GAAGC,sGAAmC,CACrEllB,KAAK,EACLmlB,WAAW,EACX/e,GAAG,CAACgf,KAAK,EACThf,GAAG,CAACif,GAAG,GAAG,EAAE,EACZ,IAAI,CAACjrB,KAAK,CACX;IACD,IAAI25B,SAAS,EAAE;MACb,IAAI,CAACz5B,MAAM,IAAI2qB,WAAW;;IAG5B,MAAMrO,MAAM,GAAG,IAAI,CAACw5B,YAAY,CAAChqC,GAAG,EAAE6e,WAAW,CAAC;IAElD,MAAMirB,SAAS,GAAGhb,GAAG,CAAChrB,SAAS,CAAC,CAAC,EAAE8lC,YAAY,CAAC;IAChDA,YAAY,GAAG9a,GAAG,CAACjrB,OAAO,CAAC,SAAS,CAAC;IAErC,MAAMkmC,OAAO,GAAGjb,GAAG,CAAChrB,SAAS,CAAC8lC,YAAY,CAAC;IAC3CG,OAAO,CAACjmC,SAAS,CAAC8lC,YAAY,CAAC;IAE/B9a,GAAG,GAAGgb,SAAS,GAAGt5B,MAAM,GAAGu5B,OAAO;IAElC,MAAMmC,WAAW,GAAGpd,GAAG,CAACjrB,OAAO,CAAC,sBAAsB,CAAC,GAAG,EAAE;IAE5D,IAAI8pB,SAAS,EAAE;MACbmB,GAAG,GAAG,CACJA,GAAG,CAACzX,KAAK,CAAC,CAAC,EAAE60B,WAAW,CAAC,EACzB5sB,UAAU,EACVwP,GAAG,CAACzX,KAAK,CAAC60B,WAAW,CAAC,CACvB,CAACxJ,IAAI,CAAC,EAAE,CAAC;;IAEZ5T,GAAG,GAAG,IAAI,CAACmc,aAAa,CAACnc,GAAG,CAAC;IAE7B,OAAOA,GAAG;EACZ;EAEQkb,YAAY,CAAChqC,GAAQ,EAAE6e,WAAmB;IAChD,OACE,SAAS,GACT,IAAI,CAAC7qB,KAAK,GACV,YAAY,GACZ,IAAI,CAACE,MAAM,GACX,cAAc,GACd8L,GAAG,CAACgf,KAAK,GACT,GAAG,IACFhf,GAAG,CAACif,GAAG,GAAGJ,WAAW,CAAC,GACvB,GAAG,GACH,IAAI,CAAC7qB,KAAK,GACV,GAAG,GACH,IAAI,CAACE,MAAM,GACX,IAAI;EAER;EAEA;;;;EAIQ+3C,uBAAuB,CAACjsC,GAAQ;IACtC,IAAIA,GAAG,CAACgf,KAAK,GAAG,CAAC,EAAE;MACjB,IAAIhf,GAAG,CAACsrC,MAAM,GAAG,CAAC,EAAE;QAClB,IAAI,CAACt3C,KAAK,GAAGF,IAAI,CAACgO,GAAG,CAAC9B,GAAG,CAACgf,KAAK,GAAGhf,GAAG,CAACsrC,MAAM,CAAC;OAC9C,MAAM;QACL,IAAI,CAACt3C,KAAK,GAAGF,IAAI,CAACgO,GAAG,CAAC9B,GAAG,CAACgf,KAAK,CAAC,GAAGhf,GAAG,CAACsrC,MAAM;;KAEhD,MAAM;MACL,IAAI,CAACt3C,KAAK,GAAGgM,GAAG,CAACsrC,MAAM,GAAGtrC,GAAG,CAACgf,KAAK;;IAGrC,IAAIhf,GAAG,CAACif,GAAG,GAAG,CAAC,EAAE;MACf,IAAIjf,GAAG,CAACurC,KAAK,GAAG,CAAC,EAAE;QACjB,IAAI,CAACr3C,MAAM,GAAGJ,IAAI,CAACgO,GAAG,CAAC9B,GAAG,CAACif,GAAG,GAAGjf,GAAG,CAACurC,KAAK,CAAC;OAC5C,MAAM;QACL,IAAI,CAACr3C,MAAM,GAAGJ,IAAI,CAACgO,GAAG,CAAC9B,GAAG,CAACif,GAAG,CAAC,GAAGjf,GAAG,CAACurC,KAAK;;KAE9C,MAAM;MACL,IAAI,CAACr3C,MAAM,GAAG8L,GAAG,CAACurC,KAAK,GAAGvrC,GAAG,CAACif,GAAG;;IAGnC;IACA,IAAI,IAAI,CAAC/qB,MAAM,GAAG,GAAG,EAAE;MACrB,IAAI,CAACA,MAAM,IAAI,GAAG;MAClB8L,GAAG,CAACif,GAAG,IAAI,GAAG;MACdjf,GAAG,CAACurC,KAAK,IAAI,GAAG;;IAElB,IAAI,IAAI,CAACv3C,KAAK,GAAG,GAAG,EAAE;MACpB,IAAI,CAACA,KAAK,IAAI,GAAG;MACjBgM,GAAG,CAACgf,KAAK,IAAI,GAAG;MAChBhf,GAAG,CAACsrC,MAAM,IAAI,GAAG;;IAEnB,OAAO,CAAC,IAAI,CAACp3C,MAAM,EAAE,IAAI,CAACF,KAAK,CAAC;EAClC;EAEAuzC,UAAU,CAACH,QAAa,EAAED,eAAoB;IAC5C,MAAMgF,aAAa,GAAG/E,QAAQ,CAAC9hC,sBAAsB,CAAC,gBAAgB,CAAC;IACvE,MAAM8mC,aAAa,GAAGhF,QAAQ,CAAC9hC,sBAAsB,CAAC,gBAAgB,CAAC;IACvE,MAAMumC,SAAS,GAAGzE,QAAQ,CAAC3hC,YAAY,CAAC,WAAW,CAAC;IACpD,MAAMrO,SAAS,GAAGgwC,QAAQ,CAAC3hC,YAAY,CAAC,WAAW,CAAC;IAEpD,IAAI0mC,aAAa,CAAC,CAAC,CAAC,EAAE;MACpBA,aAAa,CAAC,CAAC,CAAC,CAAC14B,UAAU,CAACa,WAAW,CAAC63B,aAAa,CAAC,CAAC,CAAC,CAAC;;IAE3D,IAAIC,aAAa,CAAC,CAAC,CAAC,EAAE;MACpBA,aAAa,CAAC,CAAC,CAAC,CAAC34B,UAAU,CAACa,WAAW,CAAC83B,aAAa,CAAC,CAAC,CAAC,CAAC;;IAG3D;IACA,IAAIP,SAAS,EAAE;MACbzE,QAAQ,CAACiF,eAAe,CAAC,WAAW,CAAC;;IAEvC,IAAIj1C,SAAS,EAAE;MACbgwC,QAAQ,CAACiF,eAAe,CAAC,WAAW,CAAC;;IAGvC,MAAMvd,GAAG,GAAG,IAAIwd,aAAa,EAAE,CAACC,iBAAiB,CAACpF,eAAe,CAAC;IAElE;IACA,IAAI0E,SAAS,EAAE;MACbzE,QAAQ,CAACphC,YAAY,CAAC,WAAW,EAAE6lC,SAAS,CAAC;;IAE/C,IAAIz0C,SAAS,EAAE;MACbgwC,QAAQ,CAACphC,YAAY,CAAC,WAAW,EAAE5O,SAAS,CAAC;;IAE/C,OAAO03B,GAAG;EACZ;EAEA4Y,QAAQ;IACN,OAAO,IAAI,CAAC1zC,KAAK;EACnB;EAEA2zC,SAAS;IACP,OAAO,IAAI,CAACzzC,MAAM;EACpB;;AAhSWq2C,UAAU;mBAAVA,UAAU;AAAA;AAAVA,UAAU;SAAVA,UAAU;EAAApR,SAAVoR,UAAU;EAAAnR,YAFT;AAAM;;;;;;;;;;;;;;;;;ACJoE;;;AAMlF,MAAOoT,UAAU;EAGrB9rB,YAAoBkM,cAA8B;IAA9B,mBAAc,GAAdA,cAAc;IAF1B,cAAS,GAAG,EAAE;EAE+B;EAErDoa,aAAa,CACXptC,KAAa,EACbmlB,WAAmB,EACnB6K,GAAiB,EACjB+D,SAAkB,EAClBC,kBAA2B;IAE3B,IAAI,CAAC6e,SAAS,GAAG,IAAI,CAAC7f,cAAc,CAAC8f,UAAU,EAAE;IAEjD,IAAIrsB,IAAI,GAAG8B,eAAe,CAAC,IAAI,CAACsqB,SAAS,CAAC;IAE1C,IAAI7C,YAAY,GAAGvpB,IAAI,CAACxc,OAAO,CAAC,SAAS,CAAC;IAE1C,IAAI;MAAE7P,KAAK;MAAEE,MAAM;MAAEuT;IAAO,CAAE,GAAG,IAAI,CAACihC,kBAAkB,CAACroB,IAAI,CAAC;IAE9D,IAAIrB,KAAa;IACjB,IAAIssB,MAAc;IAClB,IAAIrsB,GAAW;IACf,IAAIssB,KAAa;IACjB,MAAM1B,YAAY,GAAGpiC,OAAO,CAACmN,KAAK,CAAC,IAAI,CAAC;IAExCoK,KAAK,GAAG,CAAC6qB,YAAY,CAAC,CAAC,CAAC;IACxB5qB,GAAG,GAAG,CAAC4qB,YAAY,CAAC,CAAC,CAAC;IACtByB,MAAM,GAAG,CAACzB,YAAY,CAAC,CAAC,CAAC;IACzB0B,KAAK,GAAG,CAAC1B,YAAY,CAAC,CAAC,CAAC;IAExB,IAAIyB,MAAM,GAAG,GAAG,EAAE;MAChBA,MAAM,IAAI,GAAG;MACbt3C,KAAK,IAAI,GAAG;;IAGd,MAAM;MAAEsrB,UAAU;MAAET;IAAW,CAAE,GAAGC,sGAAmC,CACrEllB,KAAK,EACLmlB,WAAW,EACXC,KAAK,EACLC,GAAG,EACHjrB,KAAK,CACN;IACD,IAAI25B,SAAS,EAAE;MACb;MACAz5B,MAAM,IAAI2qB,WAAW,GAAG,EAAE;;IAG5B,MAAM8tB,QAAQ,GAAGtsB,IAAI,CAACxc,OAAO,CAAC,SAAS,CAAC;IACxC,IAAG+pB,kBAAkB,EAAE;MACrB,MAAMgf,oBAAoB,GAAG,iCAAiC;MAC9DvsB,IAAI,GAAG,CACLA,IAAI,CAAChJ,KAAK,CAAC,CAAC,EAAEs1B,QAAQ,CAAC,EACvBC,oBAAoB,EACpBvsB,IAAI,CAAChJ,KAAK,CAACs1B,QAAQ,CAAC,CACrB,CAACjK,IAAI,CAAC,EAAE,CAAC;;IAGZ,MAAMlyB,MAAM,GAAG,IAAI,CAACw5B,YAAY,CAC9Bh2C,KAAK,EACLE,MAAM,EACN8qB,KAAK,EACLC,GAAG,EACHqsB,MAAM,EACNC,KAAK,EACL5d,SAAS,CACV;IAED,MAAMmc,SAAS,GAAGzpB,IAAI,CAACvc,SAAS,CAAC,CAAC,EAAE8lC,YAAY,CAAC;IACjDA,YAAY,GAAGvpB,IAAI,CAACxc,OAAO,CAAC,WAAW,CAAC;IAExC,MAAMkmC,OAAO,GAAG1pB,IAAI,CAACvc,SAAS,CAAC8lC,YAAY,CAAC;IAC5CG,OAAO,CAACjmC,SAAS,CAAC8lC,YAAY,CAAC;IAE/BvpB,IAAI,GAAGypB,SAAS,GAAGt5B,MAAM,GAAGu5B,OAAO;IAEnC,MAAMmC,WAAW,GAAG,IAAI,CAACW,qBAAqB,CAACxsB,IAAI,CAAC;IAEpD,IAAIsN,SAAS,EAAE;MACbtN,IAAI,GAAG,CACLA,IAAI,CAAChJ,KAAK,CAAC,CAAC,EAAE60B,WAAW,CAAC,EAC1B5sB,UAAU,EACVe,IAAI,CAAChJ,KAAK,CAAC60B,WAAW,CAAC,CACxB,CAACxJ,IAAI,CAAC,EAAE,CAAC;;IAGZ,OAAO,IAAI,CAACoK,SAAS,CAACzsB,IAAI,EAAEuJ,GAAG,CAAC;EAClC;EAEQijB,qBAAqB,CAACxsB,IAAY;IACxC,IAAI6rB,WAAW,GAAG7rB,IAAI,CAACxc,OAAO,CAAC,SAAS,CAAC;IACzC,IAAIqoC,WAAW,GAAG,CAAC,EAAE;MACnBA,WAAW,GAAG7rB,IAAI,CAACxc,OAAO,CAAC,gBAAgB,CAAC,GAAG,EAAE;KAClD,MAAM;MACLqoC,WAAW,IAAI,CAAC;;IAElB,OAAOA,WAAW;EACpB;EAEQlC,YAAY,CAClBh2C,KAAa,EACbE,MAAc,EACd8qB,KAAa,EACbC,GAAW,EACXqsB,MAAc,EACdC,KAAa,EACb5d,SAAkB;IAElB,OACE,SAAS,GACT35B,KAAK,GACL,aAAa,GACbE,MAAM,GACN,aAAa,GACb8qB,KAAK,GACL,GAAG,IACF2O,SAAS,GAAG1O,GAAG,GAAG,EAAE,GAAGA,GAAG,CAAC,GAC5B,GAAG,GACHqsB,MAAM,GACN,GAAG,IACFC,KAAK,GAAG,EAAE,CAAC;EAEhB;EAEQ7C,kBAAkB,CAAC5Z,GAAW;IAKpC,MAAM6Z,iBAAiB,GACrB,wDAAwD;IAC1D,MAAMhlC,KAAK,GAAGmrB,GAAG,CAACnrB,KAAK,CAACglC,iBAAiB,CAAC;IAC1C,IAAIhlC,KAAK,EAAE;MACT,OAAO;QAAE3P,KAAK,EAAE,CAAC2P,KAAK,CAAC,CAAC,CAAC;QAAEzP,MAAM,EAAE,CAACyP,KAAK,CAAC,CAAC,CAAC;QAAE8D,OAAO,EAAE9D,KAAK,CAAC,CAAC;MAAC,CAAE;;IAEnE,OAAO;MAAE3P,KAAK,EAAE,CAAC;MAAEE,MAAM,EAAE,CAAC;MAAEuT,OAAO,EAAE;IAAE,CAAE;EAC7C;EAEQqlC,SAAS,CAACzsB,IAAY,EAAEuJ,GAAiB;IAC/CvJ,IAAI,IAAI,gBAAgB,GAAGtG,IAAI,CAACkhB,SAAS,CAACrR,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,GAAG,eAAe;IACzE,OAAOvJ,IAAI;EACb;;AA7IWmsB,UAAU;mBAAVA,UAAU;AAAA;AAAVA,UAAU;SAAVA,UAAU;EAAArT,SAAVqT,UAAU;EAAApT,YAFT;AAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNgD;AAEK;AACP;AASf;AAE+C;AACvC;AACS;AACH;AAI1B;;;;;;;;AAMjC,MAAO4T,wBAAwB;EAWnCtsB,YACUhrB,qBAA4C,EAC5Cu3C,mBAAwC,EACxC5wB,YAA0B,EAC1Bod,eAAgC,EAChChG,aAA4B,EAC5ByZ,0BAAsD;IALtD,0BAAqB,GAArBx3C,qBAAqB;IACrB,wBAAmB,GAAnBu3C,mBAAmB;IACnB,iBAAY,GAAZ5wB,YAAY;IACZ,oBAAe,GAAfod,eAAe;IACf,kBAAa,GAAbhG,aAAa;IACb,+BAA0B,GAA1ByZ,0BAA0B;IAbpC,UAAK,GAAGtsB,mEAAa;IACrB,gBAAW,GAAGC,yEAAmB;IACzB,0BAAqB,GAA+B,IAAI;IAExD,iCAA4B,GAClC,IAAI8V,wDAAY,EAAuB;IAUvC,IAAI,CAAC2P,iBAAiB,GAAG,IAAI,CAACjqB,YAAY,CAAC8Z,MAAM,CAAChK,SAAS,CACxDvyB,KAAa,IAAI;MAChB,IAAI,CAACA,KAAK,GAAGA,KAAK;IACpB,CAAC,CACF;IACD,IAAI,CAAC2sC,uBAAuB,GAAG,IAAI,CAAClqB,YAAY,CAAC+Z,YAAY,CAACjK,SAAS,CACpEpN,WAAmB,IAAI;MACtB,IAAI,CAACA,WAAW,GAAGA,WAAW;IAChC,CAAC,CACF;EACH;EAEAynB,WAAW;IACT,IAAI,CAACF,iBAAiB,CAACG,WAAW,EAAE;IACpC,IAAI,CAACF,uBAAuB,CAACE,WAAW,EAAE;EAC5C;EAEA,IAAI9F,0BAA0B;IAC5B,OAAO,IAAI,CAACwM,4BAA4B,CAACnU,YAAY,EAAE;EACzD;EAEA8H,wBAAwB;IACtB,MAAMnnB,MAAM,GAAwB;MAClCxlB,IAAI,EAAE,IAAI,CAAC0sC,qBAAqB,EAAE1sC,IAAI,IAAI,EAAE;MAC5CmmB,MAAM,EAAE,IAAI,CAACumB,qBAAqB,EAAEvmB,MAAM,IAAI,IAAI7C,mFAAU,EAAE;MAC9D8C,WAAW,EAAE,IAAI,CAACsmB,qBAAqB,EAAEtmB,WAAW,IAAI,IAAI9C,mFAAU;KACvE;IACD,IAAI,CAACopB,qBAAqB,GAAG,IAAI;IACjC,OAAOlnB,MAAM;EACf;EAEA2a,SAAS,CAACmQ,KAAW,EAAErQ,QAAgB,EAAEgZ,KAAc;IACrD,MAAMC,UAAU,GAAG,IAAI5c,UAAU,EAAE;IACnC,MAAM6c,SAAS,GAAGP,0EAAwB,CAAC3Y,QAAQ,EAAEgZ,KAAK,CAAC;IAE3D;IACA,IAAI,CAAC/wB,YAAY,CAACM,yBAAyB,CAAC2wB,SAAS,EAAE,IAAI,EAAE,KAAK,CAAC;IAEnED,UAAU,CAAC1c,SAAS,GAAIllB,CAAC,IAAI;MAC3B,IAAIA,CAAC,IAAIA,CAAC,CAAC7Z,MAAM,EAAE;QACjB,IAAI,CAAC27C,kBAAkB,CAAC9hC,CAAC,CAAC7Z,MAAM,CAACqR,MAAM,EAAEmqC,KAAK,EAAE,KAAK,CAAC;;IAE1D,CAAC;IAEDC,UAAU,CAAChc,UAAU,CAACoT,KAAK,CAAC;EAC9B;EAEAlQ,SAAS,CAACkQ,KAAW,EAAErQ,QAAgB,EAAEgZ,KAAc;IACrD,MAAMC,UAAU,GAAG,IAAI5c,UAAU,EAAE;IACnC,MAAM6c,SAAS,GAAGP,0EAAwB,CAAC3Y,QAAQ,EAAEgZ,KAAK,CAAC;IAE3D;IACA,IAAI,CAAC/wB,YAAY,CAACM,yBAAyB,CAAC2wB,SAAS,EAAE,IAAI,EAAE,KAAK,CAAC;IAEnED,UAAU,CAAC1c,SAAS,GAAIllB,CAAC,IAAI;MAC3B,IAAIA,CAAC,IAAIA,CAAC,CAAC7Z,MAAM,EAAE;QACjB,IAAI,CAAC27C,kBAAkB,CAAC9hC,CAAC,CAAC7Z,MAAM,CAACqR,MAAM,EAAEmqC,KAAK,EAAE,IAAI,CAAC;;IAEzD,CAAC;IAEDC,UAAU,CAAChc,UAAU,CAACoT,KAAK,CAAC;EAC9B;EAEQ8I,kBAAkB,CACxBjrC,IAAiC,EACjC8qC,KAAc,EACdI,KAAc;IAEd,IAAIC,OAAO;IACX,IAAI,OAAOnrC,IAAI,KAAK,QAAQ,EAAE;MAC5B,IAAI8qC,KAAK,EAAE;QACTK,OAAO,GAAG,IAAI,CAACC,iBAAiB,CAACprC,IAAI,CAAC;OACvC,MAAM;QACLmrC,OAAO,GAAGnrC,IAAI;;MAGhB,IAAIvQ,QAAe;MACnB,IAAI4nB,MAA2B;MAC/B,IAAI2I,cAIH;MAED,IAAIqrB,YAAY,GAAG,IAAI,CAACC,mBAAmB,CAACH,OAAO,EAAEL,KAAK,CAAC;MAC3D,IAAIO,YAAY,IAAI,IAAI,EAAE;QACxB;;MAGF;MACA,IAAIA,YAAY,CAAChkB,MAAM,EAAE;QACvBrH,cAAc,GAAGkrB,KAAK,GAClBG,YAAY,CAAChkB,MAAM,GACnB5P,IAAI,CAACC,KAAK,CAAC2zB,YAAY,CAAChkB,MAAM,CAAC;QACnChQ,MAAM,GAAG0I,oGAAyB,CAACC,cAAc,CAAC;QAClDvwB,QAAQ,GAAGy7C,KAAK,GAAGG,YAAY,CAAC/jB,GAAG,GAAG7P,IAAI,CAACC,KAAK,CAAC2zB,YAAY,CAAC/jB,GAAG,CAAC;OACnE,MAAM;QACL;QACA,IAAI+jB,YAAY,CAACh0B,MAAM,EAAE;UACvB2I,cAAc,GAAGvI,IAAI,CAACC,KAAK,CAAC2zB,YAAY,CAACh0B,MAAM,CAAC;UAChDA,MAAM,GAAG0I,oGAAyB,CAACC,cAAc,CAAC;UAClDvwB,QAAQ,GAAGgoB,IAAI,CAACC,KAAK,CAAC2zB,YAAY,CAAC/jB,GAAG,CAAC;SACxC,MAAM;UACL;UACA73B,QAAQ,GAAGgoB,IAAI,CAACC,KAAK,CAACyzB,OAAO,CAAC;UAC9B9zB,MAAM,GACJ,IAAI,CAACuzB,0BAA0B,CAACnN,0CAA0C,EAAE;;;MAIlF,MAAM8N,aAAa,GAAG,IAAI,CAACC,qBAAqB,CAACn0B,MAAM,CAAC;MAExD,IAAIo0B,WAAW,GAAGh8C,QAAQ,CAACA,QAAQ,CAACiQ,MAAM,GAAG,CAAC,CAAC;MAC/C,IAAI,CAAC+rC,WAAW,CAAC18C,EAAE,EAAE;QACnB08C,WAAW,GAAGh8C,QAAQ,CAACgpC,GAAG,EAAE;QAC5B,IAAIiT,mBAAmB,GAAGD,WAAW;QAErC;QACA;QACA,IAAIC,mBAAmB,CAAC5F,OAAO,EAAE;UAC/B2F,WAAW,GAAGh8C,QAAQ,CAACgpC,GAAG,EAAE;;QAG9B,IAAIiT,mBAAmB,CAAC5F,OAAO,EAAE;UAC/B4F,mBAAmB,GAAGA,mBAAmB,CAAC5F,OAAiB;SAC5D,MAAM;UACL4F,mBAAmB,GAAG,GAAG;UACzB;;;QAEFj8C,QAAQ,GAAG,IAAI,CAACk8C,mBAAmB,CAACD,mBAAmB,EAAEj8C,QAAQ,CAAC;;MAGpE,IACE,CAAC,IAAI,CAACk7C,mBAAmB,CAACiB,iDAAiD,CACzEn8C,QAAQ,CACT,EACD;QACA,IAAI,CAACo8C,sBAAsB,CAACf,KAAK,GAAG,KAAK,GAAG,KAAK,CAAC;;MAGpD,IAAI,CAAC/wB,YAAY,CAACM,yBAAyB,CACzC,IAAI,EACJoxB,WAAW,CAAC5F,IAAI,EAChB,KAAK,CACN;MAED,IAAI,CAAC8E,mBAAmB,CAACmB,eAAe,CAACr8C,QAAQ,CAAC;MAElD,IAAI,CAACooC,oBAAoB,CAACpoC,QAAQ,EAAE4nB,MAAM,CAAC;MAC3C,IAAI,CAAC8f,eAAe,CAACW,WAAW,CAACroC,QAAQ,EAAE87C,aAAa,EAAEl0B,MAAM,CAAC;;EAErE;EAEQs0B,mBAAmB,CACzBD,mBAA2B,EAC3Bj8C,QAA0B;IAE1B,MAAMs8C,aAAa,GAAG,CAACL,mBAAmB,CAAClqC,SAAS,CAClD,CAAC,EACDkqC,mBAAmB,CAACM,WAAW,CAAC,GAAG,CAAC,CACrC;IACD,IAAID,aAAa,IAAI,GAAG,EAAE;MACxBt8C,QAAQ,GACN,IAAI,CAACk7C,mBAAmB,CAACsB,gCAAgC,CAACx8C,QAAQ,CAAC;MACrE,IAAI,CAACy8C,sBAAsB,CAACH,aAAa,CAAC;;IAE5C,OAAOt8C,QAAQ;EACjB;EAEQ67C,mBAAmB,CAACH,OAAe,EAAEL,KAAc;IACzD,IAAIO,YAAY,GAAG,IAAI;IACvB,IAAI;MACFA,YAAY,GAAG5zB,IAAI,CAACC,KAAK,CAACyzB,OAAO,CAAC;KACnC,CAAC,OAAOhiC,CAAC,EAAE;MACV,IAAI,CAAC0iC,sBAAsB,CAACf,KAAK,GAAG,KAAK,GAAG,KAAK,CAAC;;IAEpD,OAAOO,YAAY;EACrB;EAEQD,iBAAiB,CAACe,OAAe;IACvCA,OAAO,GAAGA,OAAO,CAAC3qC,SAAS,CAAC2qC,OAAO,CAAC5qC,OAAO,CAAC,OAAO,CAAC,CAAC;IACrD,OAAO4qC,OAAO,CAAC95C,QAAQ,CAAC,MAAM,CAAC,IAAI85C,OAAO,CAAC95C,QAAQ,CAAC,KAAK,CAAC,EAAE;MAC1D85C,OAAO,GAAGA,OAAO,CAACz1C,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAACA,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;;IAE1Dy1C,OAAO,GAAGA,OAAO,CAACz1C,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;IACtCy1C,OAAO,GAAGA,OAAO,CAACz1C,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC;IACvC,OAAOy1C,OAAO;EAChB;EAEAX,qBAAqB,CAAC5qB,mBAAwC;IAC5D,MAAMwrB,YAAY,GAAGxrB,mBAAmB,CAAC5I,MAAM,CAACpkB,SAAS,EAAE;IAC3D,MAAMy4C,iBAAiB,GAAGzrB,mBAAmB,CAAC3I,WAAW,CAACrkB,SAAS,EAAE;IAErE,MAAM04C,gBAAgB,GAAG,IAAI,CAACl5C,qBAAqB,CAACkvC,qBAAqB,CACvE90C,4EAAY,CAACiG,KAAK,CACnB;IACD,MAAM84C,qBAAqB,GACzB,IAAI,CAACn5C,qBAAqB,CAACkvC,qBAAqB,CAAC90C,4EAAY,CAAC0G,UAAU,CAAC;IAE3E,IAAIs4C,OAAO,GAAG,KAAK;IAEnB,IACEJ,YAAY,CAAC1sC,MAAM,KAAK4sC,gBAAgB,CAAC5sC,MAAM,IAC/C2sC,iBAAiB,CAAC3sC,MAAM,KAAK6sC,qBAAqB,CAAC7sC,MAAM,EACzD;MACA,OAAO,IAAI;;IAGb,KAAK,IAAI/L,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGy4C,YAAY,CAAC1sC,MAAM,EAAE/L,CAAC,EAAE,EAAE;MAC5C64C,OAAO,GACL,IAAI,CAACC,SAAS,CAACH,gBAAgB,CAAC34C,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC84C,SAAS,CAACL,YAAY,CAACz4C,CAAC,CAAC,CAAC;MACzE,IAAI64C,OAAO,EAAE;QACX74C,CAAC,GAAGy4C,YAAY,CAAC1sC,MAAM;;;IAG3B,IAAI8sC,OAAO,EAAE;MACX,OAAOA,OAAO;;IAEhB,KAAK,IAAI74C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG04C,iBAAiB,CAAC3sC,MAAM,EAAE/L,CAAC,EAAE,EAAE;MACjD64C,OAAO,GACL,IAAI,CAACC,SAAS,CAACF,qBAAqB,CAAC54C,CAAC,CAAC,CAAC,KACxC,IAAI,CAAC84C,SAAS,CAACJ,iBAAiB,CAAC14C,CAAC,CAAC,CAAC;MACtC,IAAI64C,OAAO,EAAE;QACX74C,CAAC,GAAG04C,iBAAiB,CAAC3sC,MAAM;;;IAGhC,OAAO8sC,OAAO;EAChB;EACQC,SAAS,CAAC56C,IAAY;IAC5B,OAAOA,IAAI,CACR6E,OAAO,CAAClJ,4EAAY,CAACiG,KAAK,EAAE,EAAE,CAAC,CAC/BiD,OAAO,CAAClJ,4EAAY,CAAC0G,UAAU,EAAE,EAAE,CAAC;EACzC;EAEQ2jC,oBAAoB,CAC1BpoC,QAA0B,EAC1B4nB,MAA2B;IAE3B,MAAMqgB,UAAU,GAAG,IAAI,CAACtkC,qBAAqB,CAACukC,iBAAiB,CAC7DloC,QAAQ,EACRjC,4EAAY,CAACiG,KAAK,CACnB;IACD,MAAMmkC,eAAe,GAAG,IAAI,CAACxkC,qBAAqB,CAACukC,iBAAiB,CAClEloC,QAAQ,EACRjC,4EAAY,CAAC0G,UAAU,CACxB;IACD,IAAI,CAACd,qBAAqB,CAACykC,oBAAoB,CAC7CH,UAAU,EACVE,eAAe,EACfvgB,MAAM,CACP;IAED,IAAI,CAACq1B,+BAA+B,CAACr1B,MAAM,CAAC;EAC9C;EAEQ60B,sBAAsB,CAACpG,OAAe;IAC5C,MAAMxuC,KAAK,GAAG,uBAAuB;IACrC,MAAM0I,IAAI,GACR,4CAA4C,GAC5C8lC,OAAO,GACP,wFAAwF;IAE1F,MAAMzuB,MAAM,GAAG,IAAI2Z,sEAAe,EAAE;IACpC3Z,MAAM,CAAC2b,YAAY,GAAG,KAAK;IAC3B3b,MAAM,CAAC4b,SAAS,GAAG,IAAI;IAEvB5b,MAAM,CAAC0G,IAAI,GAAG,IAAIuD,yEAAc,CAAChqB,KAAK,EAAE0I,IAAI,EAAE,IAAI,CAAC;IAEnD,IAAI,CAACmxB,aAAa,CAAC+B,UAAU,CAACrH,uGAAmB,EAAExU,MAAM,CAAC;EAC5D;EAEQq1B,+BAA+B,CAACr1B,MAA2B;IACjE,IAAI,CAACknB,qBAAqB,GAAGlnB,MAAM;IACnC,IAAI,CAACwzB,4BAA4B,CAACvV,IAAI,CAACje,MAAM,CAAC;EAChD;EAEQw0B,sBAAsB,CAACt7C,IAAY;IACzC,MAAM8mB,MAAM,GAAG,IAAI2Z,sEAAe,EAAE;IACpC3Z,MAAM,CAAC2b,YAAY,GAAG,KAAK;IAC3B3b,MAAM,CAAC4b,SAAS,GAAG,IAAI;IACvB5b,MAAM,CAAC0G,IAAI,GAAG,IAAIuD,yEAAc,CAC9B,qBAAqB,EACrB,eAAe,GACb/wB,IAAI,GACJ,oEAAoE,EACtE,IAAI,EACJ,KAAK,CACN;IAED,IAAI,CAAC4gC,aAAa,CAAC+B,UAAU,CAACrH,uGAAmB,EAAExU,MAAM,CAAC;EAC5D;;AArTWqzB,wBAAwB;mBAAxBA,wBAAwB;AAAA;AAAxBA,wBAAwB;SAAxBA,wBAAwB;EAAA7T,SAAxB6T,wBAAwB;EAAA5T,YAFvB;AAAM;;;;;;;;;;;;;;;;ACxB8C;;AAKlE;;;;AAOM,MAAO6V,mBAAmB;EAC9Bf,iDAAiD,CAC/Cn8C,QAA0B;IAE1B,MAAMilB,UAAU,GAA6B,EAAE;IAC/C,MAAMk4B,SAAS,GAAa,EAAE;IAE9B,IAAIt/B,QAAQ,GAAG,IAAI;IAEnB7d,QAAQ,CAACQ,OAAO,CAAEK,OAAO,IAAI;MAC3B,MAAMC,IAAI,GAAGD,OAAO,CAACC,IAAI;MACzB,IAAIA,IAAI,KAAK/C,4EAAY,CAACgD,QAAQ,IAAID,IAAI,KAAK/C,4EAAY,CAACiD,UAAU,EAAE;QACtEikB,UAAU,CAACpmB,IAAI,CAACgC,OAAiC,CAAC;OACnD,MAAM;QACLs8C,SAAS,CAACt+C,IAAI,CAACgC,OAAO,CAACvB,EAAE,CAAC;;IAE9B,CAAC,CAAC;IAEF2lB,UAAU,CAACzkB,OAAO,CAAEokB,QAAQ,IAAI;MAC9B,MAAMhlB,MAAM,GAAGglB,QAAQ,CAAChlB,MAAM;MAC9B,MAAMC,MAAM,GAAG+kB,QAAQ,CAAC/kB,MAAM;MAC9B,IAAI,CAACs9C,SAAS,CAACv6C,QAAQ,CAAChD,MAAM,CAAC,IAAI,CAACu9C,SAAS,CAACv6C,QAAQ,CAAC/C,MAAM,CAAC,EAAE;QAC9Dge,QAAQ,GAAG,KAAK;QAChB,MAAMu/B,aAAa,GAAGp9C,QAAQ,CAAC8R,OAAO,CAAC8S,QAAQ,CAAC;QAChD5kB,QAAQ,GAAGA,QAAQ,CAAC8pB,MAAM,CAACszB,aAAa,EAAE,CAAC,CAAC;;IAEhD,CAAC,CAAC;IACF,OAAOv/B,QAAQ;EACjB;EAEA;;;;;EAKA2+B,gCAAgC,CAC9Bx8C,QAA0B;IAE1B,KAAK,MAAMa,OAAO,IAAIb,QAAQ,EAAE;MAC9B,IAAIa,OAAO,CAACC,IAAI,KAAK/C,4EAAY,CAAC0G,UAAU,EAAE;QAC5C5D,OAAO,CAACC,IAAI,GAAG/C,4EAAY,CAAC0G,UAAU,GAAG,UAAU;OACpD,MAAM,IAAI5D,OAAO,CAACC,IAAI,KAAK/C,4EAAY,CAAC0G,UAAU,GAAG,QAAQ,EAAE;QAC9D5D,OAAO,CAACC,IAAI,GAAG/C,4EAAY,CAAC0G,UAAU,GAAG,cAAc;;;IAG3D,OAAOzE,QAAQ;EACjB;EAEA;;;EAGAq8C,eAAe,CAACr8C,QAA0B;IACxC,IAAIitB,KAAK,GAAG,CAAC;IACb,IAAIC,GAAG,GAAG,CAAC;IACX,IAAImwB,OAAO,GAAG,IAAI;IAElB,IAAI,CAACC,gBAAgB,CAACt9C,QAAQ,EAAEq9C,OAAO,EAAEpwB,KAAK,EAAEC,GAAG,CAAC;IAEpD,IAAID,KAAK,GAAG,EAAE,IAAIA,KAAK,GAAG,GAAG,IAAIC,GAAG,GAAG,CAAC,IAAIA,GAAG,GAAG,EAAE,EAAE;MACpD;MACAD,KAAK,IAAI,EAAE;MACXC,GAAG,IAAI,EAAE;MAETltB,QAAQ,CAACQ,OAAO,CAAEK,OAAO,IACvB,IAAI,CAAC08C,qBAAqB,CAAC18C,OAAO,EAAEosB,KAAK,EAAEC,GAAG,CAAC,CAChD;;EAEL;EAEQqwB,qBAAqB,CAC3B18C,OAAuB,EACvBosB,KAAa,EACbC,GAAW;IAEX,IACErsB,OAAO,CAACC,IAAI,KAAK/C,4EAAY,CAACgD,QAAQ,IACtCF,OAAO,CAACC,IAAI,KAAK/C,4EAAY,CAACiD,UAAU,EACxC;MACA,MAAMsO,SAAS,GAAIzO,OAAkC,CAACyO,SAAS;MAC/DA,SAAS,CAAC9O,OAAO,CAAE2S,KAAe,IAAI;QACpCA,KAAK,CAACrR,CAAC,IAAImrB,KAAK;QAChB9Z,KAAK,CAACjR,CAAC,IAAIgrB,GAAG;QAEd,IAAI/Z,KAAK,CAACqD,QAAQ,EAAE;UAClBrD,KAAK,CAACqD,QAAQ,CAAC1U,CAAC,GAAGqR,KAAK,CAACrR,CAAC;UAC1BqR,KAAK,CAACqD,QAAQ,CAACtU,CAAC,GAAGiR,KAAK,CAACjR,CAAC;;MAE9B,CAAC,CAAC;KACH,MAAM;MACLrB,OAAO,CAACiB,CAAC,IAAImrB,KAAK;MAClBpsB,OAAO,CAACqB,CAAC,IAAIgrB,GAAG;;EAEpB;EAEQowB,gBAAgB,CACtBt9C,QAA0B,EAC1Bq9C,OAAgB,EAChBpwB,KAAa,EACbC,GAAW;IAEXltB,QAAQ,CAACQ,OAAO,CAAEK,OAAO,IAAI;MAC3B,IAAI64C,OAAO;MACX,IAAIE,KAAK;MACT,IACE/4C,OAAO,CAACC,IAAI,KAAK/C,4EAAY,CAACgD,QAAQ,IACtCF,OAAO,CAACC,IAAI,KAAK/C,4EAAY,CAACiD,UAAU,EACxC;QACA,IAAIq8C,OAAO,EAAE;UACXpwB,KAAK,GAAGpsB,OAAO,CAACiB,CAAC;UACjBorB,GAAG,GAAGrsB,OAAO,CAACqB,CAAC;UACfm7C,OAAO,GAAG,KAAK;;QAEjB3D,OAAO,GAAG74C,OAAO,CAACiB,CAAC;QACnB83C,KAAK,GAAG/4C,OAAO,CAACqB,CAAC;QACjB,IAAIw3C,OAAO,GAAGzsB,KAAK,EAAE;UACnBA,KAAK,GAAGysB,OAAO;;QAEjB,IAAIE,KAAK,GAAG1sB,GAAG,EAAE;UACfA,GAAG,GAAG0sB,KAAK;;;IAGjB,CAAC,CAAC;EACJ;;AA1HWsD,mBAAmB;mBAAnBA,mBAAmB;AAAA;AAAnBA,mBAAmB;SAAnBA,mBAAmB;EAAA9V,SAAnB8V,mBAAmB;EAAA7V,YAFlB;AAAM;;;;;;;;;;;;;;;;;;;ACT8C;;;;;AAS5D,MAAOmW,sBAAsB;EAIjC7uB,YACU8uB,iBAAoC,EACpCnwC,sBAA8C,EAC9C3J,qBAA4C;IAF5C,sBAAiB,GAAjB85C,iBAAiB;IACjB,2BAAsB,GAAtBnwC,sBAAsB;IACtB,0BAAqB,GAArB3J,qBAAqB;IAN/B,mBAAc,GAAiB,EAAE;IACjC,qBAAgB,GAA2B,EAAE;EAM1C;EAEHmhC,uBAAuB;IACrB,IAAI,CAAC4Y,cAAc,GAAG,EAAE;IACxB,IAAI,CAACC,gBAAgB,GAAG,EAAE;IAE1B,MAAMnR,UAAU,GAAG,IAAI,CAACl/B,sBAAsB,CAAC29B,mBAAmB,EAAE;IAEpEuB,UAAU,CAAChsC,OAAO,CAAEK,OAAO,IAAI;MAC7B,MAAMuB,IAAI,GAAGvB,OAAO,CAAC3B,cAAc,CAACkD,IAAI;MACxC,IACEA,IAAI,IACJA,IAAI,CAAC6N,MAAM,GAAG,CAAC,IACfpP,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACgD,QAAQ,CAAC,IAC5C,CAAC,IAAI,CAAC28C,cAAc,CAACnnC,GAAG,CAAE2Z,CAAC,IAAKA,CAAC,CAAC9tB,IAAI,CAAC,CAACQ,QAAQ,CAACR,IAAI,CAAC,EACtD;QACA,IAAI,CAACs7C,cAAc,CAAC7+C,IAAI,CAAC;UACvBuD,IAAI;UACJojC,YAAY,EAAEpjC;SACf,CAAC;OACH,MAAM,IACLA,IAAI,IACJA,IAAI,CAAC6N,MAAM,GAAG,CAAC,IACfpP,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAAC0G,UAAU,CAAC,IAC9C,CAAC,IAAI,CAACk5C,gBAAgB,CAACpnC,GAAG,CAAEmD,CAAC,IAAKA,CAAC,CAACtX,IAAI,CAAC,CAACQ,QAAQ,CAACR,IAAI,CAAC,EACxD;QACA,MAAMu8B,QAAQ,GAAG99B,OAAO,CAACC,IAAI,CAACmG,OAAO,CAAClJ,4EAAY,CAAC0G,UAAU,EAAE,EAAE,CAAC;QAClE,IAAIiE,IAAI,GAAG,IAAI,CAAC/E,qBAAqB,CAACwqC,aAAa,CAACxP,QAAQ,CAAC;QAC7D,IAAI,CAACj2B,IAAI,EAAE;UACT;;QAEF,IAAI,CAACA,IAAI,CAACuJ,UAAU,CAAC,MAAM,CAAC,EAAE;UAC5BvJ,IAAI,GAAG,qBAAqB,GAAGA,IAAI;;QAErC,IAAI,CAACi1C,gBAAgB,CAAC9+C,IAAI,CAAC;UACzBuD,IAAI;UACJojC,YAAY,EAAEpjC,IAAI;UAClBsG;SACD,CAAC;;IAEN,CAAC,CAAC;IACF,IAAI,CAACg1C,cAAc,CAAC1tB,IAAI,CAAC,CAACE,CAAC,EAAEC,CAAC,KAAI;MAChC,OAAOD,CAAC,CAAC9tB,IAAI,CAACkC,WAAW,EAAE,CAACs5C,aAAa,CAACztB,CAAC,CAAC/tB,IAAI,CAACkC,WAAW,EAAE,CAAC;IACjE,CAAC,CAAC;IACF,IAAI,CAACq5C,gBAAgB,CAAC3tB,IAAI,CAAC,CAACE,CAAC,EAAEC,CAAC,KAAI;MAClC,OAAOD,CAAC,CAAC9tB,IAAI,CAACkC,WAAW,EAAE,CAACs5C,aAAa,CAACztB,CAAC,CAAC/tB,IAAI,CAACkC,WAAW,EAAE,CAAC;IACjE,CAAC,CAAC;EACJ;EAEA2gC,iBAAiB;IACf,OAAO,IAAI,CAACyY,cAAc,CAACp4B,KAAK,EAAE;EACpC;EAEA9G,mBAAmB;IACjB,OAAO,IAAI,CAACm/B,gBAAgB,CAACr4B,KAAK,EAAE;EACtC;EAEAqgB,gBAAgB,CACdP,aAAuB,EACvBC,qBAA+B,EAC/BC,eAAyB,EACzBC,uBAAiC;IAEjC,KAAK,IAAIrhC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmhC,qBAAqB,CAACp1B,MAAM,EAAE/L,CAAC,EAAE,EAAE;MACrD,IAAI,CAACkhC,aAAa,CAAClhC,CAAC,CAAC,EAAE;QACrBkhC,aAAa,CAAClhC,CAAC,CAAC,GAAG,EAAE;;MAEvB,IAAI,EAAEkhC,aAAa,CAAClhC,CAAC,CAAC,IAAImhC,qBAAqB,CAACnhC,CAAC,CAAC,CAAC,EAAE;QACnD,IAAI,CAACu5C,iBAAiB,CAACI,eAAe,CACpCxY,qBAAqB,CAACnhC,CAAC,CAAC,EACxBkhC,aAAa,CAAClhC,CAAC,CAAC,EAChBnG,4EAAY,CAACgD,QAAQ,CACtB;;;IAGL,KAAK,IAAImD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqhC,uBAAuB,CAACt1B,MAAM,EAAE/L,CAAC,EAAE,EAAE;MACvD,IAAI,CAACohC,eAAe,CAACphC,CAAC,CAAC,EAAE;QACvBohC,eAAe,CAACphC,CAAC,CAAC,GAAG,EAAE;;MAEzB,IAAI,EAAEohC,eAAe,CAACphC,CAAC,CAAC,IAAIqhC,uBAAuB,CAACrhC,CAAC,CAAC,CAAC,EAAE;QACvD,IAAI,CAACu5C,iBAAiB,CAACI,eAAe,CACpCtY,uBAAuB,CAACrhC,CAAC,CAAC,EAC1BohC,eAAe,CAACphC,CAAC,CAAC,EAClBnG,4EAAY,CAAC0G,UAAU,CACxB;;;EAGP;;AA/FW+4C,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;SAAtBA,sBAAsB;EAAApW,SAAtBoW,sBAAsB;EAAAnW,YAFrB;AAAM;;;;;;;;;;;;;;;;;;;;ACAd,MAAOyW,iBAAiB;EAC5BnvB,YACUrhB,sBAA8C,EAC9CywC,mBAAwC;IADxC,2BAAsB,GAAtBzwC,sBAAsB;IACtB,wBAAmB,GAAnBywC,mBAAmB;EAC1B;EAEHF,eAAe,CACbG,QAAgB,EAChB7yB,QAAgB,EAChBrqB,IAAkB;IAElB,MAAMm9C,kBAAkB,GAAmB,EAAE;IAE7C,IAAI,CAAC3wC,sBAAsB,CAAC29B,mBAAmB,EAAE,CAACzqC,OAAO,CAAEK,OAAO,IAAI;MACpE,IACEA,OAAO,CAACC,IAAI,CAAC8B,QAAQ,CAAC9B,IAAI,CAAC,IAC3BD,OAAO,CAAC3B,cAAc,CAACkD,IAAI,KAAK47C,QAAQ,EACxC;QACAC,kBAAkB,CAACp/C,IAAI,CAACgC,OAAO,CAAC;;IAEpC,CAAC,CAAC;IAEF,MAAMyF,OAAO,GAAG;MACdtG,QAAQ,EAAEi+C,kBAAkB;MAC5B9yB;KACD;IAED,IAAI,CAAC4yB,mBAAmB,CAACt3C,OAAO,CAAC,+BAA+B,EAAEH,OAAO,CAAC;EAC5E;;AA5BWw3C,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;SAAjBA,iBAAiB;EAAA1W,SAAjB0W,iBAAiB;EAAAzW,YAFhB;AAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACL2F;AAO5D;AACkC;AACN;AAIhB;AAC6B;AAO5B;AAEL;AACiB;AACkC;AAExB;AACoC;AAI9D;AAGQ;AACwB;;;;;;;;;;;;AAMtF,MAAO+W,kBAAkB;EAC7BzvB,YACU5pB,gBAAkC,EAClCpB,qBAA4C,EAC5C2J,sBAA8C,EAC9CwY,oBAAgD,EAChD+e,sBAA8C,EAC9CpD,kBAAsC,EACtCC,aAA4B,EAC5Bqc,mBAAwC,EACxCzzB,YAA0B,EAC1BgqB,uBAAgD;IAThD,qBAAgB,GAAhBvvC,gBAAgB;IAChB,0BAAqB,GAArBpB,qBAAqB;IACrB,2BAAsB,GAAtB2J,sBAAsB;IACtB,yBAAoB,GAApBwY,oBAAoB;IACpB,2BAAsB,GAAtB+e,sBAAsB;IACtB,uBAAkB,GAAlBpD,kBAAkB;IAClB,kBAAa,GAAbC,aAAa;IACb,wBAAmB,GAAnBqc,mBAAmB;IACnB,iBAAY,GAAZzzB,YAAY;IACZ,4BAAuB,GAAvBgqB,uBAAuB;EAC9B;EAEH+J,mCAAmC;IACjCr5C,wHAA4B,CAC1B,IAAI,CAACD,gBAAgB,EACrB,IAAI,CAACpB,qBAAqB,CAC3B;IACD;;IAEAkiB,8FAAiB,CAAC,IAAI,CAACliB,qBAAqB,EAAE,IAAI,CAACmiB,oBAAoB,CAAC;IACxEzY,wFAAkB,CAChB,IAAI,CAAC1J,qBAAqB,EAC1B,IAAI,CAAC2J,sBAAsB,EAC3B,IAAI,CAACvI,gBAAgB,CACtB;IACDoY,gHAA8B,CAAC,IAAI,CAAC0nB,sBAAsB,CAAC;IAC3DjhC,qGAAwB,CAAC,IAAI,CAACD,qBAAqB,CAAC;IACpDqgB,yFAAmB,CAAC,IAAI,CAAC1W,sBAAsB,CAAC;IAChDwb,uHAA+B,CAAC,IAAI,CAACxb,sBAAsB,CAAC;EAC9D;EAEAgxC,4CAA4C,CAC1C74C,YAAiB,EACjB/F,eAAoB,EACpBZ,MAAW,EACX23C,SAAc,EACdC,OAAY;IAEZ,IAAI,CAACqH,mBAAmB,CAAC1T,eAAe,CAAC5kC,YAAY,CAAC;IACtD,IAAI,CAAC6H,sBAAsB,CAAC8lC,kBAAkB,CAAC1zC,eAAe,CAAC;IAC/D,IAAI,CAAC40C,uBAAuB,CAACkC,iBAAiB,CAAC13C,MAAM,EAAE23C,SAAS,EAAEC,OAAO,CAAC;EAC5E;EAEA6H,yCAAyC,CACvC94C,YAAiB,EACjBC,QAAa;IAEbqjB,kGAAqB,CAACtjB,YAAY,EAAEC,QAAQ,CAAC;IAC7Cw4C,4FAAiB,CAACz4C,YAAY,EAAEC,QAAQ,CAAC;IACzCskB,gGAAoB,CAACvkB,YAAY,EAAEC,QAAQ,CAAC;IAC5CkV,+GAAmC,CAACnV,YAAY,EAAE,IAAI,CAAC6kB,YAAY,CAAC;EACtE;EAEAk0B,yBAAyB,CAAC94C,QAAa,EAAED,YAAiB;IACxDC,QAAQ,CAACsW,EAAE,CAAC,kBAAkB,EAAGtC,CAAM,IAAI;MACzC,IAAI,CAAC,IAAI,CAAC+nB,kBAAkB,CAACgd,WAAW,EAAE,EAAE;QAC1C,MAAM59C,OAAO,GAAG6Y,CAAC,CAAC7Y,OAAO;QACzB,IAAIA,OAAO,CAACC,IAAI,KAAK/C,qEAAY,CAACgD,QAAQ,EAAE;UAC1C;UACA,IAAI,CAAC29C,mBAAmB,CAAC79C,OAAO,EAAE6E,QAAQ,EAAED,YAAY,CAAC;SAC1D,MAAM;UACL,MAAMk5C,sBAAsB,GAAGt5B,uFAAiB,EAAE;UAElD;UACA,IAAIs5B,sBAAsB,CAAC1uC,MAAM,GAAG,CAAC,EAAE;YACrC,MAAM87B,aAAa,GACjB,IAAI,CAACz+B,sBAAsB,CAACiX,uBAAuB,EAAE;YAEvD,IAAIwnB,aAAa,CAAC97B,MAAM,GAAG,CAAC,EAAE;cAC5B,MAAM2uC,UAAU,GAAG14C,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC;cACpD,IAAIy4C,UAAU,EAAE;gBACd,MAAM1J,SAAS,GACb0J,UAAU,CAACrrC,sBAAsB,CAAC,eAAe,CAAC;gBACpD,MAAM4hC,WAAW,GAAGD,SAAS,CAAC,CAAC,CAAC,CAACthC,oBAAoB,CAAC,KAAK,CAAC;gBAC5D,MAAMwhC,eAAe,GAAGD,WAAW,CAAC,CAAC,CAAC;gBACtC,MAAME,QAAQ,GACZD,eAAe,CAAC7hC,sBAAsB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBACvD,IAAIumC,SAAS,GAAGzE,QAAQ,CAAC3hC,YAAY,CAAC,WAAW,CAAC;gBAElD,IAAImrC,UAAU,GAAG,CAAC;gBAClB,IAAIC,UAAU,GAAG,CAAC;gBAClB,IAAIC,KAAK,GAAG,CAAC;gBACb,IAAIC,KAAK,GAAG,CAAC;gBACb,IAAIjF,IAAI;gBAER,MAAMkF,MAAM,GAAGvlC,CAAC,CAACwlC,aAAa,CAAC97B,OAAO;gBACtC,MAAM+7B,MAAM,GAAGzlC,CAAC,CAACwlC,aAAa,CAAC57B,OAAO;gBAEtC;gBACA,IAAIw2B,SAAS,EAAE;kBACbA,SAAS,GAAGA,SAAS,CAAC7yC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC;kBAC5C6yC,SAAS,CAAC7yC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;kBAC1B8yC,IAAI,GAAGD,SAAS,CAACj3B,KAAK,CAAC,GAAG,CAAC;kBAC3Bk8B,KAAK,GAAGK,UAAU,CAACrF,IAAI,CAAC,CAAC,CAAC,CAAC;kBAC3BiF,KAAK,GAAGI,UAAU,CAACrF,IAAI,CAAC,CAAC,CAAC,CAAC;kBAC3B8E,UAAU,GAAGxF,QAAQ,CAACU,IAAI,CAAC,CAAC,CAAC,EAAEhhC,SAAS,CAAC;kBACzC+lC,UAAU,GAAGzF,QAAQ,CAACU,IAAI,CAAC,CAAC,CAAC,EAAEhhC,SAAS,CAAC;;gBAG3C,MAAM9W,KAAK,GAAG,EAAE,GAAG88C,KAAK;gBACxB,MAAM58C,MAAM,GAAG,EAAE,GAAG68C,KAAK;gBAEzB,KAAK,IAAI96C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGy6C,sBAAsB,CAAC1uC,MAAM,EAAE/L,CAAC,EAAE,EAAE;kBACtD,MAAMm7C,UAAU,GAAGV,sBAAsB,CAACz6C,CAAC,CAAC;kBAC5C,IAAIm7C,UAAU,EAAE;oBACd,MAAMvrC,KAAK,GAAGurC,UAAU,CAACzrC,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oBACzD,MAAM0rC,EAAE,GAAGxrC,KAAK,CAACJ,YAAY,CAAC,GAAG,CAAC;oBAClC,MAAM6rC,EAAE,GAAGzrC,KAAK,CAACJ,YAAY,CAAC,GAAG,CAAC;oBAClC,MAAM8rC,OAAO,GAAGnG,QAAQ,CAACvlC,KAAK,CAACnD,SAAS,EAAEoI,SAAS,CAAC;oBAEpD,MAAM0mC,QAAQ,GAAG19C,IAAI,CAAC0J,KAAK,CACzB6zC,EAAE,GAAGP,KAAK,IAAIF,UAAU,GAAG,EAAE,GAAGE,KAAK,CAAC,CACvC;oBACD,MAAMW,QAAQ,GAAG39C,IAAI,CAAC0J,KAAK,CACzB8zC,EAAE,GAAGP,KAAK,IAAIF,UAAU,GAAG,EAAE,GAAGE,KAAK,CAAC,CACvC;oBAEDjT,aAAa,CAACvrC,OAAO,CAAEokB,QAA8B,IAAI;sBACvD,MAAMwW,cAAc,GAAGxW,QAAQ,CAAC1lB,cAAc,CAACmP,MAAM;sBACrD,IAAI+sB,cAAc,KAAKokB,OAAO,EAAE;wBAC9B,IACErB,sEAAc,CACZl8C,KAAK,EACLE,MAAM,EACNs9C,QAAQ,EACRC,QAAQ,EACRT,MAAM,EACNE,MAAM,CACP,EACD;0BACA,IAAI,CAACT,mBAAmB,CACtB95B,QAAQ,EACRlf,QAAQ,EACRD,YAAY,CACb;;;oBAGP,CAAC,CAAC;;;;;;;;IAQlB,CAAC,CAAC;IAEF;IACAC,QAAQ,CAACsW,EAAE,CACT,CACE,eAAe,EACf,kBAAkB,EAClB,mBAAmB,EACnB,WAAW,EACX,yBAAyB,EACzB,WAAW,EACX,gBAAgB,CACjB,EACD,WAAW,EACVlV,KAAU,IAAI;MACb,IAAI,IAAI,CAAC26B,kBAAkB,CAACgd,WAAW,EAAE,EAAE;QACzC33C,KAAK,CAAC64C,eAAe,EAAE;QACvB74C,KAAK,CAACqb,cAAc,EAAE;;IAE1B,CAAC,CACF;EACH;EAEA;EACQu8B,mBAAmB,CACzB95B,QAA8B,EAC9Blf,QAAa,EACbD,YAAiB;IAEjB,MAAM7F,MAAM,GAAGglB,QAAQ,CAAChlB,MAAM;IAE9B;IACAyd,gGAAc,CAAC,KAAK,CAAC;IAErB,MAAMuK,MAAM,GAAG,IAAI2Z,sEAAe,EAAE;IACpC3Z,MAAM,CAAC2b,YAAY,GAAG,KAAK;IAC3B3b,MAAM,CAAC4b,SAAS,GAAG,IAAI;IAEvB,IACE5e,QAAQ,CAAC1lB,cAAc,CAACmP,MAAM,IAC9BzO,MAAM,IACNA,MAAM,CAACkB,IAAI,CAAC8B,QAAQ,CAAC7E,qEAAY,CAACiG,KAAK,CAAC,EACxC;MACA4jB,MAAM,CAAC0G,IAAI,GAAG,IAAIgD,iFAAkB,CAClC1M,QAAQ,EACRW,+FAAyB,EAAE,CAACX,QAAQ,CAAC1lB,cAAc,CAACmP,MAAM,CAAC,EAC3D,IAAI,EACHigB,IAAS,IAAK,IAAI,CAACsxB,sBAAsB,CAACtxB,IAAI,EAAE5oB,QAAQ,EAAED,YAAY,CAAC,CACzE;KACF,MAAM,IAAI7F,MAAM,IAAIA,MAAM,CAACkB,IAAI,CAAC8B,QAAQ,CAAC7E,qEAAY,CAAC0G,UAAU,CAAC,EAAE;MAClEmjB,MAAM,CAAC0G,IAAI,GAAG,IAAIgD,iFAAkB,CAClC1M,QAAQ,EACR,KAAK,EACL,KAAK,EACJi7B,YAAiB,IAChB,IAAI,CAACD,sBAAsB,CAACC,YAAY,EAAEn6C,QAAQ,EAAED,YAAY,CAAC,CACpE;;IAEH,IAAI,CAACi8B,aAAa,CAAC+B,UAAU,CAACzI,mHAAuB,EAAEpT,MAAM,CAAC;EAChE;EAEQg4B,sBAAsB,CAC5BC,YAAiB,EACjBn6C,QAAa,EACbD,YAAiB;IAEjB,MAAMlC,KAAK,GAAGs8C,YAAY,CAAC1kB,aAAa;IACxC,MAAM2kB,SAAS,GAAGD,YAAY,CAACvkB,eAAe,KAAKviB,SAAS;IAC5D,MAAMqiB,cAAc,GAAGykB,YAAY,CAACzkB,cAAc;IAClD,MAAM2kB,qBAAqB,GAAGF,YAAY,CAACvkB,eAAe;IAC1D,MAAMz6B,OAAO,GAAGg/C,YAAY,CAACj7B,QAAQ;IAErC,MAAMN,oBAAoB,GACxB,IAAI,CAAChX,sBAAsB,CAACiX,uBAAuB,EAAE;IACvD,MAAM1S,KAAK,GAAGyS,oBAAoB,CAACxS,OAAO,CAACjR,OAAO,CAAC;IAEnDyjB,oBAAoB,CAACwF,MAAM,CAACjY,KAAK,EAAE,CAAC,CAAC;IACrC,IAAIiuC,SAAS,EAAE;MACb36B,yFAAmB,CAACiW,cAAc,EAAE2kB,qBAAqB,CAAC;;IAE5Dl/C,OAAO,CAAC3B,cAAc,CAAC6gD,qBAAqB,GAAGA,qBAAqB;IAEpE,IAAI9hD,OAAY;IAChB,IAAI6hD,SAAS,EAAE;MACb7hD,OAAO,GAAG;QACRiB,cAAc,EAAE2B,OAAO,CAAC3B,cAAc;QACtCihB,QAAQ,EAAE5c,KAAK;QACfoF,SAAS,EAAEyyB,cAAc;QACzBv6B;OACD;KACF,MAAM;MACL5C,OAAO,GAAG;QACRiB,cAAc,EAAE2B,OAAO,CAAC3B,cAAc;QACtCihB,QAAQ,EAAE5c,KAAK;QACf1C;OACD;;IAGH4E,YAAY,CAACgB,OAAO,CAAC,kBAAkB,EAAExI,OAAO,CAAC;IACjD,IAAI4C,OAAO,CAAC3B,cAAc,CAAC6gD,qBAAqB,KAAK,KAAK,EAAE;MAC1D,IAAIx6B,+FAAyB,EAAE,CAAC6V,cAAc,CAAC,KAAK,KAAK,EAAE;QACzD1W,oGAA8B,CAC5BJ,oBAAoB,EACpB8W,cAAc,EACd11B,QAAQ,CACT;;KAEJ,MAAM,IAAI7E,OAAO,CAAC3B,cAAc,CAAC6gD,qBAAqB,KAAK,KAAK,EAAE;MACjEr7B,oGAA8B,CAC5BJ,oBAAoB,EACpB8W,cAAc,EACd11B,QAAQ,CACT;;EAEL;;AArQW04C,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;SAAlBA,kBAAkB;EAAAhX,SAAlBgX,kBAAkB;EAAA/W,YAFjB;AAAM;;;;;;;;;;;;;;;;;;;;;;;;ACzCc;AACe;;;;;;;AAY3C,MAAO2Y,cAAc;EACzBrxB,YACUsxB,kBAAsC,EACtC3yC,sBAA8C,EAC9C3J,qBAA4C,EAC5Cw3C,0BAAsD,EACtDpU,cAA8B;IAJ9B,uBAAkB,GAAlBkZ,kBAAkB;IAClB,2BAAsB,GAAtB3yC,sBAAsB;IACtB,0BAAqB,GAArB3J,qBAAqB;IACrB,+BAA0B,GAA1Bw3C,0BAA0B;IAC1B,mBAAc,GAAdpU,cAAc;EACrB;EAWHjM,QAAQ;IACN,MAAM+T,yBAAyB,GAC7B,IAAI,CAAC9H,cAAc,CAACiD,4BAA4B,EAAE;IACpD,IAAI6E,yBAAyB,EAAE;MAC7B,IAAI,CAAClrC,qBAAqB,CAACovC,sBAAsB,CAC/ClE,yBAAyB,CAC1B;MACD,IAAI,CAACsM,0BAA0B,CAAC/b,iBAAiB,CAC/CyP,yBAAyB,CAC1B;;IAEH,IAAI,CAACoR,kBAAkB,CAAC5B,mCAAmC,EAAE;IAC7D,IAAI,CAAC3H,OAAO,GAAG,IAAI14C,uDAAkB,CAAC;MACpCk3C,SAAS,EAAE,SAAS;MACpBgL,QAAQ,EAAE;QACRC,MAAM,EAAEj6C;OACT;MAED;MACAk6C,iBAAiB,EAAE,CACjB;QACEC,UAAU,EAAE,CAAC,OAAO,EAAE,KAAK;OAC5B;KAEJ,CAAC;IAEF,IAAI,IAAI,CAAC3J,OAAO,CAAC33C,GAAG,EAAE;MACpB,IAAI,CAACD,MAAM,GAAG,IAAI,CAAC43C,OAAO,CAAC33C,GAAG,CAAC,QAAQ,CAAC;MACxC,IAAI,CAACW,eAAe,GAAG,IAAI,CAACg3C,OAAO,CAAC33C,GAAG,CAAC,iBAAiB,CAAC;MAC1D,IAAI,CAAC2G,QAAQ,GAAG,IAAI,CAACgxC,OAAO,CAAC33C,GAAG,CAAC,UAAU,CAAC;MAC5C,IAAI,CAAC0G,YAAY,GAAG,IAAI,CAACixC,OAAO,CAAC33C,GAAG,CAAC,cAAc,CAAC;MACpD,IAAI,CAAC03C,SAAS,GAAG,IAAI,CAACC,OAAO,CAAC33C,GAAG,CAAC,WAAW,CAAC;;IAGhD,IAAI,CAACkhD,kBAAkB,CAAC1B,yCAAyC,CAC/D,IAAI,CAAC94C,YAAY,EACjB,IAAI,CAACC,QAAQ,CACd;IACD,IAAI,CAACu6C,kBAAkB,CAAC3B,4CAA4C,CAClE,IAAI,CAAC74C,YAAY,EACjB,IAAI,CAAC/F,eAAe,EACpB,IAAI,CAACZ,MAAM,EACX,IAAI,CAAC23C,SAAS,EACd,IAAI,CAACC,OAAO,CACb;IAED,MAAM4J,eAAe,GAAG,IAAI,CAACC,QAAQ,CAAC,IAAI,CAAC1J,OAAO,EAAE,GAAG,CAAC;IACxD,IAAI,IAAI,CAACH,OAAO,CAAC33C,GAAG,EAAE;MACpB,IAAI,CAAC23C,OAAO,CAAC16B,EAAE,CAAC,sBAAsB,EAAEskC,eAAe,CAAC;;IAG1D,IAAI,CAACL,kBAAkB,CAACzB,yBAAyB,CAC/C,IAAI,CAAC94C,QAAQ,EACb,IAAI,CAACD,YAAY,CAClB;IAED,IAAI,CAACixC,OAAO,CAAC/1C,aAAa,EAAE;IAC5B;IACAlD,gDAAM,CAAC+iD,MAAM,EAAE;MAAEhnC,MAAM,EAAE,IAAI,CAACk9B;IAAO,CAAE,CAAC;IAExC,IAAI,CAAC+J,aAAa,EAAE;EACtB;EAEAna,OAAO,CACLnV,mBAAyC,EACzCuvB,WAA8B;IAE9B,MAAMC,YAAY,GAChBD,WAAW,IAAI3nC,SAAS,GACpB2nC,WAAW,GACX,IAAI,CAACpzC,sBAAsB,CACxBgmC,8BAA8B,EAAE,CAChC/8B,GAAG,CAAEmD,CAAC,IAAKA,CAAC,CAACxa,cAAc,CAAC;IACrC,IAAI,CAACiyB,mBAAmB,EAAE;MACxBA,mBAAmB,GAAG,IAAI,CAAC4V,cAAc,CAACiD,4BAA4B,EAAE;;IAE1E,IAAI7Y,mBAAmB,EAAE;MACvB,IAAI,CAAC4V,cAAc,CAACmD,4BAA4B,CAAC/Y,mBAAmB,CAAC;MACrE,IAAI,CAACxtB,qBAAqB,CAACovC,sBAAsB,CAAC5hB,mBAAmB,CAAC;MACtE,IAAI,CAACgqB,0BAA0B,CAAC/b,iBAAiB,CAACjO,mBAAmB,CAAC;;IAGxE,IAAI,CAAC7jB,sBAAsB,CAACuiB,KAAK,EAAE;IACnC,IAAI,CAAC6mB,OAAO,EAAEkK,OAAO,EAAE;IACvB,IAAI,CAAC9lB,QAAQ,EAAE;IACf,IAAI6lB,YAAY,IAAI,IAAI,CAACjK,OAAO,CAAC33C,GAAG,EAAE;MACpC,IAAI,CAAC23C,OAAO,CAAC32C,oBAAoB,CAAC4gD,YAAY,CAAC;;EAEnD;EAEA;EACAE,UAAU;IACR,OAAO,IAAI,CAACnK,OAAO;EACrB;EAEAjU,mBAAmB;IACjB;IACA,IAAI,CAAC/8B,QAAQ,CAACzF,IAAI,CAChB,sBAAsB,EACtB,IAAI,CAACsgD,QAAQ,CAAC,IAAI,CAAC1J,OAAO,EAAE,GAAG,CAAC,CACjC;EACH;EAEA4J,aAAa;IACX,IAAI,CAACF,QAAQ,CAAC,IAAI,CAAC1J,OAAO,EAAE,GAAG,CAAC;EAClC;EAEA0J,QAAQ,CAACpmC,EAAO,EAAE2mC,OAAe;IAC/B,OAAO,MAAK;MACV,IAAIC,KAAK;MACT,IAAIA,KAAK,EAAE;QACTC,YAAY,CAACD,KAAK,CAAC;;MAErBA,KAAK,GAAGt8B,UAAU,CAAC,MAAK;QACtB;QACAtK,EAAE,CAAC,IAAI,CAACu8B,OAAO,CAAC,CAACP,IAAI,CAAEpZ,GAAW,IAAI;UACpC,IAAI,CAACkkB,OAAO,GAAGlkB,GAAG;QACpB,CAAC,CAAiB;MACpB,CAAC,EAAE+jB,OAAO,CAAC;IACb,CAAC;EACH;EAEAnG,UAAU;IACR,OAAO,IAAI,CAACsG,OAAO,GAAG,IAAI,CAACA,OAAO,GAAG,EAAE;EACzC;EAEMpK,OAAO,CAACH,OAAY;IAAA;MACxB,IAAI;QACF,MAAMxlC,MAAM,SAASwlC,OAAO,CAACG,OAAO,EAAE;QACtC,OAAO3lC,MAAM,CAAC6rB,GAAG;OAClB,CAAC,OAAOma,GAAG,EAAE;QACZC,KAAK,CAAC,sCAAsC,GAAGD,GAAG,CAAC;;IACpD;EACH;;AAvJW8I,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;SAAdA,cAAc;EAAA5Y,SAAd4Y,cAAc;EAAA3Y,YAFb;AAAM;;;;;;;;;;;;;;;;;;;;;;ACFd,MAAO6Z,eAAe;EAC1BvyB,YACUkM,cAA8B,EAC9BvtB,sBAA8C,EAC9CvI,gBAAkC;IAFlC,mBAAc,GAAd81B,cAAc;IACd,2BAAsB,GAAtBvtB,sBAAsB;IACtB,qBAAgB,GAAhBvI,gBAAgB;EACvB;EAEHo8C,WAAW,CAACT,WAA6B;IACvC,IAAI,CAAC7lB,cAAc,CAACgmB,UAAU,EAAE,CAAC9gD,oBAAoB,CAAC2gD,WAAW,CAAC;EACpE;EAEArY,WAAW,CACTqY,WAA6B,EAC7BU,mBAA4B,EAC5Bx5B,MAA4B,EAC5BgjB,SAAS,GAAG,IAAI;IAEhB,IAAI,CAAC/P,cAAc,CAACyL,OAAO,CAAC1e,MAAM,EAAE84B,WAAW,CAAC;IAChD,IAAI,CAACS,WAAW,CAACT,WAAW,CAAC;IAE7B,IAAI,CAACpzC,sBAAsB,CAAC0J,iBAAiB,EAAE;IAE/C,IAAI,CAAC6jB,cAAc,CAAC4H,mBAAmB,EAAE;IACzC,IAAI,CAAC5H,cAAc,CAAC4lB,aAAa,EAAE;IAEnC,IAAI7V,SAAS,EAAE;MACb,IAAI,CAAC7lC,gBAAgB,CAAC6lC,SAAS,EAAE;;EAErC;EAEAzB,QAAQ;IACN,OAAO,IAAI,CAAC77B,sBAAsB,CAC/BgmC,8BAA8B,EAAE,CAChC/8B,GAAG,CAAE8qC,CAAC,IAAKA,CAAC,CAACniD,cAAc,CAAC;EACjC;;AAlCWgiD,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;SAAfA,eAAe;EAAA9Z,SAAf8Z,eAAe;EAAA7Z,YAFd;AAAM;;;;;;;;;;;;;;;;ACPmB;;AAKjC,MAAOia,kBAAkB;EAH/B3yB;IAIU,oBAAe,GAAG,IAAI+M,iDAAe,CAAU,KAAK,CAAC;IAE7D,cAAS,GAAG,IAAI,CAAC6lB,eAAe,CAACta,YAAY,EAAE;;EAE/Cua,cAAc,CAACC,KAAc;IAC3B,IAAI,CAACF,eAAe,CAAC3zC,IAAI,CAAC6zC,KAAK,CAAC;EAClC;EAEAhD,WAAW;IACT,OAAO,IAAI,CAAC8C,eAAe,CAAC/6C,KAAK;EACnC;;AAXW86C,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;SAAlBA,kBAAkB;EAAAla,SAAlBka,kBAAkB;EAAAja,YAFjB;AAAM;;;;;;;;;;;;;;;;;;;;;ACCmB;AAKA;;;;;;AAKjC,MAAOqa,aAAa;EAQxB/yB,YACU8S,kBAAsC,EACtCkgB,sBAA8C,EAC9CC,mBAAwC,EACxCxoB,QAAqB;IAHrB,uBAAkB,GAAlBqI,kBAAkB;IAClB,2BAAsB,GAAtBkgB,sBAAsB;IACtB,wBAAmB,GAAnBC,mBAAmB;IACnB,aAAQ,GAARxoB,QAAQ;IAXV,UAAK,GAAgB,EAAE;IACvB,gBAAW,GAAG,IAAIsC,iDAAe,CAAC,CAAC,CAAC,CAAC;IACrC,kBAAa,GAAG,IAAIA,iDAAe,CAAC,CAAC,CAAC;IAE9C,iBAAY,GAAG,IAAI,CAACmmB,WAAW,CAAC5a,YAAY,EAAE;IAC9C,mBAAc,GAAG,IAAI,CAAC6a,aAAa,CAAC7a,YAAY,EAAE;EAO/C;EAEH8a,gBAAgB;IACd,IAAI,CAACF,WAAW,CAACj0C,IAAI,CAAC,CAAC,CAAC;IACxB,IAAI,CAACo6B,KAAK,GAAG,IAAI,CAAC4Z,mBAAmB,CAACI,6BAA6B,EAAE;IACrE,IAAI,CAACF,aAAa,CAACl0C,IAAI,CAAC,IAAI,CAACo6B,KAAK,CAAC/3B,MAAM,CAAC;EAC5C;EAEA8mC,oBAAoB;IAClB,OAAO,IAAI,CAAC8K,WAAW,CAACr7C,KAAK;EAC/B;EAEA4wC,gBAAgB;IACd,OAAO,IAAI,CAAC0K,aAAa,CAACt7C,KAAK;EACjC;EAEAy9B,QAAQ;IACN,IAAI,IAAI,CAAC4d,WAAW,CAACr7C,KAAK,GAAG,IAAI,CAACwhC,KAAK,CAAC/3B,MAAM,EAAE;MAC9C,IAAI,CAAC4xC,WAAW,CAACj0C,IAAI,CAAC,IAAI,CAACi0C,WAAW,CAACr7C,KAAK,GAAG,CAAC,CAAC;MACjD,IAAI,CAACy7C,eAAe,EAAE;;EAE1B;EAEAje,YAAY;IACV,IAAI,IAAI,CAAC6d,WAAW,CAACr7C,KAAK,GAAG,CAAC,EAAE;MAC9B,IAAI,CAACq7C,WAAW,CAACj0C,IAAI,CAAC,IAAI,CAACi0C,WAAW,CAACr7C,KAAK,GAAG,CAAC,CAAC;MACjD,IAAI,CAACy7C,eAAe,EAAE;;EAE1B;EAEQA,eAAe;IACrB,IAAI,CAACN,sBAAsB,CAACtW,QAAQ,CAClC,IAAI,CAACrD,KAAK,CAAC,IAAI,CAAC6Z,WAAW,CAACr7C,KAAK,GAAG,CAAC,CAAC,EACtC,IAAI,CAACq7C,WAAW,CAACr7C,KAAK,GAAG,CAAC,GACtB,IAAI,CAACwhC,KAAK,CAAC,IAAI,CAAC6Z,WAAW,CAACr7C,KAAK,GAAG,CAAC,CAAC,GACtCuS,SAAS,CACd;EACH;EAEA+qB,WAAW;IACT,IAAI,CAACie,gBAAgB,EAAE;IACvB,IAAI,IAAI,CAAC/Z,KAAK,EAAE/3B,MAAM,EAAE;MACtB,MAAMiyC,YAAY,GAAG,IAAI,CAACN,mBAAmB,CAACO,eAAe,CAAC,IAAI,CAACna,KAAK,CAAC;MACzE,IAAIka,YAAY,CAACjyC,MAAM,KAAK,CAAC,EAAE;QAC7B,IAAI,CAACwxB,kBAAkB,CAAC+f,cAAc,CAAC,IAAI,CAAC;QAC5C,IAAI,CAACG,sBAAsB,CAACtW,QAAQ,CAClC,IAAI,CAACrD,KAAK,CAAC,IAAI,CAAC6Z,WAAW,CAACO,QAAQ,EAAE,GAAG,CAAC,CAAC,CAC5C;OACF,MAAM;QACL,MAAMC,KAAK,GAAGH,YAAY,CAACvR,IAAI,CAAC,IAAI,CAAC;QACrC,IAAI,CAACvX,QAAQ,CAAC9wB,IAAI,CAChB+5C,KAAK,CAACpyC,MAAM,KAAK,CAAC,GACd,0CAA0CoyC,KAAK,cAAc,GAC7D,2CAA2CA,KAAK,eAAe,EACnEtpC,SAAS,EACT;UACE2gB,QAAQ,EAAEvK,uEAAiB,GAAG,CAAC;UAC/BwK,UAAU,EAAErK,mEAAaA;SAC1B,CACF;;KAEJ,MAAM;MACL,IAAI,CAAC8J,QAAQ,CAAC9wB,IAAI,CAAC,qCAAqC,EAAEyQ,SAAS,EAAE;QACnE2gB,QAAQ,EAAEvK,uEAAiB,GAAG,CAAC;QAC/BwK,UAAU,EAAErK,mEAAaA;OAC1B,CAAC;;EAEN;EAEAyU,UAAU;IACR,IAAI,CAAC8d,WAAW,CAACj0C,IAAI,CAAC,CAAC,CAAC,CAAC;IACzB,IAAI,CAACk0C,aAAa,CAACl0C,IAAI,CAAC,CAAC,CAAC;IAC1B,IAAI,CAAC6zB,kBAAkB,CAAC+f,cAAc,CAAC,KAAK,CAAC;IAC7C,IAAI,CAACG,sBAAsB,CAAC5W,OAAO,EAAE;EACvC;;AAvFW2W,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;SAAbA,aAAa;EAAAta,SAAbsa,aAAa;EAAAra,YAFZ;AAAM;;;;;;;;;;;;;;;;;;ACZ+C;AAMO;;;AAKpE,MAAOib,mBAAmB;EAC9B3zB,YAAoBrhB,sBAA8C;IAA9C,2BAAsB,GAAtBA,sBAAsB;EAA2B;EAErE00C,6BAA6B;IAC3B,MAAMO,iBAAiB,GAAG,IAAI78B,4EAAU,EAAE;IAC1C,MAAMsiB,KAAK,GAAgB,EAAE;IAC7B,MAAM/iB,UAAU,GAAG,IAAI,CAAC3X,sBAAsB,CAACiX,uBAAuB,EAAE;IAExEU,UAAU,CAACzkB,OAAO,CAAEokB,QAAQ,IAAI;MAC9B,MAAMwW,cAAc,GAAGhqB,MAAM,CAACwT,QAAQ,CAAC1lB,cAAc,CAACmP,MAAM,CAAC,CAAC,CAAC;MAC/D,MAAMm0C,UAAU,GAAGD,iBAAiB,CAACxjD,GAAG,CAAC,GAAGq8B,cAAc,GAAG,CAAC,EAAE,CAAC,GAC7DmnB,iBAAiB,CAACxjD,GAAG,CAAC,GAAGq8B,cAAc,GAAG,CAAC,EAAE,CAAC,GAC9C,EAAE;MACNonB,UAAU,CAAC3jD,IAAI,CAAC+lB,QAAQ,CAAC;MACzB29B,iBAAiB,CAAC93C,GAAG,CAAC,GAAG2wB,cAAc,GAAG,CAAC,EAAE,EAAEonB,UAAU,CAAC;IAC5D,CAAC,CAAC;IAEF,KAAK,IAAIt+C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGq+C,iBAAiB,CAACp+C,SAAS,EAAE,CAAC8L,MAAM,EAAE/L,CAAC,EAAE,EAAE;MAC7D,IAAI,CAACu+C,UAAU,CAACF,iBAAiB,EAAEr+C,CAAC,EAAE8jC,KAAK,CAAC;;IAE9C,IAAI,CAAC0a,YAAY,CAAC1a,KAAK,CAAC;IACxB,OAAOA,KAAK;EACd;EAEQya,UAAU,CAChBF,iBAA6B,EAC7Br+C,CAAS,EACT8jC,KAAkB;IAElB,MAAMqE,WAAW,GAAG,IAAI,CAACsW,cAAc,CACrCJ,iBAAiB,CAACxjD,GAAG,CAAC,GAAGmF,CAAC,EAAE,CAAC,IAAI,EAAE,CACpC;IACD,MAAM0+C,mBAAmB,GAAGvW,WAAW,CAAC91B,GAAG,CAAE4V,CAAC,IAAKA,CAAC,CAAC7sB,EAAE,CAAC;IACxD,IAAI4E,CAAC,GAAG,CAAC,EAAE;MACT8jC,KAAK,CAAC9jC,CAAC,GAAG,CAAC,CAAC,CAACoP,OAAO,CAAC9S,OAAO,CAAEmT,MAAM,IAAI;QACtC,IAAI,CAAC04B,WAAW,CAACzpC,QAAQ,CAAC+Q,MAAM,CAAC,EAAE;UACjC04B,WAAW,CAACxtC,IAAI,CAAC8U,MAAM,CAAC;;MAE5B,CAAC,CAAC;;IAEJq0B,KAAK,CAAC9jC,CAAC,CAAC,GAAG;MACT2+C,kBAAkB,EAAED,mBAAmB;MACvCtvC,OAAO,EAAE+4B;KACV;EACH;EAEA8V,eAAe,CAACna,KAAkB;IAChC,IAAI,CAACA,KAAK,IAAIA,KAAK,CAAC/3B,MAAM,KAAK,CAAC,EAAE;MAChC,OAAO,EAAE;;IAGX,MAAMiyC,YAAY,GAAa,EAAE;IACjC,IAAIrkC,QAAQ,GAAG,IAAI;IACnB,KAAK,IAAI3Z,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8jC,KAAK,CAAC/3B,MAAM,EAAE/L,CAAC,EAAE,EAAE;MACrC,IACE,CAAC8jC,KAAK,CAAC9jC,CAAC,CAAC,IACT,EAAE8jC,KAAK,CAAC9jC,CAAC,CAAC,CAACoP,OAAO,CAACrD,MAAM,GAAG,CAAC,CAAC,IAC9B+3B,KAAK,CAAC9jC,CAAC,CAAC,CAACoP,OAAO,CAACwc,MAAM,CACpBjvB,OAAO,IAAKA,OAAO,CAACC,IAAI,KAAK/C,qEAAY,CAACgD,QAAQ,CACpD,CAACkP,MAAM,IAAI,CAAC,EACb;QACAiyC,YAAY,CAACrjD,IAAI,CAACqF,CAAC,GAAG,CAAC,CAAC;QACxB2Z,QAAQ,GAAG,KAAK;;;IAGpB,OAAOqkC,YAAY;EACrB;EAEQS,cAAc,CACpBG,cAAsC;IAEtC,MAAMC,aAAa,GAAmB,EAAE;IACxC,MAAM99B,UAAU,GAAG69B,cAAc;IACjC,MAAME,aAAa,GAAmB,EAAE;IAExCF,cAAc,CAACtiD,OAAO,CAAEyiD,YAAkC,IAAI;MAC5DF,aAAa,CAAClkD,IAAI,CAACokD,YAAY,CAACrjD,MAAM,CAAC;MAEvC,MAAMsjD,WAAW,GAAGD,YAAY,CAACpjD,MAAM;MACvCmjD,aAAa,CAACnkD,IAAI,CAACqkD,WAAW,CAAC;MAE/B;MACA,KAAK,MAAMC,WAAW,IAAIH,aAAa,EAAE;QACvC,IACEG,WAAW,CAACjkD,cAAc,IAC1B,CAACikD,WAAW,CAACjkD,cAAc,CAAC4B,IAAI,CAAC8B,QAAQ,CAAC,OAAO,CAAC,IAClDugD,WAAW,CAACxhD,QAAQ,EACpB;UACA;UACAwhD,WAAW,CAACxhD,QAAQ,CAACnB,OAAO,CAAEokB,QAA8B,IAAI;YAC9DK,UAAU,CAACpmB,IAAI,CAAC+lB,QAAQ,CAAC;YACzB,MAAMw+B,cAAc,GAAGx+B,QAAQ,CAAC/kB,MAAM;YACtC,IAAIujD,cAAc,IAAI,CAACJ,aAAa,CAACpgD,QAAQ,CAACwgD,cAAc,CAAC,EAAE;cAC7DJ,aAAa,CAACnkD,IAAI,CAACukD,cAAc,CAAC;;UAEtC,CAAC,CAAC;;;IAGR,CAAC,CAAC;IACF,OAAOL,aAAa,CACjBxsC,GAAG,CAAEmD,CAAC,IAAKA,CAAC,CAACxa,cAAc,CAAC,CAC5BX,MAAM,CAAC0mB,UAAU,CAAC1O,GAAG,CAAE2Z,CAAC,IAAKA,CAAC,CAAChxB,cAAc,CAAC,CAAC,CAC/CX,MAAM,CAACykD,aAAa,CAACzsC,GAAG,CAAE4V,CAAC,IAAKA,CAAC,CAACjtB,cAAc,CAAC,CAAC;EACvD;EAEA;EACQwjD,YAAY,CAAC1a,KAAkB;IACrC,MAAMznC,MAAM,GAAG,IAAI,CAAC+M,sBAAsB,CAAC49B,YAAY,EAAoB;IAC3E,IAAI3qC,MAAM,CAAC0P,MAAM,GAAG,CAAC,EAAE;MACrB+3B,KAAK,CAACnpC,IAAI,CAAC;QACTgkD,kBAAkB,EAAE,EAAE;QACtBvvC,OAAO,EAAE/S,MAAM,CACZgW,GAAG,CAAE8sC,CAAC,IAAKA,CAAC,CAACnkD,cAAc,CAAC,CAC5BX,MAAM,CAACypC,KAAK,CAACA,KAAK,CAAC/3B,MAAM,GAAG,CAAC,CAAC,CAACqD,OAAO;OAC1C,CAAC;;EAEN;;AApHWgvC,mBAAmB;mBAAnBA,mBAAmB;AAAA;AAAnBA,mBAAmB;SAAnBA,mBAAmB;EAAAlb,SAAnBkb,mBAAmB;EAAAjb,YAFlB;AAAM;;;;;;;;;;;;;;;;ACTmB;;AAKjC,MAAOic,eAAe;EAH5B30B;IAIU,iBAAY,GAAG,IAAI+M,iDAAe,CAAC,KAAK,CAAC;IACjD,kBAAa,GAAG,IAAI,CAAC6nB,YAAY,CAACtc,YAAY,EAAE;;EAEhDxL,KAAK;IACH,IAAI,CAAC8nB,YAAY,CAAC31C,IAAI,CAAC,KAAK,CAAC;EAC/B;EAEAtF,IAAI;IACF,IAAI,CAACi7C,YAAY,CAAC31C,IAAI,CAAC,IAAI,CAAC;EAC9B;;AAVW01C,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;SAAfA,eAAe;EAAAlc,SAAfkc,eAAe;EAAAjc,YAFd;AAAM;;;;;;;;;;;;;;;;;;ACHmB;AAMA;;;AAMjC,MAAOmc,YAAY;EAWvB70B,YAAoBovB,mBAAwC;IAAxC,wBAAmB,GAAnBA,mBAAmB;IAV/B,iBAAY,GAAG,IAAIriB,iDAAe,CAAS7M,mEAAa,CAAC;IACzD,uBAAkB,GAAG,IAAI6M,iDAAe,CAAS5M,yEAAmB,CAAC;IACrE,sBAAiB,GAAG,IAAI4M,iDAAe,CAAS3M,yEAAmB,CAAC;IACpE,2BAAsB,GAAG,IAAI2M,iDAAe,CAAU,IAAI,CAAC;IAEnE,WAAM,GAAG,IAAI,CAAC+nB,YAAY,CAACxc,YAAY,EAAE;IACzC,iBAAY,GAAG,IAAI,CAACyc,kBAAkB,CAACzc,YAAY,EAAE;IACrD,qBAAgB,GAAG,IAAI,CAAC0c,sBAAsB,CAAC1c,YAAY,EAAE;IAC7D,gBAAW,GAAG,IAAI,CAAC2c,iBAAiB,CAAC3c,YAAY,EAAE;EAEY;EAE/Drc,yBAAyB,CACvB/iB,KAAoB,EACpBmlB,WAA0B,EAC1B62B,SAAkB;IAElB,IAAIA,SAAS,EAAE;MACb,IAAI,CAACC,6BAA6B,CAACj8C,KAAK,EAAEmlB,WAAW,CAAC;KACvD,MAAM;MACL,IAAI,CAAC+2B,WAAW,CAACl8C,KAAK,CAAC;MACvB,IAAI,CAACm8C,iBAAiB,CAACh3B,WAAW,CAAC;;EAEvC;EAEQ+2B,WAAW,CAACl8C,KAAoB;IACtC,IAAI,CAAC47C,YAAY,CAAC71C,IAAI,CAAC/F,KAAK,IAAI,IAAI,CAAC47C,YAAY,CAACj9C,KAAK,CAAC;IACxDN,QAAQ,CAAC2B,KAAK,GAAGA,KAAK,IAAI,IAAI,CAAC47C,YAAY,CAACj9C,KAAK,GAAG,YAAY;EAClE;EAEQw9C,iBAAiB,CAACh3B,WAA0B;IAClD,IAAI,CAAC02B,kBAAkB,CAAC91C,IAAI,CAACof,WAAW,IAAI,IAAI,CAAC02B,kBAAkB,CAACl9C,KAAK,CAAC;EAC5E;EAEAk8B,kBAAkB,CAACC,IAAa;IAC9B,IAAI,CAACghB,sBAAsB,CAAC/1C,IAAI,CAAC+0B,IAAI,CAAC;EACxC;EAEA+J,aAAa,CAACtqC,IAAY;IACxB,IAAI,CAACwhD,iBAAiB,CAACh2C,IAAI,CAACxL,IAAI,CAAC;EACnC;EAEAqoB,QAAQ;IACN,OAAO,IAAI,CAACg5B,YAAY,CAACj9C,KAAK;EAChC;EAEAmkB,cAAc;IACZ,OAAO,IAAI,CAAC+4B,kBAAkB,CAACl9C,KAAK;EACtC;EAEAsmC,aAAa;IACX,OAAO,IAAI,CAAC8W,iBAAiB,CAACp9C,KAAK;EACrC;EAEAy9C,UAAU;IACR,OAAOr1B,6DAAO;EAChB;EAEQk1B,6BAA6B,CACnCj5B,QAAuB,EACvBC,cAA6B;IAE7B,MAAMxkB,OAAO,GAAG;MACdukB,QAAQ;MACRC;KACD;IACD,IAAI,CAACizB,mBAAmB,CAACt3C,OAAO,CAC9B,oCAAoC,EACpCH,OAAO,CACR;EACH;;AAvEWk9C,YAAY;mBAAZA,YAAY;AAAA;AAAZA,YAAY;SAAZA,YAAY;EAAApc,SAAZoc,YAAY;EAAAnc,YAFX;AAAM;;;;;;;;;;;;;;;;;ACXP;;AAEb;AACM,SAAU6c,OAAO,CAACC,OAAe;EACrC,OAAQA,OAAO,GAAG,GAAG,GAAIpiD,IAAI,CAACqiD,EAAE;AAClC;AAEA;AACM,SAAUn3C,YAAY,CAC1BuC,UAAiB,EACjBE,QAAe;EAEf,IAAI20C,QAAQ;EAEZ;EACA,IAAI70C,UAAU,CAAC1N,CAAC,IAAI4N,QAAQ,CAAC5N,CAAC,EAAE;IAC9B,IAAI0N,UAAU,CAACtN,CAAC,IAAIwN,QAAQ,CAACxN,CAAC,EAAE;MAC9BmiD,QAAQ,GAAG,CAAC;KACb,CAAC;IAAA,KACG;MACHA,QAAQ,GAAG,CAAC;KACb,CAAC;GACH,MAAM;IACL,IAAI70C,UAAU,CAACtN,CAAC,IAAIwN,QAAQ,CAACxN,CAAC,EAAE;MAC9BmiD,QAAQ,GAAG,CAAC;KACb,CAAC;IAAA,KACG;MACHA,QAAQ,GAAG,CAAC;KACb,CAAC;;;EAGJ,MAAMC,QAAQ,GAAGviD,IAAI,CAACgO,GAAG,CAACP,UAAU,CAACtN,CAAC,GAAGwN,QAAQ,CAACxN,CAAC,CAAC;EACpD,MAAMqiD,QAAQ,GAAGxiD,IAAI,CAACgO,GAAG,CAACP,UAAU,CAAC1N,CAAC,GAAG4N,QAAQ,CAAC5N,CAAC,CAAC;EAEpD;EAEA,IAAIuiD,QAAQ,KAAK,CAAC,EAAE;IAClB,OAAO,EAAE,GAAGH,OAAO,CAACniD,IAAI,CAACyiD,KAAK,CAACD,QAAQ,EAAED,QAAQ,CAAC,CAAC;;EAErD,IAAID,QAAQ,KAAK,CAAC,EAAE;IAClB,OAAO,EAAE,GAAGH,OAAO,CAACniD,IAAI,CAACyiD,KAAK,CAACD,QAAQ,EAAED,QAAQ,CAAC,CAAC;;EAErD,IAAID,QAAQ,KAAK,CAAC,EAAE;IAClB,OAAO,GAAG,GAAGH,OAAO,CAACniD,IAAI,CAACyiD,KAAK,CAACD,QAAQ,EAAED,QAAQ,CAAC,CAAC;;EAEtD,IAAID,QAAQ,KAAK,CAAC,EAAE;IAClB,OAAO,GAAG,GAAGH,OAAO,CAACniD,IAAI,CAACyiD,KAAK,CAACD,QAAQ,EAAED,QAAQ,CAAC,CAAC;;EAEtD,OAAOvrC,SAAS;AAClB;AAEM,SAAUolC,cAAc,CAC5Bl8C,KAAa,EACbE,MAAc,EACds9C,QAAgB,EAChBC,QAAgB,EAChBT,MAAc,EACdE,MAAc;EAEd,IAAIF,MAAM,GAAGQ,QAAQ,IAAIR,MAAM,GAAGQ,QAAQ,GAAGx9C,KAAK,EAAE;IAClD,IAAIk9C,MAAM,GAAGO,QAAQ,IAAIP,MAAM,GAAGO,QAAQ,GAAGv9C,MAAM,EAAE;MACnD,OAAO,IAAI;;;EAGf,OAAO,KAAK;AACd;AAEM,MAAOsiD,KAAK;EAAlB91B;IACE,MAAC,GAAG,CAAC;IACL,MAAC,GAAG,CAAC;EACP;;;;;;;;;;;;;;;;ACtEkE;AAE5D,SAAUjrB,eAAe,CAAC5C,IAAY;EAC1C,IAAIA,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAACiG,KAAK,CAAC,EAAE;IACrC,OAAOlD,IAAI,CAACmG,OAAO,CAAClJ,4EAAY,CAACiG,KAAK,EAAE,EAAE,CAAC;GAC5C,MAAM,IAAIlD,IAAI,CAAC8B,QAAQ,CAAC7E,4EAAY,CAAC0G,UAAU,CAAC,EAAE;IACjD,OAAO3D,IAAI,CAACmG,OAAO,CAAClJ,4EAAY,CAAC0G,UAAU,EAAE,EAAE,CAAC;;EAElD,OAAO,EAAE;AACX;;;;;;;;;;;;;;;;ACTa;;AAEb;AACM,SAAUyvC,kBAAkB,CAACtxB,GAAW;EAC5C,MAAMrM,GAAG,GAA8B;IACrC,GAAG,EAAE,EAAE;IACP,IAAI,EAAE,EAAE;IACR,GAAG,EAAE,EAAE;IACP,GAAG,EAAE,EAAE;IACP,GAAG,EAAE,EAAE;IACP,GAAG,EAAE,EAAE;IACP,GAAG,EAAE,EAAE;IACP,GAAG,EAAE,EAAE;IACP,GAAG,EAAE;GACN;EACD,MAAMmuC,GAAG,GAAG,gBAAgB;EAC5B,OAAO9hC,GAAG,GAAGA,GAAG,CAAC3b,OAAO,CAACy9C,GAAG,EAAG9yC,KAAK,IAAK2E,GAAG,CAAC3E,KAAK,CAAC,CAAC,GAAG,EAAE;AAC3D;AAEM,SAAUqrB,gBAAgB,CAAC76B,IAAY;EAC3C,MAAMmU,GAAG,GAA8B;IACrC,GAAG,EAAE,EAAE;IACP,IAAI,EAAE,EAAE;IACR,GAAG,EAAE,EAAE;IACP,GAAG,EAAE,EAAE;IACP,GAAG,EAAE,EAAE;IACP,GAAG,EAAE,EAAE;IACP,GAAG,EAAE,EAAE;IACP,GAAG,EAAE,EAAE;IACP,GAAG,EAAE,EAAE;IACP,GAAG,EAAE,EAAE;IACP,GAAG,EAAE,EAAE;IACP,GAAG,EAAE,GAAG;IACR,GAAG,EAAE;GACN;EACD,MAAMmuC,GAAG,GAAG,oBAAoB;EAChC,OAAOtiD,IAAI,GACPA,IAAI,CAAC6E,OAAO,CAACy9C,GAAG,EAAG9yC,KAAK,IAAI;IAC1B,OAAO2E,GAAG,CAAC3E,KAAK,CAAC;EACnB,CAAC,CAAC,GACF,EAAE;AACR;AAEM,SAAUopC,wBAAwB,CACtC3Y,QAAgB,EAChBgZ,KAAc;EAEd,IAAIxzC,KAAK;EAET,MAAM88C,QAAQ,GAAG,gDAAgD;EACjE,MAAMC,QAAQ,GAAG,oDAAoD;EAErE,MAAMC,SAAS,GAAG,MAAM;EACxB,MAAMC,SAAS,GAAG,MAAM;EACxB,MAAMC,SAAS,GAAG,MAAM;EAExB,IAAIC,yBAAyB,GAAG3iB,QAAQ,CAACp7B,OAAO,CAC9Co0C,KAAK,GAAGuJ,QAAQ,GAAGD,QAAQ,EAC3B,EAAE,CACH;EACD,IAAIK,yBAAyB,CAACpiD,QAAQ,CAACy4C,KAAK,GAAG0J,SAAS,GAAGD,SAAS,CAAC,EAAE;IACrEE,yBAAyB,GAAGA,yBAAyB,CAClD/9C,OAAO,CAAC89C,SAAS,EAAE,EAAE,CAAC,CACtB99C,OAAO,CAAC69C,SAAS,EAAE,EAAE,CAAC,CACtB79C,OAAO,CAAC49C,SAAS,EAAE,EAAE,CAAC;;EAE3Bh9C,KAAK,GAAGm9C,yBAAyB;EACjC,OAAOn9C,KAAK;AACd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClEmD;AAEQ;AACK;AAC8B;AAE1C;;;;;;;;;;;;;;ICPlDqxB,wDAAAA,mBAA2D;;;ADiBvD,MAAO+rB,YAAY;EAKvBt2B,YACU6S,eAAgC,EAChCE,aAA4B,EAC5BpX,YAA0B,EAC1BsX,aAA4B,EAC5BsjB,iBAAqC,EACrCvjB,aAA4B;IAL5B,oBAAe,GAAfH,eAAe;IACf,kBAAa,GAAbE,aAAa;IACb,iBAAY,GAAZpX,YAAY;IACZ,kBAAa,GAAbsX,aAAa;IACb,sBAAiB,GAAjBsjB,iBAAiB;IACjB,kBAAa,GAAbvjB,aAAa;IARvB,YAAO,GAAW,EAAE;IAUlB,IAAI,CAACwjB,aAAa,GAAG,IAAIzpB,kDAAe,CAAC,KAAK,CAAC;IAC/C,IAAI,CAACyG,gBAAgB,GAAG,IAAIzG,kDAAe,CAAC,IAAI,CAAC;IACjD,IAAI,CAAC2a,OAAO,GAAGznB,6DAAO;IAEtB1oB,QAAQ,CAAC8b,SAAS,GAAItI,CAAgB,IAAI;MACxC,IAAIA,CAAC,CAAC0rC,OAAO,IAAI1rC,CAAC,CAAClP,GAAG,KAAK,GAAG,EAAE;QAC9B,IAAI,IAAI,CAACo3B,aAAa,CAACkB,uBAAuB,EAAE,EAAE;UAChD,IAAI,CAAClB,aAAa,CAACsB,WAAW,EAAE;;QAElCxpB,CAAC,CAACyI,cAAc,EAAE;QAClBzI,CAAC,CAACimC,eAAe,EAAE;;MAErB,IAAIjmC,CAAC,CAAC0rC,OAAO,IAAI1rC,CAAC,CAAClP,GAAG,KAAK,GAAG,EAAE;QAC9BtE,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,EAAE2B,KAAK,EAAE;QAC1C4R,CAAC,CAACyI,cAAc,EAAE;QAClBzI,CAAC,CAACimC,eAAe,EAAE;;MAErB,IAAIjmC,CAAC,CAAClP,GAAG,KAAK,YAAY,IAAI,IAAI,CAAC06C,iBAAiB,CAACzG,WAAW,EAAE,EAAE;QAClE/kC,CAAC,CAACyI,cAAc,EAAE;QAClBzI,CAAC,CAACimC,eAAe,EAAE;QACnBhe,aAAa,CAACsC,QAAQ,EAAE;;MAE1B,IAAIvqB,CAAC,CAAClP,GAAG,KAAK,WAAW,IAAI,IAAI,CAAC06C,iBAAiB,CAACzG,WAAW,EAAE,EAAE;QACjE/kC,CAAC,CAACyI,cAAc,EAAE;QAClBzI,CAAC,CAACimC,eAAe,EAAE;QACnBhe,aAAa,CAACqC,YAAY,EAAE;;IAEhC,CAAC;EACH;EAEA1J,QAAQ;IACN,IAAI,CAAC6H,gBAAgB,GAAG,IAAI,CAAC7X,YAAY,CAAC6X,gBAAgB;IAC1D,IAAI,CAACgjB,aAAa,GAAG,IAAI,CAAC3jB,eAAe,CAAC2jB,aAAa;EACzD;EAEAE,cAAc,CAACC,IAAY,EAAEz9C,KAAa,EAAE0I,IAAY;IACtD,MAAMqX,MAAM,GAAG,IAAI2Z,sEAAe,EAAE;IACpC3Z,MAAM,CAAC2b,YAAY,GAAG,KAAK;IAC3B3b,MAAM,CAAC4b,SAAS,GAAG,IAAI;IAEvB5b,MAAM,CAAC0G,IAAI,GAAG,IAAIuD,yEAAc,CAAChqB,KAAK,EAAE0I,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE+0C,IAAI,CAAC;IAE/D,IAAI,CAAC5jB,aAAa,CAAC+B,UAAU,CAACrH,uGAAmB,EAAExU,MAAM,CAAC;EAC5D;;AAxDWq9B,YAAY;mBAAZA,YAAY;AAAA;AAAZA,YAAY;QAAZA,YAAY;EAAArrB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MClBzBd,6DAAAA,aAAiC;MAC/BA,yDAAAA,kEAA2D;;MAC3DA,6DAAAA,UAQC;;;;;;MACCA,wDAAAA,eAA6D;MAE7DA,6DAAAA,kBAGC;;;MAAAA,2DAAAA,EAAa;MACdA,wDAAAA,mBAA2B;MAC7BA,2DAAAA,EAAM;MAENA,6DAAAA,WAGC;;;MACCA,6DAAAA,cAAiB;MAMbA,yDAAAA;QAAA,OAAS9O,mBAAe,gBAAgB,EAAE,KAAK,EAAE,cAAc,CAAC;MAAA,EAAC;MALnE8O,2DAAAA,EAME;MAEJA,6DAAAA,cAAiB;MAMbA,yDAAAA;QAAA,OACa9O,mBACC,iCACf,EAAc,qBACf,EAAc,mBACd,CACD;MAAA,EAAI;MAXH8O,2DAAAA,EAYE;;;MA7CSA,wDAAAA,GAA2B;MAA3BA,yDAAAA,SAAAA,0DAAAA,2BAA2B;MAExCA,wDAAAA,GAEC;MAFDA,0DAAAA,qBAAAA,0DAAAA,8BAAAA,0DAAAA,8BAEC;MASCA,wDAAAA,GAAyC;MAAzCA,0DAAAA,WAAAA,0DAAAA,+BAAyC;MAO3CA,wDAAAA,GAAgD;MAAhDA,0DAAAA,mBAAAA,0DAAAA,4BAAgD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBM;AAItB;AAEwC;AACG;AACM;AAChC;AACiB;AACwB;AACX;AACV;AACN;AAC+B;AAC5B;AAC4B;AACY;AACtB;AACY;AACM;AACM;AACvC;AACiC;AACN;AACnB;AAChB;AACK;AACwB;AACmC;AAC9E;;;AA0C7C,MAAO0sB,SAAS;EACpBj3B,YAAoBsL,eAAgC;IAAhC,oBAAe,GAAfA,eAAe;IACjC;EACF;;EAEA4rB,aAAa,CAACC,GAAmB;IAC/B,MAAMC,gBAAgB,GAAG7/C,QAAQ,CAACub,aAAa,CAAC,UAAU,CAAC;IAC3Dvb,QAAQ,CAAC8mC,IAAI,CAAC/gC,MAAM,CAAC85C,gBAAgB,CAAC;IACtCD,GAAG,CAACE,SAAS,CAACf,+DAAY,CAAC;EAC7B;;AATWW,SAAS;mBAATA,SAAS;AAAA;AAATA,SAAS;QAATA;AAAS;AAATA,SAAS;aApBT,CACTpe,gFAAe,EACf2M,gFAAa,EACb8G,wGAAwB,EACxBiC,6FAAmB,EACnB9L,+GAAqB,EACrBoS,6EAAY,EACZhG,4GAAsB,EACtBkE,gFAAa,EACb1O,6GAAsB,EACtBvG,yHAA0B,EAC1BuT,mFAAc,EACdlC,mGAAiB,EACjB4H,+DAAkB,EAClB;IACEO,OAAO,EAAET,qFAA4B;IACrCU,QAAQ,EAAE;MAAEC,WAAW,EAAE;IAAM;GAChC,CACF;EAAA5tB,UAzBCgtB,qEAAa,EACbE,uFAAoB,EACpBE,gEAAmB,EACnB1sB,4EAAc,EACdP,wGAA8B,EAC9BN,6DAAc;AAAA;;uHAsBLwtB,SAAS;IAAAttB,eAtClB6L,yFAAe,EACfgC,+FAAiB,EACjB8e,+DAAY,EACZ7oB,+GAAmB,EACnBT,qHAAqB,EACrBX,2HAAuB,EACvBmB,qHAAqB,EACrBvB,4FAAgB,EAChB8B,2IAA8B;IAAAnE,UAG9BgtB,qEAAa,EACbE,uFAAoB,EACpBE,gEAAmB,EACnB1sB,4EAAc,EACdP,wGAA8B,EAC9BN,6DAAc;EAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpDyC;AACO;AACT;AACI;AACI;AACV;AACS;AAGL;AACK;AACQ;AACjB;AACQ;;AAgCzD,MAAOA,cAAc;AAAdA,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA;AAAc;AAAdA,cAAc;YA5BvBuuB,qEAAe,EACfE,kFAAqB,EACrBC,iEAAa,EACbC,yEAAiB,EACjBX,qEAAe,EACfC,4EAAkB,EAClBO,0EAAiB,EACjBN,mEAAc,EACdC,uEAAgB,EAChBC,4EAAkB,EAClBE,2EAAiB,EACjBD,kEAAa,EAGbE,qEAAe,EACfE,kFAAqB,EACrBC,iEAAa,EACbC,yEAAiB,EACjBX,qEAAe,EACfC,4EAAkB,EAClBO,0EAAiB,EACjBN,mEAAc,EACdC,uEAAgB,EAChBC,4EAAkB,EAClBE,2EAAiB,EACjBD,kEAAa;AAAA;;sHAGJruB,cAAc;IAAAG,UA5BvBouB,qEAAe,EACfE,kFAAqB,EACrBC,iEAAa,EACbC,yEAAiB,EACjBX,qEAAe,EACfC,4EAAkB,EAClBO,0EAAiB,EACjBN,mEAAc,EACdC,uEAAgB,EAChBC,4EAAkB,EAClBE,2EAAiB,EACjBD,kEAAa;IAAAjuB,UAGbmuB,qEAAe,EACfE,kFAAqB,EACrBC,iEAAa,EACbC,yEAAiB,EACjBX,qEAAe,EACfC,4EAAkB,EAClBO,0EAAiB,EACjBN,mEAAc,EACdC,uEAAgB,EAChBC,4EAAkB,EAClBE,2EAAiB,EACjBD,kEAAa;EAAA;AAAA;;;;;;;;;;;;;;AC1CjB;AACA;AACA;AAEO,MAAMO,WAAW,GAAG;EACzBC,UAAU,EAAE;CACb;AAED;;;;;;;AAOA;;;;;;;;;;;;;;;;ACf+C;AAGF;AACY;AAEzD,IAAID,kEAAW,CAACC,UAAU,EAAE;EAC1BC,6DAAc,EAAE;;AAGlBC,sEAAAA,EAAwB,CACrBC,eAAe,CAACxB,sDAAS,CAAC,CAC1ByB,KAAK,CAAEnQ,GAAG,IAAKoQ,OAAO,CAACC,KAAK,CAACrQ,GAAG,CAAC,CAAC","sources":["./src/app/Modeler/index.js","./src/app/Modeler/modeler/change-icon/replace.js","./src/app/Modeler/modeler/change-icon/replaceMenuProvider.js","./src/app/Modeler/modeler/change-icon/replaceOptions.js","./src/app/Modeler/modeler/context-pad/domainStoryContextPadProvider.js","./src/app/Modeler/modeler/domainStoryElementFactory.js","./src/app/Modeler/modeler/domainStoryIdFactory.js","./src/app/Modeler/modeler/domainStoryRenderer.js","./src/app/Modeler/modeler/domainStoryRules.js","./src/app/Modeler/modeler/domainStoryUpdater.js","./src/app/Modeler/modeler/index.js","./src/app/Modeler/modeler/labeling/dsLabelEditingPreview.js","./src/app/Modeler/modeler/labeling/dsLabelEditingProvider.js","./src/app/Modeler/modeler/labeling/dsLabelUtil.js","./src/app/Modeler/modeler/labeling/index.js","./src/app/Modeler/modeler/labeling/position.js","./src/app/Modeler/modeler/modeling/dSModeling.js","./src/app/Modeler/modeler/modeling/index.js","./src/app/Modeler/modeler/numbering/numbering.js","./src/app/Modeler/modeler/palette/domainStoryPalette.js","./src/app/Modeler/modeler/updateHandler/activityUpdateHandlers.js","./src/app/Modeler/modeler/updateHandler/elementUpdateHandler.js","./src/app/Modeler/modeler/updateHandler/headlineAndDescriptionUpdateHandler.js","./src/app/Modeler/modeler/updateHandler/massRenameHandler.js","./src/app/Modeler/modeler/updateHandler/updateLabelHandler.js","./src/app/Modeler/modeler/util.js","./src/app/Service/Export/exportUtil.js","./src/app/Domain/Common/businessObject.ts","./src/app/Domain/Common/configuration.ts","./src/app/Domain/Common/constants.ts","./src/app/Domain/Common/dictionary/dictionary.ts","./src/app/Domain/Common/domainConfiguration.ts","./src/app/Domain/Common/elementTypes.ts","./src/app/Domain/Common/iconConfiguration.ts","./src/app/Domain/Dialog/activityDialogData.ts","./src/app/Domain/Dialog/exportDialogData.ts","./src/app/Domain/Dialog/infoDialogData.ts","./src/app/Domain/DomManipulation/replayConstants.ts","./src/app/Domain/Domain-Configuration/allIcons.ts","./src/app/Domain/Domain-Configuration/iconFilterEnum.ts","./src/app/Domain/Export/configAndDst.ts","./src/app/Domain/Export/exportConstants.ts","./src/app/Modules/autosave-settings.module.ts","./src/app/Modules/domain-story-modeler-module.module.ts","./src/app/Modules/settings.module.ts","./src/app/Presentation/Autosave/AutosaveOptions/autosave-options.component.ts","./src/app/Presentation/Autosave/AutosaveOptions/autosave-options.component.html","./src/app/Presentation/Autosave/AutosaveSettings/autosave-settings.component.ts","./src/app/Presentation/Autosave/AutosaveSettings/autosave-settings.component.html","./src/app/Presentation/Autosave/AutosavedDrafts/autosaved-drafts.component.ts","./src/app/Presentation/Autosave/AutosavedDrafts/autosaved-drafts.component.html","./src/app/Presentation/Canvas/modeler.component.ts","./src/app/Presentation/Canvas/modeler.component.html","./src/app/Presentation/Dialog/activity-dialog/activity-dialog.component.ts","./src/app/Presentation/Dialog/activity-dialog/activity-dialog.component.html","./src/app/Presentation/Dialog/export-dialog/export-dialog.component.ts","./src/app/Presentation/Dialog/export-dialog/export-dialog.component.html","./src/app/Presentation/Dialog/header-dialog/header-dialog.component.ts","./src/app/Presentation/Dialog/header-dialog/header-dialog.component.html","./src/app/Presentation/Dialog/info-dialog/info-dialog.component.ts","./src/app/Presentation/Dialog/info-dialog/info-dialog.component.html","./src/app/Presentation/Dialog/label-dictionary-dialog/label-dictionary-dialog.component.ts","./src/app/Presentation/Dialog/label-dictionary-dialog/label-dictionary-dialog.component.html","./src/app/Presentation/DomainConfiguration/details-list-item/details-list-item.component.ts","./src/app/Presentation/DomainConfiguration/details-list-item/details-list-item.component.html","./src/app/Presentation/DomainConfiguration/domain-configuration.component.ts","./src/app/Presentation/DomainConfiguration/domain-configuration.component.html","./src/app/Presentation/DomainConfiguration/domain-details/domain-details.component.html","./src/app/Presentation/DomainConfiguration/domain-details/domain-details.component.ts","./src/app/Presentation/DomainConfiguration/icon-list-item/icon-list-item.component.ts","./src/app/Presentation/DomainConfiguration/icon-list-item/icon-list-item.component.html","./src/app/Presentation/Header/header-buttons.component.ts","./src/app/Presentation/Header/header-buttons.component.html","./src/app/Presentation/Header/header.component.ts","./src/app/Presentation/Header/header.component.html","./src/app/Presentation/LabelDictionary/label-dictionary.component.ts","./src/app/Presentation/LabelDictionary/label-dictionary.component.html","./src/app/Presentation/Settings/General/general-settings.component.ts","./src/app/Presentation/Settings/General/general-settings.component.html","./src/app/Presentation/Settings/settings.component.ts","./src/app/Presentation/Settings/settings.component.html","./src/app/Service/Autosave/autosave-configuration.service.ts","./src/app/Service/Autosave/autosave.service.ts","./src/app/Service/BrowserStorage/storage.service.ts","./src/app/Service/CommandStack/command-stack.service.ts","./src/app/Service/Dialog/dialog.service.ts","./src/app/Service/DirtyFlag/dirty-flag.service.ts","./src/app/Service/DomManipulation/dom-manipulation.service.ts","./src/app/Service/DomainConfiguration/domain-configuration.service.ts","./src/app/Service/DomainConfiguration/domain-customization.service.ts","./src/app/Service/DomainConfiguration/icon-dictionary.service.ts","./src/app/Service/ElementRegistry/element-registry.service.ts","./src/app/Service/Export/export.service.ts","./src/app/Service/Export/html-presentation.service.ts","./src/app/Service/Export/png.service.ts","./src/app/Service/Export/svg.service.ts","./src/app/Service/Import/import-domain-story.service.ts","./src/app/Service/Import/import-repair.service.ts","./src/app/Service/LabelDictionary/label-dictionary.service.ts","./src/app/Service/LabelDictionary/mass-naming.service.ts","./src/app/Service/Modeler/initializer.service.ts","./src/app/Service/Modeler/modeler.service.ts","./src/app/Service/Renderer/renderer.service.ts","./src/app/Service/Replay/replay-state.service.ts","./src/app/Service/Replay/replay.service.ts","./src/app/Service/Replay/storyCreator/story-creator.service.ts","./src/app/Service/Settings/settings.service.ts","./src/app/Service/Title/title.service.ts","./src/app/Utils/mathExtensions.ts","./src/app/Utils/naming.ts","./src/app/Utils/sanitizer.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/material.module.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import Modeler from \"bpmn-js/lib/Modeler\";\r\nimport ResizeModule from \"diagram-js/lib/features/resize\";\r\nimport { assign, isArray } from \"min-dash\";\r\nimport inherits from \"inherits\";\r\n\r\nimport DomainStoryModule from \"./modeler\";\r\nimport LabelEditingModule from \"./modeler/labeling\";\r\nimport ModelingModule from \"./modeler/modeling\";\r\nimport { elementTypes } from \"../Domain/Common/elementTypes\";\r\n\r\nexport default function DomainStoryModeler(options) {\r\n  Modeler.call(this, options);\r\n\r\n  this._customElements = [];\r\n  this._groupElements = [];\r\n}\r\n\r\ninherits(DomainStoryModeler, Modeler);\r\n\r\nDomainStoryModeler.prototype._modules = [].concat(\r\n  DomainStoryModeler.prototype._modules,\r\n  [DomainStoryModule, LabelEditingModule, ModelingModule],\r\n  [ResizeModule]\r\n);\r\n\r\n/**\r\n * add a single custom element to the underlying diagram\r\n *\r\n * @param {Object} customElement\r\n */\r\nDomainStoryModeler.prototype._addCustomShape = function (customElement) {\r\n  let parentId = customElement.parent;\r\n  delete customElement.children;\r\n  delete customElement.parent;\r\n  this._customElements.push(customElement);\r\n\r\n  let canvas = this.get(\"canvas\"),\r\n    elementFactory = this.get(\"elementFactory\");\r\n\r\n  let customAttrs = assign({ businessObject: customElement }, customElement);\r\n  let customShape = elementFactory.create(\"shape\", customAttrs);\r\n\r\n  if (isGroup(customElement)) {\r\n    this._groupElements[customElement.id] = customShape;\r\n  }\r\n\r\n  if (parentId) {\r\n    let parentShape = this._groupElements[parentId];\r\n\r\n    if (isGroup(parentShape)) {\r\n      return canvas.addShape(customShape, parentShape, parentShape.id);\r\n    }\r\n  }\r\n  return canvas.addShape(customShape);\r\n};\r\n\r\nDomainStoryModeler.prototype._addCustomConnection = function (customElement) {\r\n  this._customElements.push(customElement);\r\n\r\n  let canvas = this.get(\"canvas\"),\r\n    elementFactory = this.get(\"elementFactory\"),\r\n    elementRegistry = this.get(\"elementRegistry\");\r\n\r\n  let customAttrs = assign({ businessObject: customElement }, customElement);\r\n\r\n  let connection = elementFactory.create(\r\n    \"connection\",\r\n    assign(customAttrs, {\r\n      source: elementRegistry.get(customElement.source),\r\n      target: elementRegistry.get(customElement.target),\r\n    }),\r\n    elementRegistry.get(customElement.source).parent\r\n  );\r\n\r\n  return canvas.addConnection(connection);\r\n};\r\n\r\n//** We import BusinessObjects, not the whole Canvas Object!!!!!!!!\r\nDomainStoryModeler.prototype.importCustomElements = function (elements) {\r\n  this.get(\"eventBus\").fire(\"diagram.clear\", {});\r\n  this._customElements = [];\r\n  this._groupElements = [];\r\n\r\n  this.addCustomElements(elements);\r\n};\r\n\r\n/**\r\n * add a number of custom elements and connections to the underlying diagram.\r\n *\r\n * @param {Array<Object>} customElements\r\n */\r\nDomainStoryModeler.prototype.addCustomElements = function (customElements) {\r\n  if (!isArray(customElements)) {\r\n    throw new Error(\"argument must be an array\");\r\n  }\r\n\r\n  let shapes = [],\r\n    connections = [],\r\n    groups = [];\r\n\r\n  customElements.forEach(function (customElement) {\r\n    if (isConnection(customElement)) {\r\n      connections.push(customElement);\r\n    } else if (isGroup(customElement)) {\r\n      groups.push(customElement);\r\n    } else {\r\n      shapes.push(customElement);\r\n    }\r\n  });\r\n\r\n  // add groups before shapes and shapes before connections so that connections\r\n  // can already rely on the shapes being part of the diagram\r\n  groups.forEach(this._addCustomShape, this);\r\n  shapes.forEach(this._addCustomShape, this);\r\n  connections.forEach(this._addCustomConnection, this);\r\n};\r\n\r\n/**\r\n * get custom elements with their current status.\r\n *\r\n * @return {Array<Object>} custom elements on the diagram\r\n */\r\nDomainStoryModeler.prototype.getCustomElements = function () {\r\n  return this._customElements;\r\n};\r\n\r\n// override standard function to prevent default elements on canvas\r\nDomainStoryModeler.prototype.createDiagram = function (done) {};\r\n\r\nfunction isConnection(element) {\r\n  return (\r\n    element.type === elementTypes.ACTIVITY ||\r\n    element.type === elementTypes.CONNECTION\r\n  );\r\n}\r\n\r\nfunction isGroup(element) {\r\n  return element && element.type === elementTypes.GROUP;\r\n}\r\n","\"use strict\";\r\n\r\nimport { assign } from \"min-dash\";\r\n\r\n/**\r\n * service that allow replacing of elements.\r\n */\r\nexport default function Replace(modeling) {\r\n  this._modeling = modeling;\r\n}\r\n\r\n/**\r\n * @param {Element} oldElement - element to be replaced\r\n * @param {Object}  newElementData - containing information about the new Element, for example height, width, type.\r\n * @param modeling\r\n */\r\nfunction replaceElement(oldElement, newElementData, modeling) {\r\n  // let modeling = this._modeling;\r\n\r\n  let newElement = setCenterOfElement(newElementData, oldElement, modeling);\r\n  let outgoingActivities = newElement.outgoing;\r\n  let incomingActivities = newElement.incoming;\r\n\r\n  outgoingActivities.forEach((element) => {\r\n    element.businessObject.source = newElement.id;\r\n  });\r\n\r\n  incomingActivities.forEach((element) => {\r\n    element.businessObject.target = newElement.id;\r\n  });\r\n\r\n  return newElement;\r\n}\r\n\r\nfunction setCenterOfElement(newElementData, oldElement, modeling) {\r\n  newElementData.x = Math.ceil(\r\n    oldElement.x + (newElementData.width || oldElement.width) / 2\r\n  );\r\n  newElementData.y = Math.ceil(\r\n    oldElement.y + (newElementData.height || oldElement.height) / 2\r\n  );\r\n\r\n  assign(newElementData, { name: oldElement.businessObject.name });\r\n\r\n  return modeling.replaceShape(oldElement, newElementData, {});\r\n}\r\n\r\nReplace.prototype.replaceElement = replaceElement;\r\n","\"use strict\";\r\n\r\nimport Replace from \"./replace\";\r\nimport * as replaceOptions from \"./replaceOptions\";\r\n\r\nimport { forEach } from \"min-dash\";\r\n\r\n/**\r\n * This module is an element agnostic replace menu provider for the popup menu.\r\n */\r\nexport default function ReplaceMenuProvider(modeling) {\r\n  this._dsReplace = new Replace(modeling);\r\n  this._modeling = modeling;\r\n}\r\n\r\nReplaceMenuProvider.$inject = [\"modeling\"];\r\n\r\n/**\r\n * Get all entries from replaceOptions for the given element and apply filters\r\n * on them. Get for example only elements, which are different from the current one.\r\n *\r\n * @param {djs.model.Base} element\r\n *\r\n * @return {Array<Object>} a list of menu entry items\r\n */\r\nReplaceMenuProvider.prototype.getEntries = function (element) {\r\n  let entries;\r\n  if (element.type.includes(\"actor\")) {\r\n    entries = replaceOptions.actorReplaceOptions(element.type);\r\n  } else if (element.type.includes(\"workObject\")) {\r\n    entries = replaceOptions.workObjectReplaceOptions(element.type);\r\n  }\r\n\r\n  return this._createEntries(element, entries);\r\n};\r\n\r\n/**\r\n * Creates an array of menu entry objects for a given element and filters the replaceOptions\r\n * according to a filter function.\r\n *\r\n * @param  {djs.model.Base} element\r\n * @param  {Object} replaceOptions\r\n *\r\n * @return {Array<Object>} a list of menu items\r\n */\r\nReplaceMenuProvider.prototype._createEntries = function (\r\n  element,\r\n  replaceOptions\r\n) {\r\n  let menuEntries = [];\r\n\r\n  let self = this;\r\n\r\n  forEach(replaceOptions, function (definition) {\r\n    let entry = self._createMenuEntry(definition, element);\r\n\r\n    menuEntries.push(entry);\r\n  });\r\n\r\n  return menuEntries;\r\n};\r\n\r\n/**\r\n * Creates and returns a single menu entry item.\r\n *\r\n * @param  {Object} definition a single replace options definition object\r\n * @param  {djs.model.Base} element\r\n * @param  {Function} [action] an action callback function which gets called when\r\n *                             the menu entry is being triggered.\r\n *\r\n * @return {Object} menu entry item\r\n */\r\nReplaceMenuProvider.prototype._createMenuEntry = function (\r\n  definition,\r\n  element,\r\n  action\r\n) {\r\n  let replaceElement = this._dsReplace.replaceElement;\r\n  let modeling = this._modeling;\r\n  let replaceAction = function () {\r\n    return replaceElement(element, definition.target, modeling);\r\n  };\r\n\r\n  action = action || replaceAction;\r\n\r\n  return {\r\n    label: definition.label,\r\n    className: definition.className,\r\n    id: definition.actionName,\r\n    action: action,\r\n  };\r\n};\r\n","import { elementTypes } from \"src/app/Domain/Common/elementTypes\";\r\nimport { getNameFromType } from \"src/app/Utils/naming\";\r\n\r\nlet iconDictionaryService;\r\n\r\nexport function initializeReplaceOptions(iconDictionary) {\r\n  iconDictionaryService = iconDictionary;\r\n}\r\n\r\nexport function actorReplaceOptions(name) {\r\n  const actorTypes = iconDictionaryService.getTypeDictionary(\r\n    elementTypes.ACTOR\r\n  );\r\n\r\n  let replaceOption = {};\r\n  let i = 0;\r\n\r\n  actorTypes.keysArray().forEach((actorType) => {\r\n    if (!name.includes(actorType)) {\r\n      const typeName = getNameFromType(actorType);\r\n      replaceOption[i] = {\r\n        label: \"Change to \" + typeName,\r\n        actionName: \"replace-with-actor-\" + typeName.toLowerCase(),\r\n        className: iconDictionaryService.getIconForBPMN(actorType),\r\n        target: {\r\n          type: actorType,\r\n        },\r\n      };\r\n      i++;\r\n    }\r\n  });\r\n  return replaceOption;\r\n}\r\n\r\nexport function workObjectReplaceOptions(name) {\r\n  const workObjectTypes = iconDictionaryService.getTypeDictionary(\r\n    elementTypes.WORKOBJECT\r\n  );\r\n\r\n  let replaceOption = {};\r\n  let i = 0;\r\n\r\n  workObjectTypes.keysArray().forEach((workObjectType) => {\r\n    if (!name.includes(workObjectType)) {\r\n      const typeName = getNameFromType(workObjectType);\r\n      replaceOption[i] = {\r\n        label: \"Change to \" + typeName,\r\n        actionName: \"replace-with-actor-\" + typeName,\r\n        className: iconDictionaryService.getIconForBPMN(workObjectType),\r\n        target: {\r\n          type: workObjectType,\r\n        },\r\n      };\r\n    }\r\n    i++;\r\n  });\r\n  return replaceOption;\r\n}\r\n","\"use strict\";\r\n\r\nimport inherits from \"inherits\";\r\n\r\nimport ContextPadProvider from \"bpmn-js/lib/features/context-pad/ContextPadProvider\";\r\n\r\nimport { assign, bind } from \"min-dash\";\r\nimport { generateAutomaticNumber } from \"../numbering/numbering\";\r\nimport { elementTypes } from \"src/app/Domain/Common/elementTypes\";\r\nimport { getAllStandardIconKeys } from \"src/app/Domain/Domain-Configuration/allIcons\";\r\nimport { getNameFromType } from \"src/app/Utils/naming\";\r\n\r\nlet dirtyFlagService;\r\nlet iconDictionaryService;\r\n\r\nexport function initializeContextPadProvider(dirtyFlag, iconDictionary) {\r\n  dirtyFlagService = dirtyFlag;\r\n  iconDictionaryService = iconDictionary;\r\n}\r\n\r\nexport default function DomainStoryContextPadProvider(\r\n  injector,\r\n  connect,\r\n  translate,\r\n  elementFactory,\r\n  create,\r\n  canvas,\r\n  contextPad,\r\n  popupMenu,\r\n  replaceMenuProvider,\r\n  commandStack,\r\n  eventBus,\r\n  modeling\r\n) {\r\n  let startConnect;\r\n  let selectedElement;\r\n\r\n  injector.invoke(ContextPadProvider, this);\r\n  let autoPlace = injector.get(\"autoPlace\", false);\r\n\r\n  let cached = bind(this.getContextPadEntries, this);\r\n\r\n  const colorPicker = document.getElementById(\"colorPicker\");\r\n  colorPicker.onchange = (ev) => {\r\n    const context = {\r\n      businessObject: selectedElement.businessObject,\r\n      newColor: ev.target.value,\r\n      element: selectedElement,\r\n    };\r\n\r\n    commandStack.execute(\"element.colorChange\", context);\r\n    dirtyFlagService.makeDirty();\r\n  };\r\n\r\n  popupMenu.registerProvider(\"ds-replace\", replaceMenuProvider);\r\n  popupMenu.registerProvider(\"bpmn-replace\", replaceMenuProvider);\r\n\r\n  this.getContextPadEntries = function (element) {\r\n    const allStandardIconKeys = getAllStandardIconKeys();\r\n    let actions = cached(element);\r\n\r\n    startConnect = function (event, element, autoActivate) {\r\n      connect.start(event, element, autoActivate);\r\n    };\r\n\r\n    if (element.type.includes(elementTypes.WORKOBJECT)) {\r\n      if (\r\n        allStandardIconKeys.includes(\r\n          element.type.replace(elementTypes.WORKOBJECT, \"\")\r\n        )\r\n      ) {\r\n        addColorChange(actions);\r\n      }\r\n      addConnectWithActivity(actions, startConnect);\r\n      addTextAnnotation(actions);\r\n      addActors(appendAction, actions);\r\n      addWorkObjects(appendAction, actions);\r\n      addChangeWorkObjectTypeMenu(actions);\r\n    } else if (element.type.includes(elementTypes.ACTOR)) {\r\n      if (\r\n        allStandardIconKeys.includes(\r\n          element.type.replace(elementTypes.ACTOR, \"\")\r\n        )\r\n      ) {\r\n        addColorChange(actions);\r\n      }\r\n      addConnectWithActivity(actions, startConnect);\r\n      addTextAnnotation(actions);\r\n      addWorkObjects(appendAction, actions);\r\n      addChangeActorTypeMenu(actions);\r\n    } else if (element.type.includes(elementTypes.GROUP)) {\r\n      delete actions.delete;\r\n      addTextAnnotation(actions);\r\n      assign(actions, {\r\n        deleteGroup: {\r\n          group: \"edit\",\r\n          className: \"bpmn-icon-trash\",\r\n          title: \"Remove Group without Child-Elements\",\r\n          action: {\r\n            click: function (event, element) {\r\n              modeling.removeGroup(element);\r\n              dirtyFlagService.makeDirty();\r\n            },\r\n          },\r\n        },\r\n      });\r\n      addColorChange(actions);\r\n    } else if (element.type.includes(elementTypes.ACTIVITY)) {\r\n      moveDeleteActionToEndOfArray(actions);\r\n\r\n      addColorChange(actions);\r\n\r\n      assign(actions, {\r\n        delete: {\r\n          group: \"edit\",\r\n          className: \"bpmn-icon-trash\",\r\n          title: \"Remove\",\r\n          action: {\r\n            click: function (event, element) {\r\n              modeling.removeElements({ element });\r\n              dirtyFlagService.makeDirty();\r\n            },\r\n          },\r\n        },\r\n      });\r\n    }\r\n\r\n    return actions;\r\n  };\r\n\r\n  function moveDeleteActionToEndOfArray(actions) {\r\n    delete actions.delete;\r\n\r\n    assign(actions, {\r\n      changeDirection: {\r\n        group: \"edit\",\r\n        className: \"icon-domain-story-changeDirection\",\r\n        title: translate(\"Change direction\"),\r\n        action: {\r\n          // event needs to be addressed\r\n          click: function (event, element) {\r\n            changeDirection(element);\r\n          },\r\n        },\r\n      },\r\n    });\r\n  }\r\n\r\n  function addChangeActorTypeMenu(actions) {\r\n    assign(actions, {\r\n      replace: {\r\n        group: \"edit\",\r\n        className: \"bpmn-icon-screw-wrench\",\r\n        title: translate(\"Change type\"),\r\n        action: {\r\n          click: function (event, element) {\r\n            let position = assign(getReplaceMenuPosition(element), {\r\n              cursor: { x: event.x, y: event.y },\r\n            });\r\n            popupMenu.open(element, \"ds-replace\", position);\r\n          },\r\n        },\r\n      },\r\n    });\r\n  }\r\n\r\n  function addColorChange(actions) {\r\n    assign(actions, {\r\n      colorChange: {\r\n        group: \"edit\",\r\n        className: \"icon-domain-story-color-picker\",\r\n        title: translate(\"Change color\"),\r\n        action: {\r\n          click: function (event, element) {\r\n            selectedElement = element;\r\n            colorPicker.click();\r\n          },\r\n        },\r\n      },\r\n    });\r\n  }\r\n\r\n  function addTextAnnotation(actions) {\r\n    assign(actions, {\r\n      \"append.text-annotation\": appendAction(\r\n        elementTypes.TEXTANNOTATION,\r\n        \"bpmn-icon-text-annotation\",\r\n        \"textannotation\",\r\n        \"connect\"\r\n      ),\r\n    });\r\n  }\r\n\r\n  function addConnectWithActivity(actions, startConnect) {\r\n    assign(actions, {\r\n      connect: {\r\n        group: \"connect\",\r\n        className: \"bpmn-icon-connection\",\r\n        title: translate(\"Connect with activity\"),\r\n        action: {\r\n          click: startConnect,\r\n          dragstart: startConnect,\r\n        },\r\n      },\r\n    });\r\n  }\r\n\r\n  function addWorkObjects(appendAction, actions) {\r\n    let workObjectTypes = iconDictionaryService.getTypeDictionary(\r\n      elementTypes.WORKOBJECT\r\n    );\r\n    workObjectTypes.keysArray().forEach((workObjectType) => {\r\n      let name = getNameFromType(workObjectType);\r\n      let icon = iconDictionaryService.getIconForBPMN(workObjectType);\r\n      let action = [];\r\n      action[\"append.workObject\" + name] = appendAction(\r\n        workObjectType,\r\n        icon,\r\n        name,\r\n        \"workObjects\"\r\n      );\r\n      assign(actions, action);\r\n    });\r\n  }\r\n\r\n  function addActors(appendAction, actions) {\r\n    let actorTypes = iconDictionaryService.getTypeDictionary(\r\n      elementTypes.ACTOR\r\n    );\r\n    actorTypes.keysArray().forEach((actorType) => {\r\n      let name = getNameFromType(actorType);\r\n      let icon = iconDictionaryService.getIconForBPMN(actorType);\r\n      let action = [];\r\n      action[\"append.actor\" + name] = appendAction(\r\n        actorType,\r\n        icon,\r\n        name,\r\n        \"actors\"\r\n      );\r\n      assign(actions, action);\r\n    });\r\n  }\r\n\r\n  function addChangeWorkObjectTypeMenu(actions) {\r\n    assign(actions, {\r\n      replace: {\r\n        group: \"edit\",\r\n        className: \"bpmn-icon-screw-wrench\",\r\n        title: translate(\"Change type\"),\r\n        action: {\r\n          click: function (event, element) {\r\n            let position = assign(getReplaceMenuPosition(element), {\r\n              cursor: { x: event.x, y: event.y },\r\n            });\r\n            popupMenu.open(element, \"ds-replace\", position);\r\n          },\r\n        },\r\n      },\r\n    });\r\n  }\r\n\r\n  function changeDirection(element) {\r\n    let context;\r\n    let businessObject = element.businessObject;\r\n    let newNumber;\r\n\r\n    if (element.source.type.includes(elementTypes.ACTOR)) {\r\n      newNumber = 0;\r\n    } else {\r\n      newNumber = generateAutomaticNumber(element, commandStack);\r\n    }\r\n    context = {\r\n      businessObject: businessObject,\r\n      newNumber: newNumber,\r\n      element: element,\r\n    };\r\n    commandStack.execute(\"activity.directionChange\", context);\r\n  }\r\n\r\n  function getReplaceMenuPosition(element) {\r\n    let Y_OFFSET = 5;\r\n\r\n    let diagramContainer = canvas.getContainer(),\r\n      pad = contextPad.getPad(element).html;\r\n\r\n    let diagramRect = diagramContainer.getBoundingClientRect(),\r\n      padRect = pad.getBoundingClientRect();\r\n\r\n    let top = padRect.top - diagramRect.top;\r\n    let left = padRect.left - diagramRect.left;\r\n\r\n    return {\r\n      x: left,\r\n      y: top + padRect.height + Y_OFFSET,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * create an append action\r\n   *\r\n   * @param {String} type\r\n   * @param {String} className\r\n   * @param {String} [title]\r\n   * @param {String} group\r\n   * @param {Object} [options]\r\n   *\r\n   * @return {Object} descriptor\r\n   */\r\n  function appendAction(type, className, title, group, options) {\r\n    if (typeof title !== \"string\") {\r\n      options = title;\r\n      title = translate(\"{type}\", { type: type.replace(/^domainStory:/, \"\") });\r\n    }\r\n\r\n    function appendStart(event, element) {\r\n      let shape = elementFactory.createShape(assign({ type: type }, options));\r\n      let context = {\r\n        elements: [shape],\r\n        hints: {},\r\n        source: element,\r\n      };\r\n      create.start(event, shape, context);\r\n    }\r\n\r\n    return {\r\n      group: group,\r\n      className: className,\r\n      title: \"Append \" + title,\r\n      action: {\r\n        dragstart: startConnect,\r\n        click: appendStart,\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\ninherits(DomainStoryContextPadProvider, ContextPadProvider);\r\n\r\nDomainStoryContextPadProvider.$inject = [\r\n  \"injector\",\r\n  \"connect\",\r\n  \"translate\",\r\n  \"elementFactory\",\r\n  \"create\",\r\n  \"canvas\",\r\n  \"contextPad\",\r\n  \"popupMenu\",\r\n  \"replaceMenuProvider\",\r\n  \"commandStack\",\r\n  \"eventBus\",\r\n  \"modeling\",\r\n];\r\n","\"use strict\";\r\n\r\nimport { assign } from \"min-dash\";\r\n\r\nimport inherits from \"inherits\";\r\n\r\nimport BpmnElementFactory from \"bpmn-js/lib/features/modeling/ElementFactory\";\r\n\r\nimport { DEFAULT_LABEL_SIZE } from \"bpmn-js/lib/util/LabelUtil\";\r\n\r\nimport DomainStoryIdFactory from \"./domainStoryIdFactory\";\r\n\r\n/**\r\n * A custom factory that knows how to create BPMN _and_ custom elements.\r\n */\r\nexport default function DomainStoryElementFactory(bpmnFactory, moddle) {\r\n  BpmnElementFactory.call(this, bpmnFactory, moddle);\r\n\r\n  let self = this;\r\n  let domainStoryIdFactory = new DomainStoryIdFactory();\r\n\r\n  /**\r\n   * create a diagram-js element with the given type (any of shape, connection, label).\r\n   *\r\n   * @param  {String} elementType\r\n   * @param  {Object} attrs\r\n   *\r\n   * @return {djs.model.Base}\r\n   */\r\n  this.create = function (elementType, attrs) {\r\n    let type = attrs.type;\r\n\r\n    if (elementType === \"label\") {\r\n      return self.baseCreate(\r\n        elementType,\r\n        assign({ type: \"label\" }, DEFAULT_LABEL_SIZE, attrs)\r\n      );\r\n    }\r\n\r\n    // add type to businessObject if custom\r\n    if (/^domainStory:/.test(type)) {\r\n      if (!attrs.businessObject) {\r\n        attrs.businessObject = {\r\n          type: type,\r\n          name: attrs.name ? attrs.name : \"\",\r\n        };\r\n      }\r\n\r\n      if (attrs.id) {\r\n        domainStoryIdFactory.registerId(attrs.id);\r\n      } else {\r\n        attrs.id = domainStoryIdFactory.getId(elementType);\r\n      }\r\n      assign(attrs.businessObject, {\r\n        id: attrs.id,\r\n      });\r\n\r\n      let id = attrs.id;\r\n      attrs.businessObject.get = function (key) {\r\n        if (key === \"id\") {\r\n          return id;\r\n        }\r\n      };\r\n      attrs.businessObject.set = function (key, value) {\r\n        if (key === \"id\") {\r\n          assign(attrs.businessObject, { id: value });\r\n        }\r\n      };\r\n\r\n      if (!attrs.businessObject.$type) {\r\n        assign(attrs.businessObject, { $type: \"Element\" });\r\n      }\r\n      assign(attrs.businessObject, { di: {} });\r\n      if (!attrs.businessObject.$descriptor) {\r\n        assign(attrs.businessObject, { $descriptor: {} });\r\n      }\r\n\r\n      // add width and height if shape\r\n      if (\r\n        (!/:activity$/.test(type) || !/:connection$/.test(type)) &&\r\n        !((/:group$/.test(type) && attrs.height) || attrs.width)\r\n      ) {\r\n        assign(attrs, self._getCustomElementSize(type));\r\n      }\r\n\r\n      if (!(\"$instanceOf\" in attrs.businessObject)) {\r\n        // ensure we can use ModelUtil#is for type checks\r\n        Object.defineProperty(attrs.businessObject, \"$instanceOf\", {\r\n          value: function (type) {\r\n            return this.type === type;\r\n          },\r\n        });\r\n      }\r\n\r\n      return self.baseCreate(elementType, attrs);\r\n    }\r\n\r\n    return self.createBpmnElement(elementType, attrs);\r\n  };\r\n}\r\n\r\ninherits(DomainStoryElementFactory, BpmnElementFactory);\r\n\r\nDomainStoryElementFactory.$inject = [\"bpmnFactory\", \"moddle\"];\r\n\r\n/**\r\n * returns the default size of custom shapes.\r\n *\r\n * the following example shows an interface on how\r\n * to setup the custom shape's dimensions.\r\n * *\r\n * @param {String} type\r\n *\r\n * @return {Dimensions} a {width, height} object representing the size of the element\r\n */\r\nDomainStoryElementFactory.prototype._getCustomElementSize = function (type) {\r\n  let shapes = {\r\n    __default: { width: 75, height: 75 },\r\n    \"domainStory:textAnnotation\": { width: 100, height: 30 },\r\n    \"domainStory:group\": { width: 525, height: 275 },\r\n  };\r\n\r\n  return shapes[type] || shapes.__default;\r\n};\r\n\r\nclass Dimensions {\r\n  width;\r\n  height;\r\n}\r\n","\"use strict\";\r\n\r\nlet idList = [];\r\n\r\nexport default function DomainStoryIdFactory() {}\r\n\r\nDomainStoryIdFactory.prototype.getId = function (type) {\r\n  return generateId(type);\r\n};\r\n\r\nDomainStoryIdFactory.prototype.registerId = function (id) {\r\n  idList.push(id);\r\n};\r\n\r\nfunction generateId(type) {\r\n  let idNumber = fourDigitsId();\r\n\r\n  let id = type + \"_\" + idSuffix(idNumber);\r\n\r\n  while (containsId(id)) {\r\n    idNumber++;\r\n\r\n    id = type + \"_\" + idSuffix(idNumber);\r\n  }\r\n\r\n  idList.push(id);\r\n  return id;\r\n}\r\n\r\nfunction idSuffix(idNumber) {\r\n  let id;\r\n  if (idNumber > 9999) {\r\n    id = 0;\r\n  } else if (idNumber < 10) {\r\n    id = \"000\" + idNumber;\r\n  } else if (idNumber < 100) {\r\n    id = \"00\" + idNumber;\r\n  } else if (idNumber < 1000) {\r\n    id = \"0\" + idNumber;\r\n  } else {\r\n    id = \"\" + idNumber;\r\n  }\r\n  return id;\r\n}\r\n\r\nfunction fourDigitsId() {\r\n  return Math.floor(Math.random() * 10000);\r\n}\r\n\r\nexport function containsId(id) {\r\n  let same = false;\r\n  idList.forEach((element) => {\r\n    if (id === element) {\r\n      same = true;\r\n    }\r\n  });\r\n  return same;\r\n}\r\n","\"use strict\";\r\n\r\nimport inherits from \"inherits\";\r\nimport BaseRenderer from \"diagram-js/lib/draw/BaseRenderer\";\r\nimport Ids from \"ids\";\r\nimport { getAnnotationBoxHeight } from \"./labeling/dsLabelEditingPreview\";\r\nimport { componentsToPath, createLine } from \"diagram-js/lib/util/RenderUtil\";\r\nimport {\r\n  append as svgAppend,\r\n  attr as svgAttr,\r\n  classes as svgClasses,\r\n  create as svgCreate,\r\n} from \"tiny-svg\";\r\nimport { query as domQuery } from \"min-dom\";\r\nimport { assign, isObject } from \"min-dash\";\r\nimport { getNumberStash } from \"./labeling/dsLabelEditingProvider\";\r\nimport {\r\n  addNumberToRegistry,\r\n  generateAutomaticNumber,\r\n  numberBoxDefinitions,\r\n} from \"./numbering/numbering\";\r\n\r\nimport { calculateTextWidth } from \"./labeling/dsLabelUtil\";\r\nimport { countLines, labelPosition } from \"./labeling/position\";\r\nimport { elementTypes } from \"src/app/Domain/Common/elementTypes\";\r\nimport { angleBetween } from \"../../Utils/mathExtensions\";\r\n\r\nlet RENDERER_IDS = new Ids();\r\nlet numbers = [];\r\nconst DEFAULT_COLOR = \"black\";\r\n\r\n/**\r\n * a renderer that knows how to render custom elements.\r\n */\r\nlet iconDictionary;\r\nlet elementRegistry;\r\nlet dirtyFlag;\r\n\r\nexport function initializeRenderer(\r\n  iconDictionaryService,\r\n  elementRegistryService,\r\n  dirtyFlagService\r\n) {\r\n  iconDictionary = iconDictionaryService;\r\n  elementRegistry = elementRegistryService;\r\n  dirtyFlag = dirtyFlagService;\r\n}\r\n\r\nexport default function DomainStoryRenderer(\r\n  eventBus,\r\n  styles,\r\n  canvas,\r\n  textRenderer,\r\n  pathMap,\r\n  commandStack\r\n) {\r\n  BaseRenderer.call(this, eventBus, 2000);\r\n\r\n  let rendererId = RENDERER_IDS.next();\r\n  let markers = {};\r\n  let computeStyle = styles.computeStyle;\r\n\r\n  // generate the automatic Number for an activity originating from an actor\r\n  function generateActivityNumber(parentGfx, element, box) {\r\n    // whenever we want to edit an activity, it gets redrawn as a new object\r\n    // and the custom information is lost,\r\n    // so we stash it before the editing occurs and set the value here\r\n\r\n    let numberStash = getNumberStash();\r\n    let semantic = element.businessObject;\r\n\r\n    if (numberStash.use) {\r\n      semantic.number = numberStash.number;\r\n    }\r\n\r\n    box.x -= 65;\r\n    box.y -= 12;\r\n    renderNumber(parentGfx, \".\", backgroundDotStyle(box), element.type);\r\n    box.x += 30;\r\n    box.y += 3;\r\n    renderNumber(parentGfx, \"o\", backgroundBoxStyle(box), element.type);\r\n\r\n    numbers[semantic.number] = true;\r\n    box.x += 9;\r\n    box.y -= 7;\r\n\r\n    if (semantic.number < 10) {\r\n      box.x += 3;\r\n    }\r\n\r\n    let newRenderedNumber = renderNumber(\r\n      parentGfx,\r\n      semantic.number,\r\n      numberStyle(box),\r\n      element.type\r\n    );\r\n    addNumberToRegistry(newRenderedNumber, semantic.number);\r\n  }\r\n\r\n  // style functions\r\n  function numberStyle(box) {\r\n    return {\r\n      box: box,\r\n      fitBox: true,\r\n      style: assign({}, textRenderer.getExternalStyle(), {\r\n        fill: \"black\",\r\n        position: \"absolute\",\r\n      }),\r\n    };\r\n  }\r\n\r\n  function backgroundBoxStyle(box) {\r\n    return {\r\n      box: box,\r\n      fitBox: true,\r\n      style: assign({}, textRenderer.getExternalStyle(), {\r\n        fill: \"black\",\r\n        fontSize: 50,\r\n        position: \"absolute\",\r\n        fontFamily: \"Courier New\",\r\n      }),\r\n    };\r\n  }\r\n\r\n  function backgroundDotStyle(box) {\r\n    return {\r\n      box: box,\r\n      fitBox: true,\r\n      style: assign({}, textRenderer.getExternalStyle(), {\r\n        fill: \"white\",\r\n        fontSize: 150,\r\n        position: \"absolute\",\r\n        fontFamily: \"Courier\",\r\n      }),\r\n    };\r\n  }\r\n\r\n  // render functions\r\n  // render label associated with actors and workobjects\r\n  function renderEmbeddedLabel(parentGfx, element, align, padding) {\r\n    let businessObject = element.businessObject;\r\n    return renderLabel(\r\n      parentGfx,\r\n      businessObject.name,\r\n      {\r\n        box: element,\r\n        align: align,\r\n        padding: padding ? padding : 0,\r\n        style: {\r\n          fill: \"#000000\",\r\n        },\r\n      },\r\n      element.type\r\n    );\r\n  }\r\n\r\n  // render label associated with activities\r\n  function renderExternalLabel(parentGfx, element) {\r\n    let semantic = element.businessObject;\r\n    let waypoints = element.waypoints;\r\n    let lines = countLines(semantic.name);\r\n\r\n    if (element.waypoints != null) {\r\n      let position = labelPosition(waypoints, lines);\r\n      let startPoint = element.waypoints[position.selected];\r\n      let endPoint = element.waypoints[position.selected + 1];\r\n      let angle = angleBetween(startPoint, endPoint);\r\n      let alignment = \"left\";\r\n      let boxWidth = 500;\r\n      let xStart = position.x;\r\n\r\n      // if the activity is horizontal, we want to center the label\r\n      if (angle === 0 || angle === 180) {\r\n        boxWidth = Math.abs(startPoint.x - endPoint.x);\r\n        alignment = \"center\";\r\n        xStart =\r\n          (startPoint.x + endPoint.x) / 2 - calculateTextWidth(semantic.name);\r\n      }\r\n\r\n      let box = {\r\n        textAlign: alignment,\r\n        width: boxWidth,\r\n        height: 30,\r\n        x: xStart,\r\n        y: position.y,\r\n      };\r\n\r\n      if (semantic.name && semantic.name.length) {\r\n        return renderLabel(\r\n          parentGfx,\r\n          semantic.name,\r\n          {\r\n            box: box,\r\n            fitBox: true,\r\n            style: assign({}, textRenderer.getExternalStyle(), {\r\n              fill: \"black\",\r\n              wordWrap: \"break-word\",\r\n              overflowWrap: \"break-word\",\r\n              hyphens: \"auto\",\r\n            }),\r\n          },\r\n          element.type\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  // render the number associated with an activity\r\n  function renderExternalNumber(parentGfx, element) {\r\n    if (element && element.source) {\r\n      let semantic = element.businessObject;\r\n\r\n      let box = numberBoxDefinitions(element);\r\n\r\n      if (\r\n        semantic.number == null &&\r\n        element.source.type &&\r\n        element.source.type.includes(elementTypes.ACTOR)\r\n      ) {\r\n        generateAutomaticNumber(element, commandStack);\r\n      }\r\n\r\n      // render the background for the number\r\n      if (semantic.number && element.source.type.includes(elementTypes.ACTOR)) {\r\n        generateActivityNumber(parentGfx, element, box);\r\n      } else {\r\n        semantic.number = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  // render a number on the canvas\r\n  function renderNumber(parentGfx, number, options, type) {\r\n    if (number < 10) {\r\n      number = String(number);\r\n    }\r\n    number = String(number);\r\n    let text = textRenderer.createText(number || \"\", options);\r\n    let height = 0;\r\n\r\n    svgClasses(text).add(\"djs-labelNumber\");\r\n\r\n    setCoordinates(type, text, options, height, parentGfx);\r\n\r\n    svgAppend(parentGfx, text);\r\n    return text;\r\n  }\r\n\r\n  // the coordinates of the activity label must be set directly and will not be taken from the box\r\n  function setCoordinates(type, text, options, height, parentGfx) {\r\n    if (/:activity$/.test(type)) {\r\n      text.innerHTML = manipulateInnerHTMLXLabel(\r\n        text.children,\r\n        options.box.x,\r\n        0\r\n      );\r\n      text.innerHTML = manipulateInnerHTMLYLabel(\r\n        text.children,\r\n        options.box.y,\r\n        0\r\n      );\r\n    } else if (/:actor/.test(type)) {\r\n      height = parentGfx.firstChild.attributes.height.nodeValue;\r\n      text.innerHTML = manipulateInnerHTMLYLabel(text.children, height, 0);\r\n    } else if (/:workObject/.test(type)) {\r\n      height = parentGfx.firstChild.attributes.height.nodeValue;\r\n      text.innerHTML = manipulateInnerHTMLYLabel(text.children, height, 26);\r\n    }\r\n  }\r\n\r\n  // render a label on the canvas\r\n  function renderLabel(parentGfx, label, options, type) {\r\n    let text = textRenderer.createText(label || \"\", options);\r\n    let height = 0;\r\n\r\n    svgClasses(text).add(\"djs-label\");\r\n    setCoordinates(type, text, options, height, parentGfx);\r\n\r\n    svgAppend(parentGfx, text);\r\n    return text;\r\n  }\r\n\r\n  // determine the Y-coordinate of the label / number to be rendered\r\n  function manipulateInnerHTMLYLabel(children, y, offset) {\r\n    if (children) {\r\n      let result = \"\";\r\n      for (let i = 0; i < children.length; i++) {\r\n        result += children[i].outerHTML.replace(\r\n          /y=\"-?\\d*.\\d*\"/,\r\n          'y=\"' + (Number(y) + offset + 14 * i) + '\"'\r\n        );\r\n      }\r\n      return result;\r\n    }\r\n  }\r\n\r\n  // determine the X-coordinate of the label / number to be rendered\r\n  function manipulateInnerHTMLXLabel(children, x, offset) {\r\n    if (children) {\r\n      let result = \"\";\r\n      for (let i = 0; i < children.length; i++) {\r\n        result += children[i].outerHTML.replace(\r\n          /x=\"-?\\d*.\\d*\"/,\r\n          'x=\"' + (Number(x) + offset + 14) + '\"'\r\n        );\r\n      }\r\n      return result;\r\n    }\r\n  }\r\n\r\n  // draw functions\r\n  this.drawGroup = function (parentGfx, element) {\r\n    if (!element.businessObject.pickedColor) {\r\n      element.businessObject.pickedColor = DEFAULT_COLOR;\r\n    }\r\n    let rect = drawRect(\r\n      parentGfx,\r\n      element.width,\r\n      element.height,\r\n      0,\r\n      assign(\r\n        {\r\n          fill: \"none\",\r\n          stroke: element.businessObject.pickedColor,\r\n        },\r\n        element.attrs\r\n      )\r\n    );\r\n    renderEmbeddedLabel(parentGfx, element, \"left-top\", 8);\r\n\r\n    return rect;\r\n  };\r\n\r\n  function useColorForElement(element, iconSRC) {\r\n    if (!element.businessObject.pickedColor) {\r\n      element.businessObject.pickedColor = DEFAULT_COLOR;\r\n    }\r\n    const match = iconSRC.match(/fill=\".*?\"/);\r\n    if (match && match.length > 1) {\r\n      return iconSRC.replace(\r\n        /fill=\".*?\"/,\r\n        'fill=\"' + element.businessObject.pickedColor + '\"'\r\n      );\r\n    } else {\r\n      const index = iconSRC.indexOf(\"<svg \") + 5;\r\n      return (\r\n        iconSRC.substring(0, index) +\r\n        ' fill=\" ' +\r\n        element.businessObject.pickedColor +\r\n        '\" ' +\r\n        iconSRC.substring(index)\r\n      );\r\n    }\r\n  }\r\n\r\n  function getIconSrc(iconSRC, element) {\r\n    if (iconSRC.startsWith(\"data\")) {\r\n      return (\r\n        '<svg viewBox=\"0 0 24 24\" width=\"48\" height=\"48\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">' +\r\n        '<image width=\"24\" height=\"24\" xlink:href=\"' +\r\n        iconSRC +\r\n        '\"/></svg>'\r\n      );\r\n    } else {\r\n      return useColorForElement(element, iconSRC);\r\n    }\r\n  }\r\n\r\n  this.drawActor = function (p, element) {\r\n    let svgDynamicSizeAttributes = {\r\n        width: element.width,\r\n        height: element.height,\r\n      },\r\n      actor;\r\n    let iconSRC = iconDictionary.getTypeIconSRC(\r\n      elementTypes.ACTOR,\r\n      element.type\r\n    );\r\n    iconSRC = getIconSrc(iconSRC, element);\r\n    actor = svgCreate(iconSRC);\r\n\r\n    svgAttr(actor, svgDynamicSizeAttributes);\r\n    svgAppend(p, actor);\r\n\r\n    renderEmbeddedLabel(p, element, \"center\", -5);\r\n    return actor;\r\n  };\r\n\r\n  this.drawWorkObject = function (p, element) {\r\n    let svgDynamicSizeAttributes = {\r\n        width: element.width * 0.65,\r\n        height: element.height * 0.65,\r\n        x: element.width / 2 - 25,\r\n        y: element.height / 2 - 25,\r\n      },\r\n      workObject;\r\n    let iconSRC = iconDictionary.getTypeIconSRC(\r\n      elementTypes.WORKOBJECT,\r\n      element.type\r\n    );\r\n    iconSRC = getIconSrc(iconSRC, element);\r\n    workObject = svgCreate(iconSRC);\r\n\r\n    svgAttr(workObject, svgDynamicSizeAttributes);\r\n    svgAppend(p, workObject);\r\n    renderEmbeddedLabel(p, element, \"center\", -5);\r\n\r\n    return workObject;\r\n  };\r\n\r\n  function useColorForActivity(element) {\r\n    if (!element.businessObject.pickedColor) {\r\n      element.businessObject.pickedColor = \"black\";\r\n    }\r\n    let attrs = \"\";\r\n    return computeStyle(attrs, {\r\n      stroke: element.businessObject.pickedColor,\r\n      fill: \"none\",\r\n      strokeWidth: 1.5,\r\n      strokeLinejoin: \"round\",\r\n      markerEnd: marker(\r\n        \"activity\",\r\n        \"black\",\r\n        element.businessObject.pickedColor\r\n      ),\r\n    });\r\n  }\r\n\r\n  this.drawActivity = function (p, element) {\r\n    adjustForTextOverlap(element);\r\n\r\n    if (element) {\r\n      let attrs = useColorForActivity(element);\r\n\r\n      let x = svgAppend(p, createLine(element.waypoints, attrs));\r\n      renderExternalLabel(p, element);\r\n      renderExternalNumber(p, element);\r\n\r\n      // just adjusting the start- and endpoint of the connection-element moves only the drawn connection,\r\n      // not the interactive line. This can be fixed by manually overriding the points of the interactive polyline\r\n      // in the HTMl with the points of the drawn one.\r\n      // this however does not adjust the surrounding box of the connection.\r\n      fixConnectionInHTML(p.parentElement);\r\n\r\n      return x;\r\n    }\r\n  };\r\n\r\n  function checkIfPointOverlapsText(point, source) {\r\n    if (point.y > source.y + 60) {\r\n      if (point.x > source.x + 3 && point.x < source.x + 72) {\r\n        let lineOffset = getLineOffset(source);\r\n        if (source.y + 75 + lineOffset > point.y) {\r\n          point.y += lineOffset;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function adjustForTextOverlap(element) {\r\n    let source = element.source;\r\n    let target = element.target;\r\n\r\n    let waypoints = element.waypoints;\r\n    let startPoint = waypoints[0];\r\n    let endPoint = waypoints[waypoints.length - 1];\r\n\r\n    if (startPoint && endPoint && source && target) {\r\n      checkIfPointOverlapsText(startPoint, source);\r\n      checkIfPointOverlapsText(endPoint, source);\r\n    }\r\n  }\r\n\r\n  function getLineOffset(element) {\r\n    let id = element.id;\r\n    let offset = 0;\r\n\r\n    let objects = document.getElementsByClassName(\"djs-element djs-shape\");\r\n    for (let i = 0; i < objects.length; i++) {\r\n      let data_id = objects.item(i).getAttribute(\"data-element-id\");\r\n      if (data_id === id) {\r\n        let object = objects.item(i);\r\n        let text = object.getElementsByTagName(\"text\")[0];\r\n        let tspans = text.getElementsByTagName(\"tspan\");\r\n        let tspan = tspans[tspans.length - 1];\r\n        offset = tspan.getAttribute(\"y\");\r\n      }\r\n    }\r\n    return offset - 70;\r\n  }\r\n\r\n  function fixConnectionInHTML(wantedConnection) {\r\n    if (wantedConnection) {\r\n      let polylines = wantedConnection.getElementsByTagName(\"polyline\");\r\n      if (polylines.length > 1) {\r\n        polylines[1].setAttribute(\r\n          \"points\",\r\n          polylines[0].getAttribute(\"points\")\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  this.drawDSConnection = function (p, element) {\r\n    let attrs = \"\";\r\n    attrs = computeStyle(attrs, {\r\n      stroke: \"#000000\",\r\n      strokeWidth: 1.5,\r\n      strokeLinejoin: \"round\",\r\n      strokeDasharray: \"5, 5\",\r\n    });\r\n\r\n    return svgAppend(p, createLine(element.waypoints, attrs));\r\n  };\r\n\r\n  this.drawAnnotation = function (parentGfx, element) {\r\n    let style = {\r\n      fill: \"none\",\r\n      stroke: \"none\",\r\n    };\r\n\r\n    let text = element.businessObject.text || \"\";\r\n    if (element.businessObject.text) {\r\n      let height = getAnnotationBoxHeight();\r\n\r\n      if (height === 0 && element.businessObject.number) {\r\n        height = element.businessObject.number;\r\n      }\r\n      assign(element, {\r\n        height: height,\r\n      });\r\n\r\n      // for some reason the keyword height is not exported, so we use another, which we know will be exported,\r\n      // to ensure persistent annotation heights between sessions\r\n      assign(element.businessObject, {\r\n        number: height,\r\n      });\r\n    }\r\n\r\n    let textElement = drawRect(\r\n      parentGfx,\r\n      element.width,\r\n      element.height,\r\n      0,\r\n      0,\r\n      style\r\n    );\r\n    let textPathData = pathMap.getScaledPath(\"TEXT_ANNOTATION\", {\r\n      xScaleFactor: 1,\r\n      yScaleFactor: 1,\r\n      containerWidth: element.width,\r\n      containerHeight: element.height,\r\n      position: {\r\n        mx: 0.0,\r\n        my: 0.0,\r\n      },\r\n    });\r\n\r\n    drawPath(parentGfx, textPathData, {\r\n      stroke: \"black\",\r\n    });\r\n\r\n    renderLabel(parentGfx, text, {\r\n      box: element,\r\n      align: \"left-top\",\r\n      padding: 5,\r\n      style: {\r\n        fill: \"black\",\r\n      },\r\n    });\r\n\r\n    return textElement;\r\n  };\r\n\r\n  // draw helper functions\r\n  function drawPath(parentGfx, d, attrs) {\r\n    attrs = computeStyle(attrs, [\"no-fill\"], {\r\n      strokeWidth: 2,\r\n      stroke: \"black\",\r\n    });\r\n\r\n    let path = svgCreate(\"path\");\r\n    svgAttr(path, { d: d });\r\n    svgAttr(path, attrs);\r\n\r\n    svgAppend(parentGfx, path);\r\n\r\n    return path;\r\n  }\r\n\r\n  function drawRect(parentGfx, width, height, r, offset, attrs) {\r\n    if (isObject(offset)) {\r\n      attrs = offset;\r\n      offset = 0;\r\n    }\r\n\r\n    offset = offset || 0;\r\n    attrs = computeStyle(attrs, {\r\n      stroke: \"black\",\r\n      strokeWidth: 2,\r\n      fill: \"white\",\r\n    });\r\n\r\n    let rect = svgCreate(\"rect\");\r\n    svgAttr(rect, {\r\n      x: offset,\r\n      y: offset,\r\n      width: width - offset * 2,\r\n      height: height - offset * 2,\r\n      rx: r,\r\n      ry: r,\r\n    });\r\n\r\n    svgAttr(rect, attrs);\r\n    svgAppend(parentGfx, rect);\r\n\r\n    return rect;\r\n  }\r\n\r\n  // marker functions\r\n  function marker(type, fill, stroke) {\r\n    let id = type + \"-\" + fill + \"-\" + stroke + \"-\" + rendererId;\r\n\r\n    if (!markers[id]) {\r\n      createMarker(type, fill, stroke);\r\n    }\r\n    return \"url(#\" + id + \")\";\r\n  }\r\n\r\n  function createMarker(type, fill, stroke) {\r\n    let id = type + \"-\" + fill + \"-\" + stroke + \"-\" + rendererId;\r\n\r\n    if (type === \"activity\") {\r\n      let sequenceflowEnd = svgCreate(\"path\");\r\n      svgAttr(sequenceflowEnd, { d: \"M 1 5 L 11 10 L 1 15 Z\" });\r\n\r\n      addMarker(id, {\r\n        element: sequenceflowEnd,\r\n        ref: { x: 11, y: 10 },\r\n        scale: 0.5,\r\n        attrs: {\r\n          fill: stroke,\r\n          stroke: stroke,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  function addMarker(id, options) {\r\n    let attrs = assign(\r\n      {\r\n        fill: \"black\",\r\n        strokeWidth: 1,\r\n        strokeLinecap: \"round\",\r\n        strokeDasharray: \"none\",\r\n      },\r\n      options.attrs\r\n    );\r\n\r\n    let ref = options.ref || { x: 0, y: 0 };\r\n    let scale = options.scale || 1;\r\n\r\n    // resetting stroke dash array\r\n    if (attrs.strokeDasharray === \"none\") {\r\n      attrs.strokeDasharray = [10000, 1];\r\n    }\r\n\r\n    let marker = svgCreate(\"marker\");\r\n\r\n    svgAttr(options.element, attrs);\r\n    svgAppend(marker, options.element);\r\n    svgAttr(marker, {\r\n      id: id,\r\n      viewBox: \"0 0 20 20\",\r\n      refX: ref.x,\r\n      refY: ref.y,\r\n      markerWidth: 20 * scale,\r\n      markerHeight: 20 * scale,\r\n      orient: \"auto\",\r\n    });\r\n\r\n    let defs = domQuery(\"defs\", canvas._svg);\r\n    if (!defs) {\r\n      defs = svgCreate(\"defs\");\r\n      svgAppend(canvas._svg, defs);\r\n    }\r\n    svgAppend(defs, marker);\r\n    markers[id] = marker;\r\n  }\r\n\r\n  // path functions\r\n  this.getWorkObjectPath = function (shape) {\r\n    let rectangle = getRectPath(shape);\r\n    return componentsToPath(rectangle);\r\n  };\r\n\r\n  this.getGroupPath = function (shape) {\r\n    let rectangle = getRectPath(shape);\r\n    return componentsToPath(rectangle);\r\n  };\r\n\r\n  this.getActivityPath = function (connection) {\r\n    let waypoints = connection.waypoints.map(function (p) {\r\n      return p.original || p;\r\n    });\r\n\r\n    let activityPath = [[\"M\", waypoints[0].x, waypoints[0].y]];\r\n\r\n    waypoints.forEach(function (waypoint, index) {\r\n      if (index !== 0) {\r\n        activityPath.push([\"L\", waypoint.x, waypoint.y]);\r\n      }\r\n    });\r\n    return componentsToPath(activityPath);\r\n  };\r\n\r\n  this.getActorPath = function (shape) {\r\n    let rectangle = getRectPath(shape);\r\n    return componentsToPath(rectangle);\r\n  };\r\n}\r\n\r\ninherits(DomainStoryRenderer, BaseRenderer);\r\n\r\nDomainStoryRenderer.$inject = [\r\n  \"eventBus\",\r\n  \"styles\",\r\n  \"canvas\",\r\n  \"textRenderer\",\r\n  \"pathMap\",\r\n  \"commandStack\",\r\n];\r\n\r\nDomainStoryRenderer.prototype.canRender = function (element) {\r\n  return /^domainStory:/.test(element.type);\r\n};\r\n\r\nDomainStoryRenderer.prototype.drawShape = function (p, element) {\r\n  // polyfill for tests\r\n  if (!String.prototype.startsWith) {\r\n    Object.defineProperty(String.prototype, \"startsWith\", {\r\n      value: function (search, pos) {\r\n        pos = !pos || pos < 0 ? 0 : +pos;\r\n        return this.substring(pos, pos + search.length) === search;\r\n      },\r\n    });\r\n  }\r\n\r\n  let type = element.type;\r\n  element.businessObject.type = type;\r\n\r\n  elementRegistry.correctInitialize();\r\n  dirtyFlag.makeDirty();\r\n\r\n  if (type.includes(elementTypes.ACTOR)) {\r\n    return this.drawActor(p, element);\r\n  } else if (type.includes(elementTypes.WORKOBJECT)) {\r\n    return this.drawWorkObject(p, element);\r\n  } else if (type.includes(elementTypes.TEXTANNOTATION)) {\r\n    return this.drawAnnotation(p, element);\r\n  } else if (type.includes(elementTypes.GROUP)) {\r\n    return this.drawGroup(p, element);\r\n  }\r\n};\r\n\r\nDomainStoryRenderer.prototype.getShapePath = function (shape) {\r\n  let type = shape.type;\r\n\r\n  if (type.includes(elementTypes.ACTOR)) {\r\n    return this.getActorPath(shape);\r\n  } else if (type.includes(elementTypes.WORKOBJECT)) {\r\n    return this.getWorkObjectPath(shape);\r\n  } else if (type.includes(elementTypes.GROUP)) {\r\n    return this.getGroupPath(shape);\r\n  }\r\n};\r\n\r\nDomainStoryRenderer.prototype.drawConnection = function (p, element) {\r\n  let type = element.type;\r\n\r\n  dirtyFlag.makeDirty();\r\n\r\n  // fixes activities that were copy-pasted\r\n  if (!element.businessObject.type) {\r\n    element.businessObject.type = type;\r\n  }\r\n  if (type === elementTypes.ACTIVITY) {\r\n    return this.drawActivity(p, element);\r\n  } else if (type === elementTypes.CONNECTION) {\r\n    return this.drawDSConnection(p, element);\r\n  }\r\n};\r\n\r\n// TODO check if used\r\nDomainStoryRenderer.prototype.getConnectionPath = function (connection) {\r\n  let type = connection.type;\r\n\r\n  if (type === elementTypes.ACTIVITY || type === elementTypes.CONNECTION) {\r\n    return this.getActivityPath(connection);\r\n  }\r\n};\r\n\r\n// creates a SVG path that describes a rectangle which encloses the given shape.\r\nfunction getRectPath(shape) {\r\n  let offset = 5;\r\n  let x = shape.x,\r\n    y = shape.y,\r\n    width = shape.width / 2 + offset,\r\n    height = shape.height / 2 + offset;\r\n\r\n  return [\r\n    [\"M\", x, y],\r\n    [\"l\", width, 0],\r\n    [\"l\", width, height],\r\n    [\"l\", -width, height],\r\n    [\"l\", -width, 0],\r\n    [\"z\"],\r\n  ];\r\n}\r\n","\"use strict\";\r\n\r\nimport { assign, every, reduce } from \"min-dash\";\r\n\r\nimport inherits from \"inherits\";\r\n\r\nimport RuleProvider from \"diagram-js/lib/features/rules/RuleProvider\";\r\nimport { elementTypes } from \"src/app/Domain/Common/elementTypes\";\r\nimport { is } from \"./util\";\r\n\r\nconst HIGH_PRIORITY = 1500;\r\nconst MIN_SIZE = 125;\r\n\r\nfunction isDomainStory(element) {\r\n  return element && /^domainStory:/.test(element.type);\r\n}\r\n\r\nfunction isDomainStoryGroup(element) {\r\n  return element && /^domainStory:group/.test(element.type);\r\n}\r\n\r\nfunction isActor(element) {\r\n  return element && /^domainStory:actor\\w*/.test(element.type);\r\n}\r\n\r\nfunction isWorkObject(element) {\r\n  return element && /^domainStory:workObject/.test(element.type);\r\n}\r\n\r\nfunction isActivity(element) {\r\n  return element && /^domainStory:activity/.test(element.type);\r\n}\r\n\r\nfunction isConnection(element) {\r\n  return element && /^domainStory:connection/.test(element.type);\r\n}\r\n\r\nfunction isAnnotation(element) {\r\n  return element && /^domainStory:textAnnotation/.test(element.type);\r\n}\r\n\r\n/**\r\n * can source and target be connected?\r\n */\r\nfunction canConnect(source, target) {\r\n  // only judge about two custom elements\r\n  if (\r\n    isDomainStoryGroup(target) ||\r\n    !isDomainStory(source) ||\r\n    !isDomainStory(target)\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  // do not allow a connection from one element to itself\r\n  if (source === target) {\r\n    return;\r\n  }\r\n\r\n  // do not allow a connection between two actors\r\n  if (isActor(source) && isActor(target)) {\r\n    return;\r\n  }\r\n\r\n  // do not allow a connection, where the source or target is an activity\r\n  if (isActivity(source) || isActivity(target)) {\r\n    return;\r\n  }\r\n\r\n  // do not allow a connection, where the source or target is an annotation connection\r\n  if (isConnection(source) || isConnection(target)) {\r\n    return;\r\n  }\r\n\r\n  // do not allow a connection to a connection(the special type of connection between an element and a comment box)\r\n  // when the target is an annotation, the connection type is an annotation connection instead of an activity\r\n  if (isAnnotation(target)) {\r\n    return { type: elementTypes.CONNECTION };\r\n  }\r\n\r\n  return { type: elementTypes.ACTIVITY };\r\n}\r\n\r\nfunction canResize(shape, newBounds) {\r\n  if (is(shape, elementTypes.GROUP)) {\r\n    if (newBounds) {\r\n      let lowerLeft = { x: shape.x, y: shape.y + shape.height };\r\n      let lowerRight = { x: shape.x + shape.width, y: shape.y + shape.height };\r\n      let upperRight = { x: shape.x + shape.width, y: shape.y };\r\n\r\n      if (newBounds.x !== shape.x && newBounds.y !== shape.y) {\r\n        // upper left\r\n        if (newBounds.x > lowerRight.x - MIN_SIZE) {\r\n          assign(newBounds, { x: lowerRight.x - MIN_SIZE });\r\n        }\r\n        if (newBounds.y > lowerRight.y - MIN_SIZE) {\r\n          assign(newBounds, { y: lowerRight.y - MIN_SIZE });\r\n        }\r\n      }\r\n\r\n      if (newBounds.x !== shape.x && newBounds.y === shape.y) {\r\n        // lower left\r\n        if (newBounds.x > upperRight.x - MIN_SIZE) {\r\n          assign(newBounds, { x: upperRight.x - MIN_SIZE });\r\n        }\r\n      }\r\n\r\n      if (newBounds.x === shape.x && newBounds.y !== shape.y) {\r\n        // upper right\r\n        if (newBounds.y > lowerLeft.y - MIN_SIZE) {\r\n          assign(newBounds, { y: lowerLeft.y - MIN_SIZE });\r\n        }\r\n      }\r\n\r\n      if (newBounds.height < MIN_SIZE) {\r\n        assign(newBounds, {\r\n          height: MIN_SIZE,\r\n        });\r\n      }\r\n      if (newBounds.width < MIN_SIZE) {\r\n        assign(newBounds, {\r\n          width: MIN_SIZE,\r\n        });\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction canAttach(elements, target, source) {\r\n  if (!Array.isArray(elements)) {\r\n    elements = [elements];\r\n  }\r\n\r\n  // disallow appending as boundary event\r\n  if (source) {\r\n    return false;\r\n  }\r\n\r\n  // only (re-)attach one element at a time\r\n  if (elements.length !== 1) {\r\n    return false;\r\n  }\r\n\r\n  // allow default move operation\r\n  if (!target) {\r\n    return true;\r\n  }\r\n\r\n  // only allow drop on DomainStory Elements\r\n  if (!isDomainStory(target)) {\r\n    return false;\r\n  }\r\n\r\n  return \"attach\";\r\n}\r\n\r\nfunction canConnectToAnnotation(source, target, connection) {\r\n  // do not allow an activity connect to an annotation\r\n  if (isActivity(connection) && isAnnotation(target)) {\r\n    return false;\r\n  }\r\n\r\n  // do not allow an annotation connection between two annotations\r\n  if (\r\n    isConnection(connection) &&\r\n    isAnnotation(source) &&\r\n    isAnnotation(target)\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  // do not allow an annotation connection between an actor or workObject and anything except an annotation\r\n  return !(\r\n    isConnection(connection) &&\r\n    !isAnnotation(target) &&\r\n    (isActor(source) || isWorkObject(source))\r\n  );\r\n}\r\n\r\n/**\r\n * specific rules for custom elements\r\n */\r\nexport default function DomainStoryRules(eventBus) {\r\n  RuleProvider.call(this, eventBus);\r\n}\r\n\r\ninherits(DomainStoryRules, RuleProvider);\r\n\r\nDomainStoryRules.$inject = [\"eventBus\"];\r\n\r\nDomainStoryRules.prototype.init = function () {\r\n  /**\r\n   * can shape be created on target container?\r\n   */\r\n  function canCreate(shape, target) {\r\n    // only judge about custom elements\r\n    if (!isDomainStory(shape)) {\r\n      return;\r\n    }\r\n\r\n    // allow creation just on groups\r\n    return !isDomainStory(target) || isDomainStoryGroup(target);\r\n  }\r\n\r\n  this.addRule(\"elements.create\", function (context) {\r\n    const elements = context.elements,\r\n      position = context.position,\r\n      target = context.target;\r\n\r\n    return every(elements, function (element) {\r\n      if (isConnection(element)) {\r\n        return canConnect(element.source, element.target, element);\r\n      }\r\n\r\n      if (element.host) {\r\n        return canAttach(element, element.host, null, position);\r\n      }\r\n\r\n      return canCreate(element, target, null, position);\r\n    });\r\n  });\r\n\r\n  this.addRule(\"elements.move\", HIGH_PRIORITY, function (context) {\r\n    let target = context.target,\r\n      shapes = context.shapes;\r\n\r\n    let type;\r\n\r\n    // do not allow mixed movements of custom / BPMN shapes\r\n    // if any shape cannot be moved, the group cannot be moved, too\r\n\r\n    // reject, if we have at least one\r\n    // custom element that cannot be moved\r\n    return reduce(\r\n      shapes,\r\n      function (result, s) {\r\n        if (type === undefined) {\r\n          type = isDomainStory(s);\r\n        }\r\n\r\n        if (type !== isDomainStory(s) || result === false) {\r\n          return false;\r\n        }\r\n\r\n        return canCreate(s, target);\r\n      },\r\n      undefined\r\n    );\r\n  });\r\n\r\n  this.addRule(\"shape.create\", HIGH_PRIORITY, function (context) {\r\n    let target = context.target,\r\n      shape = context.shape;\r\n\r\n    return canCreate(shape, target);\r\n  });\r\n\r\n  this.addRule(\"connection.create\", HIGH_PRIORITY, function (context) {\r\n    let source = context.source,\r\n      target = context.target;\r\n\r\n    return canConnect(source, target);\r\n  });\r\n\r\n  this.addRule(\"connection.reconnect\", HIGH_PRIORITY, function (context) {\r\n    let connection = context.connection,\r\n      source = context.hover || context.source,\r\n      target = context.target;\r\n\r\n    // --------------------------------------------------------------\r\n    let result = canConnectToAnnotation(source, target, connection);\r\n\r\n    if (!result) {\r\n      return;\r\n    }\r\n\r\n    // --------------------------------------------------------------\r\n\r\n    return canConnect(source, target, connection);\r\n  });\r\n\r\n  this.addRule(\"shape.resize\", function (context) {\r\n    let shape = context.shape,\r\n      newBounds = context.newBounds;\r\n\r\n    return canResize(shape, newBounds);\r\n  });\r\n};\r\n\r\nDomainStoryRules.prototype.canConnect = canConnect;\r\nDomainStoryRules.prototype.canAttach = canAttach;\r\nDomainStoryRules.prototype.isDomainStory = isDomainStory;\r\nDomainStoryRules.prototype.canResize = canResize;\r\n","\"use strict\";\r\n\r\nimport inherits from \"inherits\";\r\n\r\nimport { pick, assign } from \"min-dash\";\r\n\r\nimport CommandInterceptor from \"diagram-js/lib/command/CommandInterceptor\";\r\n\r\nimport {\r\n  add as collectionAdd,\r\n  remove as collectionRemove,\r\n} from \"diagram-js/lib/util/Collections\";\r\n\r\nimport { reworkGroupElements } from \"./util\";\r\nimport { elementTypes } from \"../../Domain/Common/elementTypes\";\r\n\r\n/**\r\n * a handler responsible for updating the custom element's businessObject\r\n * once changes on the diagram happen.\r\n */\r\nexport default function DomainStoryUpdater(eventBus, bpmnjs) {\r\n  CommandInterceptor.call(this, eventBus);\r\n\r\n  function updateCustomElement(e) {\r\n    let context = e.context,\r\n      shape = context.shape,\r\n      businessObject = shape.businessObject;\r\n\r\n    if (!shape || !shape.type.includes(elementTypes.DOMAINSTORY)) {\r\n      return;\r\n    }\r\n\r\n    let parent = shape.parent;\r\n    let customElements = bpmnjs._customElements;\r\n\r\n    // make sure element is added / removed from bpmnjs.customElements\r\n    if (!parent) {\r\n      collectionRemove(customElements, businessObject);\r\n    } else {\r\n      collectionAdd(customElements, businessObject);\r\n    }\r\n\r\n    // save custom element position\r\n    assign(businessObject, pick(shape, [\"x\", \"y\"]));\r\n\r\n    // save custom element size if resizable\r\n    if (shape.type === elementTypes.GROUP) {\r\n      assign(businessObject, pick(shape, [\"height\", \"width\"]));\r\n\r\n      // rework the child-parent relations if a group was moved, such that all Objects that are visually in the group are also associated with it\r\n      // since we do not have access to the standard-canvas object here, we cannot use the function correctGroupChildren() from DSLabelUtil\r\n      if (parent != null) {\r\n        reworkGroupElements(parent, shape);\r\n      }\r\n    }\r\n    if (\r\n      shape &&\r\n      shape.parent &&\r\n      \"type\" in shape.parent &&\r\n      shape.parent.type === elementTypes.GROUP\r\n    ) {\r\n      assign(businessObject, {\r\n        parent: shape.parent.id,\r\n      });\r\n    }\r\n  }\r\n\r\n  function updateCustomConnection(e) {\r\n    let context = e.context,\r\n      connection = context.connection,\r\n      source = connection.source,\r\n      target = connection.target,\r\n      businessObject = connection.businessObject;\r\n\r\n    if (e.newTarget) {\r\n      target = e.newTarget;\r\n    }\r\n    if (e.newSource) {\r\n      source = e.newSource;\r\n    }\r\n\r\n    let parent = connection.parent;\r\n    let customElements = bpmnjs._customElements;\r\n\r\n    // make sure element is added / removed from bpmnjs.customElements\r\n    if (!parent) {\r\n      collectionRemove(customElements, businessObject);\r\n    } else {\r\n      collectionAdd(customElements, businessObject);\r\n    }\r\n\r\n    // update waypoints\r\n    assign(businessObject, {\r\n      waypoints: copyWaypoints(connection),\r\n    });\r\n\r\n    if (source) {\r\n      if (!businessObject.source) {\r\n        assign(businessObject, { source: source.id });\r\n      } else {\r\n        businessObject.source = source.id;\r\n      }\r\n    }\r\n    if (target) {\r\n      if (!businessObject.target) {\r\n        assign(businessObject, { target: target.id });\r\n      } else {\r\n        businessObject.target = target.id;\r\n      }\r\n    }\r\n  }\r\n\r\n  function copyWaypoints(connection) {\r\n    return connection.waypoints.map(function (p) {\r\n      if (p.original) {\r\n        return {\r\n          original: {\r\n            x: p.original.x,\r\n            y: p.original.y,\r\n          },\r\n          x: p.x,\r\n          y: p.y,\r\n        };\r\n      } else {\r\n        return {\r\n          x: p.x,\r\n          y: p.y,\r\n        };\r\n      }\r\n    });\r\n  }\r\n\r\n  this.executed(\r\n    [\r\n      \"shape.create\",\r\n      \"shape.move\",\r\n      \"shape.delete\",\r\n      \"shape.resize\",\r\n      \"shape.removeGroupWithChildren\",\r\n    ],\r\n    ifDomainStoryElement(updateCustomElement)\r\n  );\r\n\r\n  this.reverted(\r\n    [\r\n      \"shape.create\",\r\n      \"shape.move\",\r\n      \"shape.delete\",\r\n      \"shape.resize\",\r\n      \"shape.removeGroupWithChildren\",\r\n    ],\r\n    ifDomainStoryElement(updateCustomElement)\r\n  );\r\n\r\n  this.executed(\r\n    [\r\n      \"connection.create\",\r\n      \"connection.reconnect\",\r\n      \"connection.updateWaypoints\",\r\n      \"connection.delete\",\r\n      \"connection.layout\",\r\n      \"connection.move\",\r\n    ],\r\n    ifDomainStoryElement(updateCustomConnection)\r\n  );\r\n\r\n  this.reverted(\r\n    [\r\n      \"connection.create\",\r\n      \"connection.reconnect\",\r\n      \"connection.updateWaypoints\",\r\n      \"connection.delete\",\r\n      \"connection.layout\",\r\n      \"connection.move\",\r\n    ],\r\n    ifDomainStoryElement(updateCustomConnection)\r\n  );\r\n}\r\n\r\n// check if element in the context of an event is a domainStory element\r\nfunction ifDomainStoryElement(fn) {\r\n  return (event) => {\r\n    const context = event.context;\r\n    const element = context.shape || context.connection;\r\n\r\n    if (isDomainStory(element)) {\r\n      fn(event);\r\n    }\r\n  };\r\n}\r\n\r\nfunction isDomainStory(element) {\r\n  return element && /domainStory:/.test(element.type);\r\n}\r\n\r\ninherits(DomainStoryUpdater, CommandInterceptor);\r\n\r\nDomainStoryUpdater.$inject = [\"eventBus\", \"bpmnjs\"];\r\n","\"use strict\";\r\n\r\nimport DomainStoryElementFactory from \"./domainStoryElementFactory\";\r\nimport DomainStoryRenderer from \"./domainStoryRenderer\";\r\nimport DomainStoryPalette from \"./palette/domainStoryPalette\";\r\nimport DomainStoryRules from \"./domainStoryRules\";\r\nimport DomainStoryUpdater from \"./domainStoryUpdater\";\r\nimport ElementFactory from \"bpmn-js/lib/features/modeling/ElementFactory\";\r\nimport CreateModule from \"diagram-js/lib/features/create\";\r\nimport PathMap from \"bpmn-js/lib/draw/PathMap\";\r\nimport PopupMenuModule from \"bpmn-js/lib/features/popup-menu\";\r\nimport ContextPadModule from \"diagram-js/lib/features/context-pad\";\r\nimport CommandStack from \"diagram-js/lib/command/CommandStack\";\r\nimport UpdateLabelHandler from \"./updateHandler/updateLabelHandler\";\r\nimport headlineAndDescriptionUpdateHandler from \"./updateHandler/headlineAndDescriptionUpdateHandler\";\r\nimport DomainStoryContextPadProvider from \"./context-pad/domainStoryContextPadProvider\";\r\nimport ReplaceMenuProvider from \"./change-icon/replaceMenuProvider\";\r\nimport DSModeling from \"./modeling/dSModeling\";\r\n\r\nexport default {\r\n  __depends__: [CreateModule, ContextPadModule, PopupMenuModule],\r\n  __init__: [\r\n    \"domainStoryRenderer\",\r\n    \"paletteProvider\",\r\n    \"domainStoryRules\",\r\n    \"domainStoryUpdater\",\r\n    \"contextPadProvider\",\r\n    \"replaceMenuProvider\",\r\n  ],\r\n  elementFactory: [\"type\", DomainStoryElementFactory],\r\n  domainStoryRenderer: [\"type\", DomainStoryRenderer],\r\n  paletteProvider: [\"type\", DomainStoryPalette],\r\n  domainStoryRules: [\"type\", DomainStoryRules],\r\n  domainStoryUpdater: [\"type\", DomainStoryUpdater],\r\n  contextPadProvider: [\"type\", DomainStoryContextPadProvider],\r\n  elementFactoryBpmn: [\"type\", ElementFactory],\r\n  pathMap: [\"type\", PathMap],\r\n  replaceMenuProvider: [\"type\", ReplaceMenuProvider],\r\n  commandStack: [\"type\", CommandStack],\r\n  updateLabelHandler: [\"type\", UpdateLabelHandler],\r\n  headlineAndDescriptionUpdateHandler: [\r\n    \"type\",\r\n    headlineAndDescriptionUpdateHandler,\r\n  ],\r\n  modeling: [\"type\", DSModeling],\r\n};\r\n","\"use strict\";\r\n\r\nimport {\r\n  append as svgAppend,\r\n  attr as svgAttr,\r\n  create as svgCreate,\r\n  remove as svgRemove,\r\n} from \"tiny-svg\";\r\n\r\nimport { translate } from \"diagram-js/lib/util/SvgTransformUtil\";\r\nimport { elementTypes } from \"../../../Domain/Common/elementTypes\";\r\nimport { is } from \"../util\";\r\n\r\nconst MARKER_HIDDEN = \"djs-element-hidden\",\r\n  MARKER_LABEL_HIDDEN = \"djs-label-hidden\";\r\n\r\nlet annotationBoxHeight = 0;\r\n\r\nexport function getAnnotationBoxHeight() {\r\n  return annotationBoxHeight;\r\n}\r\n\r\nexport default function DSLabelEditingPreview(eventBus, canvas, pathMap) {\r\n  let self = this;\r\n\r\n  let defaultLayer = canvas.getDefaultLayer();\r\n  let element, absoluteElementBBox, gfx;\r\n\r\n  eventBus.on(\"directEditing.activate\", function (context) {\r\n    let activeProvider = context.active;\r\n\r\n    element = activeProvider.element.label || activeProvider.element;\r\n\r\n    // text annotation\r\n    if (is(element, elementTypes.TEXTANNOTATION)) {\r\n      absoluteElementBBox = canvas.getAbsoluteBBox(element);\r\n\r\n      gfx = svgCreate(\"g\");\r\n\r\n      annotationBoxHeight = element.height;\r\n\r\n      let textPathData = pathMap.getScaledPath(\"TEXT_ANNOTATION\", {\r\n        xScaleFactor: 1,\r\n        yScaleFactor: 1,\r\n        containerWidth: element.width,\r\n        containerHeight: element.height,\r\n        position: {\r\n          mx: 0.0,\r\n          my: 0.0,\r\n        },\r\n      });\r\n\r\n      let path = (self.path = svgCreate(\"path\"));\r\n\r\n      svgAttr(path, {\r\n        d: textPathData,\r\n        strokeWidth: 2,\r\n        stroke: getStrokeColor(element),\r\n      });\r\n\r\n      svgAppend(gfx, path);\r\n\r\n      svgAppend(defaultLayer, gfx);\r\n\r\n      translate(gfx, element.x, element.y);\r\n    }\r\n\r\n    if (is(element, elementTypes.TEXTANNOTATION) || element.labelTarget) {\r\n      canvas.addMarker(element, MARKER_HIDDEN);\r\n    } else if (\r\n      element.type.includes(elementTypes.ACTOR) ||\r\n      element.type.includes(elementTypes.WORKOBJECT) ||\r\n      element.type.includes(elementTypes.ACTIVITY) ||\r\n      element.type.includes(elementTypes.GROUP)\r\n    ) {\r\n      canvas.addMarker(element, MARKER_LABEL_HIDDEN);\r\n    }\r\n  });\r\n\r\n  eventBus.on(\"directEditing.resize\", function (context) {\r\n    // text annotation\r\n    if (is(element, elementTypes.TEXTANNOTATION)) {\r\n      let height = context.height,\r\n        dy = context.dy;\r\n\r\n      let newElementHeight = Math.max(\r\n        (element.height / absoluteElementBBox.height) * (height + dy),\r\n        0\r\n      );\r\n      annotationBoxHeight = newElementHeight;\r\n\r\n      let textPathData = pathMap.getScaledPath(\"TEXT_ANNOTATION\", {\r\n        xScaleFactor: 1,\r\n        yScaleFactor: 1,\r\n        containerWidth: element.width,\r\n        containerHeight: newElementHeight,\r\n        position: {\r\n          mx: 0.0,\r\n          my: 0.0,\r\n        },\r\n      });\r\n\r\n      svgAttr(self.path, {\r\n        d: textPathData,\r\n      });\r\n    }\r\n  });\r\n\r\n  eventBus.on(\r\n    [\"directEditing.complete\", \"directEditing.cancel\"],\r\n    function (context) {\r\n      let activeProvider = context.active;\r\n\r\n      if (activeProvider) {\r\n        canvas.removeMarker(\r\n          activeProvider.element.label || activeProvider.element,\r\n          MARKER_HIDDEN\r\n        );\r\n        canvas.removeMarker(element, MARKER_LABEL_HIDDEN);\r\n      }\r\n\r\n      element = undefined;\r\n      absoluteElementBBox = undefined;\r\n\r\n      if (gfx) {\r\n        svgRemove(gfx);\r\n\r\n        gfx = undefined;\r\n      }\r\n    }\r\n  );\r\n}\r\n\r\nDSLabelEditingPreview.$inject = [\"eventBus\", \"canvas\", \"pathMap\"];\r\n\r\n// helpers ///////////////////\r\n\r\nfunction getStrokeColor() {\r\n  return \"black\";\r\n}\r\n","\"use strict\";\r\n\r\nimport { assign } from \"min-dash\";\r\n\r\nimport { getLabel, autocomplete } from \"./dsLabelUtil\";\r\n\r\nimport { isAny } from \"bpmn-js/lib/features/modeling/util/ModelingUtil\";\r\n\r\nimport {\r\n  getExternalLabelMid,\r\n  isLabelExternal,\r\n  hasExternalLabel,\r\n  isLabel,\r\n} from \"bpmn-js/lib/util/LabelUtil\";\r\n\r\nimport { elementTypes } from \"../../../Domain/Common/elementTypes\";\r\nimport { is } from \"../util\";\r\n\r\nlet dictionaryService;\r\n\r\nlet numberStash = 0;\r\nlet stashUse = false;\r\n\r\nexport function initializeLabelEditingProvider(labelingDictionary) {\r\n  dictionaryService = labelingDictionary;\r\n}\r\n\r\nexport function getNumberStash() {\r\n  let number = { use: stashUse, number: numberStash };\r\n  stashUse = false;\r\n  return number;\r\n}\r\n\r\nexport function toggleStashUse(use) {\r\n  stashUse = use;\r\n}\r\n\r\nexport default function DSLabelEditingProvider(\r\n  eventBus,\r\n  canvas,\r\n  directEditing,\r\n  modeling,\r\n  resizeHandles,\r\n  textRenderer,\r\n  updateLabelHandler\r\n) {\r\n  this._canvas = canvas;\r\n  this._modeling = modeling;\r\n  this._textRenderer = textRenderer;\r\n  this._updateLabelHandler = updateLabelHandler;\r\n\r\n  directEditing.registerProvider(this);\r\n\r\n  // listen to dblclick on non-root elements\r\n  eventBus.on(\"element.dblclick\", function (event) {\r\n    activateDirectEdit(event.element, true);\r\n    if (is(event.element, elementTypes.ACTIVITY)) {\r\n      // if we edit an activity, we do not want the standard editing box\r\n      numberStash = event.element.businessObject.number;\r\n      stashUse = true;\r\n      directEditing.complete();\r\n    }\r\n  });\r\n\r\n  // complete on followup canvas operation\r\n  eventBus.on(\r\n    [\r\n      \"element.mousedown\",\r\n      \"drag.init\",\r\n      \"canvas.viewbox.changing\",\r\n      \"autoPlace\",\r\n      \"popupMenu.open\",\r\n    ],\r\n    function () {\r\n      if (directEditing.isActive()) {\r\n        directEditing.complete();\r\n      }\r\n    }\r\n  );\r\n\r\n  // cancel on command stack changes\r\n  eventBus.on([\"commandStack.changed\"], function () {\r\n    if (directEditing.isActive()) {\r\n      directEditing.cancel();\r\n    }\r\n  });\r\n\r\n  eventBus.on(\"directEditing.activate\", function (event) {\r\n    resizeHandles.removeResizers();\r\n    let element = event.active.element;\r\n    createAutocomplete(element);\r\n  });\r\n\r\n  eventBus.on(\"create.end\", 500, function (event) {\r\n    let element = event.shape,\r\n      canExecute = event.context.canExecute,\r\n      isTouch = event.isTouch;\r\n\r\n    if (isTouch) {\r\n      return;\r\n    }\r\n\r\n    if (!canExecute) {\r\n      return;\r\n    }\r\n    if (!is(element, elementTypes.ACTIVITY)) {\r\n      activateDirectEdit(element);\r\n    }\r\n  });\r\n\r\n  eventBus.on(\"autoPlace.end\", 500, function (event) {\r\n    activateDirectEdit(event.shape);\r\n  });\r\n\r\n  function activateDirectEdit(element, force) {\r\n    if (\r\n      force ||\r\n      isAny(element, [elementTypes.TEXTANNOTATION]) ||\r\n      element.businessObject.type.includes(elementTypes.DOMAINSTORY)\r\n    ) {\r\n      directEditing.activate(element);\r\n    }\r\n  }\r\n\r\n  function createAutocomplete(element) {\r\n    let editingBox = document.getElementsByClassName(\r\n      \"djs-direct-editing-content\"\r\n    );\r\n    editingBox[0].focus();\r\n    autocomplete(\r\n      editingBox[0],\r\n      dictionaryService.getWorkObjectLabels(),\r\n      element\r\n    );\r\n  }\r\n}\r\n\r\nDSLabelEditingProvider.$inject = [\r\n  \"eventBus\",\r\n  \"canvas\",\r\n  \"directEditing\",\r\n  \"modeling\",\r\n  \"resizeHandles\",\r\n  \"textRenderer\",\r\n  \"updateLabelHandler\",\r\n];\r\n\r\n/**\r\n * activate direct editing for activities and text annotations.\r\n *\r\n * @param  {djs.model.Base} element\r\n *\r\n * @return {Object} an object with properties bounds (position and size), text and options\r\n */\r\nDSLabelEditingProvider.prototype.activate = function (element) {\r\n  // text\r\n  if (element.id === \"__implicitrootbase\") {\r\n    return;\r\n  }\r\n  let text = getLabel(element);\r\n\r\n  if (text === undefined) {\r\n    return;\r\n  }\r\n\r\n  let context = {\r\n    text: text,\r\n  };\r\n\r\n  // bounds\r\n  let bounds = this.getEditingBBox(element);\r\n\r\n  assign(context, bounds);\r\n\r\n  let options = {};\r\n\r\n  // external labels\r\n  if (isLabelExternal(element)) {\r\n    assign(options, {\r\n      autoResize: true,\r\n    });\r\n  }\r\n\r\n  // text annotations\r\n  if (is(element, elementTypes.TEXTANNOTATION)) {\r\n    assign(options, {\r\n      resizable: true,\r\n      autoResize: true,\r\n    });\r\n  }\r\n\r\n  assign(context, {\r\n    options: options,\r\n  });\r\n\r\n  return context;\r\n};\r\n\r\n/**\r\n * get the editing bounding box based on the element's size and position\r\n *\r\n * @param  {djs.model.Base} element\r\n *\r\n * @return {Object} an object containing information about position\r\n *                  and size (fixed or minimum and/or maximum)\r\n */\r\nDSLabelEditingProvider.prototype.getEditingBBox = function (element) {\r\n  let canvas = this._canvas;\r\n\r\n  let target = element.label || element;\r\n\r\n  let bbox = canvas.getAbsoluteBBox(target);\r\n\r\n  let mid = {\r\n    x: bbox.x + bbox.width / 2,\r\n    y: bbox.y + bbox.height / 2,\r\n  };\r\n\r\n  // default position\r\n  let bounds = { x: bbox.x, y: bbox.y };\r\n\r\n  /** The cavnas is an Object from BPMN, the IDE might say, that zoom is deprecated,\r\n   * because it thinks canvas is the standard HTMLElement. -> Needs to stay toom **/\r\n  let zoom = canvas.zoom();\r\n  let defaultStyle = this._textRenderer.getDefaultStyle(),\r\n    externalStyle = this._textRenderer.getExternalStyle();\r\n\r\n  // take zoom into account\r\n  let externalFontSize = externalStyle.fontSize * zoom,\r\n    externalLineHeight = externalStyle.lineHeight,\r\n    defaultFontSize = defaultStyle.fontSize * zoom,\r\n    defaultLineHeight = defaultStyle.lineHeight;\r\n\r\n  let style = {\r\n    fontFamily: this._textRenderer.getDefaultStyle().fontFamily,\r\n    fontWeight: this._textRenderer.getDefaultStyle().fontWeight,\r\n  };\r\n\r\n  // adjust for groups\r\n  if (is(element, elementTypes.GROUP)) {\r\n    assign(bounds, {\r\n      minWidth: bbox.width / 2.5 > 125 ? bbox.width / 2.5 : 125,\r\n      maxWidth: bbox.width,\r\n      minHeight: 30 * zoom,\r\n      x: bbox.x,\r\n      y: bbox.y,\r\n    });\r\n\r\n    assign(style, {\r\n      fontSize: defaultFontSize + \"px\",\r\n      lineHeight: defaultLineHeight,\r\n      paddingTop: 7 * zoom + \"px\",\r\n      paddingBottom: 7 * zoom + \"px\",\r\n      paddingLeft: 5 * zoom + \"px\",\r\n      paddingRight: 5 * zoom + \"px\",\r\n      textAlign: \"left\",\r\n    });\r\n  }\r\n\r\n  // internal labels for tasks and collapsed call activities,\r\n  // sub processes and participants\r\n  if (\r\n    /^domainStory:actor\\w*/.test(element.type) ||\r\n    /^domainStory:workObject\\w*/.test(element.type)\r\n  ) {\r\n    assign(bounds, {\r\n      width: bbox.width,\r\n      minHeight: 30,\r\n      y: bbox.y + bbox.height - 20,\r\n      x: bbox.x,\r\n    });\r\n\r\n    assign(style, {\r\n      fontSize: defaultFontSize + \"px\",\r\n      lineHeight: defaultLineHeight,\r\n      paddingTop: 7 * zoom + \"px\",\r\n      paddingBottom: 7 * zoom + \"px\",\r\n      paddingLeft: 5 * zoom + \"px\",\r\n      paddingRight: 5 * zoom + \"px\",\r\n    });\r\n  }\r\n\r\n  let width = 90 * zoom,\r\n    paddingTop = 7 * zoom,\r\n    paddingBottom = 4 * zoom;\r\n\r\n  // external labels for events, data elements, gateways and connections\r\n  if (target.labelTarget) {\r\n    assign(bounds, {\r\n      width: width,\r\n      height: bbox.height + paddingTop + paddingBottom,\r\n      x: mid.x - width / 2,\r\n      y: bbox.y - paddingTop,\r\n    });\r\n\r\n    assign(style, {\r\n      fontSize: externalFontSize + \"px\",\r\n      lineHeight: externalLineHeight,\r\n      paddingTop: paddingTop + \"px\",\r\n      paddingBottom: paddingBottom + \"px\",\r\n    });\r\n  }\r\n\r\n  // external label not yet created\r\n  if (\r\n    isLabelExternal(target) &&\r\n    !hasExternalLabel(target) &&\r\n    !isLabel(target)\r\n  ) {\r\n    let externalLabelMid = getExternalLabelMid(element);\r\n\r\n    let absoluteBBox = canvas.getAbsoluteBBox({\r\n      x: externalLabelMid.x,\r\n      y: externalLabelMid.y,\r\n      width: 0,\r\n      height: 0,\r\n    });\r\n\r\n    let height = externalFontSize + paddingTop + paddingBottom;\r\n\r\n    assign(bounds, {\r\n      width: width,\r\n      height: height,\r\n      x: absoluteBBox.x - width / 2,\r\n      y: absoluteBBox.y - height / 2,\r\n    });\r\n\r\n    assign(style, {\r\n      fontSize: externalFontSize + \"px\",\r\n      lineHeight: externalLineHeight,\r\n      paddingTop: paddingTop + \"px\",\r\n      paddingBottom: paddingBottom + \"px\",\r\n    });\r\n  }\r\n\r\n  // text annotations\r\n  if (is(element, elementTypes.TEXTANNOTATION)) {\r\n    assign(bounds, {\r\n      width: bbox.width,\r\n      height: bbox.height,\r\n      minWidth: 30 * zoom,\r\n      minHeight: 10 * zoom,\r\n    });\r\n\r\n    assign(style, {\r\n      textAlign: \"left\",\r\n      paddingTop: 7 * zoom + \"px\",\r\n      paddingBottom: 7 * zoom + \"px\",\r\n      paddingLeft: 5 * zoom + \"px\",\r\n      paddingRight: 5 * zoom + \"px\",\r\n      fontSize: defaultFontSize + \"px\",\r\n      lineHeight: defaultLineHeight,\r\n    });\r\n  }\r\n\r\n  return { bounds: bounds, style: style };\r\n};\r\n\r\nDSLabelEditingProvider.prototype.update = function (\r\n  element,\r\n  newLabel,\r\n  activeContextText,\r\n  bounds\r\n) {\r\n  let newBounds, bbox;\r\n\r\n  if (is(element, elementTypes.TEXTANNOTATION)) {\r\n    bbox = this._canvas.getAbsoluteBBox(element);\r\n\r\n    newBounds = {\r\n      x: element.x,\r\n      y: element.y,\r\n      width: (element.width / bbox.width) * bounds.width,\r\n      height: (element.height / bbox.height) * bounds.height,\r\n    };\r\n  }\r\n\r\n  this._modeling.updateLabel(element, newLabel, newBounds);\r\n};\r\n","\"use strict\";\r\n\r\nimport { elementTypes } from \"src/app/Domain/Common/elementTypes\";\r\nimport { is } from \"../util\";\r\n\r\nfunction getLabelAttr(semantic) {\r\n  if (\r\n    semantic.type.includes(elementTypes.ACTOR) ||\r\n    semantic.type.includes(elementTypes.WORKOBJECT) ||\r\n    semantic.type.includes(elementTypes.ACTIVITY) ||\r\n    semantic.type.includes(elementTypes.GROUP)\r\n  ) {\r\n    return \"name\";\r\n  }\r\n\r\n  if (is(semantic, elementTypes.TEXTANNOTATION)) {\r\n    return \"text\";\r\n  }\r\n}\r\n\r\nfunction getNumberAttr(semantic) {\r\n  if (is(semantic, elementTypes.ACTIVITY)) {\r\n    return \"number\";\r\n  }\r\n}\r\n\r\nexport function getLabel(element) {\r\n  let semantic;\r\n  if (element.businessObject) {\r\n    semantic = element.businessObject;\r\n  } else {\r\n    semantic = element;\r\n  }\r\n  let attr = getLabelAttr(semantic);\r\n  if (attr && semantic) {\r\n    return semantic[attr] || \"\";\r\n  }\r\n}\r\n\r\nexport function getNumber(element) {\r\n  let semantic = element.businessObject,\r\n    attr = getNumberAttr(semantic);\r\n\r\n  if (attr) {\r\n    return semantic[attr] || \"\";\r\n  }\r\n}\r\n\r\nexport function setLabel(element, text) {\r\n  let semantic;\r\n  if (element.businessObject) {\r\n    semantic = element.businessObject;\r\n  } else {\r\n    semantic = element;\r\n  }\r\n  let attr = getLabelAttr(semantic);\r\n\r\n  if (attr) {\r\n    semantic[attr] = text;\r\n  }\r\n\r\n  return element;\r\n}\r\n\r\nexport function setNumber(element, textNumber) {\r\n  let semantic = element.businessObject,\r\n    attr = getNumberAttr(semantic);\r\n\r\n  if (attr) {\r\n    semantic[attr] = textNumber;\r\n  }\r\n\r\n  return element;\r\n}\r\n\r\n// select at which part of the activity the label should be attached to\r\nexport function selectPartOfActivity(waypoints, angleActivity) {\r\n  let selectedActivity = 0;\r\n  let linelength = 49;\r\n\r\n  for (let i = 0; i < waypoints.length; i++) {\r\n    if (angleActivity[i] === 0 || angleActivity[i] === 180) {\r\n      let length = Math.abs(waypoints[i].x - waypoints[i + 1].x);\r\n      if (length > linelength) {\r\n        selectedActivity = i;\r\n      }\r\n    }\r\n  }\r\n  return selectedActivity;\r\n}\r\n\r\n// approximate the width of the label text, standard fontsize: 11\r\nexport function calculateTextWidth(text) {\r\n  if (!text) {\r\n    return 0;\r\n  }\r\n\r\n  let fontsize = text.length * 5.1;\r\n  fontsize = fontsize / 2;\r\n\r\n  // add an initial offset to the absolute middle of the activity\r\n  fontsize += 20;\r\n  return fontsize;\r\n}\r\n\r\n/**\r\n * copied from https://www.w3schools.com/howto/howto_js_autocomplete.asp on 18.09.2018\r\n */\r\nexport function autocomplete(inp, arr, element) {\r\n  closeAllLists();\r\n\r\n  /* the autocomplete function takes three arguments,\r\n  the text field element and an array of possible autocompleted values and an optional element to which it is appended:*/\r\n  let currentFocus;\r\n\r\n  /* execute a function when someone writes in the text field:*/\r\n  inp.addEventListener(\"input\", function () {\r\n    /* the direct editing field of actors and workobjects is a recycled html-element and has old values that need to be overridden*/\r\n    if (element.type.includes(elementTypes.WORKOBJECT)) {\r\n      this.value = this.innerHTML;\r\n    }\r\n    let autocompleteList,\r\n      autocompleteItem,\r\n      val = this.value;\r\n\r\n    /* close any already open lists of autocompleted values*/\r\n    closeAllLists();\r\n    currentFocus = -1;\r\n\r\n    /* create a DIV element that will contain the items (values):*/\r\n    autocompleteList = document.createElement(\"DIV\");\r\n    autocompleteList.setAttribute(\"id\", \"autocomplete-list\");\r\n    autocompleteList.setAttribute(\"class\", \"autocomplete-items\");\r\n\r\n    /* append the DIV element as a child of the autocomplete container:*/\r\n    this.parentNode.appendChild(autocompleteList);\r\n\r\n    /* for each item in the array...*/\r\n    for (const name of arr) {\r\n      /* check if the item starts with the same letters as the text field value:*/\r\n      if (val) {\r\n        if (name.substr(0, val.length).toUpperCase() == val.toUpperCase()) {\r\n          /* create a DIV element for each matching element:*/\r\n          autocompleteItem = document.createElement(\"DIV\");\r\n\r\n          /* make the matching letters bold:*/\r\n          autocompleteItem.innerHTML =\r\n            \"<strong>\" +\r\n            name.substr(0, val.length) +\r\n            \"</strong>\" +\r\n            name.substr(val.length);\r\n\r\n          /* insert an input field that will hold the current name:*/\r\n          autocompleteItem.innerHTML +=\r\n            \"<input type='hidden' value='\" + name + \"'>\";\r\n\r\n          /* execute a function when someone clicks on the item (DIV element):*/\r\n          autocompleteItem.onclick = function () {\r\n            /* insert the value for the autocomplete text field:*/\r\n            inp.value = this.getElementsByTagName(\"input\")[0].value;\r\n            inp.innerHTML = this.getElementsByTagName(\"input\")[0].value;\r\n\r\n            /* close the list of autocompleted values,\r\n              (or any other open lists of autocompleted values:*/\r\n            closeAllLists();\r\n          };\r\n          autocompleteList.appendChild(autocompleteItem);\r\n        }\r\n      }\r\n    }\r\n\r\n    // if we edit an actor, we do not want auto-complete, since actors generally are unique\r\n    if (element.type.includes(elementTypes.ACTOR)) {\r\n      autocompleteList.style.visibility = \"hidden\";\r\n    }\r\n  });\r\n\r\n  /* execute a function presses a key on the keyboard:*/\r\n  inp.onkeydown = function (e) {\r\n    let autocompleteList = document.getElementById(\"autocomplete-list\");\r\n    if (autocompleteList) {\r\n      autocompleteList = autocompleteList.getElementsByTagName(\"div\");\r\n    }\r\n    if (e.keyCode === 40) {\r\n      /* If the arrow DOWN key is pressed,\r\n        increase the currentFocus letiable:*/\r\n      currentFocus++;\r\n\r\n      /* and and make the current item more visible:*/\r\n      addActive(autocompleteList);\r\n    } else if (e.keyCode === 38) {\r\n      // up\r\n      /* If the arrow UP key is pressed,\r\n        decrease the currentFocus letiable:*/\r\n      currentFocus--;\r\n\r\n      /* and and make the current item more visible:*/\r\n      addActive(autocompleteList);\r\n    } else if (e.keyCode === 13) {\r\n      /* If the ENTER key is pressed, prevent the form from being submitted,*/\r\n      e.preventDefault();\r\n      if (currentFocus > -1) {\r\n        /* and simulate a click on the \"active\" item:*/\r\n        if (autocompleteList && autocompleteList[currentFocus]) {\r\n          autocompleteList[currentFocus].click();\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  function addActive(autocompleteList) {\r\n    /* a function to classify an item as \"active\":*/\r\n    if (!autocompleteList || autocompleteList.length < 1) return false;\r\n\r\n    /* start by removing the \"active\" class on all items:*/\r\n    removeActive(autocompleteList);\r\n    if (currentFocus >= autocompleteList.length) currentFocus = 0;\r\n    if (currentFocus < 0) currentFocus = autocompleteList.length - 1;\r\n\r\n    /* add class \"autocomplete-active\":*/\r\n    autocompleteList[currentFocus].classList.add(\"autocomplete-active\");\r\n  }\r\n\r\n  function removeActive(autocompleteList) {\r\n    /* a function to remove the \"active\" class from all autocomplete items:*/\r\n    if (autocompleteList.length > 1) {\r\n      for (const item of autocompleteList) {\r\n        item.classList.remove(\"autocomplete-active\");\r\n      }\r\n    }\r\n  }\r\n\r\n  function closeAllLists(survivor) {\r\n    /* close all autocomplete lists in the document,\r\n    except the one passed as an argument:*/\r\n    let autocompleteList =\r\n      document.getElementsByClassName(\"autocomplete-items\");\r\n    for (const item of autocompleteList) {\r\n      if (survivor != item && survivor != inp) {\r\n        item.parentNode.removeChild(item);\r\n      }\r\n    }\r\n  }\r\n\r\n  /* execute a function when someone clicks in the document:*/\r\n  document.addEventListener(\"click\", function (e) {\r\n    closeAllLists(e.target);\r\n  });\r\n}\r\n","\"use strict\";\r\n\r\nimport ChangeSupportModule from \"diagram-js/lib/features/change-support\";\r\nimport ResizeModule from \"diagram-js/lib/features/resize\";\r\nimport DirectEditingModule from \"diagram-js-direct-editing\";\r\n\r\nimport CommandStack from \"diagram-js/lib/command/CommandStack\";\r\nimport UpdateLabelHandler from \"../updateHandler/updateLabelHandler\";\r\nimport DSLabelEditingPreview from \"./dsLabelEditingPreview\";\r\nimport DSLabelEditingProvider from \"./dsLabelEditingProvider\";\r\nimport DSModeling from \"../modeling/dSModeling\";\r\n\r\nexport default {\r\n  __depends__: [ChangeSupportModule, ResizeModule, DirectEditingModule],\r\n  __init__: [\"dSlabelEditingProvider\", \"dSlabelEditingPreview\"],\r\n  dSlabelEditingProvider: [\"type\", DSLabelEditingProvider],\r\n  dSlabelEditingPreview: [\"type\", DSLabelEditingPreview],\r\n  updateLabelHandler: [\"type\", UpdateLabelHandler],\r\n  commandStack: [\"type\", CommandStack],\r\n  modeling: [\"type \", DSModeling],\r\n};\r\n","\"use strict\";\r\n\r\nimport { selectPartOfActivity } from \"./dsLabelUtil\";\r\nimport { angleBetween } from \"../../../Utils/mathExtensions\";\r\n\r\nexport function countLines(str) {\r\n  return str.split(/\\r\\n|\\r|\\n/).length;\r\n}\r\n\r\n// determine the position of the label at the activity\r\nexport function labelPosition(waypoints, lines = 1) {\r\n  let amountWaypoints = waypoints.length;\r\n  let determinedPosition;\r\n  let xPos;\r\n  let yPos;\r\n\r\n  if (amountWaypoints > 2) {\r\n    let angleActivity = new Array(amountWaypoints - 1);\r\n    for (let i = 0; i < amountWaypoints - 1; i++) {\r\n      // calculate the angles of the activities\r\n      angleActivity[i] = angleBetween(waypoints[i], waypoints[i + 1]);\r\n    }\r\n\r\n    let selectedActivity = selectPartOfActivity(waypoints, angleActivity);\r\n\r\n    xPos = labelPositionX(\r\n      waypoints[selectedActivity],\r\n      waypoints[selectedActivity + 1]\r\n    );\r\n    yPos = labelPositionY(\r\n      waypoints[selectedActivity],\r\n      waypoints[selectedActivity + 1],\r\n      lines\r\n    );\r\n\r\n    determinedPosition = {\r\n      x: xPos,\r\n      y: yPos,\r\n      selected: selectedActivity,\r\n    };\r\n\r\n    return determinedPosition;\r\n  } else {\r\n    xPos = labelPositionX(waypoints[0], waypoints[1]);\r\n    yPos = labelPositionY(waypoints[0], waypoints[1], lines);\r\n\r\n    determinedPosition = {\r\n      x: xPos,\r\n      y: yPos,\r\n      selected: 0,\r\n    };\r\n\r\n    return determinedPosition;\r\n  }\r\n}\r\n\r\n// calculate the X position of the label\r\nexport function labelPositionX(startPoint, endPoint) {\r\n  let angle = angleBetween(startPoint, endPoint);\r\n  let offsetX = 0;\r\n  let scaledAngle = 0;\r\n  if (angle === 0 || angle === 180 || angle === 90 || angle === 270) {\r\n    offsetX = 0;\r\n  } else if (angle > 0 && angle < 90) {\r\n    // endpoint in upper right quadrant\r\n    offsetX = 5 - angle / 6;\r\n  } else if (angle > 90 && angle < 180) {\r\n    // endpoint in upper left quadrant\r\n    scaledAngle = angle - 90;\r\n    offsetX = 5 - scaledAngle / 18;\r\n  } else if (angle > 180 && angle < 270) {\r\n    // endpoint in lower left quadrant\r\n    scaledAngle = angle - 180;\r\n    offsetX = scaledAngle / 18;\r\n  } else if (angle > 270) {\r\n    // endpoint in lower right quadrant\r\n    scaledAngle = angle - 270;\r\n    offsetX = 5 - scaledAngle / 6;\r\n  }\r\n  return offsetX + (startPoint.x + endPoint.x) / 2;\r\n}\r\n\r\n// calculate the Y position of the label\r\nexport function labelPositionY(startPoint, endPoint, lines = 1) {\r\n  let angle = angleBetween(startPoint, endPoint);\r\n  let offsetY = 0;\r\n  let scaledAngle = 0;\r\n\r\n  if (angle === 0 || angle === 180) {\r\n    offsetY = 15;\r\n  } else if (angle === 90 || angle === 270) {\r\n    offsetY = 0;\r\n  } else if (angle > 0 && angle < 90) {\r\n    // endpoint in upper right quadrant\r\n    offsetY = 15 - angle / 6;\r\n  } else if (angle > 90 && angle < 180) {\r\n    // endpoint in upper left quadrant\r\n    scaledAngle = angle - 90;\r\n    offsetY = (-scaledAngle / 9) * lines;\r\n  } else if (angle > 180 && angle < 270) {\r\n    // endpoint in lower left quadrant\r\n    scaledAngle = angle - 180;\r\n    offsetY = 15 - scaledAngle / 3;\r\n  } else if (angle > 270) {\r\n    // endpoint in lower right quadrant\r\n    scaledAngle = angle - 270;\r\n    offsetY = (-scaledAngle / 9) * lines;\r\n  }\r\n  return offsetY + (startPoint.y + endPoint.y) / 2;\r\n}\r\n","\"use strict\";\r\n\r\nimport Modeling from \"bpmn-js/lib/features/modeling/Modeling\";\r\n\r\nimport { inherits } from \"util\";\r\n\r\nexport default function DSModeling(\r\n  eventBus,\r\n  elementFactory,\r\n  commandStack,\r\n  domainStoryRules\r\n) {\r\n  Modeling.call(this, eventBus, elementFactory, commandStack, domainStoryRules);\r\n}\r\n\r\nModeling.prototype.updateLabel = function (element, newLabel, newBounds) {\r\n  if (\r\n    element.businessObject\r\n      ? newLabel !== element.businessObject.name\r\n      : newLabel !== element.name\r\n  ) {\r\n    if (/^domainStory:/.test(element.type)) {\r\n      this._commandStack.execute(\"element.updateCustomLabel\", {\r\n        element: element,\r\n        newLabel: newLabel,\r\n        newBounds: newBounds,\r\n      });\r\n    } else {\r\n      this._commandStack.execute(\"element.updateLabel\", {\r\n        element: element,\r\n        newLabel: newLabel,\r\n        newBounds: newBounds,\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\nModeling.prototype.updateNumber = function (element, newNumber, newBounds) {\r\n  if (\r\n    element.businessObject\r\n      ? newNumber !== element.businessObject.number\r\n      : newNumber !== element.number\r\n  ) {\r\n    if (/^domainStory:/.test(element.type)) {\r\n      this._commandStack.execute(\"element.updateCustomLabel\", {\r\n        element: element,\r\n        newNumber: newNumber,\r\n        newBounds: newBounds,\r\n      });\r\n    } else {\r\n      this._commandStack.execute(\"element.updateLabel\", {\r\n        element: element,\r\n        newNumber: newNumber,\r\n        newBounds: newBounds,\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\nModeling.prototype.replaceShape = function (oldShape, newShape, hints) {\r\n  let context = {\r\n    oldShape: oldShape,\r\n    newData: newShape,\r\n    hints: hints || {},\r\n  };\r\n\r\n  this._commandStack.execute(\"shape.replace\", context);\r\n  return context.newShape;\r\n};\r\n\r\nModeling.prototype.removeGroup = function (element) {\r\n  this._commandStack.execute(\"shape.removeGroupWithoutChildren\", {\r\n    element: element,\r\n  });\r\n  this.removeElements({ element });\r\n};\r\n\r\ninherits(DSModeling, Modeling);\r\n\r\nDSModeling.$inject = [\r\n  \"eventBus\",\r\n  \"elementFactory\",\r\n  \"commandStack\",\r\n  \"domainStoryRules\",\r\n];\r\n","\"use strict\";\r\n\r\nimport DomainStoryPalette from \"../palette/domainStoryPalette\";\r\nimport ElementFactory from \"bpmn-js/lib/features/modeling/ElementFactory\";\r\nimport CreateModule from \"diagram-js/lib/features/create\";\r\nimport PathMap from \"bpmn-js/lib/draw/PathMap\";\r\nimport PopupMenuModule from \"bpmn-js/lib/features/popup-menu\";\r\nimport ContextPadModule from \"diagram-js/lib/features/context-pad\";\r\nimport CommandStack from \"diagram-js/lib/command/CommandStack\";\r\nimport UpdateLabelHandler from \"../updateHandler/updateLabelHandler\";\r\nimport DomainStoryUpdater from \"../domainStoryUpdater\";\r\nimport DomainStoryElementFactory from \"../domainStoryElementFactory\";\r\nimport headlineAndDescriptionUpdateHandler from \"../updateHandler/headlineAndDescriptionUpdateHandler\";\r\nimport DomainStoryRenderer from \"../domainStoryRenderer\";\r\nimport DSModeling from \"./dSModeling\";\r\nimport DomainStoryRules from \"../domainStoryRules\";\r\nimport ReplaceMenuProvider from \"../change-icon/replaceMenuProvider\";\r\nimport DomainStoryContextPadProvider from \"../context-pad/domainStoryContextPadProvider\";\r\n\r\nexport default {\r\n  __depends__: [CreateModule, ContextPadModule, PopupMenuModule],\r\n  __init__: [\r\n    \"domainStoryRenderer\",\r\n    \"paletteProvider\",\r\n    \"domainStoryRules\",\r\n    \"domainStoryUpdater\",\r\n    \"contextPadProvider\",\r\n    \"replaceMenuProvider\",\r\n  ],\r\n  elementFactory: [\"type\", DomainStoryElementFactory],\r\n  domainStoryRenderer: [\"type\", DomainStoryRenderer],\r\n  paletteProvider: [\"type\", DomainStoryPalette],\r\n  domainStoryRules: [\"type\", DomainStoryRules],\r\n  domainStoryUpdater: [\"type\", DomainStoryUpdater],\r\n  contextPadProvider: [\"type\", DomainStoryContextPadProvider],\r\n  elementFactoryBpmn: [\"type\", ElementFactory],\r\n  pathMap: [\"type\", PathMap],\r\n  replaceMenuProvider: [\"type\", ReplaceMenuProvider],\r\n  commandStack: [\"type\", CommandStack],\r\n  updateLabelHandler: [\"type\", UpdateLabelHandler],\r\n  headlineAndDescriptionUpdateHandler: [\r\n    \"type\",\r\n    headlineAndDescriptionUpdateHandler,\r\n  ],\r\n  modeling: [\"type\", DSModeling],\r\n};\r\n","\"use strict\";\r\n\r\nimport { labelPosition } from \"../labeling/position\";\r\n\r\nlet numberRegistry = [];\r\nlet multipleNumberRegistry = [false];\r\n\r\nlet canvasElementRegistry;\r\n\r\nexport function initializeNumbering(canvasElementRegistryService) {\r\n  canvasElementRegistry = canvasElementRegistryService;\r\n}\r\n\r\n// defines the box for activity numbers\r\nexport function numberBoxDefinitions(element) {\r\n  let alignment = \"center\";\r\n  let boxWidth = 30;\r\n  let boxHeight = 30;\r\n  let position = labelPosition(element.waypoints);\r\n\r\n  return {\r\n    textAlign: alignment,\r\n    width: boxWidth,\r\n    height: boxHeight,\r\n    x: position.x,\r\n    y: position.y,\r\n  };\r\n}\r\n\r\n// determine the next available number that is not yet used\r\nexport function generateAutomaticNumber(elementActivity, commandStack) {\r\n  const semantic = elementActivity.businessObject;\r\n  const usedNumbers = [0];\r\n  let wantedNumber = -1;\r\n\r\n  const activitiesFromActors = canvasElementRegistry.getActivitiesFromActors();\r\n\r\n  activitiesFromActors.forEach((element) => {\r\n    if (element.businessObject.number) {\r\n      usedNumbers.push(+element.businessObject.number);\r\n    }\r\n  });\r\n  for (let i = 0; i < usedNumbers.length; i++) {\r\n    if (!usedNumbers.includes(i)) {\r\n      if (!usedNumbers.includes(i)) {\r\n        wantedNumber = i;\r\n        i = usedNumbers.length;\r\n      }\r\n    }\r\n  }\r\n  if (wantedNumber === -1) {\r\n    wantedNumber = usedNumbers.length;\r\n  }\r\n\r\n  updateExistingNumbersAtGeneration(\r\n    activitiesFromActors,\r\n    wantedNumber,\r\n    commandStack\r\n  );\r\n  semantic.number = wantedNumber;\r\n  return wantedNumber;\r\n}\r\n\r\n// update the numbers at the activities when generating a new activity\r\nexport function updateExistingNumbersAtGeneration(\r\n  activitiesFromActors,\r\n  wantedNumber,\r\n  commandStack\r\n) {\r\n  activitiesFromActors.forEach((element) => {\r\n    let number = +element.businessObject.number;\r\n\r\n    if (number >= wantedNumber) {\r\n      wantedNumber++;\r\n      setTimeout(function () {\r\n        commandStack.execute(\"activity.changed\", {\r\n          businessObject: element.businessObject,\r\n          newLabel: element.businessObject.name,\r\n          newNumber: number,\r\n          element: element,\r\n        });\r\n      }, 10);\r\n    }\r\n  });\r\n}\r\n\r\n// update the numbers at the activities when editing an activity\r\nexport function updateExistingNumbersAtEditing(\r\n  activitiesFromActors,\r\n  wantedNumber,\r\n  eventBus\r\n) {\r\n  // get a sorted list of all activities that could need changing\r\n  let sortedActivities = [[]];\r\n  activitiesFromActors.forEach((activity) => {\r\n    if (!sortedActivities[activity.businessObject.number]) {\r\n      sortedActivities[activity.businessObject.number] = [];\r\n    }\r\n    sortedActivities[activity.businessObject.number].push(activity);\r\n  });\r\n\r\n  // set the number of each activity to the next highest number, starting from the number, we overrode\r\n  let currentNumber = wantedNumber;\r\n  for (\r\n    currentNumber;\r\n    currentNumber < sortedActivities.length;\r\n    currentNumber++\r\n  ) {\r\n    if (sortedActivities[currentNumber]) {\r\n      wantedNumber++;\r\n      setNumberOfActivity(\r\n        sortedActivities[currentNumber],\r\n        wantedNumber,\r\n        eventBus\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n// get the IDs of activities with their associated number, only returns activities that are originating from an actor\r\nexport function getNumbersAndIDs() {\r\n  let iDWithNumber = [];\r\n  let activities = canvasElementRegistry.getActivitiesFromActors();\r\n\r\n  for (let i = activities.length - 1; i >= 0; i--) {\r\n    let id = activities[i].businessObject.id;\r\n    let number = activities[i].businessObject.number;\r\n    iDWithNumber.push({ id: id, number: number });\r\n  }\r\n  return iDWithNumber;\r\n}\r\n\r\nexport function addNumberToRegistry(renderedNumber, number) {\r\n  numberRegistry[number] = renderedNumber;\r\n}\r\n\r\nexport function setNumberIsMultiple(number, multi) {\r\n  multipleNumberRegistry[number] = multi;\r\n}\r\n\r\n/**\r\n * @returns copy of registry\r\n */\r\nexport function getNumberRegistry() {\r\n  return numberRegistry.slice(0);\r\n}\r\n\r\nexport function getMultipleNumberRegistry() {\r\n  return multipleNumberRegistry.slice(0);\r\n}\r\n\r\nfunction setNumberOfActivity(elementArray, wantedNumber, eventBus) {\r\n  if (elementArray) {\r\n    elementArray.forEach((element) => {\r\n      if (element) {\r\n        let businessObject = element.businessObject;\r\n        if (businessObject) {\r\n          businessObject.number = wantedNumber;\r\n        }\r\n        eventBus.fire(\"element.changed\", { element });\r\n      }\r\n    });\r\n  }\r\n}\r\n","\"use strict\";\r\n\r\nimport { assign } from \"min-dash\";\r\nimport { overrideAppendedIcons } from \"src/app/Domain/Domain-Configuration/allIcons\";\r\nimport { Dictionary } from \"src/app/Domain/Common/dictionary/dictionary\";\r\nimport { elementTypes } from \"src/app/Domain/Common/elementTypes\";\r\nimport { getNameFromType } from \"src/app/Utils/naming\";\r\nimport { APPENDED_ICONS_TAG } from \"../../../Domain/Common/constants\";\r\n\r\n/**\r\n * A palette that allows you to create BPMN _and_ custom elements.\r\n */\r\n\r\nlet iconDictionary;\r\nlet configuration;\r\n\r\nexport function initializePalette(iconDictionaryService, configurationService) {\r\n  iconDictionary = iconDictionaryService;\r\n  configuration = configurationService;\r\n}\r\n\r\nexport default function PaletteProvider(\r\n  palette,\r\n  create,\r\n  elementFactory,\r\n  spaceTool,\r\n  lassoTool\r\n) {\r\n  this._create = create;\r\n  this._elementFactory = elementFactory;\r\n  this._spaceTool = spaceTool;\r\n  this._lassoTool = lassoTool;\r\n\r\n  palette.registerProvider(this);\r\n}\r\n\r\nPaletteProvider.$inject = [\r\n  \"palette\",\r\n  \"create\",\r\n  \"elementFactory\",\r\n  \"spaceTool\",\r\n  \"lassoTool\",\r\n  \"modeling\",\r\n];\r\n\r\nPaletteProvider.prototype.getPaletteEntries = function () {\r\n  let actions = {},\r\n    create = this._create,\r\n    elementFactory = this._elementFactory,\r\n    spaceTool = this._spaceTool,\r\n    lassoTool = this._lassoTool;\r\n\r\n  function createAction(type, group, className, title, options) {\r\n    function createListener(event) {\r\n      let shape = elementFactory.createShape(assign({ type: type }, options));\r\n\r\n      assign(shape.businessObject, {\r\n        id: shape.id,\r\n      });\r\n\r\n      if (options) {\r\n        shape.businessObject.di.isExpanded = options.isExpanded;\r\n      }\r\n\r\n      create.start(event, shape);\r\n    }\r\n\r\n    let shortType = type.replace(/^domainStory:/, \"\");\r\n\r\n    return {\r\n      group: group,\r\n      className: className,\r\n      title: \"Create \" + title || \"Create \" + shortType,\r\n      action: {\r\n        dragstart: createListener,\r\n        click: createListener,\r\n      },\r\n    };\r\n  }\r\n\r\n  return initPalette(actions, spaceTool, lassoTool, createAction);\r\n};\r\n\r\nfunction appendCSSStyleCheat(customIcons) {\r\n  const sheetEl = document.createElement(\"style\");\r\n  document.head.appendChild(sheetEl);\r\n\r\n  let customIconDict = new Dictionary();\r\n\r\n  customIconDict.appendDict(customIcons);\r\n  let customIconDictKeys = customIconDict.keysArray();\r\n\r\n  customIconDictKeys.forEach((name) => {\r\n    if (iconDictionary.getAppendedIconDictionary().has(name)) {\r\n      let src = customIconDict.get(name);\r\n\r\n      const iconStyle =\r\n        \".icon-domain-story-\" +\r\n        name.toLowerCase() +\r\n        \"::before{\" +\r\n        \" display: block;\" +\r\n        ' content: url(\"data:image/svg+xml;utf8,' +\r\n        wrapSRCInSVG(src) +\r\n        '\");' +\r\n        \" margin: 3px;}\";\r\n      sheetEl.sheet.insertRule(iconStyle, sheetEl.sheet.cssRules.length);\r\n    }\r\n  });\r\n}\r\n\r\nfunction initPalette(actions, spaceTool, lassoTool, createAction) {\r\n  let config = iconDictionary?.getCurrentIconConfigurationForBPMN();\r\n\r\n  let customIcons = localStorage.getItem(APPENDED_ICONS_TAG);\r\n\r\n  if (customIcons) {\r\n    customIcons = JSON.parse(customIcons);\r\n    if (customIconsLegacy(customIcons)) {\r\n      customIcons = convertLegacyAppendedIconsToDict(customIcons);\r\n    }\r\n    if (customIcons.entries && customIcons.entries.forEach) {\r\n      const customIconsDict = new Dictionary();\r\n      customIcons.entries.forEach((entry) => {\r\n        customIconsDict.putEntry(entry);\r\n      });\r\n      overrideAppendedIcons(customIconsDict);\r\n      appendCSSStyleCheat(customIcons);\r\n    }\r\n  }\r\n\r\n  iconDictionary?.initTypeDictionaries(config.actors, config.workObjects);\r\n\r\n  let actorTypes = iconDictionary?.getTypeDictionary(elementTypes.ACTOR);\r\n\r\n  actorTypes?.keysArray().forEach((actorType) => {\r\n    addCanvasObjectTypes(actorType, createAction, actions, \"actor\");\r\n  });\r\n\r\n  assign(actions, {\r\n    \"actor-separator\": {\r\n      group: \"actor\",\r\n      separator: true,\r\n    },\r\n  });\r\n\r\n  let workObjectTypes = iconDictionary?.getTypeDictionary(\r\n    elementTypes.WORKOBJECT\r\n  );\r\n\r\n  workObjectTypes?.keysArray().forEach((workObjectType) => {\r\n    addCanvasObjectTypes(workObjectType, createAction, actions, \"actor\"); // TODO is ClassName 'actor' correct?\r\n  });\r\n\r\n  assign(actions, {\r\n    \"workObject-separator\": {\r\n      group: \"workObject\",\r\n      separator: true,\r\n    },\r\n    \"domainStory-group\": createAction(\r\n      elementTypes.GROUP,\r\n      \"group\",\r\n      \"icon-domain-story-tool-group\",\r\n      \"group\"\r\n    ),\r\n    \"group-separator\": {\r\n      group: \"group\",\r\n      separator: true,\r\n    },\r\n    \"lasso-tool\": {\r\n      group: \"tools\",\r\n      className: \"bpmn-icon-lasso-tool\",\r\n      title: \"Activate the lasso tool\",\r\n      action: {\r\n        click: function (event) {\r\n          lassoTool.activateSelection(event);\r\n        },\r\n      },\r\n    },\r\n    \"space-tool\": {\r\n      group: \"tools\",\r\n      className: \"bpmn-icon-space-tool\",\r\n      title: \"Activate the create/remove space tool\",\r\n      action: {\r\n        click: function (event) {\r\n          spaceTool.activateSelection(event);\r\n        },\r\n      },\r\n    },\r\n  });\r\n\r\n  return actions;\r\n}\r\n\r\nfunction addCanvasObjectTypes(actorType, createAction, actions, className) {\r\n  let name = getNameFromType(actorType);\r\n  let icon = iconDictionary.getIconForBPMN(actorType);\r\n\r\n  let action = [];\r\n  action[\"domainStory-\" + className + name] = createAction(\r\n    actorType,\r\n    className,\r\n    icon,\r\n    name\r\n  );\r\n  assign(actions, action);\r\n}\r\n\r\nfunction customIconsLegacy(customIcons) {\r\n  return !(\r\n    Object.keys(customIcons).length === 1 &&\r\n    Object.keys(customIcons)[0] === \"entries\"\r\n  );\r\n}\r\n\r\nfunction convertLegacyAppendedIconsToDict(customIcons) {\r\n  let dict = new Dictionary();\r\n  Object.keys(customIcons).forEach((key) => {\r\n    dict.set(key, customIcons[key]);\r\n  });\r\n  return dict;\r\n}\r\n\r\n// For some reason its important to use ' in the content for the Palette and ContextPad\r\n// Do not change!\r\nfunction wrapSRCInSVG(src) {\r\n  return (\r\n    \"<svg viewBox='0 0 22 22' width='22' height='22' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>\" +\r\n    \"<image width='22' height='22' xlink:href='\" +\r\n    src +\r\n    \"'/></svg>\"\r\n  );\r\n}\r\n","\"use strict\";\r\n\r\nimport { getNumbersAndIDs } from \"../numbering/numbering\";\r\n\r\n/**\r\n * commandStack Handler for changes at activities\r\n */\r\n\r\nlet canvasElementRegistry;\r\nexport function initializeActivityUpdateHandler(canvasElementRegistryService) {\r\n  canvasElementRegistry = canvasElementRegistryService;\r\n}\r\n\r\nexport default function activityUpdateHandler(commandStack, eventBus) {\r\n  commandStack.registerHandler(\r\n    \"activity.directionChange\",\r\n    activity_directionChange\r\n  );\r\n  commandStack.registerHandler(\"activity.changed\", activity_changed);\r\n\r\n  // update the activity from the activity-dialog, either with or without number\r\n  // and change other activities too, to keep the numbers consistent\r\n  function activity_changed(modeling) {\r\n    this.preExecute = function (context) {\r\n      context.oldLabel = context.businessObject.name || \" \";\r\n\r\n      let oldNumbersWithIDs = getNumbersAndIDs();\r\n      modeling.updateLabel(context.businessObject, context.newLabel);\r\n      modeling.updateNumber(context.businessObject, context.newNumber);\r\n\r\n      context.oldNumber = context.businessObject.number;\r\n      context.oldNumbersWithIDs = oldNumbersWithIDs;\r\n    };\r\n\r\n    this.execute = function (context) {\r\n      let semantic = context.businessObject;\r\n      let element = context.element;\r\n\r\n      if (context.newLabel && context.newLabel.length < 1) {\r\n        context.newLabel = \" \";\r\n      }\r\n\r\n      semantic.name = context.newLabel;\r\n      semantic.number = context.newNumber;\r\n\r\n      eventBus.fire(\"element.changed\", { element });\r\n    };\r\n\r\n    this.revert = function (context) {\r\n      let semantic = context.businessObject;\r\n      let element = context.element;\r\n      semantic.name = context.oldLabel;\r\n      semantic.number = context.oldNumber;\r\n\r\n      revertAutomaticNumberGenerationChange(\r\n        context.oldNumbersWithIDs,\r\n        eventBus\r\n      );\r\n\r\n      eventBus.fire(\"element.changed\", { element });\r\n    };\r\n  }\r\n\r\n  // change the direction of a single activity without affecting other activities\r\n  function activity_directionChange(modeling) {\r\n    this.preExecute = function (context) {\r\n      context.oldNumber = context.businessObject.number;\r\n      context.oldWaypoints = context.element.waypoints;\r\n      context.name = context.businessObject.name;\r\n\r\n      if (!context.oldNumber) {\r\n        context.oldNumber = 0;\r\n      }\r\n      modeling.updateNumber(context.businessObject, context.newNumber);\r\n    };\r\n\r\n    this.execute = function (context) {\r\n      let businessObject = context.businessObject;\r\n      let element = context.element;\r\n      let swapSource = element.source;\r\n      let newWaypoints = [];\r\n      let waypoints = element.waypoints;\r\n\r\n      for (let i = waypoints.length - 1; i >= 0; i--) {\r\n        newWaypoints.push(waypoints[i]);\r\n      }\r\n\r\n      element.source = element.target;\r\n      businessObject.source = businessObject.target;\r\n      element.target = swapSource;\r\n      businessObject.target = swapSource.id;\r\n\r\n      businessObject.name = context.name;\r\n      businessObject.number = context.newNumber;\r\n      element.waypoints = newWaypoints;\r\n\r\n      eventBus.fire(\"element.changed\", { element });\r\n    };\r\n\r\n    this.revert = function (context) {\r\n      let semantic = context.businessObject;\r\n      let element = context.element;\r\n      let swapSource = element.source;\r\n\r\n      element.source = element.target;\r\n      semantic.source = semantic.target;\r\n      element.target = swapSource;\r\n      semantic.target = swapSource.id;\r\n\r\n      semantic.name = context.name;\r\n\r\n      semantic.number = context.oldNumber;\r\n      element.waypoints = context.oldWaypoints;\r\n\r\n      eventBus.fire(\"element.changed\", { element });\r\n    };\r\n  }\r\n}\r\n\r\n// reverts the automatic changed done by the automatic number-generation at editing\r\nfunction revertAutomaticNumberGenerationChange(iDWithNumber, eventBus) {\r\n  let activities = canvasElementRegistry.getActivitesFromActors();\r\n  for (let i = activities.length - 1; i >= 0; i--) {\r\n    for (let j = iDWithNumber.length - 1; j >= 0; j--) {\r\n      if (iDWithNumber[j].id.includes(activities[i].businessObject.id)) {\r\n        let element = activities[i];\r\n        element.businessObject.number = iDWithNumber[j].number;\r\n        j = -5;\r\n        eventBus.fire(\"element.changed\", { element });\r\n        iDWithNumber.splice(j, 1);\r\n      }\r\n    }\r\n  }\r\n}\r\n","\"use strict\";\r\n\r\nimport { undoGroupRework } from \"../util\";\r\n\r\nexport default function elementUpdateHandler(commandStack, eventBus) {\r\n  commandStack.registerHandler(\"element.colorChange\", element_colorChange);\r\n  commandStack.registerHandler(\r\n    \"shape.removeGroupWithoutChildren\",\r\n    removeGroupWithoutChildren\r\n  );\r\n\r\n  function element_colorChange() {\r\n    this.preExecute = function (context) {\r\n      context.oldColor = context.businessObject.pickedColor;\r\n    };\r\n\r\n    this.execute = function (context) {\r\n      let semantic = context.businessObject;\r\n      let element = context.element;\r\n\r\n      semantic.pickedColor = context.newColor;\r\n\r\n      eventBus.fire(\"element.changed\", { element });\r\n    };\r\n\r\n    this.revert = function (context) {\r\n      let semantic = context.businessObject;\r\n      let element = context.element;\r\n\r\n      semantic.pickedColor = context.oldColor;\r\n\r\n      eventBus.fire(\"element.changed\", { element });\r\n    };\r\n  }\r\n\r\n  function removeGroupWithoutChildren() {\r\n    this.preExecute = function (ctx) {\r\n      ctx.parent = ctx.element.parent;\r\n      ctx.children = ctx.element.children.slice();\r\n    };\r\n\r\n    this.execute = function (ctx) {\r\n      let element = ctx.element;\r\n      ctx.children.forEach((child) => {\r\n        undoGroupRework(element, child);\r\n        eventBus.fire(\"element.changed\", { element: child });\r\n      });\r\n      eventBus.fire(\"shape.remove\", { element });\r\n    };\r\n\r\n    this.revert = function (ctx) {\r\n      let element = ctx.element;\r\n      eventBus.fire(\"shape.added\", { element });\r\n\r\n      ctx.element.children.forEach((child) => {\r\n        reworkGroupElements(element, child);\r\n      });\r\n    };\r\n  }\r\n}\r\n","/**\r\n * a handler that updates the text of a BPMN element.\r\n */\r\nexport default function headlineAndDescriptionUpdateHandler(\r\n  commandStack,\r\n  titleService\r\n) {\r\n  commandStack.registerHandler(\r\n    \"story.updateHeadlineAndDescription\",\r\n    handlerFunction\r\n  );\r\n\r\n  function handlerFunction() {\r\n    this.execute = function (ctx) {\r\n      ctx.oldTitle = titleService.getTitle();\r\n      ctx.oldDescription = titleService.getDescription();\r\n\r\n      titleService.updateTitleAndDescription(\r\n        ctx.newTitle,\r\n        ctx.newDescription,\r\n        false\r\n      );\r\n    };\r\n\r\n    this.revert = function (ctx) {\r\n      titleService.updateTitleAndDescription(\r\n        ctx.oldTitle,\r\n        ctx.oldDescription,\r\n        false\r\n      );\r\n    };\r\n  }\r\n}\r\n","\"use strict\";\r\n\r\nexport default function DSMassRenameHandler(commandStack, eventBus) {\r\n  commandStack.registerHandler(\"domainStoryObjects.massRename\", massRename);\r\n\r\n  function massRename(modeling) {\r\n    this.preExecute = function (context) {\r\n      let relevantElements = context.elements;\r\n\r\n      context.oldLabel = relevantElements[0].businessObject.name;\r\n\r\n      relevantElements.forEach((element) => {\r\n        modeling.updateLabel(element.businessObject, confirm.newValue);\r\n      });\r\n    };\r\n\r\n    this.execute = function (context) {\r\n      let relevantElements = context.elements;\r\n      relevantElements.forEach((element) => {\r\n        let semantic = element.businessObject;\r\n        semantic.name = context.newValue;\r\n\r\n        eventBus.fire(\"element.changed\", { element });\r\n      });\r\n    };\r\n\r\n    this.revert = function (context) {\r\n      let relevantElements = context.elements;\r\n      relevantElements.forEach((element) => {\r\n        let semantic = element.businessObject;\r\n        semantic.name = context.oldLabel;\r\n\r\n        eventBus.fire(\"element.changed\", { element });\r\n      });\r\n    };\r\n  }\r\n}\r\n","\"use strict\";\r\n\r\nimport {\r\n  setLabel,\r\n  getLabel,\r\n  setNumber,\r\n  getNumber,\r\n} from \"../labeling/dsLabelUtil\";\r\n\r\nimport {\r\n  getExternalLabelMid,\r\n  isLabelExternal,\r\n  hasExternalLabel,\r\n  isLabel,\r\n} from \"bpmn-js/lib/util/LabelUtil\";\r\n\r\nimport { elementTypes } from \"src/app/Domain/Common/elementTypes\";\r\nimport { getBusinessObject, is } from \"../util\";\r\n\r\nconst NULL_DIMENSIONS = {\r\n  width: 0,\r\n  height: 0,\r\n};\r\n\r\n/**\r\n * a handler that updates the text of a BPMN element.\r\n */\r\nexport default function UpdateLabelHandler(\r\n  modeling,\r\n  textRenderer,\r\n  commandStack\r\n) {\r\n  commandStack.registerHandler(\"element.updateCustomLabel\", handlerFunction);\r\n\r\n  function handlerFunction() {\r\n    /**\r\n     * Set the label and return the changed elements.\r\n     *\r\n     * Element parameter can be label itself or connection (i.e. sequence flow).\r\n     *\r\n     * @param {djs.model.Base} element\r\n     * @param {String} text\r\n     */\r\n\r\n    this.preExecute = function (ctx) {\r\n      let element = ctx.element,\r\n        businessObject = element.businessObject,\r\n        newLabel = ctx.newLabel,\r\n        newNumber = ctx.newNumber;\r\n\r\n      if (\r\n        !isLabel(element) &&\r\n        isLabelExternal(element) &&\r\n        !hasExternalLabel(element) &&\r\n        (newLabel !== \"\" || newNumber !== \"\")\r\n      ) {\r\n        // create label\r\n        let paddingTop = 7;\r\n\r\n        let labelCenter = getExternalLabelMid(element);\r\n\r\n        labelCenter = {\r\n          x: labelCenter.x,\r\n          y: labelCenter.y + paddingTop,\r\n        };\r\n\r\n        modeling.createLabel(element, labelCenter, {\r\n          id: businessObject.id + \"_label\",\r\n          businessObject: businessObject,\r\n        });\r\n      }\r\n    };\r\n\r\n    this.execute = function (ctx) {\r\n      ctx.oldLabel = getLabel(ctx.element);\r\n      ctx.oldNumber = getNumber(ctx.element);\r\n      return setText(ctx.element, ctx.newLabel, ctx.newNumber);\r\n    };\r\n\r\n    this.revert = function (ctx) {\r\n      return setText(ctx.element, ctx.oldLabel, ctx.oldNumber);\r\n    };\r\n\r\n    this.postExecute = function (ctx) {\r\n      let element = ctx.element,\r\n        label = element.label || element,\r\n        newLabel = ctx.newLabel,\r\n        newBounds = ctx.newBounds;\r\n\r\n      if (isLabel(label) && newLabel.trim() === \"\") {\r\n        modeling.removeShape(label);\r\n\r\n        return;\r\n      }\r\n\r\n      // ignore internal labels for elements except text annotations\r\n      if (\r\n        !isLabelExternal(element) &&\r\n        !is(element, elementTypes.TEXTANNOTATION)\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      let bo = getBusinessObject(label);\r\n\r\n      let text = bo.name || bo.text;\r\n\r\n      // don't resize without text\r\n      if (!text) {\r\n        return;\r\n      }\r\n\r\n      // resize element based on label _or_ pre-defined bounds\r\n      if (typeof newBounds === \"undefined\") {\r\n        newBounds = textRenderer.getLayoutedBounds(label, text);\r\n      }\r\n\r\n      // setting newBounds to false or _null_ will\r\n      // disable the postExecute resize operation\r\n      if (newBounds) {\r\n        modeling.resizeShape(label, newBounds, NULL_DIMENSIONS);\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nfunction setText(element, text, textNumber) {\r\n  // external label if present\r\n  let label = element.label || element;\r\n\r\n  let number = element.number || element;\r\n\r\n  let labelTarget = element.labelTarget || element;\r\n\r\n  let numberTarget = element.numberTarget || element;\r\n  setLabel(label, text);\r\n  setNumber(number, textNumber);\r\n\r\n  return [label, labelTarget, number, numberTarget];\r\n}\r\n\r\nUpdateLabelHandler.$inject = [\"modeling\", \"textRenderer\", \"commandStack\"];\r\n","import { some } from \"min-dash\";\r\n\r\nexport function is(element, type) {\r\n  const bo = getBusinessObject(element);\r\n\r\n  return bo && typeof bo.$instanceOf == \"function\" && bo.$instanceOf(type);\r\n}\r\n\r\nexport function getBusinessObject(element) {\r\n  return (element && element.businessObject) || element;\r\n}\r\n\r\nexport function isAny(element, types) {\r\n  return some(types, function (t) {\r\n    return is(element, t);\r\n  });\r\n}\r\n\r\nexport function reworkGroupElements(parent, shape) {\r\n  parent.children.slice().forEach((innerShape) => {\r\n    if (innerShape.id !== shape.id) {\r\n      if (innerShape.x >= shape.x && innerShape.x <= shape.x + shape.width) {\r\n        if (innerShape.y >= shape.y && innerShape.y <= shape.y + shape.height) {\r\n          innerShape.parent = shape;\r\n          if (!shape.children.includes(innerShape)) {\r\n            shape.children.push(innerShape);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nexport function undoGroupRework(parent, shape) {\r\n  const superParent = parent.parent;\r\n\r\n  parent.children.remove(shape);\r\n  superParent.children.add(shape);\r\n\r\n  shape.parent = superParent;\r\n\r\n  const svgShape = document.querySelector(\r\n    \"[data-element-id=\" + shape.id + \"]\"\r\n  ).parentElement;\r\n  const svgGroup = svgShape.parentElement;\r\n  const svgGroupParent = svgGroup.parentElement.parentElement;\r\n  svgGroup.removeChild(svgShape);\r\n  svgGroupParent.appendChild(svgShape);\r\n}\r\n","import {\r\n  SVG_LINK,\r\n  TEXTSPAN_DESCRIPTION_HEIGHT,\r\n  TEXTSPAN_TITLE_HEIGHT,\r\n  X_OFFSET_UTIL,\r\n} from \"../../Domain/Export/exportConstants\";\r\n\r\nlet extraHeight = 0;\r\n\r\n// Has to be js File so we can access te correct non-standard HTML-Properties without excessive usage of ts-ignore\r\nexport function createTitleAndDescriptionSVGElement(\r\n  title,\r\n  description,\r\n  xLeft,\r\n  yUp,\r\n  width\r\n) {\r\n  title = title.replace(\"&lt;\", \"\").replace(\"&gt;\", \"\");\r\n\r\n  let titleElement = createTitle(title, width);\r\n  let descriptionElement = createDescription(description, width);\r\n\r\n  // to display the title and description in the SVG-file, we need to add a container for our text-elements\r\n  let insertText =\r\n    '<g class=\"djs-group\"><g class=\"djs-element djs-shape\" style = \"display:block\" transform=\"translate(' +\r\n    (xLeft - 10) +\r\n    \" \" +\r\n    (yUp - extraHeight) +\r\n    ')\"><g class=\"djs-visual\">' +\r\n    titleElement +\r\n    descriptionElement +\r\n    \"</g></g></g>\";\r\n  return { insertText, extraHeight };\r\n}\r\n\r\nfunction createTitle(text, width) {\r\n  let tempCanvas = document.createElement(\"canvas\");\r\n  let ctx = tempCanvas.getContext(\"2d\");\r\n  ctx.font = \"30px Arial\";\r\n\r\n  return createTextSpans(text, width, ctx, 10, TEXTSPAN_TITLE_HEIGHT, 30);\r\n}\r\n\r\nfunction createDescription(text, width) {\r\n  let description = \"\";\r\n  let descriptionParts = text.split(\"<br>\");\r\n\r\n  let tempCanvas = document.createElement(\"canvas\");\r\n  let ctx = tempCanvas.getContext(\"2d\");\r\n  ctx.font = \"12px Arial\";\r\n\r\n  for (let i = 0; i < descriptionParts.length; i++) {\r\n    description += createTextSpans(\r\n      descriptionParts[i],\r\n      width,\r\n      ctx,\r\n      0,\r\n      TEXTSPAN_DESCRIPTION_HEIGHT,\r\n      12\r\n    );\r\n  }\r\n  return description;\r\n}\r\n\r\nfunction createTextSpans(text, width, ctx, yOffset, heightOffset, fontSize) {\r\n  let textSpans = \"\";\r\n  let words = text.split(\" \");\r\n\r\n  let textTag =\r\n    '<text lineHeight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif; font-size: ' +\r\n    fontSize +\r\n    '; font-weight: normal; fill: rgb(0, 0, 0);\">';\r\n\r\n  let textSpan = document.createElementNS(SVG_LINK, \"tspan\");\r\n  let textNode = document.createTextNode(words[0]);\r\n\r\n  textSpan.setAttribute(\"x\", X_OFFSET_UTIL);\r\n  textSpan.setAttribute(\"y\", yOffset + extraHeight);\r\n  textSpan.setAttribute(\"font-size\", fontSize);\r\n  textSpan.appendChild(textNode);\r\n\r\n  for (let j = 1; j < words.length; j++) {\r\n    if (textSpan.firstChild && textSpan.firstChild.data) {\r\n      let len = textSpan.firstChild.data.length;\r\n      textNode.data += \" \" + words[j];\r\n\r\n      if (ctx.measureText(textNode.data).width > width - 16) {\r\n        extraHeight += heightOffset;\r\n        textSpan.firstChild.data = textSpan.firstChild.data.slice(0, len); // remove overflow word\r\n\r\n        textSpans += textTag + textSpan.outerHTML + \"</text>\"; // append line\r\n\r\n        // create new textspan for line break\r\n        textSpan = document.createElementNS(SVG_LINK, \"tspan\");\r\n        textNode = document.createTextNode(words[j]);\r\n        textSpan.setAttribute(\"x\", X_OFFSET_UTIL);\r\n        textSpan.setAttribute(\"y\", yOffset + extraHeight);\r\n        textSpan.appendChild(textNode);\r\n      }\r\n    }\r\n  }\r\n  extraHeight += heightOffset;\r\n\r\n  textSpans += textTag + textSpan.outerHTML + \"</text>\";\r\n  return textSpans;\r\n}\r\n","import { elementTypes } from './elementTypes';\r\n\r\nexport interface BusinessObject {\r\n  $descriptor: any;\r\n  $type: any;\r\n  di: any;\r\n  get: any;\r\n  set: any;\r\n\r\n  id: string;\r\n  name: string;\r\n\r\n  type: string;\r\n\r\n  x: number;\r\n  y: number;\r\n  height: number | undefined;\r\n  width: number | undefined;\r\n  pickedColor: string | undefined;\r\n}\r\n\r\nexport const testBusinessObject: BusinessObject = {\r\n  $descriptor: undefined,\r\n  $type: undefined,\r\n  di: undefined,\r\n  get: undefined,\r\n  set: undefined,\r\n\r\n  id: 'test',\r\n  name: 'test',\r\n\r\n  type: elementTypes.WORKOBJECT,\r\n\r\n  x: 0,\r\n  y: 0,\r\n  height: 38,\r\n  width: 38,\r\n  pickedColor: undefined,\r\n};\r\n","export class Configuration {\r\n  actors: string[];\r\n  workObjects: string[];\r\n\r\n  constructor(actors: string[], workObjects: string[]) {\r\n    this.actors = actors;\r\n    this.workObjects = workObjects;\r\n  }\r\n}\r\n","/** GLOBAL **/\r\nexport const VERSION = '2.0.0-beta.1';\r\n\r\n/** DEFAULT VALUES **/\r\nexport const INITIAL_TITLE = '< title >';\r\nexport const INITIAL_DESCRIPTION = '< description >';\r\nexport const INITIAL_DOMAIN_NAME = '[icons: default]';\r\n\r\n/** LocalStorageTags **/\r\nexport const APPENDED_ICONS_TAG = 'appendedIcons';\r\nexport const DOMAIN_CONFIGURATION_TAG = 'domainConfigurationTag';\r\n\r\n/** AUTOSAVE DEFAULTS **/\r\nexport const DEFAULT_AUTOSAVES_AMOUNT = 5;\r\nexport const DEFAULT_AUTOSAVES_INTERVAL = 5;\r\n\r\n/** SNACKBAR **/\r\nexport const SNACKBAR_DURATION = 2000;\r\nexport const SNACKBAR_SUCCESS = 'snackbar_success';\r\nexport const SNACKBAR_ERROR = 'snackbar_error';\r\nexport const SNACKBAR_INFO = 'snackbar_info';\r\n\r\n/** BPMN_RELEVANT_CONSTANTS **/\r\nexport const IMPLICIT_ROOT_ID = '__implicitroot';\r\n","export class Dictionary {\r\n  private entries: Entry[];\r\n\r\n  constructor() {\r\n    this.entries = [];\r\n  }\r\n\r\n  get length(): number {\r\n    return this.entries.length;\r\n  }\r\n\r\n  all(): Entry[] {\r\n    return this.entries;\r\n  }\r\n\r\n  size(): number {\r\n    return this.entries.length;\r\n  }\r\n\r\n  isEmpty(): boolean {\r\n    return this.entries.length <= 0;\r\n  }\r\n\r\n  has(key: string): boolean {\r\n    return this.entries.some((entry) => entry.key === key);\r\n  }\r\n\r\n  set(key: string, value: any): void {\r\n    if (!this.has(key)) {\r\n      this.entries.push(new Entry(value, key));\r\n    }\r\n  }\r\n\r\n  add(value: any, key: string): void {\r\n    this.set(key, value);\r\n  }\r\n\r\n  putEntry(entry: Entry): void {\r\n    if (!this.has(entry.key)) {\r\n      this.entries.push(new Entry(entry.value, entry.key));\r\n    }\r\n  }\r\n\r\n  keysArray(): string[] {\r\n    return this.entries.map((entry) => entry.key);\r\n  }\r\n\r\n  addEach(object: any): void {\r\n    Object.keys(object).forEach((key) => {\r\n      this.set(key, object[key]);\r\n    });\r\n  }\r\n\r\n  appendDict(dict: Dictionary): void {\r\n    dict.entries.forEach((entry) => this.putEntry(entry));\r\n  }\r\n\r\n  clear(): void {\r\n    this.entries = [];\r\n  }\r\n\r\n  delete(key: string): void {\r\n    this.entries = this.entries.filter((entry) => entry.key !== key);\r\n  }\r\n\r\n  get(key: string): any {\r\n    const found = this.entries.filter((entry) => entry.key === key);\r\n    return found[0] ? found[0].value : null;\r\n  }\r\n\r\n  sort(fn: (a: Entry, b: Entry) => number) {\r\n    this.entries.sort(fn);\r\n  }\r\n\r\n  sortByName() {\r\n    this.entries.sort((a: Entry, b: Entry) => {\r\n      if (a.key.includes('_custom') == b.key.includes('_custom')) {\r\n        if (a.key < b.key) return -1;\r\n        else {\r\n          return 1;\r\n        }\r\n      } else {\r\n        if (a.key.includes('_custom')) {\r\n          return -1;\r\n        } else {\r\n          return 1;\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport class Entry {\r\n  value: any;\r\n  key: string;\r\n\r\n  constructor(value: any, key: string) {\r\n    this.value = value;\r\n    this.key = key;\r\n  }\r\n}\r\n","import { INITIAL_DOMAIN_NAME } from './constants';\r\nimport { testBusinessObject } from './businessObject';\r\nimport { elementTypes } from './elementTypes';\r\nimport { Dictionary } from './dictionary/dictionary';\r\n\r\nexport interface DomainConfiguration {\r\n  name: string;\r\n  actors: Dictionary;\r\n  workObjects: Dictionary;\r\n}\r\n\r\nexport interface DomainConfigurationForExport {\r\n  name: string;\r\n  actors: any;\r\n  workObjects: any;\r\n}\r\n\r\nexport interface CustomDomainConfiguration {\r\n  name: string;\r\n  actors: string[];\r\n  workObjects: string[];\r\n}\r\nconst actor = structuredClone(testBusinessObject);\r\nactor.type = elementTypes.ACTOR;\r\n\r\nexport const testCustomDomainConfiguration: CustomDomainConfiguration = {\r\n  name: INITIAL_DOMAIN_NAME,\r\n  actors: ['Person'],\r\n  workObjects: ['Document'],\r\n};\r\n\r\nexport function fromConfigurationFromFile(configFromFile: {\r\n  name: string;\r\n  actors: { [p: string]: any };\r\n  workObjects: { [p: string]: any };\r\n}) {\r\n  const actorsDict = new Dictionary();\r\n  const workObjectsDict = new Dictionary();\r\n  Object.keys(configFromFile.actors).forEach((key) => {\r\n    actorsDict.add(configFromFile.actors[key], key);\r\n  });\r\n  Object.keys(configFromFile.workObjects).forEach((key) => {\r\n    workObjectsDict.add(configFromFile.workObjects[key], key);\r\n  });\r\n\r\n  return {\r\n    name: configFromFile.name,\r\n    actors: actorsDict,\r\n    workObjects: workObjectsDict,\r\n  };\r\n}\r\n","export enum elementTypes {\r\n  ACTIVITY = 'domainStory:activity',\r\n  CONNECTION = 'domainStory:connection',\r\n  ACTOR = 'domainStory:actor',\r\n  WORKOBJECT = 'domainStory:workObject',\r\n  GROUP = 'domainStory:group',\r\n  TEXTANNOTATION = 'domainStory:textAnnotation',\r\n  DOMAINSTORY = 'domainStory:',\r\n}\r\n","import { Dictionary } from 'src/app/Domain/Common/dictionary/dictionary';\r\nimport { overrideAppendedIcons } from 'src/app/Domain/Domain-Configuration/allIcons';\r\nimport { Configuration } from 'src/app/Domain/Common/configuration';\r\nimport { DomainConfiguration } from 'src/app/Domain/Common/domainConfiguration';\r\nimport { INITIAL_DOMAIN_NAME } from './constants';\r\n\r\nexport class IconConfiguration {\r\n  domainName = INITIAL_DOMAIN_NAME;\r\n\r\n  private allIconDictionary: Dictionary;\r\n\r\n  constructor(allIconDictionary: Dictionary) {\r\n    this.allIconDictionary = allIconDictionary;\r\n  }\r\n\r\n  /**\r\n   * Select the Iconset which you want to use\r\n   */\r\n  getDefaultConf(): Configuration {\r\n    return defaultConf;\r\n  }\r\n\r\n  updateAllIconRegistry(allIconDictionary: Dictionary): void {\r\n    this.allIconDictionary = allIconDictionary;\r\n  }\r\n\r\n  appendSRCFile(\r\n    actors: string[],\r\n    actorsDict: Dictionary,\r\n    workObjects: string[],\r\n    workObjectsDict: Dictionary\r\n  ): void {\r\n    const newAppendedIcons: { [key: string]: any } = {};\r\n\r\n    actors.forEach((name: string) => {\r\n      if (!this.allIconDictionary.has(name)) {\r\n        newAppendedIcons[name] = actorsDict.get(name);\r\n      }\r\n    });\r\n\r\n    workObjects.forEach((name: string) => {\r\n      if (!this.allIconDictionary.has(name)) {\r\n        newAppendedIcons[name] = workObjectsDict.get(name);\r\n      }\r\n    });\r\n    const appen = new Dictionary();\r\n    Object.keys(newAppendedIcons).forEach((key) => {\r\n      appen.set(key, newAppendedIcons[key]);\r\n    });\r\n\r\n    overrideAppendedIcons(appen);\r\n  }\r\n\r\n  createCustomConf(domainConfiguration: DomainConfiguration): Configuration {\r\n    this.domainName = domainConfiguration.name;\r\n\r\n    let actors = domainConfiguration.actors;\r\n    let workObjects = domainConfiguration.workObjects;\r\n\r\n    this.appendSRCFile(\r\n      actors.keysArray(),\r\n      actors,\r\n      workObjects.keysArray(),\r\n      workObjects\r\n    );\r\n\r\n    return new Configuration(actors.keysArray(), workObjects.keysArray());\r\n  }\r\n}\r\n\r\n/* eslint no-unused-vars: 0*/\r\n\r\n/**\r\n * All Icons as one Set\r\n * There are more Icons than fit in the palette.\r\n * This is just for reference\r\n */\r\nconst allIconsConf = {\r\n  actors: ['Person', 'Group', 'System', 'Pet'],\r\n  workObjects: [\r\n    'Place',\r\n    'Flag',\r\n    'World',\r\n    'Water',\r\n    'Store',\r\n    'Theater',\r\n    'Business',\r\n    'Meeting-room',\r\n    'Hotel',\r\n    'Dining',\r\n    'Courthouse',\r\n    'Gas-station',\r\n    'Car',\r\n    'Bus',\r\n    'Train',\r\n    'Truck',\r\n    'Taxi',\r\n    'Bike',\r\n    'Boat',\r\n    'Motorcycle',\r\n    'Plane',\r\n    'Flight-takeoff',\r\n    'Flight-landing',\r\n    'Shuttle',\r\n    'Walking',\r\n    'Traffic',\r\n    'Commute',\r\n    'Document',\r\n    'Folder',\r\n    'Call',\r\n    'Email',\r\n    'Copyright',\r\n    'Briefcase',\r\n    'Attach',\r\n    'Ruler',\r\n    'Sum',\r\n    'Conversation',\r\n    'Update',\r\n    'Cellphone',\r\n    'Speaker-phone',\r\n    'Signal',\r\n    'Key',\r\n    'Pencil',\r\n    'How-To-Reg',\r\n    'Settings',\r\n    'Grid',\r\n    'Label',\r\n    'Receipt',\r\n    'Calendar',\r\n    'Wrench',\r\n    'Headset',\r\n    'Keyboard',\r\n    'Mouse',\r\n    'Microphone',\r\n    'Router',\r\n    'Scanner',\r\n    'Printer',\r\n    'DNS',\r\n    'Security',\r\n    'Cloud',\r\n    'Desktop',\r\n    'Tablet',\r\n    'Assessment',\r\n    'Dashboard',\r\n    'Pie-chart',\r\n    'View-List',\r\n    'Euro',\r\n    'Dollar',\r\n    'Info',\r\n    'Alarm',\r\n    'Problem',\r\n    'Circle-Arrows',\r\n    'Picture-as-PDF',\r\n    'Credit-Card',\r\n    'Shopping',\r\n    'Favorite',\r\n    'Gavel',\r\n    'Blind',\r\n    'Hourglass',\r\n    'Time',\r\n    'Search',\r\n    'Thumb-up',\r\n    'Thumb-down',\r\n    'Thumb-up-down',\r\n    'Couch',\r\n    'Education',\r\n    'Watch',\r\n  ],\r\n};\r\n\r\n/**\r\n * Default Iconset\r\n */\r\nexport const defaultConf = {\r\n  actors: ['Person', 'Group', 'System'],\r\n  workObjects: ['Document', 'Folder', 'Call', 'Email', 'Conversation', 'Info'],\r\n};\r\n","import { ActivityCanvasObject } from '../Common/activityCanvasObject';\r\n\r\nexport class ActivityDialogData {\r\n  activity: ActivityCanvasObject;\r\n  numberIsAllowedMultipleTimes: boolean;\r\n  showNumberFields: boolean;\r\n\r\n  saveFN: any;\r\n\r\n  constructor(\r\n    activity: ActivityCanvasObject,\r\n    numberIsAllowedMultipleTimes: boolean,\r\n    showNumberFields: boolean,\r\n    saveFN: any\r\n  ) {\r\n    this.activity = activity;\r\n    this.numberIsAllowedMultipleTimes = numberIsAllowedMultipleTimes;\r\n    this.showNumberFields = showNumberFields;\r\n    this.saveFN = saveFN;\r\n  }\r\n}\r\n","export class ExportDialogData {\r\n  title: string;\r\n  options: ExportOption[];\r\n\r\n  constructor(title: string, options: ExportOption[]) {\r\n    this.title = title;\r\n    this.options = options;\r\n  }\r\n}\r\n\r\nexport class ExportOption {\r\n  text: string;\r\n  fn: any;\r\n  tooltip: string;\r\n\r\n  constructor(text: string, tooltip: string, fn: any) {\r\n    this.text = text;\r\n    this.tooltip = tooltip;\r\n    this.fn = fn;\r\n  }\r\n}\r\n","export class InfoDialogData {\r\n  title: string;\r\n  infoText: string;\r\n  isInfo: boolean;\r\n  isLink: boolean;\r\n  linkText: string | undefined;\r\n\r\n  constructor(\r\n    title: string,\r\n    infoText: string,\r\n    isInfo: boolean,\r\n    isLink: boolean = false,\r\n    linkText?: string\r\n  ) {\r\n    this.title = title;\r\n    this.infoText = infoText;\r\n    this.isInfo = isInfo;\r\n    this.isLink = isLink;\r\n    this.linkText = linkText;\r\n  }\r\n}\r\n","export const NUMBER_BACKGROUND_COLOR = 'white';\r\nexport const NUMBER_COLOR = 'black';\r\nexport const STROKE_WIDTH = '1.5';\r\n\r\nexport const HIGHLIGHT_NUMBER_BACKGROUNG_COLOR = '#43acbf';\r\nexport const HIGHLIGHT_NUMBER_COLOR = 'black';\r\nexport const HIGHLIGHT_COLOR = 'black';\r\nexport const HIGHLIGHT_STROKE_WIDTH = '4';\r\n","import { Dictionary } from 'src/app/Domain/Common/dictionary/dictionary';\r\n\r\nexport let appendedIcons = new Dictionary();\r\nexport const allIcons = {\r\n  Person:\r\n    '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>',\r\n  Group:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"48\" viewBox=\"0 0 24 26\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.67-3.3-1-4.5-1C5.33 13 1 14.08 1 16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4 4.5h-10v-1.25c0-.54 2.56-1.75 5-1.75s5 1.21 5 1.75v1.25zm9 0H14v-1.25c0-.46-.2-.86-.52-1.22.88-.3 1.96-.53 3.02-.53 2.44 0 5 1.21 5 1.75v1.25zM7.5 12c1.93 0 3.5-1.57 3.5-3.5S9.43 5 7.5 5 4 6.57 4 8.5 5.57 12 7.5 12zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 5.5c1.93 0 3.5-1.57 3.5-3.5S18.43 5 16.5 5 13 6.57 13 8.5s1.57 3.5 3.5 3.5zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z\"/></svg>',\r\n  Pet: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><circle cx=\"4.5\" cy=\"9.5\" r=\"2.5\"/><circle cx=\"9\" cy=\"5.5\" r=\"2.5\"/><circle cx=\"15\" cy=\"5.5\" r=\"2.5\"/><circle cx=\"19.5\" cy=\"9.5\" r=\"2.5\"/><path d=\"M17.34 14.86c-.87-1.02-1.6-1.89-2.48-2.91-.46-.54-1.05-1.08-1.75-1.32-.11-.04-.22-.07-.33-.09-.25-.04-.52-.04-.78-.04s-.53 0-.79.05c-.11.02-.22.05-.33.09-.7.24-1.28.78-1.75 1.32-.87 1.02-1.6 1.89-2.48 2.91-1.31 1.31-2.92 2.76-2.62 4.79.29 1.02 1.02 2.03 2.33 2.32.73.15 3.06-.44 5.54-.44h.18c2.48 0 4.81.58 5.54.44 1.31-.29 2.04-1.31 2.33-2.32.31-2.04-1.3-3.49-2.61-4.8z\"/></svg>',\r\n  Conversation:\r\n    '<svg height=\"48\" viewBox=\"0 0 24 26\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z\"/></svg>',\r\n  World:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-.61.08-1.21.21-1.78L8.99 15v1c0 1.1.9 2 2 2v1.93C7.06 19.43 4 16.07 4 12zm13.89 5.4c-.26-.81-1-1.4-1.9-1.4h-1v-3c0-.55-.45-1-1-1h-6v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41C17.92 5.77 20 8.65 20 12c0 2.08-.81 3.98-2.11 5.4z\"/></svg>',\r\n  Store:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18.36 9l.6 3H5.04l.6-3h12.72M20 4H4v2h16V4zm0 3H4l-1 5v2h1v6h10v-6h4v6h2v-6h1v-2l-1-5zM6 18v-4h6v4H6z\"/></svg>',\r\n  Theater:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm6 10h-4V5h4v14zm4-2h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z\"/></svg>',\r\n  Business:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z\"/></svg>',\r\n  Water:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M17 16.99c-1.35 0-2.2.42-2.95.8-.65.33-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.65.33-1.17.6-2.05.6v1.95c1.35 0 2.2-.42 2.95-.8.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.42 2.95-.8c.65-.33 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8v-1.95c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8zm0-4.45c-1.35 0-2.2.43-2.95.8-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.65.32-1.17.6-2.05.6v1.95c1.35 0 2.2-.43 2.95-.8.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.58.8 2.95.8v-1.95c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8zm2.95-8.08c-.75-.38-1.58-.8-2.95-.8s-2.2.42-2.95.8c-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.37-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.65.33-1.17.6-2.05.6v1.93c1.35 0 2.2-.43 2.95-.8.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8V5.04c-.9 0-1.4-.25-2.05-.58zM17 8.09c-1.35 0-2.2.43-2.95.8-.65.35-1.15.6-2.05.6s-1.4-.25-2.05-.6c-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.65.35-1.15.6-2.05.6v1.95c1.35 0 2.2-.43 2.95-.8.65-.32 1.18-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8V9.49c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8z\"/></svg>',\r\n  Hotel:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M7 14c1.66 0 3-1.34 3-3S8.66 8 7 8s-3 1.34-3 3 1.34 3 3 3zm0-4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm12-3h-8v8H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4zm2 8h-8V9h6c1.1 0 2 .9 2 2v4z\"/></svg>',\r\n  Dining:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M8.1 13.34l2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z\"/></svg>',\r\n  'Gas-station':\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19.77 7.23l.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-.69-.28-1.32-.73-1.77zM12 13.5V19H6v-7h6v1.5zm0-3.5H6V5h6v5zm6 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z\"/></svg>',\r\n  'Meeting-room':\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 19V4h-4V3H5v16H3v2h12V6h2v15h4v-2h-2zm-6 0H7V5h6v14zm-3-8h2v2h-2z\"/></svg>',\r\n  Courthouse:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M6.5 10h-2v7h2v-7zm6 0h-2v7h2v-7zm8.5 9H2v2h19v-2zm-2.5-9h-2v7h2v-7zm-7-6.74L16.71 6H6.29l5.21-2.74m0-2.26L2 6v2h19V6l-9.5-5z\"/></svg>',\r\n  Flag: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z\"/></svg>',\r\n  Place:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zM7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9z\"/><circle cx=\"12\" cy=\"9\" r=\"2.5\"/></svg>',\r\n  Car: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.85 7h10.29l1.08 3.11H5.77L6.85 7zM19 17H5v-5h14v5z\"/><circle cx=\"7.5\" cy=\"14.5\" r=\"1.5\"/><circle cx=\"16.5\" cy=\"14.5\" r=\"1.5\"/></svg>',\r\n  Bus: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2c-4.42 0-8 .5-8 4v10c0 .88.39 1.67 1 2.22V20c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h8v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1.78c.61-.55 1-1.34 1-2.22V6c0-3.5-3.58-4-8-4zm5.66 2.99H6.34C6.89 4.46 8.31 4 12 4s5.11.46 5.66.99zm.34 2V10H6V6.99h12zm-.34 9.74l-.29.27H6.63l-.29-.27C6.21 16.62 6 16.37 6 16v-4h12v4c0 .37-.21.62-.34.73z\"/><circle cx=\"8.5\" cy=\"14.5\" r=\"1.5\"/><circle cx=\"15.5\" cy=\"14.5\" r=\"1.5\"/></svg>',\r\n  Train:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><circle cx=\"8.5\" cy=\"14.5\" r=\"1.5\"/><circle cx=\"15.5\" cy=\"14.5\" r=\"1.5\"/><path d=\"M12 2c-4 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19L6 20.5v.5h2l2-2h4l2 2h2v-.5L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-4-4-8-4zm0 2c3.51 0 4.96.48 5.57 1H6.43c.61-.52 2.06-1 5.57-1zM6 7h5v3H6V7zm12 8.5c0 .83-.67 1.5-1.5 1.5h-9c-.83 0-1.5-.67-1.5-1.5V12h12v3.5zm0-5.5h-5V7h5v3z\"/></svg>',\r\n  Truck:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zm-.5 1.5l1.96 2.5H17V9.5h2.5zM6 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm2.22-3c-.55-.61-1.33-1-2.22-1s-1.67.39-2.22 1H3V6h12v9H8.22zM18 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z\"/></svg>',\r\n  Taxi: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18.92 6.01C18.72 5.42 18.16 5 17.5 5H15V3H9v2H6.5c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.85 7h10.29l1.04 3H5.81l1.04-3zM19 17H5v-4.66l.12-.34h13.77l.11.34V17z\"/><circle cx=\"7.5\" cy=\"14.5\" r=\"1.5\"/><circle cx=\"16.5\" cy=\"14.5\" r=\"1.5\"/></svg>',\r\n  Bike: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M15.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM5 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5zm5.8-10l2.4-2.4.8.8c1.3 1.3 3 2.1 5.1 2.1V9c-1.5 0-2.7-.6-3.6-1.5l-1.9-1.9c-.5-.4-1-.6-1.6-.6s-1.1.2-1.4.6L7.8 8.4c-.4.4-.6.9-.6 1.4 0 .6.2 1.1.6 1.4L11 14v5h2v-6.2l-2.2-2.3zM19 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5z\"/></svg>',\r\n  Boat: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z\"/></svg>',\r\n  Motorcycle:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M12.72 11l-2 2h-.77l-.25-.69c-.18-.48-.42-.92-.72-1.31h3.74m2.69-6H11v2h3.59l2 2H5c-2.8 0-5 2.2-5 5s2.2 5 5 5c2.46 0 4.45-1.69 4.9-4h1.65l2.77-2.77c-.21.54-.32 1.14-.32 1.77 0 2.8 2.2 5 5 5s5-2.2 5-5c0-2.65-1.97-4.77-4.56-4.97L15.41 5zM19 17c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zM5 17c-1.63 0-3-1.37-3-3s1.37-3 3-3c1.28 0 2.4.85 2.82 2H5v2h2.82C7.4 16.15 6.28 17 5 17z\"/></svg>',\r\n  Plane:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z\"/></svg>',\r\n  'Flight-takeoff':\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M2.5 19h19v2h-19v-2zm19.57-9.36c-.21-.8-1.04-1.28-1.84-1.06L14.92 10l-6.9-6.43-1.93.51 4.14 7.17-4.97 1.33-1.97-1.54-1.45.39 2.59 4.49L21 11.49c.81-.23 1.28-1.05 1.07-1.85z\"/></svg>',\r\n  'Flight-landing':\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M2.5 19h19v2h-19v-2zm16.84-3.15c.8.21 1.62-.26 1.84-1.06.21-.8-.26-1.62-1.06-1.84l-5.31-1.42-2.76-9.02L10.12 2v8.28L5.15 8.95l-.93-2.32-1.45-.39v5.17l16.57 4.44z\"/></svg>',\r\n  Shuttle:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M17 5H3c-1.1 0-2 .89-2 2v9h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-6-6zm-2 2h1l3 3h-4V7zM9 7h4v3H9V7zM3 7h4v3H3V7zm3 10.25c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25zm12 0c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25zM21 14h-.78c-.55-.61-1.34-1-2.22-1s-1.67.39-2.22 1H8.22c-.55-.61-1.33-1-2.22-1s-1.67.39-2.22 1H3v-2h18v2z\"/></svg>',\r\n  Walking:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.56-.89-1.68-1.25-2.65-.84L6 8.3V13h2V9.6l1.8-.7\"/></svg>',\r\n  Traffic:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 10h-3V8.86c1.72-.45 3-2 3-3.86h-3V4c0-.55-.45-1-1-1H8c-.55 0-1 .45-1 1v1H4c0 1.86 1.28 3.41 3 3.86V10H4c0 1.86 1.28 3.41 3 3.86V15H4c0 1.86 1.28 3.41 3 3.86V20c0 .55.45 1 1 1h8c.55 0 1-.45 1-1v-1.14c1.72-.45 3-2 3-3.86h-3v-1.14c1.72-.45 3-2 3-3.86zm-5 9H9V5h6v14zm-3-1c.83 0 1.5-.67 1.5-1.5S12.83 15 12 15s-1.5.67-1.5 1.5.67 1.5 1.5 1.5zm0-4.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM12 9c.83 0 1.5-.67 1.5-1.5S12.83 6 12 6s-1.5.67-1.5 1.5S11.17 9 12 9z\"/></svg>',\r\n  Commute:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 4H5C3.34 4 2 5.34 2 7v8c0 1.66 1.34 3 3 3l-1 1v1h1l2-2h2v-5H4V6h9v2h2V7c0-1.66-1.34-3-3-3zM5 14c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm15.57-4.34c-.14-.4-.52-.66-.97-.66h-7.19c-.46 0-.83.26-.98.66l-1.42 4.11v5.51c0 .38.31.72.69.72h.62c.38 0 .68-.38.68-.76V18h8v1.24c0 .38.31.76.69.76h.61c.38 0 .69-.34.69-.72l.01-1.37v-4.14l-1.43-4.11zm-8.16.34h7.19l1.03 3h-9.25l1.03-3zM12 16c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm8 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z\"/></svg>',\r\n  System:\r\n    '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20,18c1.1,0,2-0.9,2-2V6c0-1.1-0.9-2-2-2H4C2.9,4,2,4.9,2,6v10c0,1.1,0.9,2,2,2H0v2h24v-2H20z M4,6h16v10H4V6z\"/></svg>',\r\n  Printer:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 8h-1V3H6v5H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zM8 5h8v3H8V5zm8 12v2H8v-4h8v2zm2-2v-2H6v2H4v-4c0-.55.45-1 1-1h14c.55 0 1 .45 1 1v4h-2z\"/><circle cx=\"18\" cy=\"11.5\" r=\"1\"/></svg>',\r\n  Document:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z\"/></svg>',\r\n  Folder:\r\n    '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"none\" d=\"M0,0h24v24H0V0z\"/><path d=\"M9.17,6l2,2H20v10L4,18V6H9.17 M10,4H4C2.9,4,2.01,4.9,2.01,6L2,18c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V8c0-1.1-0.9-2-2-2 h-8L10,4L10,4z\"/></svg>',\r\n  Call: '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"none\" d=\"M0,0h24v24H0V0z\"/><path d=\"M6.54,5C6.6,5.89,6.75,6.76,6.99,7.59l-1.2,1.2C5.38,7.59,5.12,6.32,5.03,5H6.54 M16.4,17.02c0.85,0.24,1.72,0.39,2.6,0.45 v1.49c-1.32-0.09-2.59-0.35-3.8-0.75L16.4,17.02 M7.5,3H4C3.45,3,3,3.45,3,4c0,9.39,7.61,17,17,17c0.55,0,1-0.45,1-1v-3.49\\tc0-0.55-0.45-1-1-1c-1.24,0-2.45-0.2-3.57-0.57c-0.1-0.04-0.21-0.05-0.31-0.05c-0.26,0-0.51,0.1-0.71,0.29l-2.2,2.2 c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2C9.1,8.31,9.18,7.92,9.07,7.57C8.7,6.45,8.5,5.25,8.5,4C8.5,3.45,8.05,3,7.5,3L7.5,3z\"/></svg>',\r\n  Email:\r\n    '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"none\" d=\"M0,0h24v24H0V0z\"/><path fill-opacity=\"0.9\" d=\"M12,1.95c-5.52,0-10,4.48-10,10s4.48,10,10,10h5v-2h-5c-4.34,0-8-3.66-8-8s3.66-8,8-8s8,3.66,8,8v1.43 c0,0.79-0.71,1.57-1.5,1.57S17,14.17,17,13.38v-1.43c0-2.76-2.24-5-5-5s-5,2.24-5,5s2.24,5,5,5c1.38,0,2.64-0.56,3.54-1.47 c0.65,0.89,1.77,1.47,2.96,1.47c1.97,0,3.5-1.6,3.5-3.57v-1.43C22,6.43,17.52,1.95,12,1.95z M12,14.95c-1.66,0-3-1.34-3-3 s1.34-3,3-3s3,1.34,3,3S13.66,14.95,12,14.95z\"/></svg>',\r\n  Copyright:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M10.08 10.86c.05-.33.16-.62.3-.87s.34-.46.59-.62c.24-.15.54-.22.91-.23.23.01.44.05.63.13.2.09.38.21.52.36s.25.33.34.53.13.42.14.64h1.79c-.02-.47-.11-.9-.28-1.29s-.4-.73-.7-1.01-.66-.5-1.08-.66-.88-.23-1.39-.23c-.65 0-1.22.11-1.7.34s-.88.53-1.2.92-.56.84-.71 1.36S8 11.29 8 11.87v.27c0 .58.08 1.12.23 1.64s.39.97.71 1.35.72.69 1.2.91c.48.22 1.05.34 1.7.34.47 0 .91-.08 1.32-.23s.77-.36 1.08-.63.56-.58.74-.94.29-.74.3-1.15h-1.79c-.01.21-.06.4-.15.58s-.21.33-.36.46-.32.23-.52.3c-.19.07-.39.09-.6.1-.36-.01-.66-.08-.89-.23-.25-.16-.45-.37-.59-.62s-.25-.55-.3-.88-.08-.67-.08-1v-.27c0-.35.03-.68.08-1.01zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/></svg>',\r\n  DNS: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 15v4H5v-4h14m1-2H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 18.5c-.82 0-1.5-.67-1.5-1.5s.68-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM19 5v4H5V5h14m1-2H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 8.5c-.82 0-1.5-.67-1.5-1.5S6.18 5.5 7 5.5s1.5.68 1.5 1.5S7.83 8.5 7 8.5z\"/></svg>',\r\n  Settings:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z\"/></svg>',\r\n  Cellphone:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M7 22h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2zM16 .01L8 0C6.9 0 6 .9 6 2v16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V2c0-1.1-.9-1.99-2-1.99zM16 18H8v-1h8v1zm0-3H8V5h8v10zm0-12H8V2h8v1z\"/></svg>',\r\n  Update:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path d=\"M11 8v5l4.25 2.52.77-1.28-3.52-2.09V8zm10 2V3l-2.64 2.64C16.74 4.01 14.49 3 12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9h-2c0 3.86-3.14 7-7 7s-7-3.14-7-7 3.14-7 7-7c1.93 0 3.68.79 4.95 2.05L14 10h7z\"/></svg>',\r\n  Briefcase:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M14 6V4h-4v2h4zM4 8v11h16V8H4zm16-2c1.11 0 2 .89 2 2v11c0 1.11-.89 2-2 2H4c-1.11 0-2-.89-2-2l.01-11c0-1.11.88-2 1.99-2h4V4c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2h4z\"/></svg>',\r\n  Microphone:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V5zm6 6c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z\"/></svg>',\r\n  Signal:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><circle cx=\"6.18\" cy=\"17.82\" r=\"2.18\"/><path d=\"M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z\"/></svg>',\r\n  Key: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M22 19h-6v-4h-2.68c-1.14 2.42-3.6 4-6.32 4-3.86 0-7-3.14-7-7s3.14-7 7-7c2.72 0 5.17 1.58 6.32 4H24v6h-2v4zm-4-2h2v-4h2v-2H11.94l-.23-.67C11.01 8.34 9.11 7 7 7c-2.76 0-5 2.24-5 5s2.24 5 5 5c2.11 0 4.01-1.34 4.71-3.33l.23-.67H18v4zM7 15c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3zm0-4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z\"/></svg>',\r\n  Pencil:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM5.92 19H5v-.92l9.06-9.06.92.92L5.92 19zM20.71 5.63l-2.34-2.34c-.2-.2-.45-.29-.71-.29s-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41z\"/></svg>',\r\n  Sum: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7V4z\"/></svg>',\r\n  Headset:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 14v4h-2v-4h2M7 14v4H6c-.55 0-1-.45-1-1v-3h2m5-13c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h4v1h-7v2h6c1.66 0 3-1.34 3-3V10c0-4.97-4.03-9-9-9z\"/></svg>',\r\n  Keyboard:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M20 7v10H4V7h16m0-2H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2zm0 3h2v2h-2zM8 8h2v2H8zm0 3h2v2H8zm-3 0h2v2H5zm0-3h2v2H5zm3 6h8v2H8zm6-3h2v2h-2zm0-3h2v2h-2zm3 3h2v2h-2zm0-3h2v2h-2z\"/></svg>',\r\n  Mouse:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 9c-.04-4.39-3.6-7.93-8-7.93S4.04 4.61 4 9v6c0 4.42 3.58 8 8 8s8-3.58 8-8V9zm-2 0h-5V3.16c2.81.47 4.96 2.9 5 5.84zm-7-5.84V9H6c.04-2.94 2.19-5.37 5-5.84zM18 15c0 3.31-2.69 6-6 6s-6-2.69-6-6v-4h12v4z\"/></svg>',\r\n  Router:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M16 4.2c1.5 0 3 .6 4.2 1.7l.8-.8C19.6 3.7 17.8 3 16 3s-3.6.7-5 2.1l.8.8C13 4.8 14.5 4.2 16 4.2zm-3.3 2.5l.8.8c.7-.7 1.6-1 2.5-1s1.8.3 2.5 1l.8-.8c-.9-.9-2.1-1.4-3.3-1.4s-2.4.5-3.3 1.4zM19 13h-2V9h-2v4H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2zm0 6H5v-4h14v4zM6 16h2v2H6zm3.5 0h2v2h-2zm3.5 0h2v2h-2z\"/></svg>',\r\n  Scanner:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19.8 10.7L4.2 5l-.7 1.9L17.6 12H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-5.5c0-.8-.5-1.6-1.2-1.8zM19 18H5v-4h14v4zM6 15h2v2H6zm4 0h8v2h-8z\"/></svg>',\r\n  Security:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z\"/></svg>',\r\n  Desktop:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v2H8v2h8v-2h-2v-2h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H3V4h18v12z\"/></svg>',\r\n  'Speaker-phone':\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M7 7.07L8.43 8.5c.91-.91 2.18-1.48 3.57-1.48s2.66.57 3.57 1.48L17 7.07C15.72 5.79 13.95 5 12 5s-3.72.79-5 2.07zM12 1C8.98 1 6.24 2.23 4.25 4.21l1.41 1.41C7.28 4 9.53 3 12 3s4.72 1 6.34 2.62l1.41-1.41C17.76 2.23 15.02 1 12 1zm2.86 9.01L9.14 10C8.51 10 8 10.51 8 11.14v9.71c0 .63.51 1.14 1.14 1.14h5.71c.63 0 1.14-.51 1.14-1.14v-9.71c.01-.63-.5-1.13-1.13-1.13zM15 20H9v-8h6v8z\"/></svg>',\r\n  Tablet:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M18 0H6C4.34 0 3 1.34 3 3v18c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V3c0-1.66-1.34-3-3-3zm-4 22h-4v-1h4v1zm5.25-3H4.75V3h14.5v16z\"/></svg>',\r\n  Label:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16zM16 17H5V7h11l3.55 5L16 17z\"/></svg>',\r\n  Receipt:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19.5 3.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5zM19 19.09H5V4.91h14v14.18zM6 15h12v2H6zm0-4h12v2H6zm0-4h12v2H6z\"/></svg>',\r\n  Calendar:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\" /><path d=\"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10zm0-12H5V5h14v2zM7 11h5v5H7z\" /></svg>',\r\n  Cloud:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6m0-2C9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96C18.67 6.59 15.64 4 12 4z\"/></svg>',\r\n  Assessment:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 10h2v7H7zm4-3h2v10h-2zm4 6h2v4h-2z\"/></svg>',\r\n  Dashboard:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 5v2h-4V5h4M9 5v6H5V5h4m10 8v6h-4v-6h4M9 17v2H5v-2h4M21 3h-8v6h8V3zM11 3H3v10h8V3zm10 8h-8v10h8V11zm-10 4H3v6h8v-6z\"/></svg>',\r\n  'Pie-chart':\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm7.93 9H13V4.07c3.61.45 6.48 3.32 6.93 6.93zM4 12c0-4.07 3.06-7.44 7-7.93v15.86c-3.94-.49-7-3.86-7-7.93zm9 7.93V13h6.93c-.45 3.61-3.32 6.48-6.93 6.93z\"/></svg>',\r\n  Problem:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z\"/></svg>',\r\n  'Picture-as-PDF':\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm12 6V9c0-.55-.45-1-1-1h-2v5h2c.55 0 1-.45 1-1zm-2-3h1v3h-1V9zm4 2h1v-1h-1V9h1V8h-2v5h1zm-8 0h1c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1H9v5h1v-2zm0-2h1v1h-1V9z\"/></svg>',\r\n  Grid: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z\"/></svg>',\r\n  Watch:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M14.31 2l.41 2.48C13.87 4.17 12.96 4 12 4c-.95 0-1.87.17-2.71.47L9.7 2h4.61m.41 17.52L14.31 22H9.7l-.41-2.47c.84.3 1.76.47 2.71.47.96 0 1.87-.17 2.72-.48M16 0H8l-.95 5.73C5.19 7.19 4 9.45 4 12s1.19 4.81 3.05 6.27L8 24h8l.96-5.73C18.81 16.81 20 14.54 20 12s-1.19-4.81-3.04-6.27L16 0zm-4 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z\"/></svg>',\r\n  Euro: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M15 18.5c-2.51 0-4.68-1.42-5.76-3.5H15v-2H8.58c-.05-.33-.08-.66-.08-1s.03-.67.08-1H15V9H9.24C10.32 6.92 12.5 5.5 15 5.5c1.61 0 3.09.59 4.23 1.57L21 5.3C19.41 3.87 17.3 3 15 3c-3.92 0-7.24 2.51-8.48 6H3v2h3.06c-.04.33-.06.66-.06 1s.02.67.06 1H3v2h3.52c1.24 3.49 4.56 6 8.48 6 2.31 0 4.41-.87 6-2.3l-1.78-1.77c-1.13.98-2.6 1.57-4.22 1.57z\"/></svg>',\r\n  Dollar:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z\"/></svg>',\r\n  Info: '<svg height=\"48\" viewBox=\"0 0 24 26\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z\"/></svg>',\r\n  Alarm:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12.5 8H11v6l4.75 2.85.75-1.23-4-2.37zm4.837-6.19l4.607 3.845-1.28 1.535-4.61-3.843zm-10.674 0l1.282 1.536L3.337 7.19l-1.28-1.536zM12 4c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm0 16c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7z\"/></svg>',\r\n  Wrench:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M22.61 18.99l-9.08-9.08c.93-2.34.45-5.1-1.44-7C9.79.61 6.21.4 3.66 2.26L7.5 6.11 6.08 7.52 2.25 3.69C.39 6.23.6 9.82 2.9 12.11c1.86 1.86 4.57 2.35 6.89 1.48l9.11 9.11c.39.39 1.02.39 1.41 0l2.3-2.3c.4-.38.4-1.01 0-1.41zm-3 1.6l-9.46-9.46c-.61.45-1.29.72-2 .82-1.36.2-2.79-.21-3.83-1.25C3.37 9.76 2.93 8.5 3 7.26l3.09 3.09 4.24-4.24-3.09-3.09c1.24-.07 2.49.37 3.44 1.31 1.08 1.08 1.49 2.57 1.24 3.96-.12.71-.42 1.37-.88 1.96l9.45 9.45-.88.89z\"/></svg>',\r\n  'Circle-Arrows':\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z\"/></svg>',\r\n  'Credit-Card':\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z\"/></svg>',\r\n  Favorite:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z\"/></svg>',\r\n  Gavel:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M1 21h12v2H1v-2zM5.24 8.07l2.83-2.83 14.14 14.14-2.83 2.83L5.24 8.07zM12.32 1l5.66 5.66-2.83 2.83-5.66-5.66L12.32 1zM3.83 9.48l5.66 5.66-2.83 2.83L1 12.31l2.83-2.83z\"/></svg>',\r\n  Blind:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/><circle cx=\"8\" cy=\"14\" r=\"2\"/><circle cx=\"12\" cy=\"8\" r=\"2\"/><circle cx=\"16\" cy=\"14\" r=\"2\"/></svg>',\r\n  Hourglass:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z\"/></svg>',\r\n  Time: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z\"/></svg>',\r\n  Search:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/></svg>',\r\n  Shopping:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M15.55 13c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.66-.11-1.48-.87-1.48H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2h7.45zM6.16 6h12.15l-2.76 5H8.53L6.16 6zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z\"/></svg>',\r\n  'Thumb-up':\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M9 21h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.58 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2zM9 9l4.34-4.34L12 10h9v2l-3 7H9V9zM1 9h4v12H1z\"/></svg>',\r\n  'Thumb-down':\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm0 12l-4.34 4.34L12 14H3v-2l3-7h9v10zm4-12h4v12h-4z\"/></svg>',\r\n  'Thumb-up-down':\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M12 6c0-.55-.45-1-1-1H5.82l.66-3.18.02-.23c0-.31-.13-.59-.33-.8L5.38 0 .44 4.94C.17 5.21 0 5.59 0 6v6.5c0 .83.67 1.5 1.5 1.5h6.75c.62 0 1.15-.38 1.38-.91l2.26-5.29c.07-.17.11-.36.11-.55V6zm-2 1.13L7.92 12H2V6.21l1.93-1.93L3.36 7H10v.13zM22.5 10h-6.75c-.62 0-1.15.38-1.38.91l-2.26 5.29c-.07.17-.11.36-.11.55V18c0 .55.45 1 1 1h5.18l-.66 3.18-.02.24c0 .31.13.59.33.8l.79.78 4.94-4.94c.27-.27.44-.65.44-1.06v-6.5c0-.83-.67-1.5-1.5-1.5zm-.5 7.79l-1.93 1.93.57-2.72H14v-.13L16.08 12H22v5.79z\"/></svg>',\r\n  Couch:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M21 9V7c0-1.65-1.35-3-3-3H6C4.35 4 3 5.35 3 7v2c-1.65 0-3 1.35-3 3v5c0 1.65 1.35 3 3 3h18c1.65 0 3-1.35 3-3v-5c0-1.65-1.35-3-3-3zM5 7c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v2.78c-.61.55-1 1.34-1 2.22v2H6v-2c0-.88-.39-1.67-1-2.22V7zm17 10c0 .55-.45 1-1 1H3c-.55 0-1-.45-1-1v-5c0-.55.45-1 1-1s1 .45 1 1v4h16v-4c0-.55.45-1 1-1s1 .45 1 1v5z\"/></svg>',\r\n  Attach:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z\"/></svg>',\r\n  Ruler:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2v8z\"/></svg>',\r\n  Education:\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z\"/></svg>',\r\n  'How-To-Reg':\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" fill=\"none\" d=\"M0 0h24v24H0z\"/><g fill-rule=\"evenodd\" clip-rule=\"evenodd\"><path d=\"M9 17l3-2.94c-.39-.04-.68-.06-1-.06-2.67 0-8 1.34-8 4v2h9l-3-3zm2-5c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4\"/><path d=\"M15.47 20.5L12 17l1.4-1.41 2.07 2.08 5.13-5.17 1.4 1.41z\"/></g></svg>',\r\n  'View-List':\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path opacity=\".87\" fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M3 5v14h17V5H3zm4 2v2H5V7h2zm-2 6v-2h2v2H5zm0 2h2v2H5v-2zm13 2H9v-2h9v2zm0-4H9v-2h9v2zm0-4H9V7h9v2z\"/></svg>',\r\n};\r\n\r\nexport function getAllStandardIconKeys(): string[] {\r\n  const allIconsDict = new Dictionary();\r\n\r\n  allIconsDict.addEach(allIcons);\r\n\r\n  return allIconsDict.keysArray();\r\n}\r\n\r\nexport function overrideAppendedIcons(newIcons: Dictionary): void {\r\n  appendedIcons = newIcons;\r\n}\r\n","export enum IconFilterEnum {\r\n  ICON_FILTER_ACTOR = 'ICON_FILTER_ACTOR',\r\n  ICON_FILTER_WORKOBJECT = 'ICON_FILTER_WORKOBJECT',\r\n  ICON_FILTER_UNASSIGNED = 'ICON_FILTER_UNASSIGNED',\r\n  ICON_FILTER_NONE = 'ICON_FILTER_NONE',\r\n}\r\n","export class ConfigAndDST {\r\n  domain: any;\r\n  dst: any;\r\n\r\n  constructor(domain: any, dst: any) {\r\n    this.domain = domain;\r\n    this.dst = dst;\r\n  }\r\n}\r\n\r\nexport const testConfigAndDst: ConfigAndDST = {\r\n  domain: JSON.parse(\r\n    '{\"name\":\"\",' +\r\n      '\"actors\":{\"Person\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\r\n      '<path d=\\\\\"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z\\\\\"/>' +\r\n      '<path d=\\\\\"M0 0h24v24H0z\\\\\" fill=\\\\\"none\\\\\"/></svg>\",' +\r\n      '\"Group\":\"<svg xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\" width=\\\\\"48\\\\\" height=\\\\\"48\\\\\" viewBox=\\\\\"0 0 24 26\\\\\">' +\r\n      '<path d=\\\\\"M0 0h24v24H0z\\\\\" fill=\\\\\"none\\\\\"/>' +\r\n      '<path d=\\\\\"M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.67-3.3-1-4.5-1C5.33 13 1 14.08 1 16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4 4.5h-10v-1.25c0-.54 2.56-1.75 5-1.75s5 1.21 5 1.75v1.25zm9 0H14v-1.25c0-.46-.2-.86-.52-1.22.88-.3 1.96-.53 3.02-.53 2.44 0 5 1.21 5 1.75v1.25zM7.5 12c1.93 0 3.5-1.57 3.5-3.5S9.43 5 7.5 5 4 6.57 4 8.5 5.57 12 7.5 12zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 5.5c1.93 0 3.5-1.57 3.5-3.5S18.43 5 16.5 5 13 6.57 13 8.5s1.57 3.5 3.5 3.5zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z\\\\\"/></svg>\",' +\r\n      '\"System\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\r\n      '<path d=\\\\\"M20,18c1.1,0,2-0.9,2-2V6c0-1.1-0.9-2-2-2H4C2.9,4,2,4.9,2,6v10c0,1.1,0.9,2,2,2H0v2h24v-2H20z M4,6h16v10H4V6z\\\\\"/></svg>\"},' +\r\n      '\"workObjects\":{\"Document\":\"<svg xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\" width=\\\\\"24\\\\\" height=\\\\\"24\\\\\" viewBox=\\\\\"0 0 24 26\\\\\">' +\r\n      '<path fill=\\\\\"none\\\\\" d=\\\\\"M0 0h24v24H0V0z\\\\\"/><path d=\\\\\"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z\\\\\"/></svg>\",' +\r\n      '\"Folder\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\r\n      '<path fill=\\\\\"none\\\\\" d=\\\\\"M0,0h24v24H0V0z\\\\\"/>' +\r\n      '<path d=\\\\\"M9.17,6l2,2H20v10L4,18V6H9.17 M10,4H4C2.9,4,2.01,4.9,2.01,6L2,18c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V8c0-1.1-0.9-2-2-2 h-8L10,4L10,4z\\\\\"/></svg>\",' +\r\n      '\"Call\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\r\n      '<path fill=\\\\\"none\\\\\" d=\\\\\"M0,0h24v24H0V0z\\\\\"/><path d=\\\\\"M6.54,5C6.6,5.89,6.75,6.76,6.99,7.59l-1.2,1.2C5.38,7.59,5.12,6.32,5.03,5H6.54 M16.4,17.02c0.85,0.24,1.72,0.39,2.6,0.45 v1.49c-1.32-0.09-2.59-0.35-3.8-0.75L16.4,17.02 M7.5,3H4C3.45,3,3,3.45,3,4c0,9.39,7.61,17,17,17c0.55,0,1-0.45,1-1v-3.49\\\\tc0-0.55-0.45-1-1-1c-1.24,0-2.45-0.2-3.57-0.57c-0.1-0.04-0.21-0.05-0.31-0.05c-0.26,0-0.51,0.1-0.71,0.29l-2.2,2.2 c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2C9.1,8.31,9.18,7.92,9.07,7.57C8.7,6.45,8.5,5.25,8.5,4C8.5,3.45,8.05,3,7.5,3L7.5,3z\\\\\"/></svg>\",' +\r\n      '\"Email\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\"><path fill=\\\\\"none\\\\\" d=\\\\\"M0,0h24v24H0V0z\\\\\"/>' +\r\n      '<path fill-opacity=\\\\\"0.9\\\\\" d=\\\\\"M12,1.95c-5.52,0-10,4.48-10,10s4.48,10,10,10h5v-2h-5c-4.34,0-8-3.66-8-8s3.66-8,8-8s8,3.66,8,8v1.43 c0,0.79-0.71,1.57-1.5,1.57S17,14.17,17,13.38v-1.43c0-2.76-2.24-5-5-5s-5,2.24-5,5s2.24,5,5,5c1.38,0,2.64-0.56,3.54-1.47 c0.65,0.89,1.77,1.47,2.96,1.47c1.97,0,3.5-1.6,3.5-3.57v-1.43C22,6.43,17.52,1.95,12,1.95z M12,14.95c-1.66,0-3-1.34-3-3 s1.34-3,3-3s3,1.34,3,3S13.66,14.95,12,14.95z\\\\\"/></svg>\",' +\r\n      '\"Conversation\":\"<svg height=\\\\\"48\\\\\" viewBox=\\\\\"0 0 24 26\\\\\" width=\\\\\"48\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\r\n      '<path d=\\\\\"M0 0h24v24H0V0z\\\\\" fill=\\\\\"none\\\\\"/><path d=\\\\\"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z\\\\\"/></svg>\",' +\r\n      '\"Info\":\"<svg height=\\\\\"48\\\\\" viewBox=\\\\\"0 0 24 26\\\\\" width=\\\\\"48\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\"><path d=\\\\\"M0 0h24v24H0z\\\\\" fill=\\\\\"none\\\\\"/>' +\r\n      '<path d=\\\\\"M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z\\\\\"/>' +\r\n      '</svg>\"}}'\r\n  ),\r\n  dst:\r\n    '[' +\r\n    '{\"type\":\"domainStory:workObjectDocument\",\"name\":\"\",\"id\":\"shape_3792\",\"$type\":\"Element\",\"di\":{},\"$descriptor\":{},\"pickedColor\":\"black\",\"x\":302,\"y\":102},' +\r\n    '{\"type\":\"domainStory:actorPerson\",\"name\":\"\",\"id\":\"shape_4666\",\"$type\":\"Element\",\"di\":{},\"$descriptor\":{},\"pickedColor\":\"black\",\"x\":103,\"y\":93},' +\r\n    '{\"type\":\"domainStory:activity\",\"name\":\"\",\"id\":\"connection_4884\",\"$type\":\"Element\",\"di\":{},\"$descriptor\":{},\"pickedColor\":\"black\",\"number\":1,' +\r\n    '\"waypoints\":[{\"original\":{\"x\":141,\"y\":131},\"x\":186,\"y\":133},{\"original\":{\"x\":340,\"y\":140},\"x\":302,\"y\":138}],' +\r\n    '\"source\":\"shape_4666\",\"target\":\"shape_3792\"}]',\r\n};\r\n","export const SVG_LINK = 'http://www.w3.org/2000/svg';\r\nexport const X_OFFSET_UTIL = '8';\r\nexport const TEXTSPAN_TITLE_HEIGHT = 30;\r\nexport const TEXTSPAN_DESCRIPTION_HEIGHT = 15;\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AutosaveSettingsComponent } from '../Presentation/Autosave/AutosaveSettings/autosave-settings.component';\r\nimport { AutosaveOptionsComponent } from '../Presentation/Autosave/AutosaveOptions/autosave-options.component';\r\nimport { AutosavedDraftsComponent } from '../Presentation/Autosave/AutosavedDrafts/autosaved-drafts.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MaterialModule } from '../material.module';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AutosaveSettingsComponent,\r\n    AutosaveOptionsComponent,\r\n    AutosavedDraftsComponent,\r\n  ],\r\n  exports: [AutosaveSettingsComponent],\r\n  imports: [CommonModule, FormsModule, MaterialModule],\r\n})\r\nexport class AutosaveSettingsModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HeaderButtonsComponent } from '../Presentation/Header/header-buttons.component';\r\n\r\n@NgModule({\r\n  declarations: [HeaderButtonsComponent],\r\n  exports: [HeaderButtonsComponent],\r\n  imports: [CommonModule],\r\n})\r\nexport class DomainStoryModelerModuleModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { DomainConfigurationComponent } from 'src/app/Presentation/DomainConfiguration/domain-configuration.component';\r\nimport { IconListItemComponent } from '../Presentation/DomainConfiguration/icon-list-item/icon-list-item.component';\r\nimport { DetailsListItemComponent } from '../Presentation/DomainConfiguration/details-list-item/details-list-item.component';\r\nimport { DomainDetailsComponent } from '../Presentation/DomainConfiguration/domain-details/domain-details.component';\r\nimport { GeneralSettingsComponent } from '../Presentation/Settings/General/general-settings.component';\r\nimport { LabelDictionaryComponent } from '../Presentation/LabelDictionary/label-dictionary.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MaterialModule } from '../material.module';\r\nimport { AutosaveSettingsModule } from './autosave-settings.module';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    DomainConfigurationComponent,\r\n    GeneralSettingsComponent,\r\n    LabelDictionaryComponent,\r\n    IconListItemComponent,\r\n    DetailsListItemComponent,\r\n    DomainDetailsComponent,\r\n  ],\r\n  exports: [\r\n    GeneralSettingsComponent,\r\n    DomainConfigurationComponent,\r\n    LabelDictionaryComponent,\r\n  ],\r\n  imports: [AutosaveSettingsModule, CommonModule, FormsModule, MaterialModule],\r\n})\r\nexport class SettingsModule {}\r\n","import { Component } from '@angular/core';\r\nimport { AutosaveConfigurationService } from '../../../Service/Autosave/autosave-configuration.service';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport {\r\n  SNACKBAR_DURATION,\r\n  SNACKBAR_ERROR,\r\n  SNACKBAR_SUCCESS,\r\n} from 'src/app/Domain/Common/constants';\r\n\r\n@Component({\r\n  selector: 'app-autosave-options',\r\n  templateUrl: './autosave-options.component.html',\r\n  styleUrls: ['./autosave-options.component.scss'],\r\n})\r\nexport class AutosaveOptionsComponent {\r\n  constructor(\r\n    protected autosaveConfiguration: AutosaveConfigurationService,\r\n    private snackbar: MatSnackBar\r\n  ) {}\r\n\r\n  save(activated: boolean, amount: number, interval: number) {\r\n    if (\r\n      this.autosaveConfiguration.setConfiguration({\r\n        activated,\r\n        amount,\r\n        interval,\r\n      })\r\n    ) {\r\n      this.snackbar.open('Settings for Autosave saved', undefined, {\r\n        duration: SNACKBAR_DURATION,\r\n        panelClass: SNACKBAR_SUCCESS,\r\n      });\r\n    } else {\r\n      this.snackbar.open(\r\n        'Unable to save settings for Autosave - please try again',\r\n        undefined,\r\n        {\r\n          duration: 2 * SNACKBAR_DURATION,\r\n          panelClass: SNACKBAR_ERROR,\r\n        }\r\n      );\r\n    }\r\n  }\r\n}\r\n","<mat-card *ngIf=\"autosaveConfiguration.configuration$ | async as configuration\">\r\n  <mat-card-header>\r\n    <mat-card-title>Autosave Options</mat-card-title>\r\n  </mat-card-header>\r\n  <mat-card-content class=\"cardContent\">\r\n    <div class=\"alignSelfCenter\">\r\n      <input #activated type=\"checkbox\" [checked]=\"configuration.activated\" />\r\n      <mat-label>Enabled</mat-label>\r\n    </div>\r\n    <div class=\"inputContainer\">\r\n      <mat-label>Interval</mat-label>\r\n      <input\r\n        #interval\r\n        class=\"numberInput\"\r\n        min=\"1\"\r\n        type=\"number\"\r\n        [value]=\"configuration.interval\"\r\n      />\r\n    </div>\r\n    <div class=\"inputContainer\">\r\n      <mat-label>Amount</mat-label>\r\n      <input\r\n        #amount\r\n        class=\"numberInput\"\r\n        min=\"1\"\r\n        type=\"number\"\r\n        [value]=\"configuration.amount\"\r\n      />\r\n    </div>\r\n    <button\r\n      class=\"saveButton\"\r\n      mat-raised-button\r\n      color=\"primary\"\r\n      (click)=\"save(activated.checked, +amount.value, +interval.value)\"\r\n    >\r\n      Apply\r\n    </button>\r\n  </mat-card-content>\r\n</mat-card>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-autosave-settings',\r\n  templateUrl: './autosave-settings.component.html',\r\n  styleUrls: ['./autosave-settings.component.scss'],\r\n})\r\nexport class AutosaveSettingsComponent {}\r\n","<app-autosave-options />\r\n<app-autosaved-drafts />\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AutosaveService } from '../../../Service/Autosave/autosave.service';\r\nimport { Draft } from '../../../Domain/Autosave/draft';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport {\r\n  SNACKBAR_DURATION,\r\n  SNACKBAR_SUCCESS,\r\n} from 'src/app/Domain/Common/constants';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-autosaved-drafts',\r\n  templateUrl: './autosaved-drafts.component.html',\r\n  styleUrls: ['./autosaved-drafts.component.scss'],\r\n})\r\nexport class AutosavedDraftsComponent implements OnInit {\r\n  drafts: Draft[] = [];\r\n  subscription: Subscription;\r\n\r\n  constructor(\r\n    private autosaveService: AutosaveService,\r\n    private snackbar: MatSnackBar\r\n  ) {\r\n    this.subscription = this.autosaveService.autosavedDraftsChanged$.subscribe(\r\n      () => this.initDrafts()\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initDrafts();\r\n  }\r\n\r\n  initDrafts() {\r\n    this.drafts = this.autosaveService.loadCurrentDrafts();\r\n  }\r\n\r\n  loadDraft(draft: Draft): void {\r\n    this.autosaveService.loadDraft(draft);\r\n    this.snackbar.open('Draft loaded', undefined, {\r\n      duration: SNACKBAR_DURATION,\r\n      panelClass: SNACKBAR_SUCCESS,\r\n    });\r\n  }\r\n\r\n  removeAllDrafts() {\r\n    this.autosaveService.removeAllDrafts();\r\n  }\r\n}\r\n","<mat-accordion>\r\n  <mat-expansion-panel>\r\n    <mat-expansion-panel-header>\r\n      <mat-panel-title> Autosaves </mat-panel-title>\r\n      <mat-panel-description>\r\n        {{ drafts.length ? drafts.length : \"no\" }}\r\n        {{ drafts.length > 1 ? \"drafts\" : \"draft\" }} available\r\n      </mat-panel-description>\r\n    </mat-expansion-panel-header>\r\n    <div class=\"items\" *ngIf=\"drafts.length; else noDrafts\">\r\n      <div *ngFor=\"let draft of drafts\" class=\"item border-bottom\">\r\n        <div>\r\n          <div class=\"item-title\">{{ draft.title }}</div>\r\n          <div class=\"item-date\">{{ draft.date }}</div>\r\n        </div>\r\n        <button\r\n          class=\"item-button\"\r\n          mat-raised-button\r\n          color=\"primary\"\r\n          (click)=\"loadDraft(draft)\"\r\n        >\r\n          Load Draft\r\n        </button>\r\n      </div>\r\n      <div class=\"item\">\r\n        <div></div>\r\n        <button\r\n          class=\"item-button\"\r\n          mat-raised-button\r\n          color=\"primary\"\r\n          (click)=\"removeAllDrafts()\"\r\n        >\r\n          Remove All Drafts\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </mat-expansion-panel>\r\n</mat-accordion>\r\n\r\n<ng-template #noDrafts>No drafts found.</ng-template>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ModelerService } from '../../Service/Modeler/modeler.service';\r\n\r\n@Component({\r\n  selector: 'app-modeler',\r\n  templateUrl: './modeler.component.html',\r\n  styleUrls: ['./modeler.component.scss'],\r\n})\r\nexport class ModelerComponent implements OnInit {\r\n  constructor(private modelerService: ModelerService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.modelerService.postInit();\r\n  }\r\n}\r\n","<div id=\"canvas\"></div>\r\n","import { AfterViewInit, Component, Inject, OnInit } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { UntypedFormBuilder, UntypedFormGroup } from '@angular/forms';\r\nimport { ActivityDialogData } from 'src/app/Domain/Dialog/activityDialogData';\r\nimport { ActivityCanvasObject } from '../../../Domain/Common/activityCanvasObject';\r\n\r\n@Component({\r\n  selector: 'app-activity-dialog',\r\n  templateUrl: './activity-dialog.component.html',\r\n  styleUrls: ['./activity-dialog.component.scss'],\r\n})\r\nexport class ActivityDialogComponent {\r\n  form: UntypedFormGroup;\r\n  activityLabel: string;\r\n  activityNumber: number | undefined;\r\n  numberIsAllowedMultipleTimes: boolean;\r\n  showNumberFields: boolean;\r\n  activity: ActivityCanvasObject;\r\n\r\n  saveFN: any;\r\n\r\n  constructor(\r\n    private fb: UntypedFormBuilder,\r\n    private dialogRef: MatDialogRef<ActivityDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) data: ActivityDialogData\r\n  ) {\r\n    this.activity = data.activity;\r\n    this.activityLabel = data.activity.businessObject.name;\r\n    this.numberIsAllowedMultipleTimes = data.numberIsAllowedMultipleTimes;\r\n    this.activityNumber = data.activity.businessObject.number;\r\n    this.showNumberFields = data.showNumberFields;\r\n\r\n    this.saveFN = data.saveFN;\r\n\r\n    this.form = this.fb.group({\r\n      activityLabel: [this.activityLabel, []],\r\n      activityNumber: [this.activityNumber, []],\r\n      multipleNumbers: [this.numberIsAllowedMultipleTimes, []],\r\n    });\r\n  }\r\n\r\n  onSubmit(): void {\r\n    this.numberIsAllowedMultipleTimes = !this.numberIsAllowedMultipleTimes;\r\n    this.form.patchValue({\r\n      multipleNumbers: this.numberIsAllowedMultipleTimes,\r\n    });\r\n  }\r\n\r\n  save(): void {\r\n    this.saveFN({\r\n      activity: this.activity,\r\n      ...this.form.value,\r\n    });\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n","<mat-dialog-content>\r\n  <h2>Edit Activity</h2>\r\n  <form [formGroup]=\"form\">\r\n    <div [hidden]=\"!showNumberFields\">\r\n      <mat-form-field class=\"shortWidth\">\r\n        <mat-label>Number</mat-label>\r\n        <input matInput type=\"number\" formControlName=\"activityNumber\" />\r\n      </mat-form-field>\r\n      <input\r\n        type=\"checkbox\"\r\n        formControlName=\"multipleNumbers\"\r\n        (change)=\"onSubmit()\"\r\n      />\r\n      multiple\r\n    </div>\r\n    <mat-form-field class=\"fullWidth\">\r\n      <mat-label>Label</mat-label>\r\n      <textarea\r\n        matInput\r\n        type=\"text\"\r\n        formControlName=\"activityLabel\"\r\n        autofocus\r\n        cdkFocusInitial\r\n      ></textarea>\r\n    </mat-form-field>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions>\r\n  <button mat-flat-button (click)=\"close()\">Cancel</button>\r\n  <button mat-flat-button color=\"primary\" (click)=\"save()\">Save</button>\r\n</mat-dialog-actions>\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { ExportDialogData } from 'src/app/Domain/Dialog/exportDialogData';\r\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\r\n\r\n@Component({\r\n  selector: 'app-export-dialog',\r\n  templateUrl: './export-dialog.component.html',\r\n  styleUrls: ['./export-dialog.component.scss'],\r\n})\r\nexport class ExportDialogComponent implements OnInit {\r\n  title: string;\r\n  options: {\r\n    text: string;\r\n    tooltip: string;\r\n    fn: any;\r\n  }[];\r\n  withTitle: BehaviorSubject<boolean>;\r\n  useWhiteBackground: BehaviorSubject<boolean>;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<ExportDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) data: ExportDialogData\r\n  ) {\r\n    this.withTitle = new BehaviorSubject<boolean>(true);\r\n    this.useWhiteBackground = new BehaviorSubject<boolean>(true);\r\n    this.title = data.title;\r\n    this.options = data.options;\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n\r\n  doOption(i: number): void {\r\n    this.options[i].fn(this.withTitle.value, this.useWhiteBackground.value);\r\n    this.close();\r\n  }\r\n\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  updateWithTitle($event: Event) {\r\n    // @ts-ignore\r\n    this.withTitle.next($event.target.checked);\r\n  }\r\n\r\n  updateUseWhiteBackground($event: Event) {\r\n    // @ts-ignore\r\n    this.useWhiteBackground.next($event.target.checked);\r\n  }\r\n}\r\n","<mat-dialog-content>\r\n  <h2>{{ title }}</h2>\r\n  <label>\r\n    <input\r\n      type=\"checkbox\"\r\n      [checked]=\"withTitle | async\"\r\n      (change)=\"updateWithTitle($event)\"\r\n    />\r\n    Add title and description to image\r\n  </label>\r\n  <br>\r\n  <label>\r\n    <input\r\n      type=\"checkbox\"\r\n      [checked]=\"useWhiteBackground | async\"\r\n      (change)=\"updateUseWhiteBackground($event)\"\r\n    />\r\n    Add white background to SVG (default: transparent)\r\n  </label>\r\n</mat-dialog-content>\r\n<mat-dialog-actions>\r\n  <br />\r\n\r\n  <div>\r\n    <button mat-flat-button (click)=\"close()\">Cancel</button>\r\n    <button\r\n      *ngFor=\"let option of options; let i = index\"\r\n      mat-stroked-button\r\n      class=\"mr-1\"\r\n      [title]=\"option.tooltip\"\r\n      (click)=\"doOption(i)\"\r\n    >\r\n      {{ option.text }}\r\n    </button>\r\n  </div>\r\n</mat-dialog-actions>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { UntypedFormBuilder, UntypedFormGroup } from '@angular/forms';\r\nimport { TitleService } from 'src/app/Service/Title/title.service';\r\n\r\n@Component({\r\n  selector: 'app-header-dialog',\r\n  templateUrl: './header-dialog.component.html',\r\n  styleUrls: ['./header-dialog.component.scss'],\r\n})\r\nexport class HeaderDialogComponent implements OnInit {\r\n  form: UntypedFormGroup;\r\n  title: string;\r\n  description: string;\r\n\r\n  constructor(\r\n    private fb: UntypedFormBuilder,\r\n    private dialogRef: MatDialogRef<HeaderDialogComponent>,\r\n    private titleService: TitleService\r\n  ) {\r\n    this.title =\r\n      this.titleService.getTitle() === '< name of this Domain Story >'\r\n        ? ''\r\n        : this.titleService.getTitle();\r\n    this.description = this.titleService.getDescription();\r\n\r\n    this.form = this.fb.group({\r\n      title: [this.title, []],\r\n      description: [this.description, []],\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n\r\n  save(): void {\r\n    this.titleService.updateTitleAndDescription(\r\n      this.form.get('title')?.value,\r\n      this.form.get('description')?.value,\r\n      true\r\n    );\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n","<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <mat-form-field class=\"dialogWidth\">\r\n      <mat-label>Title</mat-label>\r\n      <input matInput type=\"text\" formControlName=\"title\" />\r\n    </mat-form-field>\r\n    <br />\r\n    <mat-form-field class=\"dialogWidth\">\r\n      <mat-label>Description</mat-label>\r\n      <textarea\r\n        maxlength=\"2000\"\r\n        matInput\r\n        class=\"descriptionInput\"\r\n        formControlName=\"description\"\r\n      ></textarea>\r\n    </mat-form-field>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions>\r\n  <button mat-flat-button (click)=\"close()\">Cancel</button>\r\n  <button mat-flat-button color=\"primary\" (click)=\"save()\">Save</button>\r\n</mat-dialog-actions>\r\n","import { AfterViewInit, Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { InfoDialogData } from 'src/app/Domain/Dialog/infoDialogData';\r\n\r\n@Component({\r\n  selector: 'app-info-dialog',\r\n  templateUrl: './info-dialog.component.html',\r\n  styleUrls: ['./info-dialog.component.scss'],\r\n})\r\nexport class InfoDialogComponent implements AfterViewInit {\r\n  title: string;\r\n  infoText: string;\r\n  showConfirmButton: boolean;\r\n  hasLink: boolean;\r\n  linkText: string;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<InfoDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) data: InfoDialogData\r\n  ) {\r\n    this.title = data.title;\r\n    this.infoText = data.infoText;\r\n    this.showConfirmButton = !data.isInfo;\r\n    this.hasLink = data.isLink;\r\n    this.linkText = data.linkText || '';\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    const span = document.getElementsByClassName(\r\n      'readOnlyText'\r\n    )[0] as HTMLTextAreaElement;\r\n    span.style.height = span.scrollHeight + 'px';\r\n  }\r\n\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n","<mat-dialog-content class=\"content\">\r\n  <h2 id=\"info-dialog-title\">{{ title }}</h2>\r\n  <span class=\"readOnlyText\" *ngIf=\"infoText != ''\">{{ infoText }} </span>\r\n  <a *ngIf=\"hasLink\" href=\"{{ linkText }}\">{{ linkText }}</a>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions *ngIf=\"showConfirmButton\">\r\n  <button class=\"mat-raised-button\" (click)=\"close()\">Close</button>\r\n</mat-dialog-actions>\r\n","import { Component } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'app-label-dictionary-dialog',\r\n  templateUrl: './label-dictionary-dialog.component.html',\r\n  styleUrls: ['./label-dictionary-dialog.component.scss'],\r\n})\r\nexport class LabelDictionaryDialogComponent {\r\n  constructor(\r\n    private dialogRef: MatDialogRef<LabelDictionaryDialogComponent>\r\n  ) {}\r\n\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n","<mat-dialog-content>\r\n  <h2>Label Dictionary</h2>\r\n  <app-label-dictionary (closeEmitter)=\"close()\"></app-label-dictionary>\r\n</mat-dialog-content>\r\n","import { AfterViewChecked, Component, Input } from '@angular/core';\r\nimport { IconListItem } from '../../../Domain/Domain-Configuration/iconListItem';\r\n\r\n@Component({\r\n  selector: 'app-details-list-item',\r\n  templateUrl: './details-list-item.component.html',\r\n  styleUrls: ['./details-list-item.component.scss'],\r\n})\r\nexport class DetailsListItemComponent implements AfterViewChecked {\r\n  @Input()\r\n  icon!: IconListItem;\r\n\r\n  private iconInitiated = false;\r\n\r\n  get id(): string {\r\n    return (\r\n      'domain-configuration-details-icon-' +\r\n      this.icon.name.toLowerCase() +\r\n      '-' +\r\n      (this.icon.isWorkObject ? 'workobject' : 'actor')\r\n    );\r\n  }\r\n\r\n  get name(): string {\r\n    return this.icon.name;\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    this.createIcon();\r\n  }\r\n\r\n  private createIcon(): void {\r\n    const img = document.getElementById(this.id) as HTMLImageElement;\r\n    if (img && !this.iconInitiated) {\r\n      img.src = '' + this.icon.svg;\r\n      this.iconInitiated = true;\r\n    }\r\n  }\r\n}\r\n","<div class=\"detailsListItem\">\r\n  <img id=\"{{ id }}\" class=\"icon\" alt=\"{{ name }}\" [src]=\"icon.svg\" />\r\n  <mat-label class=\"iconName\">{{ icon.name }}</mat-label>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n  CustomDomainConfiguration,\r\n  fromConfigurationFromFile,\r\n} from 'src/app/Domain/Common/domainConfiguration';\r\nimport { DomainConfigurationService } from 'src/app/Service/DomainConfiguration/domain-configuration.service';\r\nimport { IconDictionaryService } from 'src/app/Service/DomainConfiguration/icon-dictionary.service';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { Dictionary } from 'src/app/Domain/Common/dictionary/dictionary';\r\nimport { sanitizeIconName } from 'src/app/Utils/sanitizer';\r\nimport { IconFilterEnum } from '../../Domain/Domain-Configuration/iconFilterEnum';\r\nimport { DomainCustomizationService } from '../../Service/DomainConfiguration/domain-customization.service';\r\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\r\n\r\n@Component({\r\n  selector: 'app-domain-configuration',\r\n  templateUrl: './domain-configuration.component.html',\r\n  styleUrls: ['./domain-configuration.component.scss'],\r\n})\r\nexport class DomainConfigurationComponent implements OnInit {\r\n  private domainConfigurationTypes: CustomDomainConfiguration;\r\n\r\n  filter = new BehaviorSubject<IconFilterEnum>(IconFilterEnum.ICON_FILTER_NONE);\r\n\r\n  selectedActors = new BehaviorSubject<string[]>([]);\r\n  selectedWorkobjects = new BehaviorSubject<string[]>([]);\r\n\r\n  allIcons: BehaviorSubject<Dictionary>;\r\n  allIconNames = new BehaviorSubject<string[]>([]);\r\n  allFilteredIconNames = new BehaviorSubject<string[]>([]);\r\n\r\n  constructor(\r\n    private configurationService: DomainConfigurationService,\r\n    private iconDictionaryService: IconDictionaryService,\r\n    private domainCustomizationService: DomainCustomizationService,\r\n    private elementRegistryService: ElementRegistryService\r\n  ) {\r\n    this.domainConfigurationTypes =\r\n      this.domainCustomizationService.getDomainConfiguration().value;\r\n\r\n    this.allIcons = new BehaviorSubject(\r\n      this.iconDictionaryService.getFullDictionary()\r\n    );\r\n    this.allIcons.subscribe((allIcons) => {\r\n      this.allIconNames.next(allIcons.keysArray().sort(this.sortByName));\r\n    });\r\n\r\n    this.selectedActors = this.domainCustomizationService.selectedActors$;\r\n    this.selectedWorkobjects =\r\n      this.domainCustomizationService.selectedWorkobjects$;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.filter.subscribe((type) => {\r\n      let allFiltered = this.getFilteredNamesForType(type);\r\n      this.allFilteredIconNames.next(allFiltered.sort(this.sortByName));\r\n    });\r\n  }\r\n\r\n  private sortByName(a: string, b: string): number {\r\n    if (a.includes('_custom') == b.includes('_custom')) {\r\n      if (a < b) return -1;\r\n      else {\r\n        return 1;\r\n      }\r\n    } else {\r\n      if (a.includes('_custom')) {\r\n        return -1;\r\n      } else {\r\n        return 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Default Domain **/\r\n  loadMinimalIconConfigurationWithDefaultIcons(): void {\r\n    this.domainCustomizationService.resetDomain();\r\n  }\r\n\r\n  loadInitialConfiguration(): void {\r\n    this.domainCustomizationService.cancel();\r\n  }\r\n\r\n  /** Persist Domain **/\r\n  saveDomain(): void {\r\n    this.domainCustomizationService.saveDomain(\r\n      this.elementRegistryService.getUsedIcons()\r\n    );\r\n  }\r\n\r\n  exportDomain(): void {\r\n    this.domainCustomizationService.exportDomain();\r\n  }\r\n\r\n  /** Add Custom Icon **/\r\n  startIconUpload(): void {\r\n    document.getElementById('importIcon')?.click();\r\n  }\r\n\r\n  importIcon(): void {\r\n    // @ts-ignore\r\n    const files = document.getElementById('importIcon').files;\r\n    for (let iconInputFile of files) {\r\n      const reader = new FileReader();\r\n      const name = sanitizeIconName(iconInputFile.name);\r\n      const iconName = name + '_custom';\r\n\r\n      reader.onloadend = (e: ProgressEvent<FileReader>) => {\r\n        if (e.target) {\r\n          const src: string = e.target.result as unknown as string;\r\n          this.iconDictionaryService.addIMGToIconDictionary(src, iconName);\r\n          this.iconDictionaryService.registerIconForBPMN(iconName, src);\r\n\r\n          this.allIcons.next(this.iconDictionaryService.getFullDictionary());\r\n          this.filter.next(this.filter.value);\r\n\r\n          this.domainCustomizationService.addNewIcon(iconName);\r\n        }\r\n      };\r\n      reader.readAsDataURL(iconInputFile);\r\n    }\r\n  }\r\n\r\n  /** Import Domain **/\r\n  startDomainImport(): void {\r\n    document.getElementById('importDomain')?.click();\r\n  }\r\n\r\n  importDomain(): void {\r\n    // @ts-ignore\r\n    const domainInputFile = document.getElementById('importDomain').files[0];\r\n    const reader = new FileReader();\r\n\r\n    reader.onloadend = (e: ProgressEvent<FileReader>) => {\r\n      const configFromFile = JSON.parse(\r\n        e.target?.result as unknown as string\r\n      ) as {\r\n        name: string;\r\n        actors: { [key: string]: any };\r\n        workObjects: { [key: string]: any };\r\n      };\r\n      const config = fromConfigurationFromFile(configFromFile);\r\n      this.configurationService.loadConfiguration(config, false);\r\n\r\n      this.domainCustomizationService.importConfiguration(config);\r\n    };\r\n\r\n    reader.readAsText(domainInputFile);\r\n  }\r\n\r\n  /** Filter **/\r\n  filterForActors(): void {\r\n    if (this.filter.value !== IconFilterEnum.ICON_FILTER_ACTOR) {\r\n      this.filter.next(IconFilterEnum.ICON_FILTER_ACTOR);\r\n    } else {\r\n      this.filter.next(IconFilterEnum.ICON_FILTER_NONE);\r\n    }\r\n  }\r\n\r\n  filterForWorkobjects(): void {\r\n    if (this.filter.value !== IconFilterEnum.ICON_FILTER_WORKOBJECT) {\r\n      this.filter.next(IconFilterEnum.ICON_FILTER_WORKOBJECT);\r\n    } else {\r\n      this.filter.next(IconFilterEnum.ICON_FILTER_NONE);\r\n    }\r\n  }\r\n\r\n  filterForUnassigned(): void {\r\n    if (this.filter.value !== IconFilterEnum.ICON_FILTER_UNASSIGNED) {\r\n      this.filter.next(IconFilterEnum.ICON_FILTER_UNASSIGNED);\r\n    } else {\r\n      this.filter.next(IconFilterEnum.ICON_FILTER_NONE);\r\n    }\r\n  }\r\n\r\n  filterByNameAndType($event: any) {\r\n    const filteredByNameAndType = this.getFilteredNamesForType(\r\n      this.filter.value\r\n    ).filter((name) =>\r\n      name.toLowerCase().includes($event.target.value.toLowerCase())\r\n    );\r\n    this.allFilteredIconNames.next(filteredByNameAndType.sort(this.sortByName));\r\n  }\r\n\r\n  private getFilteredNamesForType(type: IconFilterEnum): string[] {\r\n    let allFiltered: string[] = [];\r\n    switch (type) {\r\n      case IconFilterEnum.ICON_FILTER_NONE:\r\n        allFiltered = this.allIconNames.value;\r\n        break;\r\n      case IconFilterEnum.ICON_FILTER_ACTOR:\r\n        allFiltered = this.allIconNames.value.filter((name) =>\r\n          this.domainCustomizationService.isIconActor(name)\r\n        );\r\n        break;\r\n      case IconFilterEnum.ICON_FILTER_WORKOBJECT:\r\n        allFiltered = this.allIconNames.value.filter((name) =>\r\n          this.domainCustomizationService.isIconWorkObject(name)\r\n        );\r\n        break;\r\n      case IconFilterEnum.ICON_FILTER_UNASSIGNED:\r\n        allFiltered = this.allIconNames.value.filter(\r\n          (name) =>\r\n            !this.domainCustomizationService.isIconActor(name) &&\r\n            !this.domainCustomizationService.isIconWorkObject(name)\r\n        );\r\n        break;\r\n    }\r\n    return allFiltered;\r\n  }\r\n}\r\n","<div class=\"content\">\r\n  <div>\r\n    <div class=\"header\">\r\n      <div class=\"buttons\">\r\n        <button mat-button title=\"Upload Icon\" (click)=\"startIconUpload()\">\r\n          <span class=\"material-icons-outlined materialIconButton\">upload</span>\r\n          <input\r\n            type=\"file\"\r\n            multiple\r\n            accept=\".svg, image/png, image/jpeg, image/gif, image/bpmn\"\r\n            style=\"display: none\"\r\n            id=\"importIcon\"\r\n            name=\"file\"\r\n            onclick=\"this.value=null\"\r\n            (change)=\"importIcon()\"\r\n          />\r\n        </button>\r\n        <button\r\n          mat-button\r\n          class=\"button\"\r\n          title=\"Reset to default icon set\"\r\n          (click)=\"loadMinimalIconConfigurationWithDefaultIcons()\"\r\n        >\r\n          <span class=\"material-icons-outlined materialIconButton\"> home </span>\r\n        </button>\r\n      </div>\r\n      <div class=\"searchbar\">\r\n        <div></div>\r\n        <div>Filter:</div>\r\n        <button\r\n          mat-button\r\n          [class.activeNone]=\"(filter | async) === 'ICON_FILTER_UNASSIGNED'\"\r\n          title=\"Unassigned Icons\"\r\n          (click)=\"filterForUnassigned()\"\r\n        >\r\n          <span>None</span>\r\n        </button>\r\n        <div></div>\r\n        <button\r\n          mat-button\r\n          [class.activeActor]=\"(filter | async) === 'ICON_FILTER_ACTOR'\"\r\n          title=\"Actors\"\r\n          (click)=\"filterForActors()\"\r\n        >\r\n          <span>Actors</span>\r\n        </button>\r\n        <div></div>\r\n        <button\r\n          mat-button\r\n          [class.activeWorkObject]=\"\r\n            (filter | async) === 'ICON_FILTER_WORKOBJECT'\r\n          \"\r\n          title=\"Workobjects\"\r\n          (click)=\"filterForWorkobjects()\"\r\n        >\r\n          <span>Workobjects</span>\r\n        </button>\r\n        <div></div>\r\n        <input\r\n          class=\"textInput\"\r\n          matInput\r\n          type=\"text\"\r\n          placeholder=\"Filter by name\"\r\n          (input)=\"filterByNameAndType($event)\"\r\n        />\r\n      </div>\r\n      <div class=\"saveButtons\">\r\n        <button mat-button title=\"Export icon set\" (click)=\"exportDomain()\">\r\n          <span class=\"material-icons-outlined materialIconButton\"\r\n            >archive</span\r\n          >\r\n        </button>\r\n        <button\r\n          mat-button\r\n          title=\"Import icon set\"\r\n          (click)=\"startDomainImport()\"\r\n        >\r\n          <span class=\"material-icons-outlined materialIconButton\"\r\n            >unarchive</span\r\n          >\r\n          <input\r\n            type=\"file\"\r\n            accept=\".domain\"\r\n            style=\"display: none\"\r\n            id=\"importDomain\"\r\n            name=\"file\"\r\n            onclick=\"this.value=null\"\r\n            (change)=\"importDomain()\"\r\n          />\r\n        </button>\r\n        <div class=\"divider\"></div>\r\n        <button\r\n          mat-button\r\n          title=\"Cancel changes\"\r\n          (click)=\"loadInitialConfiguration()\"\r\n        >\r\n          <span class=\"material-icons-outlined materialIconButton\">close</span>\r\n        </button>\r\n        <button mat-button title=\"Save icon set\" (click)=\"saveDomain()\">\r\n          <span class=\"material-icons-outlined materialIconButton\">save</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"domainConfiguration\">\r\n      <div class=\"icons\">\r\n        <div class=\"iconList smallScrollbar\">\r\n          <mat-grid-list cols=\"8\" rowHeight=\"170px\">\r\n            <mat-grid-tile\r\n              *ngFor=\"let iconName of allFilteredIconNames | async\"\r\n              [colspan]=\"1\"\r\n              [rowspan]=\"1\"\r\n            >\r\n              <app-icon-list-item\r\n                [iconName]=\"iconName\"\r\n                class=\"iconListItem\"\r\n              ></app-icon-list-item>\r\n            </mat-grid-tile>\r\n          </mat-grid-list>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <app-domain-details class=\"domainDetails\"></app-domain-details>\r\n</div>\r\n","<div class=\"details smallScrollbar\">\r\n  <div class=\"domainDetails bottom-border\">\r\n    <h3>Icon Set name</h3>\r\n    <form>\r\n      <mat-form-field class=\"inputWidth\">\r\n        <input\r\n          matInput\r\n          type=\"text\"\r\n          (input)=\"changeName($event)\"\r\n          [value]=\"domainName | async\"\r\n        />\r\n      </mat-form-field>\r\n    </form>\r\n  </div>\r\n  <div class=\"actorList bottom-border\">\r\n    <h3>Order of actors</h3>\r\n    <mat-list>\r\n      <mat-list-item class=\"compactItem\"\r\n        *ngFor=\"let iconName of selectedActors$ | async; let i = index\"\r\n        draggable=\"true\"\r\n        (dragover)=\"allowDrop($event, 'actorList')\"\r\n        (dragstart)=\"onDragStart(i, 'actorList')\"\r\n        (drop)=\"onDrop($event, iconName, true, i)\"\r\n      >\r\n        <app-details-list-item\r\n          [icon]=\"getIconForName(iconName)\"\r\n        ></app-details-list-item>\r\n      </mat-list-item>\r\n    </mat-list>\r\n  </div>\r\n  <div class=\"workobjectList\">\r\n    <h3>Order of work objects</h3>\r\n    <mat-list>\r\n      <mat-list-item class=\"compactItem\"\r\n        *ngFor=\"let iconName of selectedWorkobjects$ | async; let i = index\"\r\n        draggable=\"true\"\r\n        (dragover)=\"allowDrop($event, 'workobjectList')\"\r\n        (dragstart)=\"onDragStart(i, 'workobjectList')\"\r\n        (drop)=\"onDrop($event, iconName, false, i)\"\r\n      >\r\n        <app-details-list-item\r\n          [icon]=\"getIconForName(iconName)\"\r\n        ></app-details-list-item>\r\n      </mat-list-item>\r\n    </mat-list>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { DomainCustomizationService } from 'src/app/Service/DomainConfiguration/domain-customization.service';\r\nimport { IconListItem } from 'src/app/Domain/Domain-Configuration/iconListItem';\r\nimport { TitleService } from 'src/app/Service/Title/title.service';\r\n\r\n@Component({\r\n  selector: 'app-domain-details',\r\n  templateUrl: './domain-details.component.html',\r\n  styleUrls: ['./domain-details.component.scss'],\r\n})\r\nexport class DomainDetailsComponent implements OnInit {\r\n  domainName: Observable<string>;\r\n\r\n  private draggedList: string = '';\r\n  private draggedIndex = 0;\r\n\r\n  selectedActors$ = this.customizationService.selectedActors$;\r\n  selectedWorkobjects$ = this.customizationService.selectedWorkobjects$;\r\n\r\n  constructor(\r\n    private customizationService: DomainCustomizationService,\r\n    titleService: TitleService\r\n  ) {\r\n    this.domainName = titleService.domainName$;\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n\r\n  changeName(event: Event): void {\r\n    // @ts-ignore\r\n    this.customizationService.changeName(event.target.value);\r\n  }\r\n\r\n  getIconForName(iconName: string): IconListItem {\r\n    return this.customizationService.getIconForName(iconName).value;\r\n  }\r\n\r\n  allowDrop($event: DragEvent, listName: string) {\r\n    if (this.draggedList === listName) {\r\n      $event.preventDefault();\r\n    }\r\n  }\r\n\r\n  onDrop($event: DragEvent, iconName: string, actors: boolean, index: number) {\r\n    let list;\r\n    if (actors) {\r\n      list = this.selectedActors$;\r\n    } else {\r\n      list = this.selectedWorkobjects$;\r\n    }\r\n    const sortedList = list.value;\r\n    const item = sortedList[this.draggedIndex];\r\n    sortedList.splice(this.draggedIndex, 1);\r\n    sortedList.splice(index, 0, item);\r\n    list.next(sortedList);\r\n\r\n    if (actors) {\r\n      this.customizationService.setSelectedActors(sortedList);\r\n    } else {\r\n      this.customizationService.setSelectedWorkObject(sortedList);\r\n    }\r\n  }\r\n\r\n  onDragStart(index: number, draggedList: string) {\r\n    this.draggedList = draggedList;\r\n    this.draggedIndex = index;\r\n  }\r\n}\r\n","import { AfterViewChecked, Component, Input, OnInit } from '@angular/core';\r\nimport { IconListItem } from '../../../Domain/Domain-Configuration/iconListItem';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { DomainCustomizationService } from '../../../Service/DomainConfiguration/domain-customization.service';\r\n\r\n@Component({\r\n  selector: 'app-icon-list-item',\r\n  templateUrl: './icon-list-item.component.html',\r\n  styleUrls: ['./icon-list-item.component.scss'],\r\n})\r\nexport class IconListItemComponent implements OnInit, AfterViewChecked {\r\n  @Input()\r\n  iconName: string = '';\r\n\r\n  private iconInitiated = false;\r\n\r\n  // @ts-ignore\r\n  icon = new BehaviorSubject<IconListItem>({});\r\n\r\n  isActor: BehaviorSubject<boolean>;\r\n  isWorkobject: BehaviorSubject<boolean>;\r\n  isNone: BehaviorSubject<boolean>;\r\n\r\n  get name(): string {\r\n    return this.iconName;\r\n  }\r\n\r\n  get id() {\r\n    return 'domain-configuration-icon-' + this.iconName;\r\n  }\r\n\r\n  constructor(private domainCustomizationService: DomainCustomizationService) {\r\n    this.isActor = new BehaviorSubject<boolean>(false);\r\n    this.isWorkobject = new BehaviorSubject<boolean>(false);\r\n    this.isNone = new BehaviorSubject<boolean>(true);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.icon = this.domainCustomizationService.getIconForName(this.iconName);\r\n    this.icon.subscribe((value) => {\r\n      this.isActor.next(value.isActor);\r\n      this.isWorkobject.next(value.isWorkObject);\r\n      this.isNone.next(!(value.isActor || value.isWorkObject));\r\n    });\r\n    this.isActor.next(this.icon.value.isActor);\r\n    this.isWorkobject.next(this.icon.value.isWorkObject);\r\n    this.isNone.next(\r\n      !(this.icon.value.isActor || this.icon.value.isWorkObject)\r\n    );\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    this.createIcon();\r\n  }\r\n\r\n  private createIcon(): void {\r\n    const img = document.getElementById(this.id) as HTMLImageElement;\r\n    if (img && !this.iconInitiated) {\r\n      img.src = '' + this.icon.value?.svg;\r\n      this.iconInitiated = true;\r\n    }\r\n  }\r\n\r\n  toggleNone() {\r\n    this.domainCustomizationService.setAsUnassigned(\r\n      this.iconName,\r\n      this.icon.value.isActor\r\n    );\r\n  }\r\n\r\n  toggleActor(): void {\r\n    this.domainCustomizationService.setAsActor(true, this.iconName);\r\n  }\r\n\r\n  toggleWorkobject(): void {\r\n    this.domainCustomizationService.setAsWorkobject(true, this.iconName);\r\n  }\r\n}\r\n","<div class=\"IconContainer\">\r\n  <div class=\"content\">\r\n    <img id=\"{{ id }}\" class=\"icon\" src=\"\" alt=\"{{ name }}\" />\r\n    <div class=\"name\">{{ name }}</div>\r\n  </div>\r\n  <div class=\"footer\">\r\n    <mat-button-toggle-group>\r\n      <mat-button-toggle\r\n        (change)=\"toggleNone()\"\r\n        [value]=\"isNone | async\"\r\n        [checked]=\"isNone | async\"\r\n      >\r\n        <span class=\"toggleButtonTitle\">None</span>\r\n      </mat-button-toggle>\r\n      <mat-button-toggle\r\n        [class.activeMatButtonActor]=\"isActor | async\"\r\n        (change)=\"toggleActor()\"\r\n        [value]=\"isActor | async\"\r\n        [checked]=\"isActor | async\"\r\n      >\r\n        <span class=\"toggleButtonTitle\">Actor</span>\r\n      </mat-button-toggle>\r\n      <mat-button-toggle\r\n        [class.activeMatButtonWorkObject]=\"isWorkobject | async\"\r\n        (change)=\"toggleWorkobject()\"\r\n        [value]=\"isWorkobject | async\"\r\n        [checked]=\"isWorkobject | async\"\r\n      >\r\n        <span class=\"toggleButtonTitle\">Workobject</span>\r\n      </mat-button-toggle>\r\n    </mat-button-toggle-group>\r\n  </div>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { SettingsService } from '../../Service/Settings/settings.service';\r\nimport { TitleService } from '../../Service/Title/title.service';\r\nimport { ModelerService } from '../../Service/Modeler/modeler.service';\r\nimport { Observable } from 'rxjs';\r\nimport { ReplayStateService } from '../../Service/Replay/replay-state.service';\r\nimport { DirtyFlagService } from '../../Service/DirtyFlag/dirty-flag.service';\r\nimport {\r\n  ExportDialogData,\r\n  ExportOption,\r\n} from '../../Domain/Dialog/exportDialogData';\r\nimport { MatDialogConfig } from '@angular/material/dialog';\r\nimport { ExportDialogComponent } from '../Dialog/export-dialog/export-dialog.component';\r\nimport { InfoDialogData } from '../../Domain/Dialog/infoDialogData';\r\nimport { InfoDialogComponent } from '../Dialog/info-dialog/info-dialog.component';\r\nimport { DialogService } from '../../Service/Dialog/dialog.service';\r\nimport { ReplayService } from '../../Service/Replay/replay.service';\r\nimport { ExportService } from '../../Service/Export/export.service';\r\nimport { ImportDomainStoryService } from '../../Service/Import/import-domain-story.service';\r\nimport { LabelDictionaryDialogComponent } from '../Dialog/label-dictionary-dialog/label-dictionary-dialog.component';\r\nimport { HeaderDialogComponent } from '../Dialog/header-dialog/header-dialog.component';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport {\r\n  SNACKBAR_DURATION,\r\n  SNACKBAR_INFO,\r\n} from '../../Domain/Common/constants';\r\n\r\n@Component({\r\n  selector: 'app-header-buttons',\r\n  templateUrl: './header-buttons.component.html',\r\n  styleUrls: ['./header-buttons.component.scss'],\r\n})\r\nexport class HeaderButtonsComponent {\r\n  isReplay$: Observable<boolean>;\r\n  isDirty$: Observable<boolean>;\r\n\r\n  showDescription: Observable<boolean>;\r\n\r\n  constructor(\r\n    private settingsService: SettingsService,\r\n    private titleService: TitleService,\r\n    private modelerService: ModelerService,\r\n    private replayStateService: ReplayStateService,\r\n    private dirtyFlagService: DirtyFlagService,\r\n    private dialogService: DialogService,\r\n    private replayService: ReplayService,\r\n    private exportService: ExportService,\r\n    private importService: ImportDomainStoryService,\r\n    private snackbar: MatSnackBar\r\n  ) {\r\n    this.isReplay$ = this.replayStateService.replayOn$;\r\n    this.isDirty$ = this.dirtyFlagService.dirty$;\r\n    this.showDescription = this.titleService.showDescription$;\r\n  }\r\n  import(): void {\r\n    // @ts-ignore\r\n    const filename = document.getElementById('import').files[0].name;\r\n    if (filename.endsWith('.dst')) {\r\n      this.importService.importDST(\r\n        // @ts-ignore\r\n        document.getElementById('import').files[0],\r\n        filename,\r\n        false\r\n      );\r\n    } else if (filename.endsWith('.dst.svg')) {\r\n      this.importService.importDST(\r\n        // @ts-ignore\r\n        document.getElementById('import').files[0],\r\n        filename,\r\n        true\r\n      );\r\n    } else if (filename.endsWith('.egn')) {\r\n      this.importService.importEGN(\r\n        // @ts-ignore\r\n        document.getElementById('import').files[0],\r\n        filename,\r\n        false\r\n      );\r\n    } else if (filename.endsWith('.egn.svg')) {\r\n      this.importService.importEGN(\r\n        // @ts-ignore\r\n        document.getElementById('import').files[0],\r\n        filename,\r\n        true\r\n      );\r\n    }\r\n    this.modelerService.commandStackChanged();\r\n  }\r\n\r\n  setShowDescription(show: boolean): void {\r\n    this.titleService.setShowDescription(show);\r\n  }\r\n\r\n  openSettings(): void {\r\n    this.settingsService.open();\r\n  }\r\n\r\n  /** Open Dialogs **/\r\n  openDownloadDialog(): void {\r\n    if (this.exportService.isDomainStoryExportable()) {\r\n      const SVGDownloadOption = new ExportOption(\r\n        'SVG',\r\n        'Download an SVG-Image with the Domain-Story embedded. Can be used to save and share your Domain-Story.',\r\n        (withTitle: boolean, useWhiteBackground: boolean) => this.exportService.downloadSVG(withTitle, useWhiteBackground)\r\n      );\r\n      const EGNDownloadOption = new ExportOption(\r\n        'EGN',\r\n        'Download an EGN-File with the Domain-Story. Can be used to save and share your Domain-Story.',\r\n        (withTitle: boolean, useWhiteBackground: boolean) => this.exportService.downloadDST()\r\n      );\r\n      const PNGDownloadOption = new ExportOption(\r\n        'PNG',\r\n        'Donwload a PNG-Image of the DOmain-Story. This does not include the Domain-Story!',\r\n        (withTitle: boolean, useWhiteBackground: boolean) => this.exportService.downloadPNG(withTitle)\r\n      );\r\n      const HTMLDownloadOption = new ExportOption(\r\n        'HTML-Presentation',\r\n        'Download an HTML-Presentation. This does not include the Domain-Story!',\r\n        (withTitle: boolean, useWhiteBackground: boolean) => this.exportService.downloadHTMLPresentation()\r\n      );\r\n\r\n      const config = new MatDialogConfig();\r\n      config.disableClose = false;\r\n      config.autoFocus = true;\r\n      config.data = new ExportDialogData('Export', [\r\n        SVGDownloadOption,\r\n        EGNDownloadOption,\r\n        PNGDownloadOption,\r\n        HTMLDownloadOption,\r\n      ]);\r\n\r\n      this.dialogService.openDialog(ExportDialogComponent, config);\r\n    } else {\r\n      this.snackbar.open('No Domain Story to be exported', undefined, {\r\n        duration: SNACKBAR_DURATION,\r\n        panelClass: SNACKBAR_INFO,\r\n      });\r\n    }\r\n  }\r\n\r\n  openHeaderDialog(): void {\r\n    const config = new MatDialogConfig();\r\n    config.disableClose = false;\r\n    config.autoFocus = true;\r\n    this.dialogService.openDialog(HeaderDialogComponent, config);\r\n  }\r\n\r\n  openKeyboardShortcutsDialog(): void {\r\n    const title = 'Keyboard shortcuts';\r\n    const shortCutText =\r\n      'Undo:\\t\\t\\t\\t\\tctrl + Z \\n' +\r\n      'Redo:\\t\\t\\t\\t\\tctrl + Y    OR   ctrl + shift + Z\\n' +\r\n      'Select All:\\t\\t\\t\\tctrl + A\\n' +\r\n      'Export as DST:\\t\\t\\tctrl + S\\n' +\r\n      'Import Domain Story: \\tctrl + L\\n' +\r\n      'Search for text:\\t\\t\\tctrl + F\\n' +\r\n      'Direct editing:\\t\\t\\tE\\n' +\r\n      'Hand tool:\\t\\t\\t\\tH\\n' +\r\n      'Lasso tool:\\t\\t\\t\\tL\\n' +\r\n      'Space tool:\\t\\t\\t\\tS';\r\n\r\n    const config = new MatDialogConfig();\r\n    config.disableClose = false;\r\n    config.autoFocus = true;\r\n\r\n    config.data = new InfoDialogData(title, shortCutText, true);\r\n\r\n    this.dialogService.openDialog(InfoDialogComponent, config);\r\n  }\r\n\r\n  openLabelDictionary(): void {\r\n    if (this.exportService.isDomainStoryExportable()) {\r\n      const config = new MatDialogConfig();\r\n      config.disableClose = false;\r\n      config.autoFocus = true;\r\n\r\n      this.dialogService.openDialog(LabelDictionaryDialogComponent, config);\r\n    } else {\r\n      this.snackbar.open(\r\n        'There are currently no Elements on the canvas',\r\n        undefined,\r\n        {\r\n          duration: SNACKBAR_DURATION,\r\n          panelClass: SNACKBAR_INFO,\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  /** Replay functions **/\r\n  startReplay(): void {\r\n    this.replayService.startReplay();\r\n  }\r\n\r\n  stopReplay(): void {\r\n    this.replayService.stopReplay();\r\n  }\r\n\r\n  previousStep(): void {\r\n    this.replayService.previousStep();\r\n  }\r\n\r\n  nextStep(): void {\r\n    this.replayService.nextStep();\r\n  }\r\n}\r\n","<div *ngIf=\"!(isReplay$ | async)\">\r\n  <button\r\n    class=\"headerButton\"\r\n    title=\"Edit Title and Description\"\r\n    (click)=\"openHeaderDialog()\"\r\n  >\r\n    <span class=\"material-icons materialIconButton\"> edit </span>\r\n  </button>\r\n  <button\r\n    class=\"headerButton\"\r\n    title=\"Label Dictionary\"\r\n    (click)=\"openLabelDictionary()\"\r\n  >\r\n    <span class=\"material-icons materialIconButton\" title=\"Label Dictionary\">\r\n      spellcheck\r\n    </span>\r\n  </button>\r\n  <button\r\n    id=\"buttonImport\"\r\n    class=\"headerButton\"\r\n    title=\"Import story from file\"\r\n    onclick=\"document.getElementById('import').click();\"\r\n  >\r\n    <span class=\"material-icons materialIconButton\"> unarchive </span>\r\n  </button>\r\n  <input\r\n    type=\"file\"\r\n    accept=\".dst, .dst.svg, .egn, .egn.svg\"\r\n    style=\"display: none\"\r\n    id=\"import\"\r\n    onclick=\"this.value=null;\"\r\n    (change)=\"import()\"\r\n    name=\"file\"\r\n  />\r\n  <button\r\n    class=\"headerButton\"\r\n    id=\"export\"\r\n    title=\"Export story as .dst, .svg or .png file\"\r\n    (click)=\"openDownloadDialog()\"\r\n  >\r\n    <span\r\n      class=\"material-icons-outlined materialIconButton\"\r\n      *ngIf=\"!(isDirty$ | async)\"\r\n    >\r\n      archive\r\n    </span>\r\n    <span class=\"material-icons materialIconButton\" *ngIf=\"isDirty$ | async\">\r\n      archive\r\n    </span>\r\n  </button>\r\n  <button\r\n    id=\"buttonStartReplay\"\r\n    class=\"headerButton\"\r\n    title=\"Start replay\"\r\n    (click)=\"startReplay()\"\r\n  >\r\n    <span class=\"material-icons materialIconButton\"> play_arrow </span>\r\n  </button>\r\n  <button\r\n    class=\"headerButton\"\r\n    title=\"Show keyboard shortcuts\"\r\n    (click)=\"openKeyboardShortcutsDialog()\"\r\n  >\r\n    <span class=\"material-icons materialIconButton\"> info </span>\r\n  </button>\r\n\r\n  <button class=\"headerButton\" title=\"Settings\" (click)=\"openSettings()\">\r\n    <span\r\n      class=\"material-icons materialIconButton\"\r\n      title=\"Change Icons and Settings\"\r\n    >\r\n      settings\r\n    </span>\r\n  </button>\r\n\r\n  <button\r\n    class=\"headerButton\"\r\n    title=\"Hide Description\"\r\n    *ngIf=\"showDescription | async\"\r\n    (click)=\"setShowDescription(false)\"\r\n  >\r\n    <span class=\"material-icons materialIconButton toggle\"> expand_less </span>\r\n  </button>\r\n  <button\r\n    class=\"headerButton\"\r\n    title=\"Show Description\"\r\n    *ngIf=\"!(showDescription | async)\"\r\n    (click)=\"setShowDescription(true)\"\r\n  >\r\n    <span class=\"material-icons materialIconButton toggle\"> expand_more</span>\r\n  </button>\r\n</div>\r\n<div *ngIf=\"isReplay$ | async\">\r\n  <button class=\"headerButton\" title=\"Previous Step\" (click)=\"previousStep()\">\r\n    <span class=\"material-icons materialIconButton\"> skip_previous </span>\r\n  </button>\r\n  <button class=\"headerButton\" title=\"NextStep\" (click)=\"nextStep()\">\r\n    <span class=\"material-icons materialIconButton\"> skip_next </span>\r\n  </button>\r\n  <button class=\"headerButton\" title=\"Stop replay\" (click)=\"stopReplay()\">\r\n    <span class=\"material-icons materialIconButton\"> stop </span>\r\n  </button>\r\n\r\n  <button\r\n    class=\"headerButton\"\r\n    title=\"Hide Description\"\r\n    *ngIf=\"showDescription | async\"\r\n    (click)=\"setShowDescription(false)\"\r\n  >\r\n    <span class=\"material-icons materialIconButton toggle\"> expand_less </span>\r\n  </button>\r\n  <button\r\n    class=\"headerButton\"\r\n    title=\"Show Description\"\r\n    *ngIf=\"!(showDescription | async)\"\r\n    (click)=\"setShowDescription(true)\"\r\n  >\r\n    <span class=\"material-icons materialIconButton toggle\"> expand_more</span>\r\n  </button>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { combineLatest, map, Observable } from 'rxjs';\r\nimport { TitleService } from '../../Service/Title/title.service';\r\nimport { ReplayService } from '../../Service/Replay/replay.service';\r\nimport { ReplayStateService } from '../../Service/Replay/replay-state.service';\r\n\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.scss'],\r\n})\r\nexport class HeaderComponent {\r\n  title$ = this.titleService.title$;\r\n  description$ = this.titleService.description$;\r\n  showDescription$ = this.titleService.showDescription$;\r\n  currentDomainName$ = this.titleService.domainName$;\r\n\r\n  isReplay$: Observable<boolean>;\r\n  stepDescription$: Observable<string>;\r\n\r\n  mouseOver = false;\r\n\r\n  constructor(\r\n    private titleService: TitleService,\r\n    private replayService: ReplayService,\r\n    private replayStateService: ReplayStateService\r\n  ) {\r\n    this.isReplay$ = this.replayStateService.replayOn$;\r\n\r\n    this.stepDescription$ = combineLatest([\r\n      this.replayService.currentStep$,\r\n      this.replayService.maxStepNumber$,\r\n    ]).pipe(map(([step, count]) => `${step}/${count}`));\r\n  }\r\n}\r\n","<mat-toolbar color=\"primary\" class=\"toolbar\">\r\n  <mat-toolbar-row>\r\n    <span class=\"mr-10\">\r\n      <span class=\"headline\">{{ title$ | async }} </span>\r\n    </span>\r\n    <span title=\"Domain\">{{ currentDomainName$ | async }} </span>\r\n    <span class=\"domainNameSpacer\"></span>\r\n    <span title=\"Replay Step\" *ngIf=\"isReplay$ | async\">\r\n      Step: {{ stepDescription$ | async }}</span\r\n    >\r\n\r\n    <span class=\"buttonSpacer\"></span>\r\n\r\n    <app-header-buttons></app-header-buttons>\r\n  </mat-toolbar-row>\r\n</mat-toolbar>\r\n<mat-card class=\"smallScrollbar description\" *ngIf=\"showDescription$ | async\">\r\n  <span class=\"descriptionText\">{{ description$ | async }}</span>\r\n</mat-card>\r\n","import { AfterViewInit, Component, EventEmitter, Output } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { WorkObjectLabelEntry } from '../../Domain/LabelDictionary/workObjectLabelEntry';\r\nimport { LabelEntry } from '../../Domain/LabelDictionary/labelEntry';\r\nimport { LabelDictionaryService } from '../../Service/LabelDictionary/label-dictionary.service';\r\n\r\n@Component({\r\n  selector: 'app-label-dictionary',\r\n  templateUrl: './label-dictionary.component.html',\r\n  styleUrls: ['./label-dictionary.component.scss'],\r\n})\r\nexport class LabelDictionaryComponent implements AfterViewInit {\r\n  workobjectEntriesSubject: BehaviorSubject<WorkObjectLabelEntry[]>;\r\n  activityEntriesSubject: BehaviorSubject<LabelEntry[]>;\r\n\r\n  workObjectEntries: WorkObjectLabelEntry[];\r\n  activityEntries: LabelEntry[];\r\n\r\n  @Output()\r\n  closeEmitter: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  constructor(private labelDictionaryService: LabelDictionaryService) {\r\n    this.labelDictionaryService.createLabelDictionaries();\r\n    this.workObjectEntries = this.labelDictionaryService.getWorkObjectLabels();\r\n    this.activityEntries = this.labelDictionaryService.getActivityLabels();\r\n\r\n    this.workobjectEntriesSubject = new BehaviorSubject(this.workObjectEntries);\r\n    this.activityEntriesSubject = new BehaviorSubject(this.activityEntries);\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.labelDictionaryService.createLabelDictionaries();\r\n    this.workobjectEntriesSubject.next(\r\n      this.labelDictionaryService.getWorkObjectLabels()\r\n    );\r\n    this.activityEntriesSubject.next(\r\n      this.labelDictionaryService.getActivityLabels()\r\n    );\r\n  }\r\n\r\n  save(): void {\r\n    this.workObjectEntries = this.workobjectEntriesSubject.value;\r\n    this.activityEntries = this.activityEntriesSubject.value;\r\n\r\n    const activityNames: string[] = [];\r\n    const originalActivityNames: string[] = [];\r\n\r\n    const workObjectNames: string[] = [];\r\n    const originalWorkObjectNames: string[] = [];\r\n\r\n    this.activityEntries\r\n      .filter((a) => a.name !== a.originalName)\r\n      .forEach((activity) => {\r\n        activityNames.push(activity.name);\r\n        originalActivityNames.push(activity.originalName);\r\n      });\r\n\r\n    this.workObjectEntries\r\n      .filter((w) => w.name !== w.originalName)\r\n      .forEach((workobject) => {\r\n        workObjectNames.push(workobject.name);\r\n        originalWorkObjectNames.push(workobject.originalName);\r\n      });\r\n\r\n    this.labelDictionaryService.massRenameLabels(\r\n      activityNames,\r\n      originalActivityNames,\r\n      workObjectNames,\r\n      originalWorkObjectNames\r\n    );\r\n    this.closeEmitter.emit();\r\n  }\r\n\r\n  cancel(): void {\r\n    this.workObjectEntries.forEach((w) => {\r\n      w.name = w.originalName;\r\n    });\r\n    this.activityEntries.forEach((a) => {\r\n      a.name = a.originalName;\r\n    });\r\n\r\n    this.workobjectEntriesSubject.next(this.workObjectEntries);\r\n    this.activityEntriesSubject.next(this.activityEntries);\r\n  }\r\n\r\n  updateActivityEntry($event: Event, activityEntry: LabelEntry) {\r\n    let entries = this.activityEntriesSubject.value;\r\n    entries.filter(\r\n      (e) => e.originalName === activityEntry.originalName\r\n      // @ts-ignore\r\n    )[0].name = $event.target.value;\r\n    this.activityEntriesSubject.next(entries);\r\n  }\r\n\r\n  updateWorkobjectEntry($event: Event, workobjectEntry: LabelEntry) {\r\n    let entries = this.workobjectEntriesSubject.value;\r\n    entries.filter(\r\n      (e) => e.originalName === workobjectEntry.originalName\r\n      // @ts-ignore\r\n    )[0].name = $event.target.value;\r\n    this.workobjectEntriesSubject.next(entries);\r\n  }\r\n}\r\n","<div class=\"labelDictionary\">\r\n  <div class=\"workobjectList\">\r\n    <h3>Workobjects</h3>\r\n    <mat-list>\r\n      <mat-list-item\r\n        *ngFor=\"let workobjectEntry of workobjectEntriesSubject | async\"\r\n      >\r\n        <input matInput\r\n          class=\"inputText\"\r\n          [value]=\"workobjectEntry.name\"\r\n          (change)=\"updateWorkobjectEntry($event, workobjectEntry)\"\r\n        />\r\n      </mat-list-item>\r\n    </mat-list>\r\n  </div>\r\n  <div class=\"activityList\">\r\n    <h3 class=\"activityListTitle\">Activities</h3>\r\n    <mat-list>\r\n      <mat-list-item\r\n        *ngFor=\"let activityEntry of activityEntriesSubject | async\"\r\n      >\r\n        <input matInput\r\n          class=\"inputText\"\r\n          [value]=\"activityEntry.name\"\r\n          (change)=\"updateActivityEntry($event, activityEntry)\"\r\n        />\r\n      </mat-list-item>\r\n    </mat-list>\r\n  </div>\r\n</div>\r\n<footer class=\"footer\">\r\n  <button\r\n    class=\"saveButton\"\r\n    mat-button\r\n    color=\"primary\"\r\n    title=\"update dictionaries\"\r\n    (click)=\"save()\"\r\n  >\r\n    <span class=\"material-icons materialIconButton\">library_books</span>\r\n    <span class=\"saveButtonSpan\">update Dictionaries</span>\r\n  </button>\r\n</footer>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-general-settings',\r\n  templateUrl: './general-settings.component.html',\r\n  styleUrls: ['./general-settings.component.scss'],\r\n})\r\nexport class GeneralSettingsComponent {}\r\n","<div class=\"content\">\r\n  <app-autosave-settings></app-autosave-settings>\r\n</div>\r\n","import { Component } from '@angular/core';\r\nimport { SettingsService } from 'src/app/Service/Settings/settings.service';\r\nimport { ModelerService } from 'src/app/Service/Modeler/modeler.service';\r\nimport { DomainConfiguration } from 'src/app/Domain/Common/domainConfiguration';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { AutosaveConfigurationService } from '../../Service/Autosave/autosave-configuration.service';\r\nimport { DomainCustomizationService } from '../../Service/DomainConfiguration/domain-customization.service';\r\n\r\n@Component({\r\n  selector: 'app-settings',\r\n  templateUrl: './settings.component.html',\r\n  styleUrls: ['./settings.component.scss'],\r\n})\r\nexport class SettingsComponent {\r\n  domainConfiguration: DomainConfiguration | undefined;\r\n  showGeneralSettings = new BehaviorSubject<boolean>(false);\r\n  showDomainCustomization = new BehaviorSubject<boolean>(true);\r\n\r\n  constructor(\r\n    private settingsService: SettingsService,\r\n    private modelerService: ModelerService,\r\n    private domainCustomizationService: DomainCustomizationService\r\n  ) {}\r\n\r\n  close(): void {\r\n    const savedConfiguration =\r\n      this.domainCustomizationService.getAndClearSavedConfiguration();\r\n    if (savedConfiguration) {\r\n      this.modelerService.restart(savedConfiguration);\r\n    }\r\n    this.settingsService.close();\r\n  }\r\n\r\n  openGeneralSettings() {\r\n    this.showGeneralSettings.next(true);\r\n    this.showDomainCustomization.next(false);\r\n  }\r\n\r\n  openDomainCustomization() {\r\n    this.showGeneralSettings.next(false);\r\n    this.showDomainCustomization.next(true);\r\n  }\r\n}\r\n","<div class=\"settings\">\r\n  <mat-toolbar color=\"primary\" class=\"toolbar\">\r\n    <mat-toolbar-row>\r\n      <button class=\"headerButton noPadding\" mat-button (click)=\"close()\">\r\n        <span class=\"material-icons-outlined materialIconButton\">\r\n          arrow_back</span\r\n        >\r\n      </button>\r\n      <div class=\"paddedButton\">\r\n        <button\r\n          class=\"headerButton mr-10\"\r\n          [class.highlight]=\"showDomainCustomization | async\"\r\n          mat-button\r\n          (click)=\"openDomainCustomization()\"\r\n        >\r\n          <span class=\"headline\">Customize Icons for Your Domain</span>\r\n        </button>\r\n        <button\r\n          class=\"headerButton\"\r\n          [class.highlight]=\"showGeneralSettings | async\"\r\n          mat-button\r\n          (click)=\"openGeneralSettings()\"\r\n        >\r\n          <span class=\"headline\">General Settings</span>\r\n        </button>\r\n      </div>\r\n    </mat-toolbar-row>\r\n  </mat-toolbar>\r\n\r\n  <app-general-settings\r\n    *ngIf=\"showGeneralSettings | async\"\r\n  ></app-general-settings>\r\n  <app-domain-configuration\r\n    *ngIf=\"showDomainCustomization | async\"\r\n    class=\"tab\"\r\n  ></app-domain-configuration>\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\nimport { ReplaySubject } from 'rxjs';\r\nimport { StorageService } from '../BrowserStorage/storage.service';\r\nimport { AutosaveConfiguration } from '../../Domain/Autosave/autosave-configuration';\r\nimport {\r\n  DEFAULT_AUTOSAVES_AMOUNT,\r\n  DEFAULT_AUTOSAVES_INTERVAL,\r\n} from 'src/app/Domain/Common/constants';\r\n\r\nconst AUTOSAVE_CONFIGURATION_TAG = 'autosaveConfiguration';\r\n\r\nconst defaultConfiguration: AutosaveConfiguration = {\r\n  activated: false,\r\n  interval: DEFAULT_AUTOSAVES_INTERVAL,\r\n  amount: DEFAULT_AUTOSAVES_AMOUNT,\r\n};\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AutosaveConfigurationService {\r\n  private configuration = defaultConfiguration;\r\n\r\n  private readonly configurationSubject =\r\n    new ReplaySubject<AutosaveConfiguration>(1);\r\n  readonly configuration$ = this.configurationSubject.asObservable();\r\n\r\n  constructor(private storageService: StorageService) {\r\n    this.initializeConfiguration();\r\n  }\r\n\r\n  private initializeConfiguration() {\r\n    this.loadConfiguration();\r\n    this.configurationSubject.next(this.configuration);\r\n  }\r\n\r\n  setConfiguration(configuration: AutosaveConfiguration): boolean {\r\n    try {\r\n      this.configuration = configuration;\r\n      this.saveConfiguration();\r\n      this.configurationSubject.next(configuration);\r\n      return true;\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private loadConfiguration() {\r\n    this.configuration =\r\n      this.storageService.get(AUTOSAVE_CONFIGURATION_TAG) ??\r\n      defaultConfiguration;\r\n  }\r\n\r\n  private saveConfiguration() {\r\n    this.storageService.set(AUTOSAVE_CONFIGURATION_TAG, this.configuration);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { RendererService } from '../Renderer/renderer.service';\r\nimport { ExportService } from '../Export/export.service';\r\nimport { Draft } from '../../Domain/Autosave/draft';\r\nimport { AutosaveConfigurationService } from './autosave-configuration.service';\r\nimport { IconDictionaryService } from '../DomainConfiguration/icon-dictionary.service';\r\nimport { elementTypes } from '../../Domain/Common/elementTypes';\r\nimport { fromConfigurationFromFile } from '../../Domain/Common/domainConfiguration';\r\nimport { StorageService } from '../BrowserStorage/storage.service';\r\nimport { TitleService } from '../Title/title.service';\r\nimport { AutosaveConfiguration } from '../../Domain/Autosave/autosave-configuration';\r\nimport {\r\n  SNACKBAR_DURATION,\r\n  SNACKBAR_INFO,\r\n} from 'src/app/Domain/Common/constants';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Subject } from 'rxjs';\r\n\r\nexport const DRAFTS_TAG = 'autosaveDrafts';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AutosaveService {\r\n  private autosaveTimer: any;\r\n  autosavedDraftsChanged$ = new Subject<void>();\r\n\r\n  constructor(\r\n    private autosaveConfiguration: AutosaveConfigurationService,\r\n    private exportService: ExportService,\r\n    private iconDistionaryService: IconDictionaryService,\r\n    private rendererService: RendererService,\r\n    private snackbar: MatSnackBar,\r\n    private storageService: StorageService,\r\n    private titleService: TitleService\r\n  ) {\r\n    this.autosaveConfiguration.configuration$.subscribe((configuration) =>\r\n      this.updateConfiguration(configuration)\r\n    );\r\n  }\r\n\r\n  loadCurrentDrafts(): Draft[] {\r\n    const drafts = this.readDrafts();\r\n    this.sortDrafts(drafts);\r\n    return drafts;\r\n  }\r\n\r\n  loadDraft(draft: Draft): void {\r\n    const configFromFile = draft.configAndDST.domain;\r\n    const config = fromConfigurationFromFile(configFromFile);\r\n    const story = JSON.parse(draft.configAndDST.dst);\r\n\r\n    this.titleService.updateTitleAndDescription(\r\n      draft.title,\r\n      draft.description,\r\n      false\r\n    );\r\n\r\n    const actorIcons = this.iconDistionaryService.getElementsOfType(\r\n      story,\r\n      elementTypes.ACTOR\r\n    );\r\n    const workObjectIcons = this.iconDistionaryService.getElementsOfType(\r\n      story,\r\n      elementTypes.WORKOBJECT\r\n    );\r\n    this.iconDistionaryService.updateIconRegistries(\r\n      actorIcons,\r\n      workObjectIcons,\r\n      config\r\n    );\r\n    this.rendererService.importStory(story, true, config, false);\r\n  }\r\n\r\n  removeAllDrafts() {\r\n    this.storageService.set(DRAFTS_TAG, []);\r\n    this.autosavedDraftsChanged$.next();\r\n  }\r\n\r\n  private updateConfiguration(configuration: AutosaveConfiguration) {\r\n    this.stopTimer();\r\n\r\n    if (configuration.activated) {\r\n      this.startTimer(configuration.interval, configuration.amount);\r\n    }\r\n  }\r\n\r\n  private stopTimer(): void {\r\n    if (this.autosaveTimer) {\r\n      clearInterval(this.autosaveTimer);\r\n      this.autosaveTimer = undefined;\r\n    }\r\n  }\r\n\r\n  private startTimer(interval: number, amount: number): void {\r\n    this.autosaveTimer = setInterval(() => {\r\n      const drafts = this.loadCurrentDrafts();\r\n      const newDraft = this.createDraft();\r\n      let isChanged = amount > 0;\r\n      if (drafts.length > 0) {\r\n        isChanged = isChanged && !this.isSame(newDraft, drafts[0]);\r\n      }\r\n      if (isChanged) {\r\n        drafts.unshift(this.createDraft());\r\n        while (drafts.length > amount) {\r\n          drafts.pop();\r\n        }\r\n        this.writeDrafts(drafts);\r\n        this.snackbar.open('Draft Saved', undefined, {\r\n          panelClass: SNACKBAR_INFO,\r\n          duration: SNACKBAR_DURATION,\r\n        });\r\n        this.autosavedDraftsChanged$.next();\r\n      }\r\n    }, interval * 60000);\r\n  }\r\n\r\n  private isSame(a: Draft, b: Draft) {\r\n    return (\r\n      a.title === b.title &&\r\n      a.description === b.description &&\r\n      JSON.stringify(a.configAndDST) === JSON.stringify(b.configAndDST)\r\n    );\r\n  }\r\n\r\n  private writeDrafts(drafts: Draft[]) {\r\n    this.storageService.set(DRAFTS_TAG, drafts);\r\n  }\r\n\r\n  private readDrafts(): Draft[] {\r\n    return this.storageService.get(DRAFTS_TAG) ?? [];\r\n  }\r\n\r\n  private createDraft(): Draft {\r\n    const dst = JSON.stringify(this.rendererService.getStory(), null, 2);\r\n    const configAndDST = this.exportService.createConfigAndDST(dst);\r\n\r\n    const date = new Date().toString().slice(0, 25);\r\n\r\n    return {\r\n      title: this.titleService.getTitle(),\r\n      description: this.titleService.getDescription(),\r\n      configAndDST,\r\n      date,\r\n    };\r\n  }\r\n\r\n  private sortDrafts(drafts: Draft[]): void {\r\n    drafts.sort((a: Draft, b: Draft) => {\r\n      const aDate = Date.parse(a.date);\r\n      const bDate = Date.parse(b.date);\r\n      return aDate > bDate ? 0 : 1;\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { DOMAIN_CONFIGURATION_TAG } from '../../Domain/Common/constants';\r\nimport {\r\n  DomainConfiguration,\r\n  fromConfigurationFromFile,\r\n} from '../../Domain/Common/domainConfiguration';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class StorageService {\r\n  set(key: string, value: any) {\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n  }\r\n\r\n  get(key: string): any {\r\n    const json = localStorage.getItem(key);\r\n    if (json) {\r\n      return JSON.parse(json);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  removeItem(key: string) {\r\n    localStorage.removeItem(key);\r\n  }\r\n\r\n  checkValidityOfConfiguration(configuratioFromFile: DomainConfiguration) {\r\n    return (\r\n      configuratioFromFile.actors.keysArray().length > 1 &&\r\n      configuratioFromFile.workObjects.keysArray().length > 1 &&\r\n      !configuratioFromFile.actors\r\n        .all()\r\n        .some((e) => typeof e.value !== 'string') &&\r\n      !configuratioFromFile.workObjects\r\n        .all()\r\n        .some((e) => typeof e.value !== 'string')\r\n    );\r\n  }\r\n\r\n  getStoredDomainConfiguration(): DomainConfiguration | undefined {\r\n    const domainString = localStorage.getItem(DOMAIN_CONFIGURATION_TAG);\r\n\r\n    if (!domainString) {\r\n      return;\r\n    } else {\r\n      const configuratioFromFile = fromConfigurationFromFile(\r\n        JSON.parse(domainString)\r\n      );\r\n      if (this.checkValidityOfConfiguration(configuratioFromFile)) {\r\n        return configuratioFromFile;\r\n      }\r\n    }\r\n    return;\r\n  }\r\n\r\n  setStoredDomainConfiguration(config: DomainConfiguration): void {\r\n    const actors: {\r\n      [p: string]: any;\r\n    } = {};\r\n    config.actors.keysArray().forEach((key) => {\r\n      actors[key] = config.actors.get(key);\r\n    });\r\n    const workObjects: {\r\n      [p: string]: any;\r\n    } = {};\r\n    config.workObjects.keysArray().forEach((key) => {\r\n      workObjects[key] = config.workObjects.get(key);\r\n    });\r\n\r\n    const configForStorage = {\r\n      name: config.name,\r\n      actors: actors,\r\n      workObjects: workObjects,\r\n    };\r\n\r\n    localStorage.setItem(\r\n      DOMAIN_CONFIGURATION_TAG,\r\n      JSON.stringify(configForStorage, null, 2)\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class CommandStackService {\r\n  private commandStack: any;\r\n\r\n  constructor() {}\r\n\r\n  setCommandStack(commandStack: any): void {\r\n    this.commandStack = commandStack;\r\n  }\r\n\r\n  execute(action: string, payload: any) {\r\n    this.commandStack.execute(action, payload);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\r\nimport { ComponentType } from '@angular/cdk/overlay';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class DialogService {\r\n  constructor(private matDialog: MatDialog) {}\r\n\r\n  openDialog(dialog: ComponentType<any>, config: MatDialogConfig): void {\r\n    this.matDialog.open(dialog, config);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class DirtyFlagService {\r\n  private isDirtySubject = new BehaviorSubject<boolean>(false);\r\n  dirty$ = this.isDirtySubject.asObservable();\r\n\r\n  makeDirty(): void {\r\n    this.isDirtySubject.next(true);\r\n  }\r\n\r\n  makeClean(): void {\r\n    this.isDirtySubject.next(false);\r\n  }\r\n\r\n  get dirty(): boolean {\r\n    return this.isDirtySubject.value;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BusinessObject } from 'src/app/Domain/Common/businessObject';\r\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\r\nimport { elementTypes } from 'src/app/Domain/Common/elementTypes';\r\nimport { StoryStep } from 'src/app/Domain/Replay/storyStep';\r\nimport {\r\n  HIGHLIGHT_COLOR,\r\n  HIGHLIGHT_NUMBER_BACKGROUNG_COLOR,\r\n  HIGHLIGHT_NUMBER_COLOR,\r\n  HIGHLIGHT_STROKE_WIDTH,\r\n  NUMBER_BACKGROUND_COLOR,\r\n  NUMBER_COLOR,\r\n  STROKE_WIDTH,\r\n} from '../../Domain/DomManipulation/replayConstants';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\n/**\r\n * Manipulates the DOM during replay to only show the elements of the current Step\r\n */\r\nexport class DomManipulationService {\r\n  constructor(private elementRegistryService: ElementRegistryService) {}\r\n\r\n  showAll(): void {\r\n    this.removeHighlights();\r\n    this.elementRegistryService\r\n      .getAllCanvasObjects()\r\n      .slice()\r\n      .concat(this.elementRegistryService.getAllGroups().slice())\r\n      .map((e) => e.businessObject)\r\n      .forEach((element) => {\r\n        const domObject = document.querySelector(\r\n          '[data-element-id=' + element.id + ']'\r\n        );\r\n        // @ts-ignore\r\n        domObject.style.display = 'block';\r\n      });\r\n  }\r\n\r\n  showStep(replayStep: StoryStep, previousStep?: StoryStep): void {\r\n    this.removeHighlights();\r\n    const notShown = this.getAllNotShown(replayStep.objects);\r\n\r\n    notShown.forEach((element) => {\r\n      const domObject = document.querySelector(\r\n        '[data-element-id=' + element.id + ']'\r\n      );\r\n      if (domObject) {\r\n        // @ts-ignore\r\n        domObject.style.display = 'none';\r\n      }\r\n    });\r\n\r\n    this.hightlightStep(\r\n      previousStep\r\n        ? replayStep.objects.filter((o) => !previousStep.objects.includes(o))\r\n        : replayStep.objects\r\n    );\r\n\r\n    replayStep.objects.forEach((element) => {\r\n      const domObject = document.querySelector(\r\n        '[data-element-id=' + element.id + ']'\r\n      );\r\n      if (domObject) {\r\n        // @ts-ignore\r\n        domObject.style.display = 'block';\r\n      }\r\n    });\r\n  }\r\n\r\n  getNumberDomForActivity(activity: SVGPolylineElement): any {\r\n    const numberDOMS = activity.parentElement?.getElementsByClassName(\r\n      'djs-labelNumber'\r\n    ) || ['', ''];\r\n    return {\r\n      numberBackgroundDom: numberDOMS[0],\r\n      numberTextDom: numberDOMS[1],\r\n    };\r\n  }\r\n\r\n  private removeHighlights(): void {\r\n    const allActivities = this.elementRegistryService.getAllActivities();\r\n    const allConnections = this.elementRegistryService.getAllConnections();\r\n\r\n    allActivities.forEach((activity) => {\r\n      const querySelector = document.querySelector(\r\n        '[data-element-id=' + activity.id + ']'\r\n      );\r\n      if (querySelector) {\r\n        const activityDomObject =\r\n          querySelector.getElementsByTagName('polyline')[0];\r\n\r\n        activityDomObject.style.stroke =\r\n          activity.businessObject.pickedColor || 'black';\r\n        activityDomObject.style.strokeWidth = STROKE_WIDTH;\r\n\r\n        const { numberBackgroundDom, numberTextDom } =\r\n          this.getNumberDomForActivity(activityDomObject);\r\n        if (numberBackgroundDom && numberTextDom) {\r\n          numberBackgroundDom.style.fill = NUMBER_BACKGROUND_COLOR;\r\n          numberTextDom.style.fill = NUMBER_COLOR;\r\n        }\r\n      }\r\n    });\r\n\r\n    allConnections.forEach((connection) => {\r\n      // @ts-ignore\r\n      const connectionDomObject = document\r\n        .querySelector('[data-element-id=' + connection.id + ']')\r\n        .getElementsByTagName('polyline')[0];\r\n\r\n      connectionDomObject.style.stroke =\r\n        connection.businessObject.pickedColor || 'black';\r\n      connectionDomObject.style.strokeWidth = '1.5';\r\n    });\r\n  }\r\n\r\n  private hightlightStep(stepObjects: BusinessObject[]): void {\r\n    stepObjects\r\n      .filter((e) => e.type === elementTypes.ACTIVITY)\r\n      .forEach((activity) => {\r\n        const querySelector = document.querySelector(\r\n          '[data-element-id=' + activity.id + ']'\r\n        );\r\n        if (querySelector) {\r\n          const activityDomObject =\r\n            querySelector.getElementsByTagName('polyline')[0];\r\n\r\n          activityDomObject.style.stroke = HIGHLIGHT_COLOR;\r\n          activityDomObject.style.strokeWidth = HIGHLIGHT_STROKE_WIDTH;\r\n\r\n          const { numberBackgroundDom, numberTextDom } =\r\n            this.getNumberDomForActivity(activityDomObject);\r\n          if (numberTextDom && numberBackgroundDom) {\r\n            numberBackgroundDom.style.fill = HIGHLIGHT_NUMBER_BACKGROUNG_COLOR;\r\n            numberTextDom.style.fill = HIGHLIGHT_NUMBER_COLOR;\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  private getAllNotShown(shownElements: BusinessObject[]): BusinessObject[] {\r\n    const notShownElements: BusinessObject[] = [];\r\n    const allObjects = this.elementRegistryService\r\n      .getAllCanvasObjects()\r\n      .concat(this.elementRegistryService.getAllGroups());\r\n\r\n    allObjects.forEach((element) => {\r\n      if (!shownElements.includes(element.businessObject)) {\r\n        if (element.type.includes(elementTypes.CONNECTION)) {\r\n          // @ts-ignore\r\n          if (!element.source.type.includes(elementTypes.GROUP)) {\r\n            notShownElements.push(element.businessObject);\r\n          } else {\r\n            // @ts-ignore\r\n            shownElements.push(element.target);\r\n          }\r\n        } else {\r\n          notShownElements.push(element.businessObject);\r\n        }\r\n      }\r\n    });\r\n    return notShownElements;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\r\nimport { IconDictionaryService } from 'src/app/Service/DomainConfiguration/icon-dictionary.service';\r\nimport { Dictionary } from 'src/app/Domain/Common/dictionary/dictionary';\r\nimport { elementTypes } from 'src/app/Domain/Common/elementTypes';\r\nimport {\r\n  CustomDomainConfiguration,\r\n  DomainConfiguration,\r\n  DomainConfigurationForExport,\r\n} from 'src/app/Domain/Common/domainConfiguration';\r\nimport { defaultConf } from '../../Domain/Common/iconConfiguration';\r\nimport { TitleService } from '../Title/title.service';\r\nimport { INITIAL_DOMAIN_NAME } from '../../Domain/Common/constants';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class DomainConfigurationService {\r\n  constructor(\r\n    private iconDictionaryService: IconDictionaryService,\r\n    private elementRegistryService: ElementRegistryService,\r\n    private titleService: TitleService\r\n  ) {}\r\n\r\n  setDomainName(domainName: string): void {\r\n    this.titleService.setDomainName(\r\n      domainName ? domainName : INITIAL_DOMAIN_NAME\r\n    );\r\n  }\r\n\r\n  exportConfiguration(): void {\r\n    const domainConfiguration = this.getCurrentConfigurationForExport();\r\n    if (!domainConfiguration) {\r\n      return;\r\n    }\r\n\r\n    const configJSONString = JSON.stringify(domainConfiguration, null, 2);\r\n    const filename = this.titleService.getDomainName();\r\n    const element = document.createElement('a');\r\n\r\n    element.setAttribute(\r\n      'href',\r\n      'data:text/plain;charset=utf-8,' + encodeURIComponent(configJSONString)\r\n    );\r\n    element.setAttribute('download', filename + '.domain');\r\n    element.style.display = 'none';\r\n    document.body.appendChild(element);\r\n\r\n    element.click();\r\n\r\n    document.body.removeChild(element);\r\n  }\r\n\r\n  loadConfiguration(\r\n    customConfig: DomainConfiguration,\r\n    updateDomainName = true\r\n  ): void {\r\n    let actorDict = new Dictionary();\r\n    let workObjectDict = new Dictionary();\r\n\r\n    if (customConfig.actors.keysArray()) {\r\n      actorDict = customConfig.actors;\r\n      workObjectDict = customConfig.workObjects;\r\n    } else {\r\n      actorDict.addEach(customConfig.actors);\r\n      workObjectDict.addEach(customConfig.workObjects);\r\n    }\r\n\r\n    const actorKeys = actorDict.keysArray();\r\n    const workObjectKeys = workObjectDict.keysArray();\r\n\r\n    this.iconDictionaryService.updateIconRegistries([], [], customConfig);\r\n\r\n    this.iconDictionaryService\r\n      .getIconConfiguration()\r\n      .appendSRCFile(actorKeys, actorDict, workObjectKeys, workObjectDict);\r\n\r\n    this.iconDictionaryService.addIconsFromDomainConfiguration(\r\n      elementTypes.ACTOR,\r\n      actorKeys.map((a) => elementTypes.ACTOR + a)\r\n    );\r\n    this.iconDictionaryService.addIconsFromDomainConfiguration(\r\n      elementTypes.WORKOBJECT,\r\n      workObjectKeys.map((w) => elementTypes.WORKOBJECT + w)\r\n    );\r\n\r\n    if (updateDomainName) {\r\n      const configurationName = customConfig.name;\r\n      this.setDomainName(configurationName);\r\n    }\r\n  }\r\n\r\n  getCurrentConfiguration(): DomainConfiguration | undefined {\r\n    const actors = this.iconDictionaryService.getActorsDictionary();\r\n    const workObjects = this.iconDictionaryService.getWorkObjectsDictionary();\r\n\r\n    let domainConfiguration;\r\n\r\n    if (actors.size() > 0 && workObjects.size() > 0) {\r\n      domainConfiguration = this.createConfigFromDictionaries(\r\n        actors,\r\n        workObjects\r\n      );\r\n    }\r\n    return domainConfiguration;\r\n  }\r\n\r\n  getCurrentConfigurationForExport(): DomainConfigurationForExport | undefined {\r\n    const currentConfiguration = this.getCurrentConfiguration();\r\n\r\n    if (currentConfiguration) {\r\n      const actors: any = {};\r\n      const workObjects: any = {};\r\n\r\n      currentConfiguration.actors.all().forEach((entry) => {\r\n        actors[entry.key] = entry.value;\r\n      });\r\n      currentConfiguration.workObjects.all().forEach((entry) => {\r\n        workObjects[entry.key] = entry.value;\r\n      });\r\n\r\n      return {\r\n        name: currentConfiguration.name,\r\n        actors: actors,\r\n        workObjects: workObjects,\r\n      };\r\n    }\r\n    return;\r\n  }\r\n\r\n  getCurrentConfigurationNamesWithoutPrefix(): CustomDomainConfiguration {\r\n    return {\r\n      name: this.titleService.getDomainName() || INITIAL_DOMAIN_NAME,\r\n      actors: this.iconDictionaryService\r\n        .getActorsDictionary()\r\n        .keysArray()\r\n        .map((a) => a.replace(elementTypes.ACTOR, '')),\r\n      workObjects: this.iconDictionaryService\r\n        .getWorkObjectsDictionary()\r\n        .keysArray()\r\n        .map((w) => w.replace(elementTypes.WORKOBJECT, '')),\r\n    };\r\n  }\r\n\r\n  createMinimalConfigurationWithDefaultIcons(): DomainConfiguration {\r\n    const minimalConfig = this.createConfigFromCanvas();\r\n\r\n    defaultConf.actors.forEach((iconName) => {\r\n      minimalConfig.actors.add(\r\n        this.iconDictionaryService.getIconSource(iconName),\r\n        iconName\r\n      );\r\n    });\r\n    defaultConf.workObjects.forEach((iconName) => {\r\n      minimalConfig.workObjects.add(\r\n        this.iconDictionaryService.getIconSource(iconName),\r\n        iconName\r\n      );\r\n    });\r\n\r\n    return minimalConfig;\r\n  }\r\n\r\n  private createConfigFromDictionaries(\r\n    actorsDict: Dictionary,\r\n    workObjectsDict: Dictionary\r\n  ): DomainConfiguration {\r\n    const actorNames = actorsDict.keysArray();\r\n    const workobjectNames = workObjectsDict.keysArray();\r\n    const newActors = new Dictionary();\r\n    const newWorkobjects = new Dictionary();\r\n\r\n    // Fill Configuration from Canvas-Objects\r\n    actorNames.forEach((actor) => {\r\n      newActors.add(\r\n        actorsDict.get(actor),\r\n        actor.replace(elementTypes.ACTOR, '')\r\n      );\r\n    });\r\n    workobjectNames.forEach((workObject) => {\r\n      newWorkobjects.add(\r\n        workObjectsDict.get(workObject),\r\n        workObject.replace(elementTypes.WORKOBJECT, '')\r\n      );\r\n    });\r\n\r\n    return {\r\n      name: this.titleService.getDomainName(),\r\n      actors: newActors,\r\n      workObjects: newWorkobjects,\r\n    };\r\n  }\r\n\r\n  private createConfigFromCanvas(): DomainConfiguration {\r\n    const config = {\r\n      name: INITIAL_DOMAIN_NAME,\r\n      actors: new Dictionary(),\r\n      workObjects: new Dictionary(),\r\n    };\r\n\r\n    let allCanvasObjects = this.elementRegistryService.getAllCanvasObjects();\r\n\r\n    allCanvasObjects\r\n      .map((e) => e.businessObject)\r\n      .forEach((element) => {\r\n        const type = element.type\r\n          .replace(elementTypes.ACTOR, '')\r\n          .replace(elementTypes.WORKOBJECT, '');\r\n        if (element.type.includes(elementTypes.ACTOR)) {\r\n          let src = this.iconDictionaryService.getIconSource(type) || '';\r\n          config.actors.add(src, type);\r\n        } else if (element.type.includes(elementTypes.WORKOBJECT)) {\r\n          let src = this.iconDictionaryService.getIconSource(type) || '';\r\n          config.workObjects.add(src, type);\r\n        }\r\n      });\r\n\r\n    return config;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  CustomDomainConfiguration,\r\n  DomainConfiguration,\r\n} from '../../Domain/Common/domainConfiguration';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { DomainConfigurationService } from './domain-configuration.service';\r\nimport { IconDictionaryService } from './icon-dictionary.service';\r\nimport { getNameFromType } from '../../Utils/naming';\r\nimport { elementTypes } from '../../Domain/Common/elementTypes';\r\nimport { IconListItem } from '../../Domain/Domain-Configuration/iconListItem';\r\nimport { Dictionary } from '../../Domain/Common/dictionary/dictionary';\r\nimport { ImportDomainStoryService } from '../Import/import-domain-story.service';\r\nimport { TitleService } from '../Title/title.service';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport {\r\n  SNACKBAR_DURATION,\r\n  SNACKBAR_INFO,\r\n  SNACKBAR_SUCCESS,\r\n} from '../../Domain/Common/constants';\r\nimport { StorageService } from '../BrowserStorage/storage.service';\r\nimport { UsedIconList } from 'src/app/Domain/Domain-Configuration/UsedIconList';\r\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class DomainCustomizationService {\r\n  private readonly domainConfigurationTypes: BehaviorSubject<CustomDomainConfiguration>;\r\n\r\n  private allIconListItems = new Dictionary();\r\n\r\n  private configurationHasChanged = false;\r\n\r\n  selectedActors$ = new BehaviorSubject<string[]>([]);\r\n  selectedWorkobjects$ = new BehaviorSubject<string[]>([]);\r\n  private changedDomainCofiguration: DomainConfiguration | undefined;\r\n\r\n  constructor(\r\n    private configurationService: DomainConfigurationService,\r\n    private iconDictionaryService: IconDictionaryService,\r\n    private importService: ImportDomainStoryService,\r\n    private titleService: TitleService,\r\n    private storageService: StorageService,\r\n    private elementRegistryService: ElementRegistryService,\r\n    private snackbar: MatSnackBar\r\n  ) {\r\n    this.domainConfigurationTypes = new BehaviorSubject(\r\n      this.configurationService.getCurrentConfigurationNamesWithoutPrefix()\r\n    );\r\n\r\n    this.selectedWorkobjects$.next(\r\n      this.domainConfigurationTypes.value.workObjects\r\n    );\r\n    this.selectedActors$.next(this.domainConfigurationTypes.value.actors);\r\n\r\n    iconDictionaryService\r\n      .getAllIconDictionary()\r\n      .keysArray()\r\n      .forEach((iconName) => {\r\n        this.addIconToAllIconList(iconName);\r\n      });\r\n\r\n    importService.importedConfigurationEvent.subscribe((config) => {\r\n      this.importConfiguration(config);\r\n    });\r\n    const storedDomainConfiguration =\r\n      this.storageService.getStoredDomainConfiguration();\r\n    if (storedDomainConfiguration) {\r\n      this.importConfiguration(storedDomainConfiguration, false);\r\n    }\r\n    const importedConfiguration = this.importService.getImportedConfiguration();\r\n    if (importedConfiguration) {\r\n      this.importConfiguration(importedConfiguration, false);\r\n    }\r\n  }\r\n\r\n  importConfiguration(\r\n    customConfig: DomainConfiguration,\r\n    saveDomain = true\r\n  ): void {\r\n    const actorKeys = customConfig.actors.keysArray();\r\n    const workObjectKeys = customConfig.workObjects.keysArray();\r\n\r\n    actorKeys.forEach((iconName) => {\r\n      if (!this.allIconListItems.has(iconName)) {\r\n        this.addIconToAllIconList(iconName);\r\n      }\r\n      const selectedActorNames = this.selectedActors$.value;\r\n      if (!selectedActorNames.includes(iconName)) {\r\n        this.selectActor(iconName);\r\n      }\r\n    });\r\n    workObjectKeys.forEach((iconName) => {\r\n      if (!this.allIconListItems.has(iconName)) {\r\n        this.addIconToAllIconList(iconName);\r\n      }\r\n      const selectedWorkobjectNames = this.selectedWorkobjects$.value;\r\n      if (!selectedWorkobjectNames.includes(iconName)) {\r\n        this.selectWorkObject(iconName);\r\n      }\r\n    });\r\n    if (saveDomain) {\r\n      this.saveDomain(this.elementRegistryService.getUsedIcons(), true);\r\n    }\r\n  }\r\n\r\n  /** Getter & Setter **/\r\n  getDomainConfiguration(): BehaviorSubject<CustomDomainConfiguration> {\r\n    return this.domainConfigurationTypes;\r\n  }\r\n\r\n  getIconForName(iconName: string): BehaviorSubject<IconListItem> {\r\n    return this.allIconListItems.get(iconName);\r\n  }\r\n\r\n  isIconActor(iconName: string): boolean {\r\n    return (\r\n      this.domainConfigurationTypes.value.actors.filter(\r\n        (actor: string) => actor === iconName\r\n      ).length > 0\r\n    );\r\n  }\r\n\r\n  isIconWorkObject(iconName: string): boolean {\r\n    return (\r\n      this.domainConfigurationTypes.value.workObjects.filter(\r\n        (workObject: string) => workObject === iconName\r\n      ).length > 0\r\n    );\r\n  }\r\n\r\n  changeName(domainName: string): void {\r\n    this.titleService.setDomainName(domainName);\r\n    const changedDomain = this.domainConfigurationTypes.value;\r\n    changedDomain.name = domainName;\r\n    this.domainConfigurationTypes.next(changedDomain);\r\n  }\r\n\r\n  /** Seleted Icons **/\r\n  setAsUnassigned(iconName: string, isActor: boolean): void {\r\n    if (isActor) {\r\n      this.deselectActor(iconName);\r\n    } else {\r\n      this.deselectWorkobject(iconName);\r\n    }\r\n    this.updateIcon(false, false, iconName);\r\n  }\r\n\r\n  setAsActor(isActor: boolean, actor: string): void {\r\n    if (isActor) {\r\n      this.updateIcon(true, false, actor);\r\n      this.selectActor(actor);\r\n      this.deselectWorkobject(actor);\r\n    } else {\r\n      this.deselectActor(actor);\r\n      this.updateIcon(false, false, actor);\r\n    }\r\n  }\r\n\r\n  setAsWorkobject(isWorkobject: boolean, workobject: string): void {\r\n    if (isWorkobject) {\r\n      this.updateIcon(false, true, workobject);\r\n      this.selectWorkObject(workobject);\r\n      this.deselectActor(workobject);\r\n    } else {\r\n      this.deselectWorkobject(workobject);\r\n      this.updateIcon(false, false, workobject);\r\n    }\r\n  }\r\n\r\n  selectActor(actor: string): void {\r\n    const value = this.domainConfigurationTypes.value;\r\n    if (!value.actors.includes(actor)) {\r\n      value.actors.push(actor);\r\n      this.domainConfigurationTypes.next(value);\r\n      this.updateActorSubject();\r\n    }\r\n  }\r\n\r\n  selectWorkObject(workObject: string): void {\r\n    const value = this.domainConfigurationTypes.value;\r\n    if (!value.workObjects.includes(workObject)) {\r\n      value.workObjects.push(workObject);\r\n      this.domainConfigurationTypes.next(value);\r\n      this.updateWorkObjectSubject();\r\n    }\r\n  }\r\n\r\n  deselectActor(actor: string): void {\r\n    if (this.domainConfigurationTypes) {\r\n      this.domainConfigurationTypes.next({\r\n        name: this.domainConfigurationTypes.value.name,\r\n        actors: this.domainConfigurationTypes.value.actors.filter(\r\n          (a: string) => !a.includes(actor)\r\n        ),\r\n        workObjects: this.domainConfigurationTypes.value.workObjects,\r\n      });\r\n    }\r\n    this.updateActorSubject();\r\n  }\r\n\r\n  deselectWorkobject(workobject: string): void {\r\n    if (this.domainConfigurationTypes) {\r\n      this.domainConfigurationTypes.next({\r\n        name: this.domainConfigurationTypes.value.name,\r\n        actors: this.domainConfigurationTypes.value.actors,\r\n        workObjects: this.domainConfigurationTypes.value.workObjects.filter(\r\n          (w: string) => !w.includes(workobject)\r\n        ),\r\n      });\r\n    }\r\n    this.updateWorkObjectSubject();\r\n  }\r\n\r\n  setSelectedWorkObject(sortedList: string[]): void {\r\n    const value = this.domainConfigurationTypes.value;\r\n    value.workObjects = sortedList;\r\n    this.domainConfigurationTypes.next(value);\r\n    this.updateWorkObjectSubject();\r\n  }\r\n\r\n  setSelectedActors(sortedList: string[]): void {\r\n    const value = this.domainConfigurationTypes.value;\r\n    value.actors = sortedList;\r\n    this.domainConfigurationTypes.next(value);\r\n    this.updateActorSubject();\r\n  }\r\n\r\n  private updateActorSubject(): void {\r\n    this.selectedActors$.next(this.domainConfigurationTypes.value.actors);\r\n    this.configurationHasChanged = true;\r\n  }\r\n\r\n  private updateWorkObjectSubject(): void {\r\n    this.selectedWorkobjects$.next(\r\n      this.domainConfigurationTypes.value.workObjects\r\n    );\r\n    this.configurationHasChanged = true;\r\n  }\r\n\r\n  /** Revert Domain **/\r\n  resetDomain(): void {\r\n    const defaultConfig =\r\n      this.configurationService.createMinimalConfigurationWithDefaultIcons();\r\n\r\n    this.selectedWorkobjects$.value.forEach((workObjectName) => {\r\n      if (!defaultConfig.workObjects.has(workObjectName)) {\r\n        this.deselectWorkobject(workObjectName);\r\n      }\r\n    });\r\n    this.selectedActors$.value.forEach((actorName) => {\r\n      if (!defaultConfig.actors.has(actorName)) {\r\n        this.deselectActor(actorName);\r\n      }\r\n    });\r\n\r\n    this.domainConfigurationTypes.next({\r\n      name: defaultConfig.name,\r\n      actors: defaultConfig.actors.keysArray(),\r\n      workObjects: defaultConfig.workObjects.keysArray(),\r\n    } as CustomDomainConfiguration);\r\n\r\n    this.updateAllIconBehaviourSubjects();\r\n  }\r\n\r\n  cancel(): void {\r\n    this.domainConfigurationTypes.next(\r\n      this.configurationService.getCurrentConfigurationNamesWithoutPrefix()\r\n    );\r\n    this.updateAllIconBehaviourSubjects();\r\n    this.resetToInitialConfiguration();\r\n  }\r\n\r\n  private resetToInitialConfiguration(): void {\r\n    this.updateActorSubject();\r\n    this.updateWorkObjectSubject();\r\n  }\r\n\r\n  /** Persist Domain **/\r\n  saveDomain(usedIcons: UsedIconList, imported = false): void {\r\n    const changedActors: string[] = [];\r\n    const changedWorkobjects: string[] = [];\r\n    if (this.configurationHasChanged) {\r\n      const changedDomain = this.createDomainConfiguration();\r\n\r\n      const configurationActors = changedDomain.actors.keysArray();\r\n      usedIcons?.actors.forEach((actor) => {\r\n        if (\r\n          !configurationActors?.includes(actor) &&\r\n          !changedActors.includes(actor)\r\n        ) {\r\n          changedActors.push(actor);\r\n        }\r\n      });\r\n      const configurationWorkobjects = changedDomain.workObjects.keysArray();\r\n      usedIcons?.workobjects.forEach((workobject) => {\r\n        if (\r\n          !configurationWorkobjects?.includes(workobject) &&\r\n          !changedWorkobjects.includes(workobject)\r\n        ) {\r\n          changedWorkobjects.push(workobject);\r\n        }\r\n      });\r\n\r\n      if (!changedActors.length && !changedWorkobjects.length) {\r\n        this.changedDomainCofiguration = changedDomain;\r\n\r\n        this.updateIcons(changedDomain);\r\n\r\n        this.storageService.setStoredDomainConfiguration(\r\n          this.changedDomainCofiguration\r\n        );\r\n        this.snackbar.open(\r\n          imported\r\n            ? 'Configuration imported successfully'\r\n            : 'Configuration saved sucessfully',\r\n          undefined,\r\n          {\r\n            duration: SNACKBAR_DURATION,\r\n            panelClass: SNACKBAR_SUCCESS,\r\n          }\r\n        );\r\n      }\r\n    } else {\r\n      this.snackbar.open(\r\n        imported\r\n          ? 'No configuration to be imported'\r\n          : 'No configuration to be saved',\r\n        undefined,\r\n        {\r\n          duration: SNACKBAR_DURATION,\r\n          panelClass: SNACKBAR_INFO,\r\n        }\r\n      );\r\n    }\r\n    if (changedActors.length || changedWorkobjects.length) {\r\n      if (changedActors.length) {\r\n        const actors = changedActors.join(', ');\r\n        this.snackbar.open(\r\n          `The following icons are already in use as actors and cannot be changed: ${actors}`,\r\n          undefined,\r\n          {\r\n            duration: SNACKBAR_DURATION * 3,\r\n            panelClass: SNACKBAR_INFO,\r\n          }\r\n        );\r\n      }\r\n      if (changedWorkobjects.length) {\r\n        const workobjects = changedWorkobjects.join(', ');\r\n        this.snackbar.open(\r\n          `The following icons are already in use as workobjects and cannot be changed: ${workobjects}`,\r\n          undefined,\r\n          {\r\n            duration: SNACKBAR_DURATION * 3,\r\n            panelClass: SNACKBAR_INFO,\r\n          }\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  exportDomain(): void {\r\n    this.configurationService.exportConfiguration();\r\n  }\r\n\r\n  getAndClearSavedConfiguration(): DomainConfiguration | undefined {\r\n    const temp = this.changedDomainCofiguration;\r\n    this.changedDomainCofiguration = undefined;\r\n\r\n    return temp;\r\n  }\r\n\r\n  private createDomainConfiguration(): DomainConfiguration {\r\n    const actors = new Dictionary();\r\n    const workObjects = new Dictionary();\r\n\r\n    this.domainConfigurationTypes.value.actors.forEach((type: string) => {\r\n      actors.add(this.iconDictionaryService.getIconSource(type), type);\r\n    });\r\n    this.domainConfigurationTypes.value.workObjects.forEach((type: string) => {\r\n      workObjects.add(this.iconDictionaryService.getIconSource(type), type);\r\n    });\r\n\r\n    return {\r\n      name: this.domainConfigurationTypes.value.name || '',\r\n      actors,\r\n      workObjects,\r\n    };\r\n  }\r\n\r\n  /** Update Icons **/\r\n  addNewIcon(iconName: string): void {\r\n    const iconDict = new Dictionary();\r\n    iconDict.add(this.getSrcForIcon(iconName), iconName);\r\n    this.iconDictionaryService.addIconsToCss(iconDict);\r\n    this.addIconToAllIconList(iconName);\r\n  }\r\n\r\n  private addIconToAllIconList(iconName: string): void {\r\n    this.allIconListItems.add(\r\n      new BehaviorSubject({\r\n        name: iconName,\r\n        svg: this.getSrcForIcon(iconName),\r\n        isActor: this.isIconActor(iconName),\r\n        isWorkObject: this.isIconWorkObject(iconName),\r\n      }),\r\n      iconName\r\n    );\r\n  }\r\n\r\n  private updateIcon(\r\n    isActor: boolean,\r\n    isWorkobject: boolean,\r\n    iconName: string\r\n  ) {\r\n    const iconBehaviourSubject = this.getIconForName(iconName);\r\n    const icon = iconBehaviourSubject.value;\r\n    icon.isActor = isActor;\r\n    icon.isWorkObject = isWorkobject;\r\n\r\n    iconBehaviourSubject.next(icon);\r\n  }\r\n\r\n  private updateAllIconBehaviourSubjects(): void {\r\n    const customDomainCofiguration = this.domainConfigurationTypes.value;\r\n    this.allIconListItems.keysArray().forEach((iconName) => {\r\n      if (customDomainCofiguration.actors.includes(iconName)) {\r\n        this.updateIcon(true, false, iconName);\r\n      } else if (customDomainCofiguration.workObjects.includes(iconName)) {\r\n        this.updateIcon(false, true, iconName);\r\n      } else {\r\n        this.updateIcon(false, false, iconName);\r\n      }\r\n    });\r\n  }\r\n\r\n  private getSrcForIcon(name: string): string {\r\n    let iconName: string;\r\n    if (name.includes(elementTypes.DOMAINSTORY)) {\r\n      iconName = getNameFromType(name);\r\n    } else {\r\n      iconName = name;\r\n    }\r\n    const rawSrc = this.iconDictionaryService.getIconSource(iconName);\r\n\r\n    if (!rawSrc) {\r\n      return '';\r\n    }\r\n\r\n    if (rawSrc.startsWith('data')) {\r\n      return rawSrc;\r\n    } else {\r\n      return 'data:image/svg+xml,' + rawSrc;\r\n    }\r\n  }\r\n\r\n  private updateIcons(changedDomain: DomainConfiguration) {\r\n    this.allIconListItems\r\n      .keysArray()\r\n      .forEach((item) => this.setAsUnassigned(item, this.isIconActor(item)));\r\n    changedDomain.actors\r\n      .keysArray()\r\n      .forEach((actor) => this.setAsActor(true, actor));\r\n    changedDomain.workObjects\r\n      .keysArray()\r\n      .forEach((workObject) => this.setAsWorkobject(true, workObject));\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Dictionary } from 'src/app/Domain/Common/dictionary/dictionary';\r\nimport { elementTypes } from 'src/app/Domain/Common/elementTypes';\r\nimport { getNameFromType } from 'src/app/Utils/naming';\r\nimport {\r\n  allIcons,\r\n  appendedIcons,\r\n} from 'src/app/Domain/Domain-Configuration/allIcons';\r\nimport {\r\n  defaultConf,\r\n  IconConfiguration,\r\n} from 'src/app/Domain/Common/iconConfiguration';\r\nimport { Configuration } from 'src/app/Domain/Common/configuration';\r\nimport { BusinessObject } from 'src/app/Domain/Common/businessObject';\r\nimport { DomainConfiguration } from 'src/app/Domain/Common/domainConfiguration';\r\nimport { sanitizeIconName } from '../../Utils/sanitizer';\r\n\r\nexport const ICON_PREFIX = 'icon-domain-story-';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class IconDictionaryService {\r\n  private actorIconDictionary = new Dictionary();\r\n  private workObjectDictionary = new Dictionary();\r\n\r\n  private allIconDictionary = new Dictionary();\r\n  private iconDictionaryForBPMN = new Dictionary();\r\n\r\n  private customConfiguration?: DomainConfiguration;\r\n\r\n  private readonly iconConfig: IconConfiguration;\r\n\r\n  constructor() {\r\n    this.allIconDictionary.addEach(allIcons);\r\n    this.iconConfig = new IconConfiguration(this.allIconDictionary);\r\n  }\r\n\r\n  initTypeDictionaries(actors: string[], workObjects: string[]): void {\r\n    if (!actors || actors.length == 0) {\r\n      actors = defaultConf.actors;\r\n    }\r\n    if (!workObjects || workObjects.length == 0) {\r\n      workObjects = defaultConf.workObjects;\r\n    }\r\n\r\n    const allTypes = new Dictionary();\r\n    allTypes.addEach(allIcons);\r\n    allTypes.appendDict(this.getAppendedIconDictionary());\r\n\r\n    this.initDictionary(\r\n      actors,\r\n      allTypes,\r\n      this.actorIconDictionary,\r\n      elementTypes.ACTOR\r\n    );\r\n    this.initDictionary(\r\n      workObjects,\r\n      allTypes,\r\n      this.workObjectDictionary,\r\n      elementTypes.WORKOBJECT\r\n    );\r\n  }\r\n\r\n  private initDictionary(\r\n    keys: string[],\r\n    allTypes: Dictionary,\r\n    dictionary: Dictionary,\r\n    namePrefix: elementTypes\r\n  ) {\r\n    dictionary.clear();\r\n    for (const key of keys) {\r\n      const name = namePrefix + key;\r\n      dictionary.add(allTypes.get(key), name);\r\n    }\r\n\r\n    dictionary.keysArray().forEach((entry) => {\r\n      const name = getNameFromType(entry);\r\n      this.registerIconForBPMN(\r\n        entry,\r\n        ICON_PREFIX + sanitizeIconName(name.toLowerCase())\r\n      );\r\n    });\r\n  }\r\n\r\n  getCurrentIconConfigurationForBPMN(): Configuration {\r\n    if (this.customConfiguration) {\r\n      return this.iconConfig.createCustomConf(this.customConfiguration);\r\n    }\r\n    return this.iconConfig.getDefaultConf();\r\n  }\r\n\r\n  allInTypeDictionary(type: elementTypes, elements: BusinessObject[]): boolean {\r\n    let collection: Dictionary;\r\n    if (type === elementTypes.ACTOR) {\r\n      collection = this.actorIconDictionary;\r\n    } else if (type === elementTypes.WORKOBJECT) {\r\n      collection = this.workObjectDictionary;\r\n    }\r\n\r\n    let allIn = true;\r\n    if (elements) {\r\n      elements.forEach((element) => {\r\n        if (!collection.has(element.type)) {\r\n          allIn = false;\r\n        }\r\n      });\r\n    } else {\r\n      return false;\r\n    }\r\n    return allIn;\r\n  }\r\n\r\n  /** Load Icons from Configuration **/\r\n\r\n  addIconsFromDomainConfiguration(\r\n    dictionaryType: elementTypes,\r\n    iconTypes: string[]\r\n  ): void {\r\n    let collection: Dictionary;\r\n    if (dictionaryType === elementTypes.ACTOR) {\r\n      collection = this.actorIconDictionary;\r\n    } else if (dictionaryType === elementTypes.WORKOBJECT) {\r\n      collection = this.workObjectDictionary;\r\n    }\r\n\r\n    const allTypes = new Dictionary();\r\n    allTypes.addEach(allIcons);\r\n    allTypes.appendDict(appendedIcons);\r\n\r\n    iconTypes.forEach((type) => {\r\n      if (!collection.has(type)) {\r\n        const name = getNameFromType(type);\r\n        const src = allTypes.get(name);\r\n        if (src) {\r\n          this.registerIconForType(dictionaryType, type, src);\r\n          this.registerIconForBPMN(\r\n            type,\r\n            sanitizeIconName(ICON_PREFIX + name.toLowerCase())\r\n          );\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /** Add Icon(s) to Dictionary **/\r\n  registerIconForBPMN(name: string, src: string): void {\r\n    this.iconDictionaryForBPMN.set(name, src);\r\n  }\r\n\r\n  addIconsToTypeDictionary(\r\n    actorIcons: BusinessObject[],\r\n    workObjectIcons: BusinessObject[]\r\n  ) {\r\n    if (!this.allInTypeDictionary(elementTypes.ACTOR, actorIcons)) {\r\n      this.addIconsFromDomainConfiguration(\r\n        elementTypes.ACTOR,\r\n        actorIcons.map((element) => element.type)\r\n      );\r\n    }\r\n    if (!this.allInTypeDictionary(elementTypes.WORKOBJECT, workObjectIcons)) {\r\n      this.addIconsFromDomainConfiguration(\r\n        elementTypes.WORKOBJECT,\r\n        workObjectIcons.map((element) => element.type)\r\n      );\r\n    }\r\n  }\r\n\r\n  registerIconForType(type: elementTypes, name: string, src: string): void {\r\n    if (!name.includes(type)) {\r\n      name = type + name;\r\n    }\r\n\r\n    let collection = new Dictionary();\r\n    if (type === elementTypes.ACTOR) {\r\n      collection = this.actorIconDictionary;\r\n    } else if (type === elementTypes.WORKOBJECT) {\r\n      collection = this.workObjectDictionary;\r\n    }\r\n    collection.set(name, src);\r\n  }\r\n\r\n  updateIconRegistries(\r\n    actors: BusinessObject[],\r\n    workObjects: BusinessObject[],\r\n    config: DomainConfiguration\r\n  ): void {\r\n    const elements: BusinessObject[] = [];\r\n\r\n    actors.forEach((a) => elements.push(a));\r\n    workObjects.forEach((w) => elements.push(w));\r\n\r\n    const customIcons = new Dictionary();\r\n\r\n    const actorsDict = new Dictionary();\r\n    const workObjectsDict = new Dictionary();\r\n    config.actors.keysArray().forEach((key) => {\r\n      actorsDict.add(config.actors.get(key), key);\r\n    });\r\n    config.workObjects.keysArray().forEach((key) => {\r\n      workObjectsDict.add(config.workObjects.get(key), key);\r\n    });\r\n\r\n    this.extractCustomIconsFromDictionary(actorsDict, customIcons);\r\n    this.extractCustomIconsFromDictionary(workObjectsDict, customIcons);\r\n\r\n    elements.forEach((element) => {\r\n      const name = sanitizeIconName(\r\n        element.type\r\n          .replace(elementTypes.ACTOR, '')\r\n          .replace(elementTypes.WORKOBJECT, '')\r\n      );\r\n      if (\r\n        (element.type.includes(elementTypes.ACTOR) ||\r\n          element.type.includes(elementTypes.WORKOBJECT)) &&\r\n        !this.getFullDictionary().has(name)\r\n      ) {\r\n        this.registerIconForBPMN(\r\n          ICON_PREFIX + name.toLowerCase(),\r\n          element.type\r\n        );\r\n      }\r\n    });\r\n\r\n    this.addNewIconsToDictionary(customIcons);\r\n    this.addIconsToTypeDictionary(actors, workObjects);\r\n  }\r\n\r\n  private extractCustomIconsFromDictionary(\r\n    elementDictionary: Dictionary,\r\n    customIcons: Dictionary\r\n  ) {\r\n    elementDictionary.keysArray().forEach((name) => {\r\n      const sanitizedName = sanitizeIconName(name);\r\n      if (!this.getFullDictionary().has(sanitizedName)) {\r\n        customIcons.add(elementDictionary.get(name), sanitizedName);\r\n      }\r\n    });\r\n  }\r\n\r\n  /** Add new Icon(s) **/\r\n\r\n  addNewIconsToDictionary(customIcons: Dictionary) {\r\n    customIcons.keysArray().forEach((key) => {\r\n      const custom = customIcons.get(key);\r\n      this.addIMGToIconDictionary(custom.src, key);\r\n    });\r\n    this.addIconsToCss(customIcons);\r\n  }\r\n\r\n  addIMGToIconDictionary(input: string, name: string): void {\r\n    appendedIcons.set(name, input);\r\n  }\r\n\r\n  addIconsToCss(customIcons: Dictionary) {\r\n    const sheetEl = document.getElementById('iconsCss');\r\n    customIcons.keysArray().forEach((key) => {\r\n      const src = customIcons.get(key);\r\n      const iconStyle =\r\n        '.' +\r\n        ICON_PREFIX +\r\n        sanitizeIconName(key.toLowerCase()) +\r\n        '::before{ content: url(\"data:image/svg+xml;utf8,' +\r\n        this.wrapSRCInSVG(src) +\r\n        '\"); margin: 3px;}';\r\n      // @ts-ignore\r\n      sheetEl?.sheet?.insertRule(iconStyle, sheetEl.sheet.cssRules.length);\r\n    });\r\n  }\r\n\r\n  private wrapSRCInSVG(src: string): string {\r\n    return (\r\n      \"<svg viewBox='0 0 22 22' width='22' height='22' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><image width='22' height='22' xlink:href='\" +\r\n      src +\r\n      \"'/></svg>\"\r\n    );\r\n  }\r\n\r\n  /** Getter & Setter **/\r\n\r\n  getFullDictionary(): Dictionary {\r\n    const fullDictionary = new Dictionary();\r\n    fullDictionary.appendDict(this.allIconDictionary);\r\n    fullDictionary.appendDict(this.getAppendedIconDictionary());\r\n    return fullDictionary;\r\n  }\r\n\r\n  getAppendedIconDictionary(): Dictionary {\r\n    const appendedDict = new Dictionary();\r\n    appendedIcons.keysArray().forEach((key) => {\r\n      if (!this.allIconDictionary.has(key)) {\r\n        appendedDict.set(key, appendedIcons.get(key));\r\n      }\r\n    });\r\n    return appendedDict;\r\n  }\r\n\r\n  getTypeDictionary(type: elementTypes): Dictionary {\r\n    if (type === elementTypes.ACTOR) {\r\n      return this.actorIconDictionary;\r\n    } else if (type === elementTypes.WORKOBJECT) {\r\n      return this.workObjectDictionary;\r\n    }\r\n    return new Dictionary();\r\n  }\r\n\r\n  getTypeDictionaryKeys(type: elementTypes): string[] {\r\n    return this.getTypeDictionary(type).keysArray();\r\n  }\r\n\r\n  getTypeIconSRC(type: elementTypes, name: string): string | null {\r\n    if (type === elementTypes.ACTOR) {\r\n      if (!name.startsWith(elementTypes.ACTOR)) {\r\n        name = elementTypes.ACTOR + name;\r\n      }\r\n      return this.actorIconDictionary.get(name);\r\n    } else if (type === elementTypes.WORKOBJECT) {\r\n      if (!name.startsWith(elementTypes.WORKOBJECT)) {\r\n        name = elementTypes.WORKOBJECT + name;\r\n      }\r\n      return this.workObjectDictionary.get(name);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getIconForBPMN(type: elementTypes): string | null {\r\n    return this.iconDictionaryForBPMN.get(type);\r\n  }\r\n\r\n  getIconSource(name: string): string | null {\r\n    if (this.allIconDictionary.has(name)) {\r\n      return this.allIconDictionary.get(name);\r\n    } else if (appendedIcons.has(name)) {\r\n      return appendedIcons.get(name);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getElementsOfType(\r\n    elements: BusinessObject[],\r\n    type: elementTypes\r\n  ): BusinessObject[] {\r\n    const elementOfType: any = [];\r\n    elements.forEach((element) => {\r\n      if (element.type.includes(type)) {\r\n        elementOfType.push(element);\r\n      }\r\n    });\r\n    return elementOfType;\r\n  }\r\n\r\n  getAllIconDictionary(): Dictionary {\r\n    return this.allIconDictionary;\r\n  }\r\n\r\n  getActorsDictionary(): Dictionary {\r\n    return this.actorIconDictionary;\r\n  }\r\n\r\n  getWorkObjectsDictionary(): Dictionary {\r\n    return this.workObjectDictionary;\r\n  }\r\n\r\n  getIconConfiguration(): IconConfiguration {\r\n    return this.iconConfig;\r\n  }\r\n\r\n  setCusomtConfiguration(customConfiguration: DomainConfiguration): void {\r\n    this.customConfiguration = customConfiguration;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { elementTypes } from 'src/app/Domain/Common/elementTypes';\r\nimport { CanvasObject } from 'src/app/Domain/Common/canvasObject';\r\nimport { GroupCanvasObject } from '../../Domain/Common/groupCanvasObject';\r\nimport { ActivityCanvasObject } from '../../Domain/Common/activityCanvasObject';\r\nimport { UsedIconList } from 'src/app/Domain/Domain-Configuration/UsedIconList';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ElementRegistryService {\r\n  private registry: any;\r\n  private fullyInitialized = false;\r\n\r\n  /**\r\n   * Initially the registry has only the root-Element.\r\n   * Once the canvas has bees initialized, we adjust the reference to point to the elements on the canvas for convenience\r\n   */\r\n  correctInitialize(): void {\r\n    if (!this.fullyInitialized) {\r\n      if (this.registry.__implicitroot) {\r\n        this.registry = this.registry.__implicitroot.element.children;\r\n        this.fullyInitialized = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  setElementRegistry(registry: any): void {\r\n    this.registry = registry._elements;\r\n  }\r\n\r\n  clear(): void {\r\n    this.registry = null;\r\n    this.fullyInitialized = false;\r\n  }\r\n\r\n  createObjectListForDSTDownload(): CanvasObject[] {\r\n    if (this.registry) {\r\n      const allObjectsFromCanvas = this.getAllCanvasObjects();\r\n      const groups = this.getAllGroups();\r\n\r\n      const objectList: CanvasObject[] = [];\r\n\r\n      this.fillListOfCanvasObjects(allObjectsFromCanvas, objectList, groups);\r\n\r\n      return objectList;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  private fillListOfCanvasObjects(\r\n    allObjectsFromCanvas: CanvasObject[],\r\n    objectList: CanvasObject[],\r\n    groups: GroupCanvasObject[]\r\n  ): void {\r\n    allObjectsFromCanvas.forEach((canvasElement) => {\r\n      if (canvasElement.type === elementTypes.ACTIVITY) {\r\n        objectList.push(canvasElement);\r\n      }\r\n\r\n      // ensure that Activities are always after Actors, Workobjects and Groups in .dst files\r\n      else {\r\n        if (canvasElement.type === elementTypes.TEXTANNOTATION) {\r\n          canvasElement.businessObject.width = canvasElement.width;\r\n          canvasElement.businessObject.height = canvasElement.height;\r\n        }\r\n        if (!objectList.includes(canvasElement)) {\r\n          objectList.unshift(canvasElement);\r\n        }\r\n      }\r\n    });\r\n\r\n    groups.forEach((group) => {\r\n      objectList.push(group);\r\n    });\r\n  }\r\n\r\n  getAllActivities(): ActivityCanvasObject[] {\r\n    const activities: ActivityCanvasObject[] = [];\r\n\r\n    this.getAllCanvasObjects().forEach((element) => {\r\n      if (element.type.includes(elementTypes.ACTIVITY)) {\r\n        activities.push(element as ActivityCanvasObject);\r\n      }\r\n    });\r\n    return activities;\r\n  }\r\n\r\n  getAllConnections(): ActivityCanvasObject[] {\r\n    const connections: ActivityCanvasObject[] = [];\r\n    this.getAllCanvasObjects().forEach((element) => {\r\n      const type = element.type;\r\n      if (type === elementTypes.CONNECTION) {\r\n        connections.push(element as ActivityCanvasObject);\r\n      }\r\n    });\r\n    return connections;\r\n  }\r\n\r\n  getAllCanvasObjects(): CanvasObject[] {\r\n    const allObjects: CanvasObject[] = [];\r\n    const groupObjects: GroupCanvasObject[] = [];\r\n\r\n    this.checkChildForGroup(groupObjects, allObjects);\r\n\r\n    // for each memorized group, remove it from the group-array and check its children, whether they are groups or not\r\n    // if a child is a group, memorize it in the group-array\r\n    // other children should already be in the allObjects list\r\n    let i = groupObjects.length - 1;\r\n    while (groupObjects.length >= 1) {\r\n      const currentGroup = groupObjects.pop();\r\n      // @ts-ignore\r\n      currentGroup.children.forEach((child: CanvasObject) => {\r\n        const type = child.type;\r\n        if (type.includes(elementTypes.GROUP)) {\r\n          groupObjects.push(child as GroupCanvasObject);\r\n        }\r\n      });\r\n      i = groupObjects.length - 1;\r\n    }\r\n    return allObjects;\r\n  }\r\n\r\n  // returns all groups on the canvas and inside other groups\r\n  getAllGroups(): GroupCanvasObject[] {\r\n    const groupObjects: GroupCanvasObject[] = [];\r\n    const allObjects: CanvasObject[] = [];\r\n\r\n    this.checkChildForGroup(groupObjects, allObjects);\r\n\r\n    for (const group of groupObjects) {\r\n      group.children?.forEach((child: CanvasObject) => {\r\n        if (child.type.includes(elementTypes.GROUP)) {\r\n          groupObjects.push(child as GroupCanvasObject);\r\n        }\r\n      });\r\n    }\r\n    return groupObjects;\r\n  }\r\n\r\n  private checkChildForGroup(\r\n    groupObjects: GroupCanvasObject[],\r\n    allObjects: CanvasObject[]\r\n  ): void {\r\n    const registryElementNames = Object.keys(this.registry);\r\n    for (let name of registryElementNames) {\r\n      const entry = this.registry[name].element;\r\n      if (entry.businessObject) {\r\n        const type = entry.type;\r\n        if (type && type.includes(elementTypes.GROUP)) {\r\n          // if it is a group, memorize this for later\r\n          groupObjects.push(entry);\r\n        } else if (type) {\r\n          allObjects.push(entry);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // get a list of activities, that originate from an actor-type\r\n  getActivitiesFromActors(): ActivityCanvasObject[] {\r\n    const activitiesFromActors: ActivityCanvasObject[] = [];\r\n    const activities = this.getAllActivities();\r\n\r\n    activities.forEach((activity: ActivityCanvasObject) => {\r\n      if (activity.source?.type.includes(elementTypes.ACTOR)) {\r\n        activitiesFromActors.push(activity);\r\n      }\r\n    });\r\n    return activitiesFromActors;\r\n  }\r\n\r\n  getUsedIcons(): UsedIconList {\r\n    const actors = this.getAllActors();\r\n    const workobjects = this.getAllWorkobjects();\r\n\r\n    return {\r\n      actors: actors.map((a) => a.type.replace(elementTypes.ACTOR, '')),\r\n      workobjects: workobjects.map((w) =>\r\n        w.type.replace(elementTypes.WORKOBJECT, '')\r\n      ),\r\n    };\r\n  }\r\n\r\n  private getAllActors() {\r\n    return this.getAllCanvasObjects().filter((co) =>\r\n      co.type.includes(elementTypes.ACTOR)\r\n    );\r\n  }\r\n\r\n  private getAllWorkobjects() {\r\n    return this.getAllCanvasObjects().filter((co) =>\r\n      co.type.includes(elementTypes.WORKOBJECT)\r\n    );\r\n  }\r\n}\r\n","import { Injectable, OnDestroy } from '@angular/core';\r\nimport { DomainConfigurationService } from 'src/app/Service/DomainConfiguration/domain-configuration.service';\r\nimport { sanitizeForDesktop } from 'src/app/Utils/sanitizer';\r\nimport { TitleService } from 'src/app/Service/Title/title.service';\r\nimport { ConfigAndDST } from 'src/app/Domain/Export/configAndDst';\r\nimport { DirtyFlagService } from 'src/app/Service/DirtyFlag/dirty-flag.service';\r\nimport { PngService } from 'src/app/Service/Export/png.service';\r\nimport { SvgService } from 'src/app/Service/Export/svg.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { RendererService } from '../Renderer/renderer.service';\r\nimport { HtmlPresentationService } from './html-presentation.service';\r\nimport { VERSION } from '../../Domain/Common/constants';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ExportService implements OnDestroy {\r\n  titleSubscription: Subscription;\r\n  descriptionSubscription: Subscription;\r\n\r\n  title = '';\r\n  description = '';\r\n\r\n  constructor(\r\n    private configurationService: DomainConfigurationService,\r\n    private titleService: TitleService,\r\n    private dirtyFlagService: DirtyFlagService,\r\n    private pngService: PngService,\r\n    private svgService: SvgService,\r\n    private htmlPresentationService: HtmlPresentationService,\r\n    private rendererService: RendererService\r\n  ) {\r\n    this.titleSubscription = this.titleService.title$.subscribe(\r\n      (title: string) => {\r\n        this.title = title;\r\n      }\r\n    );\r\n    this.descriptionSubscription = this.titleService.description$.subscribe(\r\n      (description: string) => {\r\n        this.description = description;\r\n      }\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.titleSubscription.unsubscribe();\r\n    this.descriptionSubscription.unsubscribe();\r\n  }\r\n\r\n  isDomainStoryExportable(): boolean {\r\n    return this.rendererService.getStory().length >= 1;\r\n  }\r\n\r\n  createConfigAndDST(DomainStory: any): ConfigAndDST {\r\n    return new ConfigAndDST(\r\n      this.configurationService.getCurrentConfigurationForExport(),\r\n      DomainStory\r\n    );\r\n  }\r\n\r\n  downloadDST(): void {\r\n    const dst = this.getStoryForDownload();\r\n    const configAndDST = this.createConfigAndDST(dst);\r\n    const json = JSON.stringify(configAndDST, null, 2);\r\n\r\n    const filename = sanitizeForDesktop(\r\n      this.title + '_' + new Date().toString().slice(0, 10)\r\n    );\r\n\r\n    this.downloadFile(\r\n      json,\r\n      'data:text/plain;charset=utf-8,',\r\n      filename,\r\n      '.egn',\r\n      true\r\n    );\r\n  }\r\n\r\n  private downloadFile(\r\n    data: string,\r\n    datatype: string,\r\n    filename: string,\r\n    fileEnding: string,\r\n    makeClean: boolean\r\n  ) {\r\n    const element = document.createElement('a');\r\n    element.setAttribute('href', datatype + encodeURIComponent(data));\r\n    element.setAttribute('download', filename + fileEnding);\r\n\r\n    element.style.display = 'none';\r\n    document.body.appendChild(element);\r\n\r\n    element.click();\r\n\r\n    if (makeClean) {\r\n      this.dirtyFlagService.makeClean();\r\n    }\r\n\r\n    document.body.removeChild(element);\r\n  }\r\n\r\n  downloadSVG(withTitle: boolean, useWhiteBackground: boolean): void {\r\n    const story = this.getStoryForDownload();\r\n    const dst = this.createConfigAndDST(story);\r\n\r\n    const svgData = this.svgService.createSVGData(\r\n      this.title,\r\n      this.description,\r\n      dst,\r\n      withTitle,\r\n      useWhiteBackground\r\n    );\r\n\r\n    this.downloadFile(\r\n      svgData,\r\n      'data:application/bpmn20-xml;charset=UTF-8,',\r\n      sanitizeForDesktop(this.title),\r\n      '.egn.svg',\r\n      true\r\n    );\r\n  }\r\n\r\n  downloadPNG(withTitle: boolean): void {\r\n    const canvas = document.getElementById('canvas');\r\n    if (canvas) {\r\n      const container = canvas.getElementsByClassName('djs-container');\r\n      const svgElements = container[0].getElementsByTagName('svg');\r\n      const outerSVGElement = svgElements[0];\r\n      const viewport = outerSVGElement.getElementsByClassName('viewport')[0];\r\n      const layerBase = viewport.getElementsByClassName('layer-base')[0];\r\n\r\n      const image = document.createElement('img');\r\n\r\n      // removes unwanted black dots in image\r\n      let svg = this.pngService.extractSVG(viewport, outerSVGElement);\r\n\r\n      svg = this.pngService.prepareSVG(\r\n        svg,\r\n        layerBase,\r\n        this.description,\r\n        this.title,\r\n        withTitle\r\n      );\r\n\r\n      image.onload = () => {\r\n        const tempCanvas = document.createElement('canvas');\r\n\r\n        // add a 10px buffer to the right and lower boundary\r\n        tempCanvas.width = this.pngService.getWidth() + 10;\r\n        tempCanvas.height = this.pngService.getHeight() + 10;\r\n\r\n        const ctx = tempCanvas.getContext('2d');\r\n        if (ctx) {\r\n          // fill with white background\r\n          ctx.rect(0, 0, tempCanvas.width, tempCanvas.height);\r\n          ctx.fillStyle = 'white';\r\n          ctx.fill();\r\n\r\n          ctx.drawImage(image, 0, 0);\r\n        }\r\n\r\n        const png64 = tempCanvas.toDataURL('image/png');\r\n        const ele = document.createElement('a');\r\n        ele.setAttribute(\r\n          'download',\r\n          sanitizeForDesktop(this.title) +\r\n            '_' +\r\n            new Date().toISOString().slice(0, 10) +\r\n            '.png'\r\n        );\r\n        ele.setAttribute('href', png64);\r\n        document.body.appendChild(ele);\r\n        ele.click();\r\n        document.body.removeChild(ele);\r\n\r\n        // image source has to be removed to circumvent browser caching\r\n        image.src = '';\r\n      };\r\n      image.onchange = image.onload;\r\n\r\n      image.width = this.pngService.getWidth();\r\n      image.height = this.pngService.getHeight();\r\n\r\n      image.src = 'data:image/svg+xml,' + svg;\r\n    }\r\n  }\r\n\r\n  downloadHTMLPresentation(): void {\r\n    const filename = sanitizeForDesktop(\r\n      this.title + '_' + new Date().toString().slice(0, 10)\r\n    );\r\n    this.htmlPresentationService.downloadHTMLPresentation(filename).then();\r\n  }\r\n\r\n  private getStoryForDownload(): unknown[] {\r\n    const story = this.rendererService.getStory() as unknown[];\r\n    story.push({ info: this.titleService.getDescription() });\r\n    story.push({ version: VERSION });\r\n    return story;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { sanitizeForDesktop } from '../../Utils/sanitizer';\r\nimport { ReplayService } from '../Replay/replay.service';\r\n// @ts-ignore\r\nimport doT from 'dot';\r\nimport { TitleService } from '../Title/title.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\n/**\r\n * Initial idea and PR from https://github.com/indika-dev\r\n */\r\nexport class HtmlPresentationService {\r\n  constructor(\r\n    private replayService: ReplayService,\r\n    private titleService: TitleService\r\n  ) {}\r\n\r\n  private multiplexSecret: any;\r\n  private multiplexId: any;\r\n\r\n  private modeler: any;\r\n\r\n  setModelerClasses(canvas: any, selection: any, modeler: any): void {\r\n    this.modeler = modeler;\r\n  }\r\n\r\n  private static viewBoxCoordinates(svg: any): any {\r\n    const ViewBoxCoordinate =\r\n      /width=\"([^\"]+)\"\\s+height=\"([^\"]+)\"\\s+viewBox=\"([^\"]+)\"/;\r\n    const match = svg.match(ViewBoxCoordinate);\r\n    return match[3];\r\n  }\r\n\r\n  /*\r\n  ---------------------------\r\n  SVG handling starts here\r\n  ----------------------------\r\n  */\r\n\r\n  async downloadHTMLPresentation(filename: string): Promise<void> {\r\n    const svgData = [];\r\n    // export all sentences of domain story\r\n    this.replayService.startReplay();\r\n    try {\r\n      const result = await this.modeler.saveSVG({});\r\n      this.fixActivityMarkersForEachStep(\r\n        result,\r\n        this.replayService.getCurrentStepNumber()\r\n      );\r\n      svgData.push({\r\n        content: HtmlPresentationService.createSVGData(result.svg),\r\n        transition: 'slide',\r\n      });\r\n    } catch (err) {\r\n      alert('There was an error exporting the SVG.\\n' + err);\r\n    }\r\n    while (\r\n      this.replayService.getCurrentStepNumber() <\r\n      this.replayService.getMaxStepNumber()\r\n    ) {\r\n      this.replayService.nextStep();\r\n      try {\r\n        const result = await this.modeler.saveSVG({});\r\n        this.fixActivityMarkersForEachStep(\r\n          result,\r\n          this.replayService.getCurrentStepNumber()\r\n        );\r\n        svgData.push({\r\n          content: HtmlPresentationService.createSVGData(result.svg),\r\n          transition: 'slide',\r\n        });\r\n      } catch (err) {\r\n        alert('There was an error exporting the SVG.\\n' + err);\r\n      }\r\n    }\r\n    this.replayService.stopReplay();\r\n\r\n    // create download for presentation\r\n    const revealjsTemplate = document.getElementById('revealjs-template');\r\n    const dots = doT.template(revealjsTemplate?.innerHTML);\r\n    const revealjsData = {\r\n      script: 'script',\r\n      title: this.titleService.getTitle(),\r\n      description: this.titleService.getDescription(),\r\n      sentences: svgData,\r\n      multiplexSecret: this.multiplexSecret,\r\n      multiplexId: this.multiplexId,\r\n    };\r\n    const element = document.createElement('a');\r\n    element.setAttribute(\r\n      'href',\r\n      'data:text/html;charset=UTF-8,' +\r\n        this.fixMalformedHtmlScript(dots, revealjsData)\r\n    );\r\n    element.setAttribute('download', sanitizeForDesktop(filename) + '.html');\r\n    element.style.display = 'none';\r\n    document.body.appendChild(element);\r\n    element.click();\r\n    document.body.removeChild(element);\r\n  }\r\n\r\n  private fixMalformedHtmlScript(\r\n    dots: any,\r\n    revealjsData: {\r\n      multiplexId: any;\r\n      sentences: any[];\r\n      multiplexSecret: any;\r\n      description: string;\r\n      title: string;\r\n      script: string;\r\n    }\r\n  ) {\r\n    return dots(revealjsData).replace('</ script', '</script');\r\n  }\r\n\r\n  // tslint:disable-next-line:align\r\n  private static createSVGData(svg: any): string {\r\n    let data = structuredClone(svg);\r\n\r\n    // to ensure that the title and description are inside the SVG container and do not overlap with any elements,\r\n    // we change the confines of the SVG viewbox\r\n    let viewBoxIndex = data.indexOf('width=\"');\r\n\r\n    const viewBox = HtmlPresentationService.viewBoxCoordinates(data);\r\n\r\n    let xLeft: number;\r\n    let width: number;\r\n    let yUp: number;\r\n    let height: number;\r\n    const splitViewBox = viewBox.split(/\\s/);\r\n\r\n    xLeft = +splitViewBox[0];\r\n    yUp = +splitViewBox[1];\r\n    width = +splitViewBox[2];\r\n    height = +splitViewBox[3];\r\n\r\n    if (width < 300) {\r\n      width += 300;\r\n    }\r\n\r\n    const dataStart = data.substring(0, viewBoxIndex);\r\n    viewBoxIndex = data.indexOf('\" version');\r\n    const dataEnd = data.substring(viewBoxIndex);\r\n    dataEnd.substring(viewBoxIndex);\r\n\r\n    data = dataStart + this.createBounds(xLeft, yUp, width, height) + dataEnd;\r\n\r\n    return encodeURIComponent(data);\r\n  }\r\n\r\n  private static createBounds(\r\n    xLeft: number,\r\n    yUp: number,\r\n    width: number,\r\n    height: number\r\n  ) {\r\n    return (\r\n      'width=\"100%\"' +\r\n      ' height=\"auto\" ' +\r\n      ' preserveAspectRatio=\"xMidYMid meet\"' +\r\n      ' viewBox=\"' +\r\n      xLeft +\r\n      ' ' +\r\n      yUp +\r\n      ' ' +\r\n      (xLeft + width) +\r\n      ' ' +\r\n      (yUp + height)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * There is a Problem in the HTML-Presentation, where the Arrow-Heads of the Activities are not shown after the 4th Step\r\n   * This is due to the fact, that the marker for the Arrow-Head is defined in each Step with the same ID\r\n   * When the 5th step is reached, the first marker is set to display none, which propagates to all other markers\r\n   *\r\n   * To fix this, for each Step the marker and its references are renamed\r\n   */\r\n  private fixActivityMarkersForEachStep(\r\n    result: { svg: string },\r\n    sectionIndex: number\r\n  ): void {\r\n    const defs = result.svg.substring(\r\n      result.svg.indexOf('<defs>'),\r\n      result.svg.indexOf('</defs>') + 7\r\n    );\r\n    const split = defs.split('<marker ');\r\n\r\n    let newDefs = split[0];\r\n\r\n    for (let i = 1; i < split.length; i++) {\r\n      const ids = split[i].match(/(id=\"[^\"]*\")/g);\r\n      ids?.forEach((id) => {\r\n        const idToReplace = id.substring(4, id.length - 1);\r\n        const newId =\r\n          idToReplace.slice(0, id.length - 5) +\r\n          'customId' +\r\n          sectionIndex +\r\n          idToReplace.slice(idToReplace.length - 2);\r\n        // @ts-ignore\r\n        result.svg = result.svg.replaceAll(idToReplace, newId);\r\n      });\r\n      newDefs += '<marker display= \"block !important\"; ' + split[i];\r\n    }\r\n\r\n    result.svg = result.svg.replace(defs, newDefs);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { createTitleAndDescriptionSVGElement } from 'src/app/Service/Export/exportUtil';\r\nimport { BrowserSpecs } from 'src/app/Domain/Export/browserSpecs';\r\nimport { Box } from 'src/app/Domain/Export/box';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class PngService {\r\n  private width: number;\r\n  private height: number;\r\n\r\n  constructor() {\r\n    this.width = 0;\r\n    this.height = 0;\r\n  }\r\n\r\n  private browserSpecs(): BrowserSpecs {\r\n    const ua = navigator.userAgent;\r\n    let tem;\r\n    let M =\r\n      ua.match(\r\n        /(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i\r\n      ) || [];\r\n    if (/trident/i.test(M[1])) {\r\n      tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\r\n      return { name: 'IE', version: tem[1] || '' };\r\n    }\r\n    if (M[1] === 'Chrome') {\r\n      tem = ua.match(/\\b(OPR|Edge)\\/(\\d+)/);\r\n      if (tem != null) {\r\n        return { name: tem[1].replace('OPR', 'Opera'), version: tem[2] };\r\n      }\r\n    }\r\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\r\n    // tslint:disable-next-line:no-conditional-assignment\r\n    if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {\r\n      M.splice(1, 1, tem[1]);\r\n    }\r\n    return { name: M[0], version: M[1] };\r\n  }\r\n\r\n  /** Needed for an SVG-Fix in CHrome where the # needs to be replaced by %23 **/\r\n  URIHashtagFix(svg: string): string {\r\n    let fix = false;\r\n\r\n    const browser = this.browserSpecs();\r\n\r\n    const name = browser.name;\r\n    const version = parseInt(browser.version);\r\n\r\n    // only implemented in chrome and firefox at the moment\r\n    if (name.includes('Chrome')) {\r\n      if (version >= 72) {\r\n        fix = true;\r\n        // https://www.chromestatus.com/features/5656049583390720\r\n      }\r\n    } else if (name.includes('Firefox')) {\r\n      fix = true;\r\n\r\n      // versionNumber of implementation unknown\r\n    }\r\n    if (fix) {\r\n      while (svg.includes('#')) {\r\n        svg = svg.replace('#', '%23');\r\n      }\r\n    }\r\n    return svg;\r\n  }\r\n\r\n  findMostOuterElements(svg: HTMLElement): Box {\r\n    let xLeft = 0;\r\n    let xRight = 0;\r\n    let yUp = 0;\r\n    let yDown = 0;\r\n\r\n    const elements = svg.getElementsByClassName('djs-group');\r\n\r\n    // tslint:disable-next-line:prefer-for-of\r\n    for (let i = 0; i < elements.length; i++) {\r\n      const element = elements[i];\r\n      const sub = element.children;\r\n\r\n      let elXLeft: number;\r\n      let elXRight: number;\r\n      let elYUp: number;\r\n      let elYDown: number;\r\n\r\n      const transform = sub[0].getAttribute('transform');\r\n      if (transform) {\r\n        let nums;\r\n\r\n        if (transform.includes('matrix')) {\r\n          transform.replace('matrix(', '');\r\n          transform.replace(')', '');\r\n          nums = transform.split(' ');\r\n          elXLeft = parseInt(nums[4]);\r\n          elYUp = parseInt(nums[5]);\r\n        } else {\r\n          transform.replace('translate(', '');\r\n          transform.replace(')', '');\r\n          nums = transform.split(' ');\r\n          elXLeft = parseInt(nums[0]);\r\n          elYUp = parseInt(nums[1]);\r\n        }\r\n\r\n        const rects = sub[0].getElementsByTagName('rect');\r\n        const outerRect = rects[rects.length - 1];\r\n\r\n        const width = outerRect.getAttribute('width');\r\n\r\n        elXRight = elXLeft + parseInt(width != null ? width : '0');\r\n        elYDown = elYUp + sub[0].getBoundingClientRect().height;\r\n      } else {\r\n        const rects = element.getElementsByTagName('rect');\r\n        const outerRect = rects[rects.length - 1];\r\n\r\n        const x = outerRect.getAttribute('x');\r\n        const y = outerRect.getAttribute('y');\r\n\r\n        elXLeft = parseInt(x != null ? x : '0');\r\n        elYUp = parseInt(y != null ? y : '0');\r\n\r\n        const width = outerRect.getAttribute('width');\r\n        const height = outerRect.getAttribute('height');\r\n\r\n        elXRight = elXLeft + parseInt(width != null ? width : '0');\r\n        elYDown = elYUp + parseInt(height != null ? height : '0') + 20; // Add 20 px as Padding for text at the bottom\r\n      }\r\n      if (elXLeft < xLeft) {\r\n        xLeft = elXLeft;\r\n      }\r\n      if (elXRight > xRight) {\r\n        xRight = elXRight;\r\n      }\r\n      if (elYUp < yUp) {\r\n        yUp = elYUp;\r\n      }\r\n      if (elYDown > yDown) {\r\n        yDown = elYDown;\r\n      }\r\n    }\r\n\r\n    yUp -= 75; // we need to adjust yUp to have space for the title and description\r\n\r\n    return {\r\n      xLeft,\r\n      xRight,\r\n      yUp,\r\n      yDown,\r\n    };\r\n  }\r\n\r\n  prepareSVG(\r\n    svg: string,\r\n    layerBase: any,\r\n    description: string,\r\n    title: string,\r\n    withTitle: boolean\r\n  ): string {\r\n    const box = this.findMostOuterElements(layerBase);\r\n    let viewBoxIndex = svg.indexOf('width=\"');\r\n\r\n    this.calculateWidthAndHeight(box);\r\n\r\n    const { insertText, extraHeight } = createTitleAndDescriptionSVGElement(\r\n      title,\r\n      description,\r\n      box.xLeft,\r\n      box.yUp + 20,\r\n      this.width\r\n    );\r\n    if (withTitle) {\r\n      this.height += extraHeight;\r\n    }\r\n\r\n    const bounds = this.createBounds(box, extraHeight);\r\n\r\n    const dataStart = svg.substring(0, viewBoxIndex);\r\n    viewBoxIndex = svg.indexOf('style=\"');\r\n\r\n    const dataEnd = svg.substring(viewBoxIndex);\r\n    dataEnd.substring(viewBoxIndex);\r\n\r\n    svg = dataStart + bounds + dataEnd;\r\n\r\n    const insertIndex = svg.indexOf('<g class=\"viewport\">') + 20;\r\n\r\n    if (withTitle) {\r\n      svg = [\r\n        svg.slice(0, insertIndex),\r\n        insertText,\r\n        svg.slice(insertIndex),\r\n      ].join('');\r\n    }\r\n    svg = this.URIHashtagFix(svg);\r\n\r\n    return svg;\r\n  }\r\n\r\n  private createBounds(box: Box, extraHeight: number) {\r\n    return (\r\n      'width=\"' +\r\n      this.width +\r\n      '\" height=\"' +\r\n      this.height +\r\n      '\" viewBox=\" ' +\r\n      box.xLeft +\r\n      ' ' +\r\n      (box.yUp - extraHeight) +\r\n      ' ' +\r\n      this.width +\r\n      ' ' +\r\n      this.height +\r\n      '\" '\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Calculate the Width and Height of the Bounding Box for the PNG so no Parts are cut off\r\n   * TODO Longer Iconnames can still be cut of, when the Element is the lowest Object on the canvas, same for Activities\r\n   */\r\n  private calculateWidthAndHeight(box: Box): [number, number] {\r\n    if (box.xLeft < 0) {\r\n      if (box.xRight < 0) {\r\n        this.width = Math.abs(box.xLeft - box.xRight);\r\n      } else {\r\n        this.width = Math.abs(box.xLeft) + box.xRight;\r\n      }\r\n    } else {\r\n      this.width = box.xRight - box.xLeft;\r\n    }\r\n\r\n    if (box.yUp < 0) {\r\n      if (box.yDown < 0) {\r\n        this.height = Math.abs(box.yUp - box.yDown);\r\n      } else {\r\n        this.height = Math.abs(box.yUp) + box.yDown;\r\n      }\r\n    } else {\r\n      this.height = box.yDown - box.yUp;\r\n    }\r\n\r\n    // if the domain-Story is smaller than 300px in width or height, increase its dimensions\r\n    if (this.height < 300) {\r\n      this.height += 300;\r\n      box.yUp -= 150;\r\n      box.yDown += 150;\r\n    }\r\n    if (this.width < 300) {\r\n      this.width += 300;\r\n      box.xLeft -= 150;\r\n      box.xRight += 150;\r\n    }\r\n    return [this.height, this.width];\r\n  }\r\n\r\n  extractSVG(viewport: any, outerSVGElement: any): string {\r\n    const layerResizers = viewport.getElementsByClassName('layer-resizers');\r\n    const layerOverlays = viewport.getElementsByClassName('layer-overlays');\r\n    const transform = viewport.getAttribute('transform');\r\n    const translate = viewport.getAttribute('translate');\r\n\r\n    if (layerResizers[0]) {\r\n      layerResizers[0].parentNode.removeChild(layerResizers[0]);\r\n    }\r\n    if (layerOverlays[0]) {\r\n      layerOverlays[0].parentNode.removeChild(layerOverlays[0]);\r\n    }\r\n\r\n    // remove canvas scrolling and scaling before serializeToString of SVG\r\n    if (transform) {\r\n      viewport.removeAttribute('transform');\r\n    }\r\n    if (translate) {\r\n      viewport.removeAttribute('translate');\r\n    }\r\n\r\n    const svg = new XMLSerializer().serializeToString(outerSVGElement);\r\n\r\n    // re-add canvas scrolling and scaling\r\n    if (transform) {\r\n      viewport.setAttribute('transform', transform);\r\n    }\r\n    if (translate) {\r\n      viewport.setAttribute('translate', translate);\r\n    }\r\n    return svg;\r\n  }\r\n\r\n  getWidth(): number {\r\n    return this.width;\r\n  }\r\n\r\n  getHeight(): number {\r\n    return this.height;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ConfigAndDST } from 'src/app/Domain/Export/configAndDst';\r\nimport { createTitleAndDescriptionSVGElement } from 'src/app/Service/Export/exportUtil';\r\nimport { ModelerService } from '../Modeler/modeler.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class SvgService {\r\n  private cacheData = '';\r\n\r\n  constructor(private modelerService: ModelerService) {}\r\n\r\n  createSVGData(\r\n    title: string,\r\n    description: string,\r\n    dst: ConfigAndDST,\r\n    withTitle: boolean,\r\n    useWhiteBackground: boolean\r\n  ): string {\r\n    this.cacheData = this.modelerService.getEncoded();\r\n\r\n    let data = structuredClone(this.cacheData);\r\n\r\n    let viewBoxIndex = data.indexOf('width=\"');\r\n\r\n    let { width, height, viewBox } = this.viewBoxCoordinates(data);\r\n\r\n    let xLeft: number;\r\n    let xRight: number;\r\n    let yUp: number;\r\n    let yDown: number;\r\n    const splitViewBox = viewBox.split(/\\s/);\r\n\r\n    xLeft = +splitViewBox[0];\r\n    yUp = +splitViewBox[1];\r\n    xRight = +splitViewBox[2];\r\n    yDown = +splitViewBox[3];\r\n\r\n    if (xRight < 300) {\r\n      xRight += 300;\r\n      width += 300;\r\n    }\r\n\r\n    const { insertText, extraHeight } = createTitleAndDescriptionSVGElement(\r\n      title,\r\n      description,\r\n      xLeft,\r\n      yUp,\r\n      width\r\n    );\r\n    if (withTitle) {\r\n      // to display the title and description in the SVG-file, we need to add a container for the text-elements\r\n      height += extraHeight + 80;\r\n    }\r\n\r\n    const svgIndex = data.indexOf('width=\"');\r\n    if(useWhiteBackground) {\r\n      const backgroundColorWhite = 'style=\"background-color:white\" ';\r\n      data = [\r\n        data.slice(0, svgIndex),\r\n        backgroundColorWhite,\r\n        data.slice(svgIndex),\r\n      ].join('');\r\n    }\r\n\r\n    const bounds = this.createBounds(\r\n      width,\r\n      height,\r\n      xLeft,\r\n      yUp,\r\n      xRight,\r\n      yDown,\r\n      withTitle\r\n    );\r\n\r\n    const dataStart = data.substring(0, viewBoxIndex);\r\n    viewBoxIndex = data.indexOf('\" version');\r\n\r\n    const dataEnd = data.substring(viewBoxIndex);\r\n    dataEnd.substring(viewBoxIndex);\r\n\r\n    data = dataStart + bounds + dataEnd;\r\n\r\n    const insertIndex = this.findIndexToInsertData(data);\r\n\r\n    if (withTitle) {\r\n      data = [\r\n        data.slice(0, insertIndex),\r\n        insertText,\r\n        data.slice(insertIndex),\r\n      ].join('');\r\n    }\r\n\r\n    return this.appendDST(data, dst);\r\n  }\r\n\r\n  private findIndexToInsertData(data: string) {\r\n    let insertIndex = data.indexOf('</defs>');\r\n    if (insertIndex < 0) {\r\n      insertIndex = data.indexOf('version=\"1.2\">') + 14;\r\n    } else {\r\n      insertIndex += 7;\r\n    }\r\n    return insertIndex;\r\n  }\r\n\r\n  private createBounds(\r\n    width: number,\r\n    height: number,\r\n    xLeft: number,\r\n    yUp: number,\r\n    xRight: number,\r\n    yDown: number,\r\n    withTitle: boolean\r\n  ): string {\r\n    return (\r\n      'width=\"' +\r\n      width +\r\n      '\" height=\" ' +\r\n      height +\r\n      '\" viewBox=\"' +\r\n      xLeft +\r\n      ' ' +\r\n      (withTitle ? yUp - 80 : yUp) +\r\n      ' ' +\r\n      xRight +\r\n      ' ' +\r\n      (yDown + 30)\r\n    );\r\n  }\r\n\r\n  private viewBoxCoordinates(svg: string): {\r\n    width: number;\r\n    height: number;\r\n    viewBox: string;\r\n  } {\r\n    const ViewBoxCoordinate =\r\n      /width=\"([^\"]+)\"\\s+height=\"([^\"]+)\"\\s+viewBox=\"([^\"]+)\"/;\r\n    const match = svg.match(ViewBoxCoordinate);\r\n    if (match) {\r\n      return { width: +match[1], height: +match[2], viewBox: match[3] };\r\n    }\r\n    return { width: 0, height: 0, viewBox: '' };\r\n  }\r\n\r\n  private appendDST(data: string, dst: ConfigAndDST): string {\r\n    data += '\\n<!-- <DST>\\n' + JSON.stringify(dst, null, 2) + '\\n </DST> -->';\r\n    return data;\r\n  }\r\n}\r\n","import { EventEmitter, Injectable, OnDestroy } from '@angular/core';\r\nimport { IconDictionaryService } from 'src/app/Service/DomainConfiguration/icon-dictionary.service';\r\nimport { Dictionary } from 'src/app/Domain/Common/dictionary/dictionary';\r\nimport { elementTypes } from 'src/app/Domain/Common/elementTypes';\r\nimport { TitleService } from 'src/app/Service/Title/title.service';\r\nimport { ImportRepairService } from 'src/app/Service/Import/import-repair.service';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { RendererService } from 'src/app/Service/Renderer/renderer.service';\r\nimport { BusinessObject } from 'src/app/Domain/Common/businessObject';\r\nimport {\r\n  DomainConfiguration,\r\n  fromConfigurationFromFile,\r\n} from 'src/app/Domain/Common/domainConfiguration';\r\nimport { DialogService } from '../Dialog/dialog.service';\r\nimport { InfoDialogComponent } from '../../Presentation/Dialog/info-dialog/info-dialog.component';\r\nimport { MatDialogConfig } from '@angular/material/dialog';\r\nimport { InfoDialogData } from '../../Domain/Dialog/infoDialogData';\r\nimport { restoreTitleFromFileName } from '../../Utils/sanitizer';\r\nimport {\r\n  INITIAL_DESCRIPTION,\r\n  INITIAL_TITLE,\r\n} from '../../Domain/Common/constants';\r\nimport { DomainConfigurationService } from '../DomainConfiguration/domain-configuration.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ImportDomainStoryService implements OnDestroy {\r\n  titleSubscription: Subscription;\r\n  descriptionSubscription: Subscription;\r\n\r\n  title = INITIAL_TITLE;\r\n  description = INITIAL_DESCRIPTION;\r\n  private importedConfiguration: DomainConfiguration | null = null;\r\n\r\n  private importedConfigurationEmitter =\r\n    new EventEmitter<DomainConfiguration>();\r\n\r\n  constructor(\r\n    private iconDictionaryService: IconDictionaryService,\r\n    private importRepairService: ImportRepairService,\r\n    private titleService: TitleService,\r\n    private rendererService: RendererService,\r\n    private dialogService: DialogService,\r\n    private domainConfigurationService: DomainConfigurationService\r\n  ) {\r\n    this.titleSubscription = this.titleService.title$.subscribe(\r\n      (title: string) => {\r\n        this.title = title;\r\n      }\r\n    );\r\n    this.descriptionSubscription = this.titleService.description$.subscribe(\r\n      (description: string) => {\r\n        this.description = description;\r\n      }\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.titleSubscription.unsubscribe();\r\n    this.descriptionSubscription.unsubscribe();\r\n  }\r\n\r\n  get importedConfigurationEvent(): Observable<DomainConfiguration> {\r\n    return this.importedConfigurationEmitter.asObservable();\r\n  }\r\n\r\n  getImportedConfiguration(): DomainConfiguration {\r\n    const config: DomainConfiguration = {\r\n      name: this.importedConfiguration?.name || '',\r\n      actors: this.importedConfiguration?.actors || new Dictionary(),\r\n      workObjects: this.importedConfiguration?.workObjects || new Dictionary(),\r\n    };\r\n    this.importedConfiguration = null;\r\n    return config;\r\n  }\r\n\r\n  importDST(input: Blob, filename: string, isSVG: boolean): void {\r\n    const fileReader = new FileReader();\r\n    const titleText = restoreTitleFromFileName(filename, isSVG);\r\n\r\n    // no need to put this on the commandStack\r\n    this.titleService.updateTitleAndDescription(titleText, null, false);\r\n\r\n    fileReader.onloadend = (e) => {\r\n      if (e && e.target) {\r\n        this.fileReaderFunction(e.target.result, isSVG, false);\r\n      }\r\n    };\r\n\r\n    fileReader.readAsText(input);\r\n  }\r\n\r\n  importEGN(input: Blob, filename: string, isSVG: boolean): void {\r\n    const fileReader = new FileReader();\r\n    const titleText = restoreTitleFromFileName(filename, isSVG);\r\n\r\n    // no need to put this on the commandStack\r\n    this.titleService.updateTitleAndDescription(titleText, null, false);\r\n\r\n    fileReader.onloadend = (e) => {\r\n      if (e && e.target) {\r\n        this.fileReaderFunction(e.target.result, isSVG, true);\r\n      }\r\n    };\r\n\r\n    fileReader.readAsText(input);\r\n  }\r\n\r\n  private fileReaderFunction(\r\n    text: string | ArrayBuffer | null,\r\n    isSVG: boolean,\r\n    isEGN: boolean\r\n  ): void {\r\n    let dstText;\r\n    if (typeof text === 'string') {\r\n      if (isSVG) {\r\n        dstText = this.removeXMLComments(text);\r\n      } else {\r\n        dstText = text;\r\n      }\r\n\r\n      let elements: any[];\r\n      let config: DomainConfiguration;\r\n      let configFromFile: {\r\n        name: string;\r\n        actors: { [key: string]: any };\r\n        workObjects: { [key: string]: any };\r\n      };\r\n\r\n      let dstAndConfig = this.extractDstAndConfig(dstText, isSVG);\r\n      if (dstAndConfig == null) {\r\n        return;\r\n      }\r\n\r\n      // current implementation\r\n      if (dstAndConfig.domain) {\r\n        configFromFile = isEGN\r\n          ? dstAndConfig.domain\r\n          : JSON.parse(dstAndConfig.domain);\r\n        config = fromConfigurationFromFile(configFromFile);\r\n        elements = isEGN ? dstAndConfig.dst : JSON.parse(dstAndConfig.dst);\r\n      } else {\r\n        // legacy implementation\r\n        if (dstAndConfig.config) {\r\n          configFromFile = JSON.parse(dstAndConfig.config);\r\n          config = fromConfigurationFromFile(configFromFile);\r\n          elements = JSON.parse(dstAndConfig.dst);\r\n        } else {\r\n          // implementation prior to configuration\r\n          elements = JSON.parse(dstText);\r\n          config =\r\n            this.domainConfigurationService.createMinimalConfigurationWithDefaultIcons();\r\n        }\r\n      }\r\n\r\n      const configChanged = this.checkConfigForChanges(config);\r\n\r\n      let lastElement = elements[elements.length - 1];\r\n      if (!lastElement.id) {\r\n        lastElement = elements.pop();\r\n        let importVersionNumber = lastElement;\r\n\r\n        // if the last element has the importedVersionNumber has the tag version,\r\n        // then there exists another meta tag 'info' for the description\r\n        if (importVersionNumber.version) {\r\n          lastElement = elements.pop();\r\n        }\r\n\r\n        if (importVersionNumber.version) {\r\n          importVersionNumber = importVersionNumber.version as string;\r\n        } else {\r\n          importVersionNumber = '?';\r\n          // TODO show error for unreadable version number\r\n        }\r\n        elements = this.handleVersionNumber(importVersionNumber, elements);\r\n      }\r\n\r\n      if (\r\n        !this.importRepairService.checkForUnreferencedElementsInActivitiesAndRepair(\r\n          elements\r\n        )\r\n      ) {\r\n        this.showBrokenImportDialog(isSVG ? 'SVG' : 'DST');\r\n      }\r\n\r\n      this.titleService.updateTitleAndDescription(\r\n        null,\r\n        lastElement.info,\r\n        false\r\n      );\r\n\r\n      this.importRepairService.adjustPositions(elements);\r\n\r\n      this.updateIconRegistries(elements, config);\r\n      this.rendererService.importStory(elements, configChanged, config);\r\n    }\r\n  }\r\n\r\n  private handleVersionNumber(\r\n    importVersionNumber: string,\r\n    elements: BusinessObject[]\r\n  ): BusinessObject[] {\r\n    const versionPrefix = +importVersionNumber.substring(\r\n      0,\r\n      importVersionNumber.lastIndexOf('.')\r\n    );\r\n    if (versionPrefix <= 0.5) {\r\n      elements =\r\n        this.importRepairService.updateCustomElementsPreviousV050(elements);\r\n      this.showPreviousV050Dialog(versionPrefix);\r\n    }\r\n    return elements;\r\n  }\r\n\r\n  private extractDstAndConfig(dstText: string, isSVG: boolean) {\r\n    let dstAndConfig = null;\r\n    try {\r\n      dstAndConfig = JSON.parse(dstText);\r\n    } catch (e) {\r\n      this.showBrokenImportDialog(isSVG ? 'SVG' : 'DST');\r\n    }\r\n    return dstAndConfig;\r\n  }\r\n\r\n  private removeXMLComments(xmlText: string): string {\r\n    xmlText = xmlText.substring(xmlText.indexOf('<DST>'));\r\n    while (xmlText.includes('<!--') || xmlText.includes('-->')) {\r\n      xmlText = xmlText.replace('<!--', '').replace('-->', '');\r\n    }\r\n    xmlText = xmlText.replace('<DST>', '');\r\n    xmlText = xmlText.replace('</DST>', '');\r\n    return xmlText;\r\n  }\r\n\r\n  checkConfigForChanges(domainConfiguration: DomainConfiguration): boolean {\r\n    const newActorKeys = domainConfiguration.actors.keysArray();\r\n    const newWorkObjectKeys = domainConfiguration.workObjects.keysArray();\r\n\r\n    const currentActorKeys = this.iconDictionaryService.getTypeDictionaryKeys(\r\n      elementTypes.ACTOR\r\n    );\r\n    const currentWorkobjectKeys =\r\n      this.iconDictionaryService.getTypeDictionaryKeys(elementTypes.WORKOBJECT);\r\n\r\n    let changed = false;\r\n\r\n    if (\r\n      newActorKeys.length !== currentActorKeys.length ||\r\n      newWorkObjectKeys.length !== currentWorkobjectKeys.length\r\n    ) {\r\n      return true;\r\n    }\r\n\r\n    for (let i = 0; i < newActorKeys.length; i++) {\r\n      changed =\r\n        this.clearName(currentActorKeys[i]) !== this.clearName(newActorKeys[i]);\r\n      if (changed) {\r\n        i = newActorKeys.length;\r\n      }\r\n    }\r\n    if (changed) {\r\n      return changed;\r\n    }\r\n    for (let i = 0; i < newWorkObjectKeys.length; i++) {\r\n      changed =\r\n        this.clearName(currentWorkobjectKeys[i]) !==\r\n        this.clearName(newWorkObjectKeys[i]);\r\n      if (changed) {\r\n        i = newWorkObjectKeys.length;\r\n      }\r\n    }\r\n    return changed;\r\n  }\r\n  private clearName(name: string): string {\r\n    return name\r\n      .replace(elementTypes.ACTOR, '')\r\n      .replace(elementTypes.WORKOBJECT, '');\r\n  }\r\n\r\n  private updateIconRegistries(\r\n    elements: BusinessObject[],\r\n    config: DomainConfiguration\r\n  ): void {\r\n    const actorIcons = this.iconDictionaryService.getElementsOfType(\r\n      elements,\r\n      elementTypes.ACTOR\r\n    );\r\n    const workObjectIcons = this.iconDictionaryService.getElementsOfType(\r\n      elements,\r\n      elementTypes.WORKOBJECT\r\n    );\r\n    this.iconDictionaryService.updateIconRegistries(\r\n      actorIcons,\r\n      workObjectIcons,\r\n      config\r\n    );\r\n\r\n    this.setImportedConfigurationAndEmit(config);\r\n  }\r\n\r\n  private showPreviousV050Dialog(version: number): void {\r\n    const title = 'Compatability-Warning';\r\n    const text =\r\n      'The uploaded Domain-Story is from version ' +\r\n      version +\r\n      '. There may be problems with the default actors or workobjects contained in the story.';\r\n\r\n    const config = new MatDialogConfig();\r\n    config.disableClose = false;\r\n    config.autoFocus = true;\r\n\r\n    config.data = new InfoDialogData(title, text, true);\r\n\r\n    this.dialogService.openDialog(InfoDialogComponent, config);\r\n  }\r\n\r\n  private setImportedConfigurationAndEmit(config: DomainConfiguration) {\r\n    this.importedConfiguration = config;\r\n    this.importedConfigurationEmitter.emit(config);\r\n  }\r\n\r\n  private showBrokenImportDialog(type: string) {\r\n    const config = new MatDialogConfig();\r\n    config.disableClose = false;\r\n    config.autoFocus = true;\r\n    config.data = new InfoDialogData(\r\n      'Error during import',\r\n      'The uploaded ' +\r\n        type +\r\n        ' is not complete, there could be elements missing from the canvas.',\r\n      true,\r\n      false\r\n    );\r\n\r\n    this.dialogService.openDialog(InfoDialogComponent, config);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { elementTypes } from 'src/app/Domain/Common/elementTypes';\r\nimport { BusinessObject } from 'src/app/Domain/Common/businessObject';\r\nimport { Waypoint } from 'src/app/Domain/Common/waypoint';\r\nimport { ActivityBusinessObject } from '../../Domain/Common/activityBusinessObject';\r\n\r\n/**\r\n * Repairs broken Domain Stories so that it can be rendered onto the canvas\r\n * by removing activities and connections that reference elements that don't exists\r\n */\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ImportRepairService {\r\n  checkForUnreferencedElementsInActivitiesAndRepair(\r\n    elements: BusinessObject[]\r\n  ): boolean {\r\n    const activities: ActivityBusinessObject[] = [];\r\n    const objectIDs: string[] = [];\r\n\r\n    let complete = true;\r\n\r\n    elements.forEach((element) => {\r\n      const type = element.type;\r\n      if (type === elementTypes.ACTIVITY || type === elementTypes.CONNECTION) {\r\n        activities.push(element as ActivityBusinessObject);\r\n      } else {\r\n        objectIDs.push(element.id);\r\n      }\r\n    });\r\n\r\n    activities.forEach((activity) => {\r\n      const source = activity.source;\r\n      const target = activity.target;\r\n      if (!objectIDs.includes(source) || !objectIDs.includes(target)) {\r\n        complete = false;\r\n        const activityIndex = elements.indexOf(activity);\r\n        elements = elements.splice(activityIndex, 1);\r\n      }\r\n    });\r\n    return complete;\r\n  }\r\n\r\n  /**\r\n   * Ensure backwards compatibility.\r\n   * Previously Document had no special name and was just addressed as workObject\r\n   * Bubble was renamed to Conversation\r\n   */\r\n  updateCustomElementsPreviousV050(\r\n    elements: BusinessObject[]\r\n  ): BusinessObject[] {\r\n    for (const element of elements) {\r\n      if (element.type === elementTypes.WORKOBJECT) {\r\n        element.type = elementTypes.WORKOBJECT + 'Document';\r\n      } else if (element.type === elementTypes.WORKOBJECT + 'Bubble') {\r\n        element.type = elementTypes.WORKOBJECT + 'Conversation';\r\n      }\r\n    }\r\n    return elements;\r\n  }\r\n\r\n  /**\r\n   * Adjusts Positions of Elements to ensure the Domain Story starts in the visible parts of the canvas\r\n   */\r\n  adjustPositions(elements: BusinessObject[]): void {\r\n    let xLeft = 0;\r\n    let yUp = 0;\r\n    let isFirst = true;\r\n\r\n    this.findFirstElement(elements, isFirst, xLeft, yUp);\r\n\r\n    if (xLeft < 75 || xLeft > 150 || yUp < 0 || yUp > 50) {\r\n      // add Padding for the Palette and the top\r\n      xLeft -= 75;\r\n      yUp -= 50;\r\n\r\n      elements.forEach((element) =>\r\n        this.adjustElementPosition(element, xLeft, yUp)\r\n      );\r\n    }\r\n  }\r\n\r\n  private adjustElementPosition(\r\n    element: BusinessObject,\r\n    xLeft: number,\r\n    yUp: number\r\n  ): void {\r\n    if (\r\n      element.type === elementTypes.ACTIVITY ||\r\n      element.type === elementTypes.CONNECTION\r\n    ) {\r\n      const waypoints = (element as ActivityBusinessObject).waypoints;\r\n      waypoints.forEach((point: Waypoint) => {\r\n        point.x -= xLeft;\r\n        point.y -= yUp;\r\n\r\n        if (point.original) {\r\n          point.original.x = point.x;\r\n          point.original.y = point.y;\r\n        }\r\n      });\r\n    } else {\r\n      element.x -= xLeft;\r\n      element.y -= yUp;\r\n    }\r\n  }\r\n\r\n  private findFirstElement(\r\n    elements: BusinessObject[],\r\n    isFirst: boolean,\r\n    xLeft: number,\r\n    yUp: number\r\n  ) {\r\n    elements.forEach((element) => {\r\n      let elXLeft;\r\n      let elYUp;\r\n      if (\r\n        element.type !== elementTypes.ACTIVITY &&\r\n        element.type !== elementTypes.CONNECTION\r\n      ) {\r\n        if (isFirst) {\r\n          xLeft = element.x;\r\n          yUp = element.y;\r\n          isFirst = false;\r\n        }\r\n        elXLeft = element.x;\r\n        elYUp = element.y;\r\n        if (elXLeft < xLeft) {\r\n          xLeft = elXLeft;\r\n        }\r\n        if (elYUp < yUp) {\r\n          yUp = elYUp;\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\r\nimport { elementTypes } from 'src/app/Domain/Common/elementTypes';\r\nimport { MassNamingService } from 'src/app/Service/LabelDictionary/mass-naming.service';\r\nimport { IconDictionaryService } from '../DomainConfiguration/icon-dictionary.service';\r\nimport { WorkObjectLabelEntry } from '../../Domain/LabelDictionary/workObjectLabelEntry';\r\nimport { LabelEntry } from '../../Domain/LabelDictionary/labelEntry';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class LabelDictionaryService {\r\n  activityLabels: LabelEntry[] = [];\r\n  workObjektLabels: WorkObjectLabelEntry[] = [];\r\n\r\n  constructor(\r\n    private massNamingService: MassNamingService,\r\n    private elementRegistryService: ElementRegistryService,\r\n    private iconDictionaryService: IconDictionaryService\r\n  ) {}\r\n\r\n  createLabelDictionaries(): void {\r\n    this.activityLabels = [];\r\n    this.workObjektLabels = [];\r\n\r\n    const allObjects = this.elementRegistryService.getAllCanvasObjects();\r\n\r\n    allObjects.forEach((element) => {\r\n      const name = element.businessObject.name;\r\n      if (\r\n        name &&\r\n        name.length > 0 &&\r\n        element.type.includes(elementTypes.ACTIVITY) &&\r\n        !this.activityLabels.map((a) => a.name).includes(name)\r\n      ) {\r\n        this.activityLabels.push({\r\n          name,\r\n          originalName: name,\r\n        });\r\n      } else if (\r\n        name &&\r\n        name.length > 0 &&\r\n        element.type.includes(elementTypes.WORKOBJECT) &&\r\n        !this.workObjektLabels.map((e) => e.name).includes(name)\r\n      ) {\r\n        const iconName = element.type.replace(elementTypes.WORKOBJECT, '');\r\n        let icon = this.iconDictionaryService.getIconSource(iconName);\r\n        if (!icon) {\r\n          return;\r\n        }\r\n        if (!icon.startsWith('data')) {\r\n          icon = 'data:image/svg+xml,' + icon;\r\n        }\r\n        this.workObjektLabels.push({\r\n          name,\r\n          originalName: name,\r\n          icon,\r\n        });\r\n      }\r\n    });\r\n    this.activityLabels.sort((a, b) => {\r\n      return a.name.toLowerCase().localeCompare(b.name.toLowerCase());\r\n    });\r\n    this.workObjektLabels.sort((a, b) => {\r\n      return a.name.toLowerCase().localeCompare(b.name.toLowerCase());\r\n    });\r\n  }\r\n\r\n  getActivityLabels(): LabelEntry[] {\r\n    return this.activityLabels.slice();\r\n  }\r\n\r\n  getWorkObjectLabels(): WorkObjectLabelEntry[] {\r\n    return this.workObjektLabels.slice();\r\n  }\r\n\r\n  massRenameLabels(\r\n    activityNames: string[],\r\n    originalActivityNames: string[],\r\n    workObjectNames: string[],\r\n    originalWorkObjectNames: string[]\r\n  ): void {\r\n    for (let i = 0; i < originalActivityNames.length; i++) {\r\n      if (!activityNames[i]) {\r\n        activityNames[i] = '';\r\n      }\r\n      if (!(activityNames[i] == originalActivityNames[i])) {\r\n        this.massNamingService.massChangeNames(\r\n          originalActivityNames[i],\r\n          activityNames[i],\r\n          elementTypes.ACTIVITY\r\n        );\r\n      }\r\n    }\r\n    for (let i = 0; i < originalWorkObjectNames.length; i++) {\r\n      if (!workObjectNames[i]) {\r\n        workObjectNames[i] = '';\r\n      }\r\n      if (!(workObjectNames[i] == originalWorkObjectNames[i])) {\r\n        this.massNamingService.massChangeNames(\r\n          originalWorkObjectNames[i],\r\n          workObjectNames[i],\r\n          elementTypes.WORKOBJECT\r\n        );\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\r\nimport { CanvasObject } from 'src/app/Domain/Common/canvasObject';\r\nimport { elementTypes } from '../../Domain/Common/elementTypes';\r\nimport { CommandStackService } from '../CommandStack/command-stack.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class MassNamingService {\r\n  constructor(\r\n    private elementRegistryService: ElementRegistryService,\r\n    private commandStackService: CommandStackService\r\n  ) {}\r\n\r\n  massChangeNames(\r\n    oldValue: string,\r\n    newValue: string,\r\n    type: elementTypes\r\n  ): void {\r\n    const allRelevantObjects: CanvasObject[] = [];\r\n\r\n    this.elementRegistryService.getAllCanvasObjects().forEach((element) => {\r\n      if (\r\n        element.type.includes(type) &&\r\n        element.businessObject.name === oldValue\r\n      ) {\r\n        allRelevantObjects.push(element);\r\n      }\r\n    });\r\n\r\n    const context = {\r\n      elements: allRelevantObjects,\r\n      newValue,\r\n    };\r\n\r\n    this.commandStackService.execute('domainStoryObjects.massRename', context);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { initializeContextPadProvider } from '../../Modeler/modeler/context-pad/domainStoryContextPadProvider';\r\nimport {\r\n  getMultipleNumberRegistry,\r\n  getNumberRegistry,\r\n  initializeNumbering,\r\n  setNumberIsMultiple,\r\n  updateExistingNumbersAtEditing,\r\n} from '../../Modeler/modeler/numbering/numbering';\r\nimport { initializePalette } from '../../Modeler/modeler/palette/domainStoryPalette';\r\nimport { initializeRenderer } from '../../Modeler/modeler/domainStoryRenderer';\r\nimport {\r\n  initializeLabelEditingProvider,\r\n  toggleStashUse,\r\n} from '../../Modeler/modeler/labeling/dsLabelEditingProvider';\r\nimport { initializeReplaceOptions } from '../../Modeler/modeler/change-icon/replaceOptions';\r\n\r\nimport { DirtyFlagService } from '../DirtyFlag/dirty-flag.service';\r\nimport { IconDictionaryService } from '../DomainConfiguration/icon-dictionary.service';\r\nimport { ElementRegistryService } from '../ElementRegistry/element-registry.service';\r\nimport { DomainConfigurationService } from '../DomainConfiguration/domain-configuration.service';\r\nimport { LabelDictionaryService } from '../LabelDictionary/label-dictionary.service';\r\nimport { elementTypes } from '../../Domain/Common/elementTypes';\r\nimport { ReplayStateService } from '../Replay/replay-state.service';\r\nimport { MatDialogConfig } from '@angular/material/dialog';\r\nimport { ActivityDialogData } from '../../Domain/Dialog/activityDialogData';\r\nimport { ActivityDialogComponent } from '../../Presentation/Dialog/activity-dialog/activity-dialog.component';\r\nimport { DialogService } from '../Dialog/dialog.service';\r\nimport massRenameHandler from '../../Modeler/modeler/updateHandler/massRenameHandler';\r\nimport headlineAndDescriptionUpdateHandler from '../../Modeler/modeler/updateHandler/headlineAndDescriptionUpdateHandler';\r\nimport { TitleService } from '../Title/title.service';\r\nimport { ActivityCanvasObject } from '../../Domain/Common/activityCanvasObject';\r\nimport { HtmlPresentationService } from '../Export/html-presentation.service';\r\nimport { positionsMatch } from '../../Utils/mathExtensions';\r\nimport activityUpdateHandler, {\r\n  initializeActivityUpdateHandler,\r\n} from '../../Modeler/modeler/updateHandler/activityUpdateHandlers';\r\nimport elementUpdateHandler from '../../Modeler/modeler/updateHandler/elementUpdateHandler';\r\nimport { CommandStackService } from '../CommandStack/command-stack.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class InitializerService {\r\n  constructor(\r\n    private dirtyFlagService: DirtyFlagService,\r\n    private iconDictionaryService: IconDictionaryService,\r\n    private elementRegistryService: ElementRegistryService,\r\n    private configurationService: DomainConfigurationService,\r\n    private labelDictionaryService: LabelDictionaryService,\r\n    private replayStateService: ReplayStateService,\r\n    private dialogService: DialogService,\r\n    private commandStackService: CommandStackService,\r\n    private titleService: TitleService,\r\n    private htmlPresentationService: HtmlPresentationService\r\n  ) {}\r\n\r\n  initializeDomainStoryModelerClasses(): void {\r\n    initializeContextPadProvider(\r\n      this.dirtyFlagService,\r\n      this.iconDictionaryService\r\n    );\r\n    /** The Palette and the Context Menu need the Icons present in the Domain,\r\n     * so the IconDictionaryService and the DomainConfigurationService needs to be given to the Palette **/\r\n    initializePalette(this.iconDictionaryService, this.configurationService);\r\n    initializeRenderer(\r\n      this.iconDictionaryService,\r\n      this.elementRegistryService,\r\n      this.dirtyFlagService\r\n    );\r\n    initializeLabelEditingProvider(this.labelDictionaryService);\r\n    initializeReplaceOptions(this.iconDictionaryService);\r\n    initializeNumbering(this.elementRegistryService);\r\n    initializeActivityUpdateHandler(this.elementRegistryService);\r\n  }\r\n\r\n  propagateDomainStoryModelerClassesToServices(\r\n    commandStack: any,\r\n    elementRegistry: any,\r\n    canvas: any,\r\n    selection: any,\r\n    modeler: any\r\n  ): void {\r\n    this.commandStackService.setCommandStack(commandStack);\r\n    this.elementRegistryService.setElementRegistry(elementRegistry);\r\n    this.htmlPresentationService.setModelerClasses(canvas, selection, modeler);\r\n  }\r\n\r\n  initializeDomainStoryModelerEventHandlers(\r\n    commandStack: any,\r\n    eventBus: any\r\n  ): void {\r\n    activityUpdateHandler(commandStack, eventBus);\r\n    massRenameHandler(commandStack, eventBus);\r\n    elementUpdateHandler(commandStack, eventBus);\r\n    headlineAndDescriptionUpdateHandler(commandStack, this.titleService);\r\n  }\r\n\r\n  initiateEventBusListeners(eventBus: any, commandStack: any): void {\r\n    eventBus.on('element.dblclick', (e: any) => {\r\n      if (!this.replayStateService.getReplayOn()) {\r\n        const element = e.element;\r\n        if (element.type === elementTypes.ACTIVITY) {\r\n          // override the doubleClickListener on activities\r\n          this.activityDoubleClick(element, eventBus, commandStack);\r\n        } else {\r\n          const renderedNumberRegistry = getNumberRegistry();\r\n\r\n          // add a DoubleClickListener to the number on activities\r\n          if (renderedNumberRegistry.length > 1) {\r\n            const allActivities =\r\n              this.elementRegistryService.getActivitiesFromActors();\r\n\r\n            if (allActivities.length > 0) {\r\n              const htmlCanvas = document.getElementById('canvas');\r\n              if (htmlCanvas) {\r\n                const container =\r\n                  htmlCanvas.getElementsByClassName('djs-container');\r\n                const svgElements = container[0].getElementsByTagName('svg');\r\n                const outerSVGElement = svgElements[0];\r\n                const viewport =\r\n                  outerSVGElement.getElementsByClassName('viewport')[0];\r\n                let transform = viewport.getAttribute('transform');\r\n\r\n                let transformX = 0;\r\n                let transformY = 0;\r\n                let zoomX = 1;\r\n                let zoomY = 1;\r\n                let nums;\r\n\r\n                const clickX = e.originalEvent.offsetX;\r\n                const clickY = e.originalEvent.offsetY;\r\n\r\n                // adjust for zoom and panning\r\n                if (transform) {\r\n                  transform = transform.replace('matrix(', '');\r\n                  transform.replace(')', '');\r\n                  nums = transform.split(',');\r\n                  zoomX = parseFloat(nums[0]);\r\n                  zoomY = parseFloat(nums[3]);\r\n                  transformX = parseInt(nums[4], undefined);\r\n                  transformY = parseInt(nums[5], undefined);\r\n                }\r\n\r\n                const width = 25 * zoomX;\r\n                const height = 22 * zoomY;\r\n\r\n                for (let i = 1; i < renderedNumberRegistry.length; i++) {\r\n                  const currentNum = renderedNumberRegistry[i];\r\n                  if (currentNum) {\r\n                    const tspan = currentNum.getElementsByTagName('tspan')[0];\r\n                    const tx = tspan.getAttribute('x');\r\n                    const ty = tspan.getAttribute('y');\r\n                    const tNumber = parseInt(tspan.innerHTML, undefined);\r\n\r\n                    const elementX = Math.floor(\r\n                      tx * zoomX + (transformX - 11 * zoomX)\r\n                    );\r\n                    const elementY = Math.floor(\r\n                      ty * zoomY + (transformY - 15 * zoomY)\r\n                    );\r\n\r\n                    allActivities.forEach((activity: ActivityCanvasObject) => {\r\n                      const activityNumber = activity.businessObject.number;\r\n                      if (activityNumber === tNumber) {\r\n                        if (\r\n                          positionsMatch(\r\n                            width,\r\n                            height,\r\n                            elementX,\r\n                            elementY,\r\n                            clickX,\r\n                            clickY\r\n                          )\r\n                        ) {\r\n                          this.activityDoubleClick(\r\n                            activity,\r\n                            eventBus,\r\n                            commandStack\r\n                          );\r\n                        }\r\n                      }\r\n                    });\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    // when in replay, do not allow any interaction on the canvas\r\n    eventBus.on(\r\n      [\r\n        'element.click',\r\n        'element.dblclick',\r\n        'element.mousedown',\r\n        'drag.init',\r\n        'canvas.viewbox.changing',\r\n        'autoPlace',\r\n        'popupMenu.open',\r\n      ],\r\n      10000000000,\r\n      (event: any) => {\r\n        if (this.replayStateService.getReplayOn()) {\r\n          event.stopPropagation();\r\n          event.preventDefault();\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  /** Overrrides for Canvas Functions **/\r\n  private activityDoubleClick(\r\n    activity: ActivityCanvasObject,\r\n    eventBus: any,\r\n    commandStack: any\r\n  ): void {\r\n    const source = activity.source;\r\n\r\n    // ensure the right number when changing the direction of an activity\r\n    toggleStashUse(false);\r\n\r\n    const config = new MatDialogConfig();\r\n    config.disableClose = false;\r\n    config.autoFocus = true;\r\n\r\n    if (\r\n      activity.businessObject.number &&\r\n      source &&\r\n      source.type.includes(elementTypes.ACTOR)\r\n    ) {\r\n      config.data = new ActivityDialogData(\r\n        activity,\r\n        getMultipleNumberRegistry()[activity.businessObject.number],\r\n        true,\r\n        (data: any) => this.saveActivityInputLabel(data, eventBus, commandStack)\r\n      );\r\n    } else if (source && source.type.includes(elementTypes.WORKOBJECT)) {\r\n      config.data = new ActivityDialogData(\r\n        activity,\r\n        false,\r\n        false,\r\n        (activityData: any) =>\r\n          this.saveActivityInputLabel(activityData, eventBus, commandStack)\r\n      );\r\n    }\r\n    this.dialogService.openDialog(ActivityDialogComponent, config);\r\n  }\r\n\r\n  private saveActivityInputLabel(\r\n    activityData: any,\r\n    eventBus: any,\r\n    commandStack: any\r\n  ): void {\r\n    const label = activityData.activityLabel;\r\n    const hasNumber = activityData.multipleNumbers !== undefined;\r\n    const activityNumber = activityData.activityNumber;\r\n    const multipleNumberAllowed = activityData.multipleNumbers;\r\n    const element = activityData.activity;\r\n\r\n    const activitiesFromActors =\r\n      this.elementRegistryService.getActivitiesFromActors();\r\n    const index = activitiesFromActors.indexOf(element);\r\n\r\n    activitiesFromActors.splice(index, 1);\r\n    if (hasNumber) {\r\n      setNumberIsMultiple(activityNumber, multipleNumberAllowed);\r\n    }\r\n    element.businessObject.multipleNumberAllowed = multipleNumberAllowed;\r\n\r\n    let options: any;\r\n    if (hasNumber) {\r\n      options = {\r\n        businessObject: element.businessObject,\r\n        newLabel: label,\r\n        newNumber: activityNumber,\r\n        element,\r\n      };\r\n    } else {\r\n      options = {\r\n        businessObject: element.businessObject,\r\n        newLabel: label,\r\n        element,\r\n      };\r\n    }\r\n\r\n    commandStack.execute('activity.changed', options);\r\n    if (element.businessObject.multipleNumberAllowed !== false) {\r\n      if (getMultipleNumberRegistry()[activityNumber] === false) {\r\n        updateExistingNumbersAtEditing(\r\n          activitiesFromActors,\r\n          activityNumber,\r\n          eventBus\r\n        );\r\n      }\r\n    } else if (element.businessObject.multipleNumberAllowed === false) {\r\n      updateExistingNumbersAtEditing(\r\n        activitiesFromActors,\r\n        activityNumber,\r\n        eventBus\r\n      );\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { assign } from 'min-dash';\r\nimport DomainStoryModeler from 'src/app/Modeler';\r\nimport { DomainConfiguration } from 'src/app/Domain/Common/domainConfiguration';\r\nimport { InitializerService } from './initializer.service';\r\nimport { ElementRegistryService } from '../ElementRegistry/element-registry.service';\r\nimport { IconDictionaryService } from '../DomainConfiguration/icon-dictionary.service';\r\nimport { DomainConfigurationService } from '../DomainConfiguration/domain-configuration.service';\r\nimport { BusinessObject } from '../../Domain/Common/businessObject';\r\nimport { StorageService } from '../BrowserStorage/storage.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ModelerService {\r\n  constructor(\r\n    private initializerService: InitializerService,\r\n    private elementRegistryService: ElementRegistryService,\r\n    private iconDictionaryService: IconDictionaryService,\r\n    private domainConfigurationService: DomainConfigurationService,\r\n    private storageService: StorageService\r\n  ) {}\r\n\r\n  private modeler: any;\r\n  private canvas: any;\r\n  private elementRegistry: any;\r\n  private commandStack: any;\r\n  private selection: any;\r\n  private eventBus: any;\r\n\r\n  private encoded: string | undefined;\r\n\r\n  postInit(): void {\r\n    const storedDomainConfiguration =\r\n      this.storageService.getStoredDomainConfiguration();\r\n    if (storedDomainConfiguration) {\r\n      this.iconDictionaryService.setCusomtConfiguration(\r\n        storedDomainConfiguration\r\n      );\r\n      this.domainConfigurationService.loadConfiguration(\r\n        storedDomainConfiguration\r\n      );\r\n    }\r\n    this.initializerService.initializeDomainStoryModelerClasses();\r\n    this.modeler = new DomainStoryModeler({\r\n      container: '#canvas',\r\n      keyboard: {\r\n        bindTo: document,\r\n      },\r\n\r\n      // Disable BPMN-SearchModule and re-enable browser Search\r\n      additionalModules: [\r\n        {\r\n          bpmnSearch: ['value', 'foo'],\r\n        },\r\n      ],\r\n    });\r\n\r\n    if (this.modeler.get) {\r\n      this.canvas = this.modeler.get('canvas');\r\n      this.elementRegistry = this.modeler.get('elementRegistry');\r\n      this.eventBus = this.modeler.get('eventBus');\r\n      this.commandStack = this.modeler.get('commandStack');\r\n      this.selection = this.modeler.get('selection');\r\n    }\r\n\r\n    this.initializerService.initializeDomainStoryModelerEventHandlers(\r\n      this.commandStack,\r\n      this.eventBus\r\n    );\r\n    this.initializerService.propagateDomainStoryModelerClassesToServices(\r\n      this.commandStack,\r\n      this.elementRegistry,\r\n      this.canvas,\r\n      this.selection,\r\n      this.modeler\r\n    );\r\n\r\n    const exportArtifacts = this.debounce(this.saveSVG, 500);\r\n    if (this.modeler.get) {\r\n      this.modeler.on('commandStack.changed', exportArtifacts);\r\n    }\r\n\r\n    this.initializerService.initiateEventBusListeners(\r\n      this.eventBus,\r\n      this.commandStack\r\n    );\r\n\r\n    this.modeler.createDiagram();\r\n    // expose bpmnjs to window for debugging purposes\r\n    assign(window, { bpmnjs: this.modeler });\r\n\r\n    this.startDebounce();\r\n  }\r\n\r\n  restart(\r\n    domainConfiguration?: DomainConfiguration,\r\n    domainStory?: BusinessObject[]\r\n  ): void {\r\n    const currentStory =\r\n      domainStory != undefined\r\n        ? domainStory\r\n        : this.elementRegistryService\r\n            .createObjectListForDSTDownload()\r\n            .map((e) => e.businessObject);\r\n    if (!domainConfiguration) {\r\n      domainConfiguration = this.storageService.getStoredDomainConfiguration();\r\n    }\r\n    if (domainConfiguration) {\r\n      this.storageService.setStoredDomainConfiguration(domainConfiguration);\r\n      this.iconDictionaryService.setCusomtConfiguration(domainConfiguration);\r\n      this.domainConfigurationService.loadConfiguration(domainConfiguration);\r\n    }\r\n\r\n    this.elementRegistryService.clear();\r\n    this.modeler?.destroy();\r\n    this.postInit();\r\n    if (currentStory && this.modeler.get) {\r\n      this.modeler.importCustomElements(currentStory);\r\n    }\r\n  }\r\n\r\n  /** Interactions with the Modeler **/\r\n  getModeler(): any {\r\n    return this.modeler;\r\n  }\r\n\r\n  commandStackChanged(): void {\r\n    // to update the title of the svg, we need to tell the command stack, that a value has changed\r\n    this.eventBus.fire(\r\n      'commandStack.changed',\r\n      this.debounce(this.saveSVG, 500)\r\n    );\r\n  }\r\n\r\n  startDebounce(): void {\r\n    this.debounce(this.saveSVG, 500);\r\n  }\r\n\r\n  debounce(fn: any, timeout: number): any {\r\n    return () => {\r\n      let timer;\r\n      if (timer) {\r\n        clearTimeout(timer);\r\n      }\r\n      timer = setTimeout(() => {\r\n        // tslint:disable-next-line:no-unused-expression\r\n        fn(this.modeler).then((svg: string) => {\r\n          this.encoded = svg;\r\n        }) as Promise<any>;\r\n      }, timeout);\r\n    };\r\n  }\r\n\r\n  getEncoded(): string {\r\n    return this.encoded ? this.encoded : '';\r\n  }\r\n\r\n  async saveSVG(modeler: any): Promise<any> {\r\n    try {\r\n      const result = await modeler.saveSVG();\r\n      return result.svg;\r\n    } catch (err) {\r\n      alert('There was an error saving the SVG.\\n' + err);\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ModelerService } from 'src/app/Service/Modeler/modeler.service';\r\nimport { BusinessObject } from 'src/app/Domain/Common/businessObject';\r\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\r\nimport { DirtyFlagService } from 'src/app/Service/DirtyFlag/dirty-flag.service';\r\nimport { DomainConfiguration } from 'src/app/Domain/Common/domainConfiguration';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class RendererService {\r\n  constructor(\r\n    private modelerService: ModelerService,\r\n    private elementRegistryService: ElementRegistryService,\r\n    private dirtyFlagService: DirtyFlagService\r\n  ) {}\r\n\r\n  renderStory(domainStory: BusinessObject[]): void {\r\n    this.modelerService.getModeler().importCustomElements(domainStory);\r\n  }\r\n\r\n  importStory(\r\n    domainStory: BusinessObject[],\r\n    configurationChange: boolean,\r\n    config?: DomainConfiguration,\r\n    makeClean = true\r\n  ): void {\r\n    this.modelerService.restart(config, domainStory);\r\n    this.renderStory(domainStory);\r\n\r\n    this.elementRegistryService.correctInitialize();\r\n\r\n    this.modelerService.commandStackChanged();\r\n    this.modelerService.startDebounce();\r\n\r\n    if (makeClean) {\r\n      this.dirtyFlagService.makeClean();\r\n    }\r\n  }\r\n\r\n  getStory(): BusinessObject[] {\r\n    return this.elementRegistryService\r\n      .createObjectListForDSTDownload()\r\n      .map((c) => c.businessObject);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ReplayStateService {\r\n  private replayOnSubject = new BehaviorSubject<boolean>(false);\r\n\r\n  replayOn$ = this.replayOnSubject.asObservable();\r\n\r\n  setReplayState(state: boolean): void {\r\n    this.replayOnSubject.next(state);\r\n  }\r\n\r\n  getReplayOn(): boolean {\r\n    return this.replayOnSubject.value;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ReplayStateService } from 'src/app/Service/Replay/replay-state.service';\r\nimport { DomManipulationService } from 'src/app/Service/DomManipulation/dom-manipulation.service';\r\nimport { StoryStep } from 'src/app/Domain/Replay/storyStep';\r\nimport { StoryCreatorService } from './storyCreator/story-creator.service';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport {\r\n  SNACKBAR_DURATION,\r\n  SNACKBAR_INFO,\r\n} from '../../Domain/Common/constants';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ReplayService {\r\n  private story: StoryStep[] = [];\r\n  private currentStep = new BehaviorSubject(-1);\r\n  private maxStepNumber = new BehaviorSubject(0);\r\n\r\n  currentStep$ = this.currentStep.asObservable();\r\n  maxStepNumber$ = this.maxStepNumber.asObservable();\r\n\r\n  constructor(\r\n    private replayStateService: ReplayStateService,\r\n    private domManipulationService: DomManipulationService,\r\n    private storyCreatorService: StoryCreatorService,\r\n    private snackbar: MatSnackBar\r\n  ) {}\r\n\r\n  initializeReplay(): void {\r\n    this.currentStep.next(1);\r\n    this.story = this.storyCreatorService.traceActivitiesAndCreateStory();\r\n    this.maxStepNumber.next(this.story.length);\r\n  }\r\n\r\n  getCurrentStepNumber(): number {\r\n    return this.currentStep.value;\r\n  }\r\n\r\n  getMaxStepNumber(): number {\r\n    return this.maxStepNumber.value;\r\n  }\r\n\r\n  nextStep(): void {\r\n    if (this.currentStep.value < this.story.length) {\r\n      this.currentStep.next(this.currentStep.value + 1);\r\n      this.showCurrentStep();\r\n    }\r\n  }\r\n\r\n  previousStep(): void {\r\n    if (this.currentStep.value > 1) {\r\n      this.currentStep.next(this.currentStep.value - 1);\r\n      this.showCurrentStep();\r\n    }\r\n  }\r\n\r\n  private showCurrentStep() {\r\n    this.domManipulationService.showStep(\r\n      this.story[this.currentStep.value - 1],\r\n      this.currentStep.value > 1\r\n        ? this.story[this.currentStep.value - 2]\r\n        : undefined\r\n    );\r\n  }\r\n\r\n  startReplay(): void {\r\n    this.initializeReplay();\r\n    if (this.story?.length) {\r\n      const missingSteps = this.storyCreatorService.getMissingSteps(this.story);\r\n      if (missingSteps.length === 0) {\r\n        this.replayStateService.setReplayState(true);\r\n        this.domManipulationService.showStep(\r\n          this.story[this.currentStep.getValue() - 1]\r\n        );\r\n      } else {\r\n        const steps = missingSteps.join(', ');\r\n        this.snackbar.open(\r\n          steps.length === 1\r\n            ? `The Domain Story is not complete. Step ${steps} is missing.`\r\n            : `The Domain Story is not complete. Steps ${steps} are missing.`,\r\n          undefined,\r\n          {\r\n            duration: SNACKBAR_DURATION * 2,\r\n            panelClass: SNACKBAR_INFO,\r\n          }\r\n        );\r\n      }\r\n    } else {\r\n      this.snackbar.open('You need a Domain Story for replay.', undefined, {\r\n        duration: SNACKBAR_DURATION * 2,\r\n        panelClass: SNACKBAR_INFO,\r\n      });\r\n    }\r\n  }\r\n\r\n  stopReplay(): void {\r\n    this.currentStep.next(-1);\r\n    this.maxStepNumber.next(0);\r\n    this.replayStateService.setReplayState(false);\r\n    this.domManipulationService.showAll();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { elementTypes } from '../../../Domain/Common/elementTypes';\r\nimport { ActivityCanvasObject } from '../../../Domain/Common/activityCanvasObject';\r\nimport { BusinessObject } from '../../../Domain/Common/businessObject';\r\nimport { CanvasObject } from '../../../Domain/Common/canvasObject';\r\nimport { ElementRegistryService } from '../../ElementRegistry/element-registry.service';\r\nimport { StoryStep } from '../../../Domain/Replay/storyStep';\r\nimport { Dictionary } from '../../../Domain/Common/dictionary/dictionary';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class StoryCreatorService {\r\n  constructor(private elementRegistryService: ElementRegistryService) {}\r\n\r\n  traceActivitiesAndCreateStory(): StoryStep[] {\r\n    const tracedActivityMap = new Dictionary();\r\n    const story: StoryStep[] = [];\r\n    const activities = this.elementRegistryService.getActivitiesFromActors();\r\n\r\n    activities.forEach((activity) => {\r\n      const activityNumber = Number(activity.businessObject.number); // Sometimes the activityNumber is a string for some reason\r\n      const tracedItem = tracedActivityMap.get(`${activityNumber - 1}`)\r\n        ? tracedActivityMap.get(`${activityNumber - 1}`)\r\n        : [];\r\n      tracedItem.push(activity);\r\n      tracedActivityMap.set(`${activityNumber - 1}`, tracedItem);\r\n    });\r\n\r\n    for (let i = 0; i < tracedActivityMap.keysArray().length; i++) {\r\n      this.createStep(tracedActivityMap, i, story);\r\n    }\r\n    this.addGroupStep(story);\r\n    return story;\r\n  }\r\n\r\n  private createStep(\r\n    tracedActivityMap: Dictionary,\r\n    i: number,\r\n    story: StoryStep[]\r\n  ): void {\r\n    const stepObjects = this.getStepObjects(\r\n      tracedActivityMap.get(`${i}`) || []\r\n    );\r\n    const highlightedElements = stepObjects.map((t) => t.id);\r\n    if (i > 0) {\r\n      story[i - 1].objects.forEach((object) => {\r\n        if (!stepObjects.includes(object)) {\r\n          stepObjects.push(object);\r\n        }\r\n      });\r\n    }\r\n    story[i] = {\r\n      highlightedObjects: highlightedElements,\r\n      objects: stepObjects,\r\n    };\r\n  }\r\n\r\n  getMissingSteps(story: StoryStep[]): number[] {\r\n    if (!story || story.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const missingSteps: number[] = [];\r\n    let complete = true;\r\n    for (let i = 0; i < story.length; i++) {\r\n      if (\r\n        !story[i] ||\r\n        !(story[i].objects.length > 0) ||\r\n        story[i].objects.filter(\r\n          (element) => element.type === elementTypes.ACTIVITY\r\n        ).length <= 0\r\n      ) {\r\n        missingSteps.push(i + 1);\r\n        complete = false;\r\n      }\r\n    }\r\n    return missingSteps;\r\n  }\r\n\r\n  private getStepObjects(\r\n    tracedActivity: ActivityCanvasObject[]\r\n  ): BusinessObject[] {\r\n    const initialSource: CanvasObject[] = [];\r\n    const activities = tracedActivity;\r\n    const targetObjects: CanvasObject[] = [];\r\n\r\n    tracedActivity.forEach((parallelStep: ActivityCanvasObject) => {\r\n      initialSource.push(parallelStep.source);\r\n\r\n      const firstTarget = parallelStep.target;\r\n      targetObjects.push(firstTarget);\r\n\r\n      // check the outgoing activities for each target\r\n      for (const checkTarget of targetObjects) {\r\n        if (\r\n          checkTarget.businessObject &&\r\n          !checkTarget.businessObject.type.includes('actor') &&\r\n          checkTarget.outgoing\r\n        ) {\r\n          // check the target for each outgoing activity\r\n          checkTarget.outgoing.forEach((activity: ActivityCanvasObject) => {\r\n            activities.push(activity);\r\n            const activityTarget = activity.target;\r\n            if (activityTarget && !targetObjects.includes(activityTarget)) {\r\n              targetObjects.push(activityTarget);\r\n            }\r\n          });\r\n        }\r\n      }\r\n    });\r\n    return initialSource\r\n      .map((e) => e.businessObject)\r\n      .concat(activities.map((a) => a.businessObject))\r\n      .concat(targetObjects.map((t) => t.businessObject));\r\n  }\r\n\r\n  /** Groups should be shown at the End of the Story **/\r\n  private addGroupStep(story: StoryStep[]): void {\r\n    const groups = this.elementRegistryService.getAllGroups() as CanvasObject[];\r\n    if (groups.length > 0) {\r\n      story.push({\r\n        highlightedObjects: [],\r\n        objects: groups\r\n          .map((g) => g.businessObject)\r\n          .concat(story[story.length - 1].objects),\r\n      });\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class SettingsService {\r\n  private showSettings = new BehaviorSubject(false);\r\n  showSettings$ = this.showSettings.asObservable();\r\n\r\n  close(): void {\r\n    this.showSettings.next(false);\r\n  }\r\n\r\n  open(): void {\r\n    this.showSettings.next(true);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport {\r\n  INITIAL_DESCRIPTION,\r\n  INITIAL_DOMAIN_NAME,\r\n  INITIAL_TITLE,\r\n  VERSION,\r\n} from '../../Domain/Common/constants';\r\nimport { CommandStackService } from '../CommandStack/command-stack.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class TitleService {\r\n  private titleSubject = new BehaviorSubject<string>(INITIAL_TITLE);\r\n  private descriptionSubject = new BehaviorSubject<string>(INITIAL_DESCRIPTION);\r\n  private domainNameSubject = new BehaviorSubject<string>(INITIAL_DOMAIN_NAME);\r\n  private showDescriptionSubject = new BehaviorSubject<boolean>(true);\r\n\r\n  title$ = this.titleSubject.asObservable();\r\n  description$ = this.descriptionSubject.asObservable();\r\n  showDescription$ = this.showDescriptionSubject.asObservable();\r\n  domainName$ = this.domainNameSubject.asObservable();\r\n\r\n  constructor(private commandStackService: CommandStackService) {}\r\n\r\n  updateTitleAndDescription(\r\n    title: string | null,\r\n    description: string | null,\r\n    allowUndo: boolean\r\n  ): void {\r\n    if (allowUndo) {\r\n      this.fireTitleAndDescriptionUpdate(title, description);\r\n    } else {\r\n      this.updateTitle(title);\r\n      this.updateDescription(description);\r\n    }\r\n  }\r\n\r\n  private updateTitle(title: string | null): void {\r\n    this.titleSubject.next(title ?? this.titleSubject.value);\r\n    document.title = title ?? this.titleSubject.value + ' - egon.io';\r\n  }\r\n\r\n  private updateDescription(description: string | null): void {\r\n    this.descriptionSubject.next(description ?? this.descriptionSubject.value);\r\n  }\r\n\r\n  setShowDescription(show: boolean): void {\r\n    this.showDescriptionSubject.next(show);\r\n  }\r\n\r\n  setDomainName(name: string): void {\r\n    this.domainNameSubject.next(name);\r\n  }\r\n\r\n  getTitle(): string {\r\n    return this.titleSubject.value;\r\n  }\r\n\r\n  getDescription(): string {\r\n    return this.descriptionSubject.value;\r\n  }\r\n\r\n  getDomainName(): string {\r\n    return this.domainNameSubject.value;\r\n  }\r\n\r\n  getVersion(): string {\r\n    return VERSION;\r\n  }\r\n\r\n  private fireTitleAndDescriptionUpdate(\r\n    newTitle: string | null,\r\n    newDescription: string | null\r\n  ): void {\r\n    const context = {\r\n      newTitle,\r\n      newDescription,\r\n    };\r\n    this.commandStackService.execute(\r\n      'story.updateHeadlineAndDescription',\r\n      context\r\n    );\r\n  }\r\n}\r\n","'use strict';\r\n\r\n// convert rad to deg\r\nexport function degrees(radians: number): number {\r\n  return (radians * 180) / Math.PI;\r\n}\r\n\r\n// calculate the angle between two points in 2D\r\nexport function angleBetween(\r\n  startPoint: Point,\r\n  endPoint: Point\r\n): number | undefined {\r\n  let quadrant;\r\n\r\n  // determine in which quadrant we are\r\n  if (startPoint.x <= endPoint.x) {\r\n    if (startPoint.y >= endPoint.y) {\r\n      quadrant = 0;\r\n    } // upper right quadrant\r\n    else {\r\n      quadrant = 3;\r\n    } // lower right quadrant\r\n  } else {\r\n    if (startPoint.y >= endPoint.y) {\r\n      quadrant = 1;\r\n    } // upper left Quadrant\r\n    else {\r\n      quadrant = 2;\r\n    } // lower left quadrant\r\n  }\r\n\r\n  const adjacent = Math.abs(startPoint.y - endPoint.y);\r\n  const opposite = Math.abs(startPoint.x - endPoint.x);\r\n\r\n  // since the arcus-tangens only gives values between 0 and 90, we have to adjust for the quadrant we are in\r\n\r\n  if (quadrant === 0) {\r\n    return 90 - degrees(Math.atan2(opposite, adjacent));\r\n  }\r\n  if (quadrant === 1) {\r\n    return 90 + degrees(Math.atan2(opposite, adjacent));\r\n  }\r\n  if (quadrant === 2) {\r\n    return 270 - degrees(Math.atan2(opposite, adjacent));\r\n  }\r\n  if (quadrant === 3) {\r\n    return 270 + degrees(Math.atan2(opposite, adjacent));\r\n  }\r\n  return undefined;\r\n}\r\n\r\nexport function positionsMatch(\r\n  width: number,\r\n  height: number,\r\n  elementX: number,\r\n  elementY: number,\r\n  clickX: number,\r\n  clickY: number\r\n): boolean {\r\n  if (clickX > elementX && clickX < elementX + width) {\r\n    if (clickY > elementY && clickY < elementY + height) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nexport class Point {\r\n  y = 0;\r\n  x = 0;\r\n}\r\n","import { elementTypes } from 'src/app/Domain/Common/elementTypes';\r\n\r\nexport function getNameFromType(type: string): string {\r\n  if (type.includes(elementTypes.ACTOR)) {\r\n    return type.replace(elementTypes.ACTOR, '');\r\n  } else if (type.includes(elementTypes.WORKOBJECT)) {\r\n    return type.replace(elementTypes.WORKOBJECT, '');\r\n  }\r\n  return '';\r\n}\r\n","'use strict';\r\n\r\n// sanitize user-Input to be Desktop-Filename safe\r\nexport function sanitizeForDesktop(str: string): string {\r\n  const map: { [key: string]: string } = {\r\n    '/': '',\r\n    '\\\\': '',\r\n    ':': '',\r\n    '*': '',\r\n    '?': '',\r\n    '\"': '',\r\n    '<': '',\r\n    '>': '',\r\n    '|': '',\r\n  };\r\n  const reg = /[/\\\\:*?\"<>|]/gi;\r\n  return str ? str.replace(reg, (match) => map[match]) : '';\r\n}\r\n\r\nexport function sanitizeIconName(name: string): string {\r\n  const map: { [key: string]: string } = {\r\n    '/': '',\r\n    '\\\\': '',\r\n    ':': '',\r\n    '*': '',\r\n    '?': '',\r\n    '\"': '',\r\n    '<': '',\r\n    '>': '',\r\n    '|': '',\r\n    '(': '',\r\n    ')': '',\r\n    ' ': '-',\r\n    '.': '_',\r\n  };\r\n  const reg = /[/\\\\:*?\"<>|() .]/gi;\r\n  return name\r\n    ? name.replace(reg, (match) => {\r\n        return map[match];\r\n      })\r\n    : '';\r\n}\r\n\r\nexport function restoreTitleFromFileName(\r\n  filename: string,\r\n  isSVG: boolean\r\n): string {\r\n  let title;\r\n\r\n  const dstRegex = /_\\d+-\\d+-\\d+( ?_?-?\\(\\d+\\))?(-?\\d)?(.dst|.egn)/;\r\n  const svgRegex = /_\\d+-\\d+-\\d+( ?_?-?\\(\\d+\\))?(-?\\d)?(.dst|.egn).svg/;\r\n\r\n  const egnSuffix = '.dst';\r\n  const dstSuffix = '.dst';\r\n  const svgSuffix = '.svg';\r\n\r\n  let filenameWithoutDateSuffix = filename.replace(\r\n    isSVG ? svgRegex : dstRegex,\r\n    ''\r\n  );\r\n  if (filenameWithoutDateSuffix.includes(isSVG ? svgSuffix : dstSuffix)) {\r\n    filenameWithoutDateSuffix = filenameWithoutDateSuffix\r\n      .replace(svgSuffix, '')\r\n      .replace(dstSuffix, '')\r\n      .replace(egnSuffix, '');\r\n  }\r\n  title = filenameWithoutDateSuffix;\r\n  return title;\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { SettingsService } from 'src/app/Service/Settings/settings.service';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { DialogService } from './Service/Dialog/dialog.service';\r\nimport { MatDialogConfig } from '@angular/material/dialog';\r\nimport { InfoDialogData } from './Domain/Dialog/infoDialogData';\r\nimport { InfoDialogComponent } from './Presentation/Dialog/info-dialog/info-dialog.component';\r\nimport { TitleService } from './Service/Title/title.service';\r\nimport { VERSION } from './Domain/Common/constants';\r\nimport { ExportService } from './Service/Export/export.service';\r\nimport { ReplayStateService } from './Service/Replay/replay-state.service';\r\nimport { ReplayService } from './Service/Replay/replay.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n})\r\nexport class AppComponent implements OnInit {\r\n  showSettings$: Observable<boolean> | BehaviorSubject<boolean>;\r\n  showDescription$: Observable<boolean>;\r\n  version: string = '';\r\n\r\n  constructor(\r\n    private settingsService: SettingsService,\r\n    private dialogService: DialogService,\r\n    private titleService: TitleService,\r\n    private exportService: ExportService,\r\n    private replayStateSerice: ReplayStateService,\r\n    private replayService: ReplayService\r\n  ) {\r\n    this.showSettings$ = new BehaviorSubject(false);\r\n    this.showDescription$ = new BehaviorSubject(true);\r\n    this.version = VERSION;\r\n\r\n    document.onkeydown = (e: KeyboardEvent) => {\r\n      if (e.ctrlKey && e.key === 's') {\r\n        if (this.exportService.isDomainStoryExportable()) {\r\n          this.exportService.downloadDST();\r\n        }\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }\r\n      if (e.ctrlKey && e.key === 'l') {\r\n        document.getElementById('import')?.click();\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }\r\n      if (e.key === 'ArrowRight' && this.replayStateSerice.getReplayOn()) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        replayService.nextStep();\r\n      }\r\n      if (e.key === 'ArrowLeft' && this.replayStateSerice.getReplayOn()) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        replayService.previousStep();\r\n      }\r\n    };\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.showDescription$ = this.titleService.showDescription$;\r\n    this.showSettings$ = this.settingsService.showSettings$;\r\n  }\r\n\r\n  openLinkDialog(link: string, title: string, text: string): void {\r\n    const config = new MatDialogConfig();\r\n    config.disableClose = false;\r\n    config.autoFocus = true;\r\n\r\n    config.data = new InfoDialogData(title, text, true, true, link);\r\n\r\n    this.dialogService.openDialog(InfoDialogComponent, config);\r\n  }\r\n}\r\n","<div class=\"content\" role=\"main\">\r\n  <app-settings *ngIf=\"showSettings$ | async\"></app-settings>\r\n  <div\r\n    [class.headerAndCanvas]=\"\r\n      !(showSettings$ | async) && (showDescription$ | async)\r\n    \"\r\n    [class.headerAndCanvasCollapsed]=\"\r\n      !(showSettings$ | async) && !(showDescription$ | async)\r\n    \"\r\n    [class.hidden]=\"showSettings$ | async\"\r\n  >\r\n    <input type=\"color\" id=\"colorPicker\" style=\"display: none\" />\r\n\r\n    <app-header\r\n      [class.header]=\"showDescription$ | async\"\r\n      [class.headerCollapsed]=\"!(showDescription$ | async)\"\r\n    ></app-header>\r\n    <app-modeler></app-modeler>\r\n  </div>\r\n\r\n  <div\r\n    [class.logoContainer]=\"!(showSettings$ | async)\"\r\n    [class.hidden]=\"showSettings$ | async\"\r\n  >\r\n    <div id=\"imgWPS\">\r\n      <img\r\n        src=\"./assets/logo/wps-icon.ico\"\r\n        height=\"54\"\r\n        width=\"40\"\r\n        alt=\"\"\r\n        (click)=\"openLinkDialog('https://wps.de', 'WPS', 'Provided by:')\"\r\n      />\r\n    </div>\r\n    <div id=\"imgDST\">\r\n      <img\r\n        src=\"./assets/logo/dst_logo.png\"\r\n        height=\"74\"\r\n        width=\"74\"\r\n        alt=\"\"\r\n        (click)=\"\r\n          openLinkDialog(\r\n            'https://domainstorytelling.org/',\r\n            'Domain-Storytelling',\r\n            'Check us out at: '\r\n          )\r\n        \"\r\n      />\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { ApplicationRef, DoBootstrap, NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport {\r\n  MAT_CHECKBOX_DEFAULT_OPTIONS,\r\n  MatCheckboxDefaultOptions,\r\n} from '@angular/material/checkbox';\r\n\r\nimport { NoopAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { HeaderComponent } from 'src/app/Presentation/Header/header.component';\r\nimport { SettingsComponent } from 'src/app/Presentation/Settings/settings.component';\r\nimport { AppComponent } from 'src/app/app.component';\r\nimport { ExportService } from 'src/app/Service/Export/export.service';\r\nimport { ImportDomainStoryService } from 'src/app/Service/Import/import-domain-story.service';\r\nimport { ImportRepairService } from 'src/app/Service/Import/import-repair.service';\r\nimport { ModelerService } from 'src/app/Service/Modeler/modeler.service';\r\nimport { TitleService } from 'src/app/Service/Title/title.service';\r\nimport { LabelDictionaryService } from 'src/app/Service/LabelDictionary/label-dictionary.service';\r\nimport { ReplayService } from 'src/app/Service/Replay/replay.service';\r\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\r\nimport { DomainConfigurationService } from 'src/app/Service/DomainConfiguration/domain-configuration.service';\r\nimport { MassNamingService } from 'src/app/Service/LabelDictionary/mass-naming.service';\r\nimport { InfoDialogComponent } from 'src/app/Presentation/Dialog/info-dialog/info-dialog.component';\r\nimport { ExportDialogComponent } from 'src/app/Presentation/Dialog/export-dialog/export-dialog.component';\r\nimport { ActivityDialogComponent } from 'src/app/Presentation/Dialog/activity-dialog/activity-dialog.component';\r\nimport { UntypedFormBuilder, ReactiveFormsModule } from '@angular/forms';\r\nimport { HeaderDialogComponent } from 'src/app/Presentation/Dialog/header-dialog/header-dialog.component';\r\nimport { IconDictionaryService } from 'src/app/Service/DomainConfiguration/icon-dictionary.service';\r\nimport { ModelerComponent } from 'src/app/Presentation/Canvas/modeler.component';\r\nimport { SettingsModule } from 'src/app/Modules/settings.module';\r\nimport { AutosaveService } from './Service/Autosave/autosave.service';\r\nimport { DomainStoryModelerModuleModule } from './Modules/domain-story-modeler-module.module';\r\nimport { LabelDictionaryDialogComponent } from './Presentation/Dialog/label-dictionary-dialog/label-dictionary-dialog.component';\r\nimport { MaterialModule } from './material.module';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HeaderComponent,\r\n    SettingsComponent,\r\n    AppComponent,\r\n    InfoDialogComponent,\r\n    ExportDialogComponent,\r\n    ActivityDialogComponent,\r\n    HeaderDialogComponent,\r\n    ModelerComponent,\r\n    LabelDictionaryDialogComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    NoopAnimationsModule,\r\n    ReactiveFormsModule,\r\n    SettingsModule,\r\n    DomainStoryModelerModuleModule,\r\n    MaterialModule,\r\n  ],\r\n  providers: [\r\n    AutosaveService,\r\n    ExportService,\r\n    ImportDomainStoryService,\r\n    ImportRepairService,\r\n    IconDictionaryService,\r\n    TitleService,\r\n    LabelDictionaryService,\r\n    ReplayService,\r\n    ElementRegistryService,\r\n    DomainConfigurationService,\r\n    ModelerService,\r\n    MassNamingService,\r\n    UntypedFormBuilder,\r\n    {\r\n      provide: MAT_CHECKBOX_DEFAULT_OPTIONS,\r\n      useValue: { clickAction: 'noop' } as MatCheckboxDefaultOptions,\r\n    },\r\n  ],\r\n})\r\nexport class AppModule implements DoBootstrap {\r\n  constructor(private autosaveService: AutosaveService) {\r\n    // autosaveService wird so automatisch initialisiert, auf keinen Fall entfernen!\r\n  }\r\n\r\n  ngDoBootstrap(app: ApplicationRef): void {\r\n    const componentElement = document.createElement('app-root');\r\n    document.body.append(componentElement);\r\n    app.bootstrap(AppComponent);\r\n  }\r\n}\r\n","import { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { MatExpansionModule } from '@angular/material/expansion';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatGridListModule } from '@angular/material/grid-list';\r\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\n\r\n@NgModule({\r\n  imports: [\r\n    MatButtonModule,\r\n    MatButtonToggleModule,\r\n    MatListModule,\r\n    MatCheckboxModule,\r\n    MatDialogModule,\r\n    MatFormFieldModule,\r\n    MatGridListModule,\r\n    MatInputModule,\r\n    MatToolbarModule,\r\n    MatExpansionModule,\r\n    MatSnackBarModule,\r\n    MatCardModule,\r\n  ],\r\n  exports: [\r\n    MatButtonModule,\r\n    MatButtonToggleModule,\r\n    MatListModule,\r\n    MatCheckboxModule,\r\n    MatDialogModule,\r\n    MatFormFieldModule,\r\n    MatGridListModule,\r\n    MatInputModule,\r\n    MatToolbarModule,\r\n    MatExpansionModule,\r\n    MatSnackBarModule,\r\n    MatCardModule,\r\n  ],\r\n})\r\nexport class MaterialModule {}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic()\r\n  .bootstrapModule(AppModule)\r\n  .catch((err) => console.error(err));\r\n"],"names":["Modeler","ResizeModule","assign","isArray","inherits","DomainStoryModule","LabelEditingModule","ModelingModule","elementTypes","DomainStoryModeler","options","call","_customElements","_groupElements","prototype","_modules","concat","_addCustomShape","customElement","parentId","parent","children","push","canvas","get","elementFactory","customAttrs","businessObject","customShape","create","isGroup","id","parentShape","addShape","_addCustomConnection","elementRegistry","connection","source","target","addConnection","importCustomElements","elements","fire","addCustomElements","customElements","Error","shapes","connections","groups","forEach","isConnection","getCustomElements","createDiagram","done","element","type","ACTIVITY","CONNECTION","GROUP","Replace","modeling","_modeling","replaceElement","oldElement","newElementData","newElement","setCenterOfElement","outgoingActivities","outgoing","incomingActivities","incoming","x","Math","ceil","width","y","height","name","replaceShape","replaceOptions","ReplaceMenuProvider","_dsReplace","$inject","getEntries","entries","includes","actorReplaceOptions","workObjectReplaceOptions","_createEntries","menuEntries","self","definition","entry","_createMenuEntry","action","replaceAction","label","className","actionName","getNameFromType","iconDictionaryService","initializeReplaceOptions","iconDictionary","actorTypes","getTypeDictionary","ACTOR","replaceOption","i","keysArray","actorType","typeName","toLowerCase","getIconForBPMN","workObjectTypes","WORKOBJECT","workObjectType","ContextPadProvider","bind","generateAutomaticNumber","getAllStandardIconKeys","dirtyFlagService","initializeContextPadProvider","dirtyFlag","DomainStoryContextPadProvider","injector","connect","translate","contextPad","popupMenu","replaceMenuProvider","commandStack","eventBus","startConnect","selectedElement","invoke","autoPlace","cached","getContextPadEntries","colorPicker","document","getElementById","onchange","ev","context","newColor","value","execute","makeDirty","registerProvider","allStandardIconKeys","actions","event","autoActivate","start","replace","addColorChange","addConnectWithActivity","addTextAnnotation","addActors","appendAction","addWorkObjects","addChangeWorkObjectTypeMenu","addChangeActorTypeMenu","delete","deleteGroup","group","title","click","removeGroup","moveDeleteActionToEndOfArray","removeElements","changeDirection","position","getReplaceMenuPosition","cursor","open","colorChange","TEXTANNOTATION","dragstart","icon","newNumber","Y_OFFSET","diagramContainer","getContainer","pad","getPad","html","diagramRect","getBoundingClientRect","padRect","top","left","appendStart","shape","createShape","hints","BpmnElementFactory","DEFAULT_LABEL_SIZE","DomainStoryIdFactory","DomainStoryElementFactory","bpmnFactory","moddle","domainStoryIdFactory","elementType","attrs","baseCreate","test","registerId","getId","key","set","$type","di","$descriptor","_getCustomElementSize","Object","defineProperty","createBpmnElement","__default","Dimensions","idList","generateId","idNumber","fourDigitsId","idSuffix","containsId","floor","random","same","BaseRenderer","Ids","getAnnotationBoxHeight","componentsToPath","createLine","append","svgAppend","attr","svgAttr","classes","svgClasses","svgCreate","query","domQuery","isObject","getNumberStash","addNumberToRegistry","numberBoxDefinitions","calculateTextWidth","countLines","labelPosition","angleBetween","RENDERER_IDS","numbers","DEFAULT_COLOR","initializeRenderer","elementRegistryService","DomainStoryRenderer","styles","textRenderer","pathMap","rendererId","next","markers","computeStyle","generateActivityNumber","parentGfx","box","numberStash","semantic","use","number","renderNumber","backgroundDotStyle","backgroundBoxStyle","newRenderedNumber","numberStyle","fitBox","style","getExternalStyle","fill","fontSize","fontFamily","renderEmbeddedLabel","align","padding","renderLabel","renderExternalLabel","waypoints","lines","startPoint","selected","endPoint","angle","alignment","boxWidth","xStart","abs","textAlign","length","wordWrap","overflowWrap","hyphens","renderExternalNumber","String","text","createText","add","setCoordinates","innerHTML","manipulateInnerHTMLXLabel","manipulateInnerHTMLYLabel","firstChild","attributes","nodeValue","offset","result","outerHTML","Number","drawGroup","pickedColor","rect","drawRect","stroke","useColorForElement","iconSRC","match","index","indexOf","substring","getIconSrc","startsWith","drawActor","p","svgDynamicSizeAttributes","actor","getTypeIconSRC","drawWorkObject","workObject","useColorForActivity","strokeWidth","strokeLinejoin","markerEnd","marker","drawActivity","adjustForTextOverlap","fixConnectionInHTML","parentElement","checkIfPointOverlapsText","point","lineOffset","getLineOffset","objects","getElementsByClassName","data_id","item","getAttribute","object","getElementsByTagName","tspans","tspan","wantedConnection","polylines","setAttribute","drawDSConnection","strokeDasharray","drawAnnotation","textElement","textPathData","getScaledPath","xScaleFactor","yScaleFactor","containerWidth","containerHeight","mx","my","drawPath","d","path","r","rx","ry","createMarker","sequenceflowEnd","addMarker","ref","scale","strokeLinecap","viewBox","refX","refY","markerWidth","markerHeight","orient","defs","_svg","getWorkObjectPath","rectangle","getRectPath","getGroupPath","getActivityPath","map","original","activityPath","waypoint","getActorPath","canRender","drawShape","search","pos","correctInitialize","getShapePath","drawConnection","getConnectionPath","every","reduce","RuleProvider","is","HIGH_PRIORITY","MIN_SIZE","isDomainStory","isDomainStoryGroup","isActor","isWorkObject","isActivity","isAnnotation","canConnect","canResize","newBounds","lowerLeft","lowerRight","upperRight","canAttach","Array","canConnectToAnnotation","DomainStoryRules","init","canCreate","addRule","host","s","undefined","hover","pick","CommandInterceptor","collectionAdd","remove","collectionRemove","reworkGroupElements","DomainStoryUpdater","bpmnjs","updateCustomElement","e","DOMAINSTORY","updateCustomConnection","newTarget","newSource","copyWaypoints","executed","ifDomainStoryElement","reverted","fn","DomainStoryPalette","ElementFactory","CreateModule","PathMap","PopupMenuModule","ContextPadModule","CommandStack","UpdateLabelHandler","headlineAndDescriptionUpdateHandler","DSModeling","__depends__","__init__","domainStoryRenderer","paletteProvider","domainStoryRules","domainStoryUpdater","contextPadProvider","elementFactoryBpmn","updateLabelHandler","svgRemove","MARKER_HIDDEN","MARKER_LABEL_HIDDEN","annotationBoxHeight","DSLabelEditingPreview","defaultLayer","getDefaultLayer","absoluteElementBBox","gfx","on","activeProvider","active","getAbsoluteBBox","getStrokeColor","labelTarget","dy","newElementHeight","max","removeMarker","getLabel","autocomplete","isAny","getExternalLabelMid","isLabelExternal","hasExternalLabel","isLabel","dictionaryService","stashUse","initializeLabelEditingProvider","labelingDictionary","toggleStashUse","DSLabelEditingProvider","directEditing","resizeHandles","_canvas","_textRenderer","_updateLabelHandler","activateDirectEdit","complete","isActive","cancel","removeResizers","createAutocomplete","canExecute","isTouch","force","activate","editingBox","focus","getWorkObjectLabels","bounds","getEditingBBox","autoResize","resizable","bbox","mid","zoom","defaultStyle","getDefaultStyle","externalStyle","externalFontSize","externalLineHeight","lineHeight","defaultFontSize","defaultLineHeight","fontWeight","minWidth","maxWidth","minHeight","paddingTop","paddingBottom","paddingLeft","paddingRight","externalLabelMid","absoluteBBox","update","newLabel","activeContextText","updateLabel","getLabelAttr","getNumberAttr","getNumber","setLabel","setNumber","textNumber","selectPartOfActivity","angleActivity","selectedActivity","linelength","fontsize","inp","arr","closeAllLists","currentFocus","addEventListener","autocompleteList","autocompleteItem","val","createElement","parentNode","appendChild","substr","toUpperCase","onclick","visibility","onkeydown","keyCode","addActive","preventDefault","removeActive","classList","survivor","removeChild","ChangeSupportModule","DirectEditingModule","dSlabelEditingProvider","dSlabelEditingPreview","str","split","amountWaypoints","determinedPosition","xPos","yPos","labelPositionX","labelPositionY","offsetX","scaledAngle","offsetY","Modeling","_commandStack","updateNumber","oldShape","newShape","newData","numberRegistry","multipleNumberRegistry","canvasElementRegistry","initializeNumbering","canvasElementRegistryService","boxHeight","elementActivity","usedNumbers","wantedNumber","activitiesFromActors","getActivitiesFromActors","updateExistingNumbersAtGeneration","setTimeout","updateExistingNumbersAtEditing","sortedActivities","activity","currentNumber","setNumberOfActivity","getNumbersAndIDs","iDWithNumber","activities","renderedNumber","setNumberIsMultiple","multi","getNumberRegistry","slice","getMultipleNumberRegistry","elementArray","overrideAppendedIcons","Dictionary","APPENDED_ICONS_TAG","configuration","initializePalette","configurationService","PaletteProvider","palette","spaceTool","lassoTool","_create","_elementFactory","_spaceTool","_lassoTool","getPaletteEntries","createAction","createListener","isExpanded","shortType","initPalette","appendCSSStyleCheat","customIcons","sheetEl","head","customIconDict","appendDict","customIconDictKeys","getAppendedIconDictionary","has","src","iconStyle","wrapSRCInSVG","sheet","insertRule","cssRules","config","getCurrentIconConfigurationForBPMN","localStorage","getItem","JSON","parse","customIconsLegacy","convertLegacyAppendedIconsToDict","customIconsDict","putEntry","initTypeDictionaries","actors","workObjects","addCanvasObjectTypes","separator","activateSelection","keys","dict","initializeActivityUpdateHandler","activityUpdateHandler","registerHandler","activity_directionChange","activity_changed","preExecute","oldLabel","oldNumbersWithIDs","oldNumber","revert","revertAutomaticNumberGenerationChange","oldWaypoints","swapSource","newWaypoints","getActivitesFromActors","j","splice","undoGroupRework","elementUpdateHandler","element_colorChange","removeGroupWithoutChildren","oldColor","ctx","child","titleService","handlerFunction","oldTitle","getTitle","oldDescription","getDescription","updateTitleAndDescription","newTitle","newDescription","DSMassRenameHandler","massRename","relevantElements","confirm","newValue","getBusinessObject","NULL_DIMENSIONS","labelCenter","createLabel","setText","postExecute","trim","removeShape","bo","getLayoutedBounds","resizeShape","numberTarget","some","$instanceOf","types","t","innerShape","superParent","svgShape","querySelector","svgGroup","svgGroupParent","SVG_LINK","TEXTSPAN_DESCRIPTION_HEIGHT","TEXTSPAN_TITLE_HEIGHT","X_OFFSET_UTIL","extraHeight","createTitleAndDescriptionSVGElement","description","xLeft","yUp","titleElement","createTitle","descriptionElement","createDescription","insertText","tempCanvas","getContext","font","createTextSpans","descriptionParts","yOffset","heightOffset","textSpans","words","textTag","textSpan","createElementNS","textNode","createTextNode","data","len","measureText","testBusinessObject","Configuration","constructor","VERSION","INITIAL_TITLE","INITIAL_DESCRIPTION","INITIAL_DOMAIN_NAME","DOMAIN_CONFIGURATION_TAG","DEFAULT_AUTOSAVES_AMOUNT","DEFAULT_AUTOSAVES_INTERVAL","SNACKBAR_DURATION","SNACKBAR_SUCCESS","SNACKBAR_ERROR","SNACKBAR_INFO","IMPLICIT_ROOT_ID","all","size","isEmpty","Entry","addEach","clear","filter","found","sort","sortByName","a","b","structuredClone","testCustomDomainConfiguration","fromConfigurationFromFile","configFromFile","actorsDict","workObjectsDict","IconConfiguration","allIconDictionary","getDefaultConf","defaultConf","updateAllIconRegistry","appendSRCFile","newAppendedIcons","appen","createCustomConf","domainConfiguration","domainName","allIconsConf","ActivityDialogData","numberIsAllowedMultipleTimes","showNumberFields","saveFN","ExportDialogData","ExportOption","tooltip","InfoDialogData","infoText","isInfo","isLink","linkText","NUMBER_BACKGROUND_COLOR","NUMBER_COLOR","STROKE_WIDTH","HIGHLIGHT_NUMBER_BACKGROUNG_COLOR","HIGHLIGHT_NUMBER_COLOR","HIGHLIGHT_COLOR","HIGHLIGHT_STROKE_WIDTH","appendedIcons","allIcons","Person","Group","Pet","Conversation","World","Store","Theater","Business","Water","Hotel","Dining","Courthouse","Flag","Place","Car","Bus","Train","Truck","Taxi","Bike","Boat","Motorcycle","Plane","Shuttle","Walking","Traffic","Commute","System","Printer","Document","Folder","Call","Email","Copyright","DNS","Settings","Cellphone","Update","Briefcase","Microphone","Signal","Key","Pencil","Sum","Headset","Keyboard","Mouse","Router","Scanner","Security","Desktop","Tablet","Label","Receipt","Calendar","Cloud","Assessment","Dashboard","Problem","Grid","Watch","Euro","Dollar","Info","Alarm","Wrench","Favorite","Gavel","Blind","Hourglass","Time","Search","Shopping","Couch","Attach","Ruler","Education","allIconsDict","newIcons","IconFilterEnum","ConfigAndDST","domain","dst","testConfigAndDst","CommonModule","AutosaveSettingsComponent","AutosaveOptionsComponent","AutosavedDraftsComponent","FormsModule","MaterialModule","AutosaveSettingsModule","declarations","imports","exports","HeaderButtonsComponent","DomainStoryModelerModuleModule","DomainConfigurationComponent","IconListItemComponent","DetailsListItemComponent","DomainDetailsComponent","GeneralSettingsComponent","LabelDictionaryComponent","SettingsModule","i0","autosaveConfiguration","snackbar","save","activated","amount","interval","setConfiguration","duration","panelClass","selectors","decls","vars","consts","template","autosaveService","subscription","autosavedDraftsChanged$","subscribe","initDrafts","ngOnInit","drafts","loadCurrentDrafts","loadDraft","draft","removeAllDrafts","ModelerComponent","modelerService","postInit","MAT_DIALOG_DATA","ActivityDialogComponent","fb","dialogRef","activityLabel","activityNumber","form","multipleNumbers","onSubmit","patchValue","close","BehaviorSubject","ExportDialogComponent","withTitle","useWhiteBackground","doOption","updateWithTitle","$event","checked","updateUseWhiteBackground","HeaderDialogComponent","InfoDialogComponent","showConfirmButton","hasLink","ngAfterViewInit","span","scrollHeight","LabelDictionaryDialogComponent","ngAfterViewChecked","createIcon","img","iconInitiated","svg","inputs","sanitizeIconName","domainCustomizationService","ICON_FILTER_NONE","domainConfigurationTypes","getDomainConfiguration","getFullDictionary","allIconNames","selectedActors","selectedActors$","selectedWorkobjects","selectedWorkobjects$","allFiltered","getFilteredNamesForType","allFilteredIconNames","loadMinimalIconConfigurationWithDefaultIcons","resetDomain","loadInitialConfiguration","saveDomain","getUsedIcons","exportDomain","startIconUpload","importIcon","files","iconInputFile","reader","FileReader","iconName","onloadend","addIMGToIconDictionary","registerIconForBPMN","addNewIcon","readAsDataURL","startDomainImport","importDomain","domainInputFile","loadConfiguration","importConfiguration","readAsText","filterForActors","ICON_FILTER_ACTOR","filterForWorkobjects","ICON_FILTER_WORKOBJECT","filterForUnassigned","ICON_FILTER_UNASSIGNED","filterByNameAndType","filteredByNameAndType","isIconActor","isIconWorkObject","customizationService","domainName$","changeName","getIconForName","allowDrop","listName","draggedList","onDrop","list","sortedList","draggedIndex","setSelectedActors","setSelectedWorkObject","onDragStart","isWorkobject","isNone","toggleNone","setAsUnassigned","toggleActor","setAsActor","toggleWorkobject","setAsWorkobject","MatDialogConfig","settingsService","replayStateService","dialogService","replayService","exportService","importService","isReplay$","replayOn$","isDirty$","dirty$","showDescription","showDescription$","import","filename","endsWith","importDST","importEGN","commandStackChanged","setShowDescription","show","openSettings","openDownloadDialog","isDomainStoryExportable","SVGDownloadOption","downloadSVG","EGNDownloadOption","downloadDST","PNGDownloadOption","downloadPNG","HTMLDownloadOption","downloadHTMLPresentation","disableClose","autoFocus","openDialog","openHeaderDialog","openKeyboardShortcutsDialog","shortCutText","openLabelDictionary","startReplay","stopReplay","previousStep","nextStep","combineLatest","HeaderComponent","title$","description$","stepDescription$","currentStep$","maxStepNumber$","pipe","step","count","EventEmitter","labelDictionaryService","createLabelDictionaries","workObjectEntries","activityEntries","getActivityLabels","workobjectEntriesSubject","activityEntriesSubject","activityNames","originalActivityNames","workObjectNames","originalWorkObjectNames","originalName","w","workobject","massRenameLabels","closeEmitter","emit","updateActivityEntry","activityEntry","updateWorkobjectEntry","workobjectEntry","outputs","SettingsComponent","savedConfiguration","getAndClearSavedConfiguration","restart","openGeneralSettings","showGeneralSettings","showDomainCustomization","openDomainCustomization","ReplaySubject","AUTOSAVE_CONFIGURATION_TAG","defaultConfiguration","AutosaveConfigurationService","storageService","configurationSubject","asObservable","initializeConfiguration","saveConfiguration","factory","providedIn","Subject","DRAFTS_TAG","AutosaveService","iconDistionaryService","rendererService","configuration$","updateConfiguration","readDrafts","sortDrafts","configAndDST","story","actorIcons","getElementsOfType","workObjectIcons","updateIconRegistries","importStory","stopTimer","startTimer","autosaveTimer","clearInterval","setInterval","newDraft","createDraft","isChanged","isSame","unshift","pop","writeDrafts","stringify","getStory","createConfigAndDST","date","Date","toString","aDate","bDate","StorageService","setItem","json","removeItem","checkValidityOfConfiguration","configuratioFromFile","getStoredDomainConfiguration","domainString","setStoredDomainConfiguration","configForStorage","CommandStackService","setCommandStack","payload","DialogService","matDialog","dialog","DirtyFlagService","isDirtySubject","makeClean","dirty","DomManipulationService","showAll","removeHighlights","getAllCanvasObjects","getAllGroups","domObject","display","showStep","replayStep","notShown","getAllNotShown","hightlightStep","o","getNumberDomForActivity","numberDOMS","numberBackgroundDom","numberTextDom","allActivities","getAllActivities","allConnections","getAllConnections","activityDomObject","connectionDomObject","stepObjects","shownElements","notShownElements","allObjects","DomainConfigurationService","setDomainName","exportConfiguration","getCurrentConfigurationForExport","configJSONString","getDomainName","encodeURIComponent","body","customConfig","updateDomainName","actorDict","workObjectDict","actorKeys","workObjectKeys","getIconConfiguration","addIconsFromDomainConfiguration","configurationName","getCurrentConfiguration","getActorsDictionary","getWorkObjectsDictionary","createConfigFromDictionaries","currentConfiguration","getCurrentConfigurationNamesWithoutPrefix","createMinimalConfigurationWithDefaultIcons","minimalConfig","createConfigFromCanvas","getIconSource","actorNames","workobjectNames","newActors","newWorkobjects","allCanvasObjects","DomainCustomizationService","getAllIconDictionary","addIconToAllIconList","importedConfigurationEvent","storedDomainConfiguration","importedConfiguration","getImportedConfiguration","allIconListItems","selectedActorNames","selectActor","selectedWorkobjectNames","selectWorkObject","changedDomain","deselectActor","deselectWorkobject","updateIcon","updateActorSubject","updateWorkObjectSubject","configurationHasChanged","defaultConfig","workObjectName","actorName","updateAllIconBehaviourSubjects","resetToInitialConfiguration","usedIcons","imported","changedActors","changedWorkobjects","createDomainConfiguration","configurationActors","configurationWorkobjects","workobjects","changedDomainCofiguration","updateIcons","join","temp","iconDict","getSrcForIcon","addIconsToCss","iconBehaviourSubject","customDomainCofiguration","rawSrc","ICON_PREFIX","IconDictionaryService","iconConfig","allTypes","initDictionary","actorIconDictionary","workObjectDictionary","dictionary","namePrefix","customConfiguration","allInTypeDictionary","collection","allIn","dictionaryType","iconTypes","registerIconForType","iconDictionaryForBPMN","addIconsToTypeDictionary","extractCustomIconsFromDictionary","addNewIconsToDictionary","elementDictionary","sanitizedName","custom","input","fullDictionary","appendedDict","getTypeDictionaryKeys","elementOfType","setCusomtConfiguration","ElementRegistryService","fullyInitialized","registry","__implicitroot","setElementRegistry","_elements","createObjectListForDSTDownload","allObjectsFromCanvas","objectList","fillListOfCanvasObjects","canvasElement","groupObjects","checkChildForGroup","currentGroup","registryElementNames","getAllActors","getAllWorkobjects","co","sanitizeForDesktop","ExportService","pngService","svgService","htmlPresentationService","titleSubscription","descriptionSubscription","ngOnDestroy","unsubscribe","DomainStory","getStoryForDownload","downloadFile","datatype","fileEnding","svgData","createSVGData","container","svgElements","outerSVGElement","viewport","layerBase","image","extractSVG","prepareSVG","onload","getWidth","getHeight","fillStyle","drawImage","png64","toDataURL","ele","toISOString","then","info","version","doT","HtmlPresentationService","setModelerClasses","selection","modeler","viewBoxCoordinates","ViewBoxCoordinate","saveSVG","fixActivityMarkersForEachStep","getCurrentStepNumber","content","transition","err","alert","getMaxStepNumber","revealjsTemplate","dots","revealjsData","script","sentences","multiplexSecret","multiplexId","fixMalformedHtmlScript","viewBoxIndex","splitViewBox","dataStart","dataEnd","createBounds","sectionIndex","newDefs","ids","idToReplace","newId","replaceAll","PngService","browserSpecs","ua","navigator","userAgent","tem","M","exec","appName","appVersion","URIHashtagFix","fix","browser","parseInt","findMostOuterElements","xRight","yDown","sub","elXLeft","elXRight","elYUp","elYDown","transform","nums","rects","outerRect","calculateWidthAndHeight","insertIndex","layerResizers","layerOverlays","removeAttribute","XMLSerializer","serializeToString","SvgService","cacheData","getEncoded","svgIndex","backgroundColorWhite","findIndexToInsertData","appendDST","restoreTitleFromFileName","ImportDomainStoryService","importRepairService","domainConfigurationService","importedConfigurationEmitter","isSVG","fileReader","titleText","fileReaderFunction","isEGN","dstText","removeXMLComments","dstAndConfig","extractDstAndConfig","configChanged","checkConfigForChanges","lastElement","importVersionNumber","handleVersionNumber","checkForUnreferencedElementsInActivitiesAndRepair","showBrokenImportDialog","adjustPositions","versionPrefix","lastIndexOf","updateCustomElementsPreviousV050","showPreviousV050Dialog","xmlText","newActorKeys","newWorkObjectKeys","currentActorKeys","currentWorkobjectKeys","changed","clearName","setImportedConfigurationAndEmit","ImportRepairService","objectIDs","activityIndex","isFirst","findFirstElement","adjustElementPosition","LabelDictionaryService","massNamingService","activityLabels","workObjektLabels","localeCompare","massChangeNames","MassNamingService","commandStackService","oldValue","allRelevantObjects","massRenameHandler","positionsMatch","InitializerService","initializeDomainStoryModelerClasses","propagateDomainStoryModelerClassesToServices","initializeDomainStoryModelerEventHandlers","initiateEventBusListeners","getReplayOn","activityDoubleClick","renderedNumberRegistry","htmlCanvas","transformX","transformY","zoomX","zoomY","clickX","originalEvent","clickY","parseFloat","currentNum","tx","ty","tNumber","elementX","elementY","stopPropagation","saveActivityInputLabel","activityData","hasNumber","multipleNumberAllowed","ModelerService","initializerService","keyboard","bindTo","additionalModules","bpmnSearch","exportArtifacts","debounce","window","startDebounce","domainStory","currentStory","destroy","getModeler","timeout","timer","clearTimeout","encoded","RendererService","renderStory","configurationChange","c","ReplayStateService","replayOnSubject","setReplayState","state","ReplayService","domManipulationService","storyCreatorService","currentStep","maxStepNumber","initializeReplay","traceActivitiesAndCreateStory","showCurrentStep","missingSteps","getMissingSteps","getValue","steps","StoryCreatorService","tracedActivityMap","tracedItem","createStep","addGroupStep","getStepObjects","highlightedElements","highlightedObjects","tracedActivity","initialSource","targetObjects","parallelStep","firstTarget","checkTarget","activityTarget","g","SettingsService","showSettings","TitleService","titleSubject","descriptionSubject","showDescriptionSubject","domainNameSubject","allowUndo","fireTitleAndDescriptionUpdate","updateTitle","updateDescription","getVersion","degrees","radians","PI","quadrant","adjacent","opposite","atan2","Point","reg","dstRegex","svgRegex","egnSuffix","dstSuffix","svgSuffix","filenameWithoutDateSuffix","AppComponent","replayStateSerice","showSettings$","ctrlKey","openLinkDialog","link","BrowserModule","MAT_CHECKBOX_DEFAULT_OPTIONS","NoopAnimationsModule","UntypedFormBuilder","ReactiveFormsModule","AppModule","ngDoBootstrap","app","componentElement","bootstrap","provide","useValue","clickAction","MatDialogModule","MatFormFieldModule","MatInputModule","MatToolbarModule","MatExpansionModule","MatCardModule","MatSnackBarModule","MatButtonModule","MatGridListModule","MatButtonToggleModule","MatListModule","MatCheckboxModule","environment","production","enableProdMode","__NgCli_bootstrap_1","bootstrapModule","catch","console","error"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}