{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/tools/export/services/exportUtil.js","./src/app/tools/modeler/bpmn/index.js","./src/app/tools/modeler/bpmn/modeler/change-icon/replace.js","./src/app/tools/modeler/bpmn/modeler/change-icon/replaceMenuProvider.js","./src/app/tools/modeler/bpmn/modeler/change-icon/replaceOptions.js","./src/app/tools/modeler/bpmn/modeler/context-pad/domainStoryContextPadProvider.js","./src/app/tools/modeler/bpmn/modeler/domainStoryElementFactory.js","./src/app/tools/modeler/bpmn/modeler/domainStoryIdFactory.js","./src/app/tools/modeler/bpmn/modeler/domainStoryRenderer.js","./src/app/tools/modeler/bpmn/modeler/domainStoryRules.js","./src/app/tools/modeler/bpmn/modeler/domainStoryUpdater.js","./src/app/tools/modeler/bpmn/modeler/index.js","./src/app/tools/modeler/bpmn/modeler/labeling/dsLabelEditingPreview.js","./src/app/tools/modeler/bpmn/modeler/labeling/dsLabelEditingProvider.js","./src/app/tools/modeler/bpmn/modeler/labeling/dsLabelUtil.js","./src/app/tools/modeler/bpmn/modeler/labeling/index.js","./src/app/tools/modeler/bpmn/modeler/labeling/position.js","./src/app/tools/modeler/bpmn/modeler/modeling/dSModeling.js","./src/app/tools/modeler/bpmn/modeler/modeling/index.js","./src/app/tools/modeler/bpmn/modeler/numbering/numbering.js","./src/app/tools/modeler/bpmn/modeler/palette/domainStoryPalette.js","./src/app/tools/modeler/bpmn/modeler/updateHandler/activityUpdateHandlers.js","./src/app/tools/modeler/bpmn/modeler/updateHandler/elementUpdateHandler.js","./src/app/tools/modeler/bpmn/modeler/updateHandler/headlineAndDescriptionUpdateHandler.js","./src/app/tools/modeler/bpmn/modeler/updateHandler/massRenameHandler.js","./src/app/tools/modeler/bpmn/modeler/updateHandler/updateLabelHandler.js","./src/app/tools/modeler/bpmn/modeler/util.js","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/domain/entities/configuration.ts","./src/app/domain/entities/constants.ts","./src/app/domain/entities/dictionary.ts","./src/app/domain/entities/elementTypes.ts","./src/app/domain/entities/infoDialogData.ts","./src/app/domain/presentation/info-dialog/info-dialog.component.ts","./src/app/domain/presentation/info-dialog/info-dialog.component.html","./src/app/domain/services/command-stack.service.ts","./src/app/domain/services/dialog.service.ts","./src/app/domain/services/dirty-flag.service.ts","./src/app/domain/services/element-registry.service.ts","./src/app/domain/services/storage.service.ts","./src/app/material.module.ts","./src/app/tools/autosave/presentation/AutosaveOptions/autosave-options.component.ts","./src/app/tools/autosave/presentation/AutosaveOptions/autosave-options.component.html","./src/app/tools/autosave/presentation/AutosaveSettings/autosave-settings.component.ts","./src/app/tools/autosave/presentation/AutosaveSettings/autosave-settings.component.html","./src/app/tools/autosave/presentation/AutosavedDrafts/autosaved-drafts.component.ts","./src/app/tools/autosave/presentation/AutosavedDrafts/autosaved-drafts.component.html","./src/app/tools/autosave/presentation/autosave-settings.module.ts","./src/app/tools/autosave/services/autosave-configuration.service.ts","./src/app/tools/autosave/services/autosave.service.ts","./src/app/tools/export/domain/dialog/exportDialogData.ts","./src/app/tools/export/domain/export/configAndDst.ts","./src/app/tools/export/domain/export/exportConstants.ts","./src/app/tools/export/presentation/export-dialog/export-dialog.component.ts","./src/app/tools/export/presentation/export-dialog/export-dialog.component.html","./src/app/tools/export/services/export.service.ts","./src/app/tools/export/services/html-presentation.service.ts","./src/app/tools/export/services/png.service.ts","./src/app/tools/export/services/svg.service.ts","./src/app/tools/icon-set-config/domain/allIcons.ts","./src/app/tools/icon-set-config/domain/iconConfiguration.ts","./src/app/tools/icon-set-config/domain/iconFilterEnum.ts","./src/app/tools/icon-set-config/presentation/details-list-item/details-list-item.component.ts","./src/app/tools/icon-set-config/presentation/details-list-item/details-list-item.component.html","./src/app/tools/icon-set-config/presentation/icon-list-item/icon-list-item.component.ts","./src/app/tools/icon-set-config/presentation/icon-list-item/icon-list-item.component.html","./src/app/tools/icon-set-config/presentation/icon-set-configuration/icon-set-configuration.component.ts","./src/app/tools/icon-set-config/presentation/icon-set-configuration/icon-set-configuration.component.html","./src/app/tools/icon-set-config/presentation/icon-set-details/icon-set-details.component.ts","./src/app/tools/icon-set-config/presentation/icon-set-details/icon-set-details.component.html","./src/app/tools/icon-set-config/services/icon-dictionary.service.ts","./src/app/tools/icon-set-config/services/icon-set-configuration.service.ts","./src/app/tools/icon-set-config/services/icon-set-customization.service.ts","./src/app/tools/import/services/import-domain-story.service.ts","./src/app/tools/import/services/import-repair.service.ts","./src/app/tools/label-dictionary/presentation/label-dictionary-dialog/label-dictionary-dialog.component.ts","./src/app/tools/label-dictionary/presentation/label-dictionary-dialog/label-dictionary-dialog.component.html","./src/app/tools/label-dictionary/presentation/label-dictionary/label-dictionary.component.ts","./src/app/tools/label-dictionary/presentation/label-dictionary/label-dictionary.component.html","./src/app/tools/label-dictionary/services/label-dictionary.service.ts","./src/app/tools/label-dictionary/services/mass-naming.service.ts","./src/app/tools/modeler/domain/activity-dialog-form.ts","./src/app/tools/modeler/domain/activityDialogData.ts","./src/app/tools/modeler/presentation/activity-dialog/activity-dialog.component.ts","./src/app/tools/modeler/presentation/activity-dialog/activity-dialog.component.html","./src/app/tools/modeler/presentation/modeler/modeler.component.ts","./src/app/tools/modeler/presentation/modeler/modeler.component.html","./src/app/tools/modeler/services/initializer.service.ts","./src/app/tools/modeler/services/modeler.service.ts","./src/app/tools/modeler/services/renderer.service.ts","./src/app/tools/replay/domain/replayConstants.ts","./src/app/tools/replay/services/dom-manipulation.service.ts","./src/app/tools/replay/services/replay.service.ts","./src/app/tools/replay/services/story-creator.service.ts","./src/app/tools/title/domain/title-dialog-form.ts","./src/app/tools/title/presentation/title-dialog/title-dialog.component.ts","./src/app/tools/title/presentation/title-dialog/title-dialog.component.html","./src/app/tools/title/services/title.service.ts","./src/app/utils/colorConverter.ts","./src/app/utils/mathExtensions.ts","./src/app/utils/sanitizer.ts","./src/app/workbench/presentation/header/domain-story-modeler-module.module.ts","./src/app/workbench/presentation/header/header-buttons/header-buttons.component.ts","./src/app/workbench/presentation/header/header-buttons/header-buttons.component.html","./src/app/workbench/presentation/header/header/header.component.ts","./src/app/workbench/presentation/header/header/header.component.html","./src/app/workbench/presentation/settings/general/general-settings.component.ts","./src/app/workbench/presentation/settings/general/general-settings.component.html","./src/app/workbench/presentation/settings/settings.component.ts","./src/app/workbench/presentation/settings/settings.component.html","./src/app/workbench/presentation/settings/settings.module.ts","./src/app/workbench/services/settings/settings.service.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import {\n  SVG_LINK,\n  TEXTSPAN_DESCRIPTION_HEIGHT,\n  TEXTSPAN_TITLE_HEIGHT,\n  X_OFFSET_UTIL,\n} from \"../domain/export/exportConstants\";\n\nlet dynamicHeightOffset = 0;\n\n// Has to be js File so we can access te correct non-standard HTML-Properties without excessive usage of ts-ignore\nexport function createTitleAndDescriptionSVGElement(\n  initDynamicHeightOffset,\n  title,\n  description,\n  min_x,\n  min_y,\n  width,\n) {\n  dynamicHeightOffset = initDynamicHeightOffset;\n\n  title = title.replace(\"&lt;\", \"\").replace(\"&gt;\", \"\");\n\n  let titleElement = createTitle(title, width);\n\n  let descriptionElement = createDescription(description, width);\n\n  // to display the title and description in the SVG-file, we need to add a container for our text-elements\n\n  let insertText =\n    '<g class=\"djs-group\"><g class=\"djs-element djs-shape\" style = \"display:block\" transform=\"translate(' +\n    (min_x - 10) +\n    \" \" +\n    (min_y - dynamicHeightOffset) +\n    ')\"><g class=\"djs-visual\">' +\n    titleElement +\n    descriptionElement +\n    \"</g></g></g>\";\n  return { insertText, dynamicHeightOffset: dynamicHeightOffset };\n}\n\nfunction createTitle(text, width) {\n  let tempCanvas = document.createElement(\"canvas\");\n  let ctx = tempCanvas.getContext(\"2d\");\n  ctx.font = \"30px Arial\";\n\n  return createTextSpans(text, width, ctx, 10, TEXTSPAN_TITLE_HEIGHT, 30);\n}\n\nfunction createDescription(text, width) {\n  let description = \"\";\n  let descriptionParts = text.split(\"<br>\");\n\n  let tempCanvas = document.createElement(\"canvas\");\n  let ctx = tempCanvas.getContext(\"2d\");\n  ctx.font = \"12px Arial\";\n\n  for (let i = 0; i < descriptionParts.length; i++) {\n    description += createTextSpans(\n      descriptionParts[i],\n      width,\n      ctx,\n      0,\n      TEXTSPAN_DESCRIPTION_HEIGHT,\n      12,\n    );\n  }\n  return description;\n}\n\nfunction createTextSpans(text, width, ctx, yOffset, heightOffset, fontSize) {\n  let textSpans = \"\";\n  let words = text.split(\" \");\n\n  // every leading empty strings in the array must be removed, otherwise the text elements\n  // will not be filled with text\n  words = removeLeadingEmptyStrings(words);\n\n  let textTag =\n    '<text lineHeight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif; font-size: ' +\n    fontSize +\n    '; font-weight: normal; fill: rgb(0, 0, 0);\">';\n\n  let textSpan = document.createElementNS(SVG_LINK, \"tspan\");\n  let textNode = document.createTextNode(words[0]);\n\n  textSpan.setAttribute(\"x\", X_OFFSET_UTIL);\n  textSpan.setAttribute(\"y\", yOffset + dynamicHeightOffset);\n  textSpan.setAttribute(\"font-size\", fontSize);\n  textSpan.appendChild(textNode);\n\n  for (let j = 1; j < words.length; j++) {\n    if (textSpan.firstChild && textSpan.firstChild.data) {\n      let len = textSpan.firstChild.data.length;\n      textNode.data += \" \" + words[j];\n\n      if (ctx.measureText(textNode.data).width > width - 16) {\n        dynamicHeightOffset += heightOffset;\n        textSpan.firstChild.data = textSpan.firstChild.data.slice(0, len); // remove overflow word\n\n        textSpans += textTag + textSpan.outerHTML + \"</text>\"; // append line\n\n        // create new textspan for line break\n        textSpan = document.createElementNS(SVG_LINK, \"tspan\");\n        textNode = document.createTextNode(words[j]);\n        textSpan.setAttribute(\"x\", X_OFFSET_UTIL);\n        textSpan.setAttribute(\"y\", yOffset + dynamicHeightOffset);\n        textSpan.appendChild(textNode);\n      }\n    }\n  }\n  dynamicHeightOffset += heightOffset;\n\n  textSpans += textTag + textSpan.outerHTML + \"</text>\";\n  return textSpans;\n}\n\nfunction removeLeadingEmptyStrings(stringArray) {\n  const firstNonEmptyIndex = stringArray.findIndex((string) => string !== \"\");\n  return stringArray.slice(\n    firstNonEmptyIndex === -1 ? stringArray.length : firstNonEmptyIndex,\n  );\n}\n","import Modeler from \"bpmn-js/lib/Modeler\";\nimport ResizeModule from \"diagram-js/lib/features/resize\";\nimport { assign, isArray } from \"min-dash\";\nimport inherits from \"inherits\";\n\nimport DomainStoryModule from \"./modeler\";\nimport LabelEditingModule from \"./modeler/labeling\";\nimport ModelingModule from \"./modeler/modeling\";\nimport { ElementTypes } from \"../../../domain/entities/elementTypes\";\n\nexport default function DomainStoryModeler(options) {\n  Modeler.call(this, options);\n\n  this._customElements = [];\n  this._groupElements = [];\n}\n\ninherits(DomainStoryModeler, Modeler);\n\nDomainStoryModeler.prototype._modules = [].concat(\n  DomainStoryModeler.prototype._modules,\n  [DomainStoryModule, LabelEditingModule, ModelingModule],\n  [ResizeModule],\n);\n\n/**\n * add a single custom element to the underlying diagram\n *\n * @param {Object} customElement\n */\nDomainStoryModeler.prototype._addCustomShape = function (customElement) {\n  let parentId = customElement.parent;\n  delete customElement.children;\n  delete customElement.parent;\n  this._customElements.push(customElement);\n\n  let canvas = this.get(\"canvas\"),\n    elementFactory = this.get(\"elementFactory\");\n\n  let customAttrs = assign({ businessObject: customElement }, customElement);\n  let customShape = elementFactory.create(\"shape\", customAttrs);\n\n  if (isGroup(customElement)) {\n    this._groupElements[customElement.id] = customShape;\n  }\n\n  if (parentId) {\n    let parentShape = this._groupElements[parentId];\n\n    if (isGroup(parentShape)) {\n      return canvas.addShape(customShape, parentShape, parentShape.id);\n    }\n  }\n  return canvas.addShape(customShape);\n};\n\nDomainStoryModeler.prototype._addCustomConnection = function (customElement) {\n  this._customElements.push(customElement);\n\n  let canvas = this.get(\"canvas\"),\n    elementFactory = this.get(\"elementFactory\"),\n    elementRegistry = this.get(\"elementRegistry\");\n\n  let customAttrs = assign({ businessObject: customElement }, customElement);\n\n  let connection = elementFactory.create(\n    \"connection\",\n    assign(customAttrs, {\n      source: elementRegistry.get(customElement.source),\n      target: elementRegistry.get(customElement.target),\n    }),\n    elementRegistry.get(customElement.source).parent,\n  );\n\n  return canvas.addConnection(connection);\n};\n\n//** We import BusinessObjects, not the whole Canvas Object!!!!!!!!\nDomainStoryModeler.prototype.importCustomElements = function (elements) {\n  this.get(\"eventBus\").fire(\"diagram.clear\", {});\n  this._customElements = [];\n  this._groupElements = [];\n\n  this.addCustomElements(elements);\n};\n\n/**\n * add a number of custom elements and connections to the underlying diagram.\n *\n * @param {Array<Object>} customElements\n */\nDomainStoryModeler.prototype.addCustomElements = function (customElements) {\n  if (!isArray(customElements)) {\n    throw new Error(\"argument must be an array\");\n  }\n\n  let shapes = [],\n    connections = [],\n    groups = [];\n\n  customElements.forEach(function (customElement) {\n    if (isConnection(customElement)) {\n      connections.push(customElement);\n    } else if (isGroup(customElement)) {\n      groups.push(customElement);\n    } else {\n      shapes.push(customElement);\n    }\n  });\n\n  // add groups before shapes and shapes before connections so that connections\n  // can already rely on the shapes being part of the diagram\n  groups.forEach(this._addCustomShape, this);\n  shapes.forEach(this._addCustomShape, this);\n  connections.forEach(this._addCustomConnection, this);\n};\n\n/**\n * get custom elements with their current status.\n *\n * @return {Array<Object>} custom elements on the diagram\n */\nDomainStoryModeler.prototype.getCustomElements = function () {\n  return this._customElements;\n};\n\n// override standard function to prevent default elements on canvas\nDomainStoryModeler.prototype.createDiagram = function (done) {};\n\nfunction isConnection(element) {\n  return (\n    element.type === ElementTypes.ACTIVITY ||\n    element.type === ElementTypes.CONNECTION\n  );\n}\n\nfunction isGroup(element) {\n  return element && element.type === ElementTypes.GROUP;\n}\n","\"use strict\";\n\nimport { assign } from \"min-dash\";\n\n/**\n * service that allow replacing of elements.\n */\nexport default function Replace(modeling) {\n  this._modeling = modeling;\n}\n\n/**\n * @param {Element} oldElement - element to be replaced\n * @param {Object}  newElementData - containing information about the new Element, for example height, width, type.\n * @param modeling\n */\nfunction replaceElement(oldElement, newElementData, modeling) {\n  // let modeling = this._modeling;\n\n  let newElement = setCenterOfElement(newElementData, oldElement, modeling);\n  let outgoingActivities = newElement.outgoing;\n  let incomingActivities = newElement.incoming;\n\n  outgoingActivities.forEach((element) => {\n    element.businessObject.source = newElement.id;\n  });\n\n  incomingActivities.forEach((element) => {\n    element.businessObject.target = newElement.id;\n  });\n\n  return newElement;\n}\n\nfunction setCenterOfElement(newElementData, oldElement, modeling) {\n  newElementData.x = Math.ceil(\n    oldElement.x + (newElementData.width || oldElement.width) / 2,\n  );\n  newElementData.y = Math.ceil(\n    oldElement.y + (newElementData.height || oldElement.height) / 2,\n  );\n\n  assign(newElementData, { name: oldElement.businessObject.name });\n\n  return modeling.replaceShape(oldElement, newElementData, {});\n}\n\nReplace.prototype.replaceElement = replaceElement;\n","\"use strict\";\n\nimport Replace from \"./replace\";\nimport * as replaceOptions from \"./replaceOptions\";\n\nimport { forEach } from \"min-dash\";\n\n/**\n * This module is an element agnostic replace menu provider for the popup menu.\n */\nexport default function ReplaceMenuProvider(modeling) {\n  this._dsReplace = new Replace(modeling);\n  this._modeling = modeling;\n}\n\nReplaceMenuProvider.$inject = [\"modeling\"];\n\n/**\n * Get all entries from replaceOptions for the given element and apply filters\n * on them. Get for example only elements, which are different from the current one.\n *\n * @param {djs.model.Base} element\n *\n * @return {Array<Object>} a list of menu entry items\n */\nReplaceMenuProvider.prototype.getEntries = function (element) {\n  let entries;\n  if (element.type.includes(\"actor\")) {\n    entries = replaceOptions.actorReplaceOptions(element.type);\n  } else if (element.type.includes(\"workObject\")) {\n    entries = replaceOptions.workObjectReplaceOptions(element.type);\n  }\n\n  return this._createEntries(element, entries);\n};\n\n/**\n * Creates an array of menu entry objects for a given element and filters the replaceOptions\n * according to a filter function.\n *\n * @param  {djs.model.Base} element\n * @param  {Object} replaceOptions\n *\n * @return {Array<Object>} a list of menu items\n */\nReplaceMenuProvider.prototype._createEntries = function (\n  element,\n  replaceOptions,\n) {\n  let menuEntries = [];\n\n  let self = this;\n\n  forEach(replaceOptions, function (definition) {\n    let entry = self._createMenuEntry(definition, element);\n\n    menuEntries.push(entry);\n  });\n\n  return menuEntries;\n};\n\n/**\n * Creates and returns a single menu entry item.\n *\n * @param  {Object} definition a single replace options definition object\n * @param  {djs.model.Base} element\n * @param  {Function} [action] an action callback function which gets called when\n *                             the menu entry is being triggered.\n *\n * @return {Object} menu entry item\n */\nReplaceMenuProvider.prototype._createMenuEntry = function (\n  definition,\n  element,\n  action,\n) {\n  let replaceElement = this._dsReplace.replaceElement;\n  let modeling = this._modeling;\n  let replaceAction = function () {\n    return replaceElement(element, definition.target, modeling);\n  };\n\n  action = action || replaceAction;\n\n  return {\n    label: definition.label,\n    className: definition.className,\n    id: definition.actionName,\n    action: action,\n  };\n};\n","import { ElementTypes } from \"src/app/domain/entities/elementTypes\";\n\nlet iconDictionaryService;\n\nexport function initializeReplaceOptions(iconDictionary) {\n  iconDictionaryService = iconDictionary;\n}\n\nexport function actorReplaceOptions(name) {\n  const actorTypes = iconDictionaryService.getTypeDictionary(\n    ElementTypes.ACTOR,\n  );\n\n  let replaceOption = {};\n  let i = 0;\n\n  actorTypes.keysArray().forEach((actorType) => {\n    if (!name.includes(actorType)) {\n      const typeName = actorType;\n      replaceOption[i] = {\n        label: \"Change to \" + typeName,\n        actionName: \"replace-with-actor-\" + typeName.toLowerCase(),\n        className: iconDictionaryService.getIconForBPMN(\n          ElementTypes.ACTOR,\n          actorType,\n        ),\n        target: {\n          type: `${ElementTypes.ACTOR}${actorType}`,\n        },\n      };\n      i++;\n    }\n  });\n  return replaceOption;\n}\n\nexport function workObjectReplaceOptions(name) {\n  const workObjectTypes = iconDictionaryService.getTypeDictionary(\n    ElementTypes.WORKOBJECT,\n  );\n\n  let replaceOption = {};\n  let i = 0;\n\n  workObjectTypes.keysArray().forEach((workObjectType) => {\n    if (!name.includes(workObjectType)) {\n      const typeName = workObjectType;\n      replaceOption[i] = {\n        label: \"Change to \" + typeName,\n        actionName: \"replace-with-actor-\" + typeName,\n        className: iconDictionaryService.getIconForBPMN(\n          ElementTypes.WORKOBJECT,\n          workObjectType,\n        ),\n        target: {\n          type: `${ElementTypes.WORKOBJECT}${workObjectType}`,\n        },\n      };\n    }\n    i++;\n  });\n  return replaceOption;\n}\n","\"use strict\";\n\nimport inherits from \"inherits\";\n\nimport ContextPadProvider from \"bpmn-js/lib/features/context-pad/ContextPadProvider\";\n\nimport { assign, bind } from \"min-dash\";\nimport { generateAutomaticNumber } from \"../numbering/numbering\";\nimport { ElementTypes } from \"src/app/domain/entities/elementTypes\";\nimport { getAllStandardIconKeys } from \"src/app/tools/icon-set-config/domain/allIcons\";\nimport {\n  hexToRGBA,\n  isHexWithAlpha,\n  rgbaToHex,\n} from \"../../../../../utils/colorConverter\";\n\nlet dirtyFlagService;\nlet iconDictionaryService;\n\nexport function initializeContextPadProvider(dirtyFlag, iconDictionary) {\n  dirtyFlagService = dirtyFlag;\n  iconDictionaryService = iconDictionary;\n}\n\nexport default function DomainStoryContextPadProvider(\n  injector,\n  connect,\n  translate,\n  elementFactory,\n  create,\n  canvas,\n  contextPad,\n  popupMenu,\n  replaceMenuProvider,\n  commandStack,\n  eventBus,\n  modeling,\n) {\n  let startConnect;\n  let selectedElement;\n\n  injector.invoke(ContextPadProvider, this);\n  let autoPlace = injector.get(\"autoPlace\", false);\n\n  let cached = bind(this.getContextPadEntries, this);\n\n  document.addEventListener(\"pickedColor\", (event) => {\n    if (selectedElement) {\n      executeCommandStack(event);\n    }\n  });\n\n  popupMenu.registerProvider(\"ds-replace\", replaceMenuProvider);\n  popupMenu.registerProvider(\"bpmn-replace\", replaceMenuProvider);\n\n  this.getContextPadEntries = function (element) {\n    selectedElement = element;\n\n    let pickedColor = selectedElement.businessObject.pickedColor;\n\n    if (isHexWithAlpha(pickedColor)) {\n      pickedColor = hexToRGBA(pickedColor);\n    }\n    document.dispatchEvent(\n      new CustomEvent(\"defaultColor\", {\n        detail: {\n          color: pickedColor ?? \"#000000\",\n        },\n      }),\n    );\n\n    const allStandardIconKeys = getAllStandardIconKeys();\n    let actions = cached(element);\n\n    startConnect = function (event, element, autoActivate) {\n      connect.start(event, element, autoActivate);\n    };\n\n    if (element.type.includes(ElementTypes.WORKOBJECT)) {\n      addColorChange(actions);\n      addConnectWithActivity(actions, startConnect);\n      addTextAnnotation(actions);\n      addActors(appendAction, actions);\n      addWorkObjects(appendAction, actions);\n      addChangeWorkObjectTypeMenu(actions);\n    } else if (element.type.includes(ElementTypes.ACTOR)) {\n      addColorChange(actions);\n      addConnectWithActivity(actions, startConnect);\n      addTextAnnotation(actions);\n      addWorkObjects(appendAction, actions);\n      addChangeActorTypeMenu(actions);\n    } else if (element.type.includes(ElementTypes.GROUP)) {\n      delete actions.delete;\n      addTextAnnotation(actions);\n      assign(actions, {\n        deleteGroup: {\n          group: \"edit\",\n          className: \"bpmn-icon-trash\",\n          title: \"Remove Group without Child-Elements\",\n          action: {\n            click: function (event, element) {\n              modeling.removeGroup(element);\n              dirtyFlagService.makeDirty();\n            },\n          },\n        },\n      });\n      addColorChange(actions);\n    } else if (element.type.includes(ElementTypes.ACTIVITY)) {\n      moveDeleteActionToEndOfArray(actions);\n\n      addColorChange(actions);\n\n      assign(actions, {\n        delete: {\n          group: \"edit\",\n          className: \"bpmn-icon-trash\",\n          title: \"Remove\",\n          action: {\n            click: function (event, element) {\n              modeling.removeElements({ element });\n              dirtyFlagService.makeDirty();\n            },\n          },\n        },\n      });\n    }\n\n    return actions;\n  };\n\n  function moveDeleteActionToEndOfArray(actions) {\n    delete actions.delete;\n\n    assign(actions, {\n      changeDirection: {\n        group: \"edit\",\n        className: \"icon-domain-story-changeDirection\",\n        title: translate(\"Change direction\"),\n        action: {\n          // event needs to be addressed\n          click: function (event, element) {\n            changeDirection(element);\n          },\n        },\n      },\n    });\n  }\n\n  function addChangeActorTypeMenu(actions) {\n    assign(actions, {\n      replace: {\n        group: \"edit\",\n        className: \"bpmn-icon-screw-wrench\",\n        title: translate(\"Change type\"),\n        action: {\n          click: function (event, element) {\n            let position = assign(getReplaceMenuPosition(element), {\n              cursor: { x: event.x, y: event.y },\n            });\n            popupMenu.open(element, \"ds-replace\", position);\n          },\n        },\n      },\n    });\n  }\n\n  function addColorChange(actions) {\n    assign(actions, {\n      colorChange: {\n        group: \"edit\",\n        className: \"icon-domain-story-color-picker\",\n        title: translate(\"Change color\"),\n        action: {\n          click: function (event, element) {\n            document.dispatchEvent(new CustomEvent(\"openColorPicker\"));\n          },\n        },\n      },\n    });\n  }\n\n  function addTextAnnotation(actions) {\n    assign(actions, {\n      \"append.text-annotation\": appendAction(\n        ElementTypes.TEXTANNOTATION,\n        \"bpmn-icon-text-annotation\",\n        \"textannotation\",\n        \"connect\",\n      ),\n    });\n  }\n\n  function addConnectWithActivity(actions, startConnect) {\n    assign(actions, {\n      connect: {\n        group: \"connect\",\n        className: \"bpmn-icon-connection\",\n        title: translate(\"Connect with activity\"),\n        action: {\n          click: startConnect,\n          dragstart: startConnect,\n        },\n      },\n    });\n  }\n\n  function addWorkObjects(appendAction, actions) {\n    let workObjectTypes = iconDictionaryService.getTypeDictionary(\n      ElementTypes.WORKOBJECT,\n    );\n    workObjectTypes.keysArray().forEach((workObjectType) => {\n      let name = workObjectType;\n      let icon = iconDictionaryService.getIconForBPMN(\n        ElementTypes.WORKOBJECT,\n        workObjectType,\n      );\n      let action = [];\n      action[\"append.workObject\" + name] = appendAction(\n        `${ElementTypes.WORKOBJECT}${workObjectType}`,\n        icon,\n        name,\n        \"workObjects\",\n      );\n      assign(actions, action);\n    });\n  }\n\n  function addActors(appendAction, actions) {\n    let actorTypes = iconDictionaryService.getTypeDictionary(\n      ElementTypes.ACTOR,\n    );\n    actorTypes.keysArray().forEach((actorType) => {\n      let name = actorType;\n      let icon = iconDictionaryService.getIconForBPMN(\n        ElementTypes.ACTOR,\n        actorType,\n      );\n      let action = [];\n      action[\"append.actor\" + name] = appendAction(\n        `${ElementTypes.ACTOR}${actorType}`,\n        icon,\n        name,\n        \"actors\",\n      );\n      assign(actions, action);\n    });\n  }\n\n  function addChangeWorkObjectTypeMenu(actions) {\n    assign(actions, {\n      replace: {\n        group: \"edit\",\n        className: \"bpmn-icon-screw-wrench\",\n        title: translate(\"Change type\"),\n        action: {\n          click: function (event, element) {\n            let position = assign(getReplaceMenuPosition(element), {\n              cursor: { x: event.x, y: event.y },\n            });\n            popupMenu.open(element, \"ds-replace\", position);\n          },\n        },\n      },\n    });\n  }\n\n  function changeDirection(element) {\n    let context;\n    let businessObject = element.businessObject;\n    let newNumber;\n\n    if (element.source.type.includes(ElementTypes.ACTOR)) {\n      newNumber = 0;\n    } else {\n      newNumber = generateAutomaticNumber(element, commandStack);\n    }\n    context = {\n      businessObject: businessObject,\n      newNumber: newNumber,\n      element: element,\n    };\n    commandStack.execute(\"activity.directionChange\", context);\n  }\n\n  function getReplaceMenuPosition(element) {\n    let Y_OFFSET = 5;\n\n    let diagramContainer = canvas.getContainer(),\n      pad = contextPad.getPad(element).html;\n\n    let diagramRect = diagramContainer.getBoundingClientRect(),\n      padRect = pad.getBoundingClientRect();\n\n    let top = padRect.top - diagramRect.top;\n    let left = padRect.left - diagramRect.left;\n\n    return {\n      x: left,\n      y: top + padRect.height + Y_OFFSET,\n    };\n  }\n\n  /**\n   * create an append action\n   *\n   * @param {String} type\n   * @param {String} className\n   * @param {String} [title]\n   * @param {String} group\n   * @param {Object} [options]\n   *\n   * @return {Object} descriptor\n   */\n  function appendAction(type, className, title, group, options) {\n    if (typeof title !== \"string\") {\n      options = title;\n      title = translate(\"{type}\", { type: type.replace(/^domainStory:/, \"\") });\n    }\n\n    function appendStart(event, element) {\n      let shape = elementFactory.createShape(assign({ type: type }, options));\n      let context = {\n        elements: [shape],\n        hints: {},\n        source: element,\n      };\n      create.start(event, shape, context);\n    }\n\n    return {\n      group: group,\n      className: className,\n      title: \"Append \" + title,\n      action: {\n        dragstart: startConnect,\n        click: appendStart,\n      },\n    };\n  }\n\n  function getSelectedBusinessObject(event) {\n    const oldColor = selectedElement.businessObject.pickedColor;\n    let newColor = event.detail.color;\n    if (isHexWithAlpha(oldColor)) {\n      newColor = rgbaToHex(newColor);\n    }\n\n    return {\n      businessObject: selectedElement.businessObject,\n      newColor: newColor,\n      element: selectedElement,\n    };\n  }\n\n  function executeCommandStack(event) {\n    const selectedBusinessObject = getSelectedBusinessObject(event);\n\n    commandStack.execute(\"element.colorChange\", selectedBusinessObject);\n    dirtyFlagService.makeDirty();\n  }\n}\n\ninherits(DomainStoryContextPadProvider, ContextPadProvider);\n\nDomainStoryContextPadProvider.$inject = [\n  \"injector\",\n  \"connect\",\n  \"translate\",\n  \"elementFactory\",\n  \"create\",\n  \"canvas\",\n  \"contextPad\",\n  \"popupMenu\",\n  \"replaceMenuProvider\",\n  \"commandStack\",\n  \"eventBus\",\n  \"modeling\",\n];\n","\"use strict\";\n\nimport { assign } from \"min-dash\";\n\nimport inherits from \"inherits\";\n\nimport BpmnElementFactory from \"bpmn-js/lib/features/modeling/ElementFactory\";\n\nimport { DEFAULT_LABEL_SIZE } from \"bpmn-js/lib/util/LabelUtil\";\n\nimport DomainStoryIdFactory from \"./domainStoryIdFactory\";\n\n/**\n * A custom factory that knows how to create BPMN _and_ custom elements.\n */\nexport default function DomainStoryElementFactory(bpmnFactory, moddle) {\n  BpmnElementFactory.call(this, bpmnFactory, moddle);\n\n  let self = this;\n  let domainStoryIdFactory = new DomainStoryIdFactory();\n\n  /**\n   * create a diagram-js element with the given type (any of shape, connection, label).\n   *\n   * @param  {String} elementType\n   * @param  {Object} attrs\n   *\n   * @return {djs.model.Base}\n   */\n  this.create = function (elementType, attrs) {\n    let type = attrs.type;\n\n    if (elementType === \"label\") {\n      return self.baseCreate(\n        elementType,\n        assign({ type: \"label\" }, DEFAULT_LABEL_SIZE, attrs),\n      );\n    }\n\n    // add type to businessObject if custom\n    if (/^domainStory:/.test(type)) {\n      if (!attrs.businessObject) {\n        attrs.businessObject = {\n          type: type,\n          name: attrs.name ? attrs.name : \"\",\n        };\n      }\n\n      if (attrs.id) {\n        domainStoryIdFactory.registerId(attrs.id);\n      } else {\n        attrs.id = domainStoryIdFactory.getId(elementType);\n      }\n      assign(attrs.businessObject, {\n        id: attrs.id,\n      });\n\n      let id = attrs.id;\n      attrs.businessObject.get = function (key) {\n        if (key === \"id\") {\n          return id;\n        }\n      };\n      attrs.businessObject.set = function (key, value) {\n        if (key === \"id\") {\n          assign(attrs.businessObject, { id: value });\n        }\n      };\n\n      if (!attrs.businessObject.$type) {\n        assign(attrs.businessObject, { $type: \"Element\" });\n      }\n      assign(attrs.businessObject, { di: {} });\n      if (!attrs.businessObject.$descriptor) {\n        assign(attrs.businessObject, { $descriptor: {} });\n      }\n\n      // add width and height if shape\n      if (\n        (!/:activity$/.test(type) || !/:connection$/.test(type)) &&\n        !((/:group$/.test(type) && attrs.height) || attrs.width)\n      ) {\n        assign(attrs, self._getCustomElementSize(type));\n      }\n\n      if (!(\"$instanceOf\" in attrs.businessObject)) {\n        // ensure we can use ModelUtil#is for type checks\n        Object.defineProperty(attrs.businessObject, \"$instanceOf\", {\n          value: function (type) {\n            return this.type === type;\n          },\n        });\n      }\n\n      return self.baseCreate(elementType, attrs);\n    }\n\n    return self.createBpmnElement(elementType, attrs);\n  };\n}\n\ninherits(DomainStoryElementFactory, BpmnElementFactory);\n\nDomainStoryElementFactory.$inject = [\"bpmnFactory\", \"moddle\"];\n\n/**\n * returns the default size of custom shapes.\n *\n * the following example shows an interface on how\n * to setup the custom shape's dimensions.\n * *\n * @param {String} type\n *\n * @return {Dimensions} a {width, height} object representing the size of the element\n */\nDomainStoryElementFactory.prototype._getCustomElementSize = function (type) {\n  let shapes = {\n    __default: { width: 75, height: 75 },\n    \"domainStory:textAnnotation\": { width: 100, height: 30 },\n    \"domainStory:group\": { width: 525, height: 275 },\n  };\n\n  return shapes[type] || shapes.__default;\n};\n\nclass Dimensions {\n  width;\n  height;\n}\n","\"use strict\";\n\nlet idList = [];\n\nexport default function DomainStoryIdFactory() {}\n\nDomainStoryIdFactory.prototype.getId = function (type) {\n  return generateId(type);\n};\n\nDomainStoryIdFactory.prototype.registerId = function (id) {\n  idList.push(id);\n};\n\nfunction generateId(type) {\n  let idNumber = fourDigitsId();\n\n  let id = type + \"_\" + idSuffix(idNumber);\n\n  while (containsId(id)) {\n    idNumber++;\n\n    id = type + \"_\" + idSuffix(idNumber);\n  }\n\n  idList.push(id);\n  return id;\n}\n\nfunction idSuffix(idNumber) {\n  let id;\n  if (idNumber > 9999) {\n    id = 0;\n  } else if (idNumber < 10) {\n    id = \"000\" + idNumber;\n  } else if (idNumber < 100) {\n    id = \"00\" + idNumber;\n  } else if (idNumber < 1000) {\n    id = \"0\" + idNumber;\n  } else {\n    id = \"\" + idNumber;\n  }\n  return id;\n}\n\nfunction fourDigitsId() {\n  return Math.floor(Math.random() * 10000);\n}\n\nexport function containsId(id) {\n  let same = false;\n  idList.forEach((element) => {\n    if (id === element) {\n      same = true;\n    }\n  });\n  return same;\n}\n","\"use strict\";\n\nimport inherits from \"inherits\";\nimport BaseRenderer from \"diagram-js/lib/draw/BaseRenderer\";\nimport Ids from \"ids\";\nimport { getAnnotationBoxHeight } from \"src/app/tools/modeler/bpmn/modeler/labeling/dsLabelEditingPreview\";\nimport { componentsToPath, createLine } from \"diagram-js/lib/util/RenderUtil\";\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  create as svgCreate,\n} from \"tiny-svg\";\nimport { query as domQuery } from \"min-dom\";\nimport { assign, isObject } from \"min-dash\";\nimport { getNumberStash } from \"src/app/tools/modeler/bpmn/modeler/labeling/dsLabelEditingProvider\";\nimport {\n  addNumberToRegistry,\n  generateAutomaticNumber,\n  numberBoxDefinitions,\n} from \"src/app/tools/modeler/bpmn/modeler/numbering/numbering\";\n\nimport { calculateTextWidth } from \"src/app/tools/modeler/bpmn/modeler/labeling/dsLabelUtil\";\nimport {\n  countLines,\n  labelPosition,\n} from \"src/app/tools/modeler/bpmn/modeler/labeling/position\";\nimport { ElementTypes } from \"src/app/domain/entities/elementTypes\";\nimport { angleBetween } from \"../../../../utils/mathExtensions\";\nimport { isCustomIcon, isCustomSvgIcon } from \"./util\";\n\nlet RENDERER_IDS = new Ids();\nlet numbers = [];\nconst DEFAULT_COLOR = \"#000000\";\n\n/**\n * a renderer that knows how to render custom elements.\n */\nlet _iconDictionaryService;\nlet _elementRegistryService;\nlet _dirtyFlagService;\n\nexport function initializeRenderer(\n  iconDictionaryService,\n  elementRegistryService,\n  dirtyFlagService,\n) {\n  _iconDictionaryService = iconDictionaryService;\n  _elementRegistryService = elementRegistryService;\n  _dirtyFlagService = dirtyFlagService;\n}\n\nexport default function DomainStoryRenderer(\n  eventBus,\n  styles,\n  canvas,\n  textRenderer,\n  pathMap,\n  commandStack,\n) {\n  BaseRenderer.call(this, eventBus, 2000);\n\n  let rendererId = RENDERER_IDS.next();\n  let markers = {};\n  let computeStyle = styles.computeStyle;\n\n  // generate the automatic Number for an activity originating from an actor\n  function generateActivityNumber(parentGfx, element, box) {\n    // whenever we want to edit an activity, it gets redrawn as a new object\n    // and the custom information is lost,\n    // so we stash it before the editing occurs and set the value here\n\n    let numberStash = getNumberStash();\n    let semantic = element.businessObject;\n\n    if (numberStash.use) {\n      semantic.number = numberStash.number;\n    }\n\n    numbers[semantic.number] = true;\n    box.x -= 26;\n    box.y -= 16;\n\n    if (semantic.number < 10) {\n      box.x += 3;\n    }\n\n    let newRenderedNumber = renderNumber(\n      parentGfx,\n      semantic.number,\n      numberStyle(box),\n      element.type,\n    );\n    addNumberToRegistry(newRenderedNumber, semantic.number);\n  }\n\n  // style functions\n  function numberStyle(box) {\n    return {\n      box: box,\n      fitBox: true,\n      style: assign({}, textRenderer.getExternalStyle(), {\n        fill: \"black\",\n        position: \"absolute\",\n      }),\n    };\n  }\n\n  function backgroundBoxStyle(box) {\n    return {\n      box: box,\n      fitBox: true,\n      style: assign({}, textRenderer.getExternalStyle(), {\n        fill: \"black\",\n        fontSize: 50,\n        position: \"absolute\",\n        fontFamily: \"Courier New\",\n      }),\n    };\n  }\n\n  function backgroundDotStyle(box) {\n    return {\n      box: box,\n      fitBox: true,\n      style: assign({}, textRenderer.getExternalStyle(), {\n        fill: \"white\",\n        fontSize: 150,\n        position: \"absolute\",\n        fontFamily: \"Courier\",\n      }),\n    };\n  }\n\n  // render functions\n  // render label associated with actors and workobjects\n  function renderEmbeddedLabel(parentGfx, element, align, padding) {\n    let businessObject = element.businessObject;\n    return renderLabel(\n      parentGfx,\n      businessObject.name,\n      {\n        box: element,\n        align: align,\n        padding: padding ? padding : 0,\n        style: {\n          fill: \"#000000\",\n        },\n      },\n      element.type,\n    );\n  }\n\n  // render label associated with activities\n  function renderExternalLabel(parentGfx, element) {\n    let semantic = element.businessObject;\n    let waypoints = element.waypoints;\n    let lines = countLines(semantic.name);\n\n    if (element.waypoints != null) {\n      let position = labelPosition(waypoints, lines);\n      let startPoint = element.waypoints[position.selected];\n      let endPoint = element.waypoints[position.selected + 1];\n      let angle = angleBetween(startPoint, endPoint);\n      let alignment = \"left\";\n      let boxWidth = 500;\n      let xStart = position.x;\n\n      // if the activity is horizontal, we want to center the label\n      if (angle === 0 || angle === 180) {\n        boxWidth = Math.abs(startPoint.x - endPoint.x);\n        alignment = \"center\";\n        xStart =\n          (startPoint.x + endPoint.x) / 2 - calculateTextWidth(semantic.name);\n      }\n\n      let box = {\n        textAlign: alignment,\n        width: boxWidth,\n        height: 30,\n        x: xStart,\n        y: position.y,\n      };\n\n      if (semantic.name && semantic.name.length) {\n        return renderLabel(\n          parentGfx,\n          semantic.name,\n          {\n            box: box,\n            fitBox: true,\n            style: assign({}, textRenderer.getExternalStyle(), {\n              fill: \"black\",\n              wordWrap: \"break-word\",\n              overflowWrap: \"break-word\",\n              hyphens: \"auto\",\n            }),\n          },\n          element.type,\n        );\n      }\n    }\n  }\n\n  // render the number associated with an activity\n  function renderExternalNumber(parentGfx, element) {\n    if (element && element.source) {\n      let semantic = element.businessObject;\n\n      let box = numberBoxDefinitions(element);\n\n      if (\n        semantic.number == null &&\n        element.source.type &&\n        element.source.type.includes(ElementTypes.ACTOR)\n      ) {\n        generateAutomaticNumber(element, commandStack);\n      }\n\n      // render the background for the number\n      if (semantic.number && element.source.type.includes(ElementTypes.ACTOR)) {\n        generateActivityNumber(parentGfx, element, box);\n      } else {\n        semantic.number = null;\n      }\n    }\n  }\n\n  // render a number on the canvas\n  function renderNumber(parentGfx, number, options, type) {\n    if (number < 10) {\n      number = String(number);\n    }\n    number = String(number);\n    let text = textRenderer.createText(number || \"\", options);\n    let height = 0;\n\n    svgClasses(text).add(\"djs-labelNumber\");\n\n    setCoordinates(type, text, options, height, parentGfx);\n\n    // !IMPORTANT!\n    // When converting svg-files via Inkscape or Photoshop the svg-circle is converted to a black dot that obscures the number.\n    // To circumvent this, we draw an arc.\n    let circle = svgCreate(\"path\");\n    let radius = 11;\n    let x = options.box.x + 18 + (number > 9 ? 3 : 0);\n    let y = options.box.y - radius + 7;\n    svgAttr(circle, {\n      d: `\n      M ${x} ${y}\n      m ${radius},0\n      a ${radius},${radius} 0 1,0 ${-radius * 2},0\n      a ${radius},${radius} 0 1,0 ${radius * 2},0\n      `,\n      fill: \"white\",\n      stroke: \"black\",\n    });\n\n    svgAppend(parentGfx, circle);\n    svgAppend(parentGfx, text);\n\n    return text;\n  }\n\n  // the coordinates of the activity label must be set directly and will not be taken from the box\n  function setCoordinates(type, text, options, height, parentGfx) {\n    if (/:activity$/.test(type)) {\n      text.innerHTML = manipulateInnerHTMLXLabel(\n        text.children,\n        options.box.x,\n        0,\n      );\n      text.innerHTML = manipulateInnerHTMLYLabel(\n        text.children,\n        options.box.y,\n        0,\n      );\n    } else if (/:actor/.test(type)) {\n      height = parentGfx.firstChild.attributes.height.nodeValue;\n      text.innerHTML = manipulateInnerHTMLYLabel(text.children, height, 0);\n    } else if (/:workObject/.test(type)) {\n      height = parentGfx.firstChild.attributes.height.nodeValue;\n      text.innerHTML = manipulateInnerHTMLYLabel(text.children, height, 26);\n    }\n  }\n\n  // render a label on the canvas\n  function renderLabel(parentGfx, label, options, type) {\n    let text = textRenderer.createText(label || \"\", options);\n    let height = 0;\n\n    svgClasses(text).add(\"djs-label\");\n    setCoordinates(type, text, options, height, parentGfx);\n\n    svgAppend(parentGfx, text);\n    return text;\n  }\n\n  // determine the Y-coordinate of the label / number to be rendered\n  function manipulateInnerHTMLYLabel(children, y, offset) {\n    if (children) {\n      let result = \"\";\n      for (let i = 0; i < children.length; i++) {\n        result += children[i].outerHTML.replace(\n          /y=\"-?\\d*.\\d*\"/,\n          'y=\"' + (Number(y) + offset + 14 * i) + '\"',\n        );\n      }\n      return result;\n    }\n  }\n\n  // determine the X-coordinate of the label / number to be rendered\n  function manipulateInnerHTMLXLabel(children, x, offset) {\n    if (children) {\n      let result = \"\";\n      for (let i = 0; i < children.length; i++) {\n        result += children[i].outerHTML.replace(\n          /x=\"-?\\d*.\\d*\"/,\n          'x=\"' + (Number(x) + offset + 14) + '\"',\n        );\n      }\n      return result;\n    }\n  }\n\n  // draw functions\n  this.drawGroup = function (parentGfx, element) {\n    if (!element.businessObject.pickedColor) {\n      element.businessObject.pickedColor = DEFAULT_COLOR;\n    }\n    let rect = drawRect(\n      parentGfx,\n      element.width,\n      element.height,\n      0,\n      assign(\n        {\n          fill: \"none\",\n          stroke: element.businessObject.pickedColor,\n        },\n        element.attrs,\n      ),\n    );\n    renderEmbeddedLabel(parentGfx, element, \"left-top\", 8);\n\n    return rect;\n  };\n\n  function applyColorToCustomSvgIcon(pickedColor, iconSvg) {\n    if (!pickedColor) {\n      return iconSvg;\n    }\n    const [rest, base64Svg] = iconSvg.split(\"base64,\");\n    const svg = atob(base64Svg);\n    const coloredSvg = applyColorToIcon(pickedColor, svg);\n    const encodedColoredSvg = btoa(coloredSvg);\n    return rest + \"base64,\" + encodedColoredSvg;\n  }\n\n  function applyColorToIcon(pickedColor = DEFAULT_COLOR, iconSvg) {\n    const match = iconSvg.match(\n      /fill=\\s*\"(?!none).*?\"|fill:\\s*[#r]\\w*[;\\s]{1}/,\n    );\n    if (match && match.some((it) => it)) {\n      return iconSvg\n        .replaceAll(/fill=\\s*\"(?!none).*?\"/g, `fill=\"${pickedColor} \"`)\n        .replaceAll(/fill:\\s*[#r]\\w*[;\\s]{1}/g, `fill:${pickedColor};`);\n    } else {\n      const index = iconSvg.indexOf(\"<svg \") + 5;\n      return (\n        iconSvg.substring(0, index) +\n        ' fill=\" ' +\n        pickedColor +\n        '\" ' +\n        iconSvg.substring(index)\n      );\n    }\n  }\n\n  function getIconSvg(icon, element) {\n    const pickedColor = element.businessObject.pickedColor;\n    if (isCustomIcon(icon)) {\n      let dataURL;\n      if (isCustomSvgIcon(icon)) {\n        dataURL = applyColorToCustomSvgIcon(pickedColor, icon);\n      } else {\n        dataURL = icon;\n        if (pickedColor && pickedColor !== DEFAULT_COLOR) {\n          document.dispatchEvent(new CustomEvent(\"errorColoringOnlySvg\"));\n        }\n      }\n      return (\n        '<svg viewBox=\"0 0 24 24\" width=\"48\" height=\"48\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">' +\n        '<image width=\"24\" height=\"24\" xlink:href=\"' +\n        dataURL +\n        '\"/></svg>'\n      );\n    } else {\n      return applyColorToIcon(pickedColor, icon);\n    }\n  }\n\n  this.drawActor = function (parent, element) {\n    let svgDynamicSizeAttributes = {\n      width: element.width,\n      height: element.height,\n    };\n    let iconSRC = _iconDictionaryService.getTypeIconSRC(\n      ElementTypes.ACTOR,\n      ElementTypes.getIconId(element.type),\n    );\n    iconSRC = getIconSvg(iconSRC, element);\n    let actor = svgCreate(iconSRC);\n\n    svgAttr(actor, svgDynamicSizeAttributes);\n    svgAppend(parent, actor);\n\n    renderEmbeddedLabel(parent, element, \"center\", -5);\n    return actor;\n  };\n\n  this.drawWorkObject = function (parent, element) {\n    let svgDynamicSizeAttributes = {\n        width: element.width * 0.65,\n        height: element.height * 0.65,\n        x: element.width / 2 - 25,\n        y: element.height / 2 - 25,\n      },\n      workObject;\n    let iconSRC = _iconDictionaryService.getTypeIconSRC(\n      ElementTypes.WORKOBJECT,\n      ElementTypes.getIconId(element.type),\n    );\n    iconSRC = getIconSvg(iconSRC, element);\n    workObject = svgCreate(iconSRC);\n\n    svgAttr(workObject, svgDynamicSizeAttributes);\n    svgAppend(parent, workObject);\n    renderEmbeddedLabel(parent, element, \"center\", -5);\n\n    return workObject;\n  };\n\n  function useColorForActivity(element) {\n    if (!element.businessObject.pickedColor) {\n      element.businessObject.pickedColor = \"black\";\n    }\n    let attrs = \"\";\n    return computeStyle(attrs, {\n      stroke: element.businessObject.pickedColor,\n      fill: \"none\",\n      strokeWidth: 1.5,\n      strokeLinejoin: \"round\",\n      markerEnd: marker(\n        \"activity\",\n        \"black\",\n        element.businessObject.pickedColor,\n      ),\n    });\n  }\n\n  this.drawActivity = function (p, element) {\n    adjustForTextOverlap(element);\n\n    if (element) {\n      let attrs = useColorForActivity(element);\n\n      let x = svgAppend(p, createLine(element.waypoints, attrs));\n      renderExternalLabel(p, element);\n      renderExternalNumber(p, element);\n\n      // just adjusting the start- and endpoint of the connection-element moves only the drawn connection,\n      // not the interactive line. This can be fixed by manually overriding the points of the interactive polyline\n      // in the HTMl with the points of the drawn one.\n      // this however does not adjust the surrounding box of the connection.\n      fixConnectionInHTML(p.parentElement);\n\n      return x;\n    }\n  };\n\n  function checkIfPointOverlapsText(point, source) {\n    if (point.y > source.y + 60) {\n      if (point.x > source.x + 3 && point.x < source.x + 72) {\n        let lineOffset = getLineOffset(source);\n        if (source.y + 75 + lineOffset > point.y) {\n          point.y += lineOffset;\n        }\n      }\n    }\n  }\n\n  function adjustForTextOverlap(element) {\n    let source = element.source;\n    let target = element.target;\n\n    let waypoints = element.waypoints;\n    let startPoint = waypoints[0];\n    let endPoint = waypoints[waypoints.length - 1];\n\n    if (startPoint && endPoint && source && target) {\n      checkIfPointOverlapsText(startPoint, source);\n      checkIfPointOverlapsText(endPoint, source);\n    }\n  }\n\n  function getLineOffset(element) {\n    let id = element.id;\n    let offset = 0;\n\n    let objects = document.getElementsByClassName(\"djs-element djs-shape\");\n    for (let i = 0; i < objects.length; i++) {\n      let data_id = objects.item(i).getAttribute(\"data-element-id\");\n      if (data_id === id) {\n        let object = objects.item(i);\n        let text = object.getElementsByTagName(\"text\")[0];\n        let tspans = text.getElementsByTagName(\"tspan\");\n        let tspan = tspans[tspans.length - 1];\n        offset = tspan.getAttribute(\"y\");\n      }\n    }\n    return offset - 70;\n  }\n\n  function fixConnectionInHTML(wantedConnection) {\n    if (wantedConnection) {\n      let polylines = wantedConnection.getElementsByTagName(\"polyline\");\n      if (polylines.length > 1) {\n        polylines[1].setAttribute(\n          \"points\",\n          polylines[0].getAttribute(\"points\"),\n        );\n      }\n    }\n  }\n\n  this.drawDSConnection = function (p, element) {\n    let attrs = \"\";\n    attrs = computeStyle(attrs, {\n      stroke: \"#000000\",\n      strokeWidth: 1.5,\n      strokeLinejoin: \"round\",\n      strokeDasharray: \"5, 5\",\n    });\n\n    return svgAppend(p, createLine(element.waypoints, attrs));\n  };\n\n  this.drawAnnotation = function (parentGfx, element) {\n    let style = {\n      fill: \"none\",\n      stroke: \"none\",\n    };\n\n    let text = element.businessObject.text || \"\";\n    if (element.businessObject.text) {\n      let height = getAnnotationBoxHeight();\n\n      if (height === 0 && element.businessObject.number) {\n        height = element.businessObject.number;\n      }\n      assign(element, {\n        height: height,\n      });\n\n      // for some reason the keyword height is not exported, so we use another, which we know will be exported,\n      // to ensure persistent annotation heights between sessions\n      assign(element.businessObject, {\n        number: height,\n      });\n    }\n\n    let textElement = drawRect(\n      parentGfx,\n      element.width,\n      element.height,\n      0,\n      0,\n      style,\n    );\n    let textPathData = pathMap.getScaledPath(\"TEXT_ANNOTATION\", {\n      xScaleFactor: 1,\n      yScaleFactor: 1,\n      containerWidth: element.width,\n      containerHeight: element.height,\n      position: {\n        mx: 0.0,\n        my: 0.0,\n      },\n    });\n\n    drawPath(parentGfx, textPathData, {\n      stroke: \"black\",\n    });\n\n    renderLabel(parentGfx, text, {\n      box: element,\n      align: \"left-top\",\n      padding: 5,\n      style: {\n        fill: \"black\",\n      },\n    });\n\n    return textElement;\n  };\n\n  // draw helper functions\n  function drawPath(parentGfx, d, attrs) {\n    attrs = computeStyle(attrs, [\"no-fill\"], {\n      strokeWidth: 2,\n      stroke: \"black\",\n    });\n\n    let path = svgCreate(\"path\");\n    svgAttr(path, { d: d });\n    svgAttr(path, attrs);\n\n    svgAppend(parentGfx, path);\n\n    return path;\n  }\n\n  function drawRect(parentGfx, width, height, r, offset, attrs) {\n    if (isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n    attrs = computeStyle(attrs, {\n      stroke: \"black\",\n      strokeWidth: 2,\n      fill: \"white\",\n    });\n\n    let rect = svgCreate(\"rect\");\n    svgAttr(rect, {\n      x: offset,\n      y: offset,\n      width: width - offset * 2,\n      height: height - offset * 2,\n      rx: r,\n      ry: r,\n    });\n\n    svgAttr(rect, attrs);\n    svgAppend(parentGfx, rect);\n\n    return rect;\n  }\n\n  // marker functions\n  function marker(type, fill, stroke) {\n    let id = type + \"-\" + fill + \"-\" + stroke + \"-\" + rendererId;\n\n    if (!markers[id]) {\n      createMarker(type, fill, stroke);\n    }\n    return \"url(#\" + id + \")\";\n  }\n\n  function createMarker(type, fill, stroke) {\n    let id = type + \"-\" + fill + \"-\" + stroke + \"-\" + rendererId;\n\n    if (type === \"activity\") {\n      let sequenceflowEnd = svgCreate(\"path\");\n      svgAttr(sequenceflowEnd, { d: \"M 1 5 L 11 10 L 1 15 Z\" });\n\n      addMarker(id, {\n        element: sequenceflowEnd,\n        ref: { x: 11, y: 10 },\n        scale: 0.5,\n        attrs: {\n          fill: stroke,\n          stroke: stroke,\n        },\n      });\n    }\n  }\n\n  function addMarker(id, options) {\n    let attrs = assign(\n      {\n        fill: \"black\",\n        strokeWidth: 1,\n        strokeLinecap: \"round\",\n        strokeDasharray: \"none\",\n      },\n      options.attrs,\n    );\n\n    let ref = options.ref || { x: 0, y: 0 };\n    let scale = options.scale || 1;\n\n    // resetting stroke dash array\n    if (attrs.strokeDasharray === \"none\") {\n      attrs.strokeDasharray = [10000, 1];\n    }\n\n    let marker = svgCreate(\"marker\");\n\n    svgAttr(options.element, attrs);\n    svgAppend(marker, options.element);\n    svgAttr(marker, {\n      id: id,\n      viewBox: \"0 0 20 20\",\n      refX: ref.x,\n      refY: ref.y,\n      markerWidth: 20 * scale,\n      markerHeight: 20 * scale,\n      orient: \"auto\",\n    });\n\n    let defs = domQuery(\"defs\", canvas._svg);\n    if (!defs) {\n      defs = svgCreate(\"defs\");\n      svgAppend(canvas._svg, defs);\n    }\n    svgAppend(defs, marker);\n    markers[id] = marker;\n  }\n\n  // path functions\n  this.getWorkObjectPath = function (shape) {\n    let rectangle = getRectPath(shape);\n    return componentsToPath(rectangle);\n  };\n\n  this.getGroupPath = function (shape) {\n    let rectangle = getRectPath(shape);\n    return componentsToPath(rectangle);\n  };\n\n  this.getActivityPath = function (connection) {\n    let waypoints = connection.waypoints.map(function (p) {\n      return p.original || p;\n    });\n\n    let activityPath = [[\"M\", waypoints[0].x, waypoints[0].y]];\n\n    waypoints.forEach(function (waypoint, index) {\n      if (index !== 0) {\n        activityPath.push([\"L\", waypoint.x, waypoint.y]);\n      }\n    });\n    return componentsToPath(activityPath);\n  };\n\n  this.getActorPath = function (shape) {\n    let rectangle = getRectPath(shape);\n    return componentsToPath(rectangle);\n  };\n}\n\ninherits(DomainStoryRenderer, BaseRenderer);\n\nDomainStoryRenderer.$inject = [\n  \"eventBus\",\n  \"styles\",\n  \"canvas\",\n  \"textRenderer\",\n  \"pathMap\",\n  \"commandStack\",\n];\n\nDomainStoryRenderer.prototype.canRender = function (element) {\n  return /^domainStory:/.test(element.type);\n};\n\nDomainStoryRenderer.prototype.drawShape = function (p, element) {\n  // polyfill for tests\n  if (!String.prototype.startsWith) {\n    Object.defineProperty(String.prototype, \"startsWith\", {\n      value: function (search, pos) {\n        pos = !pos || pos < 0 ? 0 : +pos;\n        return this.substring(pos, pos + search.length) === search;\n      },\n    });\n  }\n\n  let type = element.type;\n  element.businessObject.type = type;\n\n  _elementRegistryService.correctInitialize();\n  _dirtyFlagService.makeDirty();\n\n  if (type.includes(ElementTypes.ACTOR)) {\n    return this.drawActor(p, element);\n  } else if (type.includes(ElementTypes.WORKOBJECT)) {\n    return this.drawWorkObject(p, element);\n  } else if (type.includes(ElementTypes.TEXTANNOTATION)) {\n    return this.drawAnnotation(p, element);\n  } else if (type.includes(ElementTypes.GROUP)) {\n    return this.drawGroup(p, element);\n  }\n};\n\nDomainStoryRenderer.prototype.getShapePath = function (shape) {\n  let type = shape.type;\n\n  if (type.includes(ElementTypes.ACTOR)) {\n    return this.getActorPath(shape);\n  } else if (type.includes(ElementTypes.WORKOBJECT)) {\n    return this.getWorkObjectPath(shape);\n  } else if (type.includes(ElementTypes.GROUP)) {\n    return this.getGroupPath(shape);\n  }\n};\n\nDomainStoryRenderer.prototype.drawConnection = function (p, element) {\n  let type = element.type;\n\n  _dirtyFlagService.makeDirty();\n\n  // fixes activities that were copy-pasted\n  if (!element.businessObject.type) {\n    element.businessObject.type = type;\n  }\n  if (type === ElementTypes.ACTIVITY) {\n    return this.drawActivity(p, element);\n  } else if (type === ElementTypes.CONNECTION) {\n    return this.drawDSConnection(p, element);\n  }\n};\n\n// creates a SVG path that describes a rectangle which encloses the given shape.\nfunction getRectPath(shape) {\n  let offset = 5;\n  let x = shape.x,\n    y = shape.y,\n    width = shape.width / 2 + offset,\n    height = shape.height / 2 + offset;\n\n  return [\n    [\"M\", x, y],\n    [\"l\", width, 0],\n    [\"l\", width, height],\n    [\"l\", -width, height],\n    [\"l\", -width, 0],\n    [\"z\"],\n  ];\n}\n","\"use strict\";\n\nimport { assign, every, reduce } from \"min-dash\";\n\nimport inherits from \"inherits\";\n\nimport RuleProvider from \"diagram-js/lib/features/rules/RuleProvider\";\nimport { ElementTypes } from \"src/app/domain/entities/elementTypes\";\nimport { is } from \"./util\";\n\nconst HIGH_PRIORITY = 1500;\nconst MIN_SIZE = 125;\n\nfunction isDomainStory(element) {\n  return element && /^domainStory:/.test(element.type);\n}\n\nfunction isDomainStoryGroup(element) {\n  return element && /^domainStory:group/.test(element.type);\n}\n\nfunction isActor(element) {\n  return element && /^domainStory:actor\\w*/.test(element.type);\n}\n\nfunction isWorkObject(element) {\n  return element && /^domainStory:workObject/.test(element.type);\n}\n\nfunction isActivity(element) {\n  return element && /^domainStory:activity/.test(element.type);\n}\n\nfunction isConnection(element) {\n  return element && /^domainStory:connection/.test(element.type);\n}\n\nfunction isAnnotation(element) {\n  return element && /^domainStory:textAnnotation/.test(element.type);\n}\n\n/**\n * can source and target be connected?\n */\nfunction canConnect(source, target) {\n  // only judge about two custom elements\n  if (\n    isDomainStoryGroup(target) ||\n    !isDomainStory(source) ||\n    !isDomainStory(target)\n  ) {\n    return;\n  }\n\n  // do not allow a connection from one element to itself\n  if (source === target) {\n    return;\n  }\n\n  // do not allow a connection between two actors\n  if (isActor(source) && isActor(target)) {\n    return;\n  }\n\n  // do not allow a connection, where the source or target is an activity\n  if (isActivity(source) || isActivity(target)) {\n    return;\n  }\n\n  // do not allow a connection, where the source or target is an annotation connection\n  if (isConnection(source) || isConnection(target)) {\n    return;\n  }\n\n  // do not allow a connection to a connection(the special type of connection between an element and a comment box)\n  // when the target is an annotation, the connection type is an annotation connection instead of an activity\n  if (isAnnotation(target)) {\n    return { type: ElementTypes.CONNECTION };\n  }\n\n  return { type: ElementTypes.ACTIVITY };\n}\n\nfunction canResize(shape, newBounds) {\n  if (is(shape, ElementTypes.GROUP)) {\n    if (newBounds) {\n      let lowerLeft = { x: shape.x, y: shape.y + shape.height };\n      let lowerRight = { x: shape.x + shape.width, y: shape.y + shape.height };\n      let upperRight = { x: shape.x + shape.width, y: shape.y };\n\n      if (newBounds.x !== shape.x && newBounds.y !== shape.y) {\n        // upper left\n        if (newBounds.x > lowerRight.x - MIN_SIZE) {\n          assign(newBounds, { x: lowerRight.x - MIN_SIZE });\n        }\n        if (newBounds.y > lowerRight.y - MIN_SIZE) {\n          assign(newBounds, { y: lowerRight.y - MIN_SIZE });\n        }\n      }\n\n      if (newBounds.x !== shape.x && newBounds.y === shape.y) {\n        // lower left\n        if (newBounds.x > upperRight.x - MIN_SIZE) {\n          assign(newBounds, { x: upperRight.x - MIN_SIZE });\n        }\n      }\n\n      if (newBounds.x === shape.x && newBounds.y !== shape.y) {\n        // upper right\n        if (newBounds.y > lowerLeft.y - MIN_SIZE) {\n          assign(newBounds, { y: lowerLeft.y - MIN_SIZE });\n        }\n      }\n\n      if (newBounds.height < MIN_SIZE) {\n        assign(newBounds, {\n          height: MIN_SIZE,\n        });\n      }\n      if (newBounds.width < MIN_SIZE) {\n        assign(newBounds, {\n          width: MIN_SIZE,\n        });\n      }\n    }\n    return true;\n  }\n\n  return false;\n}\n\nfunction canAttach(elements, target, source) {\n  if (!Array.isArray(elements)) {\n    elements = [elements];\n  }\n\n  // disallow appending as boundary event\n  if (source) {\n    return false;\n  }\n\n  // only (re-)attach one element at a time\n  if (elements.length !== 1) {\n    return false;\n  }\n\n  // allow default move operation\n  if (!target) {\n    return true;\n  }\n\n  // only allow drop on DomainStory Elements\n  if (!isDomainStory(target)) {\n    return false;\n  }\n\n  return \"attach\";\n}\n\nfunction canConnectToAnnotation(source, target, connection) {\n  // do not allow an activity connect to an annotation\n  if (isActivity(connection) && isAnnotation(target)) {\n    return false;\n  }\n\n  // do not allow an annotation connection between two annotations\n  if (\n    isConnection(connection) &&\n    isAnnotation(source) &&\n    isAnnotation(target)\n  ) {\n    return false;\n  }\n\n  // do not allow an annotation connection between an actor or workObject and anything except an annotation\n  return !(\n    isConnection(connection) &&\n    !isAnnotation(target) &&\n    (isActor(source) || isWorkObject(source))\n  );\n}\n\n/**\n * specific rules for custom elements\n */\nexport default function DomainStoryRules(eventBus) {\n  RuleProvider.call(this, eventBus);\n}\n\ninherits(DomainStoryRules, RuleProvider);\n\nDomainStoryRules.$inject = [\"eventBus\"];\n\nDomainStoryRules.prototype.init = function () {\n  /**\n   * can shape be created on target container?\n   */\n  function canCreate(shape, target) {\n    // only judge about custom elements\n    if (!isDomainStory(shape)) {\n      return;\n    }\n\n    // allow creation just on groups\n    return !isDomainStory(target) || isDomainStoryGroup(target);\n  }\n\n  this.addRule(\"elements.create\", function (context) {\n    const elements = context.elements,\n      position = context.position,\n      target = context.target;\n\n    return every(elements, function (element) {\n      if (isConnection(element)) {\n        return canConnect(element.source, element.target, element);\n      }\n\n      if (element.host) {\n        return canAttach(element, element.host, null, position);\n      }\n\n      return canCreate(element, target, null, position);\n    });\n  });\n\n  this.addRule(\"elements.move\", HIGH_PRIORITY, function (context) {\n    let target = context.target,\n      shapes = context.shapes;\n\n    let type;\n\n    // do not allow mixed movements of custom / BPMN shapes\n    // if any shape cannot be moved, the group cannot be moved, too\n\n    // reject, if we have at least one\n    // custom element that cannot be moved\n    return reduce(\n      shapes,\n      function (result, s) {\n        if (type === undefined) {\n          type = isDomainStory(s);\n        }\n\n        if (type !== isDomainStory(s) || result === false) {\n          return false;\n        }\n\n        return canCreate(s, target);\n      },\n      undefined,\n    );\n  });\n\n  this.addRule(\"shape.create\", HIGH_PRIORITY, function (context) {\n    let target = context.target,\n      shape = context.shape;\n\n    return canCreate(shape, target);\n  });\n\n  this.addRule(\"connection.create\", HIGH_PRIORITY, function (context) {\n    let source = context.source,\n      target = context.target;\n\n    return canConnect(source, target);\n  });\n\n  this.addRule(\"connection.reconnect\", HIGH_PRIORITY, function (context) {\n    let connection = context.connection,\n      source = context.hover || context.source,\n      target = context.target;\n\n    // --------------------------------------------------------------\n    let result = canConnectToAnnotation(source, target, connection);\n\n    if (!result) {\n      return;\n    }\n\n    // --------------------------------------------------------------\n\n    return canConnect(source, target, connection);\n  });\n\n  this.addRule(\"shape.resize\", function (context) {\n    let shape = context.shape,\n      newBounds = context.newBounds;\n\n    return canResize(shape, newBounds);\n  });\n};\n\nDomainStoryRules.prototype.canConnect = canConnect;\nDomainStoryRules.prototype.canAttach = canAttach;\nDomainStoryRules.prototype.isDomainStory = isDomainStory;\nDomainStoryRules.prototype.canResize = canResize;\n","\"use strict\";\n\nimport inherits from \"inherits\";\n\nimport { pick, assign } from \"min-dash\";\n\nimport CommandInterceptor from \"diagram-js/lib/command/CommandInterceptor\";\n\nimport {\n  add as collectionAdd,\n  remove as collectionRemove,\n} from \"diagram-js/lib/util/Collections\";\n\nimport { reworkGroupElements } from \"./util\";\nimport { ElementTypes } from \"../../../../domain/entities/elementTypes\";\n\n/**\n * a handler responsible for updating the custom element's businessObject\n * once changes on the diagram happen.\n */\nexport default function DomainStoryUpdater(eventBus, bpmnjs) {\n  CommandInterceptor.call(this, eventBus);\n\n  function updateCustomElement(e) {\n    let context = e.context,\n      shape = context.shape,\n      businessObject = shape.businessObject;\n\n    if (!shape || !shape.type.includes(ElementTypes.DOMAINSTORY)) {\n      return;\n    }\n\n    let parent = shape.parent;\n    let customElements = bpmnjs._customElements;\n\n    // make sure element is added / removed from bpmnjs.customElements\n    if (!parent) {\n      collectionRemove(customElements, businessObject);\n    } else {\n      collectionAdd(customElements, businessObject);\n    }\n\n    // save custom element position\n    assign(businessObject, pick(shape, [\"x\", \"y\"]));\n\n    // save custom element size if resizable\n    if (shape.type === ElementTypes.GROUP) {\n      assign(businessObject, pick(shape, [\"height\", \"width\"]));\n\n      // rework the child-parent relations if a group was moved, such that all Objects that are visually in the group are also associated with it\n      // since we do not have access to the standard-canvas object here, we cannot use the function correctGroupChildren() from DSLabelUtil\n      if (parent != null) {\n        reworkGroupElements(parent, shape);\n      }\n    }\n    if (\n      shape &&\n      shape.parent &&\n      \"type\" in shape.parent &&\n      shape.parent.type === ElementTypes.GROUP\n    ) {\n      assign(businessObject, {\n        parent: shape.parent.id,\n      });\n    }\n  }\n\n  function updateCustomConnection(e) {\n    let context = e.context,\n      connection = context.connection,\n      source = connection.source,\n      target = connection.target,\n      businessObject = connection.businessObject;\n\n    if (e.newTarget) {\n      target = e.newTarget;\n    }\n    if (e.newSource) {\n      source = e.newSource;\n    }\n\n    let parent = connection.parent;\n    let customElements = bpmnjs._customElements;\n\n    // make sure element is added / removed from bpmnjs.customElements\n    if (!parent) {\n      collectionRemove(customElements, businessObject);\n    } else {\n      collectionAdd(customElements, businessObject);\n    }\n\n    // update waypoints\n    assign(businessObject, {\n      waypoints: copyWaypoints(connection),\n    });\n\n    if (source) {\n      if (!businessObject.source) {\n        assign(businessObject, { source: source.id });\n      } else {\n        businessObject.source = source.id;\n      }\n    }\n    if (target) {\n      if (!businessObject.target) {\n        assign(businessObject, { target: target.id });\n      } else {\n        businessObject.target = target.id;\n      }\n    }\n  }\n\n  function copyWaypoints(connection) {\n    return connection.waypoints.map(function (p) {\n      if (p.original) {\n        return {\n          original: {\n            x: p.original.x,\n            y: p.original.y,\n          },\n          x: p.x,\n          y: p.y,\n        };\n      } else {\n        return {\n          x: p.x,\n          y: p.y,\n        };\n      }\n    });\n  }\n\n  this.executed(\n    [\n      \"shape.create\",\n      \"shape.move\",\n      \"shape.delete\",\n      \"shape.resize\",\n      \"shape.removeGroupWithChildren\",\n    ],\n    ifDomainStoryElement(updateCustomElement),\n  );\n\n  this.reverted(\n    [\n      \"shape.create\",\n      \"shape.move\",\n      \"shape.delete\",\n      \"shape.resize\",\n      \"shape.removeGroupWithChildren\",\n    ],\n    ifDomainStoryElement(updateCustomElement),\n  );\n\n  this.executed(\n    [\n      \"connection.create\",\n      \"connection.reconnect\",\n      \"connection.updateWaypoints\",\n      \"connection.delete\",\n      \"connection.layout\",\n      \"connection.move\",\n    ],\n    ifDomainStoryElement(updateCustomConnection),\n  );\n\n  this.reverted(\n    [\n      \"connection.create\",\n      \"connection.reconnect\",\n      \"connection.updateWaypoints\",\n      \"connection.delete\",\n      \"connection.layout\",\n      \"connection.move\",\n    ],\n    ifDomainStoryElement(updateCustomConnection),\n  );\n}\n\n// check if element in the context of an event is a domainStory element\nfunction ifDomainStoryElement(fn) {\n  return (event) => {\n    const context = event.context;\n    const element = context.shape || context.connection;\n\n    if (isDomainStory(element)) {\n      fn(event);\n    }\n  };\n}\n\nfunction isDomainStory(element) {\n  return element && /domainStory:/.test(element.type);\n}\n\ninherits(DomainStoryUpdater, CommandInterceptor);\n\nDomainStoryUpdater.$inject = [\"eventBus\", \"bpmnjs\"];\n","\"use strict\";\n\nimport DomainStoryElementFactory from \"./domainStoryElementFactory\";\nimport DomainStoryRenderer from \"./domainStoryRenderer\";\nimport DomainStoryPalette from \"./palette/domainStoryPalette\";\nimport DomainStoryRules from \"./domainStoryRules\";\nimport DomainStoryUpdater from \"./domainStoryUpdater\";\nimport ElementFactory from \"bpmn-js/lib/features/modeling/ElementFactory\";\nimport CreateModule from \"diagram-js/lib/features/create\";\nimport PathMap from \"bpmn-js/lib/draw/PathMap\";\nimport PopupMenuModule from \"bpmn-js/lib/features/popup-menu\";\nimport ContextPadModule from \"diagram-js/lib/features/context-pad\";\nimport CommandStack from \"diagram-js/lib/command/CommandStack\";\nimport UpdateLabelHandler from \"./updateHandler/updateLabelHandler\";\nimport headlineAndDescriptionUpdateHandler from \"./updateHandler/headlineAndDescriptionUpdateHandler\";\nimport DomainStoryContextPadProvider from \"./context-pad/domainStoryContextPadProvider\";\nimport ReplaceMenuProvider from \"./change-icon/replaceMenuProvider\";\nimport DSModeling from \"./modeling/dSModeling\";\n\nexport default {\n  __depends__: [CreateModule, ContextPadModule, PopupMenuModule],\n  __init__: [\n    \"domainStoryRenderer\",\n    \"paletteProvider\",\n    \"domainStoryRules\",\n    \"domainStoryUpdater\",\n    \"contextPadProvider\",\n    \"replaceMenuProvider\",\n  ],\n  elementFactory: [\"type\", DomainStoryElementFactory],\n  domainStoryRenderer: [\"type\", DomainStoryRenderer],\n  paletteProvider: [\"type\", DomainStoryPalette],\n  domainStoryRules: [\"type\", DomainStoryRules],\n  domainStoryUpdater: [\"type\", DomainStoryUpdater],\n  contextPadProvider: [\"type\", DomainStoryContextPadProvider],\n  elementFactoryBpmn: [\"type\", ElementFactory],\n  pathMap: [\"type\", PathMap],\n  replaceMenuProvider: [\"type\", ReplaceMenuProvider],\n  commandStack: [\"type\", CommandStack],\n  updateLabelHandler: [\"type\", UpdateLabelHandler],\n  headlineAndDescriptionUpdateHandler: [\n    \"type\",\n    headlineAndDescriptionUpdateHandler,\n  ],\n  modeling: [\"type\", DSModeling],\n};\n","\"use strict\";\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  remove as svgRemove,\n} from \"tiny-svg\";\n\nimport { translate } from \"diagram-js/lib/util/SvgTransformUtil\";\nimport { ElementTypes } from \"src/app/domain/entities/elementTypes\";\nimport { is } from \"../util\";\n\nconst MARKER_HIDDEN = \"djs-element-hidden\",\n  MARKER_LABEL_HIDDEN = \"djs-label-hidden\";\n\nlet annotationBoxHeight = 0;\n\nexport function getAnnotationBoxHeight() {\n  return annotationBoxHeight;\n}\n\nexport default function DSLabelEditingPreview(eventBus, canvas, pathMap) {\n  let self = this;\n\n  let defaultLayer = canvas.getDefaultLayer();\n  let element, absoluteElementBBox, gfx;\n\n  eventBus.on(\"directEditing.activate\", function (context) {\n    let activeProvider = context.active;\n\n    element = activeProvider.element.label || activeProvider.element;\n\n    // text annotation\n    if (is(element, ElementTypes.TEXTANNOTATION)) {\n      absoluteElementBBox = canvas.getAbsoluteBBox(element);\n\n      gfx = svgCreate(\"g\");\n\n      annotationBoxHeight = element.height;\n\n      let textPathData = pathMap.getScaledPath(\"TEXT_ANNOTATION\", {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.0,\n          my: 0.0,\n        },\n      });\n\n      let path = (self.path = svgCreate(\"path\"));\n\n      svgAttr(path, {\n        d: textPathData,\n        strokeWidth: 2,\n        stroke: getStrokeColor(element),\n      });\n\n      svgAppend(gfx, path);\n\n      svgAppend(defaultLayer, gfx);\n\n      translate(gfx, element.x, element.y);\n    }\n\n    if (is(element, ElementTypes.TEXTANNOTATION) || element.labelTarget) {\n      canvas.addMarker(element, MARKER_HIDDEN);\n    } else if (\n      element.type.includes(ElementTypes.ACTOR) ||\n      element.type.includes(ElementTypes.WORKOBJECT) ||\n      element.type.includes(ElementTypes.ACTIVITY) ||\n      element.type.includes(ElementTypes.GROUP)\n    ) {\n      canvas.addMarker(element, MARKER_LABEL_HIDDEN);\n    }\n  });\n\n  eventBus.on(\"directEditing.resize\", function (context) {\n    // text annotation\n    if (is(element, ElementTypes.TEXTANNOTATION)) {\n      let height = context.height,\n        dy = context.dy;\n\n      let newElementHeight = Math.max(\n        (element.height / absoluteElementBBox.height) * (height + dy),\n        0,\n      );\n      annotationBoxHeight = newElementHeight;\n\n      let textPathData = pathMap.getScaledPath(\"TEXT_ANNOTATION\", {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: newElementHeight,\n        position: {\n          mx: 0.0,\n          my: 0.0,\n        },\n      });\n\n      svgAttr(self.path, {\n        d: textPathData,\n      });\n    }\n  });\n\n  eventBus.on(\n    [\"directEditing.complete\", \"directEditing.cancel\"],\n    function (context) {\n      let activeProvider = context.active;\n\n      if (activeProvider) {\n        canvas.removeMarker(\n          activeProvider.element.label || activeProvider.element,\n          MARKER_HIDDEN,\n        );\n        canvas.removeMarker(element, MARKER_LABEL_HIDDEN);\n      }\n\n      element = undefined;\n      absoluteElementBBox = undefined;\n\n      if (gfx) {\n        svgRemove(gfx);\n\n        gfx = undefined;\n      }\n    },\n  );\n}\n\nDSLabelEditingPreview.$inject = [\"eventBus\", \"canvas\", \"pathMap\"];\n\n// helpers ///////////////////\n\nfunction getStrokeColor() {\n  return \"black\";\n}\n","\"use strict\";\n\nimport { assign } from \"min-dash\";\n\nimport { autocomplete, getLabel } from \"./dsLabelUtil\";\n\nimport { isAny } from \"bpmn-js/lib/features/modeling/util/ModelingUtil\";\n\nimport {\n  getExternalLabelMid,\n  hasExternalLabel,\n  isLabel,\n  isLabelExternal,\n} from \"bpmn-js/lib/util/LabelUtil\";\n\nimport { ElementTypes } from \"src/app/domain/entities/elementTypes\";\nimport { is } from \"../util\";\n\nlet dictionaryService;\n\nlet numberStash = 0;\nlet stashUse = false;\n\nexport function initializeLabelEditingProvider(labelingDictionary) {\n  dictionaryService = labelingDictionary;\n}\n\nexport function getNumberStash() {\n  let number = { use: stashUse, number: numberStash };\n  stashUse = false;\n  return number;\n}\n\nexport function toggleStashUse(use) {\n  stashUse = use;\n}\n\nexport function focusElement(element) {\n  // Opening a Angular Dialog seems to mess with the focus logic somehow.\n  // My guess is that is makes the mousedown event passive, which prevents \"preventDefault\" from intercepting.\n  // I am not sure how to fix it, but this seems to be a workaround.\n  setTimeout(() => element.focus(), 0);\n}\n\nexport default function DSLabelEditingProvider(\n  eventBus,\n  canvas,\n  directEditing,\n  modeling,\n  resizeHandles,\n  textRenderer,\n  updateLabelHandler,\n) {\n  this._canvas = canvas;\n  this._modeling = modeling;\n  this._textRenderer = textRenderer;\n  this._updateLabelHandler = updateLabelHandler;\n\n  directEditing.registerProvider(this);\n\n  // listen to dblclick on non-root elements\n  eventBus.on(\"element.dblclick\", function (event) {\n    activateDirectEdit(event.element, true);\n    if (is(event.element, ElementTypes.ACTIVITY)) {\n      // if we edit an activity, we do not want the standard editing box\n      numberStash = event.element.businessObject.number;\n      stashUse = true;\n      directEditing.complete();\n    }\n  });\n\n  // complete on followup canvas operation\n  eventBus.on(\n    [\n      \"element.mousedown\",\n      \"drag.init\",\n      \"canvas.viewbox.changing\",\n      \"autoPlace\",\n      \"popupMenu.open\",\n    ],\n    function () {\n      if (directEditing.isActive()) {\n        directEditing.complete();\n      }\n    },\n  );\n\n  // cancel on command stack changes\n  eventBus.on([\"commandStack.changed\"], function () {\n    if (directEditing.isActive()) {\n      directEditing.cancel();\n    }\n  });\n\n  eventBus.on(\"directEditing.activate\", function (event) {\n    resizeHandles.removeResizers();\n    let element = event.active.element;\n    createAutocomplete(element);\n  });\n\n  eventBus.on(\"create.end\", 500, function (event) {\n    let element = event.shape,\n      canExecute = event.context.canExecute,\n      isTouch = event.isTouch;\n\n    if (isTouch) {\n      return;\n    }\n\n    if (!canExecute) {\n      return;\n    }\n    if (!is(element, ElementTypes.ACTIVITY)) {\n      activateDirectEdit(element);\n    }\n    let editingBox = document.getElementsByClassName(\n      \"djs-direct-editing-content\",\n    );\n    focusElement(editingBox.item(0));\n  });\n\n  eventBus.on(\"autoPlace.end\", 500, function (event) {\n    activateDirectEdit(event.shape);\n  });\n\n  function activateDirectEdit(element, force) {\n    if (\n      force ||\n      isAny(element, [ElementTypes.TEXTANNOTATION]) ||\n      element.businessObject.type.includes(ElementTypes.DOMAINSTORY)\n    ) {\n      directEditing.activate(element);\n    }\n  }\n\n  function createAutocomplete(element) {\n    let editingBox = document.getElementsByClassName(\n      \"djs-direct-editing-content\",\n    );\n    focusElement(editingBox.item(0));\n    autocomplete(\n      editingBox[0],\n      dictionaryService.getUniqueWorkObjectNames(),\n      element,\n      eventBus,\n    );\n  }\n}\n\nDSLabelEditingProvider.$inject = [\n  \"eventBus\",\n  \"canvas\",\n  \"directEditing\",\n  \"modeling\",\n  \"resizeHandles\",\n  \"textRenderer\",\n  \"updateLabelHandler\",\n];\n\n/**\n * activate direct editing for activities and text annotations.\n *\n * @param  {djs.model.Base} element\n *\n * @return {Object} an object with properties bounds (position and size), text and options\n */\nDSLabelEditingProvider.prototype.activate = function (element) {\n  // text\n  if (element.id === \"__implicitrootbase\") {\n    return;\n  }\n  let text = getLabel(element);\n\n  if (text === undefined) {\n    return;\n  }\n\n  let context = {\n    text: text,\n  };\n\n  // bounds\n  let bounds = this.getEditingBBox(element);\n\n  assign(context, bounds);\n\n  let options = {};\n\n  // external labels\n  if (isLabelExternal(element)) {\n    assign(options, {\n      autoResize: true,\n    });\n  }\n\n  // text annotations\n  if (is(element, ElementTypes.TEXTANNOTATION)) {\n    assign(options, {\n      resizable: true,\n      autoResize: true,\n    });\n  }\n\n  assign(context, {\n    options: options,\n  });\n\n  return context;\n};\n\n/**\n * get the editing bounding box based on the element's size and position\n *\n * @param  {djs.model.Base} element\n *\n * @return {Object} an object containing information about position\n *                  and size (fixed or minimum and/or maximum)\n */\nDSLabelEditingProvider.prototype.getEditingBBox = function (element) {\n  let canvas = this._canvas;\n\n  let target = element.label || element;\n\n  let bbox = canvas.getAbsoluteBBox(target);\n\n  let mid = {\n    x: bbox.x + bbox.width / 2,\n    y: bbox.y + bbox.height / 2,\n  };\n\n  // default position\n  let bounds = { x: bbox.x, y: bbox.y };\n\n  /** The cavnas is an Object from BPMN, the IDE might say, that zoom is deprecated,\n   * because it thinks canvas is the standard HTMLElement. -> Needs to stay toom **/\n  let zoom = canvas.zoom();\n  let defaultStyle = this._textRenderer.getDefaultStyle(),\n    externalStyle = this._textRenderer.getExternalStyle();\n\n  // take zoom into account\n  let externalFontSize = externalStyle.fontSize * zoom,\n    externalLineHeight = externalStyle.lineHeight,\n    defaultFontSize = defaultStyle.fontSize * zoom,\n    defaultLineHeight = defaultStyle.lineHeight;\n\n  let style = {\n    fontFamily: this._textRenderer.getDefaultStyle().fontFamily,\n    fontWeight: this._textRenderer.getDefaultStyle().fontWeight,\n  };\n\n  // adjust for groups\n  if (is(element, ElementTypes.GROUP)) {\n    assign(bounds, {\n      minWidth: bbox.width / 2.5 > 125 ? bbox.width / 2.5 : 125,\n      maxWidth: bbox.width,\n      minHeight: 30 * zoom,\n      x: bbox.x,\n      y: bbox.y,\n    });\n\n    assign(style, {\n      fontSize: defaultFontSize + \"px\",\n      lineHeight: defaultLineHeight,\n      paddingTop: 7 * zoom + \"px\",\n      paddingBottom: 7 * zoom + \"px\",\n      paddingLeft: 5 * zoom + \"px\",\n      paddingRight: 5 * zoom + \"px\",\n      textAlign: \"left\",\n    });\n  }\n\n  // internal labels for tasks and collapsed call activities,\n  // sub processes and participants\n  if (\n    /^domainStory:actor\\w*/.test(element.type) ||\n    /^domainStory:workObject\\w*/.test(element.type)\n  ) {\n    assign(bounds, {\n      width: bbox.width,\n      minHeight: 30,\n      y: bbox.y + bbox.height - 20,\n      x: bbox.x,\n    });\n\n    assign(style, {\n      fontSize: defaultFontSize + \"px\",\n      lineHeight: defaultLineHeight,\n      paddingTop: 7 * zoom + \"px\",\n      paddingBottom: 7 * zoom + \"px\",\n      paddingLeft: 5 * zoom + \"px\",\n      paddingRight: 5 * zoom + \"px\",\n    });\n  }\n\n  let width = 90 * zoom,\n    paddingTop = 7 * zoom,\n    paddingBottom = 4 * zoom;\n\n  // external labels for events, data elements, gateways and connections\n  if (target.labelTarget) {\n    assign(bounds, {\n      width: width,\n      height: bbox.height + paddingTop + paddingBottom,\n      x: mid.x - width / 2,\n      y: bbox.y - paddingTop,\n    });\n\n    assign(style, {\n      fontSize: externalFontSize + \"px\",\n      lineHeight: externalLineHeight,\n      paddingTop: paddingTop + \"px\",\n      paddingBottom: paddingBottom + \"px\",\n    });\n  }\n\n  // external label not yet created\n  if (\n    isLabelExternal(target) &&\n    !hasExternalLabel(target) &&\n    !isLabel(target)\n  ) {\n    let externalLabelMid = getExternalLabelMid(element);\n\n    let absoluteBBox = canvas.getAbsoluteBBox({\n      x: externalLabelMid.x,\n      y: externalLabelMid.y,\n      width: 0,\n      height: 0,\n    });\n\n    let height = externalFontSize + paddingTop + paddingBottom;\n\n    assign(bounds, {\n      width: width,\n      height: height,\n      x: absoluteBBox.x - width / 2,\n      y: absoluteBBox.y - height / 2,\n    });\n\n    assign(style, {\n      fontSize: externalFontSize + \"px\",\n      lineHeight: externalLineHeight,\n      paddingTop: paddingTop + \"px\",\n      paddingBottom: paddingBottom + \"px\",\n    });\n  }\n\n  // text annotations\n  if (is(element, ElementTypes.TEXTANNOTATION)) {\n    assign(bounds, {\n      width: bbox.width,\n      height: bbox.height,\n      minWidth: 30 * zoom,\n      minHeight: 10 * zoom,\n    });\n\n    assign(style, {\n      textAlign: \"left\",\n      paddingTop: 7 * zoom + \"px\",\n      paddingBottom: 7 * zoom + \"px\",\n      paddingLeft: 5 * zoom + \"px\",\n      paddingRight: 5 * zoom + \"px\",\n      fontSize: defaultFontSize + \"px\",\n      lineHeight: defaultLineHeight,\n    });\n  }\n\n  return { bounds: bounds, style: style };\n};\n\nDSLabelEditingProvider.prototype.update = function (\n  element,\n  newLabel,\n  activeContextText,\n  bounds,\n) {\n  let newBounds, bbox;\n\n  if (is(element, ElementTypes.TEXTANNOTATION)) {\n    bbox = this._canvas.getAbsoluteBBox(element);\n\n    newBounds = {\n      x: element.x,\n      y: element.y,\n      width: (element.width / bbox.width) * bounds.width,\n      height: (element.height / bbox.height) * bounds.height,\n    };\n  }\n\n  this._modeling.updateLabel(element, newLabel, newBounds);\n};\n","\"use strict\";\n\nimport { ElementTypes } from \"src/app/domain/entities/elementTypes\";\nimport { is } from \"../util\";\n\nfunction getLabelAttr(semantic) {\n  if (\n    semantic.type.includes(ElementTypes.ACTOR) ||\n    semantic.type.includes(ElementTypes.WORKOBJECT) ||\n    semantic.type.includes(ElementTypes.ACTIVITY) ||\n    semantic.type.includes(ElementTypes.GROUP)\n  ) {\n    return \"name\";\n  }\n\n  if (is(semantic, ElementTypes.TEXTANNOTATION)) {\n    return \"text\";\n  }\n}\n\nfunction getNumberAttr(semantic) {\n  if (is(semantic, ElementTypes.ACTIVITY)) {\n    return \"number\";\n  }\n}\n\nexport function getLabel(element) {\n  let semantic;\n  if (element.businessObject) {\n    semantic = element.businessObject;\n  } else {\n    semantic = element;\n  }\n  let attr = getLabelAttr(semantic);\n  if (attr && semantic) {\n    return semantic[attr] || \"\";\n  }\n}\n\nexport function getNumber(element) {\n  let semantic = element.businessObject,\n    attr = getNumberAttr(semantic);\n\n  if (attr) {\n    return semantic[attr] || \"\";\n  }\n}\n\nexport function setLabel(element, text) {\n  let semantic;\n  if (element.businessObject) {\n    semantic = element.businessObject;\n  } else {\n    semantic = element;\n  }\n  let attr = getLabelAttr(semantic);\n\n  if (attr) {\n    semantic[attr] = text;\n  }\n  return element;\n}\n\nexport function setNumber(element, textNumber) {\n  let semantic = element.businessObject,\n    attr = getNumberAttr(semantic);\n\n  if (attr) {\n    semantic[attr] = textNumber;\n  }\n\n  return element;\n}\n\n// select at which part of the activity the label should be attached to\nexport function selectPartOfActivity(waypoints, angleActivity) {\n  let selectedActivity = 0;\n  let linelength = 49;\n\n  for (let i = 0; i < waypoints.length; i++) {\n    if (angleActivity[i] === 0 || angleActivity[i] === 180) {\n      let length = Math.abs(waypoints[i].x - waypoints[i + 1].x);\n      if (length > linelength) {\n        selectedActivity = i;\n      }\n    }\n  }\n  return selectedActivity;\n}\n\n// approximate the width of the label text, standard fontsize: 11\nexport function calculateTextWidth(text) {\n  if (!text) {\n    return 0;\n  }\n\n  let fontsize = text.length * 5.1;\n  fontsize = fontsize / 2;\n\n  // add an initial offset to the absolute middle of the activity\n  fontsize += 20;\n  return fontsize;\n}\n\n/**\n * copied from https://www.w3schools.com/howto/howto_js_autocomplete.asp on 18.09.2018\n */\nexport function autocomplete(input, workObjectNames, element, eventBus) {\n  closeAllLists();\n\n  /* the autocomplete function takes three arguments,\n  the text field element and an array of possible autocompleted values and an optional element to which it is appended:*/\n  let currentFocus, filteredWorkObjectNames;\n\n  /* execute a function when someone writes in the text field:*/\n  input.addEventListener(\"input\", function () {\n    if (workObjectNames.length === 0) {\n      return;\n    }\n\n    /* the direct editing field of actors and workobjects is a recycled html-element and has old values that need to be overridden*/\n    if (element.type.includes(ElementTypes.WORKOBJECT)) {\n      this.value = this.innerHTML;\n    }\n    let autocompleteList,\n      autocompleteItem,\n      val = this.value;\n\n    /* close any already open lists of autocompleted values*/\n    closeAllLists();\n    currentFocus = -1;\n\n    /* create a DIV element that will contain the items (values):*/\n    autocompleteList = document.createElement(\"DIV\");\n    autocompleteList.setAttribute(\"id\", \"autocomplete-list\");\n    autocompleteList.setAttribute(\"class\", \"autocomplete-items\");\n\n    /* append the DIV element as a child of the autocomplete container:*/\n    this.parentNode.appendChild(autocompleteList);\n\n    /* for each item in the array...*/\n    filteredWorkObjectNames = [];\n    for (const name of workObjectNames) {\n      /* check if the item starts with the same letters as the text field value:*/\n      if (val) {\n        if (name.substring(0, val.length).toUpperCase() === val.toUpperCase()) {\n          /* create a DIV element for each matching element:*/\n          autocompleteItem = document.createElement(\"DIV\");\n\n          /* make the matching letters bold:*/\n          autocompleteItem.innerHTML =\n            \"<strong>\" +\n            name.substring(0, val.length) +\n            \"</strong>\" +\n            name.substring(val.length);\n\n          /* insert an input field that will hold the current name:*/\n          autocompleteItem.innerHTML +=\n            \"<input type='hidden' value='\" + name + \"'>\";\n          autocompleteList.appendChild(autocompleteItem);\n\n          filteredWorkObjectNames.push(name);\n        }\n      }\n    }\n\n    // if we edit an actor, we do not want auto-complete, since actors generally are unique\n    if (element.type.includes(ElementTypes.ACTOR)) {\n      autocompleteList.style.visibility = \"hidden\";\n    }\n  });\n\n  /* execute a function presses a key on the keyboard:*/\n  input.onkeydown = function (e) {\n    let autocompleteList = document.getElementById(\"autocomplete-list\");\n    if (autocompleteList) {\n      autocompleteList = autocompleteList.getElementsByTagName(\"div\");\n    }\n    if (e.keyCode === 40) {\n      /* If the arrow DOWN key is pressed,\n        increase the currentFocus letiable:*/\n      currentFocus++;\n\n      /* and and make the current item more visible:*/\n      addActive(autocompleteList);\n    } else if (e.keyCode === 38) {\n      // up\n      /* If the arrow UP key is pressed,\n        decrease the currentFocus letiable:*/\n      currentFocus--;\n\n      /* and and make the current item more visible:*/\n      addActive(autocompleteList);\n    } else if (e.keyCode === 13) {\n      e.preventDefault();\n      /* If the ENTER key is pressed, prevent the form from being submitted,*/\n      if (currentFocus > -1) {\n        element.businessObject.name = filteredWorkObjectNames[currentFocus];\n        eventBus.fire(\"element.changed\", { element });\n      }\n    }\n  };\n\n  function addActive(autocompleteList) {\n    /* a function to classify an item as \"active\":*/\n    if (!autocompleteList || autocompleteList.length < 1) return false;\n\n    /* start by removing the \"active\" class on all items:*/\n    removeActive(autocompleteList);\n    if (currentFocus >= autocompleteList.length) currentFocus = 0;\n    if (currentFocus < 0) currentFocus = autocompleteList.length - 1;\n\n    /* add class \"autocomplete-active\":*/\n    autocompleteList[currentFocus].classList.add(\"autocomplete-active\");\n  }\n\n  function removeActive(autocompleteList) {\n    /* a function to remove the \"active\" class from all autocomplete items:*/\n    if (autocompleteList.length > 1) {\n      for (const item of autocompleteList) {\n        item.classList.remove(\"autocomplete-active\");\n      }\n    }\n  }\n\n  function closeAllLists(survivor) {\n    /* close all autocomplete lists in the document,\n    except the one passed as an argument:*/\n    let autocompleteList =\n      document.getElementsByClassName(\"autocomplete-items\");\n    for (const item of autocompleteList) {\n      if (survivor != item && survivor != input) {\n        item.parentNode.removeChild(item);\n      }\n    }\n  }\n\n  /* execute a function when someone clicks in the document:*/\n  document.addEventListener(\"click\", function (e) {\n    closeAllLists(e.target);\n  });\n}\n","\"use strict\";\n\nimport ChangeSupportModule from \"diagram-js/lib/features/change-support\";\nimport ResizeModule from \"diagram-js/lib/features/resize\";\nimport DirectEditingModule from \"diagram-js-direct-editing\";\n\nimport CommandStack from \"diagram-js/lib/command/CommandStack\";\nimport UpdateLabelHandler from \"../updateHandler/updateLabelHandler\";\nimport DSLabelEditingPreview from \"./dsLabelEditingPreview\";\nimport DSLabelEditingProvider from \"./dsLabelEditingProvider\";\nimport DSModeling from \"../modeling/dSModeling\";\n\nexport default {\n  __depends__: [ChangeSupportModule, ResizeModule, DirectEditingModule],\n  __init__: [\"dSlabelEditingProvider\", \"dSlabelEditingPreview\"],\n  dSlabelEditingProvider: [\"type\", DSLabelEditingProvider],\n  dSlabelEditingPreview: [\"type\", DSLabelEditingPreview],\n  updateLabelHandler: [\"type\", UpdateLabelHandler],\n  commandStack: [\"type\", CommandStack],\n  modeling: [\"type \", DSModeling],\n};\n","\"use strict\";\n\nimport { selectPartOfActivity } from \"./dsLabelUtil\";\nimport { angleBetween } from \"src/app/utils/mathExtensions\";\n\nexport function countLines(str) {\n  return str.split(/\\r\\n|\\r|\\n/).length;\n}\n\n// determine the position of the label at the activity\nexport function labelPosition(waypoints, lines = 1) {\n  let amountWaypoints = waypoints.length;\n  let determinedPosition;\n  let xPos;\n  let yPos;\n\n  if (amountWaypoints > 2) {\n    let angleActivity = new Array(amountWaypoints - 1);\n    for (let i = 0; i < amountWaypoints - 1; i++) {\n      // calculate the angles of the activities\n      angleActivity[i] = angleBetween(waypoints[i], waypoints[i + 1]);\n    }\n\n    let selectedActivity = selectPartOfActivity(waypoints, angleActivity);\n\n    xPos = labelPositionX(\n      waypoints[selectedActivity],\n      waypoints[selectedActivity + 1],\n    );\n    yPos = labelPositionY(\n      waypoints[selectedActivity],\n      waypoints[selectedActivity + 1],\n      lines,\n    );\n\n    determinedPosition = {\n      x: xPos,\n      y: yPos,\n      selected: selectedActivity,\n    };\n\n    return determinedPosition;\n  } else {\n    xPos = labelPositionX(waypoints[0], waypoints[1]);\n    yPos = labelPositionY(waypoints[0], waypoints[1], lines);\n\n    determinedPosition = {\n      x: xPos,\n      y: yPos,\n      selected: 0,\n    };\n\n    return determinedPosition;\n  }\n}\n\n// calculate the X position of the label\nexport function labelPositionX(startPoint, endPoint) {\n  let angle = angleBetween(startPoint, endPoint);\n  let offsetX = 0;\n  let scaledAngle = 0;\n  if (angle === 0 || angle === 180 || angle === 90 || angle === 270) {\n    offsetX = 0;\n  } else if (angle > 0 && angle < 90) {\n    // endpoint in upper right quadrant\n    offsetX = 5 - angle / 6;\n  } else if (angle > 90 && angle < 180) {\n    // endpoint in upper left quadrant\n    scaledAngle = angle - 90;\n    offsetX = 5 - scaledAngle / 18;\n  } else if (angle > 180 && angle < 270) {\n    // endpoint in lower left quadrant\n    scaledAngle = angle - 180;\n    offsetX = scaledAngle / 18;\n  } else if (angle > 270) {\n    // endpoint in lower right quadrant\n    scaledAngle = angle - 270;\n    offsetX = 5 - scaledAngle / 6;\n  }\n  return offsetX + (startPoint.x + endPoint.x) / 2;\n}\n\n// calculate the Y position of the label\nexport function labelPositionY(startPoint, endPoint, lines = 1) {\n  let angle = angleBetween(startPoint, endPoint);\n  let offsetY = 0;\n  let scaledAngle = 0;\n\n  if (angle === 0 || angle === 180) {\n    offsetY = 15;\n  } else if (angle === 90 || angle === 270) {\n    offsetY = 0;\n  } else if (angle > 0 && angle < 90) {\n    // endpoint in upper right quadrant\n    offsetY = 15 - angle / 6;\n  } else if (angle > 90 && angle < 180) {\n    // endpoint in upper left quadrant\n    scaledAngle = angle - 90;\n    offsetY = (-scaledAngle / 9) * lines;\n  } else if (angle > 180 && angle < 270) {\n    // endpoint in lower left quadrant\n    scaledAngle = angle - 180;\n    offsetY = 15 - scaledAngle / 3;\n  } else if (angle > 270) {\n    // endpoint in lower right quadrant\n    scaledAngle = angle - 270;\n    offsetY = (-scaledAngle / 9) * lines;\n  }\n  return offsetY + (startPoint.y + endPoint.y) / 2;\n}\n","\"use strict\";\n\nimport Modeling from \"bpmn-js/lib/features/modeling/Modeling\";\n\nimport { inherits } from \"util\";\n\nexport default function DSModeling(\n  eventBus,\n  elementFactory,\n  commandStack,\n  domainStoryRules,\n) {\n  Modeling.call(this, eventBus, elementFactory, commandStack, domainStoryRules);\n}\n\nModeling.prototype.updateLabel = function (element, newLabel, newBounds) {\n  if (\n    element.businessObject\n      ? newLabel !== element.businessObject.name\n      : newLabel !== element.name\n  ) {\n    if (/^domainStory:/.test(element.type)) {\n      this._commandStack.execute(\"element.updateCustomLabel\", {\n        element: element,\n        newLabel: newLabel,\n        newBounds: newBounds,\n      });\n    } else {\n      this._commandStack.execute(\"element.updateLabel\", {\n        element: element,\n        newLabel: newLabel,\n        newBounds: newBounds,\n      });\n    }\n  }\n};\n\nModeling.prototype.updateNumber = function (element, newNumber, newBounds) {\n  if (\n    element.businessObject\n      ? newNumber !== element.businessObject.number\n      : newNumber !== element.number\n  ) {\n    if (/^domainStory:/.test(element.type)) {\n      this._commandStack.execute(\"element.updateCustomLabel\", {\n        element: element,\n        newNumber: newNumber,\n        newBounds: newBounds,\n      });\n    } else {\n      this._commandStack.execute(\"element.updateLabel\", {\n        element: element,\n        newNumber: newNumber,\n        newBounds: newBounds,\n      });\n    }\n  }\n};\n\nModeling.prototype.replaceShape = function (oldShape, newShape, hints) {\n  let context = {\n    oldShape: oldShape,\n    newData: newShape,\n    hints: hints || {},\n  };\n\n  this._commandStack.execute(\"shape.replace\", context);\n  return context.newShape;\n};\n\nModeling.prototype.removeGroup = function (element) {\n  this._commandStack.execute(\"shape.removeGroupWithoutChildren\", {\n    element: element,\n  });\n  this.removeElements({ element });\n};\n\ninherits(DSModeling, Modeling);\n\nDSModeling.$inject = [\n  \"eventBus\",\n  \"elementFactory\",\n  \"commandStack\",\n  \"domainStoryRules\",\n];\n","\"use strict\";\n\nimport DomainStoryPalette from \"../palette/domainStoryPalette\";\nimport ElementFactory from \"bpmn-js/lib/features/modeling/ElementFactory\";\nimport CreateModule from \"diagram-js/lib/features/create\";\nimport PathMap from \"bpmn-js/lib/draw/PathMap\";\nimport PopupMenuModule from \"bpmn-js/lib/features/popup-menu\";\nimport ContextPadModule from \"diagram-js/lib/features/context-pad\";\nimport CommandStack from \"diagram-js/lib/command/CommandStack\";\nimport UpdateLabelHandler from \"../updateHandler/updateLabelHandler\";\nimport DomainStoryUpdater from \"../domainStoryUpdater\";\nimport DomainStoryElementFactory from \"../domainStoryElementFactory\";\nimport headlineAndDescriptionUpdateHandler from \"../updateHandler/headlineAndDescriptionUpdateHandler\";\nimport DomainStoryRenderer from \"../domainStoryRenderer\";\nimport DSModeling from \"./dSModeling\";\nimport DomainStoryRules from \"../domainStoryRules\";\nimport ReplaceMenuProvider from \"../change-icon/replaceMenuProvider\";\nimport DomainStoryContextPadProvider from \"../context-pad/domainStoryContextPadProvider\";\n\nexport default {\n  __depends__: [CreateModule, ContextPadModule, PopupMenuModule],\n  __init__: [\n    \"domainStoryRenderer\",\n    \"paletteProvider\",\n    \"domainStoryRules\",\n    \"domainStoryUpdater\",\n    \"contextPadProvider\",\n    \"replaceMenuProvider\",\n  ],\n  elementFactory: [\"type\", DomainStoryElementFactory],\n  domainStoryRenderer: [\"type\", DomainStoryRenderer],\n  paletteProvider: [\"type\", DomainStoryPalette],\n  domainStoryRules: [\"type\", DomainStoryRules],\n  domainStoryUpdater: [\"type\", DomainStoryUpdater],\n  contextPadProvider: [\"type\", DomainStoryContextPadProvider],\n  elementFactoryBpmn: [\"type\", ElementFactory],\n  pathMap: [\"type\", PathMap],\n  replaceMenuProvider: [\"type\", ReplaceMenuProvider],\n  commandStack: [\"type\", CommandStack],\n  updateLabelHandler: [\"type\", UpdateLabelHandler],\n  headlineAndDescriptionUpdateHandler: [\n    \"type\",\n    headlineAndDescriptionUpdateHandler,\n  ],\n  modeling: [\"type\", DSModeling],\n};\n","\"use strict\";\n\nimport { angleBetween } from \"src/app/utils/mathExtensions\";\n\nlet numberRegistry = [];\nlet multipleNumberRegistry = [false];\n\nlet canvasElementRegistry;\n\nexport function initializeNumbering(canvasElementRegistryService) {\n  canvasElementRegistry = canvasElementRegistryService;\n}\n\nexport function updateMultipleNumberRegistry(activityBusinessObjects) {\n  activityBusinessObjects.forEach(\n    (activity) =>\n      (multipleNumberRegistry[activity.number] =\n        activity.multipleNumberAllowed),\n  );\n}\n\n// defines the box for activity numbers\nexport function numberBoxDefinitions(element) {\n  let alignment = \"center\";\n  let boxWidth = 30;\n  let boxHeight = 30;\n  let angle = 0;\n  if (element.waypoints.length > 1) {\n    angle = angleBetween(\n      // Start of first arrow segment\n      element.waypoints[0],\n      // End of first arrow segment\n      element.waypoints[1],\n    );\n  }\n  let x = element.waypoints[0].x;\n  let y = element.waypoints[0].y;\n\n  let fixedOffsetX = 0;\n  let fixedOffsetY = 0;\n  let angleDependantOffsetX = 0;\n  let angleDependantOffsetY = 0;\n\n  // Fine tune positioning of sequence number above beginning of first arrow segment\n  if (angle >= 0 && angle <= 45) {\n    fixedOffsetX = 25;\n    angleDependantOffsetY = 20 * (1 - angle / 45);\n  } else if (angle <= 90) {\n    fixedOffsetX = 5;\n    angleDependantOffsetX = 15 * (1 - (angle - 45) / 45);\n  } else if (angle <= 135) {\n    fixedOffsetX = 5;\n    angleDependantOffsetX = -20 * ((angle - 90) / 45);\n  } else if (angle <= 180) {\n    fixedOffsetX = -15;\n    angleDependantOffsetY = 20 * ((angle - 135) / 45);\n  } else if (angle <= 225) {\n    fixedOffsetX = -15;\n    fixedOffsetY = 15;\n    angleDependantOffsetY = 25 * ((angle - 180) / 45);\n  } else if (angle <= 270) {\n    fixedOffsetX = 5;\n    angleDependantOffsetX = -20 * (1 - (angle - 225) / 45);\n    fixedOffsetY = 40;\n  } else if (angle <= 315) {\n    fixedOffsetX = 5;\n    angleDependantOffsetX = 25 * ((angle - 270) / 45);\n    fixedOffsetY = 40;\n  } else {\n    fixedOffsetX = 25;\n    fixedOffsetY = 20;\n    angleDependantOffsetY = 15 * (1 - (angle - 315) / 45);\n  }\n\n  x = x + fixedOffsetX + angleDependantOffsetX;\n  y = y + fixedOffsetY + angleDependantOffsetY;\n\n  return {\n    textAlign: alignment,\n    width: boxWidth,\n    height: boxHeight,\n    x: x,\n    y: y,\n  };\n}\n\n// determine the next available number that is not yet used\nexport function generateAutomaticNumber(elementActivity, commandStack) {\n  const semantic = elementActivity.businessObject;\n  const usedNumbers = [0];\n  let wantedNumber = -1;\n\n  const activitiesFromActors = canvasElementRegistry.getActivitiesFromActors();\n\n  activitiesFromActors.forEach((element) => {\n    if (element.businessObject.number) {\n      usedNumbers.push(+element.businessObject.number);\n    }\n  });\n  for (let i = 0; i < usedNumbers.length; i++) {\n    if (!usedNumbers.includes(i)) {\n      if (!usedNumbers.includes(i)) {\n        wantedNumber = i;\n        i = usedNumbers.length;\n      }\n    }\n  }\n  if (wantedNumber === -1) {\n    wantedNumber = usedNumbers.length;\n  }\n\n  updateExistingNumbersAtGeneration(\n    activitiesFromActors,\n    wantedNumber,\n    commandStack,\n  );\n  semantic.number = wantedNumber;\n  return wantedNumber;\n}\n\n// update the numbers at the activities when generating a new activity\nexport function updateExistingNumbersAtGeneration(\n  activitiesFromActors,\n  wantedNumber,\n  commandStack,\n) {\n  activitiesFromActors.forEach((element) => {\n    let number = +element.businessObject.number;\n\n    if (number >= wantedNumber) {\n      wantedNumber++;\n      setTimeout(function () {\n        commandStack.execute(\"activity.changed\", {\n          businessObject: element.businessObject,\n          newLabel: element.businessObject.name,\n          newNumber: number,\n          element: element,\n        });\n      }, 10);\n    }\n  });\n}\n\n// update the numbers at the activities when editing an activity\nexport function updateExistingNumbersAtEditing(\n  activitiesFromActors,\n  wantedNumber,\n  eventBus,\n) {\n  // get a sorted list of all activities that could need changing\n  let sortedActivities = [[]];\n  activitiesFromActors.forEach((activity) => {\n    if (!sortedActivities[activity.businessObject.number]) {\n      sortedActivities[activity.businessObject.number] = [];\n    }\n    sortedActivities[activity.businessObject.number].push(activity);\n  });\n\n  // set the number of each activity to the next highest number, starting from the number, we overrode\n  let oldMultipleNumberRegistry = [...multipleNumberRegistry];\n  let currentNumber = wantedNumber;\n  for (\n    currentNumber;\n    currentNumber < sortedActivities.length;\n    currentNumber++\n  ) {\n    if (sortedActivities[currentNumber]) {\n      wantedNumber++;\n      multipleNumberRegistry[wantedNumber] =\n        oldMultipleNumberRegistry[currentNumber];\n      setNumberOfActivity(\n        sortedActivities[currentNumber],\n        wantedNumber,\n        eventBus,\n      );\n    }\n  }\n}\n\n// get the IDs of activities with their associated number, only returns activities that are originating from an actor\nexport function getNumbersAndIDs() {\n  let iDWithNumber = [];\n  let activities = canvasElementRegistry.getActivitiesFromActors();\n\n  for (let i = activities.length - 1; i >= 0; i--) {\n    let id = activities[i].businessObject.id;\n    let number = activities[i].businessObject.number;\n    iDWithNumber.push({ id: id, number: number });\n  }\n  return iDWithNumber;\n}\n\nexport function addNumberToRegistry(renderedNumber, number) {\n  numberRegistry[number] = renderedNumber;\n}\n\nexport function setNumberIsMultiple(number, multi) {\n  multipleNumberRegistry[number] = multi;\n}\n\n/**\n * @returns copy of registry\n */\nexport function getNumberRegistry() {\n  return numberRegistry.slice(0);\n}\n\nexport function getMultipleNumberRegistry() {\n  return multipleNumberRegistry.slice(0);\n}\n\nfunction setNumberOfActivity(elementArray, wantedNumber, eventBus) {\n  if (elementArray) {\n    elementArray.forEach((element) => {\n      if (element) {\n        let businessObject = element.businessObject;\n        if (businessObject) {\n          businessObject.number = wantedNumber;\n        }\n        eventBus.fire(\"element.changed\", { element });\n      }\n    });\n  }\n}\n","\"use strict\";\n\nimport { assign } from \"min-dash\";\nimport { overrideAppendedIcons } from \"src/app/tools/icon-set-config/domain/allIcons\";\nimport { Dictionary } from \"src/app/domain/entities/dictionary\";\nimport { ElementTypes } from \"src/app/domain/entities/elementTypes\";\nimport { APPENDED_ICONS_TAG } from \"src/app/domain/entities/constants\";\n\n/**\n * A palette that allows you to create BPMN _and_ custom elements.\n */\n\nlet iconDictionary;\nlet configuration;\n\nexport function initializePalette(iconDictionaryService, configurationService) {\n  iconDictionary = iconDictionaryService;\n  configuration = configurationService;\n}\n\nexport default function PaletteProvider(\n  palette,\n  create,\n  elementFactory,\n  spaceTool,\n  lassoTool,\n) {\n  this._create = create;\n  this._elementFactory = elementFactory;\n  this._spaceTool = spaceTool;\n  this._lassoTool = lassoTool;\n\n  palette.registerProvider(this);\n}\n\nPaletteProvider.$inject = [\n  \"palette\",\n  \"create\",\n  \"elementFactory\",\n  \"spaceTool\",\n  \"lassoTool\",\n  \"modeling\",\n];\n\nPaletteProvider.prototype.getPaletteEntries = function () {\n  let actions = {},\n    create = this._create,\n    elementFactory = this._elementFactory,\n    spaceTool = this._spaceTool,\n    lassoTool = this._lassoTool;\n\n  function createAction(type, group, className, title, options) {\n    function createListener(event) {\n      let shape = elementFactory.createShape(assign({ type: type }, options));\n\n      assign(shape.businessObject, {\n        id: shape.id,\n      });\n\n      if (options) {\n        shape.businessObject.di.isExpanded = options.isExpanded;\n      }\n\n      create.start(event, shape);\n    }\n\n    let shortType = type.replace(/^domainStory:/, \"\");\n\n    return {\n      group: group,\n      className: className,\n      title: \"Create \" + title || \"Create \" + shortType,\n      action: {\n        dragstart: createListener,\n        click: createListener,\n      },\n    };\n  }\n\n  return initPalette(actions, spaceTool, lassoTool, createAction);\n};\n\nfunction appendCSSStyleCheat(customIcons) {\n  const sheetEl = document.createElement(\"style\");\n  document.head.appendChild(sheetEl);\n\n  let customIconDict = new Dictionary();\n\n  customIconDict.appendDict(customIcons);\n  let customIconDictKeys = customIconDict.keysArray();\n\n  customIconDictKeys.forEach((name) => {\n    if (iconDictionary.getAppendedIconDictionary().has(name)) {\n      let src = customIconDict.get(name);\n\n      const iconStyle =\n        \".icon-domain-story-\" +\n        name.toLowerCase() +\n        \"::before{\" +\n        \" display: block;\" +\n        ' content: url(\"data:image/svg+xml;utf8,' +\n        wrapSRCInSVG(src) +\n        '\");' +\n        \" margin: 3px;}\";\n      sheetEl.sheet.insertRule(iconStyle, sheetEl.sheet.cssRules.length);\n    }\n  });\n}\n\nfunction initPalette(actions, spaceTool, lassoTool, createAction) {\n  let config = iconDictionary?.getCurrentIconConfigurationForBPMN();\n\n  let customIcons = localStorage.getItem(APPENDED_ICONS_TAG);\n\n  if (customIcons) {\n    customIcons = JSON.parse(customIcons);\n    if (customIconsLegacy(customIcons)) {\n      customIcons = convertLegacyAppendedIconsToDict(customIcons);\n    }\n    if (customIcons.entries && customIcons.entries.forEach) {\n      const customIconsDict = new Dictionary();\n      customIcons.entries.forEach((entry) => {\n        customIconsDict.putEntry(entry);\n      });\n      overrideAppendedIcons(customIconsDict);\n      appendCSSStyleCheat(customIcons);\n    }\n  }\n\n  iconDictionary?.initTypeDictionaries(config.actors, config.workObjects);\n\n  let actorTypes = iconDictionary?.getTypeDictionary(ElementTypes.ACTOR);\n\n  actorTypes?.keysArray().forEach((name) => {\n    addCanvasObjectTypes(\n      name,\n      createAction,\n      actions,\n      \"actor\",\n      ElementTypes.ACTOR,\n    );\n  });\n\n  assign(actions, {\n    \"actor-separator\": {\n      group: \"actor\",\n      separator: true,\n    },\n  });\n\n  let workObjectTypes = iconDictionary?.getTypeDictionary(\n    ElementTypes.WORKOBJECT,\n  );\n\n  workObjectTypes?.keysArray().forEach((name) => {\n    addCanvasObjectTypes(\n      name,\n      createAction,\n      actions,\n      \"actor\",\n      ElementTypes.WORKOBJECT,\n    );\n  });\n\n  assign(actions, {\n    \"workObject-separator\": {\n      group: \"workObject\",\n      separator: true,\n    },\n    \"domainStory-group\": createAction(\n      ElementTypes.GROUP,\n      \"group\",\n      \"icon-domain-story-tool-group\",\n      \"group\",\n    ),\n    \"group-separator\": {\n      group: \"group\",\n      separator: true,\n    },\n    \"lasso-tool\": {\n      group: \"tools\",\n      className: \"bpmn-icon-lasso-tool\",\n      title: \"Activate the lasso tool\",\n      action: {\n        click: function (event) {\n          lassoTool.activateSelection(event);\n        },\n      },\n    },\n    \"space-tool\": {\n      group: \"tools\",\n      className: \"bpmn-icon-space-tool\",\n      title: \"Activate the create/remove space tool\",\n      action: {\n        click: function (event) {\n          spaceTool.activateSelection(event);\n        },\n      },\n    },\n  });\n\n  return actions;\n}\n\nfunction addCanvasObjectTypes(\n  name,\n  createAction,\n  actions,\n  className,\n  elementType,\n) {\n  let icon = iconDictionary.getIconForBPMN(elementType, name);\n\n  let action = [];\n  action[\"domainStory-\" + className + name] = createAction(\n    `${elementType}${name}`,\n    className,\n    icon,\n    name,\n  );\n  assign(actions, action);\n}\n\nfunction customIconsLegacy(customIcons) {\n  return !(\n    Object.keys(customIcons).length === 1 &&\n    Object.keys(customIcons)[0] === \"entries\"\n  );\n}\n\nfunction convertLegacyAppendedIconsToDict(customIcons) {\n  let dict = new Dictionary();\n  Object.keys(customIcons).forEach((key) => {\n    dict.set(key, customIcons[key]);\n  });\n  return dict;\n}\n\n// For some reason its important to use ' in the content for the Palette and ContextPad\n// Do not change!\nfunction wrapSRCInSVG(src) {\n  return (\n    \"<svg viewBox='0 0 22 22' width='22' height='22' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>\" +\n    \"<image width='22' height='22' xlink:href='\" +\n    src +\n    \"'/></svg>\"\n  );\n}\n","\"use strict\";\n\nimport { getNumbersAndIDs } from \"../numbering/numbering\";\n\n/**\n * commandStack Handler for changes at activities\n */\n\nlet canvasElementRegistry;\nexport function initializeActivityUpdateHandler(canvasElementRegistryService) {\n  canvasElementRegistry = canvasElementRegistryService;\n}\n\nexport default function activityUpdateHandler(commandStack, eventBus) {\n  commandStack.registerHandler(\n    \"activity.directionChange\",\n    activity_directionChange,\n  );\n  commandStack.registerHandler(\"activity.changed\", activity_changed);\n\n  // update the activity from the activity-dialog, either with or without number\n  // and change other activities too, to keep the numbers consistent\n  function activity_changed(modeling) {\n    this.preExecute = function (context) {\n      context.oldLabel = context.businessObject.name || \" \";\n\n      let oldNumbersWithIDs = getNumbersAndIDs();\n      modeling.updateLabel(context.businessObject, context.newLabel);\n      modeling.updateNumber(context.businessObject, context.newNumber);\n\n      context.oldNumber = context.businessObject.number;\n      context.oldNumbersWithIDs = oldNumbersWithIDs;\n    };\n\n    this.execute = function (context) {\n      let businessObject = context.businessObject;\n      let element = context.element;\n\n      if (context.newLabel && context.newLabel.length < 1) {\n        context.newLabel = \" \";\n      }\n\n      businessObject.name = context.newLabel;\n      businessObject.number = context.newNumber;\n\n      eventBus.fire(\"element.changed\", { element });\n    };\n\n    this.revert = function (context) {\n      let semantic = context.businessObject;\n      let element = context.element;\n      semantic.name = context.oldLabel;\n      semantic.number = context.oldNumber;\n\n      revertAutomaticNumberGenerationChange(\n        context.oldNumbersWithIDs,\n        eventBus,\n      );\n\n      eventBus.fire(\"element.changed\", { element });\n    };\n  }\n\n  // change the direction of a single activity without affecting other activities\n  function activity_directionChange(modeling) {\n    this.preExecute = function (context) {\n      context.oldNumber = context.businessObject.number;\n      context.oldWaypoints = context.element.waypoints;\n      context.name = context.businessObject.name;\n\n      if (!context.oldNumber) {\n        context.oldNumber = 0;\n      }\n      modeling.updateNumber(context.businessObject, context.newNumber);\n    };\n\n    this.execute = function (context) {\n      let businessObject = context.businessObject;\n      let element = context.element;\n      let swapSource = element.source;\n      let newWaypoints = [];\n      let waypoints = element.waypoints;\n\n      for (let i = waypoints.length - 1; i >= 0; i--) {\n        newWaypoints.push(waypoints[i]);\n      }\n\n      element.source = element.target;\n      businessObject.source = businessObject.target;\n      element.target = swapSource;\n      businessObject.target = swapSource.id;\n\n      businessObject.name = context.name;\n      businessObject.number = context.newNumber;\n      element.waypoints = newWaypoints;\n\n      eventBus.fire(\"element.changed\", { element });\n    };\n\n    this.revert = function (context) {\n      let semantic = context.businessObject;\n      let element = context.element;\n      let swapSource = element.source;\n\n      element.source = element.target;\n      semantic.source = semantic.target;\n      element.target = swapSource;\n      semantic.target = swapSource.id;\n\n      semantic.name = context.name;\n\n      semantic.number = context.oldNumber;\n      element.waypoints = context.oldWaypoints;\n\n      eventBus.fire(\"element.changed\", { element });\n    };\n  }\n}\n\n// reverts the automatic changed done by the automatic number-generation at editing\nfunction revertAutomaticNumberGenerationChange(iDWithNumber, eventBus) {\n  let activities = canvasElementRegistry?.getActivitesFromActors();\n  for (let i = activities.length - 1; i >= 0; i--) {\n    for (let j = iDWithNumber.length - 1; j >= 0; j--) {\n      if (iDWithNumber[j].id.includes(activities[i].businessObject.id)) {\n        let element = activities[i];\n        element.businessObject.number = iDWithNumber[j].number;\n        j = -5;\n        eventBus.fire(\"element.changed\", { element });\n        iDWithNumber.splice(j, 1);\n      }\n    }\n  }\n}\n","\"use strict\";\n\nimport { undoGroupRework } from \"../util\";\n\nexport default function elementUpdateHandler(commandStack, eventBus) {\n  commandStack.registerHandler(\"element.colorChange\", element_colorChange);\n  commandStack.registerHandler(\n    \"shape.removeGroupWithoutChildren\",\n    removeGroupWithoutChildren,\n  );\n\n  function element_colorChange() {\n    this.preExecute = function (context) {\n      context.oldColor = context.businessObject.pickedColor;\n    };\n\n    this.execute = function (context) {\n      let semantic = context.businessObject;\n      let element = context.element;\n\n      semantic.pickedColor = context.newColor;\n\n      eventBus.fire(\"element.changed\", { element });\n    };\n\n    this.revert = function (context) {\n      let semantic = context.businessObject;\n      let element = context.element;\n\n      semantic.pickedColor = context.oldColor;\n\n      eventBus.fire(\"element.changed\", { element });\n    };\n  }\n\n  function removeGroupWithoutChildren() {\n    this.preExecute = function (ctx) {\n      ctx.parent = ctx.element.parent;\n      ctx.children = ctx.element.children.slice();\n    };\n\n    this.execute = function (ctx) {\n      let element = ctx.element;\n      ctx.children.forEach((child) => {\n        undoGroupRework(element, child);\n        eventBus.fire(\"element.changed\", { element: child });\n      });\n      eventBus.fire(\"shape.remove\", { element });\n    };\n\n    this.revert = function (ctx) {\n      let element = ctx.element;\n      eventBus.fire(\"shape.added\", { element });\n\n      ctx.element.children.forEach((child) => {\n        reworkGroupElements(element, child);\n      });\n    };\n  }\n}\n","/**\n * a handler that updates the text of a BPMN element.\n */\nexport default function headlineAndDescriptionUpdateHandler(\n  commandStack,\n  titleService,\n) {\n  commandStack.registerHandler(\n    \"story.updateHeadlineAndDescription\",\n    handlerFunction,\n  );\n\n  function handlerFunction() {\n    this.execute = function (ctx) {\n      ctx.oldTitle = titleService.getTitle();\n      ctx.oldDescription = titleService.getDescription();\n\n      titleService.updateTitleAndDescription(\n        ctx.newTitle,\n        ctx.newDescription,\n        false,\n      );\n    };\n\n    this.revert = function (ctx) {\n      titleService.updateTitleAndDescription(\n        ctx.oldTitle,\n        ctx.oldDescription,\n        false,\n      );\n    };\n  }\n}\n","\"use strict\";\n\nexport default function DSMassRenameHandler(commandStack, eventBus) {\n  commandStack.registerHandler(\"domainStoryObjects.massRename\", massRename);\n\n  function massRename(modeling) {\n    this.preExecute = function (context) {\n      let relevantElements = context.elements;\n\n      context.oldLabel = relevantElements[0].businessObject.name;\n\n      relevantElements.forEach((element) => {\n        modeling.updateLabel(element.businessObject, confirm.newValue);\n      });\n    };\n\n    this.execute = function (context) {\n      let relevantElements = context.elements;\n      relevantElements.forEach((element) => {\n        let semantic = element.businessObject;\n        semantic.name = context.newValue;\n\n        eventBus.fire(\"element.changed\", { element });\n      });\n    };\n\n    this.revert = function (context) {\n      let relevantElements = context.elements;\n      relevantElements.forEach((element) => {\n        let semantic = element.businessObject;\n        semantic.name = context.oldLabel;\n\n        eventBus.fire(\"element.changed\", { element });\n      });\n    };\n  }\n}\n","\"use strict\";\n\nimport {\n  setLabel,\n  getLabel,\n  setNumber,\n  getNumber,\n} from \"../labeling/dsLabelUtil\";\n\nimport {\n  getExternalLabelMid,\n  isLabelExternal,\n  hasExternalLabel,\n  isLabel,\n} from \"bpmn-js/lib/util/LabelUtil\";\n\nimport { ElementTypes } from \"src/app/domain/entities/elementTypes\";\nimport { getBusinessObject, is } from \"../util\";\n\nconst NULL_DIMENSIONS = {\n  width: 0,\n  height: 0,\n};\n\n/**\n * a handler that updates the text of a BPMN element.\n */\nexport default function UpdateLabelHandler(\n  modeling,\n  textRenderer,\n  commandStack,\n) {\n  commandStack.registerHandler(\"element.updateCustomLabel\", handlerFunction);\n\n  function handlerFunction() {\n    /**\n     * Set the label and return the changed elements.\n     *\n     * Element parameter can be label itself or connection (i.e. sequence flow).\n     *\n     * @param {djs.model.Base} element\n     * @param {String} text\n     */\n\n    this.preExecute = function (ctx) {\n      let element = ctx.element,\n        businessObject = element.businessObject,\n        newLabel = ctx.newLabel,\n        newNumber = ctx.newNumber;\n\n      if (\n        !isLabel(element) &&\n        isLabelExternal(element) &&\n        !hasExternalLabel(element) &&\n        (newLabel !== \"\" || newNumber !== \"\")\n      ) {\n        // create label\n        let paddingTop = 7;\n\n        let labelCenter = getExternalLabelMid(element);\n\n        labelCenter = {\n          x: labelCenter.x,\n          y: labelCenter.y + paddingTop,\n        };\n\n        modeling.createLabel(element, labelCenter, {\n          id: businessObject.id + \"_label\",\n          businessObject: businessObject,\n        });\n      }\n    };\n\n    this.execute = function (ctx) {\n      ctx.oldLabel = getLabel(ctx.element);\n      ctx.oldNumber = getNumber(ctx.element);\n      return setText(ctx.element, ctx.newLabel, ctx.newNumber);\n    };\n\n    this.revert = function (ctx) {\n      return setText(ctx.element, ctx.oldLabel, ctx.oldNumber);\n    };\n\n    this.postExecute = function (ctx) {\n      let element = ctx.element,\n        label = element.label || element,\n        newLabel = ctx.newLabel,\n        newBounds = ctx.newBounds;\n\n      if (isLabel(label) && newLabel.trim() === \"\") {\n        modeling.removeShape(label);\n\n        return;\n      }\n\n      // ignore internal labels for elements except text annotations\n      if (\n        !isLabelExternal(element) &&\n        !is(element, ElementTypes.TEXTANNOTATION)\n      ) {\n        return;\n      }\n\n      let bo = getBusinessObject(label);\n\n      let text = bo.name || bo.text;\n\n      // don't resize without text\n      if (!text) {\n        return;\n      }\n\n      // resize element based on label _or_ pre-defined bounds\n      if (typeof newBounds === \"undefined\") {\n        newBounds = textRenderer.getLayoutedBounds(label, text);\n      }\n\n      // setting newBounds to false or _null_ will\n      // disable the postExecute resize operation\n      if (newBounds) {\n        modeling.resizeShape(label, newBounds, NULL_DIMENSIONS);\n      }\n    };\n  }\n}\n\nfunction setText(element, text, textNumber) {\n  // external label if present\n  let label = element.label || element;\n\n  let number = element.number || element;\n\n  let labelTarget = element.labelTarget || element;\n\n  let numberTarget = element.numberTarget || element;\n  setLabel(label, text);\n  setNumber(number, textNumber);\n\n  return [label, labelTarget, number, numberTarget];\n}\n\nUpdateLabelHandler.$inject = [\"modeling\", \"textRenderer\", \"commandStack\"];\n","import { some } from \"min-dash\";\n\nexport function is(element, type) {\n  const bo = getBusinessObject(element);\n\n  return bo && typeof bo.$instanceOf == \"function\" && bo.$instanceOf(type);\n}\n\nexport function getBusinessObject(element) {\n  return (element && element.businessObject) || element;\n}\n\nexport function isAny(element, types) {\n  return some(types, function (t) {\n    return is(element, t);\n  });\n}\n\nexport function reworkGroupElements(parent, shape) {\n  parent.children.slice().forEach((innerShape) => {\n    if (innerShape.id !== shape.id) {\n      if (innerShape.x >= shape.x && innerShape.x <= shape.x + shape.width) {\n        if (innerShape.y >= shape.y && innerShape.y <= shape.y + shape.height) {\n          innerShape.parent = shape;\n          if (!shape.children.includes(innerShape)) {\n            shape.children.push(innerShape);\n          }\n        }\n      }\n    }\n  });\n}\n\nexport function undoGroupRework(parent, shape) {\n  const superParent = parent.parent;\n\n  parent.children.remove(shape);\n  superParent.children.add(shape);\n\n  shape.parent = superParent;\n\n  const svgShape = document.querySelector(\n    \"[data-element-id=\" + shape.id + \"]\",\n  ).parentElement;\n  const svgGroup = svgShape.parentElement;\n  const svgGroupParent = svgGroup.parentElement.parentElement;\n  svgGroup.removeChild(svgShape);\n  svgGroupParent.appendChild(svgShape);\n}\n\nexport function isCustomIcon(icon) {\n  // default icons are provided as SVG\n  // custom icons are provided as \"Data URL\" with a base64-encoded image as payload\n  return icon.startsWith(\"data\");\n}\n\nexport function isCustomSvgIcon(icon) {\n  // default icons are provided as SVG\n  // custom icons are provided as \"Data URL\" with a base64-encoded image as payload\n  return icon.startsWith(\"data:image/svg\");\n}\n","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { SettingsService } from 'src/app/workbench/services/settings/settings.service';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { TitleService } from './tools/title/services/title.service';\nimport { ExportService } from './tools/export/services/export.service';\nimport { ReplayService } from './tools/replay/services/replay.service';\nimport { environment } from '../environments/environment';\nimport { ColorPickerDirective } from 'ngx-color-picker';\nimport { AutosaveService } from './tools/autosave/services/autosave.service';\nimport {\n  BLACK,\n  BLUE,\n  CYAN,\n  DARK_PINK,\n  GREEN,\n  GREY,\n  LIGHT_PINK,\n  LIME,\n  ORANGE,\n  PURPLE,\n  RED,\n  SNACKBAR_DURATION,\n  SNACKBAR_INFO,\n  YELLOW,\n} from './domain/entities/constants';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n})\nexport class AppComponent implements OnInit, AfterViewInit {\n  showSettings$: Observable<boolean> | BehaviorSubject<boolean>;\n  showDescription$: Observable<boolean>;\n  version: string = environment.version;\n  color: string = BLACK;\n\n  @ViewChild(ColorPickerDirective, { static: false })\n  colorPicker!: ColorPickerDirective;\n\n  skipNextColorUpdate = false;\n\n  // define preset colors that have good contrast on white background and are compatible to EventStorming notation\n  colorBox: string[] = [\n    YELLOW,\n    ORANGE,\n    RED,\n    LIGHT_PINK,\n    DARK_PINK,\n    PURPLE,\n    BLUE,\n    CYAN,\n    GREEN,\n    LIME,\n    GREY,\n    BLACK,\n  ];\n\n  constructor(\n    private settingsService: SettingsService,\n    private titleService: TitleService,\n    private exportService: ExportService,\n    private autosaveService: AutosaveService,\n    private cd: ChangeDetectorRef,\n    private snackbar: MatSnackBar,\n    replayService: ReplayService,\n  ) {\n    this.showSettings$ = new BehaviorSubject(false);\n    this.showDescription$ = new BehaviorSubject(true);\n\n    document.addEventListener('keydown', (e: KeyboardEvent) => {\n      if (e.ctrlKey && e.key === 's') {\n        e.preventDefault();\n        e.stopPropagation();\n        if (this.exportService.isDomainStoryExportable()) {\n          this.exportService.downloadDST();\n        }\n      }\n      if (e.ctrlKey && e.key === 'l') {\n        e.preventDefault();\n        e.stopPropagation();\n        document.getElementById('import')?.click();\n      }\n      if (\n        (e.key === 'ArrowRight' || e.key === 'ArrowUp') &&\n        replayService.getReplayOn()\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n        replayService.nextSentence();\n      }\n      if (\n        (e.key === 'ArrowLeft' || e.key === 'ArrowDown') &&\n        replayService.getReplayOn()\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n        replayService.previousSentence();\n      }\n      if (e.key === 'Escape') {\n        e.preventDefault();\n        e.stopPropagation();\n        this.skipNextColorUpdate = true;\n        this.colorPicker.closeDialog();\n      }\n    });\n\n    document.addEventListener('defaultColor', (event: Event) => {\n      const customEvent = event as CustomEvent;\n      if (customEvent.detail.color === 'black') {\n        this.color = BLACK;\n      } else {\n        this.color = customEvent.detail.color;\n      }\n    });\n\n    document.addEventListener('openColorPicker', () => {\n      this.colorPicker.openDialog();\n    });\n\n    document.addEventListener('errorColoringOnlySvg', () => {\n      this.snackbar.open('Only SVG icons can be colored', undefined, {\n        duration: SNACKBAR_DURATION * 2,\n        panelClass: SNACKBAR_INFO,\n      });\n    });\n  }\n\n  ngOnInit(): void {\n    this.showDescription$ = this.titleService.showDescription$;\n    this.showSettings$ = this.settingsService.showSettings$;\n  }\n\n  onColorChanged(color: string) {\n    if (this.skipNextColorUpdate) {\n      this.skipNextColorUpdate = false;\n      return;\n    }\n    document.dispatchEvent(\n      new CustomEvent('pickedColor', { detail: { color: color } }),\n    );\n  }\n\n  ngAfterViewInit(): void {\n    this.autosaveService.loadLatestDraft();\n    this.cd.detectChanges();\n  }\n}\n","<div class=\"content\" role=\"main\">\n  <input\n    id=\"colorPicker\"\n    [style.background]=\"color\"\n    [cpPresetColors]=\"colorBox\"\n    [(colorPicker)]=\"color\"\n    (colorPickerClose)=\"onColorChanged($event)\"\n    style=\"display: none; height: 0\"\n  />\n\n  @if (showSettings$ | async) {\n    <app-settings />\n  }\n  <div\n    [class.headerAndCanvas]=\"\n      !(showSettings$ | async) && (showDescription$ | async)\n    \"\n    [class.headerAndCanvasCollapsed]=\"\n      !(showSettings$ | async) && !(showDescription$ | async)\n    \"\n    [class.hidden]=\"showSettings$ | async\"\n  >\n    <app-header\n      [class.header]=\"showDescription$ | async\"\n      [class.headerCollapsed]=\"!(showDescription$ | async)\"\n    />\n    <app-modeler />\n  </div>\n\n  <div\n    [class.logoContainer]=\"!(showSettings$ | async)\"\n    [class.hidden]=\"showSettings$ | async\"\n  >\n    <span>\n      <img src=\"favicon.ico\" height=\"24\" alt=\"Egon Logo\" />\n      <a href=\"https://egon.io\" target=\"_blank\"> egon.io</a>\n      <span>version: </span>\n      <a href=\"https://egon.io/changelog\" target=\"_blank\">{{ version }}</a>\n      <span>by </span>\n      <img src=\"assets/logo/wps-icon.ico\" height=\"24\" alt=\"WPS Logo\" />\n      <a href=\"https://www.wps.de/\" target=\"_blank\">WPS</a>\n    </span>\n\n    <span>\n      <a href=\"https://www.wps.de/datenschutz/\" target=\"_blank\">Privacy</a>\n    </span>\n\n    <span>\n      <a href=\"https://www.wps.de/impressum/\" target=\"_blank\">Imprint</a>\n    </span>\n  </div>\n</div>\n","import {\n  APP_INITIALIZER,\n  ApplicationRef,\n  DoBootstrap,\n  NgModule,\n} from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport {\n  MAT_CHECKBOX_DEFAULT_OPTIONS,\n  MatCheckboxDefaultOptions,\n} from '@angular/material/checkbox';\n\nimport { NoopAnimationsModule } from '@angular/platform-browser/animations';\nimport { SettingsComponent } from 'src/app/workbench/presentation/settings/settings.component';\nimport { AppComponent } from 'src/app/app.component';\nimport { ExportService } from 'src/app/tools/export/services/export.service';\nimport { ImportDomainStoryService } from 'src/app/tools/import/services/import-domain-story.service';\nimport { ImportRepairService } from 'src/app/tools/import/services/import-repair.service';\nimport { ModelerService } from 'src/app/tools/modeler/services/modeler.service';\nimport { TitleService } from 'src/app/tools/title/services/title.service';\nimport { LabelDictionaryService } from 'src/app/tools/label-dictionary/services/label-dictionary.service';\nimport { ReplayService } from 'src/app/tools/replay/services/replay.service';\nimport { ElementRegistryService } from 'src/app/domain/services/element-registry.service';\nimport { IconSetConfigurationService } from 'src/app/tools/icon-set-config/services/icon-set-configuration.service';\nimport { MassNamingService } from 'src/app/tools/label-dictionary/services/mass-naming.service';\nimport { InfoDialogComponent } from 'src/app/domain/presentation/info-dialog/info-dialog.component';\nimport { ExportDialogComponent } from 'src/app/tools/export/presentation/export-dialog/export-dialog.component';\nimport { ActivityDialogComponent } from 'src/app/tools/modeler/presentation/activity-dialog/activity-dialog.component';\nimport { ReactiveFormsModule, UntypedFormBuilder } from '@angular/forms';\nimport { TitleDialogComponent } from 'src/app/tools/title/presentation/title-dialog/title-dialog.component';\nimport { IconDictionaryService } from 'src/app/tools/icon-set-config/services/icon-dictionary.service';\nimport { ModelerComponent } from 'src/app/tools/modeler/presentation/modeler/modeler.component';\nimport { SettingsModule } from 'src/app/workbench/presentation/settings/settings.module';\nimport { AutosaveService } from './tools/autosave/services/autosave.service';\nimport { LabelDictionaryDialogComponent } from './tools/label-dictionary/presentation/label-dictionary-dialog/label-dictionary-dialog.component';\nimport { MaterialModule } from './material.module';\nimport { ColorPickerModule } from 'ngx-color-picker';\nimport { DirtyFlagService } from './domain/services/dirty-flag.service';\nimport { IconSetChangedService } from './tools/icon-set-config/services/icon-set-customization.service';\nimport { initializeContextPadProvider } from './tools/modeler/bpmn/modeler/context-pad/domainStoryContextPadProvider';\nimport { initializePalette } from './tools/modeler/bpmn/modeler/palette/domainStoryPalette';\nimport { initializeRenderer } from './tools/modeler/bpmn/modeler/domainStoryRenderer';\nimport { initializeLabelEditingProvider } from './tools/modeler/bpmn/modeler/labeling/dsLabelEditingProvider';\nimport { initializeReplaceOptions } from './tools/modeler/bpmn/modeler/change-icon/replaceOptions';\nimport { initializeNumbering } from './tools/modeler/bpmn/modeler/numbering/numbering';\nimport { initializeActivityUpdateHandler } from './tools/modeler/bpmn/modeler/updateHandler/activityUpdateHandlers';\nimport { HeaderComponent } from './workbench/presentation/header/header/header.component';\nimport { DomainStoryModelerModuleModule } from './workbench/presentation/header/domain-story-modeler-module.module';\n\n@NgModule({\n  declarations: [\n    HeaderComponent,\n    SettingsComponent,\n    AppComponent,\n    InfoDialogComponent,\n    ExportDialogComponent,\n    ActivityDialogComponent,\n    TitleDialogComponent,\n    ModelerComponent,\n    LabelDictionaryDialogComponent,\n  ],\n  imports: [\n    BrowserModule,\n    NoopAnimationsModule,\n    ReactiveFormsModule,\n    SettingsModule,\n    DomainStoryModelerModuleModule,\n    MaterialModule,\n    ColorPickerModule,\n  ],\n  providers: [\n    AutosaveService,\n    ExportService,\n    ImportDomainStoryService,\n    ImportRepairService,\n    IconDictionaryService,\n    TitleService,\n    LabelDictionaryService,\n    ReplayService,\n    ElementRegistryService,\n    IconSetConfigurationService,\n    ModelerService,\n    MassNamingService,\n    UntypedFormBuilder,\n    {\n      provide: MAT_CHECKBOX_DEFAULT_OPTIONS,\n      useValue: { clickAction: 'noop' } as MatCheckboxDefaultOptions,\n    },\n    {\n      provide: APP_INITIALIZER,\n      useFactory: initialize,\n      multi: true,\n      deps: [\n        DirtyFlagService,\n        IconDictionaryService,\n        IconSetConfigurationService,\n        ElementRegistryService,\n        LabelDictionaryService,\n      ],\n    },\n    {\n      provide: IconSetChangedService,\n      useExisting: ImportDomainStoryService,\n    },\n  ],\n})\nexport class AppModule implements DoBootstrap {\n  constructor(private autosaveService: AutosaveService) {\n    // autosaveService wird so automatisch initialisiert, auf keinen Fall entfernen!\n  }\n\n  ngDoBootstrap(app: ApplicationRef): void {\n    const componentElement = document.createElement('app-root');\n    document.body.append(componentElement);\n    app.bootstrap(AppComponent);\n  }\n}\n\nfunction initialize(\n  dirtyFlagService: DirtyFlagService,\n  iconDictionaryService: IconDictionaryService,\n  configurationService: IconSetConfigurationService,\n  elementRegistryService: ElementRegistryService,\n  labelDictionaryService: LabelDictionaryService,\n) {\n  return () => {\n    initializeContextPadProvider(dirtyFlagService, iconDictionaryService);\n\n    /** The Palette and the Context Menu need the Icons present in the Domain,\n     * so the IconDictionaryService and the IconSetConfigurationService needs to be given to the Palette **/\n    initializePalette(iconDictionaryService, configurationService);\n    initializeRenderer(\n      iconDictionaryService,\n      elementRegistryService,\n      dirtyFlagService,\n    );\n    initializeLabelEditingProvider(labelDictionaryService);\n    initializeReplaceOptions(iconDictionaryService);\n    initializeNumbering(elementRegistryService);\n    initializeActivityUpdateHandler(elementRegistryService);\n  };\n}\n","export class Configuration {\n  actors: string[];\n  workObjects: string[];\n\n  constructor(actors: string[], workObjects: string[]) {\n    this.actors = actors;\n    this.workObjects = workObjects;\n  }\n}\n","/** DEFAULT VALUES **/\nexport const INITIAL_TITLE = '< title >';\nexport const INITIAL_DESCRIPTION = '';\nexport const INITIAL_ICON_SET_NAME = 'default';\n\n/** LocalStorageTags **/\nexport const APPENDED_ICONS_TAG = 'appendedIcons';\n// String value of tag should not be renamed, because existing configurations would not load\nexport const ICON_SET_CONFIGURATION_TAG = 'domainConfigurationTag';\n\n/** AUTOSAVE DEFAULTS **/\nexport const DEFAULT_AUTOSAVES_ENABLED = true;\nexport const DEFAULT_AUTOSAVES_MAX_DRAFTS = 5;\nexport const DEFAULT_AUTOSAVES_INTERVAL = 30;\n\n/** SNACKBAR **/\nexport const SNACKBAR_DURATION = 2000;\nexport const SNACKBAR_SUCCESS = 'snackbar_success';\nexport const SNACKBAR_ERROR = 'snackbar_error';\nexport const SNACKBAR_INFO = 'snackbar_info';\n\n/** BPMN_RELEVANT_CONSTANTS **/\nexport const IMPLICIT_ROOT_ID = '__implicitroot';\n\n/** COLOR PICKER DEFAULT COLORS **/\nexport const YELLOW = '#FDD835';\nexport const ORANGE = '#FB8C00';\nexport const RED = '#D32F2F';\nexport const LIGHT_PINK = '#F48FB1';\nexport const DARK_PINK = '#EC407A';\nexport const PURPLE = '#8E24AA';\nexport const BLUE = '#1E88E5';\nexport const CYAN = '#00ACC1';\nexport const GREEN = '#43A047';\nexport const LIME = '#C0CA33';\nexport const GREY = '#9E9E9E';\nexport const BLACK = '#000000';\n","export class Dictionary {\n  private entries: Entry[];\n\n  constructor() {\n    this.entries = [];\n  }\n\n  get length(): number {\n    return this.entries.length;\n  }\n\n  all(): Entry[] {\n    return this.entries;\n  }\n\n  size(): number {\n    return this.entries.length;\n  }\n\n  isEmpty(): boolean {\n    return this.entries.length <= 0;\n  }\n\n  has(key: string): boolean {\n    return this.entries.some((entry) => entry.key === key);\n  }\n\n  set(key: string, value: any): void {\n    if (!this.has(key)) {\n      this.entries.push(new Entry(value, key));\n    }\n  }\n\n  add(value: any, key: string): void {\n    this.set(key, value);\n  }\n\n  putEntry(entry: Entry): void {\n    if (!this.has(entry.key)) {\n      this.entries.push(new Entry(entry.value, entry.key));\n    }\n  }\n\n  keysArray(): string[] {\n    return this.entries.map((entry) => entry.key);\n  }\n\n  addEach(object: any): void {\n    Object.keys(object).forEach((key) => {\n      this.set(key, object[key]);\n    });\n  }\n\n  appendDict(dict: Dictionary): void {\n    dict.entries.forEach((entry) => this.putEntry(entry));\n  }\n\n  clear(): void {\n    this.entries = [];\n  }\n\n  delete(key: string): void {\n    this.entries = this.entries.filter((entry) => entry.key !== key);\n  }\n\n  get(key: string): any {\n    const found = this.entries.filter((entry) => entry.key === key);\n    return found[0] ? found[0].value : null;\n  }\n}\n\nexport class Entry {\n  value: any;\n  key: string;\n\n  constructor(value: any, key: string) {\n    this.value = value;\n    this.key = key;\n  }\n}\n","export enum ElementTypes {\n  ACTIVITY = 'domainStory:activity',\n  CONNECTION = 'domainStory:connection',\n  ACTOR = 'domainStory:actor',\n  WORKOBJECT = 'domainStory:workObject',\n  GROUP = 'domainStory:group',\n  TEXTANNOTATION = 'domainStory:textAnnotation',\n  DOMAINSTORY = 'domainStory:',\n}\n\nexport namespace ElementTypes {\n  export function getIconId(type: string): string {\n    if (type.startsWith(ElementTypes.ACTOR)) {\n      return type.replace(ElementTypes.ACTOR, '');\n    } else if (type.startsWith(ElementTypes.WORKOBJECT)) {\n      return type.replace(ElementTypes.WORKOBJECT, '');\n    }\n    return '';\n  }\n}\n","export class InfoDialogData {\n  title: string;\n  infoText: string;\n  isInfo: boolean;\n  isLink: boolean;\n  linkText: string | undefined;\n\n  constructor(\n    title: string,\n    infoText: string,\n    isInfo: boolean,\n    isLink: boolean = false,\n    linkText?: string,\n  ) {\n    this.title = title;\n    this.infoText = infoText;\n    this.isInfo = isInfo;\n    this.isLink = isLink;\n    this.linkText = linkText;\n  }\n}\n","import { AfterViewInit, Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { InfoDialogData } from 'src/app/domain/entities/infoDialogData';\n\n@Component({\n  selector: 'app-info-dialog',\n  templateUrl: './info-dialog.component.html',\n  styleUrls: ['./info-dialog.component.scss'],\n})\nexport class InfoDialogComponent implements AfterViewInit {\n  title: string;\n  infoText: string;\n  showConfirmButton: boolean;\n  hasLink: boolean;\n  linkText: string;\n\n  constructor(\n    private dialogRef: MatDialogRef<InfoDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) data: InfoDialogData,\n  ) {\n    this.title = data.title;\n    this.infoText = data.infoText;\n    this.showConfirmButton = !data.isInfo;\n    this.hasLink = data.isLink;\n    this.linkText = data.linkText || '';\n  }\n\n  ngAfterViewInit() {\n    const span = document.getElementsByClassName(\n      'readOnlyText',\n    )[0] as HTMLTextAreaElement;\n    span.style.height = span.scrollHeight + 'px';\n  }\n\n  close(): void {\n    this.dialogRef.close();\n  }\n}\n","<mat-dialog-content class=\"content\">\n  <h2 id=\"info-dialog-title\">{{ title }}</h2>\n  @if (infoText != \"\") {\n    <span class=\"readOnlyText\">{{ infoText }} </span>\n  }\n  @if (hasLink) {\n    <a href=\"{{ linkText }}\">{{ linkText }}</a>\n  }\n</mat-dialog-content>\n\n@if (showConfirmButton) {\n  <mat-dialog-actions>\n    <button class=\"mat-raised-button\" (click)=\"close()\">Close</button>\n  </mat-dialog-actions>\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CommandStackService {\n  private commandStack: any;\n\n  constructor() {}\n\n  setCommandStack(commandStack: any): void {\n    this.commandStack = commandStack;\n  }\n\n  execute(action: string, payload: any) {\n    this.commandStack.execute(action, payload);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\nimport { ComponentType } from '@angular/cdk/overlay';\nimport { InfoDialogData } from '../entities/infoDialogData';\nimport { InfoDialogComponent } from '../presentation/info-dialog/info-dialog.component';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DialogService {\n  constructor(private matDialog: MatDialog) {}\n\n  openDialog(dialog: ComponentType<any>, config: MatDialogConfig): void {\n    this.matDialog.open(dialog, config);\n  }\n\n  openKeyboardShortcutsDialog(): void {\n    const title = 'Keyboard Shortcuts';\n    const shortCutText =\n      'Undo:\\t\\t\\t\\t\\tctrl + Z \\n' +\n      'Redo:\\t\\t\\t\\t\\tctrl + Y    OR   ctrl + shift + Z\\n' +\n      'Select All:\\t\\t\\t\\tctrl + A\\n' +\n      'Export as EGN:\\t\\t\\tctrl + S\\n' +\n      'Import Domain Story: \\tctrl + L\\n' +\n      'Search for text:\\t\\t\\tctrl + F\\n' +\n      'Direct editing:\\t\\t\\tE\\n' +\n      'Hand tool:\\t\\t\\t\\tH\\n' +\n      'Lasso tool:\\t\\t\\t\\tL\\n' +\n      'Space tool:\\t\\t\\t\\tS';\n\n    const config = new MatDialogConfig();\n    config.disableClose = false;\n    config.autoFocus = true;\n\n    config.data = new InfoDialogData(title, shortCutText, true);\n\n    this.openDialog(InfoDialogComponent, config);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DirtyFlagService {\n  private isDirtySubject = new BehaviorSubject<boolean>(false);\n  dirty$ = this.isDirtySubject.asObservable();\n\n  makeDirty(): void {\n    this.isDirtySubject.next(true);\n  }\n\n  makeClean(): void {\n    this.isDirtySubject.next(false);\n  }\n\n  get dirty(): boolean {\n    return this.isDirtySubject.value;\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { ElementTypes } from 'src/app/domain/entities/elementTypes';\nimport { CanvasObject } from 'src/app/domain/entities/canvasObject';\nimport { GroupCanvasObject } from '../entities/groupCanvasObject';\nimport { ActivityCanvasObject } from '../entities/activityCanvasObject';\nimport { UsedIconList } from 'src/app/domain/entities/UsedIconList';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ElementRegistryService {\n  private registry: any;\n  private fullyInitialized = false;\n\n  /**\n   * Initially the registry has only the root-Element.\n   * Once the canvas has bees initialized, we adjust the reference to point to the elements on the canvas for convenience\n   */\n  correctInitialize(): void {\n    if (!this.fullyInitialized) {\n      if (this.registry.__implicitroot) {\n        this.registry = this.registry.__implicitroot.element.children;\n        this.fullyInitialized = true;\n      }\n    }\n  }\n\n  setElementRegistry(registry: any): void {\n    this.registry = registry._elements;\n  }\n\n  clear(): void {\n    this.registry = null;\n    this.fullyInitialized = false;\n  }\n\n  createObjectListForDSTDownload(): CanvasObject[] {\n    if (this.registry) {\n      const allObjectsFromCanvas = this.getAllCanvasObjects();\n      const groups = this.getAllGroups();\n\n      const objectList: CanvasObject[] = [];\n\n      this.fillListOfCanvasObjects(allObjectsFromCanvas, objectList, groups);\n\n      return objectList;\n    }\n    return [];\n  }\n\n  private fillListOfCanvasObjects(\n    allObjectsFromCanvas: CanvasObject[],\n    objectList: CanvasObject[],\n    groups: GroupCanvasObject[],\n  ): void {\n    allObjectsFromCanvas.forEach((canvasElement) => {\n      if (canvasElement.type === ElementTypes.ACTIVITY) {\n        objectList.push(canvasElement);\n      }\n\n      // ensure that Activities are always after Actors, Workobjects and Groups in .dst files\n      else {\n        if (canvasElement.type === ElementTypes.TEXTANNOTATION) {\n          canvasElement.businessObject.width = canvasElement.width;\n          canvasElement.businessObject.height = canvasElement.height;\n        }\n        if (!objectList.includes(canvasElement)) {\n          objectList.unshift(canvasElement);\n        }\n      }\n    });\n\n    groups.forEach((group) => {\n      objectList.push(group);\n    });\n  }\n\n  getAllActivities(): ActivityCanvasObject[] {\n    const activities: ActivityCanvasObject[] = [];\n\n    this.getAllCanvasObjects().forEach((element) => {\n      if (element.type.includes(ElementTypes.ACTIVITY)) {\n        activities.push(element as ActivityCanvasObject);\n      }\n    });\n    return activities;\n  }\n\n  getAllConnections(): ActivityCanvasObject[] {\n    const connections: ActivityCanvasObject[] = [];\n    this.getAllCanvasObjects().forEach((element) => {\n      const type = element.type;\n      if (type === ElementTypes.CONNECTION) {\n        connections.push(element as ActivityCanvasObject);\n      }\n    });\n    return connections;\n  }\n\n  getAllCanvasObjects(): CanvasObject[] {\n    const allObjects: CanvasObject[] = [];\n    const groupObjects: GroupCanvasObject[] = [];\n\n    this.checkChildForGroup(groupObjects, allObjects);\n\n    // for each memorized group, remove it from the group-array and check its children, whether they are groups or not\n    // if a child is a group, memorize it in the group-array\n    // other children should already be in the allObjects list\n    let i = groupObjects.length - 1;\n    while (groupObjects.length >= 1) {\n      const currentGroup = groupObjects.pop();\n      // @ts-ignore\n      currentGroup.children.forEach((child: CanvasObject) => {\n        const type = child.type;\n        if (type.includes(ElementTypes.GROUP)) {\n          groupObjects.push(child as GroupCanvasObject);\n        }\n      });\n      i = groupObjects.length - 1;\n    }\n    return allObjects;\n  }\n\n  // returns all groups on the canvas and inside other groups\n  getAllGroups(): GroupCanvasObject[] {\n    const groupObjects: GroupCanvasObject[] = [];\n    const allObjects: CanvasObject[] = [];\n\n    this.checkChildForGroup(groupObjects, allObjects);\n\n    for (const group of groupObjects) {\n      group.children?.forEach((child: CanvasObject) => {\n        if (child.type.includes(ElementTypes.GROUP)) {\n          groupObjects.push(child as GroupCanvasObject);\n        }\n      });\n    }\n    return groupObjects;\n  }\n\n  private checkChildForGroup(\n    groupObjects: GroupCanvasObject[],\n    allObjects: CanvasObject[],\n  ): void {\n    const registryElementNames = Object.keys(this.registry);\n    for (let name of registryElementNames) {\n      const entry = this.registry[name].element;\n      if (entry.businessObject) {\n        const type = entry.type;\n        if (type && type.includes(ElementTypes.GROUP)) {\n          // if it is a group, memorize this for later\n          groupObjects.push(entry);\n        } else if (type) {\n          allObjects.push(entry);\n        }\n      }\n    }\n  }\n\n  // get a list of activities, that originate from an actor-type\n  getActivitiesFromActors(): ActivityCanvasObject[] {\n    const activitiesFromActors: ActivityCanvasObject[] = [];\n    const activities = this.getAllActivities();\n\n    activities.forEach((activity: ActivityCanvasObject) => {\n      if (activity.source?.type.includes(ElementTypes.ACTOR)) {\n        activitiesFromActors.push(activity);\n      }\n    });\n\n    // sort by activityBusinessObject number\n    activitiesFromActors.sort(\n      (\n        activityCanvasA: ActivityCanvasObject,\n        activityCanvasB: ActivityCanvasObject,\n      ) => {\n        const activityNumberA = Number(activityCanvasA.businessObject.number);\n        const activityNumberB = Number(activityCanvasB.businessObject.number);\n\n        return activityNumberA - activityNumberB;\n      },\n    );\n\n    return activitiesFromActors;\n  }\n\n  getUsedIcons(): UsedIconList {\n    const actors = this.getAllActors();\n    const workobjects = this.getAllWorkobjects();\n\n    return {\n      actors: actors.map((a) => a.type.replace(ElementTypes.ACTOR, '')),\n      workobjects: workobjects.map((w) =>\n        w.type.replace(ElementTypes.WORKOBJECT, ''),\n      ),\n    };\n  }\n\n  private getAllActors() {\n    return this.getAllCanvasObjects().filter((co) =>\n      co.type.includes(ElementTypes.ACTOR),\n    );\n  }\n\n  getAllWorkobjects() {\n    return this.getAllCanvasObjects().filter((co) =>\n      co.type.includes(ElementTypes.WORKOBJECT),\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class StorageService {\n  set(key: string, value: any) {\n    localStorage.setItem(key, JSON.stringify(value));\n  }\n\n  get(key: string): any {\n    const json = localStorage.getItem(key);\n    if (json) {\n      return JSON.parse(json);\n    }\n    return null;\n  }\n}\n","import { MatDialogModule } from '@angular/material/dialog';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatExpansionModule } from '@angular/material/expansion';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { NgModule } from '@angular/core';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatListModule } from '@angular/material/list';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\n\n@NgModule({\n  imports: [\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatListModule,\n    MatCheckboxModule,\n    MatDialogModule,\n    MatFormFieldModule,\n    MatGridListModule,\n    MatInputModule,\n    MatToolbarModule,\n    MatExpansionModule,\n    MatSnackBarModule,\n    MatCardModule,\n  ],\n  exports: [\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatListModule,\n    MatCheckboxModule,\n    MatDialogModule,\n    MatFormFieldModule,\n    MatGridListModule,\n    MatInputModule,\n    MatToolbarModule,\n    MatExpansionModule,\n    MatSnackBarModule,\n    MatCardModule,\n  ],\n})\nexport class MaterialModule {}\n","import { Component } from '@angular/core';\nimport { AutosaveConfigurationService } from '../../services/autosave-configuration.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport {\n  SNACKBAR_DURATION,\n  SNACKBAR_ERROR,\n  SNACKBAR_SUCCESS,\n} from 'src/app/domain/entities/constants';\n\n@Component({\n  selector: 'app-autosave-options',\n  templateUrl: './autosave-options.component.html',\n  styleUrls: ['./autosave-options.component.scss'],\n})\nexport class AutosaveOptionsComponent {\n  constructor(\n    protected autosaveConfiguration: AutosaveConfigurationService,\n    private snackbar: MatSnackBar,\n  ) {}\n\n  save(activated: boolean, maxDrafts: number, interval: number) {\n    if (\n      this.autosaveConfiguration.setConfiguration({\n        activated,\n        maxDrafts,\n        interval,\n      })\n    ) {\n      this.snackbar.open('Settings for Autosave saved', undefined, {\n        duration: SNACKBAR_DURATION,\n        panelClass: SNACKBAR_SUCCESS,\n      });\n    } else {\n      this.snackbar.open(\n        'Unable to save settings for Autosave - please try again',\n        undefined,\n        {\n          duration: 2 * SNACKBAR_DURATION,\n          panelClass: SNACKBAR_ERROR,\n        },\n      );\n    }\n  }\n}\n","@if (autosaveConfiguration.configuration$ | async; as configuration) {\n  <mat-card>\n    <mat-card-header>\n      <mat-card-title>Autosave Options</mat-card-title>\n    </mat-card-header>\n    <mat-card-content class=\"cardContent\">\n      <div class=\"alignSelfCenter\">\n        <input #activated type=\"checkbox\" [checked]=\"configuration.activated\" />\n        <mat-label>Enabled</mat-label>\n      </div>\n      <div class=\"inputContainer\">\n        <mat-label>Interval [sec]</mat-label>\n        <input\n          #interval\n          class=\"numberInput\"\n          min=\"1\"\n          type=\"number\"\n          [value]=\"configuration.interval\"\n        />\n      </div>\n      <div class=\"inputContainer\">\n        <mat-label>Max. Drafts</mat-label>\n        <input\n          #drafts\n          class=\"numberInput\"\n          min=\"1\"\n          type=\"number\"\n          [value]=\"configuration.maxDrafts\"\n        />\n      </div>\n      <button\n        class=\"saveButton\"\n        mat-raised-button\n        color=\"primary\"\n        (click)=\"save(activated.checked, +drafts.value, +interval.value)\"\n      >\n        Apply\n      </button>\n    </mat-card-content>\n  </mat-card>\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-autosave-settings',\n  templateUrl: './autosave-settings.component.html',\n  styleUrls: ['./autosave-settings.component.scss'],\n})\nexport class AutosaveSettingsComponent {}\n","<app-autosave-options />\n<app-autosaved-drafts />\n","import { Component, OnInit } from '@angular/core';\nimport { AutosaveService } from '../../services/autosave.service';\nimport { Draft } from '../../domain/draft';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport {\n  SNACKBAR_DURATION,\n  SNACKBAR_SUCCESS,\n} from 'src/app/domain/entities/constants';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-autosaved-drafts',\n  templateUrl: './autosaved-drafts.component.html',\n  styleUrls: ['./autosaved-drafts.component.scss'],\n})\nexport class AutosavedDraftsComponent implements OnInit {\n  drafts: Draft[] = [];\n  subscription: Subscription;\n\n  constructor(\n    private autosaveService: AutosaveService,\n    private snackbar: MatSnackBar,\n  ) {\n    this.subscription = this.autosaveService.autosavedDraftsChanged$.subscribe(\n      () => this.initDrafts(),\n    );\n  }\n\n  ngOnInit(): void {\n    this.initDrafts();\n  }\n\n  initDrafts() {\n    this.drafts = this.autosaveService.loadCurrentDrafts();\n  }\n\n  loadDraft(draft: Draft): void {\n    this.autosaveService.loadDraft(draft);\n    this.snackbar.open('Draft loaded', undefined, {\n      duration: SNACKBAR_DURATION,\n      panelClass: SNACKBAR_SUCCESS,\n    });\n  }\n\n  removeAllDrafts() {\n    this.autosaveService.removeAllDrafts();\n  }\n}\n","<mat-accordion>\n  <mat-expansion-panel>\n    <mat-expansion-panel-header>\n      <mat-panel-title>History</mat-panel-title>\n      <mat-panel-description>\n        {{ drafts.length ? drafts.length : \"no\" }}\n        {{ drafts.length > 1 ? \"drafts\" : \"draft\" }} available\n      </mat-panel-description>\n    </mat-expansion-panel-header>\n    @if (drafts.length) {\n      <div class=\"items\">\n        @for (draft of drafts; track draft) {\n          <div class=\"item border-bottom\">\n            <div>\n              <div class=\"item-title\">{{ draft.title }}</div>\n              <div class=\"item-date\">{{ draft.date }}</div>\n            </div>\n            <button\n              class=\"item-button\"\n              mat-raised-button\n              color=\"primary\"\n              (click)=\"loadDraft(draft)\"\n            >\n              Load Draft\n            </button>\n          </div>\n        }\n        <div class=\"item\">\n          <div></div>\n          <button\n            class=\"item-button\"\n            mat-raised-button\n            color=\"primary\"\n            (click)=\"removeAllDrafts()\"\n          >\n            Remove All Drafts\n          </button>\n        </div>\n      </div>\n    } @else {\n      No drafts found.\n    }\n  </mat-expansion-panel>\n</mat-accordion>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AutosaveSettingsComponent } from './AutosaveSettings/autosave-settings.component';\nimport { AutosaveOptionsComponent } from './AutosaveOptions/autosave-options.component';\nimport { AutosavedDraftsComponent } from './AutosavedDrafts/autosaved-drafts.component';\nimport { FormsModule } from '@angular/forms';\nimport { MaterialModule } from '../../../material.module';\n\n@NgModule({\n  declarations: [\n    AutosaveSettingsComponent,\n    AutosaveOptionsComponent,\n    AutosavedDraftsComponent,\n  ],\n  exports: [AutosaveSettingsComponent],\n  imports: [CommonModule, FormsModule, MaterialModule],\n})\nexport class AutosaveSettingsModule {}\n","import { Injectable } from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\nimport { StorageService } from '../../../domain/services/storage.service';\nimport { AutosaveConfiguration } from '../domain/autosave-configuration';\nimport {\n  DEFAULT_AUTOSAVES_MAX_DRAFTS,\n  DEFAULT_AUTOSAVES_ENABLED,\n  DEFAULT_AUTOSAVES_INTERVAL,\n} from 'src/app/domain/entities/constants';\n\nconst AUTOSAVE_CONFIGURATION_TAG = 'autosaveConfiguration';\n\nconst defaultConfiguration: AutosaveConfiguration = {\n  activated: DEFAULT_AUTOSAVES_ENABLED,\n  interval: DEFAULT_AUTOSAVES_INTERVAL,\n  maxDrafts: DEFAULT_AUTOSAVES_MAX_DRAFTS,\n};\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AutosaveConfigurationService {\n  private configuration = defaultConfiguration;\n\n  private readonly configurationSubject =\n    new ReplaySubject<AutosaveConfiguration>(1);\n  readonly configuration$ = this.configurationSubject.asObservable();\n\n  constructor(private storageService: StorageService) {\n    this.initializeConfiguration();\n  }\n\n  private initializeConfiguration() {\n    this.loadConfiguration();\n    this.configurationSubject.next(this.configuration);\n  }\n\n  setConfiguration(configuration: AutosaveConfiguration): boolean {\n    try {\n      this.configuration = configuration;\n      this.saveConfiguration();\n      this.configurationSubject.next(configuration);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  private loadConfiguration() {\n    this.configuration =\n      this.storageService.get(AUTOSAVE_CONFIGURATION_TAG) ??\n      defaultConfiguration;\n  }\n\n  private saveConfiguration() {\n    this.storageService.set(AUTOSAVE_CONFIGURATION_TAG, this.configuration);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { RendererService } from '../../modeler/services/renderer.service';\nimport { ExportService } from '../../export/services/export.service';\nimport { Draft } from '../domain/draft';\nimport { AutosaveConfigurationService } from './autosave-configuration.service';\nimport { IconDictionaryService } from '../../icon-set-config/services/icon-dictionary.service';\nimport { ElementTypes } from '../../../domain/entities/elementTypes';\nimport { StorageService } from '../../../domain/services/storage.service';\nimport { TitleService } from '../../title/services/title.service';\nimport { AutosaveConfiguration } from '../domain/autosave-configuration';\nimport { Subject } from 'rxjs';\nimport {\n  INITIAL_DESCRIPTION,\n  INITIAL_TITLE,\n  SNACKBAR_DURATION,\n  SNACKBAR_INFO,\n} from '../../../domain/entities/constants';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { IconSetConfigurationService } from '../../icon-set-config/services/icon-set-configuration.service';\n\nexport const DRAFTS_TAG = 'autosaveDrafts';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AutosaveService {\n  private autosaveTimer: any;\n  autosavedDraftsChanged$ = new Subject<void>();\n\n  constructor(\n    private autosaveConfiguration: AutosaveConfigurationService,\n    private exportService: ExportService,\n    private iconDictionaryService: IconDictionaryService,\n    private rendererService: RendererService,\n    private snackbar: MatSnackBar,\n    private storageService: StorageService,\n    private titleService: TitleService,\n    private iconSetConfigurationService: IconSetConfigurationService,\n  ) {\n    this.autosaveConfiguration.configuration$.subscribe((configuration) =>\n      this.updateConfiguration(configuration),\n    );\n  }\n\n  loadCurrentDrafts(): Draft[] {\n    const drafts = this.readDrafts();\n    this.sortDrafts(drafts);\n    return drafts;\n  }\n\n  loadDraft(draft: Draft): void {\n    const configFromFile = draft.configAndDST.domain;\n    const config =\n      this.iconSetConfigurationService.createIconSetConfiguration(\n        configFromFile,\n      );\n    const story = JSON.parse(draft.configAndDST.dst);\n\n    this.titleService.updateTitleAndDescription(\n      draft.title,\n      draft.description,\n      false,\n    );\n\n    const actorIcons = this.iconDictionaryService.getElementsOfType(\n      story,\n      ElementTypes.ACTOR,\n    );\n    const workObjectIcons = this.iconDictionaryService.getElementsOfType(\n      story,\n      ElementTypes.WORKOBJECT,\n    );\n    this.iconDictionaryService.updateIconRegistries(\n      actorIcons,\n      workObjectIcons,\n      config,\n    );\n    this.rendererService.importStory(story, true, config, false);\n  }\n\n  removeAllDrafts() {\n    this.storageService.set(DRAFTS_TAG, []);\n    this.autosavedDraftsChanged$.next();\n  }\n\n  loadLatestDraft() {\n    const drafts = this.readDrafts();\n    if (drafts.length === 0) {\n      return;\n    }\n    this.loadDraft(drafts[0]);\n  }\n\n  private updateConfiguration(configuration: AutosaveConfiguration) {\n    this.stopTimer();\n\n    if (configuration.activated) {\n      this.startTimer(configuration.interval, configuration.maxDrafts);\n    }\n  }\n\n  private stopTimer(): void {\n    if (this.autosaveTimer) {\n      clearInterval(this.autosaveTimer);\n      this.autosaveTimer = undefined;\n    }\n  }\n\n  private startTimer(interval: number, maxDrafts: number): void {\n    this.autosaveTimer = setInterval(() => {\n      const savedDrafts = this.loadCurrentDrafts();\n      const newDraft = this.createDraft();\n      let isChanged = maxDrafts > 0;\n      if (savedDrafts.length > 0) {\n        isChanged = isChanged && !this.isSame(newDraft, savedDrafts[0]);\n      }\n      if (isChanged && !this.isDraftEmpty(newDraft)) {\n        savedDrafts.unshift(newDraft);\n        while (savedDrafts.length > maxDrafts) {\n          savedDrafts.pop();\n        }\n        this.writeDrafts(savedDrafts);\n        this.snackbar.open('Draft Saved', undefined, {\n          panelClass: SNACKBAR_INFO,\n          duration: SNACKBAR_DURATION,\n        });\n        this.autosavedDraftsChanged$.next();\n      }\n    }, interval * 1000);\n  }\n\n  private isDraftEmpty(draft: Draft) {\n    const configAndDST = draft.configAndDST ?? { dst: '[]' };\n    return (\n      draft.title === INITIAL_TITLE &&\n      draft.description === INITIAL_DESCRIPTION &&\n      JSON.parse(configAndDST.dst).length === 0\n    );\n  }\n\n  private isSame(a: Draft, b: Draft) {\n    return (\n      a.title === b.title &&\n      a.description === b.description &&\n      JSON.stringify(a.configAndDST) === JSON.stringify(b.configAndDST)\n    );\n  }\n\n  private writeDrafts(drafts: Draft[]) {\n    this.storageService.set(DRAFTS_TAG, drafts);\n  }\n\n  private readDrafts(): Draft[] {\n    return this.storageService.get(DRAFTS_TAG) ?? [];\n  }\n\n  private createDraft(): Draft {\n    const dst = JSON.stringify(this.rendererService.getStory(), null, 2);\n    const configAndDST = this.exportService.createConfigAndDST(dst);\n\n    const date = new Date().toString().slice(0, 25);\n\n    return {\n      title: this.titleService.getTitle(),\n      description: this.titleService.getDescription(),\n      configAndDST,\n      date,\n    };\n  }\n\n  private sortDrafts(drafts: Draft[]): void {\n    drafts.sort((a: Draft, b: Draft) => {\n      const aDate = Date.parse(a.date);\n      const bDate = Date.parse(b.date);\n      return aDate > bDate ? 0 : 1;\n    });\n  }\n}\n","export class ExportDialogData {\n  title: string;\n  options: ExportOption[];\n\n  constructor(title: string, options: ExportOption[]) {\n    this.title = title;\n    this.options = options;\n  }\n}\n\nexport class ExportOption {\n  text: string;\n  fn: any;\n  tooltip: string;\n\n  constructor(text: string, tooltip: string, fn: any) {\n    this.text = text;\n    this.tooltip = tooltip;\n    this.fn = fn;\n  }\n}\n","export class ConfigAndDST {\n  domain: any;\n  dst: any;\n\n  constructor(domain: any, dst: any) {\n    this.domain = domain;\n    this.dst = dst;\n  }\n}\n\nexport const testConfigAndDst: ConfigAndDST = {\n  domain: JSON.parse(\n    '{\"name\":\"\",' +\n      '\"actors\":{\"Person\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\n      '<path d=\\\\\"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z\\\\\"/>' +\n      '<path d=\\\\\"M0 0h24v24H0z\\\\\" fill=\\\\\"none\\\\\"/></svg>\",' +\n      '\"Group\":\"<svg xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\" width=\\\\\"48\\\\\" height=\\\\\"48\\\\\" viewBox=\\\\\"0 0 24 26\\\\\">' +\n      '<path d=\\\\\"M0 0h24v24H0z\\\\\" fill=\\\\\"none\\\\\"/>' +\n      '<path d=\\\\\"M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.67-3.3-1-4.5-1C5.33 13 1 14.08 1 16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4 4.5h-10v-1.25c0-.54 2.56-1.75 5-1.75s5 1.21 5 1.75v1.25zm9 0H14v-1.25c0-.46-.2-.86-.52-1.22.88-.3 1.96-.53 3.02-.53 2.44 0 5 1.21 5 1.75v1.25zM7.5 12c1.93 0 3.5-1.57 3.5-3.5S9.43 5 7.5 5 4 6.57 4 8.5 5.57 12 7.5 12zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 5.5c1.93 0 3.5-1.57 3.5-3.5S18.43 5 16.5 5 13 6.57 13 8.5s1.57 3.5 3.5 3.5zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z\\\\\"/></svg>\",' +\n      '\"System\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\n      '<path d=\\\\\"M20,18c1.1,0,2-0.9,2-2V6c0-1.1-0.9-2-2-2H4C2.9,4,2,4.9,2,6v10c0,1.1,0.9,2,2,2H0v2h24v-2H20z M4,6h16v10H4V6z\\\\\"/></svg>\"},' +\n      '\"workObjects\":{\"Document\":\"<svg xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\" width=\\\\\"24\\\\\" height=\\\\\"24\\\\\" viewBox=\\\\\"0 0 24 26\\\\\">' +\n      '<path fill=\\\\\"none\\\\\" d=\\\\\"M0 0h24v24H0V0z\\\\\"/><path d=\\\\\"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z\\\\\"/></svg>\",' +\n      '\"Folder\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\n      '<path fill=\\\\\"none\\\\\" d=\\\\\"M0,0h24v24H0V0z\\\\\"/>' +\n      '<path d=\\\\\"M9.17,6l2,2H20v10L4,18V6H9.17 M10,4H4C2.9,4,2.01,4.9,2.01,6L2,18c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V8c0-1.1-0.9-2-2-2 h-8L10,4L10,4z\\\\\"/></svg>\",' +\n      '\"Call\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\n      '<path fill=\\\\\"none\\\\\" d=\\\\\"M0,0h24v24H0V0z\\\\\"/><path d=\\\\\"M6.54,5C6.6,5.89,6.75,6.76,6.99,7.59l-1.2,1.2C5.38,7.59,5.12,6.32,5.03,5H6.54 M16.4,17.02c0.85,0.24,1.72,0.39,2.6,0.45 v1.49c-1.32-0.09-2.59-0.35-3.8-0.75L16.4,17.02 M7.5,3H4C3.45,3,3,3.45,3,4c0,9.39,7.61,17,17,17c0.55,0,1-0.45,1-1v-3.49\\\\tc0-0.55-0.45-1-1-1c-1.24,0-2.45-0.2-3.57-0.57c-0.1-0.04-0.21-0.05-0.31-0.05c-0.26,0-0.51,0.1-0.71,0.29l-2.2,2.2 c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2C9.1,8.31,9.18,7.92,9.07,7.57C8.7,6.45,8.5,5.25,8.5,4C8.5,3.45,8.05,3,7.5,3L7.5,3z\\\\\"/></svg>\",' +\n      '\"Email\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\"><path fill=\\\\\"none\\\\\" d=\\\\\"M0,0h24v24H0V0z\\\\\"/>' +\n      '<path fill-opacity=\\\\\"0.9\\\\\" d=\\\\\"M12,1.95c-5.52,0-10,4.48-10,10s4.48,10,10,10h5v-2h-5c-4.34,0-8-3.66-8-8s3.66-8,8-8s8,3.66,8,8v1.43 c0,0.79-0.71,1.57-1.5,1.57S17,14.17,17,13.38v-1.43c0-2.76-2.24-5-5-5s-5,2.24-5,5s2.24,5,5,5c1.38,0,2.64-0.56,3.54-1.47 c0.65,0.89,1.77,1.47,2.96,1.47c1.97,0,3.5-1.6,3.5-3.57v-1.43C22,6.43,17.52,1.95,12,1.95z M12,14.95c-1.66,0-3-1.34-3-3 s1.34-3,3-3s3,1.34,3,3S13.66,14.95,12,14.95z\\\\\"/></svg>\",' +\n      '\"Conversation\":\"<svg height=\\\\\"48\\\\\" viewBox=\\\\\"0 0 24 26\\\\\" width=\\\\\"48\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\n      '<path d=\\\\\"M0 0h24v24H0V0z\\\\\" fill=\\\\\"none\\\\\"/><path d=\\\\\"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z\\\\\"/></svg>\",' +\n      '\"Info\":\"<svg height=\\\\\"48\\\\\" viewBox=\\\\\"0 0 24 26\\\\\" width=\\\\\"48\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\"><path d=\\\\\"M0 0h24v24H0z\\\\\" fill=\\\\\"none\\\\\"/>' +\n      '<path d=\\\\\"M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z\\\\\"/>' +\n      '</svg>\"}}',\n  ),\n  dst:\n    '[' +\n    '{\"type\":\"domainStory:workObjectDocument\",\"name\":\"\",\"id\":\"shape_3792\",\"$type\":\"Element\",\"di\":{},\"$descriptor\":{},\"pickedColor\":\"black\",\"x\":302,\"y\":102},' +\n    '{\"type\":\"domainStory:actorPerson\",\"name\":\"\",\"id\":\"shape_4666\",\"$type\":\"Element\",\"di\":{},\"$descriptor\":{},\"pickedColor\":\"black\",\"x\":103,\"y\":93},' +\n    '{\"type\":\"domainStory:activity\",\"name\":\"\",\"id\":\"connection_4884\",\"$type\":\"Element\",\"di\":{},\"$descriptor\":{},\"pickedColor\":\"black\",\"number\":1,' +\n    '\"waypoints\":[{\"original\":{\"x\":141,\"y\":131},\"x\":186,\"y\":133},{\"original\":{\"x\":340,\"y\":140},\"x\":302,\"y\":138}],' +\n    '\"source\":\"shape_4666\",\"target\":\"shape_3792\"}]',\n};\n","export const SVG_LINK = 'http://www.w3.org/2000/svg';\nexport const X_OFFSET_UTIL = '8';\nexport const TEXTSPAN_TITLE_HEIGHT = 30;\nexport const TEXTSPAN_DESCRIPTION_HEIGHT = 15;\nexport const DEFAULT_PADDING = 15;\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { ExportDialogData } from 'src/app/tools/export/domain/dialog/exportDialogData';\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\n\n@Component({\n  selector: 'app-export-dialog',\n  templateUrl: './export-dialog.component.html',\n  styleUrls: ['./export-dialog.component.scss'],\n})\nexport class ExportDialogComponent implements OnInit {\n  title: string;\n  options: {\n    text: string;\n    tooltip: string;\n    fn: any;\n  }[];\n  withTitle: BehaviorSubject<boolean>;\n  useWhiteBackground: BehaviorSubject<boolean>;\n\n  constructor(\n    private dialogRef: MatDialogRef<ExportDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) data: ExportDialogData,\n  ) {\n    this.withTitle = new BehaviorSubject<boolean>(true);\n    this.useWhiteBackground = new BehaviorSubject<boolean>(true);\n    this.title = data.title;\n    this.options = data.options;\n  }\n\n  ngOnInit(): void {}\n\n  doOption(i: number): void {\n    this.options[i].fn(this.withTitle.value, this.useWhiteBackground.value);\n    this.close();\n  }\n\n  close(): void {\n    this.dialogRef.close();\n  }\n\n  updateWithTitle($event: Event) {\n    // @ts-ignore\n    this.withTitle.next($event.target.checked);\n  }\n\n  updateUseWhiteBackground($event: Event) {\n    // @ts-ignore\n    this.useWhiteBackground.next($event.target.checked);\n  }\n}\n","<mat-dialog-content>\n  <h2>{{ title }}</h2>\n  <label>\n    <input\n      type=\"checkbox\"\n      [checked]=\"withTitle | async\"\n      (change)=\"updateWithTitle($event)\"\n    />\n    Add title and description to image\n  </label>\n  <br />\n  <label>\n    <input\n      type=\"checkbox\"\n      [checked]=\"useWhiteBackground | async\"\n      (change)=\"updateUseWhiteBackground($event)\"\n    />\n    Add white background to SVG (default: transparent)\n  </label>\n</mat-dialog-content>\n<mat-dialog-actions>\n  <br />\n\n  <div>\n    <button mat-flat-button (click)=\"close()\">Cancel</button>\n    @for (option of options; track option; let i = $index) {\n      <button\n        mat-stroked-button\n        class=\"mr-1\"\n        [title]=\"option.tooltip\"\n        (click)=\"doOption(i)\"\n      >\n        {{ option.text }}\n      </button>\n    }\n  </div>\n</mat-dialog-actions>\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { IconSetConfigurationService } from 'src/app/tools/icon-set-config/services/icon-set-configuration.service';\nimport { sanitizeForDesktop } from 'src/app/utils/sanitizer';\nimport { TitleService } from 'src/app/tools/title/services/title.service';\nimport { ConfigAndDST } from 'src/app/tools/export/domain/export/configAndDst';\nimport { DirtyFlagService } from 'src/app/domain/services/dirty-flag.service';\nimport { PngService } from 'src/app/tools/export/services/png.service';\nimport { SvgService } from 'src/app/tools/export/services/svg.service';\nimport { Subscription } from 'rxjs';\nimport { RendererService } from '../../modeler/services/renderer.service';\nimport { HtmlPresentationService } from './html-presentation.service';\nimport { formatDate } from '@angular/common';\nimport { environment } from '../../../../environments/environment';\nimport {\n  ExportDialogData,\n  ExportOption,\n} from '../domain/dialog/exportDialogData';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { ExportDialogComponent } from '../presentation/export-dialog/export-dialog.component';\nimport {\n  SNACKBAR_DURATION,\n  SNACKBAR_INFO,\n} from '../../../domain/entities/constants';\nimport { ModelerService } from '../../modeler/services/modeler.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { DialogService } from '../../../domain/services/dialog.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ExportService implements OnDestroy {\n  titleSubscription: Subscription;\n  descriptionSubscription: Subscription;\n\n  title = '';\n  description = '';\n\n  constructor(\n    private configurationService: IconSetConfigurationService,\n    private titleService: TitleService,\n    private dirtyFlagService: DirtyFlagService,\n    private pngService: PngService,\n    private svgService: SvgService,\n    private htmlPresentationService: HtmlPresentationService,\n    private rendererService: RendererService,\n    private modelerService: ModelerService,\n    private dialogService: DialogService,\n    private snackbar: MatSnackBar,\n  ) {\n    this.titleSubscription = this.titleService.title$.subscribe(\n      (title: string) => {\n        this.title = title;\n      },\n    );\n    this.descriptionSubscription = this.titleService.description$.subscribe(\n      (description: string) => {\n        this.description = description;\n      },\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.titleSubscription.unsubscribe();\n    this.descriptionSubscription.unsubscribe();\n  }\n\n  isDomainStoryExportable(): boolean {\n    return this.rendererService.getStory().length >= 1;\n  }\n\n  createConfigAndDST(DomainStory: any): ConfigAndDST {\n    return new ConfigAndDST(\n      this.configurationService.getCurrentConfigurationForExport(),\n      DomainStory,\n    );\n  }\n\n  downloadDST(): void {\n    const dst = this.getStoryForDownload();\n    const configAndDST = this.createConfigAndDST(dst);\n    const json = JSON.stringify(configAndDST, null, 2);\n\n    const filename = sanitizeForDesktop(\n      this.title + '_' + this.getCurrentDateString(),\n    );\n\n    this.downloadFile(\n      json,\n      'data:text/plain;charset=utf-8,',\n      filename,\n      '.egn',\n      true,\n    );\n  }\n\n  private downloadFile(\n    data: string,\n    datatype: string,\n    filename: string,\n    fileEnding: string,\n    makeClean: boolean,\n  ) {\n    const element = document.createElement('a');\n    element.setAttribute('href', datatype + encodeURIComponent(data));\n    element.setAttribute('download', filename + fileEnding);\n\n    element.style.display = 'none';\n    document.body.appendChild(element);\n\n    element.click();\n\n    if (makeClean) {\n      this.dirtyFlagService.makeClean();\n    }\n\n    document.body.removeChild(element);\n  }\n\n  downloadSVG(withTitle: boolean, useWhiteBackground: boolean): void {\n    const story = this.getStoryForDownload();\n    const dst = this.createConfigAndDST(story);\n\n    const svgData = this.svgService.createSVGData(\n      this.title,\n      this.description,\n      dst,\n      withTitle,\n      useWhiteBackground,\n    );\n\n    this.downloadFile(\n      svgData,\n      'data:application/bpmn20-xml;charset=UTF-8,',\n      sanitizeForDesktop(this.title + '_' + this.getCurrentDateString()),\n      '.egn.svg',\n      true,\n    );\n  }\n\n  downloadPNG(withTitle: boolean): void {\n    const canvas = document.getElementById('canvas');\n    if (canvas) {\n      const container = canvas.getElementsByClassName('djs-container');\n      const svgElements = container[0].getElementsByTagName('svg');\n      const outerSVGElement = svgElements[0];\n      const viewport = outerSVGElement.getElementsByClassName('viewport')[0];\n      const layerBase = viewport.getElementsByClassName('layer-base')[0];\n\n      const image = document.createElement('img');\n\n      // removes unwanted black dots in image\n      let svg = this.pngService.extractSVG(viewport, outerSVGElement);\n\n      svg = this.pngService.prepareSVG(\n        svg,\n        layerBase,\n        this.description,\n        this.title,\n        withTitle,\n      );\n\n      image.onload = () => {\n        const tempCanvas = document.createElement('canvas');\n\n        // add a 10px buffer to the right and lower boundary\n        tempCanvas.width = this.pngService.getWidth() + 10;\n        tempCanvas.height = this.pngService.getHeight() + 10;\n\n        const ctx = tempCanvas.getContext('2d');\n        if (ctx) {\n          // fill with white background\n          ctx.rect(0, 0, tempCanvas.width, tempCanvas.height);\n          ctx.fillStyle = 'white';\n          ctx.fill();\n\n          ctx.drawImage(image, 0, 0);\n        }\n\n        const png64 = tempCanvas.toDataURL('image/png');\n        const ele = document.createElement('a');\n        ele.setAttribute(\n          'download',\n          sanitizeForDesktop(this.title) +\n            '_' +\n            this.getCurrentDateString() +\n            '.png',\n        );\n        ele.setAttribute('href', png64);\n        document.body.appendChild(ele);\n        ele.click();\n        document.body.removeChild(ele);\n\n        // image source has to be removed to circumvent browser caching\n        image.src = '';\n      };\n      image.onchange = image.onload;\n\n      image.width = this.pngService.getWidth();\n      image.height = this.pngService.getHeight();\n\n      image.src = 'data:image/svg+xml,' + svg;\n    }\n  }\n\n  downloadHTMLPresentation(modeler: any): void {\n    const filename = sanitizeForDesktop(\n      this.title + '_' + this.getCurrentDateString(),\n    );\n    this.htmlPresentationService\n      .downloadHTMLPresentation(filename, modeler)\n      .then();\n  }\n\n  private getStoryForDownload(): unknown[] {\n    const story = this.rendererService.getStory() as unknown[];\n    story.push({ info: this.titleService.getDescription() });\n    story.push({ version: environment.version });\n    return story;\n  }\n\n  private getCurrentDateString(): string {\n    return formatDate(new Date(), 'YYYY-MM-dd', 'en-GB');\n  }\n\n  openDownloadDialog() {\n    if (this.isDomainStoryExportable()) {\n      const SVGDownloadOption = new ExportOption(\n        'SVG',\n        'Download an SVG-Image with the Domain-Story embedded. Can be used to save and share your Domain-Story.',\n        (withTitle: boolean, useWhiteBackground: boolean) =>\n          this.downloadSVG(withTitle, useWhiteBackground),\n      );\n      const EGNDownloadOption = new ExportOption(\n        'EGN',\n        'Download an EGN-File with the Domain-Story. Can be used to save and share your Domain-Story.',\n        () => this.downloadDST(),\n      );\n      const PNGDownloadOption = new ExportOption(\n        'PNG',\n        'Download a PNG-Image of the Domain-Story. This does not include the Domain-Story!',\n        (withTitle: boolean) => this.downloadPNG(withTitle),\n      );\n      const HTMLDownloadOption = new ExportOption(\n        'HTML-Presentation',\n        'Download an HTML-Presentation. This does not include the Domain-Story!',\n        () => this.downloadHTMLPresentation(this.modelerService.getModeler()),\n      );\n\n      const config = new MatDialogConfig();\n      config.disableClose = false;\n      config.autoFocus = true;\n      config.data = new ExportDialogData('Export', [\n        SVGDownloadOption,\n        EGNDownloadOption,\n        PNGDownloadOption,\n        HTMLDownloadOption,\n      ]);\n\n      this.dialogService.openDialog(ExportDialogComponent, config);\n    } else {\n      this.snackbar.open('No Domain Story to be exported', undefined, {\n        duration: SNACKBAR_DURATION,\n        panelClass: SNACKBAR_INFO,\n      });\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { sanitizeForDesktop } from '../../../utils/sanitizer';\nimport { ReplayService } from '../../replay/services/replay.service';\n// @ts-ignore\nimport doT from 'dot';\nimport { TitleService } from '../../title/services/title.service';\nimport { StoryCreatorService } from '../../replay/services/story-creator.service';\n\n@Injectable({\n  providedIn: 'root',\n})\n/**\n * Initial idea and PR from https://github.com/indika-dev\n */\nexport class HtmlPresentationService {\n  constructor(\n    private replayService: ReplayService,\n    private titleService: TitleService,\n    private storyCreatorService: StoryCreatorService,\n  ) {}\n\n  private multiplexSecret: any;\n  private multiplexId: any;\n\n  private static viewBoxCoordinates(svg: any): any {\n    const ViewBoxCoordinate =\n      /width=\"([^\"]+)\"\\s+height=\"([^\"]+)\"\\s+viewBox=\"([^\"]+)\"/;\n    const match = svg.match(ViewBoxCoordinate);\n    return match[3];\n  }\n\n  /*\n  ---------------------------\n  SVG handling starts here\n  ----------------------------\n  */\n\n  async downloadHTMLPresentation(\n    filename: string,\n    modeler: any,\n  ): Promise<void> {\n    const svgData = [];\n    // export all sentences of domain story\n    this.replayService.startReplay();\n    try {\n      const result = await modeler.saveSVG({});\n      this.fixActivityMarkersForEachSentence(\n        result,\n        this.replayService.getCurrentSentenceNumber(),\n      );\n      svgData.push({\n        content: HtmlPresentationService.createSVGData(result.svg),\n        transition: 'slide',\n      });\n    } catch (err) {\n      alert('There was an error exporting the SVG.\\n' + err);\n    }\n    while (\n      this.replayService.getCurrentSentenceNumber() <\n      this.replayService.getMaxSentenceNumber()\n    ) {\n      this.replayService.nextSentence();\n      try {\n        const result = await modeler.saveSVG({});\n        this.fixActivityMarkersForEachSentence(\n          result,\n          this.replayService.getCurrentSentenceNumber(),\n        );\n        svgData.push({\n          content: HtmlPresentationService.createSVGData(result.svg),\n          transition: 'slide',\n        });\n      } catch (err) {\n        alert('There was an error exporting the SVG.\\n' + err);\n      }\n    }\n    this.replayService.stopReplay();\n\n    // create download for presentation\n    const revealjsTemplate = document.getElementById('revealjs-template');\n    const dots = doT.template(revealjsTemplate?.innerHTML);\n    const revealjsData = {\n      script: 'script',\n      title: this.titleService.getTitle(),\n      description: this.titleService.getDescription(),\n      sentences: svgData,\n      multiplexSecret: this.multiplexSecret,\n      multiplexId: this.multiplexId,\n    };\n    const element = document.createElement('a');\n    element.setAttribute(\n      'href',\n      'data:text/html;charset=UTF-8,' +\n        this.fixMalformedHtmlScript(dots, revealjsData),\n    );\n    element.setAttribute('download', sanitizeForDesktop(filename) + '.html');\n    element.style.display = 'none';\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  }\n\n  private fixMalformedHtmlScript(\n    dots: any,\n    revealjsData: {\n      multiplexId: any;\n      sentences: any[];\n      multiplexSecret: any;\n      description: string;\n      title: string;\n      script: string;\n    },\n  ) {\n    return dots(revealjsData).replace('</ script', '</script');\n  }\n\n  // tslint:disable-next-line:align\n  private static createSVGData(svg: any): string {\n    let data = structuredClone(svg);\n\n    // to ensure that the title and description are inside the SVG container and do not overlap with any elements,\n    // we change the confines of the SVG viewbox\n    let viewBoxIndex = data.indexOf('width=\"');\n\n    const viewBox = HtmlPresentationService.viewBoxCoordinates(data);\n\n    let xLeft: number;\n    let width: number;\n    let yUp: number;\n    let height: number;\n    const splitViewBox = viewBox.split(/\\s/);\n\n    xLeft = +splitViewBox[0];\n    yUp = +splitViewBox[1];\n    width = +splitViewBox[2];\n    height = +splitViewBox[3];\n\n    if (width < 300) {\n      width += 300;\n    }\n\n    const dataStart = data.substring(0, viewBoxIndex);\n    viewBoxIndex = data.indexOf('\" version');\n    const dataEnd = data.substring(viewBoxIndex);\n    dataEnd.substring(viewBoxIndex);\n\n    data = dataStart + this.createBounds(xLeft, yUp, width, height) + dataEnd;\n\n    return encodeURIComponent(data);\n  }\n\n  private static createBounds(\n    xLeft: number,\n    yUp: number,\n    width: number,\n    height: number,\n  ) {\n    return (\n      'width=\"100%\"' +\n      ' height=\"100%\" ' +\n      ' preserveAspectRatio=\"xMidYMid meet\"' +\n      ' viewBox=\"' +\n      xLeft +\n      ' ' +\n      yUp +\n      ' ' +\n      (xLeft + width) +\n      ' ' +\n      (yUp + height)\n    );\n  }\n\n  /**\n   * There is a Problem in the HTML-Presentation, where the Arrow-Heads of the Activities are not shown after the 4th sentence\n   * This is due to the fact, that the marker for the Arrow-Head is defined in each sentence with the same ID\n   * When the 5th sentence is reached, the first marker is set to display none, which propagates to all other markers\n   *\n   * To fix this, for each sentence the marker and its references are renamed\n   */\n  private fixActivityMarkersForEachSentence(\n    result: { svg: string },\n    sectionIndex: number,\n  ): void {\n    const defs = result.svg.substring(\n      result.svg.indexOf('<defs>'),\n      result.svg.indexOf('</defs>') + 7,\n    );\n    const split = defs.split('<marker ');\n\n    let newDefs = split[0];\n\n    for (let i = 1; i < split.length; i++) {\n      const ids = split[i].match(/(id=\"[^\"]*\")/g);\n      ids?.forEach((id) => {\n        const idToReplace = id.substring(4, id.length - 1);\n        const newId =\n          idToReplace.slice(0, id.length - 5) +\n          'customId' +\n          sectionIndex +\n          idToReplace.slice(idToReplace.length - 2);\n        // @ts-ignore\n        result.svg = result.svg.replaceAll(idToReplace, newId);\n      });\n      newDefs += '<marker display= \"block !important\"; ' + split[i];\n    }\n\n    result.svg = result.svg.replace(defs, newDefs);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { createTitleAndDescriptionSVGElement } from 'src/app/tools/export/services/exportUtil';\nimport { BrowserSpecs } from 'src/app/tools/export/domain/export/browserSpecs';\nimport { Box } from 'src/app/tools/export/domain/export/box';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PngService {\n  private width: number;\n  private height: number;\n\n  constructor() {\n    this.width = 0;\n    this.height = 0;\n  }\n\n  private browserSpecs(): BrowserSpecs {\n    const ua = navigator.userAgent;\n    let tem;\n    let M =\n      ua.match(\n        /(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i,\n      ) || [];\n    if (/trident/i.test(M[1])) {\n      tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n      return { name: 'IE', version: tem[1] || '' };\n    }\n    if (M[1] === 'Chrome') {\n      tem = ua.match(/\\b(OPR|Edge)\\/(\\d+)/);\n      if (tem != null) {\n        return { name: tem[1].replace('OPR', 'Opera'), version: tem[2] };\n      }\n    }\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    // tslint:disable-next-line:no-conditional-assignment\n    if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {\n      M.splice(1, 1, tem[1]);\n    }\n    return { name: M[0], version: M[1] };\n  }\n\n  /** Needed for an SVG-Fix in CHrome where the # needs to be replaced by %23 **/\n  URIHashtagFix(svg: string): string {\n    let fix = false;\n\n    const browser = this.browserSpecs();\n\n    const name = browser.name;\n    const version = parseInt(browser.version);\n\n    // only implemented in chrome and firefox at the moment\n    if (name.includes('Chrome')) {\n      if (version >= 72) {\n        fix = true;\n        // https://www.chromestatus.com/features/5656049583390720\n      }\n    } else if (name.includes('Firefox')) {\n      fix = true;\n\n      // versionNumber of implementation unknown\n    }\n    if (fix) {\n      while (svg.includes('#')) {\n        svg = svg.replace('#', '%23');\n      }\n    }\n    return svg;\n  }\n\n  findMostOuterElements(svg: HTMLElement): Box {\n    let xLeft = 0;\n    let xRight = 0;\n    let yUp = 0;\n    let yDown = 0;\n\n    const elements = svg.getElementsByClassName('djs-group');\n\n    // tslint:disable-next-line:prefer-for-of\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      const sub = element.children;\n\n      let elXLeft: number;\n      let elXRight: number;\n      let elYUp: number;\n      let elYDown: number;\n\n      const transform = sub[0].getAttribute('transform');\n      if (transform) {\n        let nums;\n\n        if (transform.includes('matrix')) {\n          transform.replace('matrix(', '');\n          transform.replace(')', '');\n          nums = transform.split(' ');\n          elXLeft = parseInt(nums[4]);\n          elYUp = parseInt(nums[5]);\n        } else {\n          transform.replace('translate(', '');\n          transform.replace(')', '');\n          nums = transform.split(' ');\n          elXLeft = parseInt(nums[0]);\n          elYUp = parseInt(nums[1]);\n        }\n\n        const rects = sub[0].getElementsByTagName('rect');\n        const outerRect = rects[rects.length - 1];\n\n        const width = outerRect.getAttribute('width');\n\n        elXRight = elXLeft + parseInt(width != null ? width : '0');\n        elYDown = elYUp + sub[0].getBoundingClientRect().height;\n      } else {\n        const rects = element.getElementsByTagName('rect');\n        const outerRect = rects[rects.length - 1];\n\n        const x = outerRect.getAttribute('x');\n        const y = outerRect.getAttribute('y');\n\n        elXLeft = parseInt(x != null ? x : '0');\n        elYUp = parseInt(y != null ? y : '0');\n\n        const width = outerRect.getAttribute('width');\n        const height = outerRect.getAttribute('height');\n\n        elXRight = elXLeft + parseInt(width != null ? width : '0');\n        elYDown = elYUp + parseInt(height != null ? height : '0') + 20; // Add 20 px as Padding for text at the bottom\n      }\n      if (elXLeft < xLeft) {\n        xLeft = elXLeft;\n      }\n      if (elXRight > xRight) {\n        xRight = elXRight;\n      }\n      if (elYUp < yUp) {\n        yUp = elYUp;\n      }\n      if (elYDown > yDown) {\n        yDown = elYDown;\n      }\n    }\n\n    yUp -= 75; // we need to adjust yUp to have space for the title and description\n\n    return {\n      xLeft,\n      xRight,\n      yUp,\n      yDown,\n    };\n  }\n\n  prepareSVG(\n    svg: string,\n    layerBase: any,\n    description: string,\n    title: string,\n    withTitle: boolean,\n  ): string {\n    const box = this.findMostOuterElements(layerBase);\n    let viewBoxIndex = svg.indexOf('width=\"');\n\n    this.calculateWidthAndHeight(box);\n\n    const { insertText, dynamicHeightOffset } =\n      createTitleAndDescriptionSVGElement(\n        0,\n        title,\n        description,\n        box.xLeft + 10,\n        box.yUp + 20,\n        this.width,\n      );\n    if (withTitle) {\n      this.height += dynamicHeightOffset;\n    }\n\n    const bounds = this.createBounds(box, dynamicHeightOffset);\n\n    const dataStart = svg.substring(0, viewBoxIndex);\n    viewBoxIndex = svg.indexOf('style=\"');\n\n    const dataEnd = svg.substring(viewBoxIndex);\n    dataEnd.substring(viewBoxIndex);\n\n    svg = dataStart + bounds + dataEnd;\n\n    const insertIndex = svg.indexOf('<g class=\"viewport\">') + 20;\n\n    if (withTitle) {\n      svg = [\n        svg.slice(0, insertIndex),\n        insertText,\n        svg.slice(insertIndex),\n      ].join('');\n    }\n    svg = this.URIHashtagFix(svg);\n\n    return svg;\n  }\n\n  private createBounds(box: Box, extraHeight: number) {\n    return (\n      'width=\"' +\n      this.width +\n      '\" height=\"' +\n      this.height +\n      '\" viewBox=\" ' +\n      box.xLeft +\n      ' ' +\n      (box.yUp - extraHeight) +\n      ' ' +\n      this.width +\n      ' ' +\n      this.height +\n      '\" '\n    );\n  }\n\n  /**\n   * Calculate the Width and Height of the Bounding Box for the PNG so no Parts are cut off\n   */\n  private calculateWidthAndHeight(box: Box): [number, number] {\n    if (box.xLeft < 0) {\n      if (box.xRight < 0) {\n        this.width = Math.abs(box.xLeft - box.xRight);\n      } else {\n        this.width = Math.abs(box.xLeft) + box.xRight;\n      }\n    } else {\n      this.width = box.xRight - box.xLeft;\n    }\n\n    if (box.yUp < 0) {\n      if (box.yDown < 0) {\n        this.height = Math.abs(box.yUp - box.yDown);\n      } else {\n        this.height = Math.abs(box.yUp) + box.yDown;\n      }\n    } else {\n      this.height = box.yDown - box.yUp;\n    }\n\n    // if the domain-Story is smaller than 300px in width or height, increase its dimensions\n    if (this.height < 300) {\n      this.height += 300;\n      box.yUp -= 150;\n      box.yDown += 150;\n    }\n    if (this.width < 300) {\n      this.width += 300;\n      box.xLeft -= 150;\n      box.xRight += 150;\n    }\n    return [this.height, this.width];\n  }\n\n  extractSVG(viewport: any, outerSVGElement: any): string {\n    const layerResizers = viewport.getElementsByClassName('layer-resizers');\n    const layerOverlays = viewport.getElementsByClassName('layer-overlays');\n    const transform = viewport.getAttribute('transform');\n    const translate = viewport.getAttribute('translate');\n\n    if (layerResizers[0]) {\n      layerResizers[0].parentNode.removeChild(layerResizers[0]);\n    }\n    if (layerOverlays[0]) {\n      layerOverlays[0].parentNode.removeChild(layerOverlays[0]);\n    }\n\n    // remove canvas scrolling and scaling before serializeToString of SVG\n    if (transform) {\n      viewport.removeAttribute('transform');\n    }\n    if (translate) {\n      viewport.removeAttribute('translate');\n    }\n\n    const svg = new XMLSerializer().serializeToString(outerSVGElement);\n\n    // re-add canvas scrolling and scaling\n    if (transform) {\n      viewport.setAttribute('transform', transform);\n    }\n    if (translate) {\n      viewport.setAttribute('translate', translate);\n    }\n    return svg;\n  }\n\n  getWidth(): number {\n    return this.width;\n  }\n\n  getHeight(): number {\n    return this.height;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ConfigAndDST } from 'src/app/tools/export/domain/export/configAndDst';\nimport { createTitleAndDescriptionSVGElement } from 'src/app/tools/export/services/exportUtil';\nimport { ModelerService } from '../../modeler/services/modeler.service';\nimport {\n  DEFAULT_PADDING,\n  TEXTSPAN_TITLE_HEIGHT,\n} from '../domain/export/exportConstants';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SvgService {\n  private cacheData = '';\n\n  constructor(private modelerService: ModelerService) {}\n\n  createSVGData(\n    title: string,\n    description: string,\n    dst: ConfigAndDST,\n    withTitle: boolean,\n    useWhiteBackground: boolean,\n  ): string {\n    this.cacheData = this.modelerService.getEncoded();\n\n    let domainStorySvg = structuredClone(this.cacheData);\n\n    let viewBoxIndex = domainStorySvg.indexOf('width=\"');\n\n    let { width, height, viewBox } = this.viewBoxCoordinates(domainStorySvg);\n\n    // The value of the viewBox attribute is a list of four numbers separated by whitespace\n    // and/or a comma: min-x, min-y, width, and height. min-x and min-y represent the smallest\n    // X and Y coordinates that the viewBox may have (the origin coordinates of the viewBox)\n    // and the width and height specify the viewBox size. The resulting viewBox is a\n    // rectangle in user space mapped to the bounds of the viewport of an SVG element.\n    // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox\n\n    let min_x: number;\n    let viewBoxWidth: number;\n    let min_y: number;\n    let viewBoxHeight: number;\n    const splitViewBox = viewBox.split(/\\s/);\n\n    min_x = +splitViewBox[0];\n    min_y = +splitViewBox[1];\n    viewBoxWidth = +splitViewBox[2];\n    viewBoxHeight = +splitViewBox[3];\n\n    // Set minimum width to ensure title and description are displayed reasonably\n    if (viewBoxWidth < 300) {\n      viewBoxWidth += 300;\n      width += 300;\n    }\n\n    const { insertText, dynamicHeightOffset } =\n      createTitleAndDescriptionSVGElement(\n        0,\n        title,\n        description,\n        min_x,\n        min_y,\n        width,\n      );\n\n    const bounds = this.createBounds(\n      width,\n      height,\n      min_x,\n      min_y,\n      viewBoxWidth,\n      viewBoxHeight,\n      withTitle,\n      dynamicHeightOffset,\n    );\n\n    const dataStart = domainStorySvg.substring(0, viewBoxIndex);\n    viewBoxIndex = domainStorySvg.indexOf('\" version');\n\n    const dataEnd = domainStorySvg.substring(viewBoxIndex);\n    dataEnd.substring(viewBoxIndex);\n\n    domainStorySvg = dataStart + bounds + dataEnd;\n\n    const insertIndex = this.findIndexToInsertData(domainStorySvg);\n\n    if (withTitle) {\n      domainStorySvg =\n        domainStorySvg.slice(0, insertIndex) +\n        insertText +\n        domainStorySvg.slice(insertIndex);\n    }\n\n    if (useWhiteBackground) {\n      const svgIndex = domainStorySvg.indexOf('width=\"');\n      const backgroundColorWhite = 'style=\"background-color:white\" ';\n      domainStorySvg =\n        domainStorySvg.slice(0, svgIndex) +\n        backgroundColorWhite +\n        domainStorySvg.slice(svgIndex);\n    }\n\n    return this.appendDST(domainStorySvg, dst);\n  }\n\n  private findIndexToInsertData(data: string) {\n    let insertIndex = data.indexOf('</defs>');\n    if (insertIndex < 0) {\n      insertIndex = data.indexOf('version=\"1.2\">') + 14;\n    } else {\n      insertIndex += 7;\n    }\n    return insertIndex;\n  }\n\n  private createBounds(\n    width: number,\n    height: number,\n    min_x: number,\n    min_y: number,\n    viewBoxWidth: number,\n    viewBoxHeight: number,\n    withTitle: boolean,\n    dynamicHeightOffset: number,\n  ): string {\n    height = withTitle\n      ? height + dynamicHeightOffset + TEXTSPAN_TITLE_HEIGHT\n      : height;\n    min_x = min_x - DEFAULT_PADDING;\n    min_y = withTitle\n      ? min_y - dynamicHeightOffset - TEXTSPAN_TITLE_HEIGHT\n      : min_y;\n    viewBoxHeight = withTitle\n      ? viewBoxHeight +\n        dynamicHeightOffset +\n        TEXTSPAN_TITLE_HEIGHT +\n        DEFAULT_PADDING\n      : viewBoxHeight;\n    viewBoxWidth = viewBoxWidth + DEFAULT_PADDING;\n\n    return `width=\"${width}\" height=\"${height}\" viewBox=\"${min_x} ${min_y} ${viewBoxWidth} ${viewBoxHeight}`;\n  }\n\n  private viewBoxCoordinates(svg: string): {\n    width: number;\n    height: number;\n    viewBox: string;\n  } {\n    const ViewBoxCoordinate =\n      /width=\"([^\"]+)\"\\s+height=\"([^\"]+)\"\\s+viewBox=\"([^\"]+)\"/;\n    const match = svg.match(ViewBoxCoordinate);\n    if (match) {\n      return { width: +match[1], height: +match[2], viewBox: match[3] };\n    }\n    return { width: 0, height: 0, viewBox: '' };\n  }\n\n  private appendDST(data: string, dst: ConfigAndDST): string {\n    data += '\\n<!-- <DST>\\n' + JSON.stringify(dst, null, 2) + '\\n </DST> -->';\n    return data;\n  }\n}\n","import { Dictionary } from 'src/app/domain/entities/dictionary';\n\nexport let appendedIcons = new Dictionary();\nexport const allIcons = {\n  Person:\n    '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>',\n  Group:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"48\" viewBox=\"0 0 24 26\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.67-3.3-1-4.5-1C5.33 13 1 14.08 1 16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4 4.5h-10v-1.25c0-.54 2.56-1.75 5-1.75s5 1.21 5 1.75v1.25zm9 0H14v-1.25c0-.46-.2-.86-.52-1.22.88-.3 1.96-.53 3.02-.53 2.44 0 5 1.21 5 1.75v1.25zM7.5 12c1.93 0 3.5-1.57 3.5-3.5S9.43 5 7.5 5 4 6.57 4 8.5 5.57 12 7.5 12zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 5.5c1.93 0 3.5-1.57 3.5-3.5S18.43 5 16.5 5 13 6.57 13 8.5s1.57 3.5 3.5 3.5zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z\"/></svg>',\n  Pet: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><circle cx=\"4.5\" cy=\"9.5\" r=\"2.5\"/><circle cx=\"9\" cy=\"5.5\" r=\"2.5\"/><circle cx=\"15\" cy=\"5.5\" r=\"2.5\"/><circle cx=\"19.5\" cy=\"9.5\" r=\"2.5\"/><path d=\"M17.34 14.86c-.87-1.02-1.6-1.89-2.48-2.91-.46-.54-1.05-1.08-1.75-1.32-.11-.04-.22-.07-.33-.09-.25-.04-.52-.04-.78-.04s-.53 0-.79.05c-.11.02-.22.05-.33.09-.7.24-1.28.78-1.75 1.32-.87 1.02-1.6 1.89-2.48 2.91-1.31 1.31-2.92 2.76-2.62 4.79.29 1.02 1.02 2.03 2.33 2.32.73.15 3.06-.44 5.54-.44h.18c2.48 0 4.81.58 5.54.44 1.31-.29 2.04-1.31 2.33-2.32.31-2.04-1.3-3.49-2.61-4.8z\"/></svg>',\n  Conversation:\n    '<svg height=\"48\" viewBox=\"0 0 24 26\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z\"/></svg>',\n  World:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-.61.08-1.21.21-1.78L8.99 15v1c0 1.1.9 2 2 2v1.93C7.06 19.43 4 16.07 4 12zm13.89 5.4c-.26-.81-1-1.4-1.9-1.4h-1v-3c0-.55-.45-1-1-1h-6v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41C17.92 5.77 20 8.65 20 12c0 2.08-.81 3.98-2.11 5.4z\"/></svg>',\n  Store:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18.36 9l.6 3H5.04l.6-3h12.72M20 4H4v2h16V4zm0 3H4l-1 5v2h1v6h10v-6h4v6h2v-6h1v-2l-1-5zM6 18v-4h6v4H6z\"/></svg>',\n  Theater:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm6 10h-4V5h4v14zm4-2h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z\"/></svg>',\n  Business:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z\"/></svg>',\n  Water:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M17 16.99c-1.35 0-2.2.42-2.95.8-.65.33-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.65.33-1.17.6-2.05.6v1.95c1.35 0 2.2-.42 2.95-.8.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.42 2.95-.8c.65-.33 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8v-1.95c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8zm0-4.45c-1.35 0-2.2.43-2.95.8-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.65.32-1.17.6-2.05.6v1.95c1.35 0 2.2-.43 2.95-.8.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.58.8 2.95.8v-1.95c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8zm2.95-8.08c-.75-.38-1.58-.8-2.95-.8s-2.2.42-2.95.8c-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.37-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.65.33-1.17.6-2.05.6v1.93c1.35 0 2.2-.43 2.95-.8.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8V5.04c-.9 0-1.4-.25-2.05-.58zM17 8.09c-1.35 0-2.2.43-2.95.8-.65.35-1.15.6-2.05.6s-1.4-.25-2.05-.6c-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.65.35-1.15.6-2.05.6v1.95c1.35 0 2.2-.43 2.95-.8.65-.32 1.18-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8V9.49c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8z\"/></svg>',\n  Hotel:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M7 14c1.66 0 3-1.34 3-3S8.66 8 7 8s-3 1.34-3 3 1.34 3 3 3zm0-4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm12-3h-8v8H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4zm2 8h-8V9h6c1.1 0 2 .9 2 2v4z\"/></svg>',\n  Dining:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M8.1 13.34l2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z\"/></svg>',\n  'Gas-station':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19.77 7.23l.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-.69-.28-1.32-.73-1.77zM12 13.5V19H6v-7h6v1.5zm0-3.5H6V5h6v5zm6 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z\"/></svg>',\n  'Meeting-room':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 19V4h-4V3H5v16H3v2h12V6h2v15h4v-2h-2zm-6 0H7V5h6v14zm-3-8h2v2h-2z\"/></svg>',\n  Courthouse:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M6.5 10h-2v7h2v-7zm6 0h-2v7h2v-7zm8.5 9H2v2h19v-2zm-2.5-9h-2v7h2v-7zm-7-6.74L16.71 6H6.29l5.21-2.74m0-2.26L2 6v2h19V6l-9.5-5z\"/></svg>',\n  Flag: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z\"/></svg>',\n  Place:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zM7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9z\"/><circle cx=\"12\" cy=\"9\" r=\"2.5\"/></svg>',\n  Car: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.85 7h10.29l1.08 3.11H5.77L6.85 7zM19 17H5v-5h14v5z\"/><circle cx=\"7.5\" cy=\"14.5\" r=\"1.5\"/><circle cx=\"16.5\" cy=\"14.5\" r=\"1.5\"/></svg>',\n  Bus: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2c-4.42 0-8 .5-8 4v10c0 .88.39 1.67 1 2.22V20c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h8v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1.78c.61-.55 1-1.34 1-2.22V6c0-3.5-3.58-4-8-4zm5.66 2.99H6.34C6.89 4.46 8.31 4 12 4s5.11.46 5.66.99zm.34 2V10H6V6.99h12zm-.34 9.74l-.29.27H6.63l-.29-.27C6.21 16.62 6 16.37 6 16v-4h12v4c0 .37-.21.62-.34.73z\"/><circle cx=\"8.5\" cy=\"14.5\" r=\"1.5\"/><circle cx=\"15.5\" cy=\"14.5\" r=\"1.5\"/></svg>',\n  Train:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><circle cx=\"8.5\" cy=\"14.5\" r=\"1.5\"/><circle cx=\"15.5\" cy=\"14.5\" r=\"1.5\"/><path d=\"M12 2c-4 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19L6 20.5v.5h2l2-2h4l2 2h2v-.5L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-4-4-8-4zm0 2c3.51 0 4.96.48 5.57 1H6.43c.61-.52 2.06-1 5.57-1zM6 7h5v3H6V7zm12 8.5c0 .83-.67 1.5-1.5 1.5h-9c-.83 0-1.5-.67-1.5-1.5V12h12v3.5zm0-5.5h-5V7h5v3z\"/></svg>',\n  Truck:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zm-.5 1.5l1.96 2.5H17V9.5h2.5zM6 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm2.22-3c-.55-.61-1.33-1-2.22-1s-1.67.39-2.22 1H3V6h12v9H8.22zM18 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z\"/></svg>',\n  Taxi: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18.92 6.01C18.72 5.42 18.16 5 17.5 5H15V3H9v2H6.5c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.85 7h10.29l1.04 3H5.81l1.04-3zM19 17H5v-4.66l.12-.34h13.77l.11.34V17z\"/><circle cx=\"7.5\" cy=\"14.5\" r=\"1.5\"/><circle cx=\"16.5\" cy=\"14.5\" r=\"1.5\"/></svg>',\n  Bike: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M15.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM5 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5zm5.8-10l2.4-2.4.8.8c1.3 1.3 3 2.1 5.1 2.1V9c-1.5 0-2.7-.6-3.6-1.5l-1.9-1.9c-.5-.4-1-.6-1.6-.6s-1.1.2-1.4.6L7.8 8.4c-.4.4-.6.9-.6 1.4 0 .6.2 1.1.6 1.4L11 14v5h2v-6.2l-2.2-2.3zM19 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5z\"/></svg>',\n  Boat: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z\"/></svg>',\n  Motorcycle:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M12.72 11l-2 2h-.77l-.25-.69c-.18-.48-.42-.92-.72-1.31h3.74m2.69-6H11v2h3.59l2 2H5c-2.8 0-5 2.2-5 5s2.2 5 5 5c2.46 0 4.45-1.69 4.9-4h1.65l2.77-2.77c-.21.54-.32 1.14-.32 1.77 0 2.8 2.2 5 5 5s5-2.2 5-5c0-2.65-1.97-4.77-4.56-4.97L15.41 5zM19 17c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zM5 17c-1.63 0-3-1.37-3-3s1.37-3 3-3c1.28 0 2.4.85 2.82 2H5v2h2.82C7.4 16.15 6.28 17 5 17z\"/></svg>',\n  Plane:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z\"/></svg>',\n  'Flight-takeoff':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M2.5 19h19v2h-19v-2zm19.57-9.36c-.21-.8-1.04-1.28-1.84-1.06L14.92 10l-6.9-6.43-1.93.51 4.14 7.17-4.97 1.33-1.97-1.54-1.45.39 2.59 4.49L21 11.49c.81-.23 1.28-1.05 1.07-1.85z\"/></svg>',\n  'Flight-landing':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M2.5 19h19v2h-19v-2zm16.84-3.15c.8.21 1.62-.26 1.84-1.06.21-.8-.26-1.62-1.06-1.84l-5.31-1.42-2.76-9.02L10.12 2v8.28L5.15 8.95l-.93-2.32-1.45-.39v5.17l16.57 4.44z\"/></svg>',\n  Shuttle:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M17 5H3c-1.1 0-2 .89-2 2v9h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-6-6zm-2 2h1l3 3h-4V7zM9 7h4v3H9V7zM3 7h4v3H3V7zm3 10.25c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25zm12 0c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25zM21 14h-.78c-.55-.61-1.34-1-2.22-1s-1.67.39-2.22 1H8.22c-.55-.61-1.33-1-2.22-1s-1.67.39-2.22 1H3v-2h18v2z\"/></svg>',\n  Walking:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.56-.89-1.68-1.25-2.65-.84L6 8.3V13h2V9.6l1.8-.7\"/></svg>',\n  Traffic:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 10h-3V8.86c1.72-.45 3-2 3-3.86h-3V4c0-.55-.45-1-1-1H8c-.55 0-1 .45-1 1v1H4c0 1.86 1.28 3.41 3 3.86V10H4c0 1.86 1.28 3.41 3 3.86V15H4c0 1.86 1.28 3.41 3 3.86V20c0 .55.45 1 1 1h8c.55 0 1-.45 1-1v-1.14c1.72-.45 3-2 3-3.86h-3v-1.14c1.72-.45 3-2 3-3.86zm-5 9H9V5h6v14zm-3-1c.83 0 1.5-.67 1.5-1.5S12.83 15 12 15s-1.5.67-1.5 1.5.67 1.5 1.5 1.5zm0-4.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM12 9c.83 0 1.5-.67 1.5-1.5S12.83 6 12 6s-1.5.67-1.5 1.5S11.17 9 12 9z\"/></svg>',\n  Commute:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 4H5C3.34 4 2 5.34 2 7v8c0 1.66 1.34 3 3 3l-1 1v1h1l2-2h2v-5H4V6h9v2h2V7c0-1.66-1.34-3-3-3zM5 14c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm15.57-4.34c-.14-.4-.52-.66-.97-.66h-7.19c-.46 0-.83.26-.98.66l-1.42 4.11v5.51c0 .38.31.72.69.72h.62c.38 0 .68-.38.68-.76V18h8v1.24c0 .38.31.76.69.76h.61c.38 0 .69-.34.69-.72l.01-1.37v-4.14l-1.43-4.11zm-8.16.34h7.19l1.03 3h-9.25l1.03-3zM12 16c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm8 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z\"/></svg>',\n  System:\n    '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20,18c1.1,0,2-0.9,2-2V6c0-1.1-0.9-2-2-2H4C2.9,4,2,4.9,2,6v10c0,1.1,0.9,2,2,2H0v2h24v-2H20z M4,6h16v10H4V6z\"/></svg>',\n  Printer:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 8h-1V3H6v5H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zM8 5h8v3H8V5zm8 12v2H8v-4h8v2zm2-2v-2H6v2H4v-4c0-.55.45-1 1-1h14c.55 0 1 .45 1 1v4h-2z\"/><circle cx=\"18\" cy=\"11.5\" r=\"1\"/></svg>',\n  Document:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z\"/></svg>',\n  Folder:\n    '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"none\" d=\"M0,0h24v24H0V0z\"/><path d=\"M9.17,6l2,2H20v10L4,18V6H9.17 M10,4H4C2.9,4,2.01,4.9,2.01,6L2,18c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V8c0-1.1-0.9-2-2-2 h-8L10,4L10,4z\"/></svg>',\n  Call: '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"none\" d=\"M0,0h24v24H0V0z\"/><path d=\"M6.54,5C6.6,5.89,6.75,6.76,6.99,7.59l-1.2,1.2C5.38,7.59,5.12,6.32,5.03,5H6.54 M16.4,17.02c0.85,0.24,1.72,0.39,2.6,0.45 v1.49c-1.32-0.09-2.59-0.35-3.8-0.75L16.4,17.02 M7.5,3H4C3.45,3,3,3.45,3,4c0,9.39,7.61,17,17,17c0.55,0,1-0.45,1-1v-3.49\\tc0-0.55-0.45-1-1-1c-1.24,0-2.45-0.2-3.57-0.57c-0.1-0.04-0.21-0.05-0.31-0.05c-0.26,0-0.51,0.1-0.71,0.29l-2.2,2.2 c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2C9.1,8.31,9.18,7.92,9.07,7.57C8.7,6.45,8.5,5.25,8.5,4C8.5,3.45,8.05,3,7.5,3L7.5,3z\"/></svg>',\n  Email:\n    '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"none\" d=\"M0,0h24v24H0V0z\"/><path fill-opacity=\"0.9\" d=\"M12,1.95c-5.52,0-10,4.48-10,10s4.48,10,10,10h5v-2h-5c-4.34,0-8-3.66-8-8s3.66-8,8-8s8,3.66,8,8v1.43 c0,0.79-0.71,1.57-1.5,1.57S17,14.17,17,13.38v-1.43c0-2.76-2.24-5-5-5s-5,2.24-5,5s2.24,5,5,5c1.38,0,2.64-0.56,3.54-1.47 c0.65,0.89,1.77,1.47,2.96,1.47c1.97,0,3.5-1.6,3.5-3.57v-1.43C22,6.43,17.52,1.95,12,1.95z M12,14.95c-1.66,0-3-1.34-3-3 s1.34-3,3-3s3,1.34,3,3S13.66,14.95,12,14.95z\"/></svg>',\n  Copyright:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M10.08 10.86c.05-.33.16-.62.3-.87s.34-.46.59-.62c.24-.15.54-.22.91-.23.23.01.44.05.63.13.2.09.38.21.52.36s.25.33.34.53.13.42.14.64h1.79c-.02-.47-.11-.9-.28-1.29s-.4-.73-.7-1.01-.66-.5-1.08-.66-.88-.23-1.39-.23c-.65 0-1.22.11-1.7.34s-.88.53-1.2.92-.56.84-.71 1.36S8 11.29 8 11.87v.27c0 .58.08 1.12.23 1.64s.39.97.71 1.35.72.69 1.2.91c.48.22 1.05.34 1.7.34.47 0 .91-.08 1.32-.23s.77-.36 1.08-.63.56-.58.74-.94.29-.74.3-1.15h-1.79c-.01.21-.06.4-.15.58s-.21.33-.36.46-.32.23-.52.3c-.19.07-.39.09-.6.1-.36-.01-.66-.08-.89-.23-.25-.16-.45-.37-.59-.62s-.25-.55-.3-.88-.08-.67-.08-1v-.27c0-.35.03-.68.08-1.01zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/></svg>',\n  DNS: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 15v4H5v-4h14m1-2H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 18.5c-.82 0-1.5-.67-1.5-1.5s.68-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM19 5v4H5V5h14m1-2H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 8.5c-.82 0-1.5-.67-1.5-1.5S6.18 5.5 7 5.5s1.5.68 1.5 1.5S7.83 8.5 7 8.5z\"/></svg>',\n  Settings:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z\"/></svg>',\n  Cellphone:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M7 22h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2zM16 .01L8 0C6.9 0 6 .9 6 2v16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V2c0-1.1-.9-1.99-2-1.99zM16 18H8v-1h8v1zm0-3H8V5h8v10zm0-12H8V2h8v1z\"/></svg>',\n  Update:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M11 8v5l4.25 2.52.77-1.28-3.52-2.09V8zm10 2V3l-2.64 2.64C16.74 4.01 14.49 3 12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9h-2c0 3.86-3.14 7-7 7s-7-3.14-7-7 3.14-7 7-7c1.93 0 3.68.79 4.95 2.05L14 10h7z\"/></svg>',\n  Briefcase:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M14 6V4h-4v2h4zM4 8v11h16V8H4zm16-2c1.11 0 2 .89 2 2v11c0 1.11-.89 2-2 2H4c-1.11 0-2-.89-2-2l.01-11c0-1.11.88-2 1.99-2h4V4c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2h4z\"/></svg>',\n  Microphone:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V5zm6 6c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z\"/></svg>',\n  Signal:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><circle cx=\"6.18\" cy=\"17.82\" r=\"2.18\"/><path d=\"M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z\"/></svg>',\n  Key: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M22 19h-6v-4h-2.68c-1.14 2.42-3.6 4-6.32 4-3.86 0-7-3.14-7-7s3.14-7 7-7c2.72 0 5.17 1.58 6.32 4H24v6h-2v4zm-4-2h2v-4h2v-2H11.94l-.23-.67C11.01 8.34 9.11 7 7 7c-2.76 0-5 2.24-5 5s2.24 5 5 5c2.11 0 4.01-1.34 4.71-3.33l.23-.67H18v4zM7 15c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3zm0-4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z\"/></svg>',\n  Pencil:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM5.92 19H5v-.92l9.06-9.06.92.92L5.92 19zM20.71 5.63l-2.34-2.34c-.2-.2-.45-.29-.71-.29s-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41z\"/></svg>',\n  Sum: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7V4z\"/></svg>',\n  Headset:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 14v4h-2v-4h2M7 14v4H6c-.55 0-1-.45-1-1v-3h2m5-13c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h4v1h-7v2h6c1.66 0 3-1.34 3-3V10c0-4.97-4.03-9-9-9z\"/></svg>',\n  Keyboard:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M20 7v10H4V7h16m0-2H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2zm0 3h2v2h-2zM8 8h2v2H8zm0 3h2v2H8zm-3 0h2v2H5zm0-3h2v2H5zm3 6h8v2H8zm6-3h2v2h-2zm0-3h2v2h-2zm3 3h2v2h-2zm0-3h2v2h-2z\"/></svg>',\n  Mouse:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 9c-.04-4.39-3.6-7.93-8-7.93S4.04 4.61 4 9v6c0 4.42 3.58 8 8 8s8-3.58 8-8V9zm-2 0h-5V3.16c2.81.47 4.96 2.9 5 5.84zm-7-5.84V9H6c.04-2.94 2.19-5.37 5-5.84zM18 15c0 3.31-2.69 6-6 6s-6-2.69-6-6v-4h12v4z\"/></svg>',\n  Router:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M16 4.2c1.5 0 3 .6 4.2 1.7l.8-.8C19.6 3.7 17.8 3 16 3s-3.6.7-5 2.1l.8.8C13 4.8 14.5 4.2 16 4.2zm-3.3 2.5l.8.8c.7-.7 1.6-1 2.5-1s1.8.3 2.5 1l.8-.8c-.9-.9-2.1-1.4-3.3-1.4s-2.4.5-3.3 1.4zM19 13h-2V9h-2v4H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2zm0 6H5v-4h14v4zM6 16h2v2H6zm3.5 0h2v2h-2zm3.5 0h2v2h-2z\"/></svg>',\n  Scanner:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19.8 10.7L4.2 5l-.7 1.9L17.6 12H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-5.5c0-.8-.5-1.6-1.2-1.8zM19 18H5v-4h14v4zM6 15h2v2H6zm4 0h8v2h-8z\"/></svg>',\n  Security:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z\"/></svg>',\n  Desktop:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v2H8v2h8v-2h-2v-2h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H3V4h18v12z\"/></svg>',\n  'Speaker-phone':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M7 7.07L8.43 8.5c.91-.91 2.18-1.48 3.57-1.48s2.66.57 3.57 1.48L17 7.07C15.72 5.79 13.95 5 12 5s-3.72.79-5 2.07zM12 1C8.98 1 6.24 2.23 4.25 4.21l1.41 1.41C7.28 4 9.53 3 12 3s4.72 1 6.34 2.62l1.41-1.41C17.76 2.23 15.02 1 12 1zm2.86 9.01L9.14 10C8.51 10 8 10.51 8 11.14v9.71c0 .63.51 1.14 1.14 1.14h5.71c.63 0 1.14-.51 1.14-1.14v-9.71c.01-.63-.5-1.13-1.13-1.13zM15 20H9v-8h6v8z\"/></svg>',\n  Tablet:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M18 0H6C4.34 0 3 1.34 3 3v18c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V3c0-1.66-1.34-3-3-3zm-4 22h-4v-1h4v1zm5.25-3H4.75V3h14.5v16z\"/></svg>',\n  Label:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16zM16 17H5V7h11l3.55 5L16 17z\"/></svg>',\n  Receipt:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19.5 3.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5zM19 19.09H5V4.91h14v14.18zM6 15h12v2H6zm0-4h12v2H6zm0-4h12v2H6z\"/></svg>',\n  Calendar:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\" /><path d=\"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10zm0-12H5V5h14v2zM7 11h5v5H7z\" /></svg>',\n  Cloud:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6m0-2C9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96C18.67 6.59 15.64 4 12 4z\"/></svg>',\n  Assessment:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 10h2v7H7zm4-3h2v10h-2zm4 6h2v4h-2z\"/></svg>',\n  Dashboard:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 5v2h-4V5h4M9 5v6H5V5h4m10 8v6h-4v-6h4M9 17v2H5v-2h4M21 3h-8v6h8V3zM11 3H3v10h8V3zm10 8h-8v10h8V11zm-10 4H3v6h8v-6z\"/></svg>',\n  'Pie-chart':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm7.93 9H13V4.07c3.61.45 6.48 3.32 6.93 6.93zM4 12c0-4.07 3.06-7.44 7-7.93v15.86c-3.94-.49-7-3.86-7-7.93zm9 7.93V13h6.93c-.45 3.61-3.32 6.48-6.93 6.93z\"/></svg>',\n  Problem:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z\"/></svg>',\n  'Picture-as-PDF':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm12 6V9c0-.55-.45-1-1-1h-2v5h2c.55 0 1-.45 1-1zm-2-3h1v3h-1V9zm4 2h1v-1h-1V9h1V8h-2v5h1zm-8 0h1c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1H9v5h1v-2zm0-2h1v1h-1V9z\"/></svg>',\n  Grid: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z\"/></svg>',\n  Watch:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M14.31 2l.41 2.48C13.87 4.17 12.96 4 12 4c-.95 0-1.87.17-2.71.47L9.7 2h4.61m.41 17.52L14.31 22H9.7l-.41-2.47c.84.3 1.76.47 2.71.47.96 0 1.87-.17 2.72-.48M16 0H8l-.95 5.73C5.19 7.19 4 9.45 4 12s1.19 4.81 3.05 6.27L8 24h8l.96-5.73C18.81 16.81 20 14.54 20 12s-1.19-4.81-3.04-6.27L16 0zm-4 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z\"/></svg>',\n  Euro: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M15 18.5c-2.51 0-4.68-1.42-5.76-3.5H15v-2H8.58c-.05-.33-.08-.66-.08-1s.03-.67.08-1H15V9H9.24C10.32 6.92 12.5 5.5 15 5.5c1.61 0 3.09.59 4.23 1.57L21 5.3C19.41 3.87 17.3 3 15 3c-3.92 0-7.24 2.51-8.48 6H3v2h3.06c-.04.33-.06.66-.06 1s.02.67.06 1H3v2h3.52c1.24 3.49 4.56 6 8.48 6 2.31 0 4.41-.87 6-2.3l-1.78-1.77c-1.13.98-2.6 1.57-4.22 1.57z\"/></svg>',\n  Dollar:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z\"/></svg>',\n  Info: '<svg height=\"48\" viewBox=\"0 0 24 26\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z\"/></svg>',\n  Alarm:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12.5 8H11v6l4.75 2.85.75-1.23-4-2.37zm4.837-6.19l4.607 3.845-1.28 1.535-4.61-3.843zm-10.674 0l1.282 1.536L3.337 7.19l-1.28-1.536zM12 4c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm0 16c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7z\"/></svg>',\n  Wrench:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M22.61 18.99l-9.08-9.08c.93-2.34.45-5.1-1.44-7C9.79.61 6.21.4 3.66 2.26L7.5 6.11 6.08 7.52 2.25 3.69C.39 6.23.6 9.82 2.9 12.11c1.86 1.86 4.57 2.35 6.89 1.48l9.11 9.11c.39.39 1.02.39 1.41 0l2.3-2.3c.4-.38.4-1.01 0-1.41zm-3 1.6l-9.46-9.46c-.61.45-1.29.72-2 .82-1.36.2-2.79-.21-3.83-1.25C3.37 9.76 2.93 8.5 3 7.26l3.09 3.09 4.24-4.24-3.09-3.09c1.24-.07 2.49.37 3.44 1.31 1.08 1.08 1.49 2.57 1.24 3.96-.12.71-.42 1.37-.88 1.96l9.45 9.45-.88.89z\"/></svg>',\n  'Circle-Arrows':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z\"/></svg>',\n  'Credit-Card':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z\"/></svg>',\n  Favorite:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z\"/></svg>',\n  Gavel:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M1 21h12v2H1v-2zM5.24 8.07l2.83-2.83 14.14 14.14-2.83 2.83L5.24 8.07zM12.32 1l5.66 5.66-2.83 2.83-5.66-5.66L12.32 1zM3.83 9.48l5.66 5.66-2.83 2.83L1 12.31l2.83-2.83z\"/></svg>',\n  Blind:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/><circle cx=\"8\" cy=\"14\" r=\"2\"/><circle cx=\"12\" cy=\"8\" r=\"2\"/><circle cx=\"16\" cy=\"14\" r=\"2\"/></svg>',\n  Hourglass:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z\"/></svg>',\n  Time: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z\"/></svg>',\n  Search:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/></svg>',\n  Shopping:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M15.55 13c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.66-.11-1.48-.87-1.48H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2h7.45zM6.16 6h12.15l-2.76 5H8.53L6.16 6zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z\"/></svg>',\n  'Thumb-up':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M9 21h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.58 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2zM9 9l4.34-4.34L12 10h9v2l-3 7H9V9zM1 9h4v12H1z\"/></svg>',\n  'Thumb-down':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm0 12l-4.34 4.34L12 14H3v-2l3-7h9v10zm4-12h4v12h-4z\"/></svg>',\n  'Thumb-up-down':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M12 6c0-.55-.45-1-1-1H5.82l.66-3.18.02-.23c0-.31-.13-.59-.33-.8L5.38 0 .44 4.94C.17 5.21 0 5.59 0 6v6.5c0 .83.67 1.5 1.5 1.5h6.75c.62 0 1.15-.38 1.38-.91l2.26-5.29c.07-.17.11-.36.11-.55V6zm-2 1.13L7.92 12H2V6.21l1.93-1.93L3.36 7H10v.13zM22.5 10h-6.75c-.62 0-1.15.38-1.38.91l-2.26 5.29c-.07.17-.11.36-.11.55V18c0 .55.45 1 1 1h5.18l-.66 3.18-.02.24c0 .31.13.59.33.8l.79.78 4.94-4.94c.27-.27.44-.65.44-1.06v-6.5c0-.83-.67-1.5-1.5-1.5zm-.5 7.79l-1.93 1.93.57-2.72H14v-.13L16.08 12H22v5.79z\"/></svg>',\n  Couch:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M21 9V7c0-1.65-1.35-3-3-3H6C4.35 4 3 5.35 3 7v2c-1.65 0-3 1.35-3 3v5c0 1.65 1.35 3 3 3h18c1.65 0 3-1.35 3-3v-5c0-1.65-1.35-3-3-3zM5 7c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v2.78c-.61.55-1 1.34-1 2.22v2H6v-2c0-.88-.39-1.67-1-2.22V7zm17 10c0 .55-.45 1-1 1H3c-.55 0-1-.45-1-1v-5c0-.55.45-1 1-1s1 .45 1 1v4h16v-4c0-.55.45-1 1-1s1 .45 1 1v5z\"/></svg>',\n  Attach:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z\"/></svg>',\n  Ruler:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2v8z\"/></svg>',\n  Education:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z\"/></svg>',\n  'How-To-Reg':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" fill=\"none\" d=\"M0 0h24v24H0z\"/><g fill-rule=\"evenodd\" clip-rule=\"evenodd\"><path d=\"M9 17l3-2.94c-.39-.04-.68-.06-1-.06-2.67 0-8 1.34-8 4v2h9l-3-3zm2-5c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4\"/><path d=\"M15.47 20.5L12 17l1.4-1.41 2.07 2.08 5.13-5.17 1.4 1.41z\"/></g></svg>',\n  'View-List':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path opacity=\".87\" fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M3 5v14h17V5H3zm4 2v2H5V7h2zm-2 6v-2h2v2H5zm0 2h2v2H5v-2zm13 2H9v-2h9v2zm0-4H9v-2h9v2zm0-4H9V7h9v2z\"/></svg>',\n};\n\nexport function getAllStandardIconKeys(): string[] {\n  const allIconsDict = new Dictionary();\n\n  allIconsDict.addEach(allIcons);\n\n  return allIconsDict.keysArray();\n}\n\nexport function overrideAppendedIcons(newIcons: Dictionary): void {\n  appendedIcons = newIcons;\n}\n\nexport function updateAppendedIcons(newIcons: Dictionary): void {\n  for (const key in newIcons.keysArray().entries()) {\n    appendedIcons.add(newIcons.get(key), key);\n  }\n}\n","import { Dictionary } from 'src/app/domain/entities/dictionary';\nimport {\n  overrideAppendedIcons,\n  updateAppendedIcons,\n} from 'src/app/tools/icon-set-config/domain/allIcons';\nimport { Configuration } from 'src/app/domain/entities/configuration';\nimport { INITIAL_ICON_SET_NAME } from '../../../domain/entities/constants';\nimport { IconSetConfiguration } from '../../../domain/entities/icon-set-configuration';\n\nexport class IconConfiguration {\n  domainName = INITIAL_ICON_SET_NAME;\n\n  private allIconDictionary: Dictionary;\n\n  constructor(allIconDictionary: Dictionary) {\n    this.allIconDictionary = allIconDictionary;\n  }\n\n  /**\n   * Select the Iconset which you want to use\n   */\n  getDefaultConf(): Configuration {\n    return defaultConf;\n  }\n\n  updateAllIconRegistry(allIconDictionary: Dictionary): void {\n    this.allIconDictionary = allIconDictionary;\n  }\n\n  appendSRCFile(\n    actors: string[],\n    actorsDict: Dictionary,\n    workObjects: string[],\n    workObjectsDict: Dictionary,\n  ): void {\n    const newAppendedIcons: { [key: string]: any } = {};\n\n    actors.forEach((name: string) => {\n      if (!this.allIconDictionary.has(name)) {\n        newAppendedIcons[name] = actorsDict.get(name);\n      }\n    });\n\n    workObjects.forEach((name: string) => {\n      if (!this.allIconDictionary.has(name)) {\n        newAppendedIcons[name] = workObjectsDict.get(name);\n      }\n    });\n    const appen = new Dictionary();\n    Object.keys(newAppendedIcons).forEach((key) => {\n      appen.set(key, newAppendedIcons[key]);\n    });\n\n    updateAppendedIcons(appen);\n  }\n\n  createCustomConf(iconSetConfiguration: IconSetConfiguration): Configuration {\n    this.domainName = iconSetConfiguration.name;\n\n    let actors = iconSetConfiguration.actors;\n    let workObjects = iconSetConfiguration.workObjects;\n\n    this.appendSRCFile(\n      actors.keysArray(),\n      actors,\n      workObjects.keysArray(),\n      workObjects,\n    );\n\n    return new Configuration(actors.keysArray(), workObjects.keysArray());\n  }\n}\n\n/* eslint no-unused-vars: 0*/\n\n/**\n * All Icons as one Set\n * There are more Icons than fit in the palette.\n * This is just for reference\n */\nconst allIconsConf = {\n  actors: ['Person', 'Group', 'System', 'Pet'],\n  workObjects: [\n    'Place',\n    'Flag',\n    'World',\n    'Water',\n    'Store',\n    'Theater',\n    'Business',\n    'Meeting-room',\n    'Hotel',\n    'Dining',\n    'Courthouse',\n    'Gas-station',\n    'Car',\n    'Bus',\n    'Train',\n    'Truck',\n    'Taxi',\n    'Bike',\n    'Boat',\n    'Motorcycle',\n    'Plane',\n    'Flight-takeoff',\n    'Flight-landing',\n    'Shuttle',\n    'Walking',\n    'Traffic',\n    'Commute',\n    'Document',\n    'Folder',\n    'Call',\n    'Email',\n    'Copyright',\n    'Briefcase',\n    'Attach',\n    'Ruler',\n    'Sum',\n    'Conversation',\n    'Update',\n    'Cellphone',\n    'Speaker-phone',\n    'Signal',\n    'Key',\n    'Pencil',\n    'How-To-Reg',\n    'Settings',\n    'Grid',\n    'Label',\n    'Receipt',\n    'Calendar',\n    'Wrench',\n    'Headset',\n    'Keyboard',\n    'Mouse',\n    'Microphone',\n    'Router',\n    'Scanner',\n    'Printer',\n    'DNS',\n    'Security',\n    'Cloud',\n    'Desktop',\n    'Tablet',\n    'Assessment',\n    'Dashboard',\n    'Pie-chart',\n    'View-List',\n    'Euro',\n    'Dollar',\n    'Info',\n    'Alarm',\n    'Problem',\n    'Circle-Arrows',\n    'Picture-as-PDF',\n    'Credit-Card',\n    'Shopping',\n    'Favorite',\n    'Gavel',\n    'Blind',\n    'Hourglass',\n    'Time',\n    'Search',\n    'Thumb-up',\n    'Thumb-down',\n    'Thumb-up-down',\n    'Couch',\n    'Education',\n    'Watch',\n  ],\n};\n\n/**\n * Default Iconset\n */\nexport const defaultConf = {\n  actors: ['Person', 'Group', 'System'],\n  workObjects: ['Document', 'Folder', 'Call', 'Email', 'Conversation', 'Info'],\n};\n","export enum IconFilterEnum {\n  ICON_FILTER_ACTOR = 'ICON_FILTER_ACTOR',\n  ICON_FILTER_WORKOBJECT = 'ICON_FILTER_WORKOBJECT',\n  ICON_FILTER_UNASSIGNED = 'ICON_FILTER_UNASSIGNED',\n  ICON_FILTER_NONE = 'ICON_FILTER_NONE',\n}\n","import { AfterViewChecked, Component, Input } from '@angular/core';\nimport { IconListItem } from '../../domain/iconListItem';\n\n@Component({\n  selector: 'app-details-list-item',\n  templateUrl: './details-list-item.component.html',\n  styleUrls: ['./details-list-item.component.scss'],\n})\nexport class DetailsListItemComponent implements AfterViewChecked {\n  @Input()\n  icon!: IconListItem;\n\n  private iconInitiated = false;\n\n  get id(): string {\n    return (\n      'domain-configuration-details-icon-' +\n      this.icon.name.toLowerCase() +\n      '-' +\n      (this.icon.isWorkObject ? 'workobject' : 'actor')\n    );\n  }\n\n  get name(): string {\n    return this.icon.name;\n  }\n\n  ngAfterViewChecked(): void {\n    this.createIcon();\n  }\n\n  private createIcon(): void {\n    const img = document.getElementById(this.id) as HTMLImageElement;\n    if (img && !this.iconInitiated) {\n      img.src = '' + this.icon.svg;\n      this.iconInitiated = true;\n    }\n  }\n}\n","<div class=\"detailsListItem\">\n  <img id=\"{{ id }}\" class=\"icon\" alt=\"{{ name }}\" [src]=\"icon.svg\" />\n  <mat-label class=\"iconName\">{{ icon.name }}</mat-label>\n</div>\n","import { AfterViewChecked, Component, Input, OnInit } from '@angular/core';\nimport { IconListItem } from '../../domain/iconListItem';\nimport { BehaviorSubject } from 'rxjs';\nimport { IconSetCustomizationService } from '../../services/icon-set-customization.service';\n\n@Component({\n  selector: 'app-icon-list-item',\n  templateUrl: './icon-list-item.component.html',\n  styleUrls: ['./icon-list-item.component.scss'],\n})\nexport class IconListItemComponent implements OnInit, AfterViewChecked {\n  @Input()\n  iconName: string = '';\n\n  private iconInitiated = false;\n\n  // @ts-ignore\n  icon = new BehaviorSubject<IconListItem>({});\n\n  isActor: boolean = false;\n  isWorkobject: boolean = false;\n  isNone: boolean = true;\n\n  get name(): string {\n    return this.iconName;\n  }\n\n  get id() {\n    return 'domain-configuration-icon-' + this.iconName;\n  }\n\n  constructor(\n    private iconSetCustomizationService: IconSetCustomizationService,\n  ) {}\n\n  ngOnInit(): void {\n    this.icon = this.iconSetCustomizationService.getIconForName(this.iconName);\n    if (!this.icon) {\n      return;\n    }\n\n    this.icon.subscribe((value) => {\n      this.isActor = value.isActor;\n      this.isWorkobject = value.isWorkObject;\n      this.isNone = !(value.isActor || value.isWorkObject);\n    });\n    this.isActor = this.icon.value.isActor;\n    this.isWorkobject = this.icon.value.isWorkObject;\n    this.isNone = !(this.icon.value.isActor || this.icon.value.isWorkObject);\n  }\n\n  ngAfterViewChecked(): void {\n    this.createIcon();\n  }\n\n  private createIcon(): void {\n    const img = document.getElementById(this.id) as HTMLImageElement;\n    if (img && !this.iconInitiated) {\n      img.src = '' + this.icon?.value?.svg;\n      this.iconInitiated = true;\n    }\n  }\n\n  toggleNone() {\n    this.iconSetCustomizationService.setAsUnassigned(\n      this.iconName,\n      this.icon.value.isActor,\n    );\n  }\n\n  toggleActor(): void {\n    this.iconSetCustomizationService.setAsActor(true, this.iconName);\n  }\n\n  toggleWorkobject(): void {\n    this.iconSetCustomizationService.setAsWorkobject(true, this.iconName);\n  }\n}\n","<div>\n  <div class=\"content\">\n    <img id=\"{{ id }}\" class=\"icon\" src=\"\" alt=\"{{ name }}\" />\n    <div class=\"name\">{{ name }}</div>\n  </div>\n  <div class=\"footer\">\n    <mat-button-toggle-group>\n      <mat-button-toggle\n        (change)=\"toggleNone()\"\n        [value]=\"isNone\"\n        [checked]=\"isNone\"\n      >\n        <span class=\"toggleButtonTitle\">None</span>\n      </mat-button-toggle>\n      <mat-button-toggle\n        [class.activeMatButtonActor]=\"isActor\"\n        (change)=\"toggleActor()\"\n        [value]=\"isActor\"\n        [checked]=\"isActor\"\n      >\n        <span class=\"toggleButtonTitle\">Actor</span>\n      </mat-button-toggle>\n      <mat-button-toggle\n        [class.activeMatButtonWorkObject]=\"isWorkobject\"\n        (change)=\"toggleWorkobject()\"\n        [value]=\"isWorkobject\"\n        [checked]=\"isWorkobject\"\n      >\n        <span class=\"toggleButtonTitle\">Workobject</span>\n      </mat-button-toggle>\n    </mat-button-toggle-group>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { Dictionary } from 'src/app/domain/entities/dictionary';\nimport { IconSetConfigurationService } from 'src/app/tools/icon-set-config/services/icon-set-configuration.service';\nimport {\n  ICON_PREFIX,\n  IconDictionaryService,\n} from 'src/app/tools/icon-set-config/services/icon-dictionary.service';\nimport { ElementRegistryService } from 'src/app/domain/services/element-registry.service';\nimport { sanitizeIconName } from 'src/app/utils/sanitizer';\nimport { ElementTypes } from '../../../../domain/entities/elementTypes';\nimport { IconFilterEnum } from '../../domain/iconFilterEnum';\nimport { IconSetCustomizationService } from '../../services/icon-set-customization.service';\nimport { CustomIconSetConfiguration } from '../../../../domain/entities/custom-icon-set-configuration';\n\n@Component({\n  selector: 'app-icon-set-configuration',\n  templateUrl: './icon-set-configuration.component.html',\n  styleUrls: ['./icon-set-configuration.component.scss'],\n})\nexport class IconSetConfigurationComponent implements OnInit {\n  private iconSetConfigurationTypes: CustomIconSetConfiguration;\n\n  filter = new BehaviorSubject<IconFilterEnum>(IconFilterEnum.ICON_FILTER_NONE);\n\n  selectedActors = new BehaviorSubject<string[]>([]);\n  selectedWorkobjects = new BehaviorSubject<string[]>([]);\n\n  allIcons: BehaviorSubject<Dictionary>;\n  allIconNames = new BehaviorSubject<string[]>([]);\n  allFilteredIconNames = new BehaviorSubject<string[]>([]);\n\n  constructor(\n    private iconSetConfigurationService: IconSetConfigurationService,\n    private iconDictionaryService: IconDictionaryService,\n    private iconSetCustomizationService: IconSetCustomizationService,\n    private elementRegistryService: ElementRegistryService,\n  ) {\n    this.iconSetConfigurationTypes =\n      this.iconSetCustomizationService.getIconSetConfiguration().value;\n\n    this.allIcons = new BehaviorSubject(\n      this.iconDictionaryService.getFullDictionary(),\n    );\n    this.allIcons.subscribe((allIcons) => {\n      this.allIconNames.next(allIcons.keysArray().sort(this.sortByName));\n    });\n\n    this.selectedActors = this.iconSetCustomizationService.selectedActors$;\n    this.selectedWorkobjects =\n      this.iconSetCustomizationService.selectedWorkobjects$;\n  }\n\n  ngOnInit(): void {\n    this.filter.subscribe((type) => {\n      let allFiltered = this.getFilteredNamesForType(type);\n      this.allFilteredIconNames.next(allFiltered.sort(this.sortByName));\n    });\n  }\n\n  private sortByName(a: string, b: string): number {\n    return a.toLowerCase().localeCompare(b.toLowerCase());\n  }\n\n  /** Default Icon Set **/\n  loadMinimalIconConfigurationWithDefaultIcons(): void {\n    this.iconSetCustomizationService.resetIconSet();\n  }\n\n  loadInitialConfiguration(): void {\n    this.iconSetCustomizationService.cancel();\n  }\n\n  /** Persist Icon Set **/\n  saveIconSet(): void {\n    this.iconSetCustomizationService.saveIconSet(\n      this.elementRegistryService.getUsedIcons(),\n    );\n  }\n\n  exportIconSet(): void {\n    this.iconSetCustomizationService.exportIconSet();\n  }\n\n  /** Add Custom Icon **/\n  startIconUpload(): void {\n    document.getElementById('importIcon')?.click();\n  }\n\n  importIcon(): void {\n    // @ts-ignore\n    const files = document.getElementById('importIcon').files;\n    for (let iconInputFile of files) {\n      const reader = new FileReader();\n      const name = sanitizeIconName(iconInputFile.name);\n      const iconName = name + '-custom'; // this suffix helps users to see which icons they uploaded; it should not be used to check if an icon is actually custom or not since this convention was introduce after v1.3.0 and is therefore not reliable information\n\n      reader.onloadend = (e: ProgressEvent<FileReader>) => {\n        if (e.target) {\n          const src: string = e.target.result as unknown as string;\n          this.iconDictionaryService.addIMGToIconDictionary(src, iconName);\n          // TODO: td: What kind of type is it here?\n          this.iconDictionaryService.registerIconForBPMN(\n            iconName,\n            ICON_PREFIX + iconName.toLowerCase(),\n            ElementTypes.ACTOR,\n          );\n\n          this.allIcons.next(this.iconDictionaryService.getFullDictionary());\n          this.filter.next(this.filter.value);\n\n          this.iconSetCustomizationService.addNewIcon(iconName);\n        }\n      };\n      reader.readAsDataURL(iconInputFile);\n    }\n  }\n\n  /** Import Icon Set **/\n  startIconSetImport(): void {\n    document.getElementById('importDomain')?.click();\n  }\n\n  importIconSet(): void {\n    // @ts-ignore\n    const iconSetInputFile = document.getElementById('importDomain').files[0];\n    const reader = new FileReader();\n\n    reader.onloadend = (e: ProgressEvent<FileReader>) => {\n      const configFromFile = JSON.parse(\n        e.target?.result as unknown as string,\n      ) as {\n        name: string;\n        actors: { [key: string]: any };\n        workObjects: { [key: string]: any };\n      };\n      const config =\n        this.iconSetConfigurationService.createIconSetConfiguration(\n          configFromFile,\n        );\n      this.iconSetConfigurationService.loadConfiguration(config, false);\n\n      this.iconSetCustomizationService.importConfiguration(config);\n\n      this.allIcons.next(this.iconDictionaryService.getFullDictionary());\n      this.filter.next(this.filter.value);\n    };\n\n    reader.readAsText(iconSetInputFile);\n  }\n\n  /** Filter **/\n  filterForActors(): void {\n    if (this.filter.value !== IconFilterEnum.ICON_FILTER_ACTOR) {\n      this.filter.next(IconFilterEnum.ICON_FILTER_ACTOR);\n    } else {\n      this.filter.next(IconFilterEnum.ICON_FILTER_NONE);\n    }\n  }\n\n  filterForWorkobjects(): void {\n    if (this.filter.value !== IconFilterEnum.ICON_FILTER_WORKOBJECT) {\n      this.filter.next(IconFilterEnum.ICON_FILTER_WORKOBJECT);\n    } else {\n      this.filter.next(IconFilterEnum.ICON_FILTER_NONE);\n    }\n  }\n\n  filterForUnassigned(): void {\n    if (this.filter.value !== IconFilterEnum.ICON_FILTER_UNASSIGNED) {\n      this.filter.next(IconFilterEnum.ICON_FILTER_UNASSIGNED);\n    } else {\n      this.filter.next(IconFilterEnum.ICON_FILTER_NONE);\n    }\n  }\n\n  filterByNameAndType($event: any) {\n    const filteredByNameAndType = this.getFilteredNamesForType(\n      this.filter.value,\n    ).filter((name) =>\n      name.toLowerCase().includes($event.target.value.toLowerCase()),\n    );\n    this.allFilteredIconNames.next(filteredByNameAndType.sort(this.sortByName));\n  }\n\n  private getFilteredNamesForType(type: IconFilterEnum): string[] {\n    let allFiltered: string[] = [];\n    switch (type) {\n      case IconFilterEnum.ICON_FILTER_NONE:\n        allFiltered = this.allIconNames.value;\n        break;\n      case IconFilterEnum.ICON_FILTER_ACTOR:\n        allFiltered = this.allIconNames.value.filter((name) =>\n          this.iconSetCustomizationService.isIconActor(name),\n        );\n        break;\n      case IconFilterEnum.ICON_FILTER_WORKOBJECT:\n        allFiltered = this.allIconNames.value.filter((name) =>\n          this.iconSetCustomizationService.isIconWorkObject(name),\n        );\n        break;\n      case IconFilterEnum.ICON_FILTER_UNASSIGNED:\n        allFiltered = this.allIconNames.value.filter(\n          (name) =>\n            !this.iconSetCustomizationService.isIconActor(name) &&\n            !this.iconSetCustomizationService.isIconWorkObject(name),\n        );\n        break;\n    }\n    return allFiltered;\n  }\n}\n","<div class=\"content\">\n  <div>\n    <div class=\"header\">\n      <div class=\"searchbar\">\n        <div>Filter by assignment:</div>\n        <button\n          mat-button\n          [class.activeNone]=\"(filter | async) === 'ICON_FILTER_UNASSIGNED'\"\n          title=\"Unassigned Icons\"\n          (click)=\"filterForUnassigned()\"\n        >\n          <span>None</span>\n        </button>\n        <button\n          mat-button\n          [class.activeActor]=\"(filter | async) === 'ICON_FILTER_ACTOR'\"\n          title=\"Actors\"\n          (click)=\"filterForActors()\"\n        >\n          <span>Actors</span>\n        </button>\n        <button\n          mat-button\n          [class.activeWorkObject]=\"\n            (filter | async) === 'ICON_FILTER_WORKOBJECT'\n          \"\n          title=\"Workobjects\"\n          (click)=\"filterForWorkobjects()\"\n        >\n          <span>Workobjects</span>\n        </button>\n        <input\n          class=\"textInput\"\n          matInput\n          type=\"text\"\n          placeholder=\"Filter by name\"\n          (input)=\"filterByNameAndType($event)\"\n        />\n      </div>\n      <div class=\"buttons\">\n        <button mat-button title=\"Upload Icon\" (click)=\"startIconUpload()\">\n          <span class=\"material-icons-outlined materialIconButton\">upload</span>\n          <input\n            type=\"file\"\n            multiple\n            accept=\".svg, image/png, image/jpeg, image/gif, image/bpmn\"\n            style=\"display: none\"\n            id=\"importIcon\"\n            name=\"file\"\n            onclick=\"this.value=null\"\n            (change)=\"importIcon()\"\n          />\n        </button>\n        <button\n          mat-button\n          class=\"button\"\n          title=\"Reset to default icon set\"\n          (click)=\"loadMinimalIconConfigurationWithDefaultIcons()\"\n        >\n          <span class=\"material-icons-outlined materialIconButton\"> home </span>\n        </button>\n        <button\n          mat-button\n          title=\"Cancel changes\"\n          (click)=\"loadInitialConfiguration()\"\n        >\n          <span class=\"material-icons-outlined materialIconButton\">close</span>\n        </button>\n        <div class=\"divider\"></div>\n        <button mat-button title=\"Save icon set\" (click)=\"saveIconSet()\">\n          <span class=\"material-icons-outlined materialIconButton\">save</span>\n        </button>\n        <div class=\"divider\"></div>\n        <button\n          mat-button\n          title=\"Import icon set\"\n          (click)=\"startIconSetImport()\"\n        >\n          <span class=\"material-icons-outlined materialIconButton\"\n            >unarchive</span\n          >\n          <input\n            type=\"file\"\n            accept=\".domain, .iconset\"\n            style=\"display: none\"\n            id=\"importDomain\"\n            name=\"file\"\n            onclick=\"this.value=null\"\n            (change)=\"importIconSet()\"\n          />\n        </button>\n        <button mat-button title=\"Export icon set\" (click)=\"exportIconSet()\">\n          <span class=\"material-icons-outlined materialIconButton\"\n            >archive</span\n          >\n        </button>\n      </div>\n    </div>\n    <div class=\"iconList smallScrollbar\">\n      @for (iconName of allFilteredIconNames | async; track iconName) {\n        <app-icon-list-item [iconName]=\"iconName\"></app-icon-list-item>\n      }\n    </div>\n  </div>\n  <app-icon-set-details class=\"iconSetDetails\"></app-icon-set-details>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { IconSetCustomizationService } from 'src/app/tools/icon-set-config/services/icon-set-customization.service';\nimport { IconListItem } from 'src/app/tools/icon-set-config/domain/iconListItem';\nimport { TitleService } from 'src/app/tools/title/services/title.service';\n\n@Component({\n  selector: 'app-icon-set-details',\n  templateUrl: './icon-set-details.component.html',\n  styleUrls: ['./icon-set-details.component.scss'],\n})\nexport class IconSetDetailsComponent implements OnInit {\n  iconSetName: Observable<string>;\n\n  private draggedList: string = '';\n  private draggedIndex = 0;\n\n  selectedActors$ = this.customizationService.selectedActors$;\n  selectedWorkobjects$ = this.customizationService.selectedWorkobjects$;\n\n  constructor(\n    private customizationService: IconSetCustomizationService,\n    titleService: TitleService,\n  ) {\n    this.iconSetName = titleService.iconSetName$;\n  }\n\n  ngOnInit(): void {}\n\n  changeName(event: Event): void {\n    // @ts-ignore\n    this.customizationService.changeName(event.target.value);\n  }\n\n  getIconForName(iconName: string): IconListItem {\n    return this.customizationService.getIconForName(iconName).value;\n  }\n\n  allowDrop($event: DragEvent, listName: string) {\n    if (this.draggedList === listName) {\n      $event.preventDefault();\n    }\n  }\n\n  onDrop($event: DragEvent, iconName: string, actors: boolean, index: number) {\n    let list;\n    if (actors) {\n      list = this.selectedActors$;\n    } else {\n      list = this.selectedWorkobjects$;\n    }\n    const sortedList = list.value;\n    const item = sortedList[this.draggedIndex];\n    sortedList.splice(this.draggedIndex, 1);\n    sortedList.splice(index, 0, item);\n    list.next(sortedList);\n\n    if (actors) {\n      this.customizationService.setSelectedActors(sortedList);\n    } else {\n      this.customizationService.setSelectedWorkObject(sortedList);\n    }\n  }\n\n  onDragStart(index: number, draggedList: string) {\n    this.draggedList = draggedList;\n    this.draggedIndex = index;\n  }\n}\n","<div class=\"details smallScrollbar\">\n  <div class=\"iconSetDetails bottom-border\">\n    <form class=\"inputWidth inputHeight\">\n      <div class=\"alignment\"></div>\n      <mat-form-field class=\"inputHeight\">\n        <input\n          matInput\n          type=\"text\"\n          placeholder=\"Icon Set Name\"\n          (input)=\"changeName($event)\"\n          [value]=\"iconSetName | async\"\n        />\n      </mat-form-field>\n    </form>\n  </div>\n  <div class=\"actorList bottom-border\">\n    <h3>Order of Actors</h3>\n    <mat-list>\n      @for (\n        iconName of selectedActors$ | async;\n        track iconName;\n        let i = $index\n      ) {\n        <mat-list-item\n          class=\"compactItem\"\n          draggable=\"true\"\n          (dragover)=\"allowDrop($event, 'actorList')\"\n          (dragstart)=\"onDragStart(i, 'actorList')\"\n          (drop)=\"onDrop($event, iconName, true, i)\"\n        >\n          <app-details-list-item [icon]=\"getIconForName(iconName)\" />\n        </mat-list-item>\n      }\n    </mat-list>\n  </div>\n  <div class=\"workobjectList\">\n    <h3>Order of Work Objects</h3>\n    <mat-list>\n      @for (\n        iconName of selectedWorkobjects$ | async;\n        track iconName;\n        let i = $index\n      ) {\n        <mat-list-item\n          class=\"compactItem\"\n          draggable=\"true\"\n          (dragover)=\"allowDrop($event, 'workobjectList')\"\n          (dragstart)=\"onDragStart(i, 'workobjectList')\"\n          (drop)=\"onDrop($event, iconName, false, i)\"\n        >\n          <app-details-list-item [icon]=\"getIconForName(iconName)\" />\n        </mat-list-item>\n      }\n    </mat-list>\n  </div>\n</div>\n","import { Injectable } from '@angular/core';\nimport { BusinessObject } from 'src/app/domain/entities/businessObject';\nimport { Configuration } from 'src/app/domain/entities/configuration';\nimport { Dictionary } from 'src/app/domain/entities/dictionary';\nimport { ElementTypes } from 'src/app/domain/entities/elementTypes';\nimport {\n  defaultConf,\n  IconConfiguration,\n} from 'src/app/tools/icon-set-config/domain/iconConfiguration';\nimport {\n  allIcons,\n  appendedIcons,\n} from 'src/app/tools/icon-set-config/domain/allIcons';\nimport { sanitizeIconName } from '../../../utils/sanitizer';\nimport getIconId = ElementTypes.getIconId;\nimport { IconSetConfiguration } from '../../../domain/entities/icon-set-configuration';\n\nexport const ICON_PREFIX = 'icon-domain-story-';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class IconDictionaryService {\n  private actorIconDictionary = new Dictionary();\n  private workObjectDictionary = new Dictionary();\n\n  private allIconDictionary = new Dictionary();\n  private iconDictionaryForBPMN = new Dictionary();\n\n  private customConfiguration?: IconSetConfiguration;\n\n  private readonly iconConfig: IconConfiguration;\n\n  constructor() {\n    this.allIconDictionary.addEach(allIcons);\n    this.iconConfig = new IconConfiguration(this.allIconDictionary);\n  }\n\n  initTypeDictionaries(actors: string[], workObjects: string[]): void {\n    if (!actors || actors.length == 0) {\n      actors = defaultConf.actors;\n    }\n    if (!workObjects || workObjects.length == 0) {\n      workObjects = defaultConf.workObjects;\n    }\n\n    const allTypes = new Dictionary();\n    allTypes.addEach(allIcons);\n    allTypes.appendDict(this.getAppendedIconDictionary());\n\n    this.initDictionary(\n      actors,\n      allTypes,\n      this.actorIconDictionary,\n      ElementTypes.ACTOR,\n    );\n    this.initDictionary(\n      workObjects,\n      allTypes,\n      this.workObjectDictionary,\n      ElementTypes.WORKOBJECT,\n    );\n  }\n\n  private initDictionary(\n    keys: string[],\n    allTypes: Dictionary,\n    dictionary: Dictionary,\n    elementType: ElementTypes,\n  ) {\n    dictionary.clear();\n    for (const key of keys) {\n      dictionary.add(allTypes.get(key), key);\n    }\n\n    dictionary.keysArray().forEach((name) => {\n      this.registerIconForBPMN(\n        name,\n        ICON_PREFIX + sanitizeIconName(name.toLowerCase()),\n        elementType,\n      );\n    });\n  }\n\n  getCurrentIconConfigurationForBPMN(): Configuration {\n    if (this.customConfiguration) {\n      return this.iconConfig.createCustomConf(this.customConfiguration);\n    }\n    return this.iconConfig.getDefaultConf();\n  }\n\n  allInTypeDictionary(type: ElementTypes, elements: BusinessObject[]): boolean {\n    let collection: Dictionary;\n    if (type === ElementTypes.ACTOR) {\n      collection = this.actorIconDictionary;\n    } else if (type === ElementTypes.WORKOBJECT) {\n      collection = this.workObjectDictionary;\n    }\n\n    let allIn = true;\n    if (elements) {\n      elements.forEach((element) => {\n        if (!collection.has(getIconId(element.type))) {\n          allIn = false;\n        }\n      });\n    } else {\n      return false;\n    }\n    return allIn;\n  }\n\n  /** Load Icons from Configuration **/\n  addIconsFromIconSetConfiguration(\n    dictionaryType: ElementTypes,\n    iconTypes: string[],\n  ): void {\n    let collection: Dictionary;\n    if (dictionaryType === ElementTypes.ACTOR) {\n      collection = this.actorIconDictionary;\n    } else if (dictionaryType === ElementTypes.WORKOBJECT) {\n      collection = this.workObjectDictionary;\n    }\n\n    const allTypes = new Dictionary();\n    allTypes.addEach(allIcons);\n    allTypes.appendDict(appendedIcons);\n\n    iconTypes.forEach((name) => {\n      if (!collection.has(name)) {\n        const src = allTypes.get(name);\n        if (src) {\n          this.registerIconForType(dictionaryType, name, src);\n          this.registerIconForBPMN(\n            name,\n            sanitizeIconName(ICON_PREFIX + name.toLowerCase()),\n            dictionaryType,\n          );\n        }\n      }\n    });\n  }\n\n  /** Add Icon(s) to Dictionary **/\n  registerIconForBPMN(\n    name: string,\n    src: string,\n    elementType: ElementTypes,\n  ): void {\n    if (name.includes(elementType)) {\n      throw new Error('Should not include elementType');\n    }\n\n    this.iconDictionaryForBPMN.set(`${elementType}${name}`, src);\n  }\n\n  addIconsToTypeDictionary(\n    actorIcons: BusinessObject[],\n    workObjectIcons: BusinessObject[],\n  ) {\n    if (!this.allInTypeDictionary(ElementTypes.ACTOR, actorIcons)) {\n      this.addIconsFromIconSetConfiguration(\n        ElementTypes.ACTOR,\n        actorIcons.map((element) => getIconId(element.type)),\n      );\n    }\n    if (!this.allInTypeDictionary(ElementTypes.WORKOBJECT, workObjectIcons)) {\n      this.addIconsFromIconSetConfiguration(\n        ElementTypes.WORKOBJECT,\n        workObjectIcons.map((element) => getIconId(element.type)),\n      );\n    }\n  }\n\n  registerIconForType(type: ElementTypes, name: string, src: string): void {\n    if (name.includes(type)) {\n      throw new Error('Name should not include type!');\n    }\n\n    let collection = new Dictionary();\n    if (type === ElementTypes.ACTOR) {\n      collection = this.actorIconDictionary;\n    } else if (type === ElementTypes.WORKOBJECT) {\n      collection = this.workObjectDictionary;\n    }\n    collection.add(src, name);\n  }\n\n  unregisterIconForType(type: ElementTypes, name: string): void {\n    if (name.includes(type)) {\n      throw new Error('Name should not include type!');\n    }\n\n    let collection = new Dictionary();\n    if (type === ElementTypes.ACTOR) {\n      collection = this.actorIconDictionary;\n    } else if (type === ElementTypes.WORKOBJECT) {\n      collection = this.workObjectDictionary;\n    }\n    collection.delete(name);\n  }\n\n  updateIconRegistries(\n    actors: BusinessObject[],\n    workObjects: BusinessObject[],\n    config: IconSetConfiguration,\n  ): void {\n    const elements: BusinessObject[] = [];\n\n    actors.forEach((a) => elements.push(a));\n    workObjects.forEach((w) => elements.push(w));\n\n    const customIcons = new Dictionary();\n\n    const actorsDict = new Dictionary();\n    const workObjectsDict = new Dictionary();\n    config.actors.keysArray().forEach((key) => {\n      actorsDict.set(key, config.actors.get(key));\n    });\n    config.workObjects.keysArray().forEach((key) => {\n      workObjectsDict.set(key, config.workObjects.get(key));\n    });\n\n    this.extractCustomIconsFromDictionary(actorsDict, customIcons);\n    this.extractCustomIconsFromDictionary(workObjectsDict, customIcons);\n\n    elements.forEach((element) => {\n      const name = sanitizeIconName(\n        element.type\n          .replace(ElementTypes.ACTOR, '')\n          .replace(ElementTypes.WORKOBJECT, ''),\n      );\n      if (\n        (element.type.includes(ElementTypes.ACTOR) ||\n          element.type.includes(ElementTypes.WORKOBJECT)) &&\n        !this.getFullDictionary().has(name)\n      ) {\n        let elementType;\n        if (element.type.includes(ElementTypes.ACTOR)) {\n          elementType = ElementTypes.ACTOR;\n        } else {\n          elementType = ElementTypes.WORKOBJECT;\n        }\n        this.registerIconForBPMN(\n          ICON_PREFIX + name.toLowerCase(),\n          getIconId(element.type),\n          elementType,\n        );\n      }\n    });\n\n    this.addNewIconsToDictionary(customIcons);\n    this.addIconsToTypeDictionary(actors, workObjects);\n  }\n\n  private extractCustomIconsFromDictionary(\n    elementDictionary: Dictionary,\n    customIcons: Dictionary,\n  ) {\n    elementDictionary.keysArray().forEach((name) => {\n      const sanitizedName = sanitizeIconName(name);\n      if (!this.getFullDictionary().has(sanitizedName)) {\n        customIcons.add(elementDictionary.get(name), sanitizedName);\n      }\n    });\n  }\n\n  /** Add new Icon(s) **/\n\n  private addNewIconsToDictionary(customIcons: Dictionary) {\n    customIcons.keysArray().forEach((key) => {\n      const custom = customIcons.get(key);\n      this.addIMGToIconDictionary(custom, key);\n    });\n    this.addIconsToCss(customIcons);\n  }\n\n  addIMGToIconDictionary(input: string, name: string): void {\n    appendedIcons.set(name, input);\n  }\n\n  addIconsToCss(customIcons: Dictionary) {\n    const sheetEl = document.getElementById('iconsCss');\n    customIcons.keysArray().forEach((key) => {\n      const src = customIcons.get(key);\n      const iconStyle =\n        '.' +\n        ICON_PREFIX +\n        sanitizeIconName(key.toLowerCase()) +\n        '::before{ content: url(\"data:image/svg+xml;utf8,' +\n        this.wrapSRCInSVG(src) +\n        '\"); margin: 3px;}';\n      // @ts-ignore\n      sheetEl?.sheet?.insertRule(iconStyle, sheetEl.sheet.cssRules.length);\n    });\n  }\n\n  private wrapSRCInSVG(src: string): string {\n    return (\n      \"<svg viewBox='0 0 22 22' width='22' height='22' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><image width='22' height='22' xlink:href='\" +\n      src +\n      \"'/></svg>\"\n    );\n  }\n\n  /** Getter & Setter **/\n\n  getFullDictionary(): Dictionary {\n    const fullDictionary = new Dictionary();\n    fullDictionary.appendDict(this.allIconDictionary);\n    fullDictionary.appendDict(this.getAppendedIconDictionary());\n    return fullDictionary;\n  }\n\n  getAppendedIconDictionary(): Dictionary {\n    const appendedDict = new Dictionary();\n    appendedIcons.keysArray().forEach((key) => {\n      if (!this.allIconDictionary.has(key)) {\n        appendedDict.set(key, appendedIcons.get(key));\n      }\n    });\n    return appendedDict;\n  }\n\n  getTypeDictionary(type: ElementTypes): Dictionary {\n    if (type === ElementTypes.ACTOR) {\n      return this.actorIconDictionary;\n    } else if (type === ElementTypes.WORKOBJECT) {\n      return this.workObjectDictionary;\n    }\n    return new Dictionary();\n  }\n\n  getTypeDictionaryKeys(type: ElementTypes): string[] {\n    return this.getTypeDictionary(type).keysArray();\n  }\n\n  getTypeIconSRC(type: ElementTypes, name: string): string | null {\n    if (type === ElementTypes.ACTOR) {\n      return this.actorIconDictionary.get(name);\n    } else if (type === ElementTypes.WORKOBJECT) {\n      return this.workObjectDictionary.get(name);\n    }\n    return null;\n  }\n\n  getIconForBPMN(elementType: ElementTypes, name: string): string | null {\n    return this.iconDictionaryForBPMN.get(`${elementType}${name}`);\n  }\n\n  getIconSource(name: string): string | null {\n    if (this.allIconDictionary.has(name)) {\n      return this.allIconDictionary.get(name);\n    } else if (appendedIcons.has(name)) {\n      return appendedIcons.get(name);\n    }\n    return null;\n  }\n\n  getElementsOfType(\n    elements: BusinessObject[],\n    type: ElementTypes,\n  ): BusinessObject[] {\n    const elementOfType: any = [];\n    elements.forEach((element) => {\n      if (element.type.includes(type)) {\n        elementOfType.push(element);\n      }\n    });\n    return elementOfType;\n  }\n\n  getAllIconDictionary(): Dictionary {\n    return this.allIconDictionary;\n  }\n\n  getActorsDictionary(): Dictionary {\n    return this.actorIconDictionary;\n  }\n\n  getWorkObjectsDictionary(): Dictionary {\n    return this.workObjectDictionary;\n  }\n\n  getIconConfiguration(): IconConfiguration {\n    return this.iconConfig;\n  }\n\n  setCustomConfiguration(customConfiguration: IconSetConfiguration): void {\n    this.customConfiguration = customConfiguration;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ElementRegistryService } from 'src/app/domain/services/element-registry.service';\nimport { IconDictionaryService } from 'src/app/tools/icon-set-config/services/icon-dictionary.service';\nimport { Dictionary } from 'src/app/domain/entities/dictionary';\nimport { ElementTypes } from 'src/app/domain/entities/elementTypes';\nimport { defaultConf } from '../domain/iconConfiguration';\nimport { TitleService } from '../../title/services/title.service';\nimport {\n  ICON_SET_CONFIGURATION_TAG,\n  INITIAL_ICON_SET_NAME,\n} from '../../../domain/entities/constants';\nimport { IconSetConfiguration } from '../../../domain/entities/icon-set-configuration';\nimport { IconSetConfigurationForExport } from '../../../domain/entities/icon-set-configuration-for-export';\nimport { CustomIconSetConfiguration } from '../../../domain/entities/custom-icon-set-configuration';\nimport { StorageService } from '../../../domain/services/storage.service';\n\nexport interface FileConfiguration {\n  name: string;\n  actors: { [p: string]: any };\n  workObjects: { [p: string]: any };\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class IconSetConfigurationService {\n  constructor(\n    private iconDictionaryService: IconDictionaryService,\n    private elementRegistryService: ElementRegistryService,\n    private titleService: TitleService,\n    private storageService: StorageService,\n  ) {}\n\n  setIconSetName(iconSetName: string): void {\n    this.titleService.setIconSetName(\n      iconSetName ? iconSetName : INITIAL_ICON_SET_NAME,\n    );\n  }\n\n  exportConfiguration(): void {\n    const iconSetConfiguration = this.getCurrentConfigurationForExport();\n    if (!iconSetConfiguration) {\n      return;\n    }\n\n    const configJSONString = JSON.stringify(iconSetConfiguration, null, 2);\n    const filename = this.titleService.getIconSetName();\n    const element = document.createElement('a');\n\n    element.setAttribute(\n      'href',\n      'data:text/plain;charset=utf-8,' + encodeURIComponent(configJSONString),\n    );\n    element.setAttribute('download', filename + '.iconset');\n    element.style.display = 'none';\n    document.body.appendChild(element);\n\n    element.click();\n\n    document.body.removeChild(element);\n  }\n\n  loadConfiguration(\n    customConfig: IconSetConfiguration,\n    updateIconSetName = true,\n  ): void {\n    let actorDict = new Dictionary();\n    let workObjectDict = new Dictionary();\n\n    if (customConfig.actors.keysArray()) {\n      actorDict = customConfig.actors;\n      workObjectDict = customConfig.workObjects;\n    } else {\n      actorDict.addEach(customConfig.actors);\n      workObjectDict.addEach(customConfig.workObjects);\n    }\n\n    const actorKeys = actorDict.keysArray();\n    const workObjectKeys = workObjectDict.keysArray();\n\n    this.iconDictionaryService.updateIconRegistries([], [], customConfig);\n\n    this.iconDictionaryService\n      .getIconConfiguration()\n      .appendSRCFile(actorKeys, actorDict, workObjectKeys, workObjectDict);\n\n    this.iconDictionaryService.addIconsFromIconSetConfiguration(\n      ElementTypes.ACTOR,\n      actorKeys.map((a) => ElementTypes.ACTOR + a),\n    );\n    this.iconDictionaryService.addIconsFromIconSetConfiguration(\n      ElementTypes.WORKOBJECT,\n      workObjectKeys.map((w) => ElementTypes.WORKOBJECT + w),\n    );\n\n    if (updateIconSetName) {\n      const configurationName = customConfig.name;\n      this.setIconSetName(configurationName);\n    }\n  }\n\n  getCurrentConfiguration(): IconSetConfiguration | undefined {\n    const actors = this.iconDictionaryService.getActorsDictionary();\n    const workObjects = this.iconDictionaryService.getWorkObjectsDictionary();\n\n    let iconSetConfiguration;\n\n    if (actors.size() > 0 && workObjects.size() > 0) {\n      iconSetConfiguration = this.createConfigFromDictionaries(\n        actors,\n        workObjects,\n      );\n    }\n    return iconSetConfiguration;\n  }\n\n  getCurrentConfigurationForExport():\n    | IconSetConfigurationForExport\n    | undefined {\n    const currentConfiguration = this.getCurrentConfiguration();\n\n    if (currentConfiguration) {\n      const actors: any = {};\n      const workObjects: any = {};\n\n      currentConfiguration.actors.all().forEach((entry) => {\n        actors[entry.key] = entry.value;\n      });\n      currentConfiguration.workObjects.all().forEach((entry) => {\n        workObjects[entry.key] = entry.value;\n      });\n\n      return {\n        name: currentConfiguration.name,\n        actors: actors,\n        workObjects: workObjects,\n      };\n    }\n    return;\n  }\n\n  getCurrentConfigurationNamesWithoutPrefix(): CustomIconSetConfiguration {\n    return {\n      name: this.titleService.getIconSetName() || INITIAL_ICON_SET_NAME,\n      actors: this.iconDictionaryService\n        .getActorsDictionary()\n        .keysArray()\n        .map((a) => a.replace(ElementTypes.ACTOR, '')),\n      workObjects: this.iconDictionaryService\n        .getWorkObjectsDictionary()\n        .keysArray()\n        .map((w) => w.replace(ElementTypes.WORKOBJECT, '')),\n    };\n  }\n\n  createMinimalConfigurationWithDefaultIcons(): IconSetConfiguration {\n    const minimalConfig = this.createConfigFromCanvas();\n\n    defaultConf.actors.forEach((iconName) => {\n      minimalConfig.actors.add(\n        this.iconDictionaryService.getIconSource(iconName),\n        iconName,\n      );\n    });\n    defaultConf.workObjects.forEach((iconName) => {\n      minimalConfig.workObjects.add(\n        this.iconDictionaryService.getIconSource(iconName),\n        iconName,\n      );\n    });\n\n    return minimalConfig;\n  }\n\n  private createConfigFromDictionaries(\n    actorsDict: Dictionary,\n    workObjectsDict: Dictionary,\n  ): IconSetConfiguration {\n    const actorNames = actorsDict.keysArray();\n    const workobjectNames = workObjectsDict.keysArray();\n    const newActors = new Dictionary();\n    const newWorkobjects = new Dictionary();\n\n    // Fill Configuration from Canvas-Objects\n    actorNames.forEach((actor) => {\n      newActors.add(\n        actorsDict.get(actor),\n        actor.replace(ElementTypes.ACTOR, ''),\n      );\n    });\n    workobjectNames.forEach((workObject) => {\n      newWorkobjects.add(\n        workObjectsDict.get(workObject),\n        workObject.replace(ElementTypes.WORKOBJECT, ''),\n      );\n    });\n\n    return {\n      name: this.titleService.getIconSetName(),\n      actors: newActors,\n      workObjects: newWorkobjects,\n    };\n  }\n\n  public createIconSetConfiguration(\n    fileConfiguration: FileConfiguration,\n  ): IconSetConfiguration {\n    const actorsDict = new Dictionary();\n    const workObjectsDict = new Dictionary();\n    Object.keys(fileConfiguration.actors).forEach((key) => {\n      let icon = fileConfiguration.actors[key];\n      if (icon) {\n        // make sure the actor has an icon\n        actorsDict.add(icon, key);\n      }\n    });\n\n    Object.keys(fileConfiguration.workObjects).forEach((key) => {\n      let icon = fileConfiguration.workObjects[key];\n      if (icon) {\n        // make sure the work object has an icon\n        workObjectsDict.add(icon, key);\n      }\n    });\n\n    return {\n      name: fileConfiguration.name,\n      actors: actorsDict,\n      workObjects: workObjectsDict,\n    };\n  }\n\n  public getStoredIconSetConfiguration(): IconSetConfiguration | undefined {\n    const iconSetString = this.storageService.get(ICON_SET_CONFIGURATION_TAG);\n\n    if (!iconSetString) {\n      return;\n    } else {\n      const configurationFromFile = this.createIconSetConfiguration(\n        JSON.parse(iconSetString),\n      );\n      if (this.checkValidityOfConfiguration(configurationFromFile)) {\n        return configurationFromFile;\n      }\n    }\n    return;\n  }\n\n  public setStoredIconSetConfiguration(config: IconSetConfiguration): void {\n    const actors: {\n      [p: string]: any;\n    } = {};\n    config.actors.keysArray().forEach((key) => {\n      actors[key] = config.actors.get(key);\n    });\n    const workObjects: {\n      [p: string]: any;\n    } = {};\n    config.workObjects.keysArray().forEach((key) => {\n      workObjects[key] = config.workObjects.get(key);\n    });\n\n    const configForStorage = {\n      name: config.name,\n      actors: actors,\n      workObjects: workObjects,\n    };\n\n    this.storageService.set(\n      ICON_SET_CONFIGURATION_TAG,\n      JSON.stringify(configForStorage, null, 2),\n    );\n  }\n\n  private createConfigFromCanvas(): IconSetConfiguration {\n    const config = {\n      name: INITIAL_ICON_SET_NAME,\n      actors: new Dictionary(),\n      workObjects: new Dictionary(),\n    };\n\n    let allCanvasObjects = this.elementRegistryService.getAllCanvasObjects();\n\n    allCanvasObjects\n      .map((e) => e.businessObject)\n      .forEach((element) => {\n        const type = element.type\n          .replace(ElementTypes.ACTOR, '')\n          .replace(ElementTypes.WORKOBJECT, '');\n        if (element.type.includes(ElementTypes.ACTOR)) {\n          let src = this.iconDictionaryService.getIconSource(type) || '';\n          config.actors.add(src, type);\n        } else if (element.type.includes(ElementTypes.WORKOBJECT)) {\n          let src = this.iconDictionaryService.getIconSource(type) || '';\n          config.workObjects.add(src, type);\n        }\n      });\n\n    return config;\n  }\n\n  private checkValidityOfConfiguration(\n    iconSetConfiguration: IconSetConfiguration,\n  ) {\n    return (\n      iconSetConfiguration.actors.keysArray().length > 1 &&\n      iconSetConfiguration.workObjects.keysArray().length > 1 &&\n      !iconSetConfiguration.actors\n        .all()\n        .some((e) => typeof e.value !== 'string') &&\n      !iconSetConfiguration.workObjects\n        .all()\n        .some((e) => typeof e.value !== 'string')\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { UsedIconList } from 'src/app/domain/entities/UsedIconList';\nimport { ElementRegistryService } from 'src/app/domain/services/element-registry.service';\nimport {\n  SNACKBAR_DURATION,\n  SNACKBAR_INFO,\n  SNACKBAR_SUCCESS,\n} from '../../../domain/entities/constants';\nimport { Dictionary } from '../../../domain/entities/dictionary';\nimport { ElementTypes } from '../../../domain/entities/elementTypes';\nimport { IconListItem } from '../domain/iconListItem';\nimport { TitleService } from '../../title/services/title.service';\nimport { IconSetConfigurationService } from './icon-set-configuration.service';\nimport { IconDictionaryService } from './icon-dictionary.service';\nimport getIconId = ElementTypes.getIconId;\nimport { IconSetConfiguration } from '../../../domain/entities/icon-set-configuration';\nimport { CustomIconSetConfiguration } from '../../../domain/entities/custom-icon-set-configuration';\n\n/**\n * We are not allowed to call ImportDomainStoryService directly,\n * so we use this \"interface\" instead.\n */\nexport abstract class IconSetChangedService {\n  public abstract iconConfigrationChanged(): Observable<IconSetConfiguration>;\n  public abstract getConfiguration(): IconSetConfiguration;\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class IconSetCustomizationService {\n  private readonly iconSetConfigurationTypes: BehaviorSubject<CustomIconSetConfiguration>;\n\n  private allIconListItems = new Dictionary();\n\n  private configurationHasChanged = false;\n\n  selectedActors$ = new BehaviorSubject<string[]>([]);\n  selectedWorkobjects$ = new BehaviorSubject<string[]>([]);\n  private changedIconSetConfiguration: IconSetConfiguration | undefined;\n\n  constructor(\n    private iconSetConfigurationService: IconSetConfigurationService,\n    private iconDictionaryService: IconDictionaryService,\n    iconSetChangedService: IconSetChangedService,\n    private titleService: TitleService,\n    private elementRegistryService: ElementRegistryService,\n    private snackbar: MatSnackBar,\n  ) {\n    this.iconSetConfigurationTypes = new BehaviorSubject(\n      this.iconSetConfigurationService.getCurrentConfigurationNamesWithoutPrefix(),\n    );\n\n    this.selectedWorkobjects$.next(\n      this.iconSetConfigurationTypes.value.workObjects,\n    );\n    this.selectedActors$.next(this.iconSetConfigurationTypes.value.actors);\n\n    iconDictionaryService\n      .getAllIconDictionary()\n      .keysArray()\n      .forEach((iconName) => {\n        this.addIconToAllIconList(iconName);\n      });\n\n    iconSetChangedService.iconConfigrationChanged().subscribe((config) => {\n      this.importConfiguration(config);\n    });\n\n    const storedIconSetConfiguration =\n      this.iconSetConfigurationService.getStoredIconSetConfiguration();\n    if (storedIconSetConfiguration) {\n      this.importConfiguration(storedIconSetConfiguration, false);\n    }\n    const importedConfiguration = iconSetChangedService.getConfiguration();\n    if (importedConfiguration) {\n      this.importConfiguration(importedConfiguration, false);\n    }\n  }\n\n  importConfiguration(\n    customConfig: IconSetConfiguration,\n    saveIconSet = true,\n  ): void {\n    const actorKeys = customConfig.actors.keysArray();\n    const workObjectKeys = customConfig.workObjects.keysArray();\n\n    this.changeName(customConfig.name);\n    actorKeys.forEach((iconName) => {\n      if (!this.allIconListItems.has(iconName)) {\n        this.addIconToAllIconList(iconName);\n      }\n      const selectedActorNames = this.selectedActors$.value;\n      if (!selectedActorNames.includes(iconName)) {\n        this.selectActor(iconName);\n      }\n    });\n    workObjectKeys.forEach((iconName) => {\n      if (!this.allIconListItems.has(iconName)) {\n        this.addIconToAllIconList(iconName);\n      }\n      const selectedWorkobjectNames = this.selectedWorkobjects$.value;\n      if (!selectedWorkobjectNames.includes(iconName)) {\n        this.selectWorkObject(iconName);\n      }\n    });\n    if (saveIconSet) {\n      this.saveIconSet(this.elementRegistryService.getUsedIcons(), true);\n    }\n  }\n\n  /** Getter & Setter **/\n  getIconSetConfiguration(): BehaviorSubject<CustomIconSetConfiguration> {\n    return this.iconSetConfigurationTypes;\n  }\n\n  getIconForName(iconName: string): BehaviorSubject<IconListItem> {\n    return this.allIconListItems.get(iconName);\n  }\n\n  isIconActor(iconName: string): boolean {\n    return (\n      this.iconSetConfigurationTypes.value.actors.filter(\n        (actor: string) => actor === iconName,\n      ).length > 0\n    );\n  }\n\n  isIconWorkObject(iconName: string): boolean {\n    return (\n      this.iconSetConfigurationTypes.value.workObjects.filter(\n        (workObject: string) => workObject === iconName,\n      ).length > 0\n    );\n  }\n\n  changeName(iconSetName: string): void {\n    this.titleService.setIconSetName(iconSetName);\n    const changedIconSet = this.iconSetConfigurationTypes.value;\n    changedIconSet.name = iconSetName;\n    this.iconSetConfigurationTypes.next(changedIconSet);\n  }\n\n  /** Selected Icons **/\n  setAsUnassigned(iconName: string, isActor: boolean): void {\n    if (isActor) {\n      this.deselectActor(iconName);\n    } else {\n      this.deselectWorkobject(iconName);\n    }\n    this.updateIcon(false, false, iconName);\n  }\n\n  setAsActor(isActor: boolean, actor: string): void {\n    if (isActor) {\n      this.updateIcon(true, false, actor);\n      this.selectActor(actor);\n      this.deselectWorkobject(actor);\n    } else {\n      this.deselectActor(actor);\n      this.updateIcon(false, false, actor);\n    }\n  }\n\n  setAsWorkobject(isWorkobject: boolean, workobject: string): void {\n    if (isWorkobject) {\n      this.updateIcon(false, true, workobject);\n      this.selectWorkObject(workobject);\n      this.deselectActor(workobject);\n    } else {\n      this.deselectWorkobject(workobject);\n      this.updateIcon(false, false, workobject);\n    }\n  }\n\n  selectActor(actor: string): void {\n    const value = this.iconSetConfigurationTypes.value;\n    if (!value.actors.includes(actor)) {\n      value.actors.push(actor);\n      this.iconSetConfigurationTypes.next(value);\n      this.updateActorSubject();\n    }\n  }\n\n  selectWorkObject(workObject: string): void {\n    const value = this.iconSetConfigurationTypes.value;\n    if (!value.workObjects.includes(workObject)) {\n      value.workObjects.push(workObject);\n      this.iconSetConfigurationTypes.next(value);\n      this.updateWorkObjectSubject();\n    }\n  }\n\n  deselectActor(actor: string): void {\n    if (this.iconSetConfigurationTypes) {\n      this.iconSetConfigurationTypes.next({\n        name: this.iconSetConfigurationTypes.value.name,\n        actors: this.iconSetConfigurationTypes.value.actors.filter(\n          (a: string) => !a.includes(actor),\n        ),\n        workObjects: this.iconSetConfigurationTypes.value.workObjects,\n      });\n    }\n    this.updateActorSubject();\n  }\n\n  deselectWorkobject(workobject: string): void {\n    if (this.iconSetConfigurationTypes) {\n      this.iconSetConfigurationTypes.next({\n        name: this.iconSetConfigurationTypes.value.name,\n        actors: this.iconSetConfigurationTypes.value.actors,\n        workObjects: this.iconSetConfigurationTypes.value.workObjects.filter(\n          (w: string) => !w.includes(workobject),\n        ),\n      });\n    }\n    this.updateWorkObjectSubject();\n  }\n\n  setSelectedWorkObject(sortedList: string[]): void {\n    const value = this.iconSetConfigurationTypes.value;\n    value.workObjects = sortedList;\n    this.iconSetConfigurationTypes.next(value);\n    this.updateWorkObjectSubject();\n  }\n\n  setSelectedActors(sortedList: string[]): void {\n    const value = this.iconSetConfigurationTypes.value;\n    value.actors = sortedList;\n    this.iconSetConfigurationTypes.next(value);\n    this.updateActorSubject();\n  }\n\n  private updateActorSubject(): void {\n    this.selectedActors$.next(this.iconSetConfigurationTypes.value.actors);\n    this.configurationHasChanged = true;\n  }\n\n  private updateWorkObjectSubject(): void {\n    this.selectedWorkobjects$.next(\n      this.iconSetConfigurationTypes.value.workObjects,\n    );\n    this.configurationHasChanged = true;\n  }\n\n  /** Revert Icon Set **/\n  resetIconSet(): void {\n    const defaultConfig =\n      this.iconSetConfigurationService.createMinimalConfigurationWithDefaultIcons();\n\n    this.selectedWorkobjects$.value.forEach((workObjectName) => {\n      if (!defaultConfig.workObjects.has(workObjectName)) {\n        this.deselectWorkobject(workObjectName);\n      }\n    });\n    this.selectedActors$.value.forEach((actorName) => {\n      if (!defaultConfig.actors.has(actorName)) {\n        this.deselectActor(actorName);\n      }\n    });\n\n    this.iconSetConfigurationTypes.next({\n      name: defaultConfig.name,\n      actors: defaultConfig.actors.keysArray(),\n      workObjects: defaultConfig.workObjects.keysArray(),\n    } as CustomIconSetConfiguration);\n\n    this.updateAllIconBehaviourSubjects();\n  }\n\n  cancel(): void {\n    this.iconSetConfigurationTypes.next(\n      this.iconSetConfigurationService.getCurrentConfigurationNamesWithoutPrefix(),\n    );\n    this.updateAllIconBehaviourSubjects();\n    this.resetToInitialConfiguration();\n  }\n\n  private resetToInitialConfiguration(): void {\n    this.updateActorSubject();\n    this.updateWorkObjectSubject();\n  }\n\n  /** Persist Icon Set **/\n  saveIconSet(usedIcons: UsedIconList, imported = false): void {\n    const changedActors: string[] = [];\n    const changedWorkobjects: string[] = [];\n    if (this.configurationHasChanged) {\n      const changedIconSet = this.createIconSetConfiguration();\n\n      const configurationActors = changedIconSet.actors.keysArray();\n      usedIcons?.actors.forEach((actor) => {\n        if (\n          !configurationActors?.includes(actor) &&\n          !changedActors.includes(actor)\n        ) {\n          changedActors.push(actor);\n        }\n      });\n      const configurationWorkobjects = changedIconSet.workObjects.keysArray();\n      usedIcons?.workobjects.forEach((workobject) => {\n        if (\n          !configurationWorkobjects?.includes(workobject) &&\n          !changedWorkobjects.includes(workobject)\n        ) {\n          changedWorkobjects.push(workobject);\n        }\n      });\n\n      if (!changedActors.length && !changedWorkobjects.length) {\n        this.changedIconSetConfiguration = changedIconSet;\n\n        this.updateIcons(changedIconSet);\n\n        this.iconSetConfigurationService.setStoredIconSetConfiguration(\n          this.changedIconSetConfiguration,\n        );\n        this.snackbar.open(\n          imported\n            ? 'Configuration imported successfully'\n            : 'Configuration saved successfully',\n          undefined,\n          {\n            duration: SNACKBAR_DURATION,\n            panelClass: SNACKBAR_SUCCESS,\n          },\n        );\n      }\n    } else {\n      this.snackbar.open(\n        imported\n          ? 'No configuration to be imported'\n          : 'No configuration to be saved',\n        undefined,\n        {\n          duration: SNACKBAR_DURATION,\n          panelClass: SNACKBAR_INFO,\n        },\n      );\n    }\n    if (changedActors.length || changedWorkobjects.length) {\n      if (changedActors.length) {\n        const actors = changedActors.join(', ');\n        this.snackbar.open(\n          `The following icons are already in use as actors and cannot be changed: ${actors}`,\n          undefined,\n          {\n            duration: SNACKBAR_DURATION * 3,\n            panelClass: SNACKBAR_INFO,\n          },\n        );\n      }\n      if (changedWorkobjects.length) {\n        const workobjects = changedWorkobjects.join(', ');\n        this.snackbar.open(\n          `The following icons are already in use as workobjects and cannot be changed: ${workobjects}`,\n          undefined,\n          {\n            duration: SNACKBAR_DURATION * 3,\n            panelClass: SNACKBAR_INFO,\n          },\n        );\n      }\n    }\n  }\n\n  exportIconSet(): void {\n    this.iconSetConfigurationService.exportConfiguration();\n  }\n\n  getAndClearSavedConfiguration(): IconSetConfiguration | undefined {\n    const temp = this.changedIconSetConfiguration;\n    this.changedIconSetConfiguration = undefined;\n\n    return temp;\n  }\n\n  private createIconSetConfiguration(): IconSetConfiguration {\n    const actors = new Dictionary();\n    const workObjects = new Dictionary();\n\n    this.iconSetConfigurationTypes.value.actors.forEach((name: string) => {\n      actors.add(this.iconDictionaryService.getIconSource(name), name);\n    });\n    this.iconSetConfigurationTypes.value.workObjects.forEach((name: string) => {\n      workObjects.add(this.iconDictionaryService.getIconSource(name), name);\n    });\n\n    return {\n      name: this.iconSetConfigurationTypes.value.name || '',\n      actors,\n      workObjects,\n    };\n  }\n\n  /** Update Icons **/\n  addNewIcon(iconName: string): void {\n    const iconDict = new Dictionary();\n    iconDict.add(this.getSrcForIcon(iconName), iconName);\n    this.iconDictionaryService.addIconsToCss(iconDict);\n    this.addIconToAllIconList(iconName);\n  }\n\n  private addIconToAllIconList(iconName: string): void {\n    this.allIconListItems.add(\n      new BehaviorSubject({\n        name: iconName,\n        svg: this.getSrcForIcon(iconName),\n        isActor: this.isIconActor(iconName),\n        isWorkObject: this.isIconWorkObject(iconName),\n      }),\n      iconName,\n    );\n  }\n\n  private updateIcon(\n    isActor: boolean,\n    isWorkobject: boolean,\n    iconName: string,\n  ) {\n    const iconBehaviourSubject = this.getIconForName(iconName);\n    const icon = iconBehaviourSubject.value;\n    icon.isActor = isActor;\n    icon.isWorkObject = isWorkobject;\n\n    iconBehaviourSubject.next(icon);\n  }\n\n  private updateAllIconBehaviourSubjects(): void {\n    const customIconSetConfiguration = this.iconSetConfigurationTypes.value;\n    this.allIconListItems.keysArray().forEach((iconName) => {\n      if (customIconSetConfiguration.actors.includes(iconName)) {\n        this.updateIcon(true, false, iconName);\n      } else if (customIconSetConfiguration.workObjects.includes(iconName)) {\n        this.updateIcon(false, true, iconName);\n      } else {\n        this.updateIcon(false, false, iconName);\n      }\n    });\n  }\n\n  private getSrcForIcon(name: string): string {\n    let iconName: string;\n    if (name.includes(ElementTypes.DOMAINSTORY)) {\n      // TODO: td: This returns empty every time!\n      iconName = getIconId(name);\n    } else {\n      iconName = name;\n    }\n    const rawSrc = this.iconDictionaryService.getIconSource(iconName);\n\n    if (!rawSrc) {\n      return '';\n    }\n\n    if (rawSrc.startsWith('data')) {\n      return rawSrc;\n    } else {\n      return 'data:image/svg+xml,' + rawSrc;\n    }\n  }\n\n  private updateIcons(changedIconSet: IconSetConfiguration) {\n    this.allIconListItems\n      .keysArray()\n      .forEach((item) => this.setAsUnassigned(item, this.isIconActor(item)));\n    changedIconSet.actors.keysArray().forEach((actor) => {\n      this.iconDictionaryService.registerIconForType(\n        ElementTypes.ACTOR,\n        actor,\n        this.iconDictionaryService.getFullDictionary().get(actor),\n      );\n      this.iconDictionaryService.unregisterIconForType(\n        ElementTypes.WORKOBJECT,\n        actor,\n      );\n      this.setAsActor(true, actor);\n    });\n    changedIconSet.workObjects.keysArray().forEach((workObject) => {\n      this.iconDictionaryService.registerIconForType(\n        ElementTypes.WORKOBJECT,\n        workObject,\n        this.iconDictionaryService.getFullDictionary().get(workObject),\n      );\n      this.iconDictionaryService.unregisterIconForType(\n        ElementTypes.ACTOR,\n        workObject,\n      );\n      this.setAsWorkobject(true, workObject);\n    });\n  }\n}\n","import { EventEmitter, Injectable, OnDestroy } from '@angular/core';\nimport { IconDictionaryService } from 'src/app/tools/icon-set-config/services/icon-dictionary.service';\nimport { Dictionary } from 'src/app/domain/entities/dictionary';\nimport { ElementTypes } from 'src/app/domain/entities/elementTypes';\nimport { TitleService } from 'src/app/tools/title/services/title.service';\nimport { ImportRepairService } from 'src/app/tools/import/services/import-repair.service';\nimport { Observable, Subscription } from 'rxjs';\nimport { RendererService } from 'src/app/tools/modeler/services/renderer.service';\nimport { BusinessObject } from 'src/app/domain/entities/businessObject';\nimport { DialogService } from '../../../domain/services/dialog.service';\nimport { InfoDialogComponent } from '../../../domain/presentation/info-dialog/info-dialog.component';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { InfoDialogData } from '../../../domain/entities/infoDialogData';\nimport {\n  INITIAL_DESCRIPTION,\n  INITIAL_TITLE,\n  SNACKBAR_DURATION,\n  SNACKBAR_ERROR,\n} from '../../../domain/entities/constants';\nimport { IconSetConfigurationService } from '../../icon-set-config/services/icon-set-configuration.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { IconSetConfiguration } from '../../../domain/entities/icon-set-configuration';\nimport { IconSetChangedService } from '../../icon-set-config/services/icon-set-customization.service';\nimport { ModelerService } from '../../modeler/services/modeler.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ImportDomainStoryService\n  implements OnDestroy, IconSetChangedService\n{\n  titleSubscription: Subscription;\n  descriptionSubscription: Subscription;\n\n  title = INITIAL_TITLE;\n  description = INITIAL_DESCRIPTION;\n  private importedConfiguration: IconSetConfiguration | null = null;\n\n  private importedConfigurationEmitter =\n    new EventEmitter<IconSetConfiguration>();\n\n  constructor(\n    private iconDictionaryService: IconDictionaryService,\n    private importRepairService: ImportRepairService,\n    private titleService: TitleService,\n    private rendererService: RendererService,\n    private dialogService: DialogService,\n    private iconSetConfigurationService: IconSetConfigurationService,\n    private modelerService: ModelerService,\n    private snackbar: MatSnackBar,\n  ) {\n    this.titleSubscription = this.titleService.title$.subscribe(\n      (title: string) => {\n        this.title = title;\n      },\n    );\n    this.descriptionSubscription = this.titleService.description$.subscribe(\n      (description: string) => {\n        this.description = description;\n      },\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.titleSubscription.unsubscribe();\n    this.descriptionSubscription.unsubscribe();\n  }\n\n  iconConfigrationChanged(): Observable<IconSetConfiguration> {\n    return this.importedConfigurationEmitter.asObservable();\n  }\n\n  getConfiguration(): IconSetConfiguration {\n    const config: IconSetConfiguration = {\n      name: this.importedConfiguration?.name || '',\n      actors: this.importedConfiguration?.actors || new Dictionary(),\n      workObjects: this.importedConfiguration?.workObjects || new Dictionary(),\n    };\n    this.importedConfiguration = null;\n    return config;\n  }\n\n  performImport(): void {\n    // @ts-ignore\n    const file = document.getElementById('import').files[0];\n    const filename = file.name;\n\n    const dstSvgPattern = /.*(.dst)(\\s*\\(\\d+\\)){0,1}\\.svg/;\n    const egnSvgPattern = /.*(.egn)(\\s*\\(\\d+\\)){0,1}\\.svg/;\n\n    if (filename.endsWith('.dst')) {\n      this.importDST(file, filename, false);\n    } else if (filename.match(dstSvgPattern)) {\n      this.importDST(file, filename, true);\n    } else if (filename.endsWith('.egn')) {\n      this.importEGN(file, filename, false);\n    } else if (filename.match(egnSvgPattern)) {\n      this.importEGN(file, filename, true);\n    }\n    this.modelerService.commandStackChanged();\n  }\n\n  importDST(input: Blob, filename: string, isSVG: boolean): void {\n    const fileReader = new FileReader();\n    const titleText = this.restoreTitleFromFileName(filename, isSVG);\n\n    // no need to put this on the commandStack\n    this.titleService.updateTitleAndDescription(titleText, null, false);\n\n    fileReader.onloadend = (e) => {\n      if (e && e.target) {\n        this.fileReaderFunction(e.target.result, isSVG, false);\n      }\n    };\n\n    fileReader.readAsText(input);\n  }\n\n  importEGN(input: Blob, filename: string, isSVG: boolean): void {\n    const fileReader = new FileReader();\n    const titleText = this.restoreTitleFromFileName(filename, isSVG);\n\n    // no need to put this on the commandStack\n    this.titleService.updateTitleAndDescription(titleText, null, false);\n\n    fileReader.onloadend = (e) => {\n      if (e && e.target) {\n        this.fileReaderFunction(e.target.result, isSVG, true);\n      }\n    };\n\n    fileReader.readAsText(input);\n  }\n\n  private fileReaderFunction(\n    text: string | ArrayBuffer | null,\n    isSVG: boolean,\n    isEGN: boolean,\n  ): void {\n    let dstText;\n    if (typeof text === 'string') {\n      if (isSVG) {\n        dstText = this.removeXMLComments(text);\n      } else {\n        dstText = text;\n      }\n\n      let elements: any[];\n      let config: IconSetConfiguration;\n      let configFromFile: {\n        name: string;\n        actors: { [key: string]: any };\n        workObjects: { [key: string]: any };\n      };\n\n      let dstAndConfig = this.extractDstAndConfig(dstText, isSVG);\n      if (dstAndConfig == null) {\n        return;\n      }\n\n      // current implementation\n      if (dstAndConfig.domain) {\n        configFromFile = isEGN\n          ? dstAndConfig.domain\n          : JSON.parse(dstAndConfig.domain);\n        config =\n          this.iconSetConfigurationService.createIconSetConfiguration(\n            configFromFile,\n          );\n        elements = isEGN ? dstAndConfig.dst : JSON.parse(dstAndConfig.dst);\n      } else {\n        // legacy implementation\n        if (dstAndConfig.config) {\n          configFromFile = JSON.parse(dstAndConfig.config);\n          config =\n            this.iconSetConfigurationService.createIconSetConfiguration(\n              configFromFile,\n            );\n          elements = JSON.parse(dstAndConfig.dst);\n        } else {\n          // implementation prior to configuration\n          elements = JSON.parse(dstText);\n          config =\n            this.iconSetConfigurationService.createMinimalConfigurationWithDefaultIcons();\n        }\n      }\n\n      const configChanged = this.checkConfigForChanges(config);\n\n      let lastElement = elements[elements.length - 1];\n      if (!lastElement.id) {\n        lastElement = elements.pop();\n        let importVersionNumber = lastElement;\n\n        // if the last element has the importedVersionNumber has the tag version,\n        // then there exists another meta tag 'info' for the description\n        if (importVersionNumber.version) {\n          lastElement = elements.pop();\n        }\n\n        if (importVersionNumber.version) {\n          importVersionNumber = importVersionNumber.version as string;\n        } else {\n          importVersionNumber = '?';\n          this.snackbar.open(`The version number is unreadable.`, undefined, {\n            duration: SNACKBAR_DURATION,\n            panelClass: SNACKBAR_ERROR,\n          });\n        }\n        elements = this.handleVersionNumber(importVersionNumber, elements);\n      }\n\n      if (\n        !this.importRepairService.checkForUnreferencedElementsInActivitiesAndRepair(\n          elements,\n        )\n      ) {\n        this.showBrokenImportDialog(isSVG ? 'SVG' : 'DST');\n      }\n\n      this.titleService.updateTitleAndDescription(\n        this.title,\n        lastElement.info,\n        false,\n      );\n\n      this.importRepairService.adjustPositions(elements);\n\n      this.updateIconRegistries(elements, config);\n      this.rendererService.importStory(elements, configChanged, config);\n    }\n  }\n\n  private handleVersionNumber(\n    importVersionNumber: string,\n    elements: BusinessObject[],\n  ): BusinessObject[] {\n    const versionPrefix = +importVersionNumber.substring(\n      0,\n      importVersionNumber.lastIndexOf('.'),\n    );\n    if (versionPrefix <= 0.5) {\n      elements =\n        this.importRepairService.updateCustomElementsPreviousV050(elements);\n      this.showPreviousV050Dialog(versionPrefix);\n    }\n    return elements;\n  }\n\n  private extractDstAndConfig(dstText: string, isSVG: boolean) {\n    let dstAndConfig = null;\n    try {\n      dstAndConfig = JSON.parse(dstText);\n    } catch (e) {\n      this.showBrokenImportDialog(isSVG ? 'SVG' : 'DST');\n    }\n    return dstAndConfig;\n  }\n\n  private removeXMLComments(xmlText: string): string {\n    xmlText = xmlText.substring(xmlText.indexOf('<DST>'));\n    while (xmlText.includes('<!--') || xmlText.includes('-->')) {\n      xmlText = xmlText.replace('<!--', '').replace('-->', '');\n    }\n    xmlText = xmlText.replace('<DST>', '');\n    xmlText = xmlText.replace('</DST>', '');\n    return xmlText;\n  }\n\n  checkConfigForChanges(iconSetConfiguration: IconSetConfiguration): boolean {\n    const newActorKeys = iconSetConfiguration.actors.keysArray();\n    const newWorkObjectKeys = iconSetConfiguration.workObjects.keysArray();\n\n    const currentActorKeys = this.iconDictionaryService.getTypeDictionaryKeys(\n      ElementTypes.ACTOR,\n    );\n    const currentWorkobjectKeys =\n      this.iconDictionaryService.getTypeDictionaryKeys(ElementTypes.WORKOBJECT);\n\n    let changed = false;\n\n    if (\n      newActorKeys.length !== currentActorKeys.length ||\n      newWorkObjectKeys.length !== currentWorkobjectKeys.length\n    ) {\n      return true;\n    }\n\n    for (let i = 0; i < newActorKeys.length; i++) {\n      changed =\n        this.clearName(currentActorKeys[i]) !== this.clearName(newActorKeys[i]);\n      if (changed) {\n        i = newActorKeys.length;\n      }\n    }\n    if (changed) {\n      return changed;\n    }\n    for (let i = 0; i < newWorkObjectKeys.length; i++) {\n      changed =\n        this.clearName(currentWorkobjectKeys[i]) !==\n        this.clearName(newWorkObjectKeys[i]);\n      if (changed) {\n        i = newWorkObjectKeys.length;\n      }\n    }\n    return changed;\n  }\n\n  private clearName(name: string): string {\n    return name\n      .replace(ElementTypes.ACTOR, '')\n      .replace(ElementTypes.WORKOBJECT, '');\n  }\n\n  private updateIconRegistries(\n    elements: BusinessObject[],\n    config: IconSetConfiguration,\n  ): void {\n    const actorIcons = this.iconDictionaryService.getElementsOfType(\n      elements,\n      ElementTypes.ACTOR,\n    );\n    const workObjectIcons = this.iconDictionaryService.getElementsOfType(\n      elements,\n      ElementTypes.WORKOBJECT,\n    );\n    this.iconDictionaryService.updateIconRegistries(\n      actorIcons,\n      workObjectIcons,\n      config,\n    );\n\n    this.setImportedConfigurationAndEmit(config);\n  }\n\n  private showPreviousV050Dialog(version: number): void {\n    const title = 'Old File Format Detected';\n    const text =\n      'You uploaded a Domain Story that was created with Egon version ' +\n      version +\n      '. The file format has since changed. Egon converted your Domain Story to the new format but it cannot guarantee that your Domain Story is complete.';\n\n    const config = new MatDialogConfig();\n    config.disableClose = false;\n    config.autoFocus = true;\n\n    config.data = new InfoDialogData(title, text, true);\n\n    this.dialogService.openDialog(InfoDialogComponent, config);\n  }\n\n  private setImportedConfigurationAndEmit(config: IconSetConfiguration) {\n    this.importedConfiguration = config;\n    this.importedConfigurationEmitter.emit(config);\n  }\n\n  private showBrokenImportDialog(type: string) {\n    const config = new MatDialogConfig();\n    config.disableClose = false;\n    config.autoFocus = true;\n    config.data = new InfoDialogData(\n      'Error during import',\n      'The uploaded ' +\n        type +\n        ' is not complete, there could be elements missing from the canvas.',\n      true,\n      false,\n    );\n\n    this.dialogService.openDialog(InfoDialogComponent, config);\n  }\n\n  private restoreTitleFromFileName(filename: string, isSVG: boolean): string {\n    let title;\n\n    const domainStoryRegex = /_\\d+-\\d+-\\d+( ?_?-?\\(\\d+\\))?(-?\\d)?(.dst|.egn)/;\n    const svgRegex = /_\\d+-\\d+-\\d+( ?_?-?\\(\\d+\\))?(-?\\d)?(.dst|.egn).svg/;\n\n    const egnSuffix = '.egn';\n    const dstSuffix = '.dst';\n    const svgSuffix = '.svg';\n\n    let filenameWithoutDateSuffix = filename.replace(\n      isSVG ? svgRegex : domainStoryRegex,\n      '',\n    );\n    filenameWithoutDateSuffix = filenameWithoutDateSuffix\n      .replace(svgSuffix, '')\n      .replace(dstSuffix, '')\n      .replace(egnSuffix, '');\n    title = filenameWithoutDateSuffix;\n    return title;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ElementTypes } from 'src/app/domain/entities/elementTypes';\nimport { BusinessObject } from 'src/app/domain/entities/businessObject';\nimport { Waypoint } from 'src/app/domain/entities/waypoint';\nimport { ActivityBusinessObject } from '../../../domain/entities/activityBusinessObject';\n\n/**\n * Repairs broken Domain Stories so that it can be rendered onto the canvas\n * by removing activities and connections that reference elements that don't exists\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ImportRepairService {\n  checkForUnreferencedElementsInActivitiesAndRepair(\n    elements: BusinessObject[],\n  ): boolean {\n    const activities: ActivityBusinessObject[] = [];\n    const objectIDs: string[] = [];\n\n    let complete = true;\n\n    elements.forEach((element) => {\n      const type = element.type;\n      if (type === ElementTypes.ACTIVITY || type === ElementTypes.CONNECTION) {\n        activities.push(element as ActivityBusinessObject);\n      } else {\n        objectIDs.push(element.id);\n      }\n    });\n\n    activities.forEach((activity) => {\n      const source = activity.source;\n      const target = activity.target;\n      if (!objectIDs.includes(source) || !objectIDs.includes(target)) {\n        complete = false;\n        const activityIndex = elements.indexOf(activity);\n        elements = elements.splice(activityIndex, 1);\n      }\n    });\n    return complete;\n  }\n\n  /**\n   * Ensure backwards compatibility.\n   * Previously Document had no special name and was just addressed as workObject\n   * Bubble was renamed to Conversation\n   */\n  updateCustomElementsPreviousV050(\n    elements: BusinessObject[],\n  ): BusinessObject[] {\n    for (const element of elements) {\n      if (element.type === ElementTypes.WORKOBJECT) {\n        element.type = ElementTypes.WORKOBJECT + 'Document';\n      } else if (element.type === ElementTypes.WORKOBJECT + 'Bubble') {\n        element.type = ElementTypes.WORKOBJECT + 'Conversation';\n      }\n    }\n    return elements;\n  }\n\n  /**\n   * Adjusts Positions of Elements to ensure the Domain Story starts in the visible parts of the canvas\n   */\n  adjustPositions(elements: BusinessObject[]): void {\n    let xLeft = 0;\n    let yUp = 0;\n    let isFirst = true;\n\n    this.findFirstElement(elements, isFirst, xLeft, yUp);\n\n    if (xLeft < 75 || xLeft > 150 || yUp < 0 || yUp > 50) {\n      // add Padding for the Palette and the top\n      xLeft -= 75;\n      yUp -= 50;\n\n      elements.forEach((element) =>\n        this.adjustElementPosition(element, xLeft, yUp),\n      );\n    }\n  }\n\n  private adjustElementPosition(\n    element: BusinessObject,\n    xLeft: number,\n    yUp: number,\n  ): void {\n    if (\n      element.type === ElementTypes.ACTIVITY ||\n      element.type === ElementTypes.CONNECTION\n    ) {\n      const waypoints = (element as ActivityBusinessObject).waypoints;\n      waypoints.forEach((point: Waypoint) => {\n        point.x -= xLeft;\n        point.y -= yUp;\n\n        if (point.original) {\n          point.original.x = point.x;\n          point.original.y = point.y;\n        }\n      });\n    } else {\n      element.x -= xLeft;\n      element.y -= yUp;\n    }\n  }\n\n  private findFirstElement(\n    elements: BusinessObject[],\n    isFirst: boolean,\n    xLeft: number,\n    yUp: number,\n  ) {\n    elements.forEach((element) => {\n      let elXLeft;\n      let elYUp;\n      if (\n        element.type !== ElementTypes.ACTIVITY &&\n        element.type !== ElementTypes.CONNECTION\n      ) {\n        if (isFirst) {\n          xLeft = element.x;\n          yUp = element.y;\n          isFirst = false;\n        }\n        elXLeft = element.x;\n        elYUp = element.y;\n        if (elXLeft < xLeft) {\n          xLeft = elXLeft;\n        }\n        if (elYUp < yUp) {\n          yUp = elYUp;\n        }\n      }\n    });\n  }\n}\n","import { Component } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\n\n@Component({\n  selector: 'app-label-dictionary-dialog',\n  templateUrl: './label-dictionary-dialog.component.html',\n  styleUrls: ['./label-dictionary-dialog.component.scss'],\n})\nexport class LabelDictionaryDialogComponent {\n  constructor(\n    private dialogRef: MatDialogRef<LabelDictionaryDialogComponent>,\n  ) {}\n\n  close(): void {\n    this.dialogRef.close();\n  }\n}\n","<mat-dialog-content>\n  <h2 class=\"sticky-top\">Label Dictionary</h2>\n  <app-label-dictionary (closeEmitter)=\"close()\"></app-label-dictionary>\n</mat-dialog-content>\n","import { AfterViewInit, Component, EventEmitter, Output } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { WorkObjectLabelEntry } from '../../domain/workObjectLabelEntry';\nimport { LabelEntry } from '../../domain/labelEntry';\nimport { LabelDictionaryService } from '../../services/label-dictionary.service';\nimport { initializeLabelEditingProvider } from '../../../modeler/bpmn/modeler/labeling/dsLabelEditingProvider';\n\n@Component({\n  selector: 'app-label-dictionary',\n  templateUrl: './label-dictionary.component.html',\n  styleUrls: ['./label-dictionary.component.scss'],\n})\nexport class LabelDictionaryComponent implements AfterViewInit {\n  workobjectEntriesSubject: BehaviorSubject<WorkObjectLabelEntry[]>;\n  activityEntriesSubject: BehaviorSubject<LabelEntry[]>;\n\n  workObjectEntries: WorkObjectLabelEntry[];\n  activityEntries: LabelEntry[];\n\n  @Output()\n  closeEmitter: EventEmitter<void> = new EventEmitter<void>();\n\n  constructor(private labelDictionaryService: LabelDictionaryService) {\n    this.labelDictionaryService.createLabelDictionaries();\n    this.workObjectEntries = this.labelDictionaryService.getWorkObjectLabels();\n    this.activityEntries = this.labelDictionaryService.getActivityLabels();\n\n    this.workobjectEntriesSubject = new BehaviorSubject(this.workObjectEntries);\n    this.activityEntriesSubject = new BehaviorSubject(this.activityEntries);\n  }\n\n  ngAfterViewInit(): void {\n    this.labelDictionaryService.createLabelDictionaries();\n    this.workobjectEntriesSubject.next(\n      this.labelDictionaryService.getWorkObjectLabels(),\n    );\n    this.activityEntriesSubject.next(\n      this.labelDictionaryService.getActivityLabels(),\n    );\n  }\n\n  save(): void {\n    this.workObjectEntries = this.workobjectEntriesSubject.value;\n    this.activityEntries = this.activityEntriesSubject.value;\n\n    const activityNames: string[] = [];\n    const originalActivityNames: string[] = [];\n\n    const workObjectNames: string[] = [];\n    const originalWorkObjectNames: string[] = [];\n\n    this.activityEntries\n      .filter((a) => a.name !== a.originalName)\n      .forEach((activity) => {\n        activityNames.push(activity.name);\n        originalActivityNames.push(activity.originalName);\n      });\n\n    this.workObjectEntries\n      .filter((w) => w.name !== w.originalName)\n      .forEach((workobject) => {\n        workObjectNames.push(workobject.name);\n        originalWorkObjectNames.push(workobject.originalName);\n      });\n\n    this.labelDictionaryService.massRenameLabels(\n      activityNames,\n      originalActivityNames,\n      workObjectNames,\n      originalWorkObjectNames,\n    );\n    this.closeEmitter.emit();\n  }\n\n  cancel(): void {\n    this.workObjectEntries.forEach((w) => {\n      w.name = w.originalName;\n    });\n    this.activityEntries.forEach((a) => {\n      a.name = a.originalName;\n    });\n\n    this.workobjectEntriesSubject.next(this.workObjectEntries);\n    this.activityEntriesSubject.next(this.activityEntries);\n  }\n\n  updateActivityEntry($event: Event, activityEntry: LabelEntry) {\n    let entries = this.activityEntriesSubject.value;\n    entries.filter(\n      (e) => e.originalName === activityEntry.originalName,\n      // @ts-ignore\n    )[0].name = $event.target.value;\n    this.activityEntriesSubject.next(entries);\n  }\n\n  updateWorkobjectEntry($event: Event, workobjectEntry: LabelEntry) {\n    let entries = this.workobjectEntriesSubject.value;\n    entries.filter(\n      (e) => e.originalName === workobjectEntry.originalName,\n      // @ts-ignore\n    )[0].name = $event.target.value;\n    this.workobjectEntriesSubject.next(entries);\n  }\n\n  preventDefault(event: Event): void {\n    event.preventDefault();\n  }\n\n  close(): void {\n    this.closeEmitter.emit();\n  }\n}\n","<div class=\"list-content\">\n  <div class=\"workobjectList\">\n    <h3 class=\"listTitle\">Work Objects</h3>\n    <mat-list>\n      @for (\n        workobjectEntry of workobjectEntriesSubject | async;\n        track workobjectEntry\n      ) {\n        <mat-list-item>\n          <mat-form-field class=\"inputText\">\n            <input\n              matInput\n              class=\"inputText\"\n              [value]=\"workobjectEntry.name\"\n              (change)=\"updateWorkobjectEntry($event, workobjectEntry)\"\n            />\n          </mat-form-field>\n        </mat-list-item>\n      }\n    </mat-list>\n  </div>\n  <div class=\"activityList\">\n    <h3 class=\"listTitle\">Activities</h3>\n    <mat-list>\n      @for (\n        activityEntry of activityEntriesSubject | async;\n        track activityEntry\n      ) {\n        <mat-list-item>\n          <mat-form-field class=\"inputText\">\n            <textarea\n              matInput\n              class=\"inputText activity\"\n              [value]=\"activityEntry.name\"\n              (change)=\"updateActivityEntry($event, activityEntry)\"\n              cdkTextareaAutosize\n              cdkAutosizeMinRows=\"1\"\n              cdkAutosizeMaxRows=\"3\"\n              (keydown.enter)=\"preventDefault($event)\"\n              (keyup.enter)=\"save()\"\n              (keyup.escape)=\"close()\"\n            ></textarea>\n          </mat-form-field>\n        </mat-list-item>\n      }\n    </mat-list>\n  </div>\n</div>\n<mat-dialog-actions class=\"sticky-bottom\">\n  <button mat-flat-button (click)=\"close()\">Cancel</button>\n  <button mat-flat-button color=\"primary\" (click)=\"save()\">Save</button>\n</mat-dialog-actions>\n","import { Injectable } from '@angular/core';\nimport { ElementRegistryService } from 'src/app/domain/services/element-registry.service';\nimport { ElementTypes } from 'src/app/domain/entities/elementTypes';\nimport { MassNamingService } from 'src/app/tools/label-dictionary/services/mass-naming.service';\nimport { IconDictionaryService } from '../../icon-set-config/services/icon-dictionary.service';\nimport { WorkObjectLabelEntry } from '../domain/workObjectLabelEntry';\nimport { LabelEntry } from '../domain/labelEntry';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { LabelDictionaryDialogComponent } from '../presentation/label-dictionary-dialog/label-dictionary-dialog.component';\nimport {\n  SNACKBAR_DURATION,\n  SNACKBAR_INFO,\n} from '../../../domain/entities/constants';\nimport { DialogService } from '../../../domain/services/dialog.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { CanvasObject } from '../../../domain/entities/canvasObject';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LabelDictionaryService {\n  activityLabels: LabelEntry[] = [];\n  workObjektLabels: WorkObjectLabelEntry[] = [];\n\n  constructor(\n    private massNamingService: MassNamingService,\n    private elementRegistryService: ElementRegistryService,\n    private iconDictionaryService: IconDictionaryService,\n    private dialogService: DialogService,\n    private snackbar: MatSnackBar,\n  ) {}\n\n  openLabelDictionary() {\n    const isActivityWithLabel = (element: CanvasObject) =>\n      element.type.includes(ElementTypes.ACTIVITY) &&\n      element.businessObject.name;\n    const isWorkObjectWithLabel = (element: CanvasObject) =>\n      element.type.includes(ElementTypes.WORKOBJECT) &&\n      element.businessObject.name;\n\n    const hasAtLeastOneLabel = this.elementRegistryService\n      .getAllCanvasObjects()\n      .some(\n        (element) =>\n          isActivityWithLabel(element) || isWorkObjectWithLabel(element),\n      );\n    if (hasAtLeastOneLabel) {\n      const config = new MatDialogConfig();\n      config.disableClose = false;\n      config.autoFocus = true;\n\n      this.dialogService.openDialog(LabelDictionaryDialogComponent, config);\n    } else {\n      this.snackbar.open(\n        'There are currently no activities or work objects with labels on the canvas',\n        undefined,\n        {\n          duration: SNACKBAR_DURATION * 3,\n          panelClass: SNACKBAR_INFO,\n        },\n      );\n    }\n  }\n\n  createLabelDictionaries(): void {\n    this.activityLabels = [];\n    this.workObjektLabels = [];\n\n    const allObjects = this.elementRegistryService.getAllCanvasObjects();\n\n    allObjects.forEach((element) => {\n      const name = element.businessObject.name;\n      if (\n        name &&\n        name.length > 0 &&\n        element.type.includes(ElementTypes.ACTIVITY) &&\n        !this.activityLabels.map((a) => a.name).includes(name)\n      ) {\n        this.activityLabels.push({\n          name,\n          originalName: name,\n        });\n      } else if (\n        name &&\n        name.length > 0 &&\n        element.type.includes(ElementTypes.WORKOBJECT) &&\n        !this.workObjektLabels.map((e) => e.name).includes(name)\n      ) {\n        const iconName = element.type.replace(ElementTypes.WORKOBJECT, '');\n        let icon = this.iconDictionaryService.getIconSource(iconName);\n        if (!icon) {\n          return;\n        }\n        if (!icon.startsWith('data')) {\n          icon = 'data:image/svg+xml,' + icon;\n        }\n        this.workObjektLabels.push({\n          name,\n          originalName: name,\n          icon,\n        });\n      }\n    });\n    this.activityLabels.sort((a, b) => {\n      return a.name.toLowerCase().localeCompare(b.name.toLowerCase());\n    });\n    this.workObjektLabels.sort((a, b) => {\n      return a.name.toLowerCase().localeCompare(b.name.toLowerCase());\n    });\n  }\n\n  getActivityLabels(): LabelEntry[] {\n    return this.activityLabels.slice();\n  }\n\n  getWorkObjectLabels(): WorkObjectLabelEntry[] {\n    return this.workObjektLabels.slice();\n  }\n\n  getUniqueWorkObjectNames(): String[] {\n    const workObjects = this.elementRegistryService.getAllWorkobjects();\n    return [\n      ...new Set(\n        workObjects\n          .filter((workObject) => {\n            return !!workObject.businessObject.name;\n          })\n          .map((workObject) => workObject.businessObject.name),\n      ),\n    ];\n  }\n\n  massRenameLabels(\n    activityNames: string[],\n    originalActivityNames: string[],\n    workObjectNames: string[],\n    originalWorkObjectNames: string[],\n  ): void {\n    for (let i = 0; i < originalActivityNames.length; i++) {\n      if (!activityNames[i]) {\n        activityNames[i] = '';\n      }\n      if (!(activityNames[i] == originalActivityNames[i])) {\n        this.massNamingService.massChangeNames(\n          originalActivityNames[i],\n          activityNames[i],\n          ElementTypes.ACTIVITY,\n        );\n      }\n    }\n    for (let i = 0; i < originalWorkObjectNames.length; i++) {\n      if (!workObjectNames[i]) {\n        workObjectNames[i] = '';\n      }\n      if (!(workObjectNames[i] == originalWorkObjectNames[i])) {\n        this.massNamingService.massChangeNames(\n          originalWorkObjectNames[i],\n          workObjectNames[i],\n          ElementTypes.WORKOBJECT,\n        );\n      }\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ElementRegistryService } from 'src/app/domain/services/element-registry.service';\nimport { CanvasObject } from 'src/app/domain/entities/canvasObject';\nimport { ElementTypes } from '../../../domain/entities/elementTypes';\nimport { CommandStackService } from '../../../domain/services/command-stack.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MassNamingService {\n  constructor(\n    private elementRegistryService: ElementRegistryService,\n    private commandStackService: CommandStackService,\n  ) {}\n\n  massChangeNames(\n    oldValue: string,\n    newValue: string,\n    type: ElementTypes,\n  ): void {\n    const allRelevantObjects: CanvasObject[] = [];\n\n    this.elementRegistryService.getAllCanvasObjects().forEach((element) => {\n      if (\n        element.type.includes(type) &&\n        element.businessObject.name === oldValue\n      ) {\n        allRelevantObjects.push(element);\n      }\n    });\n\n    const context = {\n      elements: allRelevantObjects,\n      newValue,\n    };\n\n    this.commandStackService.execute('domainStoryObjects.massRename', context);\n  }\n}\n","import { FormControl, FormGroup, Validators } from '@angular/forms';\n\nexport interface ActivityDialogForm {\n  activityLabel: FormControl<string>;\n  activityNumber: FormControl<number | null>;\n  multipleNumbers: FormControl<boolean>;\n}\n\nexport namespace ActivityDialogForm {\n  export function create(\n    activityLabel: string,\n    activityNumber: number | null,\n    numberIsAllowedMultipleTimes: boolean,\n  ): FormGroup<ActivityDialogForm> {\n    return new FormGroup<ActivityDialogForm>({\n      activityLabel: new FormControl<string>(activityLabel, {\n        nonNullable: true,\n      }),\n      activityNumber: new FormControl<number | null>(activityNumber, [\n        Validators.required,\n      ]),\n      multipleNumbers: new FormControl<boolean>(numberIsAllowedMultipleTimes, {\n        nonNullable: true,\n      }),\n    });\n  }\n}\n","import { ActivityCanvasObject } from '../../../domain/entities/activityCanvasObject';\n\nexport class ActivityDialogData {\n  activity: ActivityCanvasObject;\n  numberIsAllowedMultipleTimes: boolean;\n  showNumberFields: boolean;\n\n  saveFN: any;\n\n  constructor(\n    activity: ActivityCanvasObject,\n    numberIsAllowedMultipleTimes: boolean,\n    showNumberFields: boolean,\n    saveFN: any,\n  ) {\n    this.activity = activity;\n    this.numberIsAllowedMultipleTimes = numberIsAllowedMultipleTimes;\n    this.showNumberFields = showNumberFields;\n    this.saveFN = saveFN;\n  }\n}\n","import { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { FormGroup } from '@angular/forms';\nimport { ActivityDialogData } from 'src/app/tools/modeler/domain/activityDialogData';\nimport { ActivityCanvasObject } from '../../../../domain/entities/activityCanvasObject';\nimport { ActivityDialogForm } from '../../domain/activity-dialog-form';\n\n@Component({\n  selector: 'app-activity-dialog',\n  templateUrl: './activity-dialog.component.html',\n  styleUrls: ['./activity-dialog.component.scss'],\n})\nexport class ActivityDialogComponent {\n  form: FormGroup<ActivityDialogForm>;\n  activityLabel: string;\n  activityNumber: number | null;\n  numberIsAllowedMultipleTimes: boolean;\n  showNumberFields: boolean;\n  activity: ActivityCanvasObject;\n\n  saveFN: any;\n\n  constructor(\n    private dialogRef: MatDialogRef<ActivityDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) data: ActivityDialogData,\n  ) {\n    this.activity = data.activity;\n    this.activityLabel = data.activity.businessObject.name;\n    this.numberIsAllowedMultipleTimes = data.numberIsAllowedMultipleTimes;\n    this.activityNumber = data.activity.businessObject.number ?? null;\n    this.showNumberFields = data.showNumberFields;\n\n    this.saveFN = data.saveFN;\n\n    this.form = ActivityDialogForm.create(\n      this.activityLabel,\n      this.activityNumber,\n      this.numberIsAllowedMultipleTimes,\n    );\n\n    this.form.controls.activityNumber.valueChanges.subscribe(\n      (activityNumber) => {\n        if (activityNumber !== null) {\n          if (activityNumber < 1) {\n            this.form.controls.activityNumber.setValue(1);\n          }\n        }\n      },\n    );\n  }\n\n  onSubmit(): void {\n    this.numberIsAllowedMultipleTimes = !this.numberIsAllowedMultipleTimes;\n    this.form.patchValue({\n      multipleNumbers: this.numberIsAllowedMultipleTimes,\n    });\n  }\n\n  save(): void {\n    this.saveFN({\n      activity: this.activity,\n      ...this.form.value,\n    });\n    this.dialogRef.close();\n  }\n\n  close(): void {\n    this.dialogRef.close();\n  }\n\n  preventDefault(event: Event) {\n    event.preventDefault();\n  }\n}\n","<mat-dialog-content>\n  <h2>Edit Activity</h2>\n  <form [formGroup]=\"form\">\n    <div [hidden]=\"!showNumberFields\">\n      <mat-form-field class=\"shortWidth\">\n        <mat-label>Number</mat-label>\n        <input matInput type=\"number\" formControlName=\"activityNumber\" />\n      </mat-form-field>\n      <input\n        type=\"checkbox\"\n        formControlName=\"multipleNumbers\"\n        (change)=\"onSubmit()\"\n      />\n      multiple\n    </div>\n    <mat-form-field class=\"fullWidth\">\n      <mat-label>Label</mat-label>\n      <textarea\n        matInput\n        type=\"text\"\n        formControlName=\"activityLabel\"\n        autofocus\n        cdkFocusInitial\n        (keydown.enter)=\"preventDefault($event)\"\n        (keyup.enter)=\"save()\"\n        (keyup.escape)=\"close()\"\n      ></textarea>\n    </mat-form-field>\n  </form>\n</mat-dialog-content>\n\n<mat-dialog-actions>\n  <button mat-flat-button (click)=\"close()\">Cancel</button>\n  <button mat-flat-button color=\"primary\" (click)=\"save()\">Save</button>\n</mat-dialog-actions>\n","import { Component, OnInit } from '@angular/core';\nimport { ModelerService } from '../../services/modeler.service';\n\n@Component({\n  selector: 'app-modeler',\n  templateUrl: './modeler.component.html',\n  styleUrls: ['./modeler.component.scss'],\n})\nexport class ModelerComponent implements OnInit {\n  constructor(private modelerService: ModelerService) {}\n\n  ngOnInit(): void {\n    this.modelerService.postInit();\n  }\n}\n","<div id=\"canvas\"></div>\n","import { Injectable } from '@angular/core';\nimport { ElementRegistryService } from '../../../domain/services/element-registry.service';\nimport { ElementTypes } from '../../../domain/entities/elementTypes';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { ActivityDialogData } from '../domain/activityDialogData';\nimport { ActivityDialogComponent } from '../presentation/activity-dialog/activity-dialog.component';\nimport { DialogService } from '../../../domain/services/dialog.service';\nimport { TitleService } from '../../title/services/title.service';\nimport { ActivityCanvasObject } from '../../../domain/entities/activityCanvasObject';\nimport { positionsMatch } from '../../../utils/mathExtensions';\nimport { CommandStackService } from '../../../domain/services/command-stack.service';\n\nimport { toggleStashUse } from '../bpmn/modeler/labeling/dsLabelEditingProvider';\nimport {\n  getMultipleNumberRegistry,\n  getNumberRegistry,\n  setNumberIsMultiple,\n  updateExistingNumbersAtEditing,\n} from '../bpmn/modeler/numbering/numbering';\nimport activityUpdateHandler from '../bpmn/modeler/updateHandler/activityUpdateHandlers';\n\nimport massRenameHandler from '../bpmn/modeler/updateHandler/massRenameHandler';\nimport elementUpdateHandler from '../bpmn/modeler/updateHandler/elementUpdateHandler';\nimport headlineAndDescriptionUpdateHandler from '../bpmn/modeler/updateHandler/headlineAndDescriptionUpdateHandler';\nimport { ReplayService } from '../../replay/services/replay.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class InitializerService {\n  constructor(\n    private elementRegistryService: ElementRegistryService,\n    private replayService: ReplayService,\n    private dialogService: DialogService,\n    private commandStackService: CommandStackService,\n    private titleService: TitleService,\n  ) {}\n\n  propagateDomainStoryModelerClassesToServices(\n    commandStack: any,\n    elementRegistry: any,\n    canvas: any,\n    selection: any,\n    modeler: any,\n  ): void {\n    this.commandStackService.setCommandStack(commandStack);\n    this.elementRegistryService.setElementRegistry(elementRegistry);\n  }\n\n  initializeDomainStoryModelerEventHandlers(\n    commandStack: any,\n    eventBus: any,\n  ): void {\n    activityUpdateHandler(commandStack, eventBus);\n    massRenameHandler(commandStack, eventBus);\n    elementUpdateHandler(commandStack, eventBus);\n    headlineAndDescriptionUpdateHandler(commandStack, this.titleService);\n  }\n\n  color: string | undefined;\n\n  initiateEventBusListeners(eventBus: any, commandStack: any): void {\n    eventBus.on('element.dblclick', (e: any) => {\n      if (!this.replayService.getReplayOn()) {\n        const element = e.element;\n        if (element.type === ElementTypes.ACTIVITY) {\n          // override the doubleClickListener on activities\n          this.activityDoubleClick(element, eventBus, commandStack);\n        } else {\n          const renderedNumberRegistry = getNumberRegistry();\n\n          // add a DoubleClickListener to the number on activities\n          if (renderedNumberRegistry.length > 1) {\n            const allActivities =\n              this.elementRegistryService.getActivitiesFromActors();\n\n            if (allActivities.length > 0) {\n              const htmlCanvas = document.getElementById('canvas');\n              if (htmlCanvas) {\n                const container =\n                  htmlCanvas.getElementsByClassName('djs-container');\n                const svgElements = container[0].getElementsByTagName('svg');\n                const outerSVGElement = svgElements[0];\n                const viewport =\n                  outerSVGElement.getElementsByClassName('viewport')[0];\n                let transform = viewport.getAttribute('transform');\n\n                let transformX = 0;\n                let transformY = 0;\n                let zoomX = 1;\n                let zoomY = 1;\n                let nums;\n\n                const clickX = e.originalEvent.offsetX;\n                const clickY = e.originalEvent.offsetY;\n\n                // adjust for zoom and panning\n                if (transform) {\n                  transform = transform.replace('matrix(', '');\n                  transform.replace(')', '');\n                  nums = transform.split(',');\n                  zoomX = parseFloat(nums[0]);\n                  zoomY = parseFloat(nums[3]);\n                  transformX = parseInt(nums[4], undefined);\n                  transformY = parseInt(nums[5], undefined);\n                }\n\n                const width = 25 * zoomX;\n                const height = 22 * zoomY;\n\n                for (let i = 1; i < renderedNumberRegistry.length; i++) {\n                  const currentNum = renderedNumberRegistry[i];\n                  if (currentNum) {\n                    const tspan = currentNum.getElementsByTagName('tspan')[0];\n                    const tx = tspan.getAttribute('x');\n                    const ty = tspan.getAttribute('y');\n                    const tNumber = parseInt(tspan.innerHTML, undefined);\n\n                    const elementX = Math.floor(\n                      tx * zoomX + (transformX - 11 * zoomX),\n                    );\n                    const elementY = Math.floor(\n                      ty * zoomY + (transformY - 15 * zoomY),\n                    );\n\n                    allActivities.forEach((activity: ActivityCanvasObject) => {\n                      const activityNumber = activity.businessObject.number;\n                      if (activityNumber === tNumber) {\n                        if (\n                          positionsMatch(\n                            width,\n                            height,\n                            elementX,\n                            elementY,\n                            clickX,\n                            clickY,\n                          )\n                        ) {\n                          this.activityDoubleClick(\n                            activity,\n                            eventBus,\n                            commandStack,\n                          );\n                        }\n                      }\n                    });\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    });\n\n    // when in replay, do not allow any interaction on the canvas\n    eventBus.on(\n      [\n        'element.click',\n        'element.dblclick',\n        'element.mousedown',\n        'drag.init',\n        'canvas.viewbox.changing',\n        'autoPlace',\n        'popupMenu.open',\n      ],\n      10000000000,\n      (event: any) => {\n        if (this.replayService.getReplayOn()) {\n          event.stopPropagation();\n          event.preventDefault();\n        }\n      },\n    );\n\n    let pasteColor: string | undefined;\n    eventBus.on('copyPaste.pasteElement', 10000, (e: any) => {\n      pasteColor = e.descriptor.oldBusinessObject.pickedColor;\n    });\n\n    eventBus.on('create.end', (e: any) => {\n      if (!pasteColor) {\n        return;\n      }\n      const element = e.elements[0];\n      element.businessObject.pickedColor = pasteColor;\n      pasteColor = undefined;\n      eventBus.fire('element.changed', { element });\n    });\n  }\n\n  /** Overrrides for Canvas Functions **/\n  private activityDoubleClick(\n    activity: ActivityCanvasObject,\n    eventBus: any,\n    commandStack: any,\n  ): void {\n    const source = activity.source;\n\n    // ensure the right number when changing the direction of an activity\n    toggleStashUse(false);\n\n    const config = new MatDialogConfig();\n    config.disableClose = false;\n    config.autoFocus = true;\n\n    if (\n      activity.businessObject.number &&\n      source &&\n      source.type.includes(ElementTypes.ACTOR)\n    ) {\n      config.data = new ActivityDialogData(\n        activity,\n        getMultipleNumberRegistry()[activity.businessObject.number],\n        true,\n        (data: any) =>\n          this.saveActivityInputLabel(data, eventBus, commandStack),\n      );\n    } else if (source && source.type.includes(ElementTypes.WORKOBJECT)) {\n      config.data = new ActivityDialogData(\n        activity,\n        false,\n        false,\n        (activityData: any) =>\n          this.saveActivityInputLabel(activityData, eventBus, commandStack),\n      );\n    }\n    this.dialogService.openDialog(ActivityDialogComponent, config);\n  }\n\n  private saveActivityInputLabel(\n    activityData: any,\n    eventBus: any,\n    commandStack: any,\n  ): void {\n    const label = activityData.activityLabel;\n    const hasNumber = activityData.activityNumber ?? false;\n    const activityNumber = activityData.activityNumber;\n    const multipleNumberAllowed = activityData.multipleNumbers ?? false;\n    const element = activityData.activity;\n\n    const activitiesFromActors =\n      this.elementRegistryService.getActivitiesFromActors();\n    const index = activitiesFromActors.indexOf(element);\n\n    activitiesFromActors.splice(index, 1);\n    if (hasNumber) {\n      setNumberIsMultiple(activityNumber, multipleNumberAllowed);\n    }\n    element.businessObject.multipleNumberAllowed = multipleNumberAllowed;\n\n    let options: any;\n    if (hasNumber) {\n      options = {\n        businessObject: element.businessObject,\n        newLabel: label,\n        newNumber: activityNumber,\n        element,\n      };\n    } else {\n      options = {\n        businessObject: element.businessObject,\n        newLabel: label,\n        element,\n      };\n    }\n\n    commandStack.execute('activity.changed', options);\n    if (element.businessObject.multipleNumberAllowed !== false) {\n      if (getMultipleNumberRegistry()[activityNumber] === false) {\n        updateExistingNumbersAtEditing(\n          activitiesFromActors,\n          activityNumber,\n          eventBus,\n        );\n      }\n    } else if (element.businessObject.multipleNumberAllowed === false) {\n      updateExistingNumbersAtEditing(\n        activitiesFromActors,\n        activityNumber,\n        eventBus,\n      );\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { assign } from 'min-dash';\nimport DomainStoryModeler from 'src/app/tools/modeler/bpmn';\nimport { InitializerService } from './initializer.service';\nimport { ElementRegistryService } from '../../../domain/services/element-registry.service';\nimport { IconDictionaryService } from '../../icon-set-config/services/icon-dictionary.service';\nimport { IconSetConfigurationService } from '../../icon-set-config/services/icon-set-configuration.service';\nimport { BusinessObject } from '../../../domain/entities/businessObject';\nimport { ActivityBusinessObject } from '../../../domain/entities/activityBusinessObject';\nimport { updateMultipleNumberRegistry } from '../bpmn/modeler/numbering/numbering';\nimport { IconSetConfiguration } from '../../../domain/entities/icon-set-configuration';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ModelerService {\n  constructor(\n    private initializerService: InitializerService,\n    private elementRegistryService: ElementRegistryService,\n    private iconDictionaryService: IconDictionaryService,\n    private iconSetConfigurationService: IconSetConfigurationService,\n  ) {}\n\n  private modeler: any;\n  private canvas: any;\n  private elementRegistry: any;\n  private commandStack: any;\n  private selection: any;\n  private eventBus: any;\n\n  private encoded: string | undefined;\n\n  postInit(): void {\n    const storedIconSetConfiguration =\n      this.iconSetConfigurationService.getStoredIconSetConfiguration();\n    if (storedIconSetConfiguration) {\n      this.iconDictionaryService.setCustomConfiguration(\n        storedIconSetConfiguration,\n      );\n      this.iconSetConfigurationService.loadConfiguration(\n        storedIconSetConfiguration,\n      );\n    }\n    // this.initializerService.initializeDomainStoryModelerClasses();\n    this.modeler = new DomainStoryModeler({\n      container: '#canvas',\n      keyboard: {\n        bindTo: document,\n      },\n\n      // Disable BPMN-SearchModule and re-enable browser Search\n      additionalModules: [\n        {\n          bpmnSearch: ['value', 'foo'],\n        },\n      ],\n    });\n\n    if (this.modeler.get) {\n      this.canvas = this.modeler.get('canvas');\n      this.elementRegistry = this.modeler.get('elementRegistry');\n      this.eventBus = this.modeler.get('eventBus');\n      this.commandStack = this.modeler.get('commandStack');\n      this.selection = this.modeler.get('selection');\n    }\n\n    this.initializerService.initializeDomainStoryModelerEventHandlers(\n      this.commandStack,\n      this.eventBus,\n    );\n    this.initializerService.propagateDomainStoryModelerClassesToServices(\n      this.commandStack,\n      this.elementRegistry,\n      this.canvas,\n      this.selection,\n      this.modeler,\n    );\n\n    const exportArtifacts = this.debounce(this.saveSVG, 500);\n    if (this.modeler.get) {\n      this.modeler.on('commandStack.changed', exportArtifacts);\n    }\n\n    this.initializerService.initiateEventBusListeners(\n      this.eventBus,\n      this.commandStack,\n    );\n\n    this.modeler.createDiagram();\n    // expose bpmnjs to window for debugging purposes\n    assign(window, { bpmnjs: this.modeler });\n\n    this.startDebounce();\n  }\n\n  restart(\n    iconSetConfiguration?: IconSetConfiguration,\n    domainStory?: BusinessObject[],\n  ): void {\n    const currentStory =\n      domainStory != undefined\n        ? domainStory\n        : this.elementRegistryService\n            .createObjectListForDSTDownload()\n            .map((e) => e.businessObject);\n    if (!iconSetConfiguration) {\n      iconSetConfiguration =\n        this.iconSetConfigurationService.getStoredIconSetConfiguration();\n    }\n    if (iconSetConfiguration) {\n      this.iconSetConfigurationService.setStoredIconSetConfiguration(\n        iconSetConfiguration,\n      );\n      this.iconDictionaryService.setCustomConfiguration(iconSetConfiguration);\n      this.iconSetConfigurationService.loadConfiguration(iconSetConfiguration);\n    }\n\n    this.elementRegistryService.clear();\n    this.modeler?.destroy();\n    this.postInit();\n    updateMultipleNumberRegistry(\n      currentStory\n        .filter((bo) => bo.type === 'domainStory:activity')\n        .map((bo) => <ActivityBusinessObject>bo)\n        .filter((bo) => bo.number !== null),\n    );\n    if (currentStory && this.modeler.get) {\n      this.modeler.importCustomElements(currentStory);\n    }\n  }\n\n  /** Interactions with the Modeler **/\n  getModeler(): any {\n    return this.modeler;\n  }\n\n  commandStackChanged(): void {\n    // to update the title of the svg, we need to tell the command stack, that a value has changed\n    this.eventBus.fire(\n      'commandStack.changed',\n      this.debounce(this.saveSVG, 500),\n    );\n  }\n\n  startDebounce(): void {\n    this.debounce(this.saveSVG, 500);\n  }\n\n  debounce(fn: any, timeout: number): any {\n    return () => {\n      let timer;\n      if (timer) {\n        clearTimeout(timer);\n      }\n      timer = setTimeout(() => {\n        // tslint:disable-next-line:no-unused-expression\n        fn(this.modeler).then((svg: string) => {\n          this.encoded = svg;\n        }) as Promise<any>;\n      }, timeout);\n    };\n  }\n\n  getEncoded(): string {\n    return this.encoded ? this.encoded : '';\n  }\n\n  async saveSVG(modeler: any): Promise<any> {\n    try {\n      const result = await modeler.saveSVG();\n      return result.svg;\n    } catch (err) {\n      alert('There was an error saving the SVG.\\n' + err);\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ModelerService } from 'src/app/tools/modeler/services/modeler.service';\nimport { BusinessObject } from 'src/app/domain/entities/businessObject';\nimport { ElementRegistryService } from 'src/app/domain/services/element-registry.service';\nimport { DirtyFlagService } from 'src/app/domain/services/dirty-flag.service';\nimport { IconSetConfiguration } from '../../../domain/entities/icon-set-configuration';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class RendererService {\n  constructor(\n    private modelerService: ModelerService,\n    private elementRegistryService: ElementRegistryService,\n    private dirtyFlagService: DirtyFlagService,\n  ) {}\n\n  renderStory(domainStory: BusinessObject[]): void {\n    this.modelerService.getModeler().importCustomElements(domainStory);\n  }\n\n  reset(): void {\n    this.renderStory([]);\n    this.dirtyFlagService.makeClean();\n  }\n\n  importStory(\n    domainStory: BusinessObject[],\n    configurationChange: boolean,\n    config?: IconSetConfiguration,\n    makeClean = true,\n  ): void {\n    this.modelerService.restart(config, domainStory);\n    this.renderStory(domainStory);\n\n    this.elementRegistryService.correctInitialize();\n\n    this.modelerService.commandStackChanged();\n    this.modelerService.startDebounce();\n\n    if (makeClean) {\n      this.dirtyFlagService.makeClean();\n    }\n  }\n\n  getStory(): BusinessObject[] {\n    return this.elementRegistryService\n      .createObjectListForDSTDownload()\n      .map((c) => c.businessObject);\n  }\n}\n","export const NUMBER_BACKGROUND_COLOR = 'white';\nexport const NUMBER_COLOR = 'black';\nexport const STROKE_WIDTH = '1.5';\n\nexport const HIGHLIGHT_NUMBER_BACKGROUNG_COLOR = '#43acbf';\nexport const HIGHLIGHT_NUMBER_COLOR = 'black';\nexport const HIGHLIGHT_STROKE_WIDTH = '4';\n","import { Injectable } from '@angular/core';\nimport { BusinessObject } from 'src/app/domain/entities/businessObject';\nimport { ElementRegistryService } from 'src/app/domain/services/element-registry.service';\nimport { ElementTypes } from 'src/app/domain/entities/elementTypes';\nimport { StorySentence } from 'src/app/tools/replay/domain/storySentence';\nimport {\n  HIGHLIGHT_NUMBER_BACKGROUNG_COLOR,\n  HIGHLIGHT_NUMBER_COLOR,\n  HIGHLIGHT_STROKE_WIDTH,\n  NUMBER_BACKGROUND_COLOR,\n  NUMBER_COLOR,\n  STROKE_WIDTH,\n} from '../domain/replayConstants';\n\n@Injectable({\n  providedIn: 'root',\n})\n/**\n * Manipulates the DOM during replay to only show the elements of the current Sentence\n */\nexport class DomManipulationService {\n  constructor(private elementRegistryService: ElementRegistryService) {}\n\n  showAll(): void {\n    this.removeHighlights();\n    this.elementRegistryService\n      .getAllCanvasObjects()\n      .slice()\n      .concat(this.elementRegistryService.getAllGroups().slice())\n      .map((e) => e.businessObject)\n      .forEach((element) => {\n        const domObject = document.querySelector(\n          '[data-element-id=' + element.id + ']',\n        );\n        // @ts-ignore\n        domObject.style.display = 'block';\n      });\n  }\n\n  showSentence(\n    replaySentence: StorySentence,\n    previousSentence?: StorySentence,\n  ): void {\n    this.removeHighlights();\n    const notShown = this.getAllNotShown(replaySentence.objects);\n\n    notShown.forEach((element) => {\n      const domObject = document.querySelector(\n        '[data-element-id=' + element.id + ']',\n      );\n      if (domObject) {\n        // @ts-ignore\n        domObject.style.display = 'none';\n      }\n    });\n\n    this.highlightSentence(\n      previousSentence\n        ? replaySentence.objects.filter(\n            (o) => !previousSentence.objects.includes(o),\n          )\n        : replaySentence.objects,\n    );\n\n    replaySentence.objects.forEach((element) => {\n      const domObject = document.querySelector(\n        '[data-element-id=' + element.id + ']',\n      );\n      if (domObject) {\n        // @ts-ignore\n        domObject.style.display = 'block';\n      }\n    });\n  }\n\n  getNumberDomForActivity(activity: SVGPolylineElement): any {\n    const numberText =\n      activity.parentElement?.getElementsByClassName('djs-labelNumber')[0] ??\n      '';\n    const circle = (numberText as HTMLElement)?.previousSibling ?? '';\n    return {\n      numberBackgroundDom: circle,\n      numberTextDom: numberText,\n    };\n  }\n\n  private removeHighlights(): void {\n    const allActivities = this.elementRegistryService.getAllActivities();\n    const allConnections = this.elementRegistryService.getAllConnections();\n\n    allActivities.forEach((activity) => {\n      const querySelector = document.querySelector(\n        '[data-element-id=' + activity.id + ']',\n      );\n      if (querySelector) {\n        const activityDomObject =\n          querySelector.getElementsByTagName('polyline')[0];\n\n        activityDomObject.style.stroke =\n          activity.businessObject.pickedColor || 'black';\n        activityDomObject.style.strokeWidth = STROKE_WIDTH;\n\n        const { numberBackgroundDom, numberTextDom } =\n          this.getNumberDomForActivity(activityDomObject);\n        if (numberBackgroundDom && numberTextDom) {\n          numberBackgroundDom.style.fill = NUMBER_BACKGROUND_COLOR;\n          numberTextDom.style.fill = NUMBER_COLOR;\n        }\n      }\n    });\n\n    allConnections.forEach((connection) => {\n      // @ts-ignore\n      const connectionDomObject = document\n        .querySelector('[data-element-id=' + connection.id + ']')\n        .getElementsByTagName('polyline')[0];\n\n      connectionDomObject.style.stroke =\n        connection.businessObject.pickedColor || 'black';\n      connectionDomObject.style.strokeWidth = '1.5';\n    });\n  }\n\n  private highlightSentence(sentenceObjects: BusinessObject[]): void {\n    sentenceObjects\n      .filter((e) => e.type === ElementTypes.ACTIVITY)\n      .forEach((activity) => {\n        const querySelector = document.querySelector(\n          '[data-element-id=' + activity.id + ']',\n        );\n        if (querySelector) {\n          const activityDomObject =\n            querySelector.getElementsByTagName('polyline')[0];\n\n          activityDomObject.style.strokeWidth = HIGHLIGHT_STROKE_WIDTH;\n\n          const { numberBackgroundDom, numberTextDom } =\n            this.getNumberDomForActivity(activityDomObject);\n          if (numberTextDom && numberBackgroundDom) {\n            numberBackgroundDom.style.fill = HIGHLIGHT_NUMBER_BACKGROUNG_COLOR;\n            numberTextDom.style.fill = HIGHLIGHT_NUMBER_COLOR;\n          }\n        }\n      });\n  }\n\n  private getAllNotShown(shownElements: BusinessObject[]): BusinessObject[] {\n    const notShownElements: BusinessObject[] = [];\n    const allObjects = this.elementRegistryService\n      .getAllCanvasObjects()\n      .concat(this.elementRegistryService.getAllGroups());\n\n    allObjects.forEach((element) => {\n      if (!shownElements.includes(element.businessObject)) {\n        if (element.type.includes(ElementTypes.CONNECTION)) {\n          // @ts-ignore\n          if (!element.source.type.includes(ElementTypes.GROUP)) {\n            notShownElements.push(element.businessObject);\n          } else {\n            // @ts-ignore\n            shownElements.push(element.target);\n          }\n        } else {\n          notShownElements.push(element.businessObject);\n        }\n      }\n    });\n    return notShownElements;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { DomManipulationService } from 'src/app/tools/replay/services/dom-manipulation.service';\nimport { StorySentence } from 'src/app/tools/replay/domain/storySentence';\nimport { StoryCreatorService } from './story-creator.service';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport {\n  SNACKBAR_DURATION,\n  SNACKBAR_INFO,\n} from '../../../domain/entities/constants';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ReplayService {\n  private story: StorySentence[] = [];\n  private currentSentence = new BehaviorSubject<number>(-1);\n  private maxSentenceNumber = new BehaviorSubject<number>(0);\n  private replayOnSubject = new BehaviorSubject<boolean>(false);\n\n  currentSentence$: Observable<number> = this.currentSentence.asObservable();\n  maxSentenceNumber$: Observable<number> =\n    this.maxSentenceNumber.asObservable();\n  replayOn$ = this.replayOnSubject.asObservable();\n\n  constructor(\n    private domManipulationService: DomManipulationService,\n    private storyCreatorService: StoryCreatorService,\n    private snackbar: MatSnackBar,\n  ) {}\n\n  setReplayState(state: boolean): void {\n    this.replayOnSubject.next(state);\n  }\n\n  getReplayOn(): boolean {\n    return this.replayOnSubject.value;\n  }\n\n  isReplayable(): boolean {\n    return this.storyCreatorService.traceActivitiesAndCreateStory().length > 0;\n  }\n\n  initializeReplay(story: StorySentence[]): void {\n    this.currentSentence.next(1);\n    this.story = story;\n    this.maxSentenceNumber.next(this.story.length);\n  }\n\n  getCurrentSentenceNumber(): number {\n    return this.currentSentence.value;\n  }\n\n  getMaxSentenceNumber(): number {\n    return this.maxSentenceNumber.value;\n  }\n\n  nextSentence(): void {\n    if (this.currentSentence.value < this.story.length) {\n      this.currentSentence.next(this.currentSentence.value + 1);\n      this.showCurrentSentence();\n    }\n  }\n\n  previousSentence(): void {\n    if (this.currentSentence.value > 1) {\n      this.currentSentence.next(this.currentSentence.value - 1);\n      this.showCurrentSentence();\n    }\n  }\n\n  private showCurrentSentence() {\n    this.domManipulationService.showSentence(\n      this.story[this.currentSentence.value - 1],\n      this.currentSentence.value > 1\n        ? this.story[this.currentSentence.value - 2]\n        : undefined,\n    );\n  }\n\n  startReplay(checkSequenceNumbers = false): void {\n    const story = this.storyCreatorService.traceActivitiesAndCreateStory();\n\n    if (checkSequenceNumbers) {\n      const missingSentences =\n        this.storyCreatorService.getMissingSentences(story);\n      if (missingSentences.length > 0) {\n        const sentence = missingSentences.join(', ');\n        this.snackbar.open(\n          missingSentences.length === 1\n            ? `The Domain Story is not complete. Sentence ${sentence} is missing.`\n            : `The Domain Story is not complete. Sentences ${sentence} are missing.`,\n          undefined,\n          {\n            duration: SNACKBAR_DURATION * 2,\n            panelClass: SNACKBAR_INFO,\n          },\n        );\n        return;\n      }\n    }\n\n    this.initializeReplay(story);\n    if (this.story.length > 0) {\n      this.setReplayState(true);\n      this.domManipulationService.showSentence(\n        this.story[this.currentSentence.getValue() - 1],\n      );\n    } else {\n      this.snackbar.open('You need a Domain Story for replay.', undefined, {\n        duration: SNACKBAR_DURATION * 2,\n        panelClass: SNACKBAR_INFO,\n      });\n    }\n  }\n\n  stopReplay(): void {\n    this.currentSentence.next(-1);\n    this.maxSentenceNumber.next(0);\n    this.setReplayState(false);\n    this.domManipulationService.showAll();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ElementTypes } from '../../../domain/entities/elementTypes';\nimport { ActivityCanvasObject } from '../../../domain/entities/activityCanvasObject';\nimport { BusinessObject } from '../../../domain/entities/businessObject';\nimport { CanvasObject } from '../../../domain/entities/canvasObject';\nimport { ElementRegistryService } from '../../../domain/services/element-registry.service';\nimport { StorySentence } from '../domain/storySentence';\nimport { Dictionary } from '../../../domain/entities/dictionary';\nimport { ActivityBusinessObject } from '../../../domain/entities/activityBusinessObject';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class StoryCreatorService {\n  constructor(private elementRegistryService: ElementRegistryService) {}\n\n  traceActivitiesAndCreateStory(): StorySentence[] {\n    const tracedActivityMap = new Dictionary();\n    const story: StorySentence[] = [];\n    const activities = this.elementRegistryService.getActivitiesFromActors();\n    const tracedActivityMapKeys: number[] = [];\n    activities.forEach((activity) => {\n      const activityNumber = Number(activity.businessObject.number); // Sometimes the activityNumber is a string for some reason\n      const tracedItem = tracedActivityMap.get(`${activityNumber}`) ?? [];\n      if (!tracedActivityMapKeys.includes(activityNumber)) {\n        tracedActivityMapKeys.push(activityNumber);\n      }\n      tracedItem.push(activity);\n      tracedActivityMap.set(`${activityNumber}`, tracedItem);\n    });\n\n    let storyIndex = 0;\n    tracedActivityMapKeys.forEach((key) => {\n      this.createSentence(tracedActivityMap, key, story, storyIndex);\n      storyIndex++;\n    });\n\n    this.addGroupsToLastSentence(story);\n    return story;\n  }\n\n  private createSentence(\n    tracedActivityMap: Dictionary,\n    tracedActivityMapKey: number,\n    story: StorySentence[],\n    storyIndex: number,\n  ): void {\n    let tracedActivity = tracedActivityMap.get(`${tracedActivityMapKey}`) ?? [];\n    const sentenceObjects = this.getSentenceObjects(tracedActivity);\n    const highlightedElements = sentenceObjects.map((t) => t.id);\n    if (storyIndex > 0) {\n      story[storyIndex - 1].objects.forEach((object) => {\n        if (!sentenceObjects.includes(object)) {\n          sentenceObjects.push(object);\n        }\n      });\n    }\n    story[storyIndex] = {\n      highlightedObjects: highlightedElements,\n      objects: sentenceObjects,\n    };\n  }\n\n  getMissingSentences(story: StorySentence[]): number[] {\n    // if the story is empty, no sequence number is missing\n    if (!story || story.length === 0) {\n      return [];\n    }\n\n    // collect all sequence numbers of the story\n    const allActivityNumbersFromActors: number[] = story.map((sentence) => {\n      // find all activity numbers of the ActivityBusinessObject\n      // and returned the highest one\n      const allActivityNumbers = sentence.objects.map((businessObject) => {\n        if (businessObject.type.includes('activity')) {\n          const activity = businessObject as ActivityBusinessObject;\n          return activity.number ?? 0;\n        } else {\n          return 0;\n        }\n      });\n      return Math.max(...allActivityNumbers);\n    });\n\n    const highestSequenceNumber: number = Math.max(\n      ...allActivityNumbersFromActors,\n    );\n\n    const missingSentences: number[] = [];\n    // with a high sequence number like 1_000_000, this could be led\n    // to long calculation or completely stop from Egon.io\n    for (let i = 1; i <= highestSequenceNumber; i++) {\n      if (!allActivityNumbersFromActors.includes(i)) {\n        missingSentences.push(i);\n      }\n    }\n    return missingSentences;\n  }\n\n  private getSentenceObjects(\n    tracedActivity: ActivityCanvasObject[],\n  ): BusinessObject[] {\n    const initialSource: CanvasObject[] = [];\n    const activities = tracedActivity;\n    const targetObjects: CanvasObject[] = [];\n\n    tracedActivity.forEach((parallelSentence: ActivityCanvasObject) => {\n      initialSource.push(parallelSentence.source);\n\n      const firstTarget = parallelSentence.target;\n      targetObjects.push(firstTarget);\n\n      // check the outgoing activities for each target\n      for (const checkTarget of targetObjects) {\n        if (\n          checkTarget.businessObject &&\n          !checkTarget.businessObject.type.includes('actor') &&\n          checkTarget.outgoing\n        ) {\n          // check the target for each outgoing activity\n          checkTarget.outgoing.forEach((activity: ActivityCanvasObject) => {\n            activities.push(activity);\n            const activityTarget = activity.target;\n            if (activityTarget && !targetObjects.includes(activityTarget)) {\n              targetObjects.push(activityTarget);\n            }\n          });\n        }\n      }\n    });\n    return initialSource\n      .map((e) => e.businessObject)\n      .concat(activities.map((a) => a.businessObject))\n      .concat(targetObjects.map((t) => t.businessObject));\n  }\n\n  private addGroupsToLastSentence(story: StorySentence[]): void {\n    const groups = this.elementRegistryService.getAllGroups() as CanvasObject[];\n    if (groups.length > 0 && story.length > 0) {\n      story[story.length - 1].objects = story[story.length - 1].objects.concat(\n        groups.map((g) => g.businessObject),\n      );\n    }\n  }\n}\n","import { FormControl, FormGroup } from '@angular/forms';\n\nexport interface TitleDialogForm {\n  title: FormControl<string | null>;\n  description: FormControl<string | null>;\n}\n\nexport namespace TitleDialogForm {\n  export function create(\n    titel: string,\n    description: string,\n  ): FormGroup<TitleDialogForm> {\n    return new FormGroup<TitleDialogForm>({\n      title: new FormControl<string | null>(titel),\n      description: new FormControl<string | null>(description),\n    });\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { FormGroup } from '@angular/forms';\nimport { TitleService } from 'src/app/tools/title/services/title.service';\nimport { TitleDialogForm } from '../../domain/title-dialog-form';\nimport { DirtyFlagService } from '../../../../domain/services/dirty-flag.service';\n\n@Component({\n  selector: 'app-header-dialog',\n  templateUrl: './title-dialog.component.html',\n  styleUrls: ['./title-dialog.component.scss'],\n})\nexport class TitleDialogComponent implements OnInit {\n  form!: FormGroup<TitleDialogForm>;\n\n  constructor(\n    private dialogRef: MatDialogRef<TitleDialogComponent>,\n    private titleService: TitleService,\n    private dirtyFlagService: DirtyFlagService,\n  ) {}\n\n  ngOnInit(): void {\n    const title = this.titleService.getTitle();\n    const description = this.titleService.getDescription();\n\n    this.form = TitleDialogForm.create(title, description);\n  }\n\n  save(): void {\n    if (this.form.dirty) {\n      this.dirtyFlagService.makeDirty();\n\n      this.titleService.updateTitleAndDescription(\n        this.form.getRawValue().title,\n        this.form.getRawValue().description,\n        true,\n      );\n    }\n    this.dialogRef.close();\n  }\n\n  close(): void {\n    this.dialogRef.close();\n  }\n\n  preventDefault(event: Event) {\n    event.preventDefault();\n  }\n}\n","<mat-dialog-content>\n  <form [formGroup]=\"form\">\n    <mat-form-field class=\"dialogWidth\">\n      <mat-label>Title</mat-label>\n      <input matInput type=\"text\" formControlName=\"title\" />\n    </mat-form-field>\n    <br />\n    <mat-form-field class=\"dialogWidth\">\n      <mat-label>Description</mat-label>\n      <textarea\n        maxlength=\"2000\"\n        matInput\n        class=\"descriptionInput\"\n        formControlName=\"description\"\n        (keydown.enter)=\"preventDefault($event)\"\n        (keyup.enter)=\"save()\"\n        (keyup.escape)=\"close()\"\n      ></textarea>\n    </mat-form-field>\n  </form>\n</mat-dialog-content>\n\n<mat-dialog-actions>\n  <button mat-flat-button (click)=\"close()\">Cancel</button>\n  <button mat-flat-button color=\"primary\" (click)=\"save()\">Save</button>\n</mat-dialog-actions>\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { environment } from '../../../../environments/environment';\nimport {\n  INITIAL_DESCRIPTION,\n  INITIAL_ICON_SET_NAME,\n  INITIAL_TITLE,\n} from '../../../domain/entities/constants';\nimport { CommandStackService } from '../../../domain/services/command-stack.service';\nimport { DialogService } from '../../../domain/services/dialog.service';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { TitleDialogComponent } from '../presentation/title-dialog/title-dialog.component';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TitleService {\n  private titleSubject = new BehaviorSubject<string>(INITIAL_TITLE);\n  private descriptionSubject = new BehaviorSubject<string>(INITIAL_DESCRIPTION);\n  private iconSetNameSubject = new BehaviorSubject<string>(\n    INITIAL_ICON_SET_NAME,\n  );\n  private showDescriptionSubject = new BehaviorSubject<boolean>(true);\n\n  title$ = this.titleSubject.asObservable();\n  description$ = this.descriptionSubject.asObservable();\n  showDescription$ = this.showDescriptionSubject.asObservable();\n  iconSetName$ = this.iconSetNameSubject.asObservable();\n\n  constructor(\n    private commandStackService: CommandStackService,\n    private dialogService: DialogService,\n  ) {}\n\n  openHeaderDialog(): void {\n    const config = new MatDialogConfig();\n    config.disableClose = false;\n    config.autoFocus = true;\n    this.dialogService.openDialog(TitleDialogComponent, config);\n  }\n\n  updateTitleAndDescription(\n    title: string | null,\n    description: string | null,\n    allowUndo: boolean,\n  ): void {\n    if (allowUndo) {\n      this.fireTitleAndDescriptionUpdate(title, description);\n    } else {\n      this.updateTitle(title);\n      this.updateDescription(description);\n    }\n  }\n\n  reset(): void {\n    this.updateTitleAndDescription(INITIAL_TITLE, INITIAL_DESCRIPTION, false);\n  }\n\n  private updateTitle(inputTitle: string | null): void {\n    const title =\n      !inputTitle || inputTitle.trim().length === 0\n        ? INITIAL_TITLE\n        : inputTitle;\n\n    this.titleSubject.next(title);\n    document.title = title === INITIAL_TITLE ? 'egon.io' : title;\n  }\n\n  private updateDescription(description: string | null): void {\n    this.descriptionSubject.next(description ?? this.descriptionSubject.value);\n  }\n\n  setShowDescription(show: boolean): void {\n    this.showDescriptionSubject.next(show);\n  }\n\n  setIconSetName(name: string): void {\n    this.iconSetNameSubject.next(name);\n  }\n\n  getTitle(): string {\n    return this.titleSubject.value;\n  }\n\n  getDescription(): string {\n    return this.descriptionSubject.value;\n  }\n\n  getIconSetName(): string {\n    return this.iconSetNameSubject.value;\n  }\n\n  getVersion(): string {\n    return environment.version;\n  }\n\n  hasTitleOrDescription(): boolean {\n    return (\n      (this.getTitle().trim().length > 0 &&\n        this.getTitle() !== INITIAL_TITLE) ||\n      (this.getDescription().trim().length > 0 &&\n        this.getDescription() !== INITIAL_DESCRIPTION)\n    );\n  }\n\n  private fireTitleAndDescriptionUpdate(\n    newTitle: string | null,\n    newDescription: string | null,\n  ): void {\n    const context = {\n      newTitle,\n      newDescription,\n    };\n    this.commandStackService.execute(\n      'story.updateHeadlineAndDescription',\n      context,\n    );\n  }\n}\n","export function rgbaToHex(rgba: string) {\n  const [r, g, b, a] = rgba.match(/\\d+(\\.\\d+)?/g)!.map((it) => +it);\n  const red = r.toString(16).padStart(2, '0');\n  const green = g.toString(16).padStart(2, '0');\n  const blue = b.toString(16).padStart(2, '0');\n  const alpha = Math.round(a * 255)\n    .toString(16)\n    .padStart(2, '0');\n  return `#${red}${green}${blue}${alpha}`;\n}\n\nconst isValidHex = (hex: string) => /^#([A-Fa-f0-9]{3,4}){1,2}$/.test(hex);\nconst getChunksFromString = (st: string, chunkSize: number) =>\n  st.match(new RegExp(`.{${chunkSize}}`, 'g')) ?? [];\nconst convertHexUnitTo256 = (hexStr: string) =>\n  parseInt(hexStr.repeat(2 / hexStr.length), 16);\nconst getAlphafloat = (a: number | undefined) => {\n  if (typeof a !== 'undefined') {\n    return Math.round((a / 255 + Number.EPSILON) * 100) / 100; // Runden auf 2 oder weniger Nachkommastellen\n  }\n  return 1;\n};\n\nexport const isHexWithAlpha = (hex: string | null | undefined) =>\n  hex?.startsWith('#') && (hex?.length === 5 || hex?.length === 9);\n\nexport const hexToRGBA = (hex: string) => {\n  if (!isValidHex(hex)) {\n    throw new Error('Invalid HEX');\n  }\n  const chunkSize = Math.floor((hex.length - 1) / 3); // 1 falls hex 3-4 Stellen, 2 falls hex 6 oder 8 Stellen\n  const hexArr = getChunksFromString(hex.slice(1), chunkSize);\n  const [r, g, b, a] = hexArr.map(convertHexUnitTo256);\n  return `rgba(${r},${g},${b},${getAlphafloat(a)})`;\n};\n","'use strict';\n\n// convert rad to deg\nexport function degrees(radians: number): number {\n  return (radians * 180) / Math.PI;\n}\n\n// calculate the angle between two points in 2D\nexport function angleBetween(\n  startPoint: Point,\n  endPoint: Point,\n): number | undefined {\n  let quadrant;\n\n  // determine in which quadrant we are\n  if (startPoint.x <= endPoint.x) {\n    if (startPoint.y >= endPoint.y) {\n      quadrant = 0;\n    } // upper right quadrant\n    else {\n      quadrant = 3;\n    } // lower right quadrant\n  } else {\n    if (startPoint.y >= endPoint.y) {\n      quadrant = 1;\n    } // upper left Quadrant\n    else {\n      quadrant = 2;\n    } // lower left quadrant\n  }\n\n  const adjacent = Math.abs(startPoint.y - endPoint.y);\n  const opposite = Math.abs(startPoint.x - endPoint.x);\n\n  // since the arcus-tangens only gives values between 0 and 90, we have to adjust for the quadrant we are in\n\n  if (quadrant === 0) {\n    return 90 - degrees(Math.atan2(opposite, adjacent));\n  }\n  if (quadrant === 1) {\n    return 90 + degrees(Math.atan2(opposite, adjacent));\n  }\n  if (quadrant === 2) {\n    return 270 - degrees(Math.atan2(opposite, adjacent));\n  }\n  if (quadrant === 3) {\n    return 270 + degrees(Math.atan2(opposite, adjacent));\n  }\n  return undefined;\n}\n\nexport function positionsMatch(\n  width: number,\n  height: number,\n  elementX: number,\n  elementY: number,\n  clickX: number,\n  clickY: number,\n): boolean {\n  if (clickX > elementX && clickX < elementX + width) {\n    if (clickY > elementY && clickY < elementY + height) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport class Point {\n  y = 0;\n  x = 0;\n}\n","'use strict';\n\n// sanitize user-Input to be Desktop-Filename safe\nexport function sanitizeForDesktop(str: string): string {\n  const map: { [key: string]: string } = {\n    '/': '',\n    '\\\\': '',\n    ':': '',\n    '*': '',\n    '?': '',\n    '\"': '',\n    '<': '',\n    '>': '',\n    '|': '',\n  };\n  const reg = /[/\\\\:*?\"<>|]/gi;\n  return str ? str.replace(reg, (match) => map[match]) : '';\n}\n\nexport function sanitizeIconName(name: string): string {\n  if (!name) {\n    return '';\n  }\n  let nameWithoutFileEnding =\n    name.lastIndexOf('.') > 0 ? name.substring(0, name.lastIndexOf('.')) : name;\n  const map: { [key: string]: string } = {\n    '/': '',\n    '\\\\': '',\n    ':': '',\n    '*': '',\n    '?': '',\n    '\"': '',\n    '<': '',\n    '>': '',\n    '|': '',\n    '(': '',\n    ')': '',\n    ' ': '-',\n  };\n  const reg = /[/\\\\:*?\"<>|() ]/gi;\n  return nameWithoutFileEnding.trim().replace(reg, (match) => map[match]);\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HeaderButtonsComponent } from './header-buttons/header-buttons.component';\n\n@NgModule({\n  declarations: [HeaderButtonsComponent],\n  exports: [HeaderButtonsComponent],\n  imports: [CommonModule],\n})\nexport class DomainStoryModelerModuleModule {}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\n\n@Component({\n  selector: 'app-header-buttons',\n  templateUrl: './header-buttons.component.html',\n  styleUrls: ['./header-buttons.component.scss'],\n})\nexport class HeaderButtonsComponent {\n  @Input()\n  hasDomainStory = false;\n  @Input()\n  hasTitle = false;\n  @Input()\n  isReplaying: boolean | null = false;\n  @Input()\n  isDirty: boolean | null = false;\n  @Input()\n  isReplayable = false;\n\n  @Output()\n  import = new EventEmitter<void>();\n  @Output()\n  openSettings = new EventEmitter<void>();\n  @Output()\n  startReplay = new EventEmitter<void>();\n  @Output()\n  stopReplay = new EventEmitter<void>();\n  @Output()\n  previousSentence = new EventEmitter<void>();\n  @Output()\n  nextSentence = new EventEmitter<void>();\n  @Output()\n  newStory = new EventEmitter<void>();\n  @Output()\n  showKeyboardShortCuts = new EventEmitter<void>();\n  @Output()\n  openLabelDictionary = new EventEmitter<void>();\n  @Output()\n  openDownloadDialog = new EventEmitter<void>();\n}\n","@if (!isReplaying) {\n  <div>\n    <button\n      [disabled]=\"!isReplayable\"\n      [class.disabled]=\"!isReplayable\"\n      id=\"buttonStartReplay\"\n      class=\"headerButton\"\n      title=\"Start replay\"\n      (click)=\"startReplay.emit()\"\n    >\n      <span class=\"material-icons materialIconButton\"> play_arrow </span>\n    </button>\n    <button\n      id=\"buttonImport\"\n      class=\"headerButton\"\n      title=\"Import story from file\"\n      onclick=\"document.getElementById('import').click();\"\n    >\n      <span class=\"material-icons materialIconButton\"> unarchive </span>\n    </button>\n    <input\n      type=\"file\"\n      accept=\".dst, .svg, .egn, .svg\"\n      style=\"display: none\"\n      id=\"import\"\n      onclick=\"this.value=null;\"\n      (change)=\"import.emit()\"\n      name=\"file\"\n    />\n    <button\n      [disabled]=\"!hasDomainStory && !hasTitle\"\n      [class.disabled]=\"!hasDomainStory && !hasTitle\"\n      class=\"headerButton\"\n      id=\"export\"\n      title=\"Export story as .egn, .svg or .png file\"\n      (click)=\"openDownloadDialog.emit()\"\n    >\n      @if (!isDirty) {\n        <span class=\"material-icons-outlined materialIconButton\">\n          archive\n        </span>\n      }\n      @if (isDirty) {\n        <span class=\"material-icons materialIconButton\"> archive </span>\n      }\n    </button>\n    <button\n      [disabled]=\"!hasDomainStory\"\n      [class.disabled]=\"!hasDomainStory\"\n      class=\"headerButton\"\n      title=\"Label Dictionary\"\n      (click)=\"openLabelDictionary.emit()\"\n    >\n      <span class=\"material-icons materialIconButton\" title=\"Label Dictionary\">\n        spellcheck\n      </span>\n    </button>\n    <button class=\"headerButton\" title=\"Settings\" (click)=\"openSettings.emit()\">\n      <span\n        class=\"material-icons materialIconButton\"\n        title=\"Change Icons and Settings\"\n      >\n        settings\n      </span>\n    </button>\n    <button\n      class=\"headerButton\"\n      title=\"Show keyboard shortcuts\"\n      (click)=\"showKeyboardShortCuts.emit()\"\n    >\n      <span class=\"material-icons materialIconButton\"> keyboard </span>\n    </button>\n    <button\n      class=\"headerButton\"\n      title=\"Create a new domain story\"\n      (click)=\"newStory.emit()\"\n    >\n      <span class=\"material-icons materialIconButton\"> note_add </span>\n    </button>\n  </div>\n}\n@if (isReplaying) {\n  <div>\n    <button\n      class=\"headerButton\"\n      title=\"Previous sentence\"\n      (click)=\"previousSentence.emit()\"\n    >\n      <span class=\"material-icons materialIconButton\"> skip_previous </span>\n    </button>\n    <button\n      class=\"headerButton\"\n      title=\"Next sentence\"\n      (click)=\"nextSentence.emit()\"\n    >\n      <span class=\"material-icons materialIconButton\"> skip_next </span>\n    </button>\n    <button\n      class=\"headerButton\"\n      title=\"Stop replay\"\n      (click)=\"stopReplay.emit()\"\n    >\n      <span class=\"material-icons materialIconButton\"> stop </span>\n    </button>\n  </div>\n}\n","import { Component } from '@angular/core';\nimport { combineLatest, map, Observable } from 'rxjs';\nimport { TitleService } from '../../../../tools/title/services/title.service';\nimport { ReplayService } from '../../../../tools/replay/services/replay.service';\nimport { ImportDomainStoryService } from '../../../../tools/import/services/import-domain-story.service';\nimport { SettingsService } from '../../../services/settings/settings.service';\nimport { RendererService } from '../../../../tools/modeler/services/renderer.service';\nimport { DirtyFlagService } from '../../../../domain/services/dirty-flag.service';\nimport { DialogService } from '../../../../domain/services/dialog.service';\nimport { ExportService } from '../../../../tools/export/services/export.service';\nimport { LabelDictionaryService } from '../../../../tools/label-dictionary/services/label-dictionary.service';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss'],\n})\nexport class HeaderComponent {\n  title$ = this.titleService.title$;\n  description$ = this.titleService.description$;\n  showDescription$ = this.titleService.showDescription$;\n\n  isReplay$: Observable<boolean>;\n  isDirty$: Observable<boolean>;\n  sentenceDescription$: Observable<string>;\n  showDescription: Observable<boolean>;\n\n  constructor(\n    private titleService: TitleService,\n    private replayService: ReplayService,\n    private importService: ImportDomainStoryService,\n    private settingsService: SettingsService,\n    private renderService: RendererService,\n    private dirtyFlagService: DirtyFlagService,\n    private dialogService: DialogService,\n    private exportService: ExportService,\n    private labelDictionaryService: LabelDictionaryService,\n  ) {\n    this.isReplay$ = this.replayService.replayOn$;\n    this.isDirty$ = this.dirtyFlagService.dirty$;\n\n    this.sentenceDescription$ = combineLatest([\n      this.replayService.currentSentence$,\n      this.replayService.maxSentenceNumber$,\n    ]).pipe(map(([sentence, count]) => `${sentence}/${count}`));\n\n    this.showDescription = this.titleService.showDescription$;\n  }\n\n  openHeaderDialog(): void {\n    this.titleService.openHeaderDialog();\n  }\n\n  openSettings(): void {\n    this.settingsService.open();\n  }\n\n  setShowDescription(show: boolean): void {\n    this.titleService.setShowDescription(show);\n  }\n\n  createNewDomainStory(): void {\n    this.titleService.reset();\n    this.renderService.reset();\n  }\n\n  onImport(): void {\n    this.importService.performImport();\n  }\n\n  startReplay(): void {\n    this.replayService.startReplay(true);\n  }\n\n  stopReplay(): void {\n    this.replayService.stopReplay();\n  }\n\n  previousSentence(): void {\n    this.replayService.previousSentence();\n  }\n\n  nextSentence(): void {\n    this.replayService.nextSentence();\n  }\n\n  openKeyboardShortcutsDialog(): void {\n    this.dialogService.openKeyboardShortcutsDialog();\n  }\n\n  openLabelDictionary(): void {\n    this.labelDictionaryService.openLabelDictionary();\n  }\n\n  openDownloadDialog(): void {\n    this.exportService.openDownloadDialog();\n  }\n\n  get hasDomainStory() {\n    return this.exportService.isDomainStoryExportable();\n  }\n\n  get hasTitle(): boolean {\n    return this.titleService.hasTitleOrDescription();\n  }\n\n  get isReplayable() {\n    return this.replayService.isReplayable();\n  }\n}\n","<mat-toolbar color=\"primary\">\n  <mat-toolbar-row>\n    @if (showDescription | async) {\n      <button\n        class=\"headerButton\"\n        title=\"Hide Description\"\n        (click)=\"setShowDescription(false)\"\n      >\n        <span class=\"material-icons materialIconButton toggle\">\n          expand_less\n        </span>\n      </button>\n    }\n    @if (!(showDescription | async)) {\n      <button\n        class=\"headerButton\"\n        title=\"Show Description\"\n        (click)=\"setShowDescription(true)\"\n      >\n        <span class=\"material-icons materialIconButton toggle\">\n          expand_more</span\n        >\n      </button>\n    }\n    <div class=\"mr-10 titel-scrollbar\">\n      <span\n        class=\"headline\"\n        (click)=\"openHeaderDialog()\"\n        title=\"Edit Title and Description\"\n      >\n        {{ title$ | async }}\n        <span class=\"material-icons materialIconButton editIcon\"> edit </span>\n      </span>\n    </div>\n\n    <span class=\"titleSpacer\"></span>\n\n    @if (isReplay$ | async) {\n      <span title=\"Replay Sentence\">\n        Sentence: {{ sentenceDescription$ | async }}</span\n      >\n    }\n\n    <span class=\"buttonSpacer\"></span>\n    <app-header-buttons\n      class=\"nowrap\"\n      [hasDomainStory]=\"hasDomainStory\"\n      [hasTitle]=\"hasTitle\"\n      [isDirty]=\"isDirty$ | async\"\n      [isReplayable]=\"isReplayable\"\n      [isReplaying]=\"isReplay$ | async\"\n      (import)=\"onImport()\"\n      (openSettings)=\"openSettings()\"\n      (startReplay)=\"startReplay()\"\n      (stopReplay)=\"stopReplay()\"\n      (nextSentence)=\"nextSentence()\"\n      (previousSentence)=\"previousSentence()\"\n      (newStory)=\"createNewDomainStory()\"\n      (showKeyboardShortCuts)=\"openKeyboardShortcutsDialog()\"\n      (openLabelDictionary)=\"openLabelDictionary()\"\n      (openDownloadDialog)=\"openDownloadDialog()\"\n    />\n  </mat-toolbar-row>\n</mat-toolbar>\n@if (showDescription$ | async) {\n  <mat-card class=\"smallScrollbar description\">\n    <span class=\"descriptionText\">{{ description$ | async }}</span>\n  </mat-card>\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-general-settings',\n  templateUrl: './general-settings.component.html',\n  styleUrls: ['./general-settings.component.scss'],\n})\nexport class GeneralSettingsComponent {}\n","<div class=\"content\">\n  <app-autosave-settings></app-autosave-settings>\n</div>\n","import { Component } from '@angular/core';\nimport { SettingsService } from 'src/app/workbench/services/settings/settings.service';\nimport { ModelerService } from 'src/app/tools/modeler/services/modeler.service';\nimport { BehaviorSubject } from 'rxjs';\nimport { IconSetCustomizationService } from '../../../tools/icon-set-config/services/icon-set-customization.service';\nimport { IconSetConfiguration } from '../../../domain/entities/icon-set-configuration';\n\n@Component({\n  selector: 'app-settings',\n  templateUrl: './settings.component.html',\n  styleUrls: ['./settings.component.scss'],\n})\nexport class SettingsComponent {\n  iconSetConfiguration: IconSetConfiguration | undefined;\n  showGeneralSettings = new BehaviorSubject<boolean>(false);\n  showIconSetCustomization = new BehaviorSubject<boolean>(true);\n\n  constructor(\n    private settingsService: SettingsService,\n    private modelerService: ModelerService,\n    private iconSetCustomizationService: IconSetCustomizationService,\n  ) {}\n\n  close(): void {\n    const savedConfiguration =\n      this.iconSetCustomizationService.getAndClearSavedConfiguration();\n    if (savedConfiguration) {\n      this.modelerService.restart(savedConfiguration);\n    }\n    this.settingsService.close();\n  }\n\n  openGeneralSettings() {\n    this.showGeneralSettings.next(true);\n    this.showIconSetCustomization.next(false);\n  }\n\n  openIconSetCustomization() {\n    this.showGeneralSettings.next(false);\n    this.showIconSetCustomization.next(true);\n  }\n}\n","<div class=\"settings\">\n  <mat-toolbar color=\"primary\" class=\"toolbar\">\n    <mat-toolbar-row>\n      <button class=\"headerButton noPadding\" mat-icon-button (click)=\"close()\">\n        <span class=\"material-icons-outlined materialIconButton\">\n          arrow_back</span\n        >\n      </button>\n      <div class=\"paddedButton\">\n        <button\n          class=\"headerButton mr-10\"\n          [class.highlight]=\"showIconSetCustomization | async\"\n          mat-button\n          (click)=\"openIconSetCustomization()\"\n        >\n          <span class=\"headline\">Customize Icons for Your Domain</span>\n        </button>\n        <button\n          class=\"headerButton\"\n          [class.highlight]=\"showGeneralSettings | async\"\n          mat-button\n          (click)=\"openGeneralSettings()\"\n        >\n          <span class=\"headline\">General Settings</span>\n        </button>\n      </div>\n    </mat-toolbar-row>\n  </mat-toolbar>\n\n  @if (showGeneralSettings | async) {\n    <app-general-settings />\n  }\n  @if (showIconSetCustomization | async) {\n    <app-icon-set-configuration />\n  }\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IconSetConfigurationComponent } from 'src/app/tools/icon-set-config/presentation/icon-set-configuration/icon-set-configuration.component';\nimport { IconListItemComponent } from '../../../tools/icon-set-config/presentation/icon-list-item/icon-list-item.component';\nimport { DetailsListItemComponent } from '../../../tools/icon-set-config/presentation/details-list-item/details-list-item.component';\nimport { IconSetDetailsComponent } from '../../../tools/icon-set-config/presentation/icon-set-details/icon-set-details.component';\nimport { GeneralSettingsComponent } from './general/general-settings.component';\nimport { LabelDictionaryComponent } from '../../../tools/label-dictionary/presentation/label-dictionary/label-dictionary.component';\nimport { FormsModule } from '@angular/forms';\nimport { MaterialModule } from '../../../material.module';\nimport { AutosaveSettingsModule } from '../../../tools/autosave/presentation/autosave-settings.module';\n\n@NgModule({\n  declarations: [\n    IconSetConfigurationComponent,\n    GeneralSettingsComponent,\n    LabelDictionaryComponent,\n    IconListItemComponent,\n    DetailsListItemComponent,\n    IconSetDetailsComponent,\n  ],\n  exports: [\n    GeneralSettingsComponent,\n    IconSetConfigurationComponent,\n    LabelDictionaryComponent,\n  ],\n  imports: [AutosaveSettingsModule, CommonModule, FormsModule, MaterialModule],\n})\nexport class SettingsModule {}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SettingsService {\n  private showSettings = new BehaviorSubject(false);\n  showSettings$ = this.showSettings.asObservable();\n\n  close(): void {\n    this.showSettings.next(false);\n  }\n\n  open(): void {\n    this.showSettings.next(true);\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --configuration production` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  version: '2.0.1-dev',\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch((err) => console.error(err));\n"],"names":["SVG_LINK","TEXTSPAN_DESCRIPTION_HEIGHT","TEXTSPAN_TITLE_HEIGHT","X_OFFSET_UTIL","dynamicHeightOffset","createTitleAndDescriptionSVGElement","initDynamicHeightOffset","title","description","min_x","min_y","width","replace","titleElement","createTitle","descriptionElement","createDescription","insertText","text","tempCanvas","document","createElement","ctx","getContext","font","createTextSpans","descriptionParts","split","i","length","yOffset","heightOffset","fontSize","textSpans","words","removeLeadingEmptyStrings","textTag","textSpan","createElementNS","textNode","createTextNode","setAttribute","appendChild","j","firstChild","data","len","measureText","slice","outerHTML","stringArray","firstNonEmptyIndex","findIndex","string","Modeler","ResizeModule","assign","isArray","inherits","DomainStoryModule","LabelEditingModule","ModelingModule","ElementTypes","DomainStoryModeler","options","call","_customElements","_groupElements","prototype","_modules","concat","_addCustomShape","customElement","parentId","parent","children","push","canvas","get","elementFactory","customAttrs","businessObject","customShape","create","isGroup","id","parentShape","addShape","_addCustomConnection","elementRegistry","connection","source","target","addConnection","importCustomElements","elements","fire","addCustomElements","customElements","Error","shapes","connections","groups","forEach","isConnection","getCustomElements","createDiagram","done","element","type","ACTIVITY","CONNECTION","GROUP","Replace","modeling","_modeling","replaceElement","oldElement","newElementData","newElement","setCenterOfElement","outgoingActivities","outgoing","incomingActivities","incoming","x","Math","ceil","y","height","name","replaceShape","replaceOptions","ReplaceMenuProvider","_dsReplace","$inject","getEntries","entries","includes","actorReplaceOptions","workObjectReplaceOptions","_createEntries","menuEntries","self","definition","entry","_createMenuEntry","action","replaceAction","label","className","actionName","iconDictionaryService","initializeReplaceOptions","iconDictionary","actorTypes","getTypeDictionary","ACTOR","replaceOption","keysArray","actorType","typeName","toLowerCase","getIconForBPMN","workObjectTypes","WORKOBJECT","workObjectType","ContextPadProvider","bind","generateAutomaticNumber","getAllStandardIconKeys","hexToRGBA","isHexWithAlpha","rgbaToHex","dirtyFlagService","initializeContextPadProvider","dirtyFlag","DomainStoryContextPadProvider","injector","connect","translate","contextPad","popupMenu","replaceMenuProvider","commandStack","eventBus","startConnect","selectedElement","invoke","autoPlace","cached","getContextPadEntries","addEventListener","event","executeCommandStack","registerProvider","pickedColor","dispatchEvent","CustomEvent","detail","color","allStandardIconKeys","actions","autoActivate","start","addColorChange","addConnectWithActivity","addTextAnnotation","addActors","appendAction","addWorkObjects","addChangeWorkObjectTypeMenu","addChangeActorTypeMenu","delete","deleteGroup","group","click","removeGroup","makeDirty","moveDeleteActionToEndOfArray","removeElements","changeDirection","position","getReplaceMenuPosition","cursor","open","colorChange","TEXTANNOTATION","dragstart","icon","context","newNumber","execute","Y_OFFSET","diagramContainer","getContainer","pad","getPad","html","diagramRect","getBoundingClientRect","padRect","top","left","appendStart","shape","createShape","hints","getSelectedBusinessObject","oldColor","newColor","selectedBusinessObject","BpmnElementFactory","DEFAULT_LABEL_SIZE","DomainStoryIdFactory","DomainStoryElementFactory","bpmnFactory","moddle","domainStoryIdFactory","elementType","attrs","baseCreate","test","registerId","getId","key","set","value","$type","di","$descriptor","_getCustomElementSize","Object","defineProperty","createBpmnElement","__default","Dimensions","idList","generateId","idNumber","fourDigitsId","idSuffix","containsId","floor","random","same","BaseRenderer","Ids","getAnnotationBoxHeight","componentsToPath","createLine","append","svgAppend","attr","svgAttr","classes","svgClasses","svgCreate","query","domQuery","isObject","getNumberStash","addNumberToRegistry","numberBoxDefinitions","calculateTextWidth","countLines","labelPosition","angleBetween","isCustomIcon","isCustomSvgIcon","RENDERER_IDS","numbers","DEFAULT_COLOR","_iconDictionaryService","_elementRegistryService","_dirtyFlagService","initializeRenderer","elementRegistryService","DomainStoryRenderer","styles","textRenderer","pathMap","rendererId","next","markers","computeStyle","generateActivityNumber","parentGfx","box","numberStash","semantic","use","number","newRenderedNumber","renderNumber","numberStyle","fitBox","style","getExternalStyle","fill","backgroundBoxStyle","fontFamily","backgroundDotStyle","renderEmbeddedLabel","align","padding","renderLabel","renderExternalLabel","waypoints","lines","startPoint","selected","endPoint","angle","alignment","boxWidth","xStart","abs","textAlign","wordWrap","overflowWrap","hyphens","renderExternalNumber","String","createText","add","setCoordinates","circle","radius","d","stroke","innerHTML","manipulateInnerHTMLXLabel","manipulateInnerHTMLYLabel","attributes","nodeValue","offset","result","Number","drawGroup","rect","drawRect","applyColorToCustomSvgIcon","iconSvg","rest","base64Svg","svg","atob","coloredSvg","applyColorToIcon","encodedColoredSvg","btoa","match","some","it","replaceAll","index","indexOf","substring","getIconSvg","dataURL","drawActor","svgDynamicSizeAttributes","iconSRC","getTypeIconSRC","getIconId","actor","drawWorkObject","workObject","useColorForActivity","strokeWidth","strokeLinejoin","markerEnd","marker","drawActivity","p","adjustForTextOverlap","fixConnectionInHTML","parentElement","checkIfPointOverlapsText","point","lineOffset","getLineOffset","objects","getElementsByClassName","data_id","item","getAttribute","object","getElementsByTagName","tspans","tspan","wantedConnection","polylines","drawDSConnection","strokeDasharray","drawAnnotation","textElement","textPathData","getScaledPath","xScaleFactor","yScaleFactor","containerWidth","containerHeight","mx","my","drawPath","path","r","rx","ry","createMarker","sequenceflowEnd","addMarker","ref","scale","strokeLinecap","viewBox","refX","refY","markerWidth","markerHeight","orient","defs","_svg","getWorkObjectPath","rectangle","getRectPath","getGroupPath","getActivityPath","map","original","activityPath","waypoint","getActorPath","canRender","drawShape","startsWith","search","pos","correctInitialize","getShapePath","drawConnection","every","reduce","RuleProvider","is","HIGH_PRIORITY","MIN_SIZE","isDomainStory","isDomainStoryGroup","isActor","isWorkObject","isActivity","isAnnotation","canConnect","canResize","newBounds","lowerLeft","lowerRight","upperRight","canAttach","Array","canConnectToAnnotation","DomainStoryRules","init","canCreate","addRule","host","s","undefined","hover","pick","CommandInterceptor","collectionAdd","remove","collectionRemove","reworkGroupElements","DomainStoryUpdater","bpmnjs","updateCustomElement","e","DOMAINSTORY","updateCustomConnection","newTarget","newSource","copyWaypoints","executed","ifDomainStoryElement","reverted","fn","DomainStoryPalette","ElementFactory","CreateModule","PathMap","PopupMenuModule","ContextPadModule","CommandStack","UpdateLabelHandler","headlineAndDescriptionUpdateHandler","DSModeling","__depends__","__init__","domainStoryRenderer","paletteProvider","domainStoryRules","domainStoryUpdater","contextPadProvider","elementFactoryBpmn","updateLabelHandler","svgRemove","MARKER_HIDDEN","MARKER_LABEL_HIDDEN","annotationBoxHeight","DSLabelEditingPreview","defaultLayer","getDefaultLayer","absoluteElementBBox","gfx","on","activeProvider","active","getAbsoluteBBox","getStrokeColor","labelTarget","dy","newElementHeight","max","removeMarker","autocomplete","getLabel","isAny","getExternalLabelMid","hasExternalLabel","isLabel","isLabelExternal","dictionaryService","stashUse","initializeLabelEditingProvider","labelingDictionary","toggleStashUse","focusElement","setTimeout","focus","DSLabelEditingProvider","directEditing","resizeHandles","_canvas","_textRenderer","_updateLabelHandler","activateDirectEdit","complete","isActive","cancel","removeResizers","createAutocomplete","canExecute","isTouch","editingBox","force","activate","getUniqueWorkObjectNames","bounds","getEditingBBox","autoResize","resizable","bbox","mid","zoom","defaultStyle","getDefaultStyle","externalStyle","externalFontSize","externalLineHeight","lineHeight","defaultFontSize","defaultLineHeight","fontWeight","minWidth","maxWidth","minHeight","paddingTop","paddingBottom","paddingLeft","paddingRight","externalLabelMid","absoluteBBox","update","newLabel","activeContextText","updateLabel","getLabelAttr","getNumberAttr","getNumber","setLabel","setNumber","textNumber","selectPartOfActivity","angleActivity","selectedActivity","linelength","fontsize","input","workObjectNames","closeAllLists","currentFocus","filteredWorkObjectNames","autocompleteList","autocompleteItem","val","parentNode","toUpperCase","visibility","onkeydown","getElementById","keyCode","addActive","preventDefault","removeActive","classList","survivor","removeChild","ChangeSupportModule","DirectEditingModule","dSlabelEditingProvider","dSlabelEditingPreview","str","amountWaypoints","determinedPosition","xPos","yPos","labelPositionX","labelPositionY","offsetX","scaledAngle","offsetY","Modeling","_commandStack","updateNumber","oldShape","newShape","newData","numberRegistry","multipleNumberRegistry","canvasElementRegistry","initializeNumbering","canvasElementRegistryService","updateMultipleNumberRegistry","activityBusinessObjects","activity","multipleNumberAllowed","boxHeight","fixedOffsetX","fixedOffsetY","angleDependantOffsetX","angleDependantOffsetY","elementActivity","usedNumbers","wantedNumber","activitiesFromActors","getActivitiesFromActors","updateExistingNumbersAtGeneration","updateExistingNumbersAtEditing","sortedActivities","oldMultipleNumberRegistry","currentNumber","setNumberOfActivity","getNumbersAndIDs","iDWithNumber","activities","renderedNumber","setNumberIsMultiple","multi","getNumberRegistry","getMultipleNumberRegistry","elementArray","overrideAppendedIcons","Dictionary","APPENDED_ICONS_TAG","configuration","initializePalette","configurationService","PaletteProvider","palette","spaceTool","lassoTool","_create","_elementFactory","_spaceTool","_lassoTool","getPaletteEntries","createAction","createListener","isExpanded","shortType","initPalette","appendCSSStyleCheat","customIcons","sheetEl","head","customIconDict","appendDict","customIconDictKeys","getAppendedIconDictionary","has","src","iconStyle","wrapSRCInSVG","sheet","insertRule","cssRules","config","getCurrentIconConfigurationForBPMN","localStorage","getItem","JSON","parse","customIconsLegacy","convertLegacyAppendedIconsToDict","customIconsDict","putEntry","initTypeDictionaries","actors","workObjects","addCanvasObjectTypes","separator","activateSelection","keys","dict","initializeActivityUpdateHandler","activityUpdateHandler","registerHandler","activity_directionChange","activity_changed","preExecute","oldLabel","oldNumbersWithIDs","oldNumber","revert","revertAutomaticNumberGenerationChange","oldWaypoints","swapSource","newWaypoints","getActivitesFromActors","splice","undoGroupRework","elementUpdateHandler","element_colorChange","removeGroupWithoutChildren","child","titleService","handlerFunction","oldTitle","getTitle","oldDescription","getDescription","updateTitleAndDescription","newTitle","newDescription","DSMassRenameHandler","massRename","relevantElements","confirm","newValue","getBusinessObject","NULL_DIMENSIONS","labelCenter","createLabel","setText","postExecute","trim","removeShape","bo","getLayoutedBounds","resizeShape","numberTarget","$instanceOf","types","t","innerShape","superParent","svgShape","querySelector","svgGroup","svgGroupParent","BehaviorSubject","environment","ColorPickerDirective","BLACK","BLUE","CYAN","DARK_PINK","GREEN","GREY","LIGHT_PINK","LIME","ORANGE","PURPLE","RED","SNACKBAR_DURATION","SNACKBAR_INFO","YELLOW","i0","ɵɵelement","AppComponent","constructor","settingsService","exportService","autosaveService","cd","snackbar","replayService","version","skipNextColorUpdate","colorBox","showSettings$","showDescription$","ctrlKey","stopPropagation","isDomainStoryExportable","downloadDST","getReplayOn","nextSentence","previousSentence","colorPicker","closeDialog","customEvent","openDialog","duration","panelClass","ngOnInit","onColorChanged","ngAfterViewInit","loadLatestDraft","detectChanges","_","ɵɵdirectiveInject","i1","SettingsService","i2","TitleService","i3","ExportService","i4","AutosaveService","ChangeDetectorRef","i5","MatSnackBar","i6","ReplayService","_2","selectors","viewQuery","AppComponent_Query","rf","ɵɵelementStart","ɵɵtwoWayListener","AppComponent_Template_input_colorPickerChange_1_listener","$event","ɵɵtwoWayBindingSet","ɵɵlistener","AppComponent_Template_input_colorPickerClose_1_listener","ɵɵelementEnd","ɵɵtemplate","AppComponent_Conditional_2_Template","ɵɵtext","ɵɵadvance","ɵɵstyleProp","ɵɵproperty","ɵɵtwoWayProperty","ɵɵconditional","ɵɵpipeBind1","ɵɵclassProp","ɵɵtextInterpolate","APP_INITIALIZER","BrowserModule","MAT_CHECKBOX_DEFAULT_OPTIONS","NoopAnimationsModule","SettingsComponent","ImportDomainStoryService","ImportRepairService","ModelerService","LabelDictionaryService","ElementRegistryService","IconSetConfigurationService","MassNamingService","InfoDialogComponent","ExportDialogComponent","ActivityDialogComponent","ReactiveFormsModule","UntypedFormBuilder","TitleDialogComponent","IconDictionaryService","ModelerComponent","SettingsModule","LabelDictionaryDialogComponent","MaterialModule","ColorPickerModule","DirtyFlagService","IconSetChangedService","HeaderComponent","DomainStoryModelerModuleModule","AppModule","ngDoBootstrap","app","componentElement","body","bootstrap","ɵɵinject","_3","provide","useValue","clickAction","useFactory","initialize","deps","useExisting","imports","declarations","LabelDictionaryComponent","MatDialogContent","labelDictionaryService","Configuration","INITIAL_TITLE","INITIAL_DESCRIPTION","INITIAL_ICON_SET_NAME","ICON_SET_CONFIGURATION_TAG","DEFAULT_AUTOSAVES_ENABLED","DEFAULT_AUTOSAVES_MAX_DRAFTS","DEFAULT_AUTOSAVES_INTERVAL","SNACKBAR_SUCCESS","SNACKBAR_ERROR","IMPLICIT_ROOT_ID","all","size","isEmpty","Entry","addEach","clear","filter","found","InfoDialogData","infoText","isInfo","isLink","linkText","MAT_DIALOG_DATA","ɵɵtextInterpolate1","ctx_r0","ɵɵpropertyInterpolate","ɵɵsanitizeUrl","InfoDialogComponent_Conditional_5_Template_button_click_1_listener","ɵɵrestoreView","_r2","ɵɵnextContext","ɵɵresetView","close","dialogRef","showConfirmButton","hasLink","span","scrollHeight","MatDialogRef","decls","vars","consts","template","InfoDialogComponent_Template","InfoDialogComponent_Conditional_3_Template","InfoDialogComponent_Conditional_4_Template","InfoDialogComponent_Conditional_5_Template","CommandStackService","setCommandStack","payload","factory","ɵfac","providedIn","MatDialogConfig","DialogService","matDialog","dialog","openKeyboardShortcutsDialog","shortCutText","disableClose","autoFocus","MatDialog","isDirtySubject","dirty$","asObservable","makeClean","dirty","fullyInitialized","registry","__implicitroot","setElementRegistry","_elements","createObjectListForDSTDownload","allObjectsFromCanvas","getAllCanvasObjects","getAllGroups","objectList","fillListOfCanvasObjects","canvasElement","unshift","getAllActivities","getAllConnections","allObjects","groupObjects","checkChildForGroup","currentGroup","pop","registryElementNames","sort","activityCanvasA","activityCanvasB","activityNumberA","activityNumberB","getUsedIcons","getAllActors","workobjects","getAllWorkobjects","a","w","co","StorageService","setItem","stringify","json","MatDialogModule","MatFormFieldModule","MatInputModule","MatToolbarModule","MatExpansionModule","MatCardModule","MatSnackBarModule","MatButtonModule","MatGridListModule","MatButtonToggleModule","MatListModule","MatCheckboxModule","exports","AutosaveOptionsComponent_Conditional_0_Template_button_click_20_listener","_r1","activated_r2","ɵɵreference","interval_r3","drafts_r4","ctx_r4","save","checked","configuration_r6","activated","interval","maxDrafts","AutosaveOptionsComponent","autosaveConfiguration","setConfiguration","AutosaveConfigurationService","AutosaveOptionsComponent_Template","AutosaveOptionsComponent_Conditional_0_Template","tmp_0_0","configuration$","AutosaveSettingsComponent","AutosaveSettingsComponent_Template","AutosavedDraftsComponent_Conditional_7_For_2_Template_button_click_6_listener","draft_r3","$implicit","ctx_r3","loadDraft","date","ɵɵrepeaterCreate","AutosavedDraftsComponent_Conditional_7_For_2_Template","ɵɵrepeaterTrackByIdentity","AutosavedDraftsComponent_Conditional_7_Template_button_click_5_listener","removeAllDrafts","ɵɵrepeater","drafts","AutosavedDraftsComponent","subscription","autosavedDraftsChanged$","subscribe","initDrafts","loadCurrentDrafts","draft","AutosavedDraftsComponent_Template","AutosavedDraftsComponent_Conditional_7_Template","AutosavedDraftsComponent_Conditional_8_Template","ɵɵtextInterpolate2","CommonModule","FormsModule","AutosaveSettingsModule","ReplaySubject","AUTOSAVE_CONFIGURATION_TAG","defaultConfiguration","storageService","configurationSubject","initializeConfiguration","loadConfiguration","saveConfiguration","Subject","DRAFTS_TAG","rendererService","iconSetConfigurationService","updateConfiguration","readDrafts","sortDrafts","configFromFile","configAndDST","domain","createIconSetConfiguration","story","dst","actorIcons","getElementsOfType","workObjectIcons","updateIconRegistries","importStory","stopTimer","startTimer","autosaveTimer","clearInterval","setInterval","savedDrafts","newDraft","createDraft","isChanged","isSame","isDraftEmpty","writeDrafts","b","getStory","createConfigAndDST","Date","toString","aDate","bDate","RendererService","i7","i8","ExportDialogData","ExportOption","tooltip","ConfigAndDST","testConfigAndDst","DEFAULT_PADDING","ExportDialogComponent_For_18_Template_button_click_0_listener","i_r2","$index","ctx_r2","doOption","option_r4","withTitle","useWhiteBackground","updateWithTitle","updateUseWhiteBackground","ExportDialogComponent_Template","ExportDialogComponent_Template_input_change_4_listener","ExportDialogComponent_Template_input_change_9_listener","ExportDialogComponent_Template_button_click_15_listener","ExportDialogComponent_For_18_Template","sanitizeForDesktop","formatDate","pngService","svgService","htmlPresentationService","modelerService","dialogService","titleSubscription","title$","descriptionSubscription","description$","ngOnDestroy","unsubscribe","DomainStory","getCurrentConfigurationForExport","getStoryForDownload","filename","getCurrentDateString","downloadFile","datatype","fileEnding","encodeURIComponent","display","downloadSVG","svgData","createSVGData","downloadPNG","container","svgElements","outerSVGElement","viewport","layerBase","image","extractSVG","prepareSVG","onload","getWidth","getHeight","fillStyle","drawImage","png64","toDataURL","ele","onchange","downloadHTMLPresentation","modeler","then","info","openDownloadDialog","SVGDownloadOption","EGNDownloadOption","PNGDownloadOption","HTMLDownloadOption","getModeler","PngService","SvgService","HtmlPresentationService","i9","i10","doT","storyCreatorService","viewBoxCoordinates","ViewBoxCoordinate","_this","_asyncToGenerator","startReplay","saveSVG","fixActivityMarkersForEachSentence","getCurrentSentenceNumber","content","transition","err","alert","getMaxSentenceNumber","stopReplay","revealjsTemplate","dots","revealjsData","script","sentences","multiplexSecret","multiplexId","fixMalformedHtmlScript","structuredClone","viewBoxIndex","xLeft","yUp","splitViewBox","dataStart","dataEnd","createBounds","sectionIndex","newDefs","ids","idToReplace","newId","StoryCreatorService","browserSpecs","ua","navigator","userAgent","tem","M","exec","appName","appVersion","URIHashtagFix","fix","browser","parseInt","findMostOuterElements","xRight","yDown","sub","elXLeft","elXRight","elYUp","elYDown","transform","nums","rects","outerRect","calculateWidthAndHeight","insertIndex","join","extraHeight","layerResizers","layerOverlays","removeAttribute","XMLSerializer","serializeToString","cacheData","getEncoded","domainStorySvg","viewBoxWidth","viewBoxHeight","findIndexToInsertData","svgIndex","backgroundColorWhite","appendDST","appendedIcons","allIcons","Person","Group","Pet","Conversation","World","Store","Theater","Business","Water","Hotel","Dining","Courthouse","Flag","Place","Car","Bus","Train","Truck","Taxi","Bike","Boat","Motorcycle","Plane","Shuttle","Walking","Traffic","Commute","System","Printer","Document","Folder","Call","Email","Copyright","DNS","Settings","Cellphone","Update","Briefcase","Microphone","Signal","Key","Pencil","Sum","Headset","Keyboard","Mouse","Router","Scanner","Security","Desktop","Tablet","Label","Receipt","Calendar","Cloud","Assessment","Dashboard","Problem","Grid","Watch","Euro","Dollar","Info","Alarm","Wrench","Favorite","Gavel","Blind","Hourglass","Time","Search","Shopping","Couch","Attach","Ruler","Education","allIconsDict","newIcons","updateAppendedIcons","IconConfiguration","allIconDictionary","domainName","getDefaultConf","defaultConf","updateAllIconRegistry","appendSRCFile","actorsDict","workObjectsDict","newAppendedIcons","appen","createCustomConf","iconSetConfiguration","allIconsConf","IconFilterEnum","DetailsListItemComponent","iconInitiated","ngAfterViewChecked","createIcon","img","inputs","DetailsListItemComponent_Template","IconListItemComponent","iconName","iconSetCustomizationService","isWorkobject","isNone","getIconForName","toggleNone","setAsUnassigned","toggleActor","setAsActor","toggleWorkobject","setAsWorkobject","IconSetCustomizationService","IconListItemComponent_Template","IconListItemComponent_Template_mat_button_toggle_change_7_listener","IconListItemComponent_Template_mat_button_toggle_change_10_listener","IconListItemComponent_Template_mat_button_toggle_change_13_listener","ICON_PREFIX","sanitizeIconName","iconName_r1","IconSetConfigurationComponent","ICON_FILTER_NONE","selectedActors","selectedWorkobjects","allIconNames","allFilteredIconNames","iconSetConfigurationTypes","getIconSetConfiguration","getFullDictionary","sortByName","selectedActors$","selectedWorkobjects$","allFiltered","getFilteredNamesForType","localeCompare","loadMinimalIconConfigurationWithDefaultIcons","resetIconSet","loadInitialConfiguration","saveIconSet","exportIconSet","startIconUpload","importIcon","files","iconInputFile","reader","FileReader","onloadend","addIMGToIconDictionary","registerIconForBPMN","addNewIcon","readAsDataURL","startIconSetImport","importIconSet","iconSetInputFile","importConfiguration","readAsText","filterForActors","ICON_FILTER_ACTOR","filterForWorkobjects","ICON_FILTER_WORKOBJECT","filterForUnassigned","ICON_FILTER_UNASSIGNED","filterByNameAndType","filteredByNameAndType","isIconActor","isIconWorkObject","IconSetConfigurationComponent_Template","IconSetConfigurationComponent_Template_button_click_6_listener","IconSetConfigurationComponent_Template_button_click_10_listener","IconSetConfigurationComponent_Template_button_click_14_listener","IconSetConfigurationComponent_Template_input_input_18_listener","IconSetConfigurationComponent_Template_button_click_20_listener","IconSetConfigurationComponent_Template_input_change_23_listener","IconSetConfigurationComponent_Template_button_click_24_listener","IconSetConfigurationComponent_Template_button_click_27_listener","IconSetConfigurationComponent_Template_button_click_31_listener","IconSetConfigurationComponent_Template_button_click_35_listener","IconSetConfigurationComponent_Template_input_change_38_listener","IconSetConfigurationComponent_Template_button_click_39_listener","IconSetConfigurationComponent_For_44_Template","IconSetDetailsComponent_For_12_Template_mat_list_item_dragover_0_listener","ctx_r1","allowDrop","IconSetDetailsComponent_For_12_Template_mat_list_item_dragstart_0_listener","i_r3","onDragStart","IconSetDetailsComponent_For_12_Template_mat_list_item_drop_0_listener","iconName_r5","onDrop","IconSetDetailsComponent_For_19_Template_mat_list_item_dragover_0_listener","_r6","IconSetDetailsComponent_For_19_Template_mat_list_item_dragstart_0_listener","i_r7","IconSetDetailsComponent_For_19_Template_mat_list_item_drop_0_listener","ctx_r7","iconName_r9","IconSetDetailsComponent","customizationService","draggedList","draggedIndex","iconSetName","iconSetName$","changeName","listName","list","sortedList","setSelectedActors","setSelectedWorkObject","IconSetDetailsComponent_Template","IconSetDetailsComponent_Template_input_input_5_listener","IconSetDetailsComponent_For_12_Template","IconSetDetailsComponent_For_19_Template","actorIconDictionary","workObjectDictionary","iconDictionaryForBPMN","iconConfig","allTypes","initDictionary","dictionary","customConfiguration","allInTypeDictionary","collection","allIn","addIconsFromIconSetConfiguration","dictionaryType","iconTypes","registerIconForType","addIconsToTypeDictionary","unregisterIconForType","extractCustomIconsFromDictionary","addNewIconsToDictionary","elementDictionary","sanitizedName","custom","addIconsToCss","fullDictionary","appendedDict","getTypeDictionaryKeys","getIconSource","elementOfType","getAllIconDictionary","getActorsDictionary","getWorkObjectsDictionary","getIconConfiguration","setCustomConfiguration","setIconSetName","exportConfiguration","configJSONString","getIconSetName","customConfig","updateIconSetName","actorDict","workObjectDict","actorKeys","workObjectKeys","configurationName","getCurrentConfiguration","createConfigFromDictionaries","currentConfiguration","getCurrentConfigurationNamesWithoutPrefix","createMinimalConfigurationWithDefaultIcons","minimalConfig","createConfigFromCanvas","actorNames","workobjectNames","newActors","newWorkobjects","fileConfiguration","getStoredIconSetConfiguration","iconSetString","configurationFromFile","checkValidityOfConfiguration","setStoredIconSetConfiguration","configForStorage","allCanvasObjects","iconSetChangedService","allIconListItems","configurationHasChanged","addIconToAllIconList","iconConfigrationChanged","storedIconSetConfiguration","importedConfiguration","getConfiguration","selectedActorNames","selectActor","selectedWorkobjectNames","selectWorkObject","changedIconSet","deselectActor","deselectWorkobject","updateIcon","workobject","updateActorSubject","updateWorkObjectSubject","defaultConfig","workObjectName","actorName","updateAllIconBehaviourSubjects","resetToInitialConfiguration","usedIcons","imported","changedActors","changedWorkobjects","configurationActors","configurationWorkobjects","changedIconSetConfiguration","updateIcons","getAndClearSavedConfiguration","temp","iconDict","getSrcForIcon","iconBehaviourSubject","customIconSetConfiguration","rawSrc","EventEmitter","importRepairService","importedConfigurationEmitter","performImport","file","dstSvgPattern","egnSvgPattern","endsWith","importDST","importEGN","commandStackChanged","isSVG","fileReader","titleText","restoreTitleFromFileName","fileReaderFunction","isEGN","dstText","removeXMLComments","dstAndConfig","extractDstAndConfig","configChanged","checkConfigForChanges","lastElement","importVersionNumber","handleVersionNumber","checkForUnreferencedElementsInActivitiesAndRepair","showBrokenImportDialog","adjustPositions","versionPrefix","lastIndexOf","updateCustomElementsPreviousV050","showPreviousV050Dialog","xmlText","newActorKeys","newWorkObjectKeys","currentActorKeys","currentWorkobjectKeys","changed","clearName","setImportedConfigurationAndEmit","emit","domainStoryRegex","svgRegex","egnSuffix","dstSuffix","svgSuffix","filenameWithoutDateSuffix","objectIDs","activityIndex","isFirst","findFirstElement","adjustElementPosition","LabelDictionaryDialogComponent_Template","LabelDictionaryDialogComponent_Template_app_label_dictionary_closeEmitter_3_listener","LabelDictionaryComponent_For_6_Template_input_change_2_listener","workobjectEntry_r2","updateWorkobjectEntry","LabelDictionaryComponent_For_13_Template_textarea_change_2_listener","activityEntry_r5","_r4","updateActivityEntry","LabelDictionaryComponent_For_13_Template_textarea_keydown_enter_2_listener","LabelDictionaryComponent_For_13_Template_textarea_keyup_enter_2_listener","LabelDictionaryComponent_For_13_Template_textarea_keyup_escape_2_listener","closeEmitter","createLabelDictionaries","workObjectEntries","getWorkObjectLabels","activityEntries","getActivityLabels","workobjectEntriesSubject","activityEntriesSubject","activityNames","originalActivityNames","originalWorkObjectNames","originalName","massRenameLabels","activityEntry","workobjectEntry","outputs","LabelDictionaryComponent_Template","LabelDictionaryComponent_For_6_Template","LabelDictionaryComponent_For_13_Template","LabelDictionaryComponent_Template_button_click_16_listener","LabelDictionaryComponent_Template_button_click_18_listener","massNamingService","activityLabels","workObjektLabels","openLabelDictionary","isActivityWithLabel","isWorkObjectWithLabel","hasAtLeastOneLabel","Set","massChangeNames","commandStackService","oldValue","allRelevantObjects","FormControl","FormGroup","Validators","ActivityDialogForm","activityLabel","activityNumber","numberIsAllowedMultipleTimes","nonNullable","required","multipleNumbers","ActivityDialogData","showNumberFields","saveFN","form","controls","valueChanges","setValue","onSubmit","patchValue","ActivityDialogComponent_Template","ActivityDialogComponent_Template_input_change_9_listener","ActivityDialogComponent_Template_textarea_keydown_enter_14_listener","ActivityDialogComponent_Template_textarea_keyup_enter_14_listener","ActivityDialogComponent_Template_textarea_keyup_escape_14_listener","ActivityDialogComponent_Template_button_click_16_listener","ActivityDialogComponent_Template_button_click_18_listener","postInit","ModelerComponent_Template","positionsMatch","massRenameHandler","InitializerService","propagateDomainStoryModelerClassesToServices","selection","initializeDomainStoryModelerEventHandlers","initiateEventBusListeners","activityDoubleClick","renderedNumberRegistry","allActivities","htmlCanvas","transformX","transformY","zoomX","zoomY","clickX","originalEvent","clickY","parseFloat","currentNum","tx","ty","tNumber","elementX","elementY","pasteColor","descriptor","oldBusinessObject","saveActivityInputLabel","activityData","hasNumber","initializerService","keyboard","bindTo","additionalModules","bpmnSearch","exportArtifacts","debounce","window","startDebounce","restart","domainStory","currentStory","destroy","timeout","timer","clearTimeout","encoded","renderStory","reset","configurationChange","c","NUMBER_BACKGROUND_COLOR","NUMBER_COLOR","STROKE_WIDTH","HIGHLIGHT_NUMBER_BACKGROUNG_COLOR","HIGHLIGHT_NUMBER_COLOR","HIGHLIGHT_STROKE_WIDTH","DomManipulationService","showAll","removeHighlights","domObject","showSentence","replaySentence","notShown","getAllNotShown","highlightSentence","o","getNumberDomForActivity","numberText","previousSibling","numberBackgroundDom","numberTextDom","allConnections","activityDomObject","connectionDomObject","sentenceObjects","shownElements","notShownElements","domManipulationService","currentSentence","maxSentenceNumber","replayOnSubject","currentSentence$","maxSentenceNumber$","replayOn$","setReplayState","state","isReplayable","traceActivitiesAndCreateStory","initializeReplay","showCurrentSentence","checkSequenceNumbers","missingSentences","getMissingSentences","sentence","getValue","tracedActivityMap","tracedActivityMapKeys","tracedItem","storyIndex","createSentence","addGroupsToLastSentence","tracedActivityMapKey","tracedActivity","getSentenceObjects","highlightedElements","highlightedObjects","allActivityNumbersFromActors","allActivityNumbers","highestSequenceNumber","initialSource","targetObjects","parallelSentence","firstTarget","checkTarget","activityTarget","g","TitleDialogForm","titel","getRawValue","TitleDialogComponent_Template","TitleDialogComponent_Template_textarea_keydown_enter_10_listener","TitleDialogComponent_Template_textarea_keyup_enter_10_listener","TitleDialogComponent_Template_textarea_keyup_escape_10_listener","TitleDialogComponent_Template_button_click_12_listener","TitleDialogComponent_Template_button_click_14_listener","titleSubject","descriptionSubject","iconSetNameSubject","showDescriptionSubject","openHeaderDialog","allowUndo","fireTitleAndDescriptionUpdate","updateTitle","updateDescription","inputTitle","setShowDescription","show","getVersion","hasTitleOrDescription","rgba","red","padStart","green","blue","alpha","round","isValidHex","hex","getChunksFromString","st","chunkSize","RegExp","convertHexUnitTo256","hexStr","repeat","getAlphafloat","EPSILON","hexArr","degrees","radians","PI","quadrant","adjacent","opposite","atan2","Point","reg","nameWithoutFileEnding","HeaderButtonsComponent","HeaderButtonsComponent_Conditional_0_Template_button_click_1_listener","HeaderButtonsComponent_Conditional_0_Template_input_change_7_listener","import","HeaderButtonsComponent_Conditional_0_Template_button_click_8_listener","HeaderButtonsComponent_Conditional_0_Conditional_9_Template","HeaderButtonsComponent_Conditional_0_Conditional_10_Template","HeaderButtonsComponent_Conditional_0_Template_button_click_11_listener","HeaderButtonsComponent_Conditional_0_Template_button_click_14_listener","openSettings","HeaderButtonsComponent_Conditional_0_Template_button_click_17_listener","showKeyboardShortCuts","HeaderButtonsComponent_Conditional_0_Template_button_click_20_listener","newStory","hasDomainStory","hasTitle","isDirty","HeaderButtonsComponent_Conditional_1_Template_button_click_1_listener","_r3","HeaderButtonsComponent_Conditional_1_Template_button_click_4_listener","HeaderButtonsComponent_Conditional_1_Template_button_click_7_listener","isReplaying","HeaderButtonsComponent_Template","HeaderButtonsComponent_Conditional_0_Template","HeaderButtonsComponent_Conditional_1_Template","combineLatest","HeaderComponent_Conditional_2_Template_button_click_0_listener","HeaderComponent_Conditional_4_Template_button_click_0_listener","sentenceDescription$","importService","renderService","isReplay$","isDirty$","pipe","count","showDescription","createNewDomainStory","onImport","HeaderComponent_Template","HeaderComponent_Conditional_2_Template","HeaderComponent_Conditional_4_Template","HeaderComponent_Template_span_click_7_listener","HeaderComponent_Conditional_13_Template","HeaderComponent_Template_app_header_buttons_import_16_listener","HeaderComponent_Template_app_header_buttons_openSettings_16_listener","HeaderComponent_Template_app_header_buttons_startReplay_16_listener","HeaderComponent_Template_app_header_buttons_stopReplay_16_listener","HeaderComponent_Template_app_header_buttons_nextSentence_16_listener","HeaderComponent_Template_app_header_buttons_previousSentence_16_listener","HeaderComponent_Template_app_header_buttons_newStory_16_listener","HeaderComponent_Template_app_header_buttons_showKeyboardShortCuts_16_listener","HeaderComponent_Template_app_header_buttons_openLabelDictionary_16_listener","HeaderComponent_Template_app_header_buttons_openDownloadDialog_16_listener","HeaderComponent_Conditional_19_Template","GeneralSettingsComponent","GeneralSettingsComponent_Template","showGeneralSettings","showIconSetCustomization","savedConfiguration","openGeneralSettings","openIconSetCustomization","SettingsComponent_Template","SettingsComponent_Template_button_click_3_listener","SettingsComponent_Template_button_click_7_listener","SettingsComponent_Template_button_click_11_listener","SettingsComponent_Conditional_15_Template","SettingsComponent_Conditional_17_Template","showSettings","production","enableProdMode","__NgCli_bootstrap_1","platformBrowser","bootstrapModule","catch","console","error"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}