{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/Modeler/index.js","./src/app/Modeler/modeler/change-icon/replace.js","./src/app/Modeler/modeler/change-icon/replaceMenuProvider.js","./src/app/Modeler/modeler/change-icon/replaceOptions.js","./src/app/Modeler/modeler/context-pad/domainStoryContextPadProvider.js","./src/app/Modeler/modeler/domainStoryElementFactory.js","./src/app/Modeler/modeler/domainStoryIdFactory.js","./src/app/Modeler/modeler/domainStoryRenderer.js","./src/app/Modeler/modeler/domainStoryRules.js","./src/app/Modeler/modeler/domainStoryUpdater.js","./src/app/Modeler/modeler/index.js","./src/app/Modeler/modeler/labeling/dsLabelEditingPreview.js","./src/app/Modeler/modeler/labeling/dsLabelEditingProvider.js","./src/app/Modeler/modeler/labeling/dsLabelUtil.js","./src/app/Modeler/modeler/labeling/index.js","./src/app/Modeler/modeler/labeling/position.js","./src/app/Modeler/modeler/modeling/dSModeling.js","./src/app/Modeler/modeler/modeling/index.js","./src/app/Modeler/modeler/numbering/numbering.js","./src/app/Modeler/modeler/palette/domainStoryPalette.js","./src/app/Modeler/modeler/updateHandler/activityUpdateHandlers.js","./src/app/Modeler/modeler/updateHandler/elementUpdateHandler.js","./src/app/Modeler/modeler/updateHandler/headlineAndDescriptionUpdateHandler.js","./src/app/Modeler/modeler/updateHandler/massRenameHandler.js","./src/app/Modeler/modeler/updateHandler/updateLabelHandler.js","./src/app/Modeler/modeler/util.js","./src/app/Service/Export/exportUtil.js","./src/app/Domain/Common/businessObject.ts","./src/app/Domain/Common/configuration.ts","./src/app/Domain/Common/constants.ts","./src/app/Domain/Common/dictionary/dictionary.ts","./src/app/Domain/Common/domainConfiguration.ts","./src/app/Domain/Common/elementTypes.ts","./src/app/Domain/Common/iconConfiguration.ts","./src/app/Domain/Dialog/activityDialogData.ts","./src/app/Domain/Dialog/exportDialogData.ts","./src/app/Domain/Dialog/infoDialogData.ts","./src/app/Domain/DomManipulation/replayConstants.ts","./src/app/Domain/Domain-Configuration/allIcons.ts","./src/app/Domain/Domain-Configuration/iconFilterEnum.ts","./src/app/Domain/Export/configAndDst.ts","./src/app/Domain/Export/exportConstants.ts","./src/app/Modules/autosave-settings.module.ts","./src/app/Modules/domain-story-modeler-module.module.ts","./src/app/Modules/settings.module.ts","./src/app/Presentation/Autosave/AutosaveOptions/autosave-options.component.ts","./src/app/Presentation/Autosave/AutosaveOptions/autosave-options.component.html","./src/app/Presentation/Autosave/AutosaveSettings/autosave-settings.component.ts","./src/app/Presentation/Autosave/AutosaveSettings/autosave-settings.component.html","./src/app/Presentation/Autosave/AutosavedDrafts/autosaved-drafts.component.ts","./src/app/Presentation/Autosave/AutosavedDrafts/autosaved-drafts.component.html","./src/app/Presentation/Canvas/modeler.component.ts","./src/app/Presentation/Canvas/modeler.component.html","./src/app/Presentation/Dialog/activity-dialog/activity-dialog.component.ts","./src/app/Presentation/Dialog/activity-dialog/activity-dialog.component.html","./src/app/Presentation/Dialog/export-dialog/export-dialog.component.ts","./src/app/Presentation/Dialog/export-dialog/export-dialog.component.html","./src/app/Presentation/Dialog/header-dialog/header-dialog.component.ts","./src/app/Presentation/Dialog/header-dialog/header-dialog.component.html","./src/app/Presentation/Dialog/info-dialog/info-dialog.component.ts","./src/app/Presentation/Dialog/info-dialog/info-dialog.component.html","./src/app/Presentation/Dialog/label-dictionary-dialog/label-dictionary-dialog.component.ts","./src/app/Presentation/Dialog/label-dictionary-dialog/label-dictionary-dialog.component.html","./src/app/Presentation/DomainConfiguration/details-list-item/details-list-item.component.ts","./src/app/Presentation/DomainConfiguration/details-list-item/details-list-item.component.html","./src/app/Presentation/DomainConfiguration/domain-configuration.component.ts","./src/app/Presentation/DomainConfiguration/domain-configuration.component.html","./src/app/Presentation/DomainConfiguration/domain-details/domain-details.component.html","./src/app/Presentation/DomainConfiguration/domain-details/domain-details.component.ts","./src/app/Presentation/DomainConfiguration/icon-list-item/icon-list-item.component.ts","./src/app/Presentation/DomainConfiguration/icon-list-item/icon-list-item.component.html","./src/app/Presentation/Header/header-buttons.component.ts","./src/app/Presentation/Header/header-buttons.component.html","./src/app/Presentation/Header/header.component.ts","./src/app/Presentation/Header/header.component.html","./src/app/Presentation/LabelDictionary/label-dictionary.component.ts","./src/app/Presentation/LabelDictionary/label-dictionary.component.html","./src/app/Presentation/Settings/General/general-settings.component.ts","./src/app/Presentation/Settings/General/general-settings.component.html","./src/app/Presentation/Settings/settings.component.ts","./src/app/Presentation/Settings/settings.component.html","./src/app/Service/Autosave/autosave-configuration.service.ts","./src/app/Service/Autosave/autosave.service.ts","./src/app/Service/BrowserStorage/storage.service.ts","./src/app/Service/CommandStack/command-stack.service.ts","./src/app/Service/Dialog/dialog.service.ts","./src/app/Service/DirtyFlag/dirty-flag.service.ts","./src/app/Service/DomManipulation/dom-manipulation.service.ts","./src/app/Service/DomainConfiguration/domain-configuration.service.ts","./src/app/Service/DomainConfiguration/domain-customization.service.ts","./src/app/Service/DomainConfiguration/icon-dictionary.service.ts","./src/app/Service/ElementRegistry/element-registry.service.ts","./src/app/Service/Export/export.service.ts","./src/app/Service/Export/html-presentation.service.ts","./src/app/Service/Export/png.service.ts","./src/app/Service/Export/svg.service.ts","./src/app/Service/Import/import-domain-story.service.ts","./src/app/Service/Import/import-repair.service.ts","./src/app/Service/LabelDictionary/label-dictionary.service.ts","./src/app/Service/LabelDictionary/mass-naming.service.ts","./src/app/Service/Modeler/initializer.service.ts","./src/app/Service/Modeler/modeler.service.ts","./src/app/Service/Renderer/renderer.service.ts","./src/app/Service/Replay/replay-state.service.ts","./src/app/Service/Replay/replay.service.ts","./src/app/Service/Replay/storyCreator/story-creator.service.ts","./src/app/Service/Settings/settings.service.ts","./src/app/Service/Title/title.service.ts","./src/app/Utils/mathExtensions.ts","./src/app/Utils/naming.ts","./src/app/Utils/sanitizer.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/material.module.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import Modeler from \"bpmn-js/lib/Modeler\";\nimport ResizeModule from \"diagram-js/lib/features/resize\";\nimport { assign, isArray } from \"min-dash\";\nimport inherits from \"inherits\";\n\nimport DomainStoryModule from \"./modeler\";\nimport LabelEditingModule from \"./modeler/labeling\";\nimport ModelingModule from \"./modeler/modeling\";\nimport { elementTypes } from \"../Domain/Common/elementTypes\";\n\nexport default function DomainStoryModeler(options) {\n  Modeler.call(this, options);\n\n  this._customElements = [];\n  this._groupElements = [];\n}\n\ninherits(DomainStoryModeler, Modeler);\n\nDomainStoryModeler.prototype._modules = [].concat(\n  DomainStoryModeler.prototype._modules,\n  [DomainStoryModule, LabelEditingModule, ModelingModule],\n  [ResizeModule]\n);\n\n/**\n * add a single custom element to the underlying diagram\n *\n * @param {Object} customElement\n */\nDomainStoryModeler.prototype._addCustomShape = function (customElement) {\n  let parentId = customElement.parent;\n  delete customElement.children;\n  delete customElement.parent;\n  this._customElements.push(customElement);\n\n  let canvas = this.get(\"canvas\"),\n    elementFactory = this.get(\"elementFactory\");\n\n  let customAttrs = assign({ businessObject: customElement }, customElement);\n  let customShape = elementFactory.create(\"shape\", customAttrs);\n\n  if (isGroup(customElement)) {\n    this._groupElements[customElement.id] = customShape;\n  }\n\n  if (parentId) {\n    let parentShape = this._groupElements[parentId];\n\n    if (isGroup(parentShape)) {\n      return canvas.addShape(customShape, parentShape, parentShape.id);\n    }\n  }\n  return canvas.addShape(customShape);\n};\n\nDomainStoryModeler.prototype._addCustomConnection = function (customElement) {\n  this._customElements.push(customElement);\n\n  let canvas = this.get(\"canvas\"),\n    elementFactory = this.get(\"elementFactory\"),\n    elementRegistry = this.get(\"elementRegistry\");\n\n  let customAttrs = assign({ businessObject: customElement }, customElement);\n\n  let connection = elementFactory.create(\n    \"connection\",\n    assign(customAttrs, {\n      source: elementRegistry.get(customElement.source),\n      target: elementRegistry.get(customElement.target),\n    }),\n    elementRegistry.get(customElement.source).parent\n  );\n\n  return canvas.addConnection(connection);\n};\n\n//** We import BusinessObjects, not the whole Canvas Object!!!!!!!!\nDomainStoryModeler.prototype.importCustomElements = function (elements) {\n  this.get(\"eventBus\").fire(\"diagram.clear\", {});\n  this._customElements = [];\n  this._groupElements = [];\n\n  this.addCustomElements(elements);\n};\n\n/**\n * add a number of custom elements and connections to the underlying diagram.\n *\n * @param {Array<Object>} customElements\n */\nDomainStoryModeler.prototype.addCustomElements = function (customElements) {\n  if (!isArray(customElements)) {\n    throw new Error(\"argument must be an array\");\n  }\n\n  let shapes = [],\n    connections = [],\n    groups = [];\n\n  customElements.forEach(function (customElement) {\n    if (isConnection(customElement)) {\n      connections.push(customElement);\n    } else if (isGroup(customElement)) {\n      groups.push(customElement);\n    } else {\n      shapes.push(customElement);\n    }\n  });\n\n  // add groups before shapes and shapes before connections so that connections\n  // can already rely on the shapes being part of the diagram\n  groups.forEach(this._addCustomShape, this);\n  shapes.forEach(this._addCustomShape, this);\n  connections.forEach(this._addCustomConnection, this);\n};\n\n/**\n * get custom elements with their current status.\n *\n * @return {Array<Object>} custom elements on the diagram\n */\nDomainStoryModeler.prototype.getCustomElements = function () {\n  return this._customElements;\n};\n\n// override standard function to prevent default elements on canvas\nDomainStoryModeler.prototype.createDiagram = function (done) {};\n\nfunction isConnection(element) {\n  return (\n    element.type === elementTypes.ACTIVITY ||\n    element.type === elementTypes.CONNECTION\n  );\n}\n\nfunction isGroup(element) {\n  return element && element.type === elementTypes.GROUP;\n}\n","\"use strict\";\n\nimport { assign } from \"min-dash\";\n\n/**\n * service that allow replacing of elements.\n */\nexport default function Replace(modeling) {\n  this._modeling = modeling;\n}\n\n/**\n * @param {Element} oldElement - element to be replaced\n * @param {Object}  newElementData - containing information about the new Element, for example height, width, type.\n * @param modeling\n */\nfunction replaceElement(oldElement, newElementData, modeling) {\n  // let modeling = this._modeling;\n\n  let newElement = setCenterOfElement(newElementData, oldElement, modeling);\n  let outgoingActivities = newElement.outgoing;\n  let incomingActivities = newElement.incoming;\n\n  outgoingActivities.forEach((element) => {\n    element.businessObject.source = newElement.id;\n  });\n\n  incomingActivities.forEach((element) => {\n    element.businessObject.target = newElement.id;\n  });\n\n  return newElement;\n}\n\nfunction setCenterOfElement(newElementData, oldElement, modeling) {\n  newElementData.x = Math.ceil(\n    oldElement.x + (newElementData.width || oldElement.width) / 2\n  );\n  newElementData.y = Math.ceil(\n    oldElement.y + (newElementData.height || oldElement.height) / 2\n  );\n\n  assign(newElementData, { name: oldElement.businessObject.name });\n\n  return modeling.replaceShape(oldElement, newElementData, {});\n}\n\nReplace.prototype.replaceElement = replaceElement;\n","\"use strict\";\n\nimport Replace from \"./replace\";\nimport * as replaceOptions from \"./replaceOptions\";\n\nimport { forEach } from \"min-dash\";\n\n/**\n * This module is an element agnostic replace menu provider for the popup menu.\n */\nexport default function ReplaceMenuProvider(modeling) {\n  this._dsReplace = new Replace(modeling);\n  this._modeling = modeling;\n}\n\nReplaceMenuProvider.$inject = [\"modeling\"];\n\n/**\n * Get all entries from replaceOptions for the given element and apply filters\n * on them. Get for example only elements, which are different from the current one.\n *\n * @param {djs.model.Base} element\n *\n * @return {Array<Object>} a list of menu entry items\n */\nReplaceMenuProvider.prototype.getEntries = function (element) {\n  let entries;\n  if (element.type.includes(\"actor\")) {\n    entries = replaceOptions.actorReplaceOptions(element.type);\n  } else if (element.type.includes(\"workObject\")) {\n    entries = replaceOptions.workObjectReplaceOptions(element.type);\n  }\n\n  return this._createEntries(element, entries);\n};\n\n/**\n * Creates an array of menu entry objects for a given element and filters the replaceOptions\n * according to a filter function.\n *\n * @param  {djs.model.Base} element\n * @param  {Object} replaceOptions\n *\n * @return {Array<Object>} a list of menu items\n */\nReplaceMenuProvider.prototype._createEntries = function (\n  element,\n  replaceOptions\n) {\n  let menuEntries = [];\n\n  let self = this;\n\n  forEach(replaceOptions, function (definition) {\n    let entry = self._createMenuEntry(definition, element);\n\n    menuEntries.push(entry);\n  });\n\n  return menuEntries;\n};\n\n/**\n * Creates and returns a single menu entry item.\n *\n * @param  {Object} definition a single replace options definition object\n * @param  {djs.model.Base} element\n * @param  {Function} [action] an action callback function which gets called when\n *                             the menu entry is being triggered.\n *\n * @return {Object} menu entry item\n */\nReplaceMenuProvider.prototype._createMenuEntry = function (\n  definition,\n  element,\n  action\n) {\n  let replaceElement = this._dsReplace.replaceElement;\n  let modeling = this._modeling;\n  let replaceAction = function () {\n    return replaceElement(element, definition.target, modeling);\n  };\n\n  action = action || replaceAction;\n\n  return {\n    label: definition.label,\n    className: definition.className,\n    id: definition.actionName,\n    action: action,\n  };\n};\n","import { elementTypes } from \"src/app/Domain/Common/elementTypes\";\nimport { getNameFromType } from \"src/app/Utils/naming\";\n\nlet iconDictionaryService;\n\nexport function initializeReplaceOptions(iconDictionary) {\n  iconDictionaryService = iconDictionary;\n}\n\nexport function actorReplaceOptions(name) {\n  const actorTypes = iconDictionaryService.getTypeDictionary(\n    elementTypes.ACTOR\n  );\n\n  let replaceOption = {};\n  let i = 0;\n\n  actorTypes.keysArray().forEach((actorType) => {\n    if (!name.includes(actorType)) {\n      const typeName = getNameFromType(actorType);\n      replaceOption[i] = {\n        label: \"Change to \" + typeName,\n        actionName: \"replace-with-actor-\" + typeName.toLowerCase(),\n        className: iconDictionaryService.getIconForBPMN(actorType),\n        target: {\n          type: actorType,\n        },\n      };\n      i++;\n    }\n  });\n  return replaceOption;\n}\n\nexport function workObjectReplaceOptions(name) {\n  const workObjectTypes = iconDictionaryService.getTypeDictionary(\n    elementTypes.WORKOBJECT\n  );\n\n  let replaceOption = {};\n  let i = 0;\n\n  workObjectTypes.keysArray().forEach((workObjectType) => {\n    if (!name.includes(workObjectType)) {\n      const typeName = getNameFromType(workObjectType);\n      replaceOption[i] = {\n        label: \"Change to \" + typeName,\n        actionName: \"replace-with-actor-\" + typeName,\n        className: iconDictionaryService.getIconForBPMN(workObjectType),\n        target: {\n          type: workObjectType,\n        },\n      };\n    }\n    i++;\n  });\n  return replaceOption;\n}\n","\"use strict\";\n\nimport inherits from \"inherits\";\n\nimport ContextPadProvider from \"bpmn-js/lib/features/context-pad/ContextPadProvider\";\n\nimport { assign, bind } from \"min-dash\";\nimport { generateAutomaticNumber } from \"../numbering/numbering\";\nimport { elementTypes } from \"src/app/Domain/Common/elementTypes\";\nimport { getAllStandardIconKeys } from \"src/app/Domain/Domain-Configuration/allIcons\";\nimport { getNameFromType } from \"src/app/Utils/naming\";\n\nlet dirtyFlagService;\nlet iconDictionaryService;\n\nexport function initializeContextPadProvider(dirtyFlag, iconDictionary) {\n  dirtyFlagService = dirtyFlag;\n  iconDictionaryService = iconDictionary;\n}\n\nexport default function DomainStoryContextPadProvider(\n  injector,\n  connect,\n  translate,\n  elementFactory,\n  create,\n  canvas,\n  contextPad,\n  popupMenu,\n  replaceMenuProvider,\n  commandStack,\n  eventBus,\n  modeling\n) {\n  let startConnect;\n  let selectedElement;\n\n  injector.invoke(ContextPadProvider, this);\n  let autoPlace = injector.get(\"autoPlace\", false);\n\n  let cached = bind(this.getContextPadEntries, this);\n\n  const colorPicker = document.getElementById(\"colorPicker\");\n  colorPicker.onchange = (ev) => {\n    const context = {\n      businessObject: selectedElement.businessObject,\n      newColor: ev.target.value,\n      element: selectedElement,\n    };\n\n    commandStack.execute(\"element.colorChange\", context);\n    dirtyFlagService.makeDirty();\n  };\n\n  popupMenu.registerProvider(\"ds-replace\", replaceMenuProvider);\n  popupMenu.registerProvider(\"bpmn-replace\", replaceMenuProvider);\n\n  this.getContextPadEntries = function (element) {\n    const allStandardIconKeys = getAllStandardIconKeys();\n    let actions = cached(element);\n\n    startConnect = function (event, element, autoActivate) {\n      connect.start(event, element, autoActivate);\n    };\n\n    if (element.type.includes(elementTypes.WORKOBJECT)) {\n      if (\n        allStandardIconKeys.includes(\n          element.type.replace(elementTypes.WORKOBJECT, \"\")\n        )\n      ) {\n        addColorChange(actions);\n      }\n      addConnectWithActivity(actions, startConnect);\n      addTextAnnotation(actions);\n      addActors(appendAction, actions);\n      addWorkObjects(appendAction, actions);\n      addChangeWorkObjectTypeMenu(actions);\n    } else if (element.type.includes(elementTypes.ACTOR)) {\n      if (\n        allStandardIconKeys.includes(\n          element.type.replace(elementTypes.ACTOR, \"\")\n        )\n      ) {\n        addColorChange(actions);\n      }\n      addConnectWithActivity(actions, startConnect);\n      addTextAnnotation(actions);\n      addWorkObjects(appendAction, actions);\n      addChangeActorTypeMenu(actions);\n    } else if (element.type.includes(elementTypes.GROUP)) {\n      delete actions.delete;\n      addTextAnnotation(actions);\n      assign(actions, {\n        deleteGroup: {\n          group: \"edit\",\n          className: \"bpmn-icon-trash\",\n          title: \"Remove Group without Child-Elements\",\n          action: {\n            click: function (event, element) {\n              modeling.removeGroup(element);\n              dirtyFlagService.makeDirty();\n            },\n          },\n        },\n      });\n      addColorChange(actions);\n    } else if (element.type.includes(elementTypes.ACTIVITY)) {\n      moveDeleteActionToEndOfArray(actions);\n\n      addColorChange(actions);\n\n      assign(actions, {\n        delete: {\n          group: \"edit\",\n          className: \"bpmn-icon-trash\",\n          title: \"Remove\",\n          action: {\n            click: function (event, element) {\n              modeling.removeElements({ element });\n              dirtyFlagService.makeDirty();\n            },\n          },\n        },\n      });\n    }\n\n    return actions;\n  };\n\n  function moveDeleteActionToEndOfArray(actions) {\n    delete actions.delete;\n\n    assign(actions, {\n      changeDirection: {\n        group: \"edit\",\n        className: \"icon-domain-story-changeDirection\",\n        title: translate(\"Change direction\"),\n        action: {\n          // event needs to be addressed\n          click: function (event, element) {\n            changeDirection(element);\n          },\n        },\n      },\n    });\n  }\n\n  function addChangeActorTypeMenu(actions) {\n    assign(actions, {\n      replace: {\n        group: \"edit\",\n        className: \"bpmn-icon-screw-wrench\",\n        title: translate(\"Change type\"),\n        action: {\n          click: function (event, element) {\n            let position = assign(getReplaceMenuPosition(element), {\n              cursor: { x: event.x, y: event.y },\n            });\n            popupMenu.open(element, \"ds-replace\", position);\n          },\n        },\n      },\n    });\n  }\n\n  function addColorChange(actions) {\n    assign(actions, {\n      colorChange: {\n        group: \"edit\",\n        className: \"icon-domain-story-color-picker\",\n        title: translate(\"Change color\"),\n        action: {\n          click: function (event, element) {\n            selectedElement = element;\n            colorPicker.click();\n          },\n        },\n      },\n    });\n  }\n\n  function addTextAnnotation(actions) {\n    assign(actions, {\n      \"append.text-annotation\": appendAction(\n        elementTypes.TEXTANNOTATION,\n        \"bpmn-icon-text-annotation\",\n        \"textannotation\",\n        \"connect\"\n      ),\n    });\n  }\n\n  function addConnectWithActivity(actions, startConnect) {\n    assign(actions, {\n      connect: {\n        group: \"connect\",\n        className: \"bpmn-icon-connection\",\n        title: translate(\"Connect with activity\"),\n        action: {\n          click: startConnect,\n          dragstart: startConnect,\n        },\n      },\n    });\n  }\n\n  function addWorkObjects(appendAction, actions) {\n    let workObjectTypes = iconDictionaryService.getTypeDictionary(\n      elementTypes.WORKOBJECT\n    );\n    workObjectTypes.keysArray().forEach((workObjectType) => {\n      let name = getNameFromType(workObjectType);\n      let icon = iconDictionaryService.getIconForBPMN(workObjectType);\n      let action = [];\n      action[\"append.workObject\" + name] = appendAction(\n        workObjectType,\n        icon,\n        name,\n        \"workObjects\"\n      );\n      assign(actions, action);\n    });\n  }\n\n  function addActors(appendAction, actions) {\n    let actorTypes = iconDictionaryService.getTypeDictionary(\n      elementTypes.ACTOR\n    );\n    actorTypes.keysArray().forEach((actorType) => {\n      let name = getNameFromType(actorType);\n      let icon = iconDictionaryService.getIconForBPMN(actorType);\n      let action = [];\n      action[\"append.actor\" + name] = appendAction(\n        actorType,\n        icon,\n        name,\n        \"actors\"\n      );\n      assign(actions, action);\n    });\n  }\n\n  function addChangeWorkObjectTypeMenu(actions) {\n    assign(actions, {\n      replace: {\n        group: \"edit\",\n        className: \"bpmn-icon-screw-wrench\",\n        title: translate(\"Change type\"),\n        action: {\n          click: function (event, element) {\n            let position = assign(getReplaceMenuPosition(element), {\n              cursor: { x: event.x, y: event.y },\n            });\n            popupMenu.open(element, \"ds-replace\", position);\n          },\n        },\n      },\n    });\n  }\n\n  function changeDirection(element) {\n    let context;\n    let businessObject = element.businessObject;\n    let newNumber;\n\n    if (element.source.type.includes(elementTypes.ACTOR)) {\n      newNumber = 0;\n    } else {\n      newNumber = generateAutomaticNumber(element, commandStack);\n    }\n    context = {\n      businessObject: businessObject,\n      newNumber: newNumber,\n      element: element,\n    };\n    commandStack.execute(\"activity.directionChange\", context);\n  }\n\n  function getReplaceMenuPosition(element) {\n    let Y_OFFSET = 5;\n\n    let diagramContainer = canvas.getContainer(),\n      pad = contextPad.getPad(element).html;\n\n    let diagramRect = diagramContainer.getBoundingClientRect(),\n      padRect = pad.getBoundingClientRect();\n\n    let top = padRect.top - diagramRect.top;\n    let left = padRect.left - diagramRect.left;\n\n    return {\n      x: left,\n      y: top + padRect.height + Y_OFFSET,\n    };\n  }\n\n  /**\n   * create an append action\n   *\n   * @param {String} type\n   * @param {String} className\n   * @param {String} [title]\n   * @param {String} group\n   * @param {Object} [options]\n   *\n   * @return {Object} descriptor\n   */\n  function appendAction(type, className, title, group, options) {\n    if (typeof title !== \"string\") {\n      options = title;\n      title = translate(\"{type}\", { type: type.replace(/^domainStory:/, \"\") });\n    }\n\n    function appendStart(event, element) {\n      let shape = elementFactory.createShape(assign({ type: type }, options));\n      let context = {\n        elements: [shape],\n        hints: {},\n        source: element,\n      };\n      create.start(event, shape, context);\n    }\n\n    return {\n      group: group,\n      className: className,\n      title: \"Append \" + title,\n      action: {\n        dragstart: startConnect,\n        click: appendStart,\n      },\n    };\n  }\n}\n\ninherits(DomainStoryContextPadProvider, ContextPadProvider);\n\nDomainStoryContextPadProvider.$inject = [\n  \"injector\",\n  \"connect\",\n  \"translate\",\n  \"elementFactory\",\n  \"create\",\n  \"canvas\",\n  \"contextPad\",\n  \"popupMenu\",\n  \"replaceMenuProvider\",\n  \"commandStack\",\n  \"eventBus\",\n  \"modeling\",\n];\n","\"use strict\";\n\nimport { assign } from \"min-dash\";\n\nimport inherits from \"inherits\";\n\nimport BpmnElementFactory from \"bpmn-js/lib/features/modeling/ElementFactory\";\n\nimport { DEFAULT_LABEL_SIZE } from \"bpmn-js/lib/util/LabelUtil\";\n\nimport DomainStoryIdFactory from \"./domainStoryIdFactory\";\n\n/**\n * A custom factory that knows how to create BPMN _and_ custom elements.\n */\nexport default function DomainStoryElementFactory(bpmnFactory, moddle) {\n  BpmnElementFactory.call(this, bpmnFactory, moddle);\n\n  let self = this;\n  let domainStoryIdFactory = new DomainStoryIdFactory();\n\n  /**\n   * create a diagram-js element with the given type (any of shape, connection, label).\n   *\n   * @param  {String} elementType\n   * @param  {Object} attrs\n   *\n   * @return {djs.model.Base}\n   */\n  this.create = function (elementType, attrs) {\n    let type = attrs.type;\n\n    if (elementType === \"label\") {\n      return self.baseCreate(\n        elementType,\n        assign({ type: \"label\" }, DEFAULT_LABEL_SIZE, attrs)\n      );\n    }\n\n    // add type to businessObject if custom\n    if (/^domainStory:/.test(type)) {\n      if (!attrs.businessObject) {\n        attrs.businessObject = {\n          type: type,\n          name: attrs.name ? attrs.name : \"\",\n        };\n      }\n\n      if (attrs.id) {\n        domainStoryIdFactory.registerId(attrs.id);\n      } else {\n        attrs.id = domainStoryIdFactory.getId(elementType);\n      }\n      assign(attrs.businessObject, {\n        id: attrs.id,\n      });\n\n      let id = attrs.id;\n      attrs.businessObject.get = function (key) {\n        if (key === \"id\") {\n          return id;\n        }\n      };\n      attrs.businessObject.set = function (key, value) {\n        if (key === \"id\") {\n          assign(attrs.businessObject, { id: value });\n        }\n      };\n\n      if (!attrs.businessObject.$type) {\n        assign(attrs.businessObject, { $type: \"Element\" });\n      }\n      assign(attrs.businessObject, { di: {} });\n      if (!attrs.businessObject.$descriptor) {\n        assign(attrs.businessObject, { $descriptor: {} });\n      }\n\n      // add width and height if shape\n      if (\n        (!/:activity$/.test(type) || !/:connection$/.test(type)) &&\n        !((/:group$/.test(type) && attrs.height) || attrs.width)\n      ) {\n        assign(attrs, self._getCustomElementSize(type));\n      }\n\n      if (!(\"$instanceOf\" in attrs.businessObject)) {\n        // ensure we can use ModelUtil#is for type checks\n        Object.defineProperty(attrs.businessObject, \"$instanceOf\", {\n          value: function (type) {\n            return this.type === type;\n          },\n        });\n      }\n\n      return self.baseCreate(elementType, attrs);\n    }\n\n    return self.createBpmnElement(elementType, attrs);\n  };\n}\n\ninherits(DomainStoryElementFactory, BpmnElementFactory);\n\nDomainStoryElementFactory.$inject = [\"bpmnFactory\", \"moddle\"];\n\n/**\n * returns the default size of custom shapes.\n *\n * the following example shows an interface on how\n * to setup the custom shape's dimensions.\n * *\n * @param {String} type\n *\n * @return {Dimensions} a {width, height} object representing the size of the element\n */\nDomainStoryElementFactory.prototype._getCustomElementSize = function (type) {\n  let shapes = {\n    __default: { width: 75, height: 75 },\n    \"domainStory:textAnnotation\": { width: 100, height: 30 },\n    \"domainStory:group\": { width: 525, height: 275 },\n  };\n\n  return shapes[type] || shapes.__default;\n};\n\nclass Dimensions {\n  width;\n  height;\n}\n","\"use strict\";\n\nlet idList = [];\n\nexport default function DomainStoryIdFactory() {}\n\nDomainStoryIdFactory.prototype.getId = function (type) {\n  return generateId(type);\n};\n\nDomainStoryIdFactory.prototype.registerId = function (id) {\n  idList.push(id);\n};\n\nfunction generateId(type) {\n  let idNumber = fourDigitsId();\n\n  let id = type + \"_\" + idSuffix(idNumber);\n\n  while (containsId(id)) {\n    idNumber++;\n\n    id = type + \"_\" + idSuffix(idNumber);\n  }\n\n  idList.push(id);\n  return id;\n}\n\nfunction idSuffix(idNumber) {\n  let id;\n  if (idNumber > 9999) {\n    id = 0;\n  } else if (idNumber < 10) {\n    id = \"000\" + idNumber;\n  } else if (idNumber < 100) {\n    id = \"00\" + idNumber;\n  } else if (idNumber < 1000) {\n    id = \"0\" + idNumber;\n  } else {\n    id = \"\" + idNumber;\n  }\n  return id;\n}\n\nfunction fourDigitsId() {\n  return Math.floor(Math.random() * 10000);\n}\n\nexport function containsId(id) {\n  let same = false;\n  idList.forEach((element) => {\n    if (id === element) {\n      same = true;\n    }\n  });\n  return same;\n}\n","\"use strict\";\n\nimport inherits from \"inherits\";\nimport BaseRenderer from \"diagram-js/lib/draw/BaseRenderer\";\nimport Ids from \"ids\";\nimport { getAnnotationBoxHeight } from \"./labeling/dsLabelEditingPreview\";\nimport { componentsToPath, createLine } from \"diagram-js/lib/util/RenderUtil\";\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  classes as svgClasses,\n  create as svgCreate,\n} from \"tiny-svg\";\nimport { query as domQuery } from \"min-dom\";\nimport { assign, isObject } from \"min-dash\";\nimport { getNumberStash } from \"./labeling/dsLabelEditingProvider\";\nimport {\n  addNumberToRegistry,\n  generateAutomaticNumber,\n  numberBoxDefinitions,\n} from \"./numbering/numbering\";\n\nimport { calculateTextWidth } from \"./labeling/dsLabelUtil\";\nimport { countLines, labelPosition } from \"./labeling/position\";\nimport { elementTypes } from \"src/app/Domain/Common/elementTypes\";\nimport { angleBetween } from \"../../Utils/mathExtensions\";\n\nlet RENDERER_IDS = new Ids();\nlet numbers = [];\nconst DEFAULT_COLOR = \"black\";\n\n/**\n * a renderer that knows how to render custom elements.\n */\nlet iconDictionary;\nlet elementRegistry;\nlet dirtyFlag;\n\nexport function initializeRenderer(\n  iconDictionaryService,\n  elementRegistryService,\n  dirtyFlagService\n) {\n  iconDictionary = iconDictionaryService;\n  elementRegistry = elementRegistryService;\n  dirtyFlag = dirtyFlagService;\n}\n\nexport default function DomainStoryRenderer(\n  eventBus,\n  styles,\n  canvas,\n  textRenderer,\n  pathMap,\n  commandStack\n) {\n  BaseRenderer.call(this, eventBus, 2000);\n\n  let rendererId = RENDERER_IDS.next();\n  let markers = {};\n  let computeStyle = styles.computeStyle;\n\n  // generate the automatic Number for an activity originating from an actor\n  function generateActivityNumber(parentGfx, element, box) {\n    // whenever we want to edit an activity, it gets redrawn as a new object\n    // and the custom information is lost,\n    // so we stash it before the editing occurs and set the value here\n\n    let numberStash = getNumberStash();\n    let semantic = element.businessObject;\n\n    if (numberStash.use) {\n      semantic.number = numberStash.number;\n    }\n\n    numbers[semantic.number] = true;\n\n    let newRenderedNumber = renderNumber(\n      parentGfx,\n      semantic.number,\n      numberStyle(box),\n      element.type\n    );\n    addNumberToRegistry(newRenderedNumber, semantic.number);\n  }\n\n  // style functions\n  function numberStyle(box) {\n    return {\n      box: box,\n      fitBox: true,\n      style: assign({}, textRenderer.getExternalStyle(), {\n        fill: \"black\",\n        position: \"absolute\",\n      }),\n    };\n  }\n\n  function backgroundBoxStyle(box) {\n    return {\n      box: box,\n      fitBox: true,\n      style: assign({}, textRenderer.getExternalStyle(), {\n        fill: \"black\",\n        fontSize: 50,\n        position: \"absolute\",\n        fontFamily: \"Courier New\",\n      }),\n    };\n  }\n\n  function backgroundDotStyle(box) {\n    return {\n      box: box,\n      fitBox: true,\n      style: assign({}, textRenderer.getExternalStyle(), {\n        fill: \"white\",\n        fontSize: 150,\n        position: \"absolute\",\n        fontFamily: \"Courier\",\n      }),\n    };\n  }\n\n  // render functions\n  // render label associated with actors and workobjects\n  function renderEmbeddedLabel(parentGfx, element, align, padding) {\n    let businessObject = element.businessObject;\n    return renderLabel(\n      parentGfx,\n      businessObject.name,\n      {\n        box: element,\n        align: align,\n        padding: padding ? padding : 0,\n        style: {\n          fill: \"#000000\",\n        },\n      },\n      element.type\n    );\n  }\n\n  // render label associated with activities\n  function renderExternalLabel(parentGfx, element) {\n    let semantic = element.businessObject;\n    let waypoints = element.waypoints;\n    let lines = countLines(semantic.name);\n\n    if (element.waypoints != null) {\n      let position = labelPosition(waypoints, lines);\n      let startPoint = element.waypoints[position.selected];\n      let endPoint = element.waypoints[position.selected + 1];\n      let angle = angleBetween(startPoint, endPoint);\n      let alignment = \"left\";\n      let boxWidth = 500;\n      let xStart = position.x;\n\n      // if the activity is horizontal, we want to center the label\n      if (angle === 0 || angle === 180) {\n        boxWidth = Math.abs(startPoint.x - endPoint.x);\n        alignment = \"center\";\n        xStart =\n          (startPoint.x + endPoint.x) / 2 - calculateTextWidth(semantic.name);\n      }\n\n      let box = {\n        textAlign: alignment,\n        width: boxWidth,\n        height: 30,\n        x: xStart,\n        y: position.y,\n      };\n\n      if (semantic.name && semantic.name.length) {\n        return renderLabel(\n          parentGfx,\n          semantic.name,\n          {\n            box: box,\n            fitBox: true,\n            style: assign({}, textRenderer.getExternalStyle(), {\n              fill: \"black\",\n              wordWrap: \"break-word\",\n              overflowWrap: \"break-word\",\n              hyphens: \"auto\",\n            }),\n          },\n          element.type\n        );\n      }\n    }\n  }\n\n  // render the number associated with an activity\n  function renderExternalNumber(parentGfx, element) {\n    if (element && element.source) {\n      let semantic = element.businessObject;\n\n      let box = numberBoxDefinitions(element);\n\n      if (\n        semantic.number == null &&\n        element.source.type &&\n        element.source.type.includes(elementTypes.ACTOR)\n      ) {\n        generateAutomaticNumber(element, commandStack);\n      }\n\n      // render the background for the number\n      if (semantic.number && element.source.type.includes(elementTypes.ACTOR)) {\n        generateActivityNumber(parentGfx, element, box);\n      } else {\n        semantic.number = null;\n      }\n    }\n  }\n\n  // render a number on the canvas\n  function renderNumber(parentGfx, number, options, type) {\n    if (number < 10) {\n      number = String(number);\n    }\n    number = String(number);\n    let text = textRenderer.createText(number || \"\", options);\n    let height = 0;\n\n    svgClasses(text).add(\"djs-labelNumber\");\n\n    setCoordinates(type, text, options, height, parentGfx);\n\n    svgAppend(parentGfx, text);\n\n    drawEllipse(parentGfx, options, number.length);\n\n    return text;\n  }\n\n  function drawEllipse(parentGfx, options, textLength) {\n    const ellipse = svgCreate(\"ellipse\");\n    svgAttr(ellipse, {\n      cx: options.box.x + 15 + textLength * 3,\n      cy: options.box.y - 4,\n      rx: \"20\",\n      ry: \"12\",\n      style: \"fill:transparent;stroke:black;stroke-width:1\",\n    });\n    svgAppend(parentGfx, ellipse);\n  }\n\n  // the coordinates of the activity label must be set directly and will not be taken from the box\n  function setCoordinates(type, text, options, height, parentGfx) {\n    if (/:activity$/.test(type)) {\n      text.innerHTML = manipulateInnerHTMLXLabel(\n        text.children,\n        options.box.x,\n        0\n      );\n      text.innerHTML = manipulateInnerHTMLYLabel(\n        text.children,\n        options.box.y,\n        0\n      );\n    } else if (/:actor/.test(type)) {\n      height = parentGfx.firstChild.attributes.height.nodeValue;\n      text.innerHTML = manipulateInnerHTMLYLabel(text.children, height, 0);\n    } else if (/:workObject/.test(type)) {\n      height = parentGfx.firstChild.attributes.height.nodeValue;\n      text.innerHTML = manipulateInnerHTMLYLabel(text.children, height, 26);\n    }\n  }\n\n  // render a label on the canvas\n  function renderLabel(parentGfx, label, options, type) {\n    let text = textRenderer.createText(label || \"\", options);\n    let height = 0;\n\n    svgClasses(text).add(\"djs-label\");\n    setCoordinates(type, text, options, height, parentGfx);\n\n    svgAppend(parentGfx, text);\n    return text;\n  }\n\n  // determine the Y-coordinate of the label / number to be rendered\n  function manipulateInnerHTMLYLabel(children, y, offset) {\n    if (children) {\n      let result = \"\";\n      for (let i = 0; i < children.length; i++) {\n        result += children[i].outerHTML.replace(\n          /y=\"-?\\d*.\\d*\"/,\n          'y=\"' + (Number(y) + offset + 14 * i) + '\"'\n        );\n      }\n      return result;\n    }\n  }\n\n  // determine the X-coordinate of the label / number to be rendered\n  function manipulateInnerHTMLXLabel(children, x, offset) {\n    if (children) {\n      let result = \"\";\n      for (let i = 0; i < children.length; i++) {\n        result += children[i].outerHTML.replace(\n          /x=\"-?\\d*.\\d*\"/,\n          'x=\"' + (Number(x) + offset + 14) + '\"'\n        );\n      }\n      return result;\n    }\n  }\n\n  // draw functions\n  this.drawGroup = function (parentGfx, element) {\n    if (!element.businessObject.pickedColor) {\n      element.businessObject.pickedColor = DEFAULT_COLOR;\n    }\n    let rect = drawRect(\n      parentGfx,\n      element.width,\n      element.height,\n      0,\n      assign(\n        {\n          fill: \"none\",\n          stroke: element.businessObject.pickedColor,\n        },\n        element.attrs\n      )\n    );\n    renderEmbeddedLabel(parentGfx, element, \"left-top\", 8);\n\n    return rect;\n  };\n\n  function useColorForElement(element, iconSRC) {\n    if (!element.businessObject.pickedColor) {\n      element.businessObject.pickedColor = DEFAULT_COLOR;\n    }\n    const match = iconSRC.match(/fill=\".*?\"/);\n    if (match && match.length > 1) {\n      return iconSRC.replace(\n        /fill=\".*?\"/,\n        'fill=\"' + element.businessObject.pickedColor + '\"'\n      );\n    } else {\n      const index = iconSRC.indexOf(\"<svg \") + 5;\n      return (\n        iconSRC.substring(0, index) +\n        ' fill=\" ' +\n        element.businessObject.pickedColor +\n        '\" ' +\n        iconSRC.substring(index)\n      );\n    }\n  }\n\n  function getIconSrc(iconSRC, element) {\n    if (iconSRC.startsWith(\"data\")) {\n      return (\n        '<svg viewBox=\"0 0 24 24\" width=\"48\" height=\"48\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">' +\n        '<image width=\"24\" height=\"24\" xlink:href=\"' +\n        iconSRC +\n        '\"/></svg>'\n      );\n    } else {\n      return useColorForElement(element, iconSRC);\n    }\n  }\n\n  this.drawActor = function (parent, element) {\n    let svgDynamicSizeAttributes = {\n        width: element.width,\n        height: element.height,\n      },\n      actor;\n    let iconSRC = iconDictionary.getTypeIconSRC(\n      elementTypes.ACTOR,\n      element.type\n    );\n    iconSRC = getIconSrc(iconSRC, element);\n    actor = svgCreate(iconSRC);\n\n    svgAttr(actor, svgDynamicSizeAttributes);\n    svgAppend(parent, actor);\n\n    renderEmbeddedLabel(parent, element, \"center\", -5);\n    return actor;\n  };\n\n  this.drawWorkObject = function (parent, element) {\n    let svgDynamicSizeAttributes = {\n        width: element.width * 0.65,\n        height: element.height * 0.65,\n        x: element.width / 2 - 25,\n        y: element.height / 2 - 25,\n      },\n      workObject;\n    let iconSRC = iconDictionary.getTypeIconSRC(\n      elementTypes.WORKOBJECT,\n      element.type\n    );\n    iconSRC = getIconSrc(iconSRC, element);\n    workObject = svgCreate(iconSRC);\n\n    svgAttr(workObject, svgDynamicSizeAttributes);\n    svgAppend(parent, workObject);\n    renderEmbeddedLabel(parent, element, \"center\", -5);\n\n    return workObject;\n  };\n\n  function useColorForActivity(element) {\n    if (!element.businessObject.pickedColor) {\n      element.businessObject.pickedColor = \"black\";\n    }\n    let attrs = \"\";\n    return computeStyle(attrs, {\n      stroke: element.businessObject.pickedColor,\n      fill: \"none\",\n      strokeWidth: 1.5,\n      strokeLinejoin: \"round\",\n      markerEnd: marker(\n        \"activity\",\n        \"black\",\n        element.businessObject.pickedColor\n      ),\n    });\n  }\n\n  this.drawActivity = function (p, element) {\n    adjustForTextOverlap(element);\n\n    if (element) {\n      let attrs = useColorForActivity(element);\n\n      let x = svgAppend(p, createLine(element.waypoints, attrs));\n      renderExternalLabel(p, element);\n      renderExternalNumber(p, element);\n\n      // just adjusting the start- and endpoint of the connection-element moves only the drawn connection,\n      // not the interactive line. This can be fixed by manually overriding the points of the interactive polyline\n      // in the HTMl with the points of the drawn one.\n      // this however does not adjust the surrounding box of the connection.\n      fixConnectionInHTML(p.parentElement);\n\n      return x;\n    }\n  };\n\n  function checkIfPointOverlapsText(point, source) {\n    if (point.y > source.y + 60) {\n      if (point.x > source.x + 3 && point.x < source.x + 72) {\n        let lineOffset = getLineOffset(source);\n        if (source.y + 75 + lineOffset > point.y) {\n          point.y += lineOffset;\n        }\n      }\n    }\n  }\n\n  function adjustForTextOverlap(element) {\n    let source = element.source;\n    let target = element.target;\n\n    let waypoints = element.waypoints;\n    let startPoint = waypoints[0];\n    let endPoint = waypoints[waypoints.length - 1];\n\n    if (startPoint && endPoint && source && target) {\n      checkIfPointOverlapsText(startPoint, source);\n      checkIfPointOverlapsText(endPoint, source);\n    }\n  }\n\n  function getLineOffset(element) {\n    let id = element.id;\n    let offset = 0;\n\n    let objects = document.getElementsByClassName(\"djs-element djs-shape\");\n    for (let i = 0; i < objects.length; i++) {\n      let data_id = objects.item(i).getAttribute(\"data-element-id\");\n      if (data_id === id) {\n        let object = objects.item(i);\n        let text = object.getElementsByTagName(\"text\")[0];\n        let tspans = text.getElementsByTagName(\"tspan\");\n        let tspan = tspans[tspans.length - 1];\n        offset = tspan.getAttribute(\"y\");\n      }\n    }\n    return offset - 70;\n  }\n\n  function fixConnectionInHTML(wantedConnection) {\n    if (wantedConnection) {\n      let polylines = wantedConnection.getElementsByTagName(\"polyline\");\n      if (polylines.length > 1) {\n        polylines[1].setAttribute(\n          \"points\",\n          polylines[0].getAttribute(\"points\")\n        );\n      }\n    }\n  }\n\n  this.drawDSConnection = function (p, element) {\n    let attrs = \"\";\n    attrs = computeStyle(attrs, {\n      stroke: \"#000000\",\n      strokeWidth: 1.5,\n      strokeLinejoin: \"round\",\n      strokeDasharray: \"5, 5\",\n    });\n\n    return svgAppend(p, createLine(element.waypoints, attrs));\n  };\n\n  this.drawAnnotation = function (parentGfx, element) {\n    let style = {\n      fill: \"none\",\n      stroke: \"none\",\n    };\n\n    let text = element.businessObject.text || \"\";\n    if (element.businessObject.text) {\n      let height = getAnnotationBoxHeight();\n\n      if (height === 0 && element.businessObject.number) {\n        height = element.businessObject.number;\n      }\n      assign(element, {\n        height: height,\n      });\n\n      // for some reason the keyword height is not exported, so we use another, which we know will be exported,\n      // to ensure persistent annotation heights between sessions\n      assign(element.businessObject, {\n        number: height,\n      });\n    }\n\n    let textElement = drawRect(\n      parentGfx,\n      element.width,\n      element.height,\n      0,\n      0,\n      style\n    );\n    let textPathData = pathMap.getScaledPath(\"TEXT_ANNOTATION\", {\n      xScaleFactor: 1,\n      yScaleFactor: 1,\n      containerWidth: element.width,\n      containerHeight: element.height,\n      position: {\n        mx: 0.0,\n        my: 0.0,\n      },\n    });\n\n    drawPath(parentGfx, textPathData, {\n      stroke: \"black\",\n    });\n\n    renderLabel(parentGfx, text, {\n      box: element,\n      align: \"left-top\",\n      padding: 5,\n      style: {\n        fill: \"black\",\n      },\n    });\n\n    return textElement;\n  };\n\n  // draw helper functions\n  function drawPath(parentGfx, d, attrs) {\n    attrs = computeStyle(attrs, [\"no-fill\"], {\n      strokeWidth: 2,\n      stroke: \"black\",\n    });\n\n    let path = svgCreate(\"path\");\n    svgAttr(path, { d: d });\n    svgAttr(path, attrs);\n\n    svgAppend(parentGfx, path);\n\n    return path;\n  }\n\n  function drawRect(parentGfx, width, height, r, offset, attrs) {\n    if (isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n    attrs = computeStyle(attrs, {\n      stroke: \"black\",\n      strokeWidth: 2,\n      fill: \"white\",\n    });\n\n    let rect = svgCreate(\"rect\");\n    svgAttr(rect, {\n      x: offset,\n      y: offset,\n      width: width - offset * 2,\n      height: height - offset * 2,\n      rx: r,\n      ry: r,\n    });\n\n    svgAttr(rect, attrs);\n    svgAppend(parentGfx, rect);\n\n    return rect;\n  }\n\n  // marker functions\n  function marker(type, fill, stroke) {\n    let id = type + \"-\" + fill + \"-\" + stroke + \"-\" + rendererId;\n\n    if (!markers[id]) {\n      createMarker(type, fill, stroke);\n    }\n    return \"url(#\" + id + \")\";\n  }\n\n  function createMarker(type, fill, stroke) {\n    let id = type + \"-\" + fill + \"-\" + stroke + \"-\" + rendererId;\n\n    if (type === \"activity\") {\n      let sequenceflowEnd = svgCreate(\"path\");\n      svgAttr(sequenceflowEnd, { d: \"M 1 5 L 11 10 L 1 15 Z\" });\n\n      addMarker(id, {\n        element: sequenceflowEnd,\n        ref: { x: 11, y: 10 },\n        scale: 0.5,\n        attrs: {\n          fill: stroke,\n          stroke: stroke,\n        },\n      });\n    }\n  }\n\n  function addMarker(id, options) {\n    let attrs = assign(\n      {\n        fill: \"black\",\n        strokeWidth: 1,\n        strokeLinecap: \"round\",\n        strokeDasharray: \"none\",\n      },\n      options.attrs\n    );\n\n    let ref = options.ref || { x: 0, y: 0 };\n    let scale = options.scale || 1;\n\n    // resetting stroke dash array\n    if (attrs.strokeDasharray === \"none\") {\n      attrs.strokeDasharray = [10000, 1];\n    }\n\n    let marker = svgCreate(\"marker\");\n\n    svgAttr(options.element, attrs);\n    svgAppend(marker, options.element);\n    svgAttr(marker, {\n      id: id,\n      viewBox: \"0 0 20 20\",\n      refX: ref.x,\n      refY: ref.y,\n      markerWidth: 20 * scale,\n      markerHeight: 20 * scale,\n      orient: \"auto\",\n    });\n\n    let defs = domQuery(\"defs\", canvas._svg);\n    if (!defs) {\n      defs = svgCreate(\"defs\");\n      svgAppend(canvas._svg, defs);\n    }\n    svgAppend(defs, marker);\n    markers[id] = marker;\n  }\n\n  // path functions\n  this.getWorkObjectPath = function (shape) {\n    let rectangle = getRectPath(shape);\n    return componentsToPath(rectangle);\n  };\n\n  this.getGroupPath = function (shape) {\n    let rectangle = getRectPath(shape);\n    return componentsToPath(rectangle);\n  };\n\n  this.getActivityPath = function (connection) {\n    let waypoints = connection.waypoints.map(function (p) {\n      return p.original || p;\n    });\n\n    let activityPath = [[\"M\", waypoints[0].x, waypoints[0].y]];\n\n    waypoints.forEach(function (waypoint, index) {\n      if (index !== 0) {\n        activityPath.push([\"L\", waypoint.x, waypoint.y]);\n      }\n    });\n    return componentsToPath(activityPath);\n  };\n\n  this.getActorPath = function (shape) {\n    let rectangle = getRectPath(shape);\n    return componentsToPath(rectangle);\n  };\n}\n\ninherits(DomainStoryRenderer, BaseRenderer);\n\nDomainStoryRenderer.$inject = [\n  \"eventBus\",\n  \"styles\",\n  \"canvas\",\n  \"textRenderer\",\n  \"pathMap\",\n  \"commandStack\",\n];\n\nDomainStoryRenderer.prototype.canRender = function (element) {\n  return /^domainStory:/.test(element.type);\n};\n\nDomainStoryRenderer.prototype.drawShape = function (p, element) {\n  // polyfill for tests\n  if (!String.prototype.startsWith) {\n    Object.defineProperty(String.prototype, \"startsWith\", {\n      value: function (search, pos) {\n        pos = !pos || pos < 0 ? 0 : +pos;\n        return this.substring(pos, pos + search.length) === search;\n      },\n    });\n  }\n\n  let type = element.type;\n  element.businessObject.type = type;\n\n  elementRegistry.correctInitialize();\n  dirtyFlag.makeDirty();\n\n  if (type.includes(elementTypes.ACTOR)) {\n    return this.drawActor(p, element);\n  } else if (type.includes(elementTypes.WORKOBJECT)) {\n    return this.drawWorkObject(p, element);\n  } else if (type.includes(elementTypes.TEXTANNOTATION)) {\n    return this.drawAnnotation(p, element);\n  } else if (type.includes(elementTypes.GROUP)) {\n    return this.drawGroup(p, element);\n  }\n};\n\nDomainStoryRenderer.prototype.getShapePath = function (shape) {\n  let type = shape.type;\n\n  if (type.includes(elementTypes.ACTOR)) {\n    return this.getActorPath(shape);\n  } else if (type.includes(elementTypes.WORKOBJECT)) {\n    return this.getWorkObjectPath(shape);\n  } else if (type.includes(elementTypes.GROUP)) {\n    return this.getGroupPath(shape);\n  }\n};\n\nDomainStoryRenderer.prototype.drawConnection = function (p, element) {\n  let type = element.type;\n\n  dirtyFlag.makeDirty();\n\n  // fixes activities that were copy-pasted\n  if (!element.businessObject.type) {\n    element.businessObject.type = type;\n  }\n  if (type === elementTypes.ACTIVITY) {\n    return this.drawActivity(p, element);\n  } else if (type === elementTypes.CONNECTION) {\n    return this.drawDSConnection(p, element);\n  }\n};\n\n// creates a SVG path that describes a rectangle which encloses the given shape.\nfunction getRectPath(shape) {\n  let offset = 5;\n  let x = shape.x,\n    y = shape.y,\n    width = shape.width / 2 + offset,\n    height = shape.height / 2 + offset;\n\n  return [\n    [\"M\", x, y],\n    [\"l\", width, 0],\n    [\"l\", width, height],\n    [\"l\", -width, height],\n    [\"l\", -width, 0],\n    [\"z\"],\n  ];\n}\n","\"use strict\";\n\nimport { assign, every, reduce } from \"min-dash\";\n\nimport inherits from \"inherits\";\n\nimport RuleProvider from \"diagram-js/lib/features/rules/RuleProvider\";\nimport { elementTypes } from \"src/app/Domain/Common/elementTypes\";\nimport { is } from \"./util\";\n\nconst HIGH_PRIORITY = 1500;\nconst MIN_SIZE = 125;\n\nfunction isDomainStory(element) {\n  return element && /^domainStory:/.test(element.type);\n}\n\nfunction isDomainStoryGroup(element) {\n  return element && /^domainStory:group/.test(element.type);\n}\n\nfunction isActor(element) {\n  return element && /^domainStory:actor\\w*/.test(element.type);\n}\n\nfunction isWorkObject(element) {\n  return element && /^domainStory:workObject/.test(element.type);\n}\n\nfunction isActivity(element) {\n  return element && /^domainStory:activity/.test(element.type);\n}\n\nfunction isConnection(element) {\n  return element && /^domainStory:connection/.test(element.type);\n}\n\nfunction isAnnotation(element) {\n  return element && /^domainStory:textAnnotation/.test(element.type);\n}\n\n/**\n * can source and target be connected?\n */\nfunction canConnect(source, target) {\n  // only judge about two custom elements\n  if (\n    isDomainStoryGroup(target) ||\n    !isDomainStory(source) ||\n    !isDomainStory(target)\n  ) {\n    return;\n  }\n\n  // do not allow a connection from one element to itself\n  if (source === target) {\n    return;\n  }\n\n  // do not allow a connection between two actors\n  if (isActor(source) && isActor(target)) {\n    return;\n  }\n\n  // do not allow a connection, where the source or target is an activity\n  if (isActivity(source) || isActivity(target)) {\n    return;\n  }\n\n  // do not allow a connection, where the source or target is an annotation connection\n  if (isConnection(source) || isConnection(target)) {\n    return;\n  }\n\n  // do not allow a connection to a connection(the special type of connection between an element and a comment box)\n  // when the target is an annotation, the connection type is an annotation connection instead of an activity\n  if (isAnnotation(target)) {\n    return { type: elementTypes.CONNECTION };\n  }\n\n  return { type: elementTypes.ACTIVITY };\n}\n\nfunction canResize(shape, newBounds) {\n  if (is(shape, elementTypes.GROUP)) {\n    if (newBounds) {\n      let lowerLeft = { x: shape.x, y: shape.y + shape.height };\n      let lowerRight = { x: shape.x + shape.width, y: shape.y + shape.height };\n      let upperRight = { x: shape.x + shape.width, y: shape.y };\n\n      if (newBounds.x !== shape.x && newBounds.y !== shape.y) {\n        // upper left\n        if (newBounds.x > lowerRight.x - MIN_SIZE) {\n          assign(newBounds, { x: lowerRight.x - MIN_SIZE });\n        }\n        if (newBounds.y > lowerRight.y - MIN_SIZE) {\n          assign(newBounds, { y: lowerRight.y - MIN_SIZE });\n        }\n      }\n\n      if (newBounds.x !== shape.x && newBounds.y === shape.y) {\n        // lower left\n        if (newBounds.x > upperRight.x - MIN_SIZE) {\n          assign(newBounds, { x: upperRight.x - MIN_SIZE });\n        }\n      }\n\n      if (newBounds.x === shape.x && newBounds.y !== shape.y) {\n        // upper right\n        if (newBounds.y > lowerLeft.y - MIN_SIZE) {\n          assign(newBounds, { y: lowerLeft.y - MIN_SIZE });\n        }\n      }\n\n      if (newBounds.height < MIN_SIZE) {\n        assign(newBounds, {\n          height: MIN_SIZE,\n        });\n      }\n      if (newBounds.width < MIN_SIZE) {\n        assign(newBounds, {\n          width: MIN_SIZE,\n        });\n      }\n    }\n    return true;\n  }\n\n  return false;\n}\n\nfunction canAttach(elements, target, source) {\n  if (!Array.isArray(elements)) {\n    elements = [elements];\n  }\n\n  // disallow appending as boundary event\n  if (source) {\n    return false;\n  }\n\n  // only (re-)attach one element at a time\n  if (elements.length !== 1) {\n    return false;\n  }\n\n  // allow default move operation\n  if (!target) {\n    return true;\n  }\n\n  // only allow drop on DomainStory Elements\n  if (!isDomainStory(target)) {\n    return false;\n  }\n\n  return \"attach\";\n}\n\nfunction canConnectToAnnotation(source, target, connection) {\n  // do not allow an activity connect to an annotation\n  if (isActivity(connection) && isAnnotation(target)) {\n    return false;\n  }\n\n  // do not allow an annotation connection between two annotations\n  if (\n    isConnection(connection) &&\n    isAnnotation(source) &&\n    isAnnotation(target)\n  ) {\n    return false;\n  }\n\n  // do not allow an annotation connection between an actor or workObject and anything except an annotation\n  return !(\n    isConnection(connection) &&\n    !isAnnotation(target) &&\n    (isActor(source) || isWorkObject(source))\n  );\n}\n\n/**\n * specific rules for custom elements\n */\nexport default function DomainStoryRules(eventBus) {\n  RuleProvider.call(this, eventBus);\n}\n\ninherits(DomainStoryRules, RuleProvider);\n\nDomainStoryRules.$inject = [\"eventBus\"];\n\nDomainStoryRules.prototype.init = function () {\n  /**\n   * can shape be created on target container?\n   */\n  function canCreate(shape, target) {\n    // only judge about custom elements\n    if (!isDomainStory(shape)) {\n      return;\n    }\n\n    // allow creation just on groups\n    return !isDomainStory(target) || isDomainStoryGroup(target);\n  }\n\n  this.addRule(\"elements.create\", function (context) {\n    const elements = context.elements,\n      position = context.position,\n      target = context.target;\n\n    return every(elements, function (element) {\n      if (isConnection(element)) {\n        return canConnect(element.source, element.target, element);\n      }\n\n      if (element.host) {\n        return canAttach(element, element.host, null, position);\n      }\n\n      return canCreate(element, target, null, position);\n    });\n  });\n\n  this.addRule(\"elements.move\", HIGH_PRIORITY, function (context) {\n    let target = context.target,\n      shapes = context.shapes;\n\n    let type;\n\n    // do not allow mixed movements of custom / BPMN shapes\n    // if any shape cannot be moved, the group cannot be moved, too\n\n    // reject, if we have at least one\n    // custom element that cannot be moved\n    return reduce(\n      shapes,\n      function (result, s) {\n        if (type === undefined) {\n          type = isDomainStory(s);\n        }\n\n        if (type !== isDomainStory(s) || result === false) {\n          return false;\n        }\n\n        return canCreate(s, target);\n      },\n      undefined\n    );\n  });\n\n  this.addRule(\"shape.create\", HIGH_PRIORITY, function (context) {\n    let target = context.target,\n      shape = context.shape;\n\n    return canCreate(shape, target);\n  });\n\n  this.addRule(\"connection.create\", HIGH_PRIORITY, function (context) {\n    let source = context.source,\n      target = context.target;\n\n    return canConnect(source, target);\n  });\n\n  this.addRule(\"connection.reconnect\", HIGH_PRIORITY, function (context) {\n    let connection = context.connection,\n      source = context.hover || context.source,\n      target = context.target;\n\n    // --------------------------------------------------------------\n    let result = canConnectToAnnotation(source, target, connection);\n\n    if (!result) {\n      return;\n    }\n\n    // --------------------------------------------------------------\n\n    return canConnect(source, target, connection);\n  });\n\n  this.addRule(\"shape.resize\", function (context) {\n    let shape = context.shape,\n      newBounds = context.newBounds;\n\n    return canResize(shape, newBounds);\n  });\n};\n\nDomainStoryRules.prototype.canConnect = canConnect;\nDomainStoryRules.prototype.canAttach = canAttach;\nDomainStoryRules.prototype.isDomainStory = isDomainStory;\nDomainStoryRules.prototype.canResize = canResize;\n","\"use strict\";\n\nimport inherits from \"inherits\";\n\nimport { pick, assign } from \"min-dash\";\n\nimport CommandInterceptor from \"diagram-js/lib/command/CommandInterceptor\";\n\nimport {\n  add as collectionAdd,\n  remove as collectionRemove,\n} from \"diagram-js/lib/util/Collections\";\n\nimport { reworkGroupElements } from \"./util\";\nimport { elementTypes } from \"../../Domain/Common/elementTypes\";\n\n/**\n * a handler responsible for updating the custom element's businessObject\n * once changes on the diagram happen.\n */\nexport default function DomainStoryUpdater(eventBus, bpmnjs) {\n  CommandInterceptor.call(this, eventBus);\n\n  function updateCustomElement(e) {\n    let context = e.context,\n      shape = context.shape,\n      businessObject = shape.businessObject;\n\n    if (!shape || !shape.type.includes(elementTypes.DOMAINSTORY)) {\n      return;\n    }\n\n    let parent = shape.parent;\n    let customElements = bpmnjs._customElements;\n\n    // make sure element is added / removed from bpmnjs.customElements\n    if (!parent) {\n      collectionRemove(customElements, businessObject);\n    } else {\n      collectionAdd(customElements, businessObject);\n    }\n\n    // save custom element position\n    assign(businessObject, pick(shape, [\"x\", \"y\"]));\n\n    // save custom element size if resizable\n    if (shape.type === elementTypes.GROUP) {\n      assign(businessObject, pick(shape, [\"height\", \"width\"]));\n\n      // rework the child-parent relations if a group was moved, such that all Objects that are visually in the group are also associated with it\n      // since we do not have access to the standard-canvas object here, we cannot use the function correctGroupChildren() from DSLabelUtil\n      if (parent != null) {\n        reworkGroupElements(parent, shape);\n      }\n    }\n    if (\n      shape &&\n      shape.parent &&\n      \"type\" in shape.parent &&\n      shape.parent.type === elementTypes.GROUP\n    ) {\n      assign(businessObject, {\n        parent: shape.parent.id,\n      });\n    }\n  }\n\n  function updateCustomConnection(e) {\n    let context = e.context,\n      connection = context.connection,\n      source = connection.source,\n      target = connection.target,\n      businessObject = connection.businessObject;\n\n    if (e.newTarget) {\n      target = e.newTarget;\n    }\n    if (e.newSource) {\n      source = e.newSource;\n    }\n\n    let parent = connection.parent;\n    let customElements = bpmnjs._customElements;\n\n    // make sure element is added / removed from bpmnjs.customElements\n    if (!parent) {\n      collectionRemove(customElements, businessObject);\n    } else {\n      collectionAdd(customElements, businessObject);\n    }\n\n    // update waypoints\n    assign(businessObject, {\n      waypoints: copyWaypoints(connection),\n    });\n\n    if (source) {\n      if (!businessObject.source) {\n        assign(businessObject, { source: source.id });\n      } else {\n        businessObject.source = source.id;\n      }\n    }\n    if (target) {\n      if (!businessObject.target) {\n        assign(businessObject, { target: target.id });\n      } else {\n        businessObject.target = target.id;\n      }\n    }\n  }\n\n  function copyWaypoints(connection) {\n    return connection.waypoints.map(function (p) {\n      if (p.original) {\n        return {\n          original: {\n            x: p.original.x,\n            y: p.original.y,\n          },\n          x: p.x,\n          y: p.y,\n        };\n      } else {\n        return {\n          x: p.x,\n          y: p.y,\n        };\n      }\n    });\n  }\n\n  this.executed(\n    [\n      \"shape.create\",\n      \"shape.move\",\n      \"shape.delete\",\n      \"shape.resize\",\n      \"shape.removeGroupWithChildren\",\n    ],\n    ifDomainStoryElement(updateCustomElement)\n  );\n\n  this.reverted(\n    [\n      \"shape.create\",\n      \"shape.move\",\n      \"shape.delete\",\n      \"shape.resize\",\n      \"shape.removeGroupWithChildren\",\n    ],\n    ifDomainStoryElement(updateCustomElement)\n  );\n\n  this.executed(\n    [\n      \"connection.create\",\n      \"connection.reconnect\",\n      \"connection.updateWaypoints\",\n      \"connection.delete\",\n      \"connection.layout\",\n      \"connection.move\",\n    ],\n    ifDomainStoryElement(updateCustomConnection)\n  );\n\n  this.reverted(\n    [\n      \"connection.create\",\n      \"connection.reconnect\",\n      \"connection.updateWaypoints\",\n      \"connection.delete\",\n      \"connection.layout\",\n      \"connection.move\",\n    ],\n    ifDomainStoryElement(updateCustomConnection)\n  );\n}\n\n// check if element in the context of an event is a domainStory element\nfunction ifDomainStoryElement(fn) {\n  return (event) => {\n    const context = event.context;\n    const element = context.shape || context.connection;\n\n    if (isDomainStory(element)) {\n      fn(event);\n    }\n  };\n}\n\nfunction isDomainStory(element) {\n  return element && /domainStory:/.test(element.type);\n}\n\ninherits(DomainStoryUpdater, CommandInterceptor);\n\nDomainStoryUpdater.$inject = [\"eventBus\", \"bpmnjs\"];\n","\"use strict\";\n\nimport DomainStoryElementFactory from \"./domainStoryElementFactory\";\nimport DomainStoryRenderer from \"./domainStoryRenderer\";\nimport DomainStoryPalette from \"./palette/domainStoryPalette\";\nimport DomainStoryRules from \"./domainStoryRules\";\nimport DomainStoryUpdater from \"./domainStoryUpdater\";\nimport ElementFactory from \"bpmn-js/lib/features/modeling/ElementFactory\";\nimport CreateModule from \"diagram-js/lib/features/create\";\nimport PathMap from \"bpmn-js/lib/draw/PathMap\";\nimport PopupMenuModule from \"bpmn-js/lib/features/popup-menu\";\nimport ContextPadModule from \"diagram-js/lib/features/context-pad\";\nimport CommandStack from \"diagram-js/lib/command/CommandStack\";\nimport UpdateLabelHandler from \"./updateHandler/updateLabelHandler\";\nimport headlineAndDescriptionUpdateHandler from \"./updateHandler/headlineAndDescriptionUpdateHandler\";\nimport DomainStoryContextPadProvider from \"./context-pad/domainStoryContextPadProvider\";\nimport ReplaceMenuProvider from \"./change-icon/replaceMenuProvider\";\nimport DSModeling from \"./modeling/dSModeling\";\n\nexport default {\n  __depends__: [CreateModule, ContextPadModule, PopupMenuModule],\n  __init__: [\n    \"domainStoryRenderer\",\n    \"paletteProvider\",\n    \"domainStoryRules\",\n    \"domainStoryUpdater\",\n    \"contextPadProvider\",\n    \"replaceMenuProvider\",\n  ],\n  elementFactory: [\"type\", DomainStoryElementFactory],\n  domainStoryRenderer: [\"type\", DomainStoryRenderer],\n  paletteProvider: [\"type\", DomainStoryPalette],\n  domainStoryRules: [\"type\", DomainStoryRules],\n  domainStoryUpdater: [\"type\", DomainStoryUpdater],\n  contextPadProvider: [\"type\", DomainStoryContextPadProvider],\n  elementFactoryBpmn: [\"type\", ElementFactory],\n  pathMap: [\"type\", PathMap],\n  replaceMenuProvider: [\"type\", ReplaceMenuProvider],\n  commandStack: [\"type\", CommandStack],\n  updateLabelHandler: [\"type\", UpdateLabelHandler],\n  headlineAndDescriptionUpdateHandler: [\n    \"type\",\n    headlineAndDescriptionUpdateHandler,\n  ],\n  modeling: [\"type\", DSModeling],\n};\n","\"use strict\";\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  remove as svgRemove,\n} from \"tiny-svg\";\n\nimport { translate } from \"diagram-js/lib/util/SvgTransformUtil\";\nimport { elementTypes } from \"../../../Domain/Common/elementTypes\";\nimport { is } from \"../util\";\n\nconst MARKER_HIDDEN = \"djs-element-hidden\",\n  MARKER_LABEL_HIDDEN = \"djs-label-hidden\";\n\nlet annotationBoxHeight = 0;\n\nexport function getAnnotationBoxHeight() {\n  return annotationBoxHeight;\n}\n\nexport default function DSLabelEditingPreview(eventBus, canvas, pathMap) {\n  let self = this;\n\n  let defaultLayer = canvas.getDefaultLayer();\n  let element, absoluteElementBBox, gfx;\n\n  eventBus.on(\"directEditing.activate\", function (context) {\n    let activeProvider = context.active;\n\n    element = activeProvider.element.label || activeProvider.element;\n\n    // text annotation\n    if (is(element, elementTypes.TEXTANNOTATION)) {\n      absoluteElementBBox = canvas.getAbsoluteBBox(element);\n\n      gfx = svgCreate(\"g\");\n\n      annotationBoxHeight = element.height;\n\n      let textPathData = pathMap.getScaledPath(\"TEXT_ANNOTATION\", {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.0,\n          my: 0.0,\n        },\n      });\n\n      let path = (self.path = svgCreate(\"path\"));\n\n      svgAttr(path, {\n        d: textPathData,\n        strokeWidth: 2,\n        stroke: getStrokeColor(element),\n      });\n\n      svgAppend(gfx, path);\n\n      svgAppend(defaultLayer, gfx);\n\n      translate(gfx, element.x, element.y);\n    }\n\n    if (is(element, elementTypes.TEXTANNOTATION) || element.labelTarget) {\n      canvas.addMarker(element, MARKER_HIDDEN);\n    } else if (\n      element.type.includes(elementTypes.ACTOR) ||\n      element.type.includes(elementTypes.WORKOBJECT) ||\n      element.type.includes(elementTypes.ACTIVITY) ||\n      element.type.includes(elementTypes.GROUP)\n    ) {\n      canvas.addMarker(element, MARKER_LABEL_HIDDEN);\n    }\n  });\n\n  eventBus.on(\"directEditing.resize\", function (context) {\n    // text annotation\n    if (is(element, elementTypes.TEXTANNOTATION)) {\n      let height = context.height,\n        dy = context.dy;\n\n      let newElementHeight = Math.max(\n        (element.height / absoluteElementBBox.height) * (height + dy),\n        0\n      );\n      annotationBoxHeight = newElementHeight;\n\n      let textPathData = pathMap.getScaledPath(\"TEXT_ANNOTATION\", {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: newElementHeight,\n        position: {\n          mx: 0.0,\n          my: 0.0,\n        },\n      });\n\n      svgAttr(self.path, {\n        d: textPathData,\n      });\n    }\n  });\n\n  eventBus.on(\n    [\"directEditing.complete\", \"directEditing.cancel\"],\n    function (context) {\n      let activeProvider = context.active;\n\n      if (activeProvider) {\n        canvas.removeMarker(\n          activeProvider.element.label || activeProvider.element,\n          MARKER_HIDDEN\n        );\n        canvas.removeMarker(element, MARKER_LABEL_HIDDEN);\n      }\n\n      element = undefined;\n      absoluteElementBBox = undefined;\n\n      if (gfx) {\n        svgRemove(gfx);\n\n        gfx = undefined;\n      }\n    }\n  );\n}\n\nDSLabelEditingPreview.$inject = [\"eventBus\", \"canvas\", \"pathMap\"];\n\n// helpers ///////////////////\n\nfunction getStrokeColor() {\n  return \"black\";\n}\n","\"use strict\";\n\nimport { assign } from \"min-dash\";\n\nimport { autocomplete, getLabel } from \"./dsLabelUtil\";\n\nimport { isAny } from \"bpmn-js/lib/features/modeling/util/ModelingUtil\";\n\nimport {\n  getExternalLabelMid,\n  hasExternalLabel,\n  isLabel,\n  isLabelExternal,\n} from \"bpmn-js/lib/util/LabelUtil\";\n\nimport { elementTypes } from \"../../../Domain/Common/elementTypes\";\nimport { is } from \"../util\";\n\nlet dictionaryService;\n\nlet numberStash = 0;\nlet stashUse = false;\n\nexport function initializeLabelEditingProvider(labelingDictionary) {\n  dictionaryService = labelingDictionary;\n}\n\nexport function getNumberStash() {\n  let number = { use: stashUse, number: numberStash };\n  stashUse = false;\n  return number;\n}\n\nexport function toggleStashUse(use) {\n  stashUse = use;\n}\n\nexport function focusElement(element) {\n  // Opening a Angular Dialog seems to mess with the focus logic somehow.\n  // My guess is that is makes the mousedown event passive, which prevents \"preventDefault\" from intercepting.\n  // I am not sure how to fix it, but this seems to be a workaround.\n  setTimeout(() => element.focus(), 0);\n}\n\nexport default function DSLabelEditingProvider(\n  eventBus,\n  canvas,\n  directEditing,\n  modeling,\n  resizeHandles,\n  textRenderer,\n  updateLabelHandler\n) {\n  this._canvas = canvas;\n  this._modeling = modeling;\n  this._textRenderer = textRenderer;\n  this._updateLabelHandler = updateLabelHandler;\n\n  directEditing.registerProvider(this);\n\n  // listen to dblclick on non-root elements\n  eventBus.on(\"element.dblclick\", function (event) {\n    activateDirectEdit(event.element, true);\n    if (is(event.element, elementTypes.ACTIVITY)) {\n      // if we edit an activity, we do not want the standard editing box\n      numberStash = event.element.businessObject.number;\n      stashUse = true;\n      directEditing.complete();\n    }\n  });\n\n  // complete on followup canvas operation\n  eventBus.on(\n    [\n      \"element.mousedown\",\n      \"drag.init\",\n      \"canvas.viewbox.changing\",\n      \"autoPlace\",\n      \"popupMenu.open\",\n    ],\n    function () {\n      if (directEditing.isActive()) {\n        directEditing.complete();\n      }\n    }\n  );\n\n  // cancel on command stack changes\n  eventBus.on([\"commandStack.changed\"], function () {\n    if (directEditing.isActive()) {\n      directEditing.cancel();\n    }\n  });\n\n  eventBus.on(\"directEditing.activate\", function (event) {\n    resizeHandles.removeResizers();\n    let element = event.active.element;\n    createAutocomplete(element);\n  });\n\n  eventBus.on(\"create.end\", 500, function (event) {\n    let element = event.shape,\n      canExecute = event.context.canExecute,\n      isTouch = event.isTouch;\n\n    if (isTouch) {\n      return;\n    }\n\n    if (!canExecute) {\n      return;\n    }\n    if (!is(element, elementTypes.ACTIVITY)) {\n      activateDirectEdit(element);\n    }\n    let editingBox = document.getElementsByClassName(\n      \"djs-direct-editing-content\"\n    );\n    focusElement(editingBox.item(0));\n  });\n\n  eventBus.on(\"autoPlace.end\", 500, function (event) {\n    activateDirectEdit(event.shape);\n  });\n\n  function activateDirectEdit(element, force) {\n    if (\n      force ||\n      isAny(element, [elementTypes.TEXTANNOTATION]) ||\n      element.businessObject.type.includes(elementTypes.DOMAINSTORY)\n    ) {\n      directEditing.activate(element);\n    }\n  }\n\n  function createAutocomplete(element) {\n    let editingBox = document.getElementsByClassName(\n      \"djs-direct-editing-content\"\n    );\n    focusElement(editingBox.item(0));\n    autocomplete(\n      editingBox[0],\n      dictionaryService.getUniqueWorkObjectNames(),\n      element,\n      eventBus\n    );\n  }\n}\n\nDSLabelEditingProvider.$inject = [\n  \"eventBus\",\n  \"canvas\",\n  \"directEditing\",\n  \"modeling\",\n  \"resizeHandles\",\n  \"textRenderer\",\n  \"updateLabelHandler\",\n];\n\n/**\n * activate direct editing for activities and text annotations.\n *\n * @param  {djs.model.Base} element\n *\n * @return {Object} an object with properties bounds (position and size), text and options\n */\nDSLabelEditingProvider.prototype.activate = function (element) {\n  // text\n  if (element.id === \"__implicitrootbase\") {\n    return;\n  }\n  let text = getLabel(element);\n\n  if (text === undefined) {\n    return;\n  }\n\n  let context = {\n    text: text,\n  };\n\n  // bounds\n  let bounds = this.getEditingBBox(element);\n\n  assign(context, bounds);\n\n  let options = {};\n\n  // external labels\n  if (isLabelExternal(element)) {\n    assign(options, {\n      autoResize: true,\n    });\n  }\n\n  // text annotations\n  if (is(element, elementTypes.TEXTANNOTATION)) {\n    assign(options, {\n      resizable: true,\n      autoResize: true,\n    });\n  }\n\n  assign(context, {\n    options: options,\n  });\n\n  return context;\n};\n\n/**\n * get the editing bounding box based on the element's size and position\n *\n * @param  {djs.model.Base} element\n *\n * @return {Object} an object containing information about position\n *                  and size (fixed or minimum and/or maximum)\n */\nDSLabelEditingProvider.prototype.getEditingBBox = function (element) {\n  let canvas = this._canvas;\n\n  let target = element.label || element;\n\n  let bbox = canvas.getAbsoluteBBox(target);\n\n  let mid = {\n    x: bbox.x + bbox.width / 2,\n    y: bbox.y + bbox.height / 2,\n  };\n\n  // default position\n  let bounds = { x: bbox.x, y: bbox.y };\n\n  /** The cavnas is an Object from BPMN, the IDE might say, that zoom is deprecated,\n   * because it thinks canvas is the standard HTMLElement. -> Needs to stay toom **/\n  let zoom = canvas.zoom();\n  let defaultStyle = this._textRenderer.getDefaultStyle(),\n    externalStyle = this._textRenderer.getExternalStyle();\n\n  // take zoom into account\n  let externalFontSize = externalStyle.fontSize * zoom,\n    externalLineHeight = externalStyle.lineHeight,\n    defaultFontSize = defaultStyle.fontSize * zoom,\n    defaultLineHeight = defaultStyle.lineHeight;\n\n  let style = {\n    fontFamily: this._textRenderer.getDefaultStyle().fontFamily,\n    fontWeight: this._textRenderer.getDefaultStyle().fontWeight,\n  };\n\n  // adjust for groups\n  if (is(element, elementTypes.GROUP)) {\n    assign(bounds, {\n      minWidth: bbox.width / 2.5 > 125 ? bbox.width / 2.5 : 125,\n      maxWidth: bbox.width,\n      minHeight: 30 * zoom,\n      x: bbox.x,\n      y: bbox.y,\n    });\n\n    assign(style, {\n      fontSize: defaultFontSize + \"px\",\n      lineHeight: defaultLineHeight,\n      paddingTop: 7 * zoom + \"px\",\n      paddingBottom: 7 * zoom + \"px\",\n      paddingLeft: 5 * zoom + \"px\",\n      paddingRight: 5 * zoom + \"px\",\n      textAlign: \"left\",\n    });\n  }\n\n  // internal labels for tasks and collapsed call activities,\n  // sub processes and participants\n  if (\n    /^domainStory:actor\\w*/.test(element.type) ||\n    /^domainStory:workObject\\w*/.test(element.type)\n  ) {\n    assign(bounds, {\n      width: bbox.width,\n      minHeight: 30,\n      y: bbox.y + bbox.height - 20,\n      x: bbox.x,\n    });\n\n    assign(style, {\n      fontSize: defaultFontSize + \"px\",\n      lineHeight: defaultLineHeight,\n      paddingTop: 7 * zoom + \"px\",\n      paddingBottom: 7 * zoom + \"px\",\n      paddingLeft: 5 * zoom + \"px\",\n      paddingRight: 5 * zoom + \"px\",\n    });\n  }\n\n  let width = 90 * zoom,\n    paddingTop = 7 * zoom,\n    paddingBottom = 4 * zoom;\n\n  // external labels for events, data elements, gateways and connections\n  if (target.labelTarget) {\n    assign(bounds, {\n      width: width,\n      height: bbox.height + paddingTop + paddingBottom,\n      x: mid.x - width / 2,\n      y: bbox.y - paddingTop,\n    });\n\n    assign(style, {\n      fontSize: externalFontSize + \"px\",\n      lineHeight: externalLineHeight,\n      paddingTop: paddingTop + \"px\",\n      paddingBottom: paddingBottom + \"px\",\n    });\n  }\n\n  // external label not yet created\n  if (\n    isLabelExternal(target) &&\n    !hasExternalLabel(target) &&\n    !isLabel(target)\n  ) {\n    let externalLabelMid = getExternalLabelMid(element);\n\n    let absoluteBBox = canvas.getAbsoluteBBox({\n      x: externalLabelMid.x,\n      y: externalLabelMid.y,\n      width: 0,\n      height: 0,\n    });\n\n    let height = externalFontSize + paddingTop + paddingBottom;\n\n    assign(bounds, {\n      width: width,\n      height: height,\n      x: absoluteBBox.x - width / 2,\n      y: absoluteBBox.y - height / 2,\n    });\n\n    assign(style, {\n      fontSize: externalFontSize + \"px\",\n      lineHeight: externalLineHeight,\n      paddingTop: paddingTop + \"px\",\n      paddingBottom: paddingBottom + \"px\",\n    });\n  }\n\n  // text annotations\n  if (is(element, elementTypes.TEXTANNOTATION)) {\n    assign(bounds, {\n      width: bbox.width,\n      height: bbox.height,\n      minWidth: 30 * zoom,\n      minHeight: 10 * zoom,\n    });\n\n    assign(style, {\n      textAlign: \"left\",\n      paddingTop: 7 * zoom + \"px\",\n      paddingBottom: 7 * zoom + \"px\",\n      paddingLeft: 5 * zoom + \"px\",\n      paddingRight: 5 * zoom + \"px\",\n      fontSize: defaultFontSize + \"px\",\n      lineHeight: defaultLineHeight,\n    });\n  }\n\n  return { bounds: bounds, style: style };\n};\n\nDSLabelEditingProvider.prototype.update = function (\n  element,\n  newLabel,\n  activeContextText,\n  bounds\n) {\n  let newBounds, bbox;\n\n  if (is(element, elementTypes.TEXTANNOTATION)) {\n    bbox = this._canvas.getAbsoluteBBox(element);\n\n    newBounds = {\n      x: element.x,\n      y: element.y,\n      width: (element.width / bbox.width) * bounds.width,\n      height: (element.height / bbox.height) * bounds.height,\n    };\n  }\n\n  this._modeling.updateLabel(element, newLabel, newBounds);\n};\n","\"use strict\";\n\nimport { elementTypes } from \"src/app/Domain/Common/elementTypes\";\nimport { is } from \"../util\";\n\nfunction getLabelAttr(semantic) {\n  if (\n    semantic.type.includes(elementTypes.ACTOR) ||\n    semantic.type.includes(elementTypes.WORKOBJECT) ||\n    semantic.type.includes(elementTypes.ACTIVITY) ||\n    semantic.type.includes(elementTypes.GROUP)\n  ) {\n    return \"name\";\n  }\n\n  if (is(semantic, elementTypes.TEXTANNOTATION)) {\n    return \"text\";\n  }\n}\n\nfunction getNumberAttr(semantic) {\n  if (is(semantic, elementTypes.ACTIVITY)) {\n    return \"number\";\n  }\n}\n\nexport function getLabel(element) {\n  let semantic;\n  if (element.businessObject) {\n    semantic = element.businessObject;\n  } else {\n    semantic = element;\n  }\n  let attr = getLabelAttr(semantic);\n  if (attr && semantic) {\n    return semantic[attr] || \"\";\n  }\n}\n\nexport function getNumber(element) {\n  let semantic = element.businessObject,\n    attr = getNumberAttr(semantic);\n\n  if (attr) {\n    return semantic[attr] || \"\";\n  }\n}\n\nexport function setLabel(element, text) {\n  let semantic;\n  if (element.businessObject) {\n    semantic = element.businessObject;\n  } else {\n    semantic = element;\n  }\n  let attr = getLabelAttr(semantic);\n\n  if (attr) {\n    semantic[attr] = text;\n  }\n  return element;\n}\n\nexport function setNumber(element, textNumber) {\n  let semantic = element.businessObject,\n    attr = getNumberAttr(semantic);\n\n  if (attr) {\n    semantic[attr] = textNumber;\n  }\n\n  return element;\n}\n\n// select at which part of the activity the label should be attached to\nexport function selectPartOfActivity(waypoints, angleActivity) {\n  let selectedActivity = 0;\n  let linelength = 49;\n\n  for (let i = 0; i < waypoints.length; i++) {\n    if (angleActivity[i] === 0 || angleActivity[i] === 180) {\n      let length = Math.abs(waypoints[i].x - waypoints[i + 1].x);\n      if (length > linelength) {\n        selectedActivity = i;\n      }\n    }\n  }\n  return selectedActivity;\n}\n\n// approximate the width of the label text, standard fontsize: 11\nexport function calculateTextWidth(text) {\n  if (!text) {\n    return 0;\n  }\n\n  let fontsize = text.length * 5.1;\n  fontsize = fontsize / 2;\n\n  // add an initial offset to the absolute middle of the activity\n  fontsize += 20;\n  return fontsize;\n}\n\n/**\n * copied from https://www.w3schools.com/howto/howto_js_autocomplete.asp on 18.09.2018\n */\nexport function autocomplete(input, workObjectNames, element, eventBus) {\n  closeAllLists();\n\n  /* the autocomplete function takes three arguments,\n  the text field element and an array of possible autocompleted values and an optional element to which it is appended:*/\n  let currentFocus;\n\n  /* execute a function when someone writes in the text field:*/\n  input.addEventListener(\"input\", function () {\n    if (workObjectNames.length === 0) {\n      return;\n    }\n\n    /* the direct editing field of actors and workobjects is a recycled html-element and has old values that need to be overridden*/\n    if (element.type.includes(elementTypes.WORKOBJECT)) {\n      this.value = this.innerHTML;\n    }\n    let autocompleteList,\n      autocompleteItem,\n      val = this.value;\n\n    /* close any already open lists of autocompleted values*/\n    closeAllLists();\n    currentFocus = -1;\n\n    /* create a DIV element that will contain the items (values):*/\n    autocompleteList = document.createElement(\"DIV\");\n    autocompleteList.setAttribute(\"id\", \"autocomplete-list\");\n    autocompleteList.setAttribute(\"class\", \"autocomplete-items\");\n\n    /* append the DIV element as a child of the autocomplete container:*/\n    this.parentNode.appendChild(autocompleteList);\n\n    /* for each item in the array...*/\n    for (const name of workObjectNames) {\n      /* check if the item starts with the same letters as the text field value:*/\n      if (val) {\n        if (name.substring(0, val.length).toUpperCase() === val.toUpperCase()) {\n          /* create a DIV element for each matching element:*/\n          autocompleteItem = document.createElement(\"DIV\");\n\n          /* make the matching letters bold:*/\n          autocompleteItem.innerHTML =\n            \"<strong>\" +\n            name.substring(0, val.length) +\n            \"</strong>\" +\n            name.substring(val.length);\n\n          /* insert an input field that will hold the current name:*/\n          autocompleteItem.innerHTML +=\n            \"<input type='hidden' value='\" + name + \"'>\";\n          autocompleteList.appendChild(autocompleteItem);\n        }\n      }\n    }\n\n    // if we edit an actor, we do not want auto-complete, since actors generally are unique\n    if (element.type.includes(elementTypes.ACTOR)) {\n      autocompleteList.style.visibility = \"hidden\";\n    }\n  });\n\n  /* execute a function presses a key on the keyboard:*/\n  input.onkeydown = function (e) {\n    let autocompleteList = document.getElementById(\"autocomplete-list\");\n    if (autocompleteList) {\n      autocompleteList = autocompleteList.getElementsByTagName(\"div\");\n    }\n    if (e.keyCode === 40) {\n      /* If the arrow DOWN key is pressed,\n        increase the currentFocus letiable:*/\n      currentFocus++;\n\n      /* and and make the current item more visible:*/\n      addActive(autocompleteList);\n    } else if (e.keyCode === 38) {\n      // up\n      /* If the arrow UP key is pressed,\n        decrease the currentFocus letiable:*/\n      currentFocus--;\n\n      /* and and make the current item more visible:*/\n      addActive(autocompleteList);\n    } else if (e.keyCode === 13) {\n      e.preventDefault();\n      /* If the ENTER key is pressed, prevent the form from being submitted,*/\n      if (currentFocus > -1) {\n        element.businessObject.name = workObjectNames[currentFocus];\n        eventBus.fire(\"element.changed\", { element });\n      }\n    }\n  };\n\n  function addActive(autocompleteList) {\n    /* a function to classify an item as \"active\":*/\n    if (!autocompleteList || autocompleteList.length < 1) return false;\n\n    /* start by removing the \"active\" class on all items:*/\n    removeActive(autocompleteList);\n    if (currentFocus >= autocompleteList.length) currentFocus = 0;\n    if (currentFocus < 0) currentFocus = autocompleteList.length - 1;\n\n    /* add class \"autocomplete-active\":*/\n    autocompleteList[currentFocus].classList.add(\"autocomplete-active\");\n  }\n\n  function removeActive(autocompleteList) {\n    /* a function to remove the \"active\" class from all autocomplete items:*/\n    if (autocompleteList.length > 1) {\n      for (const item of autocompleteList) {\n        item.classList.remove(\"autocomplete-active\");\n      }\n    }\n  }\n\n  function closeAllLists(survivor) {\n    /* close all autocomplete lists in the document,\n    except the one passed as an argument:*/\n    let autocompleteList =\n      document.getElementsByClassName(\"autocomplete-items\");\n    for (const item of autocompleteList) {\n      if (survivor != item && survivor != input) {\n        item.parentNode.removeChild(item);\n      }\n    }\n  }\n\n  /* execute a function when someone clicks in the document:*/\n  document.addEventListener(\"click\", function (e) {\n    closeAllLists(e.target);\n  });\n}\n","\"use strict\";\n\nimport ChangeSupportModule from \"diagram-js/lib/features/change-support\";\nimport ResizeModule from \"diagram-js/lib/features/resize\";\nimport DirectEditingModule from \"diagram-js-direct-editing\";\n\nimport CommandStack from \"diagram-js/lib/command/CommandStack\";\nimport UpdateLabelHandler from \"../updateHandler/updateLabelHandler\";\nimport DSLabelEditingPreview from \"./dsLabelEditingPreview\";\nimport DSLabelEditingProvider from \"./dsLabelEditingProvider\";\nimport DSModeling from \"../modeling/dSModeling\";\n\nexport default {\n  __depends__: [ChangeSupportModule, ResizeModule, DirectEditingModule],\n  __init__: [\"dSlabelEditingProvider\", \"dSlabelEditingPreview\"],\n  dSlabelEditingProvider: [\"type\", DSLabelEditingProvider],\n  dSlabelEditingPreview: [\"type\", DSLabelEditingPreview],\n  updateLabelHandler: [\"type\", UpdateLabelHandler],\n  commandStack: [\"type\", CommandStack],\n  modeling: [\"type \", DSModeling],\n};\n","\"use strict\";\n\nimport { selectPartOfActivity } from \"./dsLabelUtil\";\nimport { angleBetween } from \"../../../Utils/mathExtensions\";\n\nexport function countLines(str) {\n  return str.split(/\\r\\n|\\r|\\n/).length;\n}\n\n// determine the position of the label at the activity\nexport function labelPosition(waypoints, lines = 1) {\n  let amountWaypoints = waypoints.length;\n  let determinedPosition;\n  let xPos;\n  let yPos;\n\n  if (amountWaypoints > 2) {\n    let angleActivity = new Array(amountWaypoints - 1);\n    for (let i = 0; i < amountWaypoints - 1; i++) {\n      // calculate the angles of the activities\n      angleActivity[i] = angleBetween(waypoints[i], waypoints[i + 1]);\n    }\n\n    let selectedActivity = selectPartOfActivity(waypoints, angleActivity);\n\n    xPos = labelPositionX(\n      waypoints[selectedActivity],\n      waypoints[selectedActivity + 1]\n    );\n    yPos = labelPositionY(\n      waypoints[selectedActivity],\n      waypoints[selectedActivity + 1],\n      lines\n    );\n\n    determinedPosition = {\n      x: xPos,\n      y: yPos,\n      selected: selectedActivity,\n    };\n\n    return determinedPosition;\n  } else {\n    xPos = labelPositionX(waypoints[0], waypoints[1]);\n    yPos = labelPositionY(waypoints[0], waypoints[1], lines);\n\n    determinedPosition = {\n      x: xPos,\n      y: yPos,\n      selected: 0,\n    };\n\n    return determinedPosition;\n  }\n}\n\n// calculate the X position of the label\nexport function labelPositionX(startPoint, endPoint) {\n  let angle = angleBetween(startPoint, endPoint);\n  let offsetX = 0;\n  let scaledAngle = 0;\n  if (angle === 0 || angle === 180 || angle === 90 || angle === 270) {\n    offsetX = 0;\n  } else if (angle > 0 && angle < 90) {\n    // endpoint in upper right quadrant\n    offsetX = 5 - angle / 6;\n  } else if (angle > 90 && angle < 180) {\n    // endpoint in upper left quadrant\n    scaledAngle = angle - 90;\n    offsetX = 5 - scaledAngle / 18;\n  } else if (angle > 180 && angle < 270) {\n    // endpoint in lower left quadrant\n    scaledAngle = angle - 180;\n    offsetX = scaledAngle / 18;\n  } else if (angle > 270) {\n    // endpoint in lower right quadrant\n    scaledAngle = angle - 270;\n    offsetX = 5 - scaledAngle / 6;\n  }\n  return offsetX + (startPoint.x + endPoint.x) / 2;\n}\n\n// calculate the Y position of the label\nexport function labelPositionY(startPoint, endPoint, lines = 1) {\n  let angle = angleBetween(startPoint, endPoint);\n  let offsetY = 0;\n  let scaledAngle = 0;\n\n  if (angle === 0 || angle === 180) {\n    offsetY = 15;\n  } else if (angle === 90 || angle === 270) {\n    offsetY = 0;\n  } else if (angle > 0 && angle < 90) {\n    // endpoint in upper right quadrant\n    offsetY = 15 - angle / 6;\n  } else if (angle > 90 && angle < 180) {\n    // endpoint in upper left quadrant\n    scaledAngle = angle - 90;\n    offsetY = (-scaledAngle / 9) * lines;\n  } else if (angle > 180 && angle < 270) {\n    // endpoint in lower left quadrant\n    scaledAngle = angle - 180;\n    offsetY = 15 - scaledAngle / 3;\n  } else if (angle > 270) {\n    // endpoint in lower right quadrant\n    scaledAngle = angle - 270;\n    offsetY = (-scaledAngle / 9) * lines;\n  }\n  return offsetY + (startPoint.y + endPoint.y) / 2;\n}\n","\"use strict\";\n\nimport Modeling from \"bpmn-js/lib/features/modeling/Modeling\";\n\nimport { inherits } from \"util\";\n\nexport default function DSModeling(\n  eventBus,\n  elementFactory,\n  commandStack,\n  domainStoryRules\n) {\n  Modeling.call(this, eventBus, elementFactory, commandStack, domainStoryRules);\n}\n\nModeling.prototype.updateLabel = function (element, newLabel, newBounds) {\n  if (\n    element.businessObject\n      ? newLabel !== element.businessObject.name\n      : newLabel !== element.name\n  ) {\n    if (/^domainStory:/.test(element.type)) {\n      this._commandStack.execute(\"element.updateCustomLabel\", {\n        element: element,\n        newLabel: newLabel,\n        newBounds: newBounds,\n      });\n    } else {\n      this._commandStack.execute(\"element.updateLabel\", {\n        element: element,\n        newLabel: newLabel,\n        newBounds: newBounds,\n      });\n    }\n  }\n};\n\nModeling.prototype.updateNumber = function (element, newNumber, newBounds) {\n  if (\n    element.businessObject\n      ? newNumber !== element.businessObject.number\n      : newNumber !== element.number\n  ) {\n    if (/^domainStory:/.test(element.type)) {\n      this._commandStack.execute(\"element.updateCustomLabel\", {\n        element: element,\n        newNumber: newNumber,\n        newBounds: newBounds,\n      });\n    } else {\n      this._commandStack.execute(\"element.updateLabel\", {\n        element: element,\n        newNumber: newNumber,\n        newBounds: newBounds,\n      });\n    }\n  }\n};\n\nModeling.prototype.replaceShape = function (oldShape, newShape, hints) {\n  let context = {\n    oldShape: oldShape,\n    newData: newShape,\n    hints: hints || {},\n  };\n\n  this._commandStack.execute(\"shape.replace\", context);\n  return context.newShape;\n};\n\nModeling.prototype.removeGroup = function (element) {\n  this._commandStack.execute(\"shape.removeGroupWithoutChildren\", {\n    element: element,\n  });\n  this.removeElements({ element });\n};\n\ninherits(DSModeling, Modeling);\n\nDSModeling.$inject = [\n  \"eventBus\",\n  \"elementFactory\",\n  \"commandStack\",\n  \"domainStoryRules\",\n];\n","\"use strict\";\n\nimport DomainStoryPalette from \"../palette/domainStoryPalette\";\nimport ElementFactory from \"bpmn-js/lib/features/modeling/ElementFactory\";\nimport CreateModule from \"diagram-js/lib/features/create\";\nimport PathMap from \"bpmn-js/lib/draw/PathMap\";\nimport PopupMenuModule from \"bpmn-js/lib/features/popup-menu\";\nimport ContextPadModule from \"diagram-js/lib/features/context-pad\";\nimport CommandStack from \"diagram-js/lib/command/CommandStack\";\nimport UpdateLabelHandler from \"../updateHandler/updateLabelHandler\";\nimport DomainStoryUpdater from \"../domainStoryUpdater\";\nimport DomainStoryElementFactory from \"../domainStoryElementFactory\";\nimport headlineAndDescriptionUpdateHandler from \"../updateHandler/headlineAndDescriptionUpdateHandler\";\nimport DomainStoryRenderer from \"../domainStoryRenderer\";\nimport DSModeling from \"./dSModeling\";\nimport DomainStoryRules from \"../domainStoryRules\";\nimport ReplaceMenuProvider from \"../change-icon/replaceMenuProvider\";\nimport DomainStoryContextPadProvider from \"../context-pad/domainStoryContextPadProvider\";\n\nexport default {\n  __depends__: [CreateModule, ContextPadModule, PopupMenuModule],\n  __init__: [\n    \"domainStoryRenderer\",\n    \"paletteProvider\",\n    \"domainStoryRules\",\n    \"domainStoryUpdater\",\n    \"contextPadProvider\",\n    \"replaceMenuProvider\",\n  ],\n  elementFactory: [\"type\", DomainStoryElementFactory],\n  domainStoryRenderer: [\"type\", DomainStoryRenderer],\n  paletteProvider: [\"type\", DomainStoryPalette],\n  domainStoryRules: [\"type\", DomainStoryRules],\n  domainStoryUpdater: [\"type\", DomainStoryUpdater],\n  contextPadProvider: [\"type\", DomainStoryContextPadProvider],\n  elementFactoryBpmn: [\"type\", ElementFactory],\n  pathMap: [\"type\", PathMap],\n  replaceMenuProvider: [\"type\", ReplaceMenuProvider],\n  commandStack: [\"type\", CommandStack],\n  updateLabelHandler: [\"type\", UpdateLabelHandler],\n  headlineAndDescriptionUpdateHandler: [\n    \"type\",\n    headlineAndDescriptionUpdateHandler,\n  ],\n  modeling: [\"type\", DSModeling],\n};\n","\"use strict\";\n\nimport { labelPosition } from \"../labeling/position\";\nimport { angleBetween } from \"../../../Utils/mathExtensions\";\n\nlet numberRegistry = [];\nlet multipleNumberRegistry = [false];\n\nlet canvasElementRegistry;\n\nexport function initializeNumbering(canvasElementRegistryService) {\n  canvasElementRegistry = canvasElementRegistryService;\n}\n\n// defines the box for activity numbers\nexport function numberBoxDefinitions(element) {\n  let alignment = \"center\";\n  let boxWidth = 30;\n  let boxHeight = 30;\n  let position = labelPosition(element.waypoints);\n  let angle = 0;\n  if (element.waypoints.length > 1) {\n    angle = angleBetween(element.waypoints[0], element.waypoints[1]);\n  }\n  let x = position.x;\n  let y = position.y;\n\n  // TODO: Use trigonometric functions to make the positioning more consistent.\n  // This would require to touch the label code as well.\n  if (angle >= 0 && angle <= 45) {\n    y = y - 30 + angle / 2;\n    x = x - 25 - angle / 2;\n  } else if (angle <= 90) {\n    y = y - 10 + (angle - 45) / 4.5;\n    x = x - 35 - angle / 9;\n  } else if (angle <= 145) {\n    y = y + angle / 7.25;\n    x = x - 45 - angle / 14.5;\n  } else if (angle < 180) {\n    y = y + 20 + angle / 9;\n    x = x - 50 + angle / 4.5;\n  } else if (angle <= 225) {\n    y = y - 45 + angle / 12.25;\n    x = x + 10 - angle / 6.125;\n  } else if (angle <= 270) {\n    y = y - 80 + angle / 3.375;\n    x = x - 5 - angle / 6.125;\n  } else if (angle <= 315) {\n    y = y - 135 + angle / 2;\n    x = x - 50;\n  } else {\n    y = y + 22.5 + (angle - 315) / 6;\n    x = x - 50 + (angle - 315) / 1.8;\n  }\n\n  return {\n    textAlign: alignment,\n    width: boxWidth,\n    height: boxHeight,\n    x: x,\n    y: y,\n  };\n}\n\n// determine the next available number that is not yet used\nexport function generateAutomaticNumber(elementActivity, commandStack) {\n  const semantic = elementActivity.businessObject;\n  const usedNumbers = [0];\n  let wantedNumber = -1;\n\n  const activitiesFromActors = canvasElementRegistry.getActivitiesFromActors();\n\n  activitiesFromActors.forEach((element) => {\n    if (element.businessObject.number) {\n      usedNumbers.push(+element.businessObject.number);\n    }\n  });\n  for (let i = 0; i < usedNumbers.length; i++) {\n    if (!usedNumbers.includes(i)) {\n      if (!usedNumbers.includes(i)) {\n        wantedNumber = i;\n        i = usedNumbers.length;\n      }\n    }\n  }\n  if (wantedNumber === -1) {\n    wantedNumber = usedNumbers.length;\n  }\n\n  updateExistingNumbersAtGeneration(\n    activitiesFromActors,\n    wantedNumber,\n    commandStack\n  );\n  semantic.number = wantedNumber;\n  return wantedNumber;\n}\n\n// update the numbers at the activities when generating a new activity\nexport function updateExistingNumbersAtGeneration(\n  activitiesFromActors,\n  wantedNumber,\n  commandStack\n) {\n  activitiesFromActors.forEach((element) => {\n    let number = +element.businessObject.number;\n\n    if (number >= wantedNumber) {\n      wantedNumber++;\n      setTimeout(function () {\n        commandStack.execute(\"activity.changed\", {\n          businessObject: element.businessObject,\n          newLabel: element.businessObject.name,\n          newNumber: number,\n          element: element,\n        });\n      }, 10);\n    }\n  });\n}\n\n// update the numbers at the activities when editing an activity\nexport function updateExistingNumbersAtEditing(\n  activitiesFromActors,\n  wantedNumber,\n  eventBus\n) {\n  // get a sorted list of all activities that could need changing\n  let sortedActivities = [[]];\n  activitiesFromActors.forEach((activity) => {\n    if (!sortedActivities[activity.businessObject.number]) {\n      sortedActivities[activity.businessObject.number] = [];\n    }\n    sortedActivities[activity.businessObject.number].push(activity);\n  });\n\n  // set the number of each activity to the next highest number, starting from the number, we overrode\n  let currentNumber = wantedNumber;\n  for (\n    currentNumber;\n    currentNumber < sortedActivities.length;\n    currentNumber++\n  ) {\n    if (sortedActivities[currentNumber]) {\n      wantedNumber++;\n      setNumberOfActivity(\n        sortedActivities[currentNumber],\n        wantedNumber,\n        eventBus\n      );\n    }\n  }\n}\n\n// get the IDs of activities with their associated number, only returns activities that are originating from an actor\nexport function getNumbersAndIDs() {\n  let iDWithNumber = [];\n  let activities = canvasElementRegistry.getActivitiesFromActors();\n\n  for (let i = activities.length - 1; i >= 0; i--) {\n    let id = activities[i].businessObject.id;\n    let number = activities[i].businessObject.number;\n    iDWithNumber.push({ id: id, number: number });\n  }\n  return iDWithNumber;\n}\n\nexport function addNumberToRegistry(renderedNumber, number) {\n  numberRegistry[number] = renderedNumber;\n}\n\nexport function setNumberIsMultiple(number, multi) {\n  multipleNumberRegistry[number] = multi;\n}\n\n/**\n * @returns copy of registry\n */\nexport function getNumberRegistry() {\n  return numberRegistry.slice(0);\n}\n\nexport function getMultipleNumberRegistry() {\n  return multipleNumberRegistry.slice(0);\n}\n\nfunction setNumberOfActivity(elementArray, wantedNumber, eventBus) {\n  if (elementArray) {\n    elementArray.forEach((element) => {\n      if (element) {\n        let businessObject = element.businessObject;\n        if (businessObject) {\n          businessObject.number = wantedNumber;\n        }\n        eventBus.fire(\"element.changed\", { element });\n      }\n    });\n  }\n}\n","\"use strict\";\n\nimport { assign } from \"min-dash\";\nimport { overrideAppendedIcons } from \"src/app/Domain/Domain-Configuration/allIcons\";\nimport { Dictionary } from \"src/app/Domain/Common/dictionary/dictionary\";\nimport { elementTypes } from \"src/app/Domain/Common/elementTypes\";\nimport { getNameFromType } from \"src/app/Utils/naming\";\nimport { APPENDED_ICONS_TAG } from \"../../../Domain/Common/constants\";\n\n/**\n * A palette that allows you to create BPMN _and_ custom elements.\n */\n\nlet iconDictionary;\nlet configuration;\n\nexport function initializePalette(iconDictionaryService, configurationService) {\n  iconDictionary = iconDictionaryService;\n  configuration = configurationService;\n}\n\nexport default function PaletteProvider(\n  palette,\n  create,\n  elementFactory,\n  spaceTool,\n  lassoTool\n) {\n  this._create = create;\n  this._elementFactory = elementFactory;\n  this._spaceTool = spaceTool;\n  this._lassoTool = lassoTool;\n\n  palette.registerProvider(this);\n}\n\nPaletteProvider.$inject = [\n  \"palette\",\n  \"create\",\n  \"elementFactory\",\n  \"spaceTool\",\n  \"lassoTool\",\n  \"modeling\",\n];\n\nPaletteProvider.prototype.getPaletteEntries = function () {\n  let actions = {},\n    create = this._create,\n    elementFactory = this._elementFactory,\n    spaceTool = this._spaceTool,\n    lassoTool = this._lassoTool;\n\n  function createAction(type, group, className, title, options) {\n    function createListener(event) {\n      let shape = elementFactory.createShape(assign({ type: type }, options));\n\n      assign(shape.businessObject, {\n        id: shape.id,\n      });\n\n      if (options) {\n        shape.businessObject.di.isExpanded = options.isExpanded;\n      }\n\n      create.start(event, shape);\n    }\n\n    let shortType = type.replace(/^domainStory:/, \"\");\n\n    return {\n      group: group,\n      className: className,\n      title: \"Create \" + title || \"Create \" + shortType,\n      action: {\n        dragstart: createListener,\n        click: createListener,\n      },\n    };\n  }\n\n  return initPalette(actions, spaceTool, lassoTool, createAction);\n};\n\nfunction appendCSSStyleCheat(customIcons) {\n  const sheetEl = document.createElement(\"style\");\n  document.head.appendChild(sheetEl);\n\n  let customIconDict = new Dictionary();\n\n  customIconDict.appendDict(customIcons);\n  let customIconDictKeys = customIconDict.keysArray();\n\n  customIconDictKeys.forEach((name) => {\n    if (iconDictionary.getAppendedIconDictionary().has(name)) {\n      let src = customIconDict.get(name);\n\n      const iconStyle =\n        \".icon-domain-story-\" +\n        name.toLowerCase() +\n        \"::before{\" +\n        \" display: block;\" +\n        ' content: url(\"data:image/svg+xml;utf8,' +\n        wrapSRCInSVG(src) +\n        '\");' +\n        \" margin: 3px;}\";\n      sheetEl.sheet.insertRule(iconStyle, sheetEl.sheet.cssRules.length);\n    }\n  });\n}\n\nfunction initPalette(actions, spaceTool, lassoTool, createAction) {\n  let config = iconDictionary?.getCurrentIconConfigurationForBPMN();\n\n  let customIcons = localStorage.getItem(APPENDED_ICONS_TAG);\n\n  if (customIcons) {\n    customIcons = JSON.parse(customIcons);\n    if (customIconsLegacy(customIcons)) {\n      customIcons = convertLegacyAppendedIconsToDict(customIcons);\n    }\n    if (customIcons.entries && customIcons.entries.forEach) {\n      const customIconsDict = new Dictionary();\n      customIcons.entries.forEach((entry) => {\n        customIconsDict.putEntry(entry);\n      });\n      overrideAppendedIcons(customIconsDict);\n      appendCSSStyleCheat(customIcons);\n    }\n  }\n\n  iconDictionary?.initTypeDictionaries(config.actors, config.workObjects);\n\n  let actorTypes = iconDictionary?.getTypeDictionary(elementTypes.ACTOR);\n\n  actorTypes?.keysArray().forEach((actorType) => {\n    addCanvasObjectTypes(actorType, createAction, actions, \"actor\");\n  });\n\n  assign(actions, {\n    \"actor-separator\": {\n      group: \"actor\",\n      separator: true,\n    },\n  });\n\n  let workObjectTypes = iconDictionary?.getTypeDictionary(\n    elementTypes.WORKOBJECT\n  );\n\n  workObjectTypes?.keysArray().forEach((workObjectType) => {\n    addCanvasObjectTypes(workObjectType, createAction, actions, \"actor\");\n  });\n\n  assign(actions, {\n    \"workObject-separator\": {\n      group: \"workObject\",\n      separator: true,\n    },\n    \"domainStory-group\": createAction(\n      elementTypes.GROUP,\n      \"group\",\n      \"icon-domain-story-tool-group\",\n      \"group\"\n    ),\n    \"group-separator\": {\n      group: \"group\",\n      separator: true,\n    },\n    \"lasso-tool\": {\n      group: \"tools\",\n      className: \"bpmn-icon-lasso-tool\",\n      title: \"Activate the lasso tool\",\n      action: {\n        click: function (event) {\n          lassoTool.activateSelection(event);\n        },\n      },\n    },\n    \"space-tool\": {\n      group: \"tools\",\n      className: \"bpmn-icon-space-tool\",\n      title: \"Activate the create/remove space tool\",\n      action: {\n        click: function (event) {\n          spaceTool.activateSelection(event);\n        },\n      },\n    },\n  });\n\n  return actions;\n}\n\nfunction addCanvasObjectTypes(actorType, createAction, actions, className) {\n  let name = getNameFromType(actorType);\n  let icon = iconDictionary.getIconForBPMN(actorType);\n\n  let action = [];\n  action[\"domainStory-\" + className + name] = createAction(\n    actorType,\n    className,\n    icon,\n    name\n  );\n  assign(actions, action);\n}\n\nfunction customIconsLegacy(customIcons) {\n  return !(\n    Object.keys(customIcons).length === 1 &&\n    Object.keys(customIcons)[0] === \"entries\"\n  );\n}\n\nfunction convertLegacyAppendedIconsToDict(customIcons) {\n  let dict = new Dictionary();\n  Object.keys(customIcons).forEach((key) => {\n    dict.set(key, customIcons[key]);\n  });\n  return dict;\n}\n\n// For some reason its important to use ' in the content for the Palette and ContextPad\n// Do not change!\nfunction wrapSRCInSVG(src) {\n  return (\n    \"<svg viewBox='0 0 22 22' width='22' height='22' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>\" +\n    \"<image width='22' height='22' xlink:href='\" +\n    src +\n    \"'/></svg>\"\n  );\n}\n","\"use strict\";\n\nimport { getNumbersAndIDs } from \"../numbering/numbering\";\n\n/**\n * commandStack Handler for changes at activities\n */\n\nlet canvasElementRegistry;\nexport function initializeActivityUpdateHandler(canvasElementRegistryService) {\n  canvasElementRegistry = canvasElementRegistryService;\n}\n\nexport default function activityUpdateHandler(commandStack, eventBus) {\n  commandStack.registerHandler(\n    \"activity.directionChange\",\n    activity_directionChange\n  );\n  commandStack.registerHandler(\"activity.changed\", activity_changed);\n\n  // update the activity from the activity-dialog, either with or without number\n  // and change other activities too, to keep the numbers consistent\n  function activity_changed(modeling) {\n    this.preExecute = function (context) {\n      context.oldLabel = context.businessObject.name || \" \";\n\n      let oldNumbersWithIDs = getNumbersAndIDs();\n      modeling.updateLabel(context.businessObject, context.newLabel);\n      modeling.updateNumber(context.businessObject, context.newNumber);\n\n      context.oldNumber = context.businessObject.number;\n      context.oldNumbersWithIDs = oldNumbersWithIDs;\n    };\n\n    this.execute = function (context) {\n      let businessObject = context.businessObject;\n      let element = context.element;\n\n      if (context.newLabel && context.newLabel.length < 1) {\n        context.newLabel = \" \";\n      }\n\n      businessObject.name = context.newLabel;\n      businessObject.number = context.newNumber;\n\n      eventBus.fire(\"element.changed\", { element });\n    };\n\n    this.revert = function (context) {\n      let semantic = context.businessObject;\n      let element = context.element;\n      semantic.name = context.oldLabel;\n      semantic.number = context.oldNumber;\n\n      revertAutomaticNumberGenerationChange(\n        context.oldNumbersWithIDs,\n        eventBus\n      );\n\n      eventBus.fire(\"element.changed\", { element });\n    };\n  }\n\n  // change the direction of a single activity without affecting other activities\n  function activity_directionChange(modeling) {\n    this.preExecute = function (context) {\n      context.oldNumber = context.businessObject.number;\n      context.oldWaypoints = context.element.waypoints;\n      context.name = context.businessObject.name;\n\n      if (!context.oldNumber) {\n        context.oldNumber = 0;\n      }\n      modeling.updateNumber(context.businessObject, context.newNumber);\n    };\n\n    this.execute = function (context) {\n      let businessObject = context.businessObject;\n      let element = context.element;\n      let swapSource = element.source;\n      let newWaypoints = [];\n      let waypoints = element.waypoints;\n\n      for (let i = waypoints.length - 1; i >= 0; i--) {\n        newWaypoints.push(waypoints[i]);\n      }\n\n      element.source = element.target;\n      businessObject.source = businessObject.target;\n      element.target = swapSource;\n      businessObject.target = swapSource.id;\n\n      businessObject.name = context.name;\n      businessObject.number = context.newNumber;\n      element.waypoints = newWaypoints;\n\n      eventBus.fire(\"element.changed\", { element });\n    };\n\n    this.revert = function (context) {\n      let semantic = context.businessObject;\n      let element = context.element;\n      let swapSource = element.source;\n\n      element.source = element.target;\n      semantic.source = semantic.target;\n      element.target = swapSource;\n      semantic.target = swapSource.id;\n\n      semantic.name = context.name;\n\n      semantic.number = context.oldNumber;\n      element.waypoints = context.oldWaypoints;\n\n      eventBus.fire(\"element.changed\", { element });\n    };\n  }\n}\n\n// reverts the automatic changed done by the automatic number-generation at editing\nfunction revertAutomaticNumberGenerationChange(iDWithNumber, eventBus) {\n  let activities = canvasElementRegistry?.getActivitesFromActors();\n  for (let i = activities.length - 1; i >= 0; i--) {\n    for (let j = iDWithNumber.length - 1; j >= 0; j--) {\n      if (iDWithNumber[j].id.includes(activities[i].businessObject.id)) {\n        let element = activities[i];\n        element.businessObject.number = iDWithNumber[j].number;\n        j = -5;\n        eventBus.fire(\"element.changed\", { element });\n        iDWithNumber.splice(j, 1);\n      }\n    }\n  }\n}\n","\"use strict\";\n\nimport { undoGroupRework } from \"../util\";\n\nexport default function elementUpdateHandler(commandStack, eventBus) {\n  commandStack.registerHandler(\"element.colorChange\", element_colorChange);\n  commandStack.registerHandler(\n    \"shape.removeGroupWithoutChildren\",\n    removeGroupWithoutChildren\n  );\n\n  function element_colorChange() {\n    this.preExecute = function (context) {\n      context.oldColor = context.businessObject.pickedColor;\n    };\n\n    this.execute = function (context) {\n      let semantic = context.businessObject;\n      let element = context.element;\n\n      semantic.pickedColor = context.newColor;\n\n      eventBus.fire(\"element.changed\", { element });\n    };\n\n    this.revert = function (context) {\n      let semantic = context.businessObject;\n      let element = context.element;\n\n      semantic.pickedColor = context.oldColor;\n\n      eventBus.fire(\"element.changed\", { element });\n    };\n  }\n\n  function removeGroupWithoutChildren() {\n    this.preExecute = function (ctx) {\n      ctx.parent = ctx.element.parent;\n      ctx.children = ctx.element.children.slice();\n    };\n\n    this.execute = function (ctx) {\n      let element = ctx.element;\n      ctx.children.forEach((child) => {\n        undoGroupRework(element, child);\n        eventBus.fire(\"element.changed\", { element: child });\n      });\n      eventBus.fire(\"shape.remove\", { element });\n    };\n\n    this.revert = function (ctx) {\n      let element = ctx.element;\n      eventBus.fire(\"shape.added\", { element });\n\n      ctx.element.children.forEach((child) => {\n        reworkGroupElements(element, child);\n      });\n    };\n  }\n}\n","/**\n * a handler that updates the text of a BPMN element.\n */\nexport default function headlineAndDescriptionUpdateHandler(\n  commandStack,\n  titleService\n) {\n  commandStack.registerHandler(\n    \"story.updateHeadlineAndDescription\",\n    handlerFunction\n  );\n\n  function handlerFunction() {\n    this.execute = function (ctx) {\n      ctx.oldTitle = titleService.getTitle();\n      ctx.oldDescription = titleService.getDescription();\n\n      titleService.updateTitleAndDescription(\n        ctx.newTitle,\n        ctx.newDescription,\n        false\n      );\n    };\n\n    this.revert = function (ctx) {\n      titleService.updateTitleAndDescription(\n        ctx.oldTitle,\n        ctx.oldDescription,\n        false\n      );\n    };\n  }\n}\n","\"use strict\";\n\nexport default function DSMassRenameHandler(commandStack, eventBus) {\n  commandStack.registerHandler(\"domainStoryObjects.massRename\", massRename);\n\n  function massRename(modeling) {\n    this.preExecute = function (context) {\n      let relevantElements = context.elements;\n\n      context.oldLabel = relevantElements[0].businessObject.name;\n\n      relevantElements.forEach((element) => {\n        modeling.updateLabel(element.businessObject, confirm.newValue);\n      });\n    };\n\n    this.execute = function (context) {\n      let relevantElements = context.elements;\n      relevantElements.forEach((element) => {\n        let semantic = element.businessObject;\n        semantic.name = context.newValue;\n\n        eventBus.fire(\"element.changed\", { element });\n      });\n    };\n\n    this.revert = function (context) {\n      let relevantElements = context.elements;\n      relevantElements.forEach((element) => {\n        let semantic = element.businessObject;\n        semantic.name = context.oldLabel;\n\n        eventBus.fire(\"element.changed\", { element });\n      });\n    };\n  }\n}\n","\"use strict\";\n\nimport {\n  setLabel,\n  getLabel,\n  setNumber,\n  getNumber,\n} from \"../labeling/dsLabelUtil\";\n\nimport {\n  getExternalLabelMid,\n  isLabelExternal,\n  hasExternalLabel,\n  isLabel,\n} from \"bpmn-js/lib/util/LabelUtil\";\n\nimport { elementTypes } from \"src/app/Domain/Common/elementTypes\";\nimport { getBusinessObject, is } from \"../util\";\n\nconst NULL_DIMENSIONS = {\n  width: 0,\n  height: 0,\n};\n\n/**\n * a handler that updates the text of a BPMN element.\n */\nexport default function UpdateLabelHandler(\n  modeling,\n  textRenderer,\n  commandStack\n) {\n  commandStack.registerHandler(\"element.updateCustomLabel\", handlerFunction);\n\n  function handlerFunction() {\n    /**\n     * Set the label and return the changed elements.\n     *\n     * Element parameter can be label itself or connection (i.e. sequence flow).\n     *\n     * @param {djs.model.Base} element\n     * @param {String} text\n     */\n\n    this.preExecute = function (ctx) {\n      let element = ctx.element,\n        businessObject = element.businessObject,\n        newLabel = ctx.newLabel,\n        newNumber = ctx.newNumber;\n\n      if (\n        !isLabel(element) &&\n        isLabelExternal(element) &&\n        !hasExternalLabel(element) &&\n        (newLabel !== \"\" || newNumber !== \"\")\n      ) {\n        // create label\n        let paddingTop = 7;\n\n        let labelCenter = getExternalLabelMid(element);\n\n        labelCenter = {\n          x: labelCenter.x,\n          y: labelCenter.y + paddingTop,\n        };\n\n        modeling.createLabel(element, labelCenter, {\n          id: businessObject.id + \"_label\",\n          businessObject: businessObject,\n        });\n      }\n    };\n\n    this.execute = function (ctx) {\n      ctx.oldLabel = getLabel(ctx.element);\n      ctx.oldNumber = getNumber(ctx.element);\n      return setText(ctx.element, ctx.newLabel, ctx.newNumber);\n    };\n\n    this.revert = function (ctx) {\n      return setText(ctx.element, ctx.oldLabel, ctx.oldNumber);\n    };\n\n    this.postExecute = function (ctx) {\n      let element = ctx.element,\n        label = element.label || element,\n        newLabel = ctx.newLabel,\n        newBounds = ctx.newBounds;\n\n      if (isLabel(label) && newLabel.trim() === \"\") {\n        modeling.removeShape(label);\n\n        return;\n      }\n\n      // ignore internal labels for elements except text annotations\n      if (\n        !isLabelExternal(element) &&\n        !is(element, elementTypes.TEXTANNOTATION)\n      ) {\n        return;\n      }\n\n      let bo = getBusinessObject(label);\n\n      let text = bo.name || bo.text;\n\n      // don't resize without text\n      if (!text) {\n        return;\n      }\n\n      // resize element based on label _or_ pre-defined bounds\n      if (typeof newBounds === \"undefined\") {\n        newBounds = textRenderer.getLayoutedBounds(label, text);\n      }\n\n      // setting newBounds to false or _null_ will\n      // disable the postExecute resize operation\n      if (newBounds) {\n        modeling.resizeShape(label, newBounds, NULL_DIMENSIONS);\n      }\n    };\n  }\n}\n\nfunction setText(element, text, textNumber) {\n  // external label if present\n  let label = element.label || element;\n\n  let number = element.number || element;\n\n  let labelTarget = element.labelTarget || element;\n\n  let numberTarget = element.numberTarget || element;\n  setLabel(label, text);\n  setNumber(number, textNumber);\n\n  return [label, labelTarget, number, numberTarget];\n}\n\nUpdateLabelHandler.$inject = [\"modeling\", \"textRenderer\", \"commandStack\"];\n","import { some } from \"min-dash\";\n\nexport function is(element, type) {\n  const bo = getBusinessObject(element);\n\n  return bo && typeof bo.$instanceOf == \"function\" && bo.$instanceOf(type);\n}\n\nexport function getBusinessObject(element) {\n  return (element && element.businessObject) || element;\n}\n\nexport function isAny(element, types) {\n  return some(types, function (t) {\n    return is(element, t);\n  });\n}\n\nexport function reworkGroupElements(parent, shape) {\n  parent.children.slice().forEach((innerShape) => {\n    if (innerShape.id !== shape.id) {\n      if (innerShape.x >= shape.x && innerShape.x <= shape.x + shape.width) {\n        if (innerShape.y >= shape.y && innerShape.y <= shape.y + shape.height) {\n          innerShape.parent = shape;\n          if (!shape.children.includes(innerShape)) {\n            shape.children.push(innerShape);\n          }\n        }\n      }\n    }\n  });\n}\n\nexport function undoGroupRework(parent, shape) {\n  const superParent = parent.parent;\n\n  parent.children.remove(shape);\n  superParent.children.add(shape);\n\n  shape.parent = superParent;\n\n  const svgShape = document.querySelector(\n    \"[data-element-id=\" + shape.id + \"]\"\n  ).parentElement;\n  const svgGroup = svgShape.parentElement;\n  const svgGroupParent = svgGroup.parentElement.parentElement;\n  svgGroup.removeChild(svgShape);\n  svgGroupParent.appendChild(svgShape);\n}\n","import {\n  SVG_LINK,\n  TEXTSPAN_DESCRIPTION_HEIGHT,\n  TEXTSPAN_TITLE_HEIGHT,\n  X_OFFSET_UTIL,\n} from \"../../Domain/Export/exportConstants\";\n\nlet extraHeight = 0;\n\n// Has to be js File so we can access te correct non-standard HTML-Properties without excessive usage of ts-ignore\nexport function createTitleAndDescriptionSVGElement(\n  title,\n  description,\n  xLeft,\n  yUp,\n  width\n) {\n  title = title.replace(\"&lt;\", \"\").replace(\"&gt;\", \"\");\n\n  let titleElement = createTitle(title, width);\n  let descriptionElement = createDescription(description, width);\n\n  // to display the title and description in the SVG-file, we need to add a container for our text-elements\n  let insertText =\n    '<g class=\"djs-group\"><g class=\"djs-element djs-shape\" style = \"display:block\" transform=\"translate(' +\n    (xLeft - 10) +\n    \" \" +\n    (yUp - extraHeight) +\n    ')\"><g class=\"djs-visual\">' +\n    titleElement +\n    descriptionElement +\n    \"</g></g></g>\";\n  return { insertText, extraHeight };\n}\n\nfunction createTitle(text, width) {\n  let tempCanvas = document.createElement(\"canvas\");\n  let ctx = tempCanvas.getContext(\"2d\");\n  ctx.font = \"30px Arial\";\n\n  return createTextSpans(text, width, ctx, 10, TEXTSPAN_TITLE_HEIGHT, 30);\n}\n\nfunction createDescription(text, width) {\n  let description = \"\";\n  let descriptionParts = text.split(\"<br>\");\n\n  let tempCanvas = document.createElement(\"canvas\");\n  let ctx = tempCanvas.getContext(\"2d\");\n  ctx.font = \"12px Arial\";\n\n  for (let i = 0; i < descriptionParts.length; i++) {\n    description += createTextSpans(\n      descriptionParts[i],\n      width,\n      ctx,\n      0,\n      TEXTSPAN_DESCRIPTION_HEIGHT,\n      12\n    );\n  }\n  return description;\n}\n\nfunction createTextSpans(text, width, ctx, yOffset, heightOffset, fontSize) {\n  let textSpans = \"\";\n  let words = text.split(\" \");\n\n  let textTag =\n    '<text lineHeight=\"1.2\" class=\"djs-label\" style=\"font-family: Arial, sans-serif; font-size: ' +\n    fontSize +\n    '; font-weight: normal; fill: rgb(0, 0, 0);\">';\n\n  let textSpan = document.createElementNS(SVG_LINK, \"tspan\");\n  let textNode = document.createTextNode(words[0]);\n\n  textSpan.setAttribute(\"x\", X_OFFSET_UTIL);\n  textSpan.setAttribute(\"y\", yOffset + extraHeight);\n  textSpan.setAttribute(\"font-size\", fontSize);\n  textSpan.appendChild(textNode);\n\n  for (let j = 1; j < words.length; j++) {\n    if (textSpan.firstChild && textSpan.firstChild.data) {\n      let len = textSpan.firstChild.data.length;\n      textNode.data += \" \" + words[j];\n\n      if (ctx.measureText(textNode.data).width > width - 16) {\n        extraHeight += heightOffset;\n        textSpan.firstChild.data = textSpan.firstChild.data.slice(0, len); // remove overflow word\n\n        textSpans += textTag + textSpan.outerHTML + \"</text>\"; // append line\n\n        // create new textspan for line break\n        textSpan = document.createElementNS(SVG_LINK, \"tspan\");\n        textNode = document.createTextNode(words[j]);\n        textSpan.setAttribute(\"x\", X_OFFSET_UTIL);\n        textSpan.setAttribute(\"y\", yOffset + extraHeight);\n        textSpan.appendChild(textNode);\n      }\n    }\n  }\n  extraHeight += heightOffset;\n\n  textSpans += textTag + textSpan.outerHTML + \"</text>\";\n  return textSpans;\n}\n","import { elementTypes } from './elementTypes';\n\nexport interface BusinessObject {\n  $descriptor: any;\n  $type: any;\n  di: any;\n  get: any;\n  set: any;\n\n  id: string;\n  name: string;\n\n  type: string;\n\n  x: number;\n  y: number;\n  height: number | undefined;\n  width: number | undefined;\n  pickedColor: string | undefined;\n}\n\nexport const testBusinessObject: BusinessObject = {\n  $descriptor: undefined,\n  $type: undefined,\n  di: undefined,\n  get: undefined,\n  set: undefined,\n\n  id: 'test',\n  name: 'test',\n\n  type: elementTypes.WORKOBJECT,\n\n  x: 0,\n  y: 0,\n  height: 38,\n  width: 38,\n  pickedColor: undefined,\n};\n","export class Configuration {\n  actors: string[];\n  workObjects: string[];\n\n  constructor(actors: string[], workObjects: string[]) {\n    this.actors = actors;\n    this.workObjects = workObjects;\n  }\n}\n","/** DEFAULT VALUES **/\nexport const INITIAL_TITLE = '< title >';\nexport const INITIAL_DESCRIPTION = '< description >';\nexport const INITIAL_DOMAIN_NAME = '[icons: default]';\n\n/** LocalStorageTags **/\nexport const APPENDED_ICONS_TAG = 'appendedIcons';\nexport const DOMAIN_CONFIGURATION_TAG = 'domainConfigurationTag';\n\n/** AUTOSAVE DEFAULTS **/\nexport const DEFAULT_AUTOSAVES_ENABLED = true;\nexport const DEFAULT_AUTOSAVES_AMOUNT = 5;\nexport const DEFAULT_AUTOSAVES_INTERVAL = 30;\n\n/** SNACKBAR **/\nexport const SNACKBAR_DURATION = 2000;\nexport const SNACKBAR_SUCCESS = 'snackbar_success';\nexport const SNACKBAR_ERROR = 'snackbar_error';\nexport const SNACKBAR_INFO = 'snackbar_info';\n\n/** BPMN_RELEVANT_CONSTANTS **/\nexport const IMPLICIT_ROOT_ID = '__implicitroot';\n","export class Dictionary {\n  private entries: Entry[];\n\n  constructor() {\n    this.entries = [];\n  }\n\n  get length(): number {\n    return this.entries.length;\n  }\n\n  all(): Entry[] {\n    return this.entries;\n  }\n\n  size(): number {\n    return this.entries.length;\n  }\n\n  isEmpty(): boolean {\n    return this.entries.length <= 0;\n  }\n\n  has(key: string): boolean {\n    return this.entries.some((entry) => entry.key === key);\n  }\n\n  set(key: string, value: any): void {\n    if (!this.has(key)) {\n      this.entries.push(new Entry(value, key));\n    }\n  }\n\n  add(value: any, key: string): void {\n    this.set(key, value);\n  }\n\n  putEntry(entry: Entry): void {\n    if (!this.has(entry.key)) {\n      this.entries.push(new Entry(entry.value, entry.key));\n    }\n  }\n\n  keysArray(): string[] {\n    return this.entries.map((entry) => entry.key);\n  }\n\n  addEach(object: any): void {\n    Object.keys(object).forEach((key) => {\n      this.set(key, object[key]);\n    });\n  }\n\n  appendDict(dict: Dictionary): void {\n    dict.entries.forEach((entry) => this.putEntry(entry));\n  }\n\n  clear(): void {\n    this.entries = [];\n  }\n\n  delete(key: string): void {\n    this.entries = this.entries.filter((entry) => entry.key !== key);\n  }\n\n  get(key: string): any {\n    const found = this.entries.filter((entry) => entry.key === key);\n    return found[0] ? found[0].value : null;\n  }\n\n  sort(fn: (a: Entry, b: Entry) => number) {\n    this.entries.sort(fn);\n  }\n\n  sortByName() {\n    this.entries.sort((a: Entry, b: Entry) => {\n      if (a.key.includes('_custom') == b.key.includes('_custom')) {\n        if (a.key < b.key) return -1;\n        else {\n          return 1;\n        }\n      } else {\n        if (a.key.includes('_custom')) {\n          return -1;\n        } else {\n          return 1;\n        }\n      }\n    });\n  }\n}\n\nexport class Entry {\n  value: any;\n  key: string;\n\n  constructor(value: any, key: string) {\n    this.value = value;\n    this.key = key;\n  }\n}\n","import { INITIAL_DOMAIN_NAME } from './constants';\nimport { testBusinessObject } from './businessObject';\nimport { elementTypes } from './elementTypes';\nimport { Dictionary } from './dictionary/dictionary';\n\nexport interface DomainConfiguration {\n  name: string;\n  actors: Dictionary;\n  workObjects: Dictionary;\n}\n\nexport interface DomainConfigurationForExport {\n  name: string;\n  actors: any;\n  workObjects: any;\n}\n\nexport interface CustomDomainConfiguration {\n  name: string;\n  actors: string[];\n  workObjects: string[];\n}\nconst actor = structuredClone(testBusinessObject);\nactor.type = elementTypes.ACTOR;\n\nexport const testCustomDomainConfiguration: CustomDomainConfiguration = {\n  name: INITIAL_DOMAIN_NAME,\n  actors: ['Person'],\n  workObjects: ['Document'],\n};\n\nexport function fromConfigurationFromFile(configFromFile: {\n  name: string;\n  actors: { [p: string]: any };\n  workObjects: { [p: string]: any };\n}) {\n  const actorsDict = new Dictionary();\n  const workObjectsDict = new Dictionary();\n  Object.keys(configFromFile.actors).forEach((key) => {\n    actorsDict.add(configFromFile.actors[key], key);\n  });\n  Object.keys(configFromFile.workObjects).forEach((key) => {\n    workObjectsDict.add(configFromFile.workObjects[key], key);\n  });\n\n  return {\n    name: configFromFile.name,\n    actors: actorsDict,\n    workObjects: workObjectsDict,\n  };\n}\n","export enum elementTypes {\n  ACTIVITY = 'domainStory:activity',\n  CONNECTION = 'domainStory:connection',\n  ACTOR = 'domainStory:actor',\n  WORKOBJECT = 'domainStory:workObject',\n  GROUP = 'domainStory:group',\n  TEXTANNOTATION = 'domainStory:textAnnotation',\n  DOMAINSTORY = 'domainStory:',\n}\n","import { Dictionary } from 'src/app/Domain/Common/dictionary/dictionary';\nimport { overrideAppendedIcons } from 'src/app/Domain/Domain-Configuration/allIcons';\nimport { Configuration } from 'src/app/Domain/Common/configuration';\nimport { DomainConfiguration } from 'src/app/Domain/Common/domainConfiguration';\nimport { INITIAL_DOMAIN_NAME } from './constants';\n\nexport class IconConfiguration {\n  domainName = INITIAL_DOMAIN_NAME;\n\n  private allIconDictionary: Dictionary;\n\n  constructor(allIconDictionary: Dictionary) {\n    this.allIconDictionary = allIconDictionary;\n  }\n\n  /**\n   * Select the Iconset which you want to use\n   */\n  getDefaultConf(): Configuration {\n    return defaultConf;\n  }\n\n  updateAllIconRegistry(allIconDictionary: Dictionary): void {\n    this.allIconDictionary = allIconDictionary;\n  }\n\n  appendSRCFile(\n    actors: string[],\n    actorsDict: Dictionary,\n    workObjects: string[],\n    workObjectsDict: Dictionary\n  ): void {\n    const newAppendedIcons: { [key: string]: any } = {};\n\n    actors.forEach((name: string) => {\n      if (!this.allIconDictionary.has(name)) {\n        newAppendedIcons[name] = actorsDict.get(name);\n      }\n    });\n\n    workObjects.forEach((name: string) => {\n      if (!this.allIconDictionary.has(name)) {\n        newAppendedIcons[name] = workObjectsDict.get(name);\n      }\n    });\n    const appen = new Dictionary();\n    Object.keys(newAppendedIcons).forEach((key) => {\n      appen.set(key, newAppendedIcons[key]);\n    });\n\n    overrideAppendedIcons(appen);\n  }\n\n  createCustomConf(domainConfiguration: DomainConfiguration): Configuration {\n    this.domainName = domainConfiguration.name;\n\n    let actors = domainConfiguration.actors;\n    let workObjects = domainConfiguration.workObjects;\n\n    this.appendSRCFile(\n      actors.keysArray(),\n      actors,\n      workObjects.keysArray(),\n      workObjects\n    );\n\n    return new Configuration(actors.keysArray(), workObjects.keysArray());\n  }\n}\n\n/* eslint no-unused-vars: 0*/\n\n/**\n * All Icons as one Set\n * There are more Icons than fit in the palette.\n * This is just for reference\n */\nconst allIconsConf = {\n  actors: ['Person', 'Group', 'System', 'Pet'],\n  workObjects: [\n    'Place',\n    'Flag',\n    'World',\n    'Water',\n    'Store',\n    'Theater',\n    'Business',\n    'Meeting-room',\n    'Hotel',\n    'Dining',\n    'Courthouse',\n    'Gas-station',\n    'Car',\n    'Bus',\n    'Train',\n    'Truck',\n    'Taxi',\n    'Bike',\n    'Boat',\n    'Motorcycle',\n    'Plane',\n    'Flight-takeoff',\n    'Flight-landing',\n    'Shuttle',\n    'Walking',\n    'Traffic',\n    'Commute',\n    'Document',\n    'Folder',\n    'Call',\n    'Email',\n    'Copyright',\n    'Briefcase',\n    'Attach',\n    'Ruler',\n    'Sum',\n    'Conversation',\n    'Update',\n    'Cellphone',\n    'Speaker-phone',\n    'Signal',\n    'Key',\n    'Pencil',\n    'How-To-Reg',\n    'Settings',\n    'Grid',\n    'Label',\n    'Receipt',\n    'Calendar',\n    'Wrench',\n    'Headset',\n    'Keyboard',\n    'Mouse',\n    'Microphone',\n    'Router',\n    'Scanner',\n    'Printer',\n    'DNS',\n    'Security',\n    'Cloud',\n    'Desktop',\n    'Tablet',\n    'Assessment',\n    'Dashboard',\n    'Pie-chart',\n    'View-List',\n    'Euro',\n    'Dollar',\n    'Info',\n    'Alarm',\n    'Problem',\n    'Circle-Arrows',\n    'Picture-as-PDF',\n    'Credit-Card',\n    'Shopping',\n    'Favorite',\n    'Gavel',\n    'Blind',\n    'Hourglass',\n    'Time',\n    'Search',\n    'Thumb-up',\n    'Thumb-down',\n    'Thumb-up-down',\n    'Couch',\n    'Education',\n    'Watch',\n  ],\n};\n\n/**\n * Default Iconset\n */\nexport const defaultConf = {\n  actors: ['Person', 'Group', 'System'],\n  workObjects: ['Document', 'Folder', 'Call', 'Email', 'Conversation', 'Info'],\n};\n","import { ActivityCanvasObject } from '../Common/activityCanvasObject';\n\nexport class ActivityDialogData {\n  activity: ActivityCanvasObject;\n  numberIsAllowedMultipleTimes: boolean;\n  showNumberFields: boolean;\n\n  saveFN: any;\n\n  constructor(\n    activity: ActivityCanvasObject,\n    numberIsAllowedMultipleTimes: boolean,\n    showNumberFields: boolean,\n    saveFN: any\n  ) {\n    this.activity = activity;\n    this.numberIsAllowedMultipleTimes = numberIsAllowedMultipleTimes;\n    this.showNumberFields = showNumberFields;\n    this.saveFN = saveFN;\n  }\n}\n","export class ExportDialogData {\n  title: string;\n  options: ExportOption[];\n\n  constructor(title: string, options: ExportOption[]) {\n    this.title = title;\n    this.options = options;\n  }\n}\n\nexport class ExportOption {\n  text: string;\n  fn: any;\n  tooltip: string;\n\n  constructor(text: string, tooltip: string, fn: any) {\n    this.text = text;\n    this.tooltip = tooltip;\n    this.fn = fn;\n  }\n}\n","export class InfoDialogData {\n  title: string;\n  infoText: string;\n  isInfo: boolean;\n  isLink: boolean;\n  linkText: string | undefined;\n\n  constructor(\n    title: string,\n    infoText: string,\n    isInfo: boolean,\n    isLink: boolean = false,\n    linkText?: string\n  ) {\n    this.title = title;\n    this.infoText = infoText;\n    this.isInfo = isInfo;\n    this.isLink = isLink;\n    this.linkText = linkText;\n  }\n}\n","export const NUMBER_BACKGROUND_COLOR = 'white';\nexport const NUMBER_COLOR = 'black';\nexport const STROKE_WIDTH = '1.5';\n\nexport const HIGHLIGHT_NUMBER_BACKGROUNG_COLOR = '#43acbf';\nexport const HIGHLIGHT_NUMBER_COLOR = 'black';\nexport const HIGHLIGHT_COLOR = 'black';\nexport const HIGHLIGHT_STROKE_WIDTH = '4';\n","import { Dictionary } from 'src/app/Domain/Common/dictionary/dictionary';\n\nexport let appendedIcons = new Dictionary();\nexport const allIcons = {\n  Person:\n    '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>',\n  Group:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"48\" viewBox=\"0 0 24 26\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.67-3.3-1-4.5-1C5.33 13 1 14.08 1 16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4 4.5h-10v-1.25c0-.54 2.56-1.75 5-1.75s5 1.21 5 1.75v1.25zm9 0H14v-1.25c0-.46-.2-.86-.52-1.22.88-.3 1.96-.53 3.02-.53 2.44 0 5 1.21 5 1.75v1.25zM7.5 12c1.93 0 3.5-1.57 3.5-3.5S9.43 5 7.5 5 4 6.57 4 8.5 5.57 12 7.5 12zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 5.5c1.93 0 3.5-1.57 3.5-3.5S18.43 5 16.5 5 13 6.57 13 8.5s1.57 3.5 3.5 3.5zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z\"/></svg>',\n  Pet: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><circle cx=\"4.5\" cy=\"9.5\" r=\"2.5\"/><circle cx=\"9\" cy=\"5.5\" r=\"2.5\"/><circle cx=\"15\" cy=\"5.5\" r=\"2.5\"/><circle cx=\"19.5\" cy=\"9.5\" r=\"2.5\"/><path d=\"M17.34 14.86c-.87-1.02-1.6-1.89-2.48-2.91-.46-.54-1.05-1.08-1.75-1.32-.11-.04-.22-.07-.33-.09-.25-.04-.52-.04-.78-.04s-.53 0-.79.05c-.11.02-.22.05-.33.09-.7.24-1.28.78-1.75 1.32-.87 1.02-1.6 1.89-2.48 2.91-1.31 1.31-2.92 2.76-2.62 4.79.29 1.02 1.02 2.03 2.33 2.32.73.15 3.06-.44 5.54-.44h.18c2.48 0 4.81.58 5.54.44 1.31-.29 2.04-1.31 2.33-2.32.31-2.04-1.3-3.49-2.61-4.8z\"/></svg>',\n  Conversation:\n    '<svg height=\"48\" viewBox=\"0 0 24 26\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z\"/></svg>',\n  World:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-.61.08-1.21.21-1.78L8.99 15v1c0 1.1.9 2 2 2v1.93C7.06 19.43 4 16.07 4 12zm13.89 5.4c-.26-.81-1-1.4-1.9-1.4h-1v-3c0-.55-.45-1-1-1h-6v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41C17.92 5.77 20 8.65 20 12c0 2.08-.81 3.98-2.11 5.4z\"/></svg>',\n  Store:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18.36 9l.6 3H5.04l.6-3h12.72M20 4H4v2h16V4zm0 3H4l-1 5v2h1v6h10v-6h4v6h2v-6h1v-2l-1-5zM6 18v-4h6v4H6z\"/></svg>',\n  Theater:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm6 10h-4V5h4v14zm4-2h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z\"/></svg>',\n  Business:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z\"/></svg>',\n  Water:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M17 16.99c-1.35 0-2.2.42-2.95.8-.65.33-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.65.33-1.17.6-2.05.6v1.95c1.35 0 2.2-.42 2.95-.8.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.42 2.95-.8c.65-.33 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8v-1.95c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8zm0-4.45c-1.35 0-2.2.43-2.95.8-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.65.32-1.17.6-2.05.6v1.95c1.35 0 2.2-.43 2.95-.8.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.58.8 2.95.8v-1.95c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8zm2.95-8.08c-.75-.38-1.58-.8-2.95-.8s-2.2.42-2.95.8c-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.37-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.65.33-1.17.6-2.05.6v1.93c1.35 0 2.2-.43 2.95-.8.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8V5.04c-.9 0-1.4-.25-2.05-.58zM17 8.09c-1.35 0-2.2.43-2.95.8-.65.35-1.15.6-2.05.6s-1.4-.25-2.05-.6c-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.65.35-1.15.6-2.05.6v1.95c1.35 0 2.2-.43 2.95-.8.65-.32 1.18-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8V9.49c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8z\"/></svg>',\n  Hotel:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M7 14c1.66 0 3-1.34 3-3S8.66 8 7 8s-3 1.34-3 3 1.34 3 3 3zm0-4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm12-3h-8v8H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4zm2 8h-8V9h6c1.1 0 2 .9 2 2v4z\"/></svg>',\n  Dining:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M8.1 13.34l2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z\"/></svg>',\n  'Gas-station':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19.77 7.23l.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-.69-.28-1.32-.73-1.77zM12 13.5V19H6v-7h6v1.5zm0-3.5H6V5h6v5zm6 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z\"/></svg>',\n  'Meeting-room':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 19V4h-4V3H5v16H3v2h12V6h2v15h4v-2h-2zm-6 0H7V5h6v14zm-3-8h2v2h-2z\"/></svg>',\n  Courthouse:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M6.5 10h-2v7h2v-7zm6 0h-2v7h2v-7zm8.5 9H2v2h19v-2zm-2.5-9h-2v7h2v-7zm-7-6.74L16.71 6H6.29l5.21-2.74m0-2.26L2 6v2h19V6l-9.5-5z\"/></svg>',\n  Flag: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z\"/></svg>',\n  Place:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zM7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9z\"/><circle cx=\"12\" cy=\"9\" r=\"2.5\"/></svg>',\n  Car: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.85 7h10.29l1.08 3.11H5.77L6.85 7zM19 17H5v-5h14v5z\"/><circle cx=\"7.5\" cy=\"14.5\" r=\"1.5\"/><circle cx=\"16.5\" cy=\"14.5\" r=\"1.5\"/></svg>',\n  Bus: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2c-4.42 0-8 .5-8 4v10c0 .88.39 1.67 1 2.22V20c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h8v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1.78c.61-.55 1-1.34 1-2.22V6c0-3.5-3.58-4-8-4zm5.66 2.99H6.34C6.89 4.46 8.31 4 12 4s5.11.46 5.66.99zm.34 2V10H6V6.99h12zm-.34 9.74l-.29.27H6.63l-.29-.27C6.21 16.62 6 16.37 6 16v-4h12v4c0 .37-.21.62-.34.73z\"/><circle cx=\"8.5\" cy=\"14.5\" r=\"1.5\"/><circle cx=\"15.5\" cy=\"14.5\" r=\"1.5\"/></svg>',\n  Train:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><circle cx=\"8.5\" cy=\"14.5\" r=\"1.5\"/><circle cx=\"15.5\" cy=\"14.5\" r=\"1.5\"/><path d=\"M12 2c-4 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19L6 20.5v.5h2l2-2h4l2 2h2v-.5L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-4-4-8-4zm0 2c3.51 0 4.96.48 5.57 1H6.43c.61-.52 2.06-1 5.57-1zM6 7h5v3H6V7zm12 8.5c0 .83-.67 1.5-1.5 1.5h-9c-.83 0-1.5-.67-1.5-1.5V12h12v3.5zm0-5.5h-5V7h5v3z\"/></svg>',\n  Truck:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zm-.5 1.5l1.96 2.5H17V9.5h2.5zM6 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm2.22-3c-.55-.61-1.33-1-2.22-1s-1.67.39-2.22 1H3V6h12v9H8.22zM18 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z\"/></svg>',\n  Taxi: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18.92 6.01C18.72 5.42 18.16 5 17.5 5H15V3H9v2H6.5c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.85 7h10.29l1.04 3H5.81l1.04-3zM19 17H5v-4.66l.12-.34h13.77l.11.34V17z\"/><circle cx=\"7.5\" cy=\"14.5\" r=\"1.5\"/><circle cx=\"16.5\" cy=\"14.5\" r=\"1.5\"/></svg>',\n  Bike: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M15.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM5 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5zm5.8-10l2.4-2.4.8.8c1.3 1.3 3 2.1 5.1 2.1V9c-1.5 0-2.7-.6-3.6-1.5l-1.9-1.9c-.5-.4-1-.6-1.6-.6s-1.1.2-1.4.6L7.8 8.4c-.4.4-.6.9-.6 1.4 0 .6.2 1.1.6 1.4L11 14v5h2v-6.2l-2.2-2.3zM19 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5z\"/></svg>',\n  Boat: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z\"/></svg>',\n  Motorcycle:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M12.72 11l-2 2h-.77l-.25-.69c-.18-.48-.42-.92-.72-1.31h3.74m2.69-6H11v2h3.59l2 2H5c-2.8 0-5 2.2-5 5s2.2 5 5 5c2.46 0 4.45-1.69 4.9-4h1.65l2.77-2.77c-.21.54-.32 1.14-.32 1.77 0 2.8 2.2 5 5 5s5-2.2 5-5c0-2.65-1.97-4.77-4.56-4.97L15.41 5zM19 17c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zM5 17c-1.63 0-3-1.37-3-3s1.37-3 3-3c1.28 0 2.4.85 2.82 2H5v2h2.82C7.4 16.15 6.28 17 5 17z\"/></svg>',\n  Plane:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z\"/></svg>',\n  'Flight-takeoff':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M2.5 19h19v2h-19v-2zm19.57-9.36c-.21-.8-1.04-1.28-1.84-1.06L14.92 10l-6.9-6.43-1.93.51 4.14 7.17-4.97 1.33-1.97-1.54-1.45.39 2.59 4.49L21 11.49c.81-.23 1.28-1.05 1.07-1.85z\"/></svg>',\n  'Flight-landing':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M2.5 19h19v2h-19v-2zm16.84-3.15c.8.21 1.62-.26 1.84-1.06.21-.8-.26-1.62-1.06-1.84l-5.31-1.42-2.76-9.02L10.12 2v8.28L5.15 8.95l-.93-2.32-1.45-.39v5.17l16.57 4.44z\"/></svg>',\n  Shuttle:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M17 5H3c-1.1 0-2 .89-2 2v9h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-6-6zm-2 2h1l3 3h-4V7zM9 7h4v3H9V7zM3 7h4v3H3V7zm3 10.25c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25zm12 0c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25zM21 14h-.78c-.55-.61-1.34-1-2.22-1s-1.67.39-2.22 1H8.22c-.55-.61-1.33-1-2.22-1s-1.67.39-2.22 1H3v-2h18v2z\"/></svg>',\n  Walking:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.56-.89-1.68-1.25-2.65-.84L6 8.3V13h2V9.6l1.8-.7\"/></svg>',\n  Traffic:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 10h-3V8.86c1.72-.45 3-2 3-3.86h-3V4c0-.55-.45-1-1-1H8c-.55 0-1 .45-1 1v1H4c0 1.86 1.28 3.41 3 3.86V10H4c0 1.86 1.28 3.41 3 3.86V15H4c0 1.86 1.28 3.41 3 3.86V20c0 .55.45 1 1 1h8c.55 0 1-.45 1-1v-1.14c1.72-.45 3-2 3-3.86h-3v-1.14c1.72-.45 3-2 3-3.86zm-5 9H9V5h6v14zm-3-1c.83 0 1.5-.67 1.5-1.5S12.83 15 12 15s-1.5.67-1.5 1.5.67 1.5 1.5 1.5zm0-4.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM12 9c.83 0 1.5-.67 1.5-1.5S12.83 6 12 6s-1.5.67-1.5 1.5S11.17 9 12 9z\"/></svg>',\n  Commute:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 4H5C3.34 4 2 5.34 2 7v8c0 1.66 1.34 3 3 3l-1 1v1h1l2-2h2v-5H4V6h9v2h2V7c0-1.66-1.34-3-3-3zM5 14c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm15.57-4.34c-.14-.4-.52-.66-.97-.66h-7.19c-.46 0-.83.26-.98.66l-1.42 4.11v5.51c0 .38.31.72.69.72h.62c.38 0 .68-.38.68-.76V18h8v1.24c0 .38.31.76.69.76h.61c.38 0 .69-.34.69-.72l.01-1.37v-4.14l-1.43-4.11zm-8.16.34h7.19l1.03 3h-9.25l1.03-3zM12 16c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm8 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z\"/></svg>',\n  System:\n    '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20,18c1.1,0,2-0.9,2-2V6c0-1.1-0.9-2-2-2H4C2.9,4,2,4.9,2,6v10c0,1.1,0.9,2,2,2H0v2h24v-2H20z M4,6h16v10H4V6z\"/></svg>',\n  Printer:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 8h-1V3H6v5H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zM8 5h8v3H8V5zm8 12v2H8v-4h8v2zm2-2v-2H6v2H4v-4c0-.55.45-1 1-1h14c.55 0 1 .45 1 1v4h-2z\"/><circle cx=\"18\" cy=\"11.5\" r=\"1\"/></svg>',\n  Document:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z\"/></svg>',\n  Folder:\n    '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"none\" d=\"M0,0h24v24H0V0z\"/><path d=\"M9.17,6l2,2H20v10L4,18V6H9.17 M10,4H4C2.9,4,2.01,4.9,2.01,6L2,18c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V8c0-1.1-0.9-2-2-2 h-8L10,4L10,4z\"/></svg>',\n  Call: '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"none\" d=\"M0,0h24v24H0V0z\"/><path d=\"M6.54,5C6.6,5.89,6.75,6.76,6.99,7.59l-1.2,1.2C5.38,7.59,5.12,6.32,5.03,5H6.54 M16.4,17.02c0.85,0.24,1.72,0.39,2.6,0.45 v1.49c-1.32-0.09-2.59-0.35-3.8-0.75L16.4,17.02 M7.5,3H4C3.45,3,3,3.45,3,4c0,9.39,7.61,17,17,17c0.55,0,1-0.45,1-1v-3.49\\tc0-0.55-0.45-1-1-1c-1.24,0-2.45-0.2-3.57-0.57c-0.1-0.04-0.21-0.05-0.31-0.05c-0.26,0-0.51,0.1-0.71,0.29l-2.2,2.2 c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2C9.1,8.31,9.18,7.92,9.07,7.57C8.7,6.45,8.5,5.25,8.5,4C8.5,3.45,8.05,3,7.5,3L7.5,3z\"/></svg>',\n  Email:\n    '<svg viewBox=\"0 0 24 26\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"none\" d=\"M0,0h24v24H0V0z\"/><path fill-opacity=\"0.9\" d=\"M12,1.95c-5.52,0-10,4.48-10,10s4.48,10,10,10h5v-2h-5c-4.34,0-8-3.66-8-8s3.66-8,8-8s8,3.66,8,8v1.43 c0,0.79-0.71,1.57-1.5,1.57S17,14.17,17,13.38v-1.43c0-2.76-2.24-5-5-5s-5,2.24-5,5s2.24,5,5,5c1.38,0,2.64-0.56,3.54-1.47 c0.65,0.89,1.77,1.47,2.96,1.47c1.97,0,3.5-1.6,3.5-3.57v-1.43C22,6.43,17.52,1.95,12,1.95z M12,14.95c-1.66,0-3-1.34-3-3 s1.34-3,3-3s3,1.34,3,3S13.66,14.95,12,14.95z\"/></svg>',\n  Copyright:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M10.08 10.86c.05-.33.16-.62.3-.87s.34-.46.59-.62c.24-.15.54-.22.91-.23.23.01.44.05.63.13.2.09.38.21.52.36s.25.33.34.53.13.42.14.64h1.79c-.02-.47-.11-.9-.28-1.29s-.4-.73-.7-1.01-.66-.5-1.08-.66-.88-.23-1.39-.23c-.65 0-1.22.11-1.7.34s-.88.53-1.2.92-.56.84-.71 1.36S8 11.29 8 11.87v.27c0 .58.08 1.12.23 1.64s.39.97.71 1.35.72.69 1.2.91c.48.22 1.05.34 1.7.34.47 0 .91-.08 1.32-.23s.77-.36 1.08-.63.56-.58.74-.94.29-.74.3-1.15h-1.79c-.01.21-.06.4-.15.58s-.21.33-.36.46-.32.23-.52.3c-.19.07-.39.09-.6.1-.36-.01-.66-.08-.89-.23-.25-.16-.45-.37-.59-.62s-.25-.55-.3-.88-.08-.67-.08-1v-.27c0-.35.03-.68.08-1.01zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/></svg>',\n  DNS: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 15v4H5v-4h14m1-2H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 18.5c-.82 0-1.5-.67-1.5-1.5s.68-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM19 5v4H5V5h14m1-2H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 8.5c-.82 0-1.5-.67-1.5-1.5S6.18 5.5 7 5.5s1.5.68 1.5 1.5S7.83 8.5 7 8.5z\"/></svg>',\n  Settings:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z\"/></svg>',\n  Cellphone:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M7 22h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2zM16 .01L8 0C6.9 0 6 .9 6 2v16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V2c0-1.1-.9-1.99-2-1.99zM16 18H8v-1h8v1zm0-3H8V5h8v10zm0-12H8V2h8v1z\"/></svg>',\n  Update:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M11 8v5l4.25 2.52.77-1.28-3.52-2.09V8zm10 2V3l-2.64 2.64C16.74 4.01 14.49 3 12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9h-2c0 3.86-3.14 7-7 7s-7-3.14-7-7 3.14-7 7-7c1.93 0 3.68.79 4.95 2.05L14 10h7z\"/></svg>',\n  Briefcase:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M14 6V4h-4v2h4zM4 8v11h16V8H4zm16-2c1.11 0 2 .89 2 2v11c0 1.11-.89 2-2 2H4c-1.11 0-2-.89-2-2l.01-11c0-1.11.88-2 1.99-2h4V4c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2h4z\"/></svg>',\n  Microphone:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V5zm6 6c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z\"/></svg>',\n  Signal:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><circle cx=\"6.18\" cy=\"17.82\" r=\"2.18\"/><path d=\"M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z\"/></svg>',\n  Key: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M22 19h-6v-4h-2.68c-1.14 2.42-3.6 4-6.32 4-3.86 0-7-3.14-7-7s3.14-7 7-7c2.72 0 5.17 1.58 6.32 4H24v6h-2v4zm-4-2h2v-4h2v-2H11.94l-.23-.67C11.01 8.34 9.11 7 7 7c-2.76 0-5 2.24-5 5s2.24 5 5 5c2.11 0 4.01-1.34 4.71-3.33l.23-.67H18v4zM7 15c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3zm0-4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z\"/></svg>',\n  Pencil:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM5.92 19H5v-.92l9.06-9.06.92.92L5.92 19zM20.71 5.63l-2.34-2.34c-.2-.2-.45-.29-.71-.29s-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41z\"/></svg>',\n  Sum: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7V4z\"/></svg>',\n  Headset:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 14v4h-2v-4h2M7 14v4H6c-.55 0-1-.45-1-1v-3h2m5-13c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h4v1h-7v2h6c1.66 0 3-1.34 3-3V10c0-4.97-4.03-9-9-9z\"/></svg>',\n  Keyboard:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M20 7v10H4V7h16m0-2H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2zm0 3h2v2h-2zM8 8h2v2H8zm0 3h2v2H8zm-3 0h2v2H5zm0-3h2v2H5zm3 6h8v2H8zm6-3h2v2h-2zm0-3h2v2h-2zm3 3h2v2h-2zm0-3h2v2h-2z\"/></svg>',\n  Mouse:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 9c-.04-4.39-3.6-7.93-8-7.93S4.04 4.61 4 9v6c0 4.42 3.58 8 8 8s8-3.58 8-8V9zm-2 0h-5V3.16c2.81.47 4.96 2.9 5 5.84zm-7-5.84V9H6c.04-2.94 2.19-5.37 5-5.84zM18 15c0 3.31-2.69 6-6 6s-6-2.69-6-6v-4h12v4z\"/></svg>',\n  Router:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M16 4.2c1.5 0 3 .6 4.2 1.7l.8-.8C19.6 3.7 17.8 3 16 3s-3.6.7-5 2.1l.8.8C13 4.8 14.5 4.2 16 4.2zm-3.3 2.5l.8.8c.7-.7 1.6-1 2.5-1s1.8.3 2.5 1l.8-.8c-.9-.9-2.1-1.4-3.3-1.4s-2.4.5-3.3 1.4zM19 13h-2V9h-2v4H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2zm0 6H5v-4h14v4zM6 16h2v2H6zm3.5 0h2v2h-2zm3.5 0h2v2h-2z\"/></svg>',\n  Scanner:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19.8 10.7L4.2 5l-.7 1.9L17.6 12H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-5.5c0-.8-.5-1.6-1.2-1.8zM19 18H5v-4h14v4zM6 15h2v2H6zm4 0h8v2h-8z\"/></svg>',\n  Security:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z\"/></svg>',\n  Desktop:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v2H8v2h8v-2h-2v-2h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H3V4h18v12z\"/></svg>',\n  'Speaker-phone':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M7 7.07L8.43 8.5c.91-.91 2.18-1.48 3.57-1.48s2.66.57 3.57 1.48L17 7.07C15.72 5.79 13.95 5 12 5s-3.72.79-5 2.07zM12 1C8.98 1 6.24 2.23 4.25 4.21l1.41 1.41C7.28 4 9.53 3 12 3s4.72 1 6.34 2.62l1.41-1.41C17.76 2.23 15.02 1 12 1zm2.86 9.01L9.14 10C8.51 10 8 10.51 8 11.14v9.71c0 .63.51 1.14 1.14 1.14h5.71c.63 0 1.14-.51 1.14-1.14v-9.71c.01-.63-.5-1.13-1.13-1.13zM15 20H9v-8h6v8z\"/></svg>',\n  Tablet:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M18 0H6C4.34 0 3 1.34 3 3v18c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V3c0-1.66-1.34-3-3-3zm-4 22h-4v-1h4v1zm5.25-3H4.75V3h14.5v16z\"/></svg>',\n  Label:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16zM16 17H5V7h11l3.55 5L16 17z\"/></svg>',\n  Receipt:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19.5 3.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5zM19 19.09H5V4.91h14v14.18zM6 15h12v2H6zm0-4h12v2H6zm0-4h12v2H6z\"/></svg>',\n  Calendar:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\" /><path d=\"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10zm0-12H5V5h14v2zM7 11h5v5H7z\" /></svg>',\n  Cloud:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6m0-2C9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96C18.67 6.59 15.64 4 12 4z\"/></svg>',\n  Assessment:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 10h2v7H7zm4-3h2v10h-2zm4 6h2v4h-2z\"/></svg>',\n  Dashboard:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 5v2h-4V5h4M9 5v6H5V5h4m10 8v6h-4v-6h4M9 17v2H5v-2h4M21 3h-8v6h8V3zM11 3H3v10h8V3zm10 8h-8v10h8V11zm-10 4H3v6h8v-6z\"/></svg>',\n  'Pie-chart':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm7.93 9H13V4.07c3.61.45 6.48 3.32 6.93 6.93zM4 12c0-4.07 3.06-7.44 7-7.93v15.86c-3.94-.49-7-3.86-7-7.93zm9 7.93V13h6.93c-.45 3.61-3.32 6.48-6.93 6.93z\"/></svg>',\n  Problem:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z\"/></svg>',\n  'Picture-as-PDF':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm12 6V9c0-.55-.45-1-1-1h-2v5h2c.55 0 1-.45 1-1zm-2-3h1v3h-1V9zm4 2h1v-1h-1V9h1V8h-2v5h1zm-8 0h1c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1H9v5h1v-2zm0-2h1v1h-1V9z\"/></svg>',\n  Grid: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z\"/></svg>',\n  Watch:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M14.31 2l.41 2.48C13.87 4.17 12.96 4 12 4c-.95 0-1.87.17-2.71.47L9.7 2h4.61m.41 17.52L14.31 22H9.7l-.41-2.47c.84.3 1.76.47 2.71.47.96 0 1.87-.17 2.72-.48M16 0H8l-.95 5.73C5.19 7.19 4 9.45 4 12s1.19 4.81 3.05 6.27L8 24h8l.96-5.73C18.81 16.81 20 14.54 20 12s-1.19-4.81-3.04-6.27L16 0zm-4 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z\"/></svg>',\n  Euro: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M15 18.5c-2.51 0-4.68-1.42-5.76-3.5H15v-2H8.58c-.05-.33-.08-.66-.08-1s.03-.67.08-1H15V9H9.24C10.32 6.92 12.5 5.5 15 5.5c1.61 0 3.09.59 4.23 1.57L21 5.3C19.41 3.87 17.3 3 15 3c-3.92 0-7.24 2.51-8.48 6H3v2h3.06c-.04.33-.06.66-.06 1s.02.67.06 1H3v2h3.52c1.24 3.49 4.56 6 8.48 6 2.31 0 4.41-.87 6-2.3l-1.78-1.77c-1.13.98-2.6 1.57-4.22 1.57z\"/></svg>',\n  Dollar:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z\"/></svg>',\n  Info: '<svg height=\"48\" viewBox=\"0 0 24 26\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z\"/></svg>',\n  Alarm:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12.5 8H11v6l4.75 2.85.75-1.23-4-2.37zm4.837-6.19l4.607 3.845-1.28 1.535-4.61-3.843zm-10.674 0l1.282 1.536L3.337 7.19l-1.28-1.536zM12 4c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm0 16c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7z\"/></svg>',\n  Wrench:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M22.61 18.99l-9.08-9.08c.93-2.34.45-5.1-1.44-7C9.79.61 6.21.4 3.66 2.26L7.5 6.11 6.08 7.52 2.25 3.69C.39 6.23.6 9.82 2.9 12.11c1.86 1.86 4.57 2.35 6.89 1.48l9.11 9.11c.39.39 1.02.39 1.41 0l2.3-2.3c.4-.38.4-1.01 0-1.41zm-3 1.6l-9.46-9.46c-.61.45-1.29.72-2 .82-1.36.2-2.79-.21-3.83-1.25C3.37 9.76 2.93 8.5 3 7.26l3.09 3.09 4.24-4.24-3.09-3.09c1.24-.07 2.49.37 3.44 1.31 1.08 1.08 1.49 2.57 1.24 3.96-.12.71-.42 1.37-.88 1.96l9.45 9.45-.88.89z\"/></svg>',\n  'Circle-Arrows':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z\"/></svg>',\n  'Credit-Card':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z\"/></svg>',\n  Favorite:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z\"/></svg>',\n  Gavel:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M1 21h12v2H1v-2zM5.24 8.07l2.83-2.83 14.14 14.14-2.83 2.83L5.24 8.07zM12.32 1l5.66 5.66-2.83 2.83-5.66-5.66L12.32 1zM3.83 9.48l5.66 5.66-2.83 2.83L1 12.31l2.83-2.83z\"/></svg>',\n  Blind:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/><circle cx=\"8\" cy=\"14\" r=\"2\"/><circle cx=\"12\" cy=\"8\" r=\"2\"/><circle cx=\"16\" cy=\"14\" r=\"2\"/></svg>',\n  Hourglass:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z\"/></svg>',\n  Time: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z\"/></svg>',\n  Search:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/></svg>',\n  Shopping:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M15.55 13c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.66-.11-1.48-.87-1.48H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2h7.45zM6.16 6h12.15l-2.76 5H8.53L6.16 6zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z\"/></svg>',\n  'Thumb-up':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M9 21h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.58 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2zM9 9l4.34-4.34L12 10h9v2l-3 7H9V9zM1 9h4v12H1z\"/></svg>',\n  'Thumb-down':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm0 12l-4.34 4.34L12 14H3v-2l3-7h9v10zm4-12h4v12h-4z\"/></svg>',\n  'Thumb-up-down':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/><path d=\"M12 6c0-.55-.45-1-1-1H5.82l.66-3.18.02-.23c0-.31-.13-.59-.33-.8L5.38 0 .44 4.94C.17 5.21 0 5.59 0 6v6.5c0 .83.67 1.5 1.5 1.5h6.75c.62 0 1.15-.38 1.38-.91l2.26-5.29c.07-.17.11-.36.11-.55V6zm-2 1.13L7.92 12H2V6.21l1.93-1.93L3.36 7H10v.13zM22.5 10h-6.75c-.62 0-1.15.38-1.38.91l-2.26 5.29c-.07.17-.11.36-.11.55V18c0 .55.45 1 1 1h5.18l-.66 3.18-.02.24c0 .31.13.59.33.8l.79.78 4.94-4.94c.27-.27.44-.65.44-1.06v-6.5c0-.83-.67-1.5-1.5-1.5zm-.5 7.79l-1.93 1.93.57-2.72H14v-.13L16.08 12H22v5.79z\"/></svg>',\n  Couch:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M21 9V7c0-1.65-1.35-3-3-3H6C4.35 4 3 5.35 3 7v2c-1.65 0-3 1.35-3 3v5c0 1.65 1.35 3 3 3h18c1.65 0 3-1.35 3-3v-5c0-1.65-1.35-3-3-3zM5 7c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v2.78c-.61.55-1 1.34-1 2.22v2H6v-2c0-.88-.39-1.67-1-2.22V7zm17 10c0 .55-.45 1-1 1H3c-.55 0-1-.45-1-1v-5c0-.55.45-1 1-1s1 .45 1 1v4h16v-4c0-.55.45-1 1-1s1 .45 1 1v5z\"/></svg>',\n  Attach:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 28\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z\"/></svg>',\n  Ruler:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2v8z\"/></svg>',\n  Education:\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z\"/></svg>',\n  'How-To-Reg':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" fill=\"none\" d=\"M0 0h24v24H0z\"/><g fill-rule=\"evenodd\" clip-rule=\"evenodd\"><path d=\"M9 17l3-2.94c-.39-.04-.68-.06-1-.06-2.67 0-8 1.34-8 4v2h9l-3-3zm2-5c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4\"/><path d=\"M15.47 20.5L12 17l1.4-1.41 2.07 2.08 5.13-5.17 1.4 1.41z\"/></g></svg>',\n  'View-List':\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 26\"><path opacity=\".87\" fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M3 5v14h17V5H3zm4 2v2H5V7h2zm-2 6v-2h2v2H5zm0 2h2v2H5v-2zm13 2H9v-2h9v2zm0-4H9v-2h9v2zm0-4H9V7h9v2z\"/></svg>',\n};\n\nexport function getAllStandardIconKeys(): string[] {\n  const allIconsDict = new Dictionary();\n\n  allIconsDict.addEach(allIcons);\n\n  return allIconsDict.keysArray();\n}\n\nexport function overrideAppendedIcons(newIcons: Dictionary): void {\n  appendedIcons = newIcons;\n}\n","export enum IconFilterEnum {\n  ICON_FILTER_ACTOR = 'ICON_FILTER_ACTOR',\n  ICON_FILTER_WORKOBJECT = 'ICON_FILTER_WORKOBJECT',\n  ICON_FILTER_UNASSIGNED = 'ICON_FILTER_UNASSIGNED',\n  ICON_FILTER_NONE = 'ICON_FILTER_NONE',\n}\n","export class ConfigAndDST {\n  domain: any;\n  dst: any;\n\n  constructor(domain: any, dst: any) {\n    this.domain = domain;\n    this.dst = dst;\n  }\n}\n\nexport const testConfigAndDst: ConfigAndDST = {\n  domain: JSON.parse(\n    '{\"name\":\"\",' +\n      '\"actors\":{\"Person\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\n      '<path d=\\\\\"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z\\\\\"/>' +\n      '<path d=\\\\\"M0 0h24v24H0z\\\\\" fill=\\\\\"none\\\\\"/></svg>\",' +\n      '\"Group\":\"<svg xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\" width=\\\\\"48\\\\\" height=\\\\\"48\\\\\" viewBox=\\\\\"0 0 24 26\\\\\">' +\n      '<path d=\\\\\"M0 0h24v24H0z\\\\\" fill=\\\\\"none\\\\\"/>' +\n      '<path d=\\\\\"M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.67-3.3-1-4.5-1C5.33 13 1 14.08 1 16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4 4.5h-10v-1.25c0-.54 2.56-1.75 5-1.75s5 1.21 5 1.75v1.25zm9 0H14v-1.25c0-.46-.2-.86-.52-1.22.88-.3 1.96-.53 3.02-.53 2.44 0 5 1.21 5 1.75v1.25zM7.5 12c1.93 0 3.5-1.57 3.5-3.5S9.43 5 7.5 5 4 6.57 4 8.5 5.57 12 7.5 12zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 5.5c1.93 0 3.5-1.57 3.5-3.5S18.43 5 16.5 5 13 6.57 13 8.5s1.57 3.5 3.5 3.5zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z\\\\\"/></svg>\",' +\n      '\"System\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\n      '<path d=\\\\\"M20,18c1.1,0,2-0.9,2-2V6c0-1.1-0.9-2-2-2H4C2.9,4,2,4.9,2,6v10c0,1.1,0.9,2,2,2H0v2h24v-2H20z M4,6h16v10H4V6z\\\\\"/></svg>\"},' +\n      '\"workObjects\":{\"Document\":\"<svg xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\" width=\\\\\"24\\\\\" height=\\\\\"24\\\\\" viewBox=\\\\\"0 0 24 26\\\\\">' +\n      '<path fill=\\\\\"none\\\\\" d=\\\\\"M0 0h24v24H0V0z\\\\\"/><path d=\\\\\"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z\\\\\"/></svg>\",' +\n      '\"Folder\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\n      '<path fill=\\\\\"none\\\\\" d=\\\\\"M0,0h24v24H0V0z\\\\\"/>' +\n      '<path d=\\\\\"M9.17,6l2,2H20v10L4,18V6H9.17 M10,4H4C2.9,4,2.01,4.9,2.01,6L2,18c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V8c0-1.1-0.9-2-2-2 h-8L10,4L10,4z\\\\\"/></svg>\",' +\n      '\"Call\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\n      '<path fill=\\\\\"none\\\\\" d=\\\\\"M0,0h24v24H0V0z\\\\\"/><path d=\\\\\"M6.54,5C6.6,5.89,6.75,6.76,6.99,7.59l-1.2,1.2C5.38,7.59,5.12,6.32,5.03,5H6.54 M16.4,17.02c0.85,0.24,1.72,0.39,2.6,0.45 v1.49c-1.32-0.09-2.59-0.35-3.8-0.75L16.4,17.02 M7.5,3H4C3.45,3,3,3.45,3,4c0,9.39,7.61,17,17,17c0.55,0,1-0.45,1-1v-3.49\\\\tc0-0.55-0.45-1-1-1c-1.24,0-2.45-0.2-3.57-0.57c-0.1-0.04-0.21-0.05-0.31-0.05c-0.26,0-0.51,0.1-0.71,0.29l-2.2,2.2 c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2C9.1,8.31,9.18,7.92,9.07,7.57C8.7,6.45,8.5,5.25,8.5,4C8.5,3.45,8.05,3,7.5,3L7.5,3z\\\\\"/></svg>\",' +\n      '\"Email\":\"<svg viewBox=\\\\\"0 0 24 26\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\"><path fill=\\\\\"none\\\\\" d=\\\\\"M0,0h24v24H0V0z\\\\\"/>' +\n      '<path fill-opacity=\\\\\"0.9\\\\\" d=\\\\\"M12,1.95c-5.52,0-10,4.48-10,10s4.48,10,10,10h5v-2h-5c-4.34,0-8-3.66-8-8s3.66-8,8-8s8,3.66,8,8v1.43 c0,0.79-0.71,1.57-1.5,1.57S17,14.17,17,13.38v-1.43c0-2.76-2.24-5-5-5s-5,2.24-5,5s2.24,5,5,5c1.38,0,2.64-0.56,3.54-1.47 c0.65,0.89,1.77,1.47,2.96,1.47c1.97,0,3.5-1.6,3.5-3.57v-1.43C22,6.43,17.52,1.95,12,1.95z M12,14.95c-1.66,0-3-1.34-3-3 s1.34-3,3-3s3,1.34,3,3S13.66,14.95,12,14.95z\\\\\"/></svg>\",' +\n      '\"Conversation\":\"<svg height=\\\\\"48\\\\\" viewBox=\\\\\"0 0 24 26\\\\\" width=\\\\\"48\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\">' +\n      '<path d=\\\\\"M0 0h24v24H0V0z\\\\\" fill=\\\\\"none\\\\\"/><path d=\\\\\"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z\\\\\"/></svg>\",' +\n      '\"Info\":\"<svg height=\\\\\"48\\\\\" viewBox=\\\\\"0 0 24 26\\\\\" width=\\\\\"48\\\\\" xmlns=\\\\\"http://www.w3.org/2000/svg\\\\\"><path d=\\\\\"M0 0h24v24H0z\\\\\" fill=\\\\\"none\\\\\"/>' +\n      '<path d=\\\\\"M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z\\\\\"/>' +\n      '</svg>\"}}'\n  ),\n  dst:\n    '[' +\n    '{\"type\":\"domainStory:workObjectDocument\",\"name\":\"\",\"id\":\"shape_3792\",\"$type\":\"Element\",\"di\":{},\"$descriptor\":{},\"pickedColor\":\"black\",\"x\":302,\"y\":102},' +\n    '{\"type\":\"domainStory:actorPerson\",\"name\":\"\",\"id\":\"shape_4666\",\"$type\":\"Element\",\"di\":{},\"$descriptor\":{},\"pickedColor\":\"black\",\"x\":103,\"y\":93},' +\n    '{\"type\":\"domainStory:activity\",\"name\":\"\",\"id\":\"connection_4884\",\"$type\":\"Element\",\"di\":{},\"$descriptor\":{},\"pickedColor\":\"black\",\"number\":1,' +\n    '\"waypoints\":[{\"original\":{\"x\":141,\"y\":131},\"x\":186,\"y\":133},{\"original\":{\"x\":340,\"y\":140},\"x\":302,\"y\":138}],' +\n    '\"source\":\"shape_4666\",\"target\":\"shape_3792\"}]',\n};\n","export const SVG_LINK = 'http://www.w3.org/2000/svg';\nexport const X_OFFSET_UTIL = '8';\nexport const TEXTSPAN_TITLE_HEIGHT = 30;\nexport const TEXTSPAN_DESCRIPTION_HEIGHT = 15;\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AutosaveSettingsComponent } from '../Presentation/Autosave/AutosaveSettings/autosave-settings.component';\nimport { AutosaveOptionsComponent } from '../Presentation/Autosave/AutosaveOptions/autosave-options.component';\nimport { AutosavedDraftsComponent } from '../Presentation/Autosave/AutosavedDrafts/autosaved-drafts.component';\nimport { FormsModule } from '@angular/forms';\nimport { MaterialModule } from '../material.module';\n\n@NgModule({\n  declarations: [\n    AutosaveSettingsComponent,\n    AutosaveOptionsComponent,\n    AutosavedDraftsComponent,\n  ],\n  exports: [AutosaveSettingsComponent],\n  imports: [CommonModule, FormsModule, MaterialModule],\n})\nexport class AutosaveSettingsModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HeaderButtonsComponent } from '../Presentation/Header/header-buttons.component';\n\n@NgModule({\n  declarations: [HeaderButtonsComponent],\n  exports: [HeaderButtonsComponent],\n  imports: [CommonModule],\n})\nexport class DomainStoryModelerModuleModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DomainConfigurationComponent } from 'src/app/Presentation/DomainConfiguration/domain-configuration.component';\nimport { IconListItemComponent } from '../Presentation/DomainConfiguration/icon-list-item/icon-list-item.component';\nimport { DetailsListItemComponent } from '../Presentation/DomainConfiguration/details-list-item/details-list-item.component';\nimport { DomainDetailsComponent } from '../Presentation/DomainConfiguration/domain-details/domain-details.component';\nimport { GeneralSettingsComponent } from '../Presentation/Settings/General/general-settings.component';\nimport { LabelDictionaryComponent } from '../Presentation/LabelDictionary/label-dictionary.component';\nimport { FormsModule } from '@angular/forms';\nimport { MaterialModule } from '../material.module';\nimport { AutosaveSettingsModule } from './autosave-settings.module';\n\n@NgModule({\n  declarations: [\n    DomainConfigurationComponent,\n    GeneralSettingsComponent,\n    LabelDictionaryComponent,\n    IconListItemComponent,\n    DetailsListItemComponent,\n    DomainDetailsComponent,\n  ],\n  exports: [\n    GeneralSettingsComponent,\n    DomainConfigurationComponent,\n    LabelDictionaryComponent,\n  ],\n  imports: [AutosaveSettingsModule, CommonModule, FormsModule, MaterialModule],\n})\nexport class SettingsModule {}\n","import { Component } from '@angular/core';\nimport { AutosaveConfigurationService } from '../../../Service/Autosave/autosave-configuration.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport {\n  SNACKBAR_DURATION,\n  SNACKBAR_ERROR,\n  SNACKBAR_SUCCESS,\n} from 'src/app/Domain/Common/constants';\n\n@Component({\n  selector: 'app-autosave-options',\n  templateUrl: './autosave-options.component.html',\n  styleUrls: ['./autosave-options.component.scss'],\n})\nexport class AutosaveOptionsComponent {\n  constructor(\n    protected autosaveConfiguration: AutosaveConfigurationService,\n    private snackbar: MatSnackBar\n  ) {}\n\n  save(activated: boolean, amount: number, interval: number) {\n    if (\n      this.autosaveConfiguration.setConfiguration({\n        activated,\n        amount,\n        interval,\n      })\n    ) {\n      this.snackbar.open('Settings for Autosave saved', undefined, {\n        duration: SNACKBAR_DURATION,\n        panelClass: SNACKBAR_SUCCESS,\n      });\n    } else {\n      this.snackbar.open(\n        'Unable to save settings for Autosave - please try again',\n        undefined,\n        {\n          duration: 2 * SNACKBAR_DURATION,\n          panelClass: SNACKBAR_ERROR,\n        }\n      );\n    }\n  }\n}\n","<mat-card *ngIf=\"autosaveConfiguration.configuration$ | async as configuration\">\n  <mat-card-header>\n    <mat-card-title>Autosave Options</mat-card-title>\n  </mat-card-header>\n  <mat-card-content class=\"cardContent\">\n    <div class=\"alignSelfCenter\">\n      <input #activated type=\"checkbox\" [checked]=\"configuration.activated\" />\n      <mat-label>Enabled</mat-label>\n    </div>\n    <div class=\"inputContainer\">\n      <mat-label>Interval</mat-label>\n      <input\n        #interval\n        class=\"numberInput\"\n        min=\"1\"\n        type=\"number\"\n        [value]=\"configuration.interval\"\n      />\n    </div>\n    <div class=\"inputContainer\">\n      <mat-label>Amount</mat-label>\n      <input\n        #amount\n        class=\"numberInput\"\n        min=\"1\"\n        type=\"number\"\n        [value]=\"configuration.amount\"\n      />\n    </div>\n    <button\n      class=\"saveButton\"\n      mat-raised-button\n      color=\"primary\"\n      (click)=\"save(activated.checked, +amount.value, +interval.value)\"\n    >\n      Apply\n    </button>\n  </mat-card-content>\n</mat-card>\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-autosave-settings',\n  templateUrl: './autosave-settings.component.html',\n  styleUrls: ['./autosave-settings.component.scss'],\n})\nexport class AutosaveSettingsComponent {}\n","<app-autosave-options />\n<app-autosaved-drafts />\n","import { Component, OnInit } from '@angular/core';\nimport { AutosaveService } from '../../../Service/Autosave/autosave.service';\nimport { Draft } from '../../../Domain/Autosave/draft';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport {\n  SNACKBAR_DURATION,\n  SNACKBAR_SUCCESS,\n} from 'src/app/Domain/Common/constants';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-autosaved-drafts',\n  templateUrl: './autosaved-drafts.component.html',\n  styleUrls: ['./autosaved-drafts.component.scss'],\n})\nexport class AutosavedDraftsComponent implements OnInit {\n  drafts: Draft[] = [];\n  subscription: Subscription;\n\n  constructor(\n    private autosaveService: AutosaveService,\n    private snackbar: MatSnackBar\n  ) {\n    this.subscription = this.autosaveService.autosavedDraftsChanged$.subscribe(\n      () => this.initDrafts()\n    );\n  }\n\n  ngOnInit(): void {\n    this.initDrafts();\n  }\n\n  initDrafts() {\n    this.drafts = this.autosaveService.loadCurrentDrafts();\n  }\n\n  loadDraft(draft: Draft): void {\n    this.autosaveService.loadDraft(draft);\n    this.snackbar.open('Draft loaded', undefined, {\n      duration: SNACKBAR_DURATION,\n      panelClass: SNACKBAR_SUCCESS,\n    });\n  }\n\n  removeAllDrafts() {\n    this.autosaveService.removeAllDrafts();\n  }\n}\n","<mat-accordion>\n  <mat-expansion-panel>\n    <mat-expansion-panel-header>\n      <mat-panel-title> Autosaves </mat-panel-title>\n      <mat-panel-description>\n        {{ drafts.length ? drafts.length : \"no\" }}\n        {{ drafts.length > 1 ? \"drafts\" : \"draft\" }} available\n      </mat-panel-description>\n    </mat-expansion-panel-header>\n    <div class=\"items\" *ngIf=\"drafts.length; else noDrafts\">\n      <div *ngFor=\"let draft of drafts\" class=\"item border-bottom\">\n        <div>\n          <div class=\"item-title\">{{ draft.title }}</div>\n          <div class=\"item-date\">{{ draft.date }}</div>\n        </div>\n        <button\n          class=\"item-button\"\n          mat-raised-button\n          color=\"primary\"\n          (click)=\"loadDraft(draft)\"\n        >\n          Load Draft\n        </button>\n      </div>\n      <div class=\"item\">\n        <div></div>\n        <button\n          class=\"item-button\"\n          mat-raised-button\n          color=\"primary\"\n          (click)=\"removeAllDrafts()\"\n        >\n          Remove All Drafts\n        </button>\n      </div>\n    </div>\n  </mat-expansion-panel>\n</mat-accordion>\n\n<ng-template #noDrafts>No drafts found.</ng-template>\n","import { Component, OnInit } from '@angular/core';\nimport { ModelerService } from '../../Service/Modeler/modeler.service';\nimport { AutosaveService } from '../../Service/Autosave/autosave.service';\n\n@Component({\n  selector: 'app-modeler',\n  templateUrl: './modeler.component.html',\n  styleUrls: ['./modeler.component.scss'],\n})\nexport class ModelerComponent implements OnInit {\n  constructor(\n    private modelerService: ModelerService,\n    private autosaveService: AutosaveService\n  ) {}\n\n  ngOnInit(): void {\n    this.modelerService.postInit();\n    this.autosaveService.loadLatestDraft();\n  }\n}\n","<div id=\"canvas\"></div>\n","import { AfterViewInit, Component, Inject, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { UntypedFormBuilder, UntypedFormGroup } from '@angular/forms';\nimport { ActivityDialogData } from 'src/app/Domain/Dialog/activityDialogData';\nimport { ActivityCanvasObject } from '../../../Domain/Common/activityCanvasObject';\n\n@Component({\n  selector: 'app-activity-dialog',\n  templateUrl: './activity-dialog.component.html',\n  styleUrls: ['./activity-dialog.component.scss'],\n})\nexport class ActivityDialogComponent {\n  form: UntypedFormGroup;\n  activityLabel: string;\n  activityNumber: number | undefined;\n  numberIsAllowedMultipleTimes: boolean;\n  showNumberFields: boolean;\n  activity: ActivityCanvasObject;\n\n  saveFN: any;\n\n  constructor(\n    private fb: UntypedFormBuilder,\n    private dialogRef: MatDialogRef<ActivityDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) data: ActivityDialogData\n  ) {\n    this.activity = data.activity;\n    this.activityLabel = data.activity.businessObject.name;\n    this.numberIsAllowedMultipleTimes = data.numberIsAllowedMultipleTimes;\n    this.activityNumber = data.activity.businessObject.number;\n    this.showNumberFields = data.showNumberFields;\n\n    this.saveFN = data.saveFN;\n\n    this.form = this.fb.group({\n      activityLabel: [this.activityLabel, []],\n      activityNumber: [this.activityNumber, []],\n      multipleNumbers: [this.numberIsAllowedMultipleTimes, []],\n    });\n  }\n\n  onSubmit(): void {\n    this.numberIsAllowedMultipleTimes = !this.numberIsAllowedMultipleTimes;\n    this.form.patchValue({\n      multipleNumbers: this.numberIsAllowedMultipleTimes,\n    });\n  }\n\n  save(): void {\n    this.saveFN({\n      activity: this.activity,\n      ...this.form.value,\n    });\n    this.dialogRef.close();\n  }\n\n  close(): void {\n    this.dialogRef.close();\n  }\n\n  preventDefault(event: Event) {\n    event.preventDefault();\n  }\n}\n","<mat-dialog-content>\n  <h2>Edit Activity</h2>\n  <form [formGroup]=\"form\">\n    <div [hidden]=\"!showNumberFields\">\n      <mat-form-field class=\"shortWidth\">\n        <mat-label>Number</mat-label>\n        <input matInput type=\"number\" formControlName=\"activityNumber\" />\n      </mat-form-field>\n      <input\n        type=\"checkbox\"\n        formControlName=\"multipleNumbers\"\n        (change)=\"onSubmit()\"\n      />\n      multiple\n    </div>\n    <mat-form-field class=\"fullWidth\">\n      <mat-label>Label</mat-label>\n      <textarea\n        matInput\n        type=\"text\"\n        formControlName=\"activityLabel\"\n        autofocus\n        cdkFocusInitial\n        (keydown.enter)=\"preventDefault($event)\"\n        (keyup.enter)=\"save()\"\n        (keyup.escape)=\"close()\"\n      ></textarea>\n    </mat-form-field>\n  </form>\n</mat-dialog-content>\n\n<mat-dialog-actions>\n  <button mat-flat-button (click)=\"close()\">Cancel</button>\n  <button mat-flat-button color=\"primary\" (click)=\"save()\">Save</button>\n</mat-dialog-actions>\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { ExportDialogData } from 'src/app/Domain/Dialog/exportDialogData';\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\n\n@Component({\n  selector: 'app-export-dialog',\n  templateUrl: './export-dialog.component.html',\n  styleUrls: ['./export-dialog.component.scss'],\n})\nexport class ExportDialogComponent implements OnInit {\n  title: string;\n  options: {\n    text: string;\n    tooltip: string;\n    fn: any;\n  }[];\n  withTitle: BehaviorSubject<boolean>;\n  useWhiteBackground: BehaviorSubject<boolean>;\n\n  constructor(\n    private dialogRef: MatDialogRef<ExportDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) data: ExportDialogData\n  ) {\n    this.withTitle = new BehaviorSubject<boolean>(true);\n    this.useWhiteBackground = new BehaviorSubject<boolean>(true);\n    this.title = data.title;\n    this.options = data.options;\n  }\n\n  ngOnInit(): void {}\n\n  doOption(i: number): void {\n    this.options[i].fn(this.withTitle.value, this.useWhiteBackground.value);\n    this.close();\n  }\n\n  close(): void {\n    this.dialogRef.close();\n  }\n\n  updateWithTitle($event: Event) {\n    // @ts-ignore\n    this.withTitle.next($event.target.checked);\n  }\n\n  updateUseWhiteBackground($event: Event) {\n    // @ts-ignore\n    this.useWhiteBackground.next($event.target.checked);\n  }\n}\n","<mat-dialog-content>\n  <h2>{{ title }}</h2>\n  <label>\n    <input\n      type=\"checkbox\"\n      [checked]=\"withTitle | async\"\n      (change)=\"updateWithTitle($event)\"\n    />\n    Add title and description to image\n  </label>\n  <br />\n  <label>\n    <input\n      type=\"checkbox\"\n      [checked]=\"useWhiteBackground | async\"\n      (change)=\"updateUseWhiteBackground($event)\"\n    />\n    Add white background to SVG (default: transparent)\n  </label>\n</mat-dialog-content>\n<mat-dialog-actions>\n  <br />\n\n  <div>\n    <button mat-flat-button (click)=\"close()\">Cancel</button>\n    <button\n      *ngFor=\"let option of options; let i = index\"\n      mat-stroked-button\n      class=\"mr-1\"\n      [title]=\"option.tooltip\"\n      (click)=\"doOption(i)\"\n    >\n      {{ option.text }}\n    </button>\n  </div>\n</mat-dialog-actions>\n","import { Component, OnInit } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { UntypedFormBuilder, UntypedFormGroup } from '@angular/forms';\nimport { TitleService } from 'src/app/Service/Title/title.service';\n\n@Component({\n  selector: 'app-header-dialog',\n  templateUrl: './header-dialog.component.html',\n  styleUrls: ['./header-dialog.component.scss'],\n})\nexport class HeaderDialogComponent implements OnInit {\n  form: UntypedFormGroup;\n  title: string;\n  description: string;\n\n  constructor(\n    private fb: UntypedFormBuilder,\n    private dialogRef: MatDialogRef<HeaderDialogComponent>,\n    private titleService: TitleService\n  ) {\n    this.title =\n      this.titleService.getTitle() === '< name of this Domain Story >'\n        ? ''\n        : this.titleService.getTitle();\n    this.description = this.titleService.getDescription();\n\n    this.form = this.fb.group({\n      title: [this.title, []],\n      description: [this.description, []],\n    });\n  }\n\n  ngOnInit(): void {}\n\n  save(): void {\n    this.titleService.updateTitleAndDescription(\n      this.form.get('title')?.value,\n      this.form.get('description')?.value,\n      true\n    );\n    this.dialogRef.close();\n  }\n\n  close(): void {\n    this.dialogRef.close();\n  }\n\n  preventDefault(event: Event) {\n    event.preventDefault();\n  }\n}\n","<mat-dialog-content>\n  <form [formGroup]=\"form\">\n    <mat-form-field class=\"dialogWidth\">\n      <mat-label>Title</mat-label>\n      <input matInput type=\"text\" formControlName=\"title\" />\n    </mat-form-field>\n    <br />\n    <mat-form-field class=\"dialogWidth\">\n      <mat-label>Description</mat-label>\n      <textarea\n        maxlength=\"2000\"\n        matInput\n        class=\"descriptionInput\"\n        formControlName=\"description\"\n        (keydown.enter)=\"preventDefault($event)\"\n        (keyup.enter)=\"save()\"\n        (keyup.escape)=\"close()\"\n      ></textarea>\n    </mat-form-field>\n  </form>\n</mat-dialog-content>\n\n<mat-dialog-actions>\n  <button mat-flat-button (click)=\"close()\">Cancel</button>\n  <button mat-flat-button color=\"primary\" (click)=\"save()\">Save</button>\n</mat-dialog-actions>\n","import { AfterViewInit, Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { InfoDialogData } from 'src/app/Domain/Dialog/infoDialogData';\n\n@Component({\n  selector: 'app-info-dialog',\n  templateUrl: './info-dialog.component.html',\n  styleUrls: ['./info-dialog.component.scss'],\n})\nexport class InfoDialogComponent implements AfterViewInit {\n  title: string;\n  infoText: string;\n  showConfirmButton: boolean;\n  hasLink: boolean;\n  linkText: string;\n\n  constructor(\n    private dialogRef: MatDialogRef<InfoDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) data: InfoDialogData\n  ) {\n    this.title = data.title;\n    this.infoText = data.infoText;\n    this.showConfirmButton = !data.isInfo;\n    this.hasLink = data.isLink;\n    this.linkText = data.linkText || '';\n  }\n\n  ngAfterViewInit() {\n    const span = document.getElementsByClassName(\n      'readOnlyText'\n    )[0] as HTMLTextAreaElement;\n    span.style.height = span.scrollHeight + 'px';\n  }\n\n  close(): void {\n    this.dialogRef.close();\n  }\n}\n","<mat-dialog-content class=\"content\">\n  <h2 id=\"info-dialog-title\">{{ title }}</h2>\n  <span class=\"readOnlyText\" *ngIf=\"infoText != ''\">{{ infoText }} </span>\n  <a *ngIf=\"hasLink\" href=\"{{ linkText }}\">{{ linkText }}</a>\n</mat-dialog-content>\n\n<mat-dialog-actions *ngIf=\"showConfirmButton\">\n  <button class=\"mat-raised-button\" (click)=\"close()\">Close</button>\n</mat-dialog-actions>\n","import { Component } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\n\n@Component({\n  selector: 'app-label-dictionary-dialog',\n  templateUrl: './label-dictionary-dialog.component.html',\n  styleUrls: ['./label-dictionary-dialog.component.scss'],\n})\nexport class LabelDictionaryDialogComponent {\n  constructor(\n    private dialogRef: MatDialogRef<LabelDictionaryDialogComponent>\n  ) {}\n\n  close(): void {\n    this.dialogRef.close();\n  }\n}\n","<mat-dialog-content>\n  <h2>Label Dictionary</h2>\n  <app-label-dictionary (closeEmitter)=\"close()\"></app-label-dictionary>\n</mat-dialog-content>\n","import { AfterViewChecked, Component, Input } from '@angular/core';\nimport { IconListItem } from '../../../Domain/Domain-Configuration/iconListItem';\n\n@Component({\n  selector: 'app-details-list-item',\n  templateUrl: './details-list-item.component.html',\n  styleUrls: ['./details-list-item.component.scss'],\n})\nexport class DetailsListItemComponent implements AfterViewChecked {\n  @Input()\n  icon!: IconListItem;\n\n  private iconInitiated = false;\n\n  get id(): string {\n    return (\n      'domain-configuration-details-icon-' +\n      this.icon.name.toLowerCase() +\n      '-' +\n      (this.icon.isWorkObject ? 'workobject' : 'actor')\n    );\n  }\n\n  get name(): string {\n    return this.icon.name;\n  }\n\n  ngAfterViewChecked(): void {\n    this.createIcon();\n  }\n\n  private createIcon(): void {\n    const img = document.getElementById(this.id) as HTMLImageElement;\n    if (img && !this.iconInitiated) {\n      img.src = '' + this.icon.svg;\n      this.iconInitiated = true;\n    }\n  }\n}\n","<div class=\"detailsListItem\">\n  <img id=\"{{ id }}\" class=\"icon\" alt=\"{{ name }}\" [src]=\"icon.svg\" />\n  <mat-label class=\"iconName\">{{ icon.name }}</mat-label>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport {\n  CustomDomainConfiguration,\n  fromConfigurationFromFile,\n} from 'src/app/Domain/Common/domainConfiguration';\nimport { DomainConfigurationService } from 'src/app/Service/DomainConfiguration/domain-configuration.service';\nimport { IconDictionaryService } from 'src/app/Service/DomainConfiguration/icon-dictionary.service';\nimport { BehaviorSubject } from 'rxjs';\nimport { Dictionary } from 'src/app/Domain/Common/dictionary/dictionary';\nimport { sanitizeIconName } from 'src/app/Utils/sanitizer';\nimport { IconFilterEnum } from '../../Domain/Domain-Configuration/iconFilterEnum';\nimport { DomainCustomizationService } from '../../Service/DomainConfiguration/domain-customization.service';\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\n\n@Component({\n  selector: 'app-domain-configuration',\n  templateUrl: './domain-configuration.component.html',\n  styleUrls: ['./domain-configuration.component.scss'],\n})\nexport class DomainConfigurationComponent implements OnInit {\n  private domainConfigurationTypes: CustomDomainConfiguration;\n\n  filter = new BehaviorSubject<IconFilterEnum>(IconFilterEnum.ICON_FILTER_NONE);\n\n  selectedActors = new BehaviorSubject<string[]>([]);\n  selectedWorkobjects = new BehaviorSubject<string[]>([]);\n\n  allIcons: BehaviorSubject<Dictionary>;\n  allIconNames = new BehaviorSubject<string[]>([]);\n  allFilteredIconNames = new BehaviorSubject<string[]>([]);\n\n  constructor(\n    private configurationService: DomainConfigurationService,\n    private iconDictionaryService: IconDictionaryService,\n    private domainCustomizationService: DomainCustomizationService,\n    private elementRegistryService: ElementRegistryService\n  ) {\n    this.domainConfigurationTypes =\n      this.domainCustomizationService.getDomainConfiguration().value;\n\n    this.allIcons = new BehaviorSubject(\n      this.iconDictionaryService.getFullDictionary()\n    );\n    this.allIcons.subscribe((allIcons) => {\n      this.allIconNames.next(allIcons.keysArray().sort(this.sortByName));\n    });\n\n    this.selectedActors = this.domainCustomizationService.selectedActors$;\n    this.selectedWorkobjects =\n      this.domainCustomizationService.selectedWorkobjects$;\n  }\n\n  ngOnInit(): void {\n    this.filter.subscribe((type) => {\n      let allFiltered = this.getFilteredNamesForType(type);\n      this.allFilteredIconNames.next(allFiltered.sort(this.sortByName));\n    });\n  }\n\n  private sortByName(a: string, b: string): number {\n    if (a.includes('_custom') == b.includes('_custom')) {\n      if (a < b) return -1;\n      else {\n        return 1;\n      }\n    } else {\n      if (a.includes('_custom')) {\n        return -1;\n      } else {\n        return 1;\n      }\n    }\n  }\n\n  /** Default Domain **/\n  loadMinimalIconConfigurationWithDefaultIcons(): void {\n    this.domainCustomizationService.resetDomain();\n  }\n\n  loadInitialConfiguration(): void {\n    this.domainCustomizationService.cancel();\n  }\n\n  /** Persist Domain **/\n  saveDomain(): void {\n    this.domainCustomizationService.saveDomain(\n      this.elementRegistryService.getUsedIcons()\n    );\n  }\n\n  exportDomain(): void {\n    this.domainCustomizationService.exportDomain();\n  }\n\n  /** Add Custom Icon **/\n  startIconUpload(): void {\n    document.getElementById('importIcon')?.click();\n  }\n\n  importIcon(): void {\n    // @ts-ignore\n    const files = document.getElementById('importIcon').files;\n    for (let iconInputFile of files) {\n      const reader = new FileReader();\n      const name = sanitizeIconName(iconInputFile.name);\n      const iconName = name + '_custom';\n\n      reader.onloadend = (e: ProgressEvent<FileReader>) => {\n        if (e.target) {\n          const src: string = e.target.result as unknown as string;\n          this.iconDictionaryService.addIMGToIconDictionary(src, iconName);\n          this.iconDictionaryService.registerIconForBPMN(iconName, src);\n\n          this.allIcons.next(this.iconDictionaryService.getFullDictionary());\n          this.filter.next(this.filter.value);\n\n          this.domainCustomizationService.addNewIcon(iconName);\n        }\n      };\n      reader.readAsDataURL(iconInputFile);\n    }\n  }\n\n  /** Import Domain **/\n  startDomainImport(): void {\n    document.getElementById('importDomain')?.click();\n  }\n\n  importDomain(): void {\n    // @ts-ignore\n    const domainInputFile = document.getElementById('importDomain').files[0];\n    const reader = new FileReader();\n\n    reader.onloadend = (e: ProgressEvent<FileReader>) => {\n      const configFromFile = JSON.parse(\n        e.target?.result as unknown as string\n      ) as {\n        name: string;\n        actors: { [key: string]: any };\n        workObjects: { [key: string]: any };\n      };\n      const config = fromConfigurationFromFile(configFromFile);\n      this.configurationService.loadConfiguration(config, false);\n\n      this.domainCustomizationService.importConfiguration(config);\n    };\n\n    reader.readAsText(domainInputFile);\n  }\n\n  /** Filter **/\n  filterForActors(): void {\n    if (this.filter.value !== IconFilterEnum.ICON_FILTER_ACTOR) {\n      this.filter.next(IconFilterEnum.ICON_FILTER_ACTOR);\n    } else {\n      this.filter.next(IconFilterEnum.ICON_FILTER_NONE);\n    }\n  }\n\n  filterForWorkobjects(): void {\n    if (this.filter.value !== IconFilterEnum.ICON_FILTER_WORKOBJECT) {\n      this.filter.next(IconFilterEnum.ICON_FILTER_WORKOBJECT);\n    } else {\n      this.filter.next(IconFilterEnum.ICON_FILTER_NONE);\n    }\n  }\n\n  filterForUnassigned(): void {\n    if (this.filter.value !== IconFilterEnum.ICON_FILTER_UNASSIGNED) {\n      this.filter.next(IconFilterEnum.ICON_FILTER_UNASSIGNED);\n    } else {\n      this.filter.next(IconFilterEnum.ICON_FILTER_NONE);\n    }\n  }\n\n  filterByNameAndType($event: any) {\n    const filteredByNameAndType = this.getFilteredNamesForType(\n      this.filter.value\n    ).filter((name) =>\n      name.toLowerCase().includes($event.target.value.toLowerCase())\n    );\n    this.allFilteredIconNames.next(filteredByNameAndType.sort(this.sortByName));\n  }\n\n  private getFilteredNamesForType(type: IconFilterEnum): string[] {\n    let allFiltered: string[] = [];\n    switch (type) {\n      case IconFilterEnum.ICON_FILTER_NONE:\n        allFiltered = this.allIconNames.value;\n        break;\n      case IconFilterEnum.ICON_FILTER_ACTOR:\n        allFiltered = this.allIconNames.value.filter((name) =>\n          this.domainCustomizationService.isIconActor(name)\n        );\n        break;\n      case IconFilterEnum.ICON_FILTER_WORKOBJECT:\n        allFiltered = this.allIconNames.value.filter((name) =>\n          this.domainCustomizationService.isIconWorkObject(name)\n        );\n        break;\n      case IconFilterEnum.ICON_FILTER_UNASSIGNED:\n        allFiltered = this.allIconNames.value.filter(\n          (name) =>\n            !this.domainCustomizationService.isIconActor(name) &&\n            !this.domainCustomizationService.isIconWorkObject(name)\n        );\n        break;\n    }\n    return allFiltered;\n  }\n}\n","<div class=\"content\">\n  <div>\n    <div class=\"header\">\n      <div class=\"buttons\">\n        <button mat-button title=\"Upload Icon\" (click)=\"startIconUpload()\">\n          <span class=\"material-icons-outlined materialIconButton\">upload</span>\n          <input\n            type=\"file\"\n            multiple\n            accept=\".svg, image/png, image/jpeg, image/gif, image/bpmn\"\n            style=\"display: none\"\n            id=\"importIcon\"\n            name=\"file\"\n            onclick=\"this.value=null\"\n            (change)=\"importIcon()\"\n          />\n        </button>\n        <button\n          mat-button\n          class=\"button\"\n          title=\"Reset to default icon set\"\n          (click)=\"loadMinimalIconConfigurationWithDefaultIcons()\"\n        >\n          <span class=\"material-icons-outlined materialIconButton\"> home </span>\n        </button>\n      </div>\n      <div class=\"searchbar\">\n        <div></div>\n        <div>Filter:</div>\n        <button\n          mat-button\n          [class.activeNone]=\"(filter | async) === 'ICON_FILTER_UNASSIGNED'\"\n          title=\"Unassigned Icons\"\n          (click)=\"filterForUnassigned()\"\n        >\n          <span>None</span>\n        </button>\n        <div></div>\n        <button\n          mat-button\n          [class.activeActor]=\"(filter | async) === 'ICON_FILTER_ACTOR'\"\n          title=\"Actors\"\n          (click)=\"filterForActors()\"\n        >\n          <span>Actors</span>\n        </button>\n        <div></div>\n        <button\n          mat-button\n          [class.activeWorkObject]=\"\n            (filter | async) === 'ICON_FILTER_WORKOBJECT'\n          \"\n          title=\"Workobjects\"\n          (click)=\"filterForWorkobjects()\"\n        >\n          <span>Workobjects</span>\n        </button>\n        <div></div>\n        <input\n          class=\"textInput\"\n          matInput\n          type=\"text\"\n          placeholder=\"Filter by name\"\n          (input)=\"filterByNameAndType($event)\"\n        />\n      </div>\n      <div class=\"saveButtons\">\n        <button mat-button title=\"Export icon set\" (click)=\"exportDomain()\">\n          <span class=\"material-icons-outlined materialIconButton\"\n            >archive</span\n          >\n        </button>\n        <button\n          mat-button\n          title=\"Import icon set\"\n          (click)=\"startDomainImport()\"\n        >\n          <span class=\"material-icons-outlined materialIconButton\"\n            >unarchive</span\n          >\n          <input\n            type=\"file\"\n            accept=\".domain\"\n            style=\"display: none\"\n            id=\"importDomain\"\n            name=\"file\"\n            onclick=\"this.value=null\"\n            (change)=\"importDomain()\"\n          />\n        </button>\n        <div class=\"divider\"></div>\n        <button\n          mat-button\n          title=\"Cancel changes\"\n          (click)=\"loadInitialConfiguration()\"\n        >\n          <span class=\"material-icons-outlined materialIconButton\">close</span>\n        </button>\n        <button mat-button title=\"Save icon set\" (click)=\"saveDomain()\">\n          <span class=\"material-icons-outlined materialIconButton\">save</span>\n        </button>\n      </div>\n    </div>\n\n    <div class=\"domainConfiguration\">\n      <div class=\"icons\">\n        <div class=\"iconList smallScrollbar\">\n          <mat-grid-list cols=\"8\" rowHeight=\"170px\">\n            <mat-grid-tile\n              *ngFor=\"let iconName of allFilteredIconNames | async\"\n              [colspan]=\"1\"\n              [rowspan]=\"1\"\n            >\n              <app-icon-list-item\n                [iconName]=\"iconName\"\n                class=\"iconListItem\"\n              ></app-icon-list-item>\n            </mat-grid-tile>\n          </mat-grid-list>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <app-domain-details class=\"domainDetails\"></app-domain-details>\n</div>\n","<div class=\"details smallScrollbar\">\n  <div class=\"domainDetails bottom-border\">\n    <h3>Icon Set name</h3>\n    <form>\n      <mat-form-field class=\"inputWidth\">\n        <input\n          matInput\n          type=\"text\"\n          (input)=\"changeName($event)\"\n          [value]=\"domainName | async\"\n        />\n      </mat-form-field>\n    </form>\n  </div>\n  <div class=\"actorList bottom-border\">\n    <h3>Order of actors</h3>\n    <mat-list>\n      <mat-list-item\n        class=\"compactItem\"\n        *ngFor=\"let iconName of selectedActors$ | async; let i = index\"\n        draggable=\"true\"\n        (dragover)=\"allowDrop($event, 'actorList')\"\n        (dragstart)=\"onDragStart(i, 'actorList')\"\n        (drop)=\"onDrop($event, iconName, true, i)\"\n      >\n        <app-details-list-item\n          [icon]=\"getIconForName(iconName)\"\n        ></app-details-list-item>\n      </mat-list-item>\n    </mat-list>\n  </div>\n  <div class=\"workobjectList\">\n    <h3>Order of work objects</h3>\n    <mat-list>\n      <mat-list-item\n        class=\"compactItem\"\n        *ngFor=\"let iconName of selectedWorkobjects$ | async; let i = index\"\n        draggable=\"true\"\n        (dragover)=\"allowDrop($event, 'workobjectList')\"\n        (dragstart)=\"onDragStart(i, 'workobjectList')\"\n        (drop)=\"onDrop($event, iconName, false, i)\"\n      >\n        <app-details-list-item\n          [icon]=\"getIconForName(iconName)\"\n        ></app-details-list-item>\n      </mat-list-item>\n    </mat-list>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { DomainCustomizationService } from 'src/app/Service/DomainConfiguration/domain-customization.service';\nimport { IconListItem } from 'src/app/Domain/Domain-Configuration/iconListItem';\nimport { TitleService } from 'src/app/Service/Title/title.service';\n\n@Component({\n  selector: 'app-domain-details',\n  templateUrl: './domain-details.component.html',\n  styleUrls: ['./domain-details.component.scss'],\n})\nexport class DomainDetailsComponent implements OnInit {\n  domainName: Observable<string>;\n\n  private draggedList: string = '';\n  private draggedIndex = 0;\n\n  selectedActors$ = this.customizationService.selectedActors$;\n  selectedWorkobjects$ = this.customizationService.selectedWorkobjects$;\n\n  constructor(\n    private customizationService: DomainCustomizationService,\n    titleService: TitleService\n  ) {\n    this.domainName = titleService.domainName$;\n  }\n\n  ngOnInit(): void {}\n\n  changeName(event: Event): void {\n    // @ts-ignore\n    this.customizationService.changeName(event.target.value);\n  }\n\n  getIconForName(iconName: string): IconListItem {\n    return this.customizationService.getIconForName(iconName).value;\n  }\n\n  allowDrop($event: DragEvent, listName: string) {\n    if (this.draggedList === listName) {\n      $event.preventDefault();\n    }\n  }\n\n  onDrop($event: DragEvent, iconName: string, actors: boolean, index: number) {\n    let list;\n    if (actors) {\n      list = this.selectedActors$;\n    } else {\n      list = this.selectedWorkobjects$;\n    }\n    const sortedList = list.value;\n    const item = sortedList[this.draggedIndex];\n    sortedList.splice(this.draggedIndex, 1);\n    sortedList.splice(index, 0, item);\n    list.next(sortedList);\n\n    if (actors) {\n      this.customizationService.setSelectedActors(sortedList);\n    } else {\n      this.customizationService.setSelectedWorkObject(sortedList);\n    }\n  }\n\n  onDragStart(index: number, draggedList: string) {\n    this.draggedList = draggedList;\n    this.draggedIndex = index;\n  }\n}\n","import { AfterViewChecked, Component, Input, OnInit } from '@angular/core';\nimport { IconListItem } from '../../../Domain/Domain-Configuration/iconListItem';\nimport { BehaviorSubject } from 'rxjs';\nimport { DomainCustomizationService } from '../../../Service/DomainConfiguration/domain-customization.service';\n\n@Component({\n  selector: 'app-icon-list-item',\n  templateUrl: './icon-list-item.component.html',\n  styleUrls: ['./icon-list-item.component.scss'],\n})\nexport class IconListItemComponent implements OnInit, AfterViewChecked {\n  @Input()\n  iconName: string = '';\n\n  private iconInitiated = false;\n\n  // @ts-ignore\n  icon = new BehaviorSubject<IconListItem>({});\n\n  isActor: BehaviorSubject<boolean>;\n  isWorkobject: BehaviorSubject<boolean>;\n  isNone: BehaviorSubject<boolean>;\n\n  get name(): string {\n    return this.iconName;\n  }\n\n  get id() {\n    return 'domain-configuration-icon-' + this.iconName;\n  }\n\n  constructor(private domainCustomizationService: DomainCustomizationService) {\n    this.isActor = new BehaviorSubject<boolean>(false);\n    this.isWorkobject = new BehaviorSubject<boolean>(false);\n    this.isNone = new BehaviorSubject<boolean>(true);\n  }\n\n  ngOnInit(): void {\n    this.icon = this.domainCustomizationService.getIconForName(this.iconName);\n    this.icon.subscribe((value) => {\n      this.isActor.next(value.isActor);\n      this.isWorkobject.next(value.isWorkObject);\n      this.isNone.next(!(value.isActor || value.isWorkObject));\n    });\n    this.isActor.next(this.icon.value.isActor);\n    this.isWorkobject.next(this.icon.value.isWorkObject);\n    this.isNone.next(\n      !(this.icon.value.isActor || this.icon.value.isWorkObject)\n    );\n  }\n\n  ngAfterViewChecked(): void {\n    this.createIcon();\n  }\n\n  private createIcon(): void {\n    const img = document.getElementById(this.id) as HTMLImageElement;\n    if (img && !this.iconInitiated) {\n      img.src = '' + this.icon.value?.svg;\n      this.iconInitiated = true;\n    }\n  }\n\n  toggleNone() {\n    this.domainCustomizationService.setAsUnassigned(\n      this.iconName,\n      this.icon.value.isActor\n    );\n  }\n\n  toggleActor(): void {\n    this.domainCustomizationService.setAsActor(true, this.iconName);\n  }\n\n  toggleWorkobject(): void {\n    this.domainCustomizationService.setAsWorkobject(true, this.iconName);\n  }\n}\n","<div class=\"IconContainer\">\n  <div class=\"content\">\n    <img id=\"{{ id }}\" class=\"icon\" src=\"\" alt=\"{{ name }}\" />\n    <div class=\"name\">{{ name }}</div>\n  </div>\n  <div class=\"footer\">\n    <mat-button-toggle-group>\n      <mat-button-toggle\n        (change)=\"toggleNone()\"\n        [value]=\"isNone | async\"\n        [checked]=\"isNone | async\"\n      >\n        <span class=\"toggleButtonTitle\">None</span>\n      </mat-button-toggle>\n      <mat-button-toggle\n        [class.activeMatButtonActor]=\"isActor | async\"\n        (change)=\"toggleActor()\"\n        [value]=\"isActor | async\"\n        [checked]=\"isActor | async\"\n      >\n        <span class=\"toggleButtonTitle\">Actor</span>\n      </mat-button-toggle>\n      <mat-button-toggle\n        [class.activeMatButtonWorkObject]=\"isWorkobject | async\"\n        (change)=\"toggleWorkobject()\"\n        [value]=\"isWorkobject | async\"\n        [checked]=\"isWorkobject | async\"\n      >\n        <span class=\"toggleButtonTitle\">Workobject</span>\n      </mat-button-toggle>\n    </mat-button-toggle-group>\n  </div>\n</div>\n","import { Component } from '@angular/core';\nimport { SettingsService } from '../../Service/Settings/settings.service';\nimport { ModelerService } from '../../Service/Modeler/modeler.service';\nimport { Observable } from 'rxjs';\nimport { ReplayStateService } from '../../Service/Replay/replay-state.service';\nimport { DirtyFlagService } from '../../Service/DirtyFlag/dirty-flag.service';\nimport {\n  ExportDialogData,\n  ExportOption,\n} from '../../Domain/Dialog/exportDialogData';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { ExportDialogComponent } from '../Dialog/export-dialog/export-dialog.component';\nimport { InfoDialogData } from '../../Domain/Dialog/infoDialogData';\nimport { InfoDialogComponent } from '../Dialog/info-dialog/info-dialog.component';\nimport { DialogService } from '../../Service/Dialog/dialog.service';\nimport { ReplayService } from '../../Service/Replay/replay.service';\nimport { ExportService } from '../../Service/Export/export.service';\nimport { ImportDomainStoryService } from '../../Service/Import/import-domain-story.service';\nimport { LabelDictionaryDialogComponent } from '../Dialog/label-dictionary-dialog/label-dictionary-dialog.component';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport {\n  SNACKBAR_DURATION,\n  SNACKBAR_INFO,\n} from '../../Domain/Common/constants';\nimport { AutosaveService } from '../../Service/Autosave/autosave.service';\nimport { TitleService } from '../../Service/Title/title.service';\nimport { RendererService } from '../../Service/Renderer/renderer.service';\n\n@Component({\n  selector: 'app-header-buttons',\n  templateUrl: './header-buttons.component.html',\n  styleUrls: ['./header-buttons.component.scss'],\n})\nexport class HeaderButtonsComponent {\n  isReplay$: Observable<boolean>;\n  isDirty$: Observable<boolean>;\n\n  constructor(\n    private settingsService: SettingsService,\n    private modelerService: ModelerService,\n    private replayStateService: ReplayStateService,\n    private dirtyFlagService: DirtyFlagService,\n    private dialogService: DialogService,\n    private replayService: ReplayService,\n    private exportService: ExportService,\n    private importService: ImportDomainStoryService,\n    private titleService: TitleService,\n    private renderService: RendererService,\n    private snackbar: MatSnackBar\n  ) {\n    this.isReplay$ = this.replayStateService.replayOn$;\n    this.isDirty$ = this.dirtyFlagService.dirty$;\n  }\n  import(): void {\n    // @ts-ignore\n    const filename = document.getElementById('import').files[0].name;\n    if (filename.endsWith('.dst')) {\n      this.importService.importDST(\n        // @ts-ignore\n        document.getElementById('import').files[0],\n        filename,\n        false\n      );\n    } else if (filename.endsWith('.dst.svg')) {\n      this.importService.importDST(\n        // @ts-ignore\n        document.getElementById('import').files[0],\n        filename,\n        true\n      );\n    } else if (filename.endsWith('.egn')) {\n      this.importService.importEGN(\n        // @ts-ignore\n        document.getElementById('import').files[0],\n        filename,\n        false\n      );\n    } else if (filename.endsWith('.egn.svg')) {\n      this.importService.importEGN(\n        // @ts-ignore\n        document.getElementById('import').files[0],\n        filename,\n        true\n      );\n    }\n    this.modelerService.commandStackChanged();\n  }\n\n  openSettings(): void {\n    this.settingsService.open();\n  }\n\n  /** Open Dialogs **/\n  openDownloadDialog(): void {\n    if (this.exportService.isDomainStoryExportable()) {\n      const SVGDownloadOption = new ExportOption(\n        'SVG',\n        'Download an SVG-Image with the Domain-Story embedded. Can be used to save and share your Domain-Story.',\n        (withTitle: boolean, useWhiteBackground: boolean) =>\n          this.exportService.downloadSVG(withTitle, useWhiteBackground)\n      );\n      const EGNDownloadOption = new ExportOption(\n        'EGN',\n        'Download an EGN-File with the Domain-Story. Can be used to save and share your Domain-Story.',\n        (withTitle: boolean, useWhiteBackground: boolean) =>\n          this.exportService.downloadDST()\n      );\n      const PNGDownloadOption = new ExportOption(\n        'PNG',\n        'Donwload a PNG-Image of the DOmain-Story. This does not include the Domain-Story!',\n        (withTitle: boolean, useWhiteBackground: boolean) =>\n          this.exportService.downloadPNG(withTitle)\n      );\n      const HTMLDownloadOption = new ExportOption(\n        'HTML-Presentation',\n        'Download an HTML-Presentation. This does not include the Domain-Story!',\n        (withTitle: boolean, useWhiteBackground: boolean) =>\n          this.exportService.downloadHTMLPresentation()\n      );\n\n      const config = new MatDialogConfig();\n      config.disableClose = false;\n      config.autoFocus = true;\n      config.data = new ExportDialogData('Export', [\n        SVGDownloadOption,\n        EGNDownloadOption,\n        PNGDownloadOption,\n        HTMLDownloadOption,\n      ]);\n\n      this.dialogService.openDialog(ExportDialogComponent, config);\n    } else {\n      this.snackbar.open('No Domain Story to be exported', undefined, {\n        duration: SNACKBAR_DURATION,\n        panelClass: SNACKBAR_INFO,\n      });\n    }\n  }\n\n  openKeyboardShortcutsDialog(): void {\n    const title = 'Keyboard shortcuts';\n    const shortCutText =\n      'Undo:\\t\\t\\t\\t\\tctrl + Z \\n' +\n      'Redo:\\t\\t\\t\\t\\tctrl + Y    OR   ctrl + shift + Z\\n' +\n      'Select All:\\t\\t\\t\\tctrl + A\\n' +\n      'Export as EGN:\\t\\t\\tctrl + S\\n' +\n      'Import Domain Story: \\tctrl + L\\n' +\n      'Search for text:\\t\\t\\tctrl + F\\n' +\n      'Direct editing:\\t\\t\\tE\\n' +\n      'Hand tool:\\t\\t\\t\\tH\\n' +\n      'Lasso tool:\\t\\t\\t\\tL\\n' +\n      'Space tool:\\t\\t\\t\\tS';\n\n    const config = new MatDialogConfig();\n    config.disableClose = false;\n    config.autoFocus = true;\n\n    config.data = new InfoDialogData(title, shortCutText, true);\n\n    this.dialogService.openDialog(InfoDialogComponent, config);\n  }\n\n  openLabelDictionary(): void {\n    if (this.exportService.isDomainStoryExportable()) {\n      const config = new MatDialogConfig();\n      config.disableClose = false;\n      config.autoFocus = true;\n\n      this.dialogService.openDialog(LabelDictionaryDialogComponent, config);\n    } else {\n      this.snackbar.open(\n        'There are currently no Elements on the canvas',\n        undefined,\n        {\n          duration: SNACKBAR_DURATION,\n          panelClass: SNACKBAR_INFO,\n        }\n      );\n    }\n  }\n\n  createNewDomainStory(): void {\n    this.titleService.reset();\n    this.renderService.reset();\n  }\n\n  /** Replay functions **/\n  startReplay(): void {\n    this.replayService.startReplay();\n  }\n\n  stopReplay(): void {\n    this.replayService.stopReplay();\n  }\n\n  previousStep(): void {\n    this.replayService.previousStep();\n  }\n\n  nextStep(): void {\n    this.replayService.nextStep();\n  }\n}\n","<div *ngIf=\"!(isReplay$ | async)\">\n  <button\n    id=\"buttonStartReplay\"\n    class=\"headerButton\"\n    title=\"Start replay\"\n    (click)=\"startReplay()\"\n  >\n    <span class=\"material-icons materialIconButton\"> play_arrow </span>\n  </button>\n  <button\n    id=\"buttonImport\"\n    class=\"headerButton\"\n    title=\"Import story from file\"\n    onclick=\"document.getElementById('import').click();\"\n  >\n    <span class=\"material-icons materialIconButton\"> unarchive </span>\n  </button>\n  <input\n    type=\"file\"\n    accept=\".dst, .dst.svg, .egn, .egn.svg\"\n    style=\"display: none\"\n    id=\"import\"\n    onclick=\"this.value=null;\"\n    (change)=\"import()\"\n    name=\"file\"\n  />\n  <button\n    class=\"headerButton\"\n    id=\"export\"\n    title=\"Export story as .egn, .svg or .png file\"\n    (click)=\"openDownloadDialog()\"\n  >\n    <span\n      class=\"material-icons-outlined materialIconButton\"\n      *ngIf=\"!(isDirty$ | async)\"\n    >\n      archive\n    </span>\n    <span class=\"material-icons materialIconButton\" *ngIf=\"isDirty$ | async\">\n      archive\n    </span>\n  </button>\n  <button\n    class=\"headerButton\"\n    title=\"Label Dictionary\"\n    (click)=\"openLabelDictionary()\"\n  >\n    <span class=\"material-icons materialIconButton\" title=\"Label Dictionary\">\n      spellcheck\n    </span>\n  </button>\n  <button class=\"headerButton\" title=\"Settings\" (click)=\"openSettings()\">\n    <span\n      class=\"material-icons materialIconButton\"\n      title=\"Change Icons and Settings\"\n    >\n      settings\n    </span>\n  </button>\n  <button\n    class=\"headerButton\"\n    title=\"Show keyboard shortcuts\"\n    (click)=\"openKeyboardShortcutsDialog()\"\n  >\n    <span class=\"material-icons materialIconButton\"> info </span>\n  </button>\n  <button\n    class=\"headerButton\"\n    title=\"Create a new domain story\"\n    (click)=\"createNewDomainStory()\"\n  >\n    <span class=\"material-icons materialIconButton\"> delete </span>\n  </button>\n</div>\n<div *ngIf=\"isReplay$ | async\">\n  <button class=\"headerButton\" title=\"Previous Step\" (click)=\"previousStep()\">\n    <span class=\"material-icons materialIconButton\"> skip_previous </span>\n  </button>\n  <button class=\"headerButton\" title=\"NextStep\" (click)=\"nextStep()\">\n    <span class=\"material-icons materialIconButton\"> skip_next </span>\n  </button>\n  <button class=\"headerButton\" title=\"Stop replay\" (click)=\"stopReplay()\">\n    <span class=\"material-icons materialIconButton\"> stop </span>\n  </button>\n</div>\n","import { Component } from '@angular/core';\nimport { combineLatest, map, Observable } from 'rxjs';\nimport { TitleService } from '../../Service/Title/title.service';\nimport { ReplayService } from '../../Service/Replay/replay.service';\nimport { ReplayStateService } from '../../Service/Replay/replay-state.service';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { HeaderDialogComponent } from '../Dialog/header-dialog/header-dialog.component';\nimport { DialogService } from '../../Service/Dialog/dialog.service';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss'],\n})\nexport class HeaderComponent {\n  title$ = this.titleService.title$;\n  description$ = this.titleService.description$;\n  showDescription$ = this.titleService.showDescription$;\n  currentDomainName$ = this.titleService.domainName$;\n\n  isReplay$: Observable<boolean>;\n  stepDescription$: Observable<string>;\n\n  mouseOver = false;\n\n  showDescription: Observable<boolean>;\n\n  constructor(\n    private titleService: TitleService,\n    private replayService: ReplayService,\n    private replayStateService: ReplayStateService,\n    private dialogService: DialogService\n  ) {\n    this.isReplay$ = this.replayStateService.replayOn$;\n\n    this.stepDescription$ = combineLatest([\n      this.replayService.currentStep$,\n      this.replayService.maxStepNumber$,\n    ]).pipe(map(([step, count]) => `${step}/${count}`));\n\n    this.showDescription = this.titleService.showDescription$;\n  }\n\n  openHeaderDialog(): void {\n    const config = new MatDialogConfig();\n    config.disableClose = false;\n    config.autoFocus = true;\n    this.dialogService.openDialog(HeaderDialogComponent, config);\n  }\n\n  setShowDescription(show: boolean): void {\n    this.titleService.setShowDescription(show);\n  }\n}\n","<mat-toolbar color=\"primary\" class=\"toolbar\">\n  <mat-toolbar-row>\n    <button\n      class=\"headerButton\"\n      title=\"Hide Description\"\n      *ngIf=\"showDescription | async\"\n      (click)=\"setShowDescription(false)\"\n    >\n      <span class=\"material-icons materialIconButton toggle\">\n        expand_less\n      </span>\n    </button>\n    <button\n      class=\"headerButton\"\n      title=\"Show Description\"\n      *ngIf=\"!(showDescription | async)\"\n      (click)=\"setShowDescription(true)\"\n    >\n      <span class=\"material-icons materialIconButton toggle\"> expand_more</span>\n    </button>\n    <span class=\"mr-10\">\n      <span\n        class=\"headline\"\n        (click)=\"openHeaderDialog()\"\n        title=\"Edit Title and Description\"\n      >\n        {{ title$ | async }}\n        <span class=\"material-icons materialIconButton editIcon\"> edit </span>\n      </span>\n    </span>\n\n    <span title=\"Domain\">{{ currentDomainName$ | async }} </span>\n    <span class=\"domainNameSpacer\"></span>\n    <span title=\"Replay Step\" *ngIf=\"isReplay$ | async\">\n      Step: {{ stepDescription$ | async }}</span\n    >\n\n    <span class=\"buttonSpacer\"></span>\n\n    <app-header-buttons></app-header-buttons>\n  </mat-toolbar-row>\n</mat-toolbar>\n<mat-card class=\"smallScrollbar description\" *ngIf=\"showDescription$ | async\">\n  <span class=\"descriptionText\">{{ description$ | async }}</span>\n</mat-card>\n","import { AfterViewInit, Component, EventEmitter, Output } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { WorkObjectLabelEntry } from '../../Domain/LabelDictionary/workObjectLabelEntry';\nimport { LabelEntry } from '../../Domain/LabelDictionary/labelEntry';\nimport { LabelDictionaryService } from '../../Service/LabelDictionary/label-dictionary.service';\n\n@Component({\n  selector: 'app-label-dictionary',\n  templateUrl: './label-dictionary.component.html',\n  styleUrls: ['./label-dictionary.component.scss'],\n})\nexport class LabelDictionaryComponent implements AfterViewInit {\n  workobjectEntriesSubject: BehaviorSubject<WorkObjectLabelEntry[]>;\n  activityEntriesSubject: BehaviorSubject<LabelEntry[]>;\n\n  workObjectEntries: WorkObjectLabelEntry[];\n  activityEntries: LabelEntry[];\n\n  @Output()\n  closeEmitter: EventEmitter<void> = new EventEmitter<void>();\n\n  constructor(private labelDictionaryService: LabelDictionaryService) {\n    this.labelDictionaryService.createLabelDictionaries();\n    this.workObjectEntries = this.labelDictionaryService.getWorkObjectLabels();\n    this.activityEntries = this.labelDictionaryService.getActivityLabels();\n\n    this.workobjectEntriesSubject = new BehaviorSubject(this.workObjectEntries);\n    this.activityEntriesSubject = new BehaviorSubject(this.activityEntries);\n  }\n\n  ngAfterViewInit(): void {\n    this.labelDictionaryService.createLabelDictionaries();\n    this.workobjectEntriesSubject.next(\n      this.labelDictionaryService.getWorkObjectLabels()\n    );\n    this.activityEntriesSubject.next(\n      this.labelDictionaryService.getActivityLabels()\n    );\n  }\n\n  save(): void {\n    this.workObjectEntries = this.workobjectEntriesSubject.value;\n    this.activityEntries = this.activityEntriesSubject.value;\n\n    const activityNames: string[] = [];\n    const originalActivityNames: string[] = [];\n\n    const workObjectNames: string[] = [];\n    const originalWorkObjectNames: string[] = [];\n\n    this.activityEntries\n      .filter((a) => a.name !== a.originalName)\n      .forEach((activity) => {\n        activityNames.push(activity.name);\n        originalActivityNames.push(activity.originalName);\n      });\n\n    this.workObjectEntries\n      .filter((w) => w.name !== w.originalName)\n      .forEach((workobject) => {\n        workObjectNames.push(workobject.name);\n        originalWorkObjectNames.push(workobject.originalName);\n      });\n\n    this.labelDictionaryService.massRenameLabels(\n      activityNames,\n      originalActivityNames,\n      workObjectNames,\n      originalWorkObjectNames\n    );\n    this.closeEmitter.emit();\n  }\n\n  cancel(): void {\n    this.workObjectEntries.forEach((w) => {\n      w.name = w.originalName;\n    });\n    this.activityEntries.forEach((a) => {\n      a.name = a.originalName;\n    });\n\n    this.workobjectEntriesSubject.next(this.workObjectEntries);\n    this.activityEntriesSubject.next(this.activityEntries);\n  }\n\n  updateActivityEntry($event: Event, activityEntry: LabelEntry) {\n    let entries = this.activityEntriesSubject.value;\n    entries.filter(\n      (e) => e.originalName === activityEntry.originalName\n      // @ts-ignore\n    )[0].name = $event.target.value;\n    this.activityEntriesSubject.next(entries);\n  }\n\n  updateWorkobjectEntry($event: Event, workobjectEntry: LabelEntry) {\n    let entries = this.workobjectEntriesSubject.value;\n    entries.filter(\n      (e) => e.originalName === workobjectEntry.originalName\n      // @ts-ignore\n    )[0].name = $event.target.value;\n    this.workobjectEntriesSubject.next(entries);\n  }\n\n  preventDefault(event: Event): void {\n    event.preventDefault();\n  }\n\n  close(): void {\n    this.closeEmitter.emit();\n  }\n}\n","<mat-dialog-content>\n  <div class=\"workobjectList\">\n    <h3>Workobjects</h3>\n    <mat-list>\n      <mat-list-item\n        *ngFor=\"let workobjectEntry of workobjectEntriesSubject | async\"\n      >\n        <mat-form-field class=\"inputText\">\n          <input\n            matInput\n            class=\"inputText\"\n            [value]=\"workobjectEntry.name\"\n            (change)=\"updateWorkobjectEntry($event, workobjectEntry)\"\n          />\n        </mat-form-field>\n      </mat-list-item>\n    </mat-list>\n  </div>\n  <div class=\"activityList\">\n    <h3 class=\"activityListTitle\">Activities</h3>\n    <mat-list>\n      <mat-list-item\n        *ngFor=\"let activityEntry of activityEntriesSubject | async\"\n      >\n        <mat-form-field class=\"inputText\">\n          <textarea\n            matInput\n            class=\"inputText activity\"\n            [value]=\"activityEntry.name\"\n            (change)=\"updateActivityEntry($event, activityEntry)\"\n            cdkTextareaAutosize\n            cdkAutosizeMinRows=\"1\"\n            cdkAutosizeMaxRows=\"3\"\n            (keydown.enter)=\"preventDefault($event)\"\n            (keyup.enter)=\"save()\"\n            (keyup.escape)=\"close()\"\n          ></textarea>\n        </mat-form-field>\n      </mat-list-item>\n    </mat-list>\n  </div>\n</mat-dialog-content>\n<mat-dialog-actions>\n  <button mat-flat-button (click)=\"close()\">Cancel</button>\n  <button mat-flat-button color=\"primary\" (click)=\"save()\">\n    Update Dictionaries\n  </button>\n</mat-dialog-actions>\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-general-settings',\n  templateUrl: './general-settings.component.html',\n  styleUrls: ['./general-settings.component.scss'],\n})\nexport class GeneralSettingsComponent {}\n","<div class=\"content\">\n  <app-autosave-settings></app-autosave-settings>\n</div>\n","import { Component } from '@angular/core';\nimport { SettingsService } from 'src/app/Service/Settings/settings.service';\nimport { ModelerService } from 'src/app/Service/Modeler/modeler.service';\nimport { DomainConfiguration } from 'src/app/Domain/Common/domainConfiguration';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { AutosaveConfigurationService } from '../../Service/Autosave/autosave-configuration.service';\nimport { DomainCustomizationService } from '../../Service/DomainConfiguration/domain-customization.service';\n\n@Component({\n  selector: 'app-settings',\n  templateUrl: './settings.component.html',\n  styleUrls: ['./settings.component.scss'],\n})\nexport class SettingsComponent {\n  domainConfiguration: DomainConfiguration | undefined;\n  showGeneralSettings = new BehaviorSubject<boolean>(false);\n  showDomainCustomization = new BehaviorSubject<boolean>(true);\n\n  constructor(\n    private settingsService: SettingsService,\n    private modelerService: ModelerService,\n    private domainCustomizationService: DomainCustomizationService\n  ) {}\n\n  close(): void {\n    const savedConfiguration =\n      this.domainCustomizationService.getAndClearSavedConfiguration();\n    if (savedConfiguration) {\n      this.modelerService.restart(savedConfiguration);\n    }\n    this.settingsService.close();\n  }\n\n  openGeneralSettings() {\n    this.showGeneralSettings.next(true);\n    this.showDomainCustomization.next(false);\n  }\n\n  openDomainCustomization() {\n    this.showGeneralSettings.next(false);\n    this.showDomainCustomization.next(true);\n  }\n}\n","<div class=\"settings\">\n  <mat-toolbar color=\"primary\" class=\"toolbar\">\n    <mat-toolbar-row>\n      <button class=\"headerButton noPadding\" mat-icon-button (click)=\"close()\">\n        <span class=\"material-icons-outlined materialIconButton\">\n          arrow_back</span\n        >\n      </button>\n      <div class=\"paddedButton\">\n        <button\n          class=\"headerButton mr-10\"\n          [class.highlight]=\"showDomainCustomization | async\"\n          mat-button\n          (click)=\"openDomainCustomization()\"\n        >\n          <span class=\"headline\">Customize Icons for Your Domain</span>\n        </button>\n        <button\n          class=\"headerButton\"\n          [class.highlight]=\"showGeneralSettings | async\"\n          mat-button\n          (click)=\"openGeneralSettings()\"\n        >\n          <span class=\"headline\">General Settings</span>\n        </button>\n      </div>\n    </mat-toolbar-row>\n  </mat-toolbar>\n\n  <app-general-settings\n    *ngIf=\"showGeneralSettings | async\"\n  ></app-general-settings>\n  <app-domain-configuration\n    *ngIf=\"showDomainCustomization | async\"\n    class=\"tab\"\n  ></app-domain-configuration>\n</div>\n","import { Injectable } from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\nimport { StorageService } from '../BrowserStorage/storage.service';\nimport { AutosaveConfiguration } from '../../Domain/Autosave/autosave-configuration';\nimport {\n  DEFAULT_AUTOSAVES_AMOUNT,\n  DEFAULT_AUTOSAVES_ENABLED,\n  DEFAULT_AUTOSAVES_INTERVAL,\n} from 'src/app/Domain/Common/constants';\n\nconst AUTOSAVE_CONFIGURATION_TAG = 'autosaveConfiguration';\n\nconst defaultConfiguration: AutosaveConfiguration = {\n  activated: DEFAULT_AUTOSAVES_ENABLED,\n  interval: DEFAULT_AUTOSAVES_INTERVAL,\n  amount: DEFAULT_AUTOSAVES_AMOUNT,\n};\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AutosaveConfigurationService {\n  private configuration = defaultConfiguration;\n\n  private readonly configurationSubject =\n    new ReplaySubject<AutosaveConfiguration>(1);\n  readonly configuration$ = this.configurationSubject.asObservable();\n\n  constructor(private storageService: StorageService) {\n    this.initializeConfiguration();\n  }\n\n  private initializeConfiguration() {\n    this.loadConfiguration();\n    this.configurationSubject.next(this.configuration);\n  }\n\n  setConfiguration(configuration: AutosaveConfiguration): boolean {\n    try {\n      this.configuration = configuration;\n      this.saveConfiguration();\n      this.configurationSubject.next(configuration);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  private loadConfiguration() {\n    this.configuration =\n      this.storageService.get(AUTOSAVE_CONFIGURATION_TAG) ??\n      defaultConfiguration;\n  }\n\n  private saveConfiguration() {\n    this.storageService.set(AUTOSAVE_CONFIGURATION_TAG, this.configuration);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { RendererService } from '../Renderer/renderer.service';\nimport { ExportService } from '../Export/export.service';\nimport { Draft } from '../../Domain/Autosave/draft';\nimport { AutosaveConfigurationService } from './autosave-configuration.service';\nimport { IconDictionaryService } from '../DomainConfiguration/icon-dictionary.service';\nimport { elementTypes } from '../../Domain/Common/elementTypes';\nimport { fromConfigurationFromFile } from '../../Domain/Common/domainConfiguration';\nimport { StorageService } from '../BrowserStorage/storage.service';\nimport { TitleService } from '../Title/title.service';\nimport { AutosaveConfiguration } from '../../Domain/Autosave/autosave-configuration';\nimport { Subject } from 'rxjs';\nimport {\n  INITIAL_DESCRIPTION,\n  INITIAL_TITLE,\n  SNACKBAR_DURATION,\n  SNACKBAR_INFO,\n} from '../../Domain/Common/constants';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\nexport const DRAFTS_TAG = 'autosaveDrafts';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AutosaveService {\n  private autosaveTimer: any;\n  autosavedDraftsChanged$ = new Subject<void>();\n\n  constructor(\n    private autosaveConfiguration: AutosaveConfigurationService,\n    private exportService: ExportService,\n    private iconDictionaryService: IconDictionaryService,\n    private rendererService: RendererService,\n    private snackbar: MatSnackBar,\n    private storageService: StorageService,\n    private titleService: TitleService\n  ) {\n    this.autosaveConfiguration.configuration$.subscribe((configuration) =>\n      this.updateConfiguration(configuration)\n    );\n  }\n\n  loadCurrentDrafts(): Draft[] {\n    const drafts = this.readDrafts();\n    this.sortDrafts(drafts);\n    return drafts;\n  }\n\n  loadDraft(draft: Draft): void {\n    const configFromFile = draft.configAndDST.domain;\n    const config = fromConfigurationFromFile(configFromFile);\n    const story = JSON.parse(draft.configAndDST.dst);\n\n    this.titleService.updateTitleAndDescription(\n      draft.title,\n      draft.description,\n      false\n    );\n\n    const actorIcons = this.iconDictionaryService.getElementsOfType(\n      story,\n      elementTypes.ACTOR\n    );\n    const workObjectIcons = this.iconDictionaryService.getElementsOfType(\n      story,\n      elementTypes.WORKOBJECT\n    );\n    this.iconDictionaryService.updateIconRegistries(\n      actorIcons,\n      workObjectIcons,\n      config\n    );\n    this.rendererService.importStory(story, true, config, false);\n  }\n\n  removeAllDrafts() {\n    this.storageService.set(DRAFTS_TAG, []);\n    this.autosavedDraftsChanged$.next();\n  }\n\n  loadLatestDraft() {\n    const drafts = this.readDrafts();\n    if (drafts.length === 0) {\n      return;\n    }\n    this.loadDraft(drafts[0]);\n  }\n\n  private updateConfiguration(configuration: AutosaveConfiguration) {\n    this.stopTimer();\n\n    if (configuration.activated) {\n      this.startTimer(configuration.interval, configuration.amount);\n    }\n  }\n\n  private stopTimer(): void {\n    if (this.autosaveTimer) {\n      clearInterval(this.autosaveTimer);\n      this.autosaveTimer = undefined;\n    }\n  }\n\n  private startTimer(interval: number, amount: number): void {\n    this.autosaveTimer = setInterval(() => {\n      const drafts = this.loadCurrentDrafts();\n      const newDraft = this.createDraft();\n      let isChanged = amount > 0;\n      if (drafts.length > 0) {\n        isChanged = isChanged && !this.isSame(newDraft, drafts[0]);\n      }\n      if (isChanged && !this.isDraftEmpty(newDraft)) {\n        drafts.unshift(newDraft);\n        while (drafts.length > amount) {\n          drafts.pop();\n        }\n        this.writeDrafts(drafts);\n        this.snackbar.open('Draft Saved', undefined, {\n          panelClass: SNACKBAR_INFO,\n          duration: SNACKBAR_DURATION,\n        });\n        this.autosavedDraftsChanged$.next();\n      }\n    }, interval * 1000);\n  }\n\n  private isDraftEmpty(draft: Draft) {\n    return (\n      draft.title === INITIAL_TITLE &&\n      draft.description === INITIAL_DESCRIPTION &&\n      JSON.parse(draft.configAndDST.dst).length === 0\n    );\n  }\n\n  private isSame(a: Draft, b: Draft) {\n    return (\n      a.title === b.title &&\n      a.description === b.description &&\n      JSON.stringify(a.configAndDST) === JSON.stringify(b.configAndDST)\n    );\n  }\n\n  private writeDrafts(drafts: Draft[]) {\n    this.storageService.set(DRAFTS_TAG, drafts);\n  }\n\n  private readDrafts(): Draft[] {\n    return this.storageService.get(DRAFTS_TAG) ?? [];\n  }\n\n  private createDraft(): Draft {\n    const dst = JSON.stringify(this.rendererService.getStory(), null, 2);\n    const configAndDST = this.exportService.createConfigAndDST(dst);\n\n    const date = new Date().toString().slice(0, 25);\n\n    return {\n      title: this.titleService.getTitle(),\n      description: this.titleService.getDescription(),\n      configAndDST,\n      date,\n    };\n  }\n\n  private sortDrafts(drafts: Draft[]): void {\n    drafts.sort((a: Draft, b: Draft) => {\n      const aDate = Date.parse(a.date);\n      const bDate = Date.parse(b.date);\n      return aDate > bDate ? 0 : 1;\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { DOMAIN_CONFIGURATION_TAG } from '../../Domain/Common/constants';\nimport {\n  DomainConfiguration,\n  fromConfigurationFromFile,\n} from '../../Domain/Common/domainConfiguration';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class StorageService {\n  set(key: string, value: any) {\n    localStorage.setItem(key, JSON.stringify(value));\n  }\n\n  get(key: string): any {\n    const json = localStorage.getItem(key);\n    if (json) {\n      return JSON.parse(json);\n    }\n    return null;\n  }\n\n  removeItem(key: string) {\n    localStorage.removeItem(key);\n  }\n\n  checkValidityOfConfiguration(configuratioFromFile: DomainConfiguration) {\n    return (\n      configuratioFromFile.actors.keysArray().length > 1 &&\n      configuratioFromFile.workObjects.keysArray().length > 1 &&\n      !configuratioFromFile.actors\n        .all()\n        .some((e) => typeof e.value !== 'string') &&\n      !configuratioFromFile.workObjects\n        .all()\n        .some((e) => typeof e.value !== 'string')\n    );\n  }\n\n  getStoredDomainConfiguration(): DomainConfiguration | undefined {\n    const domainString = localStorage.getItem(DOMAIN_CONFIGURATION_TAG);\n\n    if (!domainString) {\n      return;\n    } else {\n      const configuratioFromFile = fromConfigurationFromFile(\n        JSON.parse(domainString)\n      );\n      if (this.checkValidityOfConfiguration(configuratioFromFile)) {\n        return configuratioFromFile;\n      }\n    }\n    return;\n  }\n\n  setStoredDomainConfiguration(config: DomainConfiguration): void {\n    const actors: {\n      [p: string]: any;\n    } = {};\n    config.actors.keysArray().forEach((key) => {\n      actors[key] = config.actors.get(key);\n    });\n    const workObjects: {\n      [p: string]: any;\n    } = {};\n    config.workObjects.keysArray().forEach((key) => {\n      workObjects[key] = config.workObjects.get(key);\n    });\n\n    const configForStorage = {\n      name: config.name,\n      actors: actors,\n      workObjects: workObjects,\n    };\n\n    localStorage.setItem(\n      DOMAIN_CONFIGURATION_TAG,\n      JSON.stringify(configForStorage, null, 2)\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CommandStackService {\n  private commandStack: any;\n\n  constructor() {}\n\n  setCommandStack(commandStack: any): void {\n    this.commandStack = commandStack;\n  }\n\n  execute(action: string, payload: any) {\n    this.commandStack.execute(action, payload);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\nimport { ComponentType } from '@angular/cdk/overlay';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DialogService {\n  constructor(private matDialog: MatDialog) {}\n\n  openDialog(dialog: ComponentType<any>, config: MatDialogConfig): void {\n    this.matDialog.open(dialog, config);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DirtyFlagService {\n  private isDirtySubject = new BehaviorSubject<boolean>(false);\n  dirty$ = this.isDirtySubject.asObservable();\n\n  makeDirty(): void {\n    this.isDirtySubject.next(true);\n  }\n\n  makeClean(): void {\n    this.isDirtySubject.next(false);\n  }\n\n  get dirty(): boolean {\n    return this.isDirtySubject.value;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BusinessObject } from 'src/app/Domain/Common/businessObject';\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\nimport { elementTypes } from 'src/app/Domain/Common/elementTypes';\nimport { StoryStep } from 'src/app/Domain/Replay/storyStep';\nimport {\n  HIGHLIGHT_COLOR,\n  HIGHLIGHT_NUMBER_BACKGROUNG_COLOR,\n  HIGHLIGHT_NUMBER_COLOR,\n  HIGHLIGHT_STROKE_WIDTH,\n  NUMBER_BACKGROUND_COLOR,\n  NUMBER_COLOR,\n  STROKE_WIDTH,\n} from '../../Domain/DomManipulation/replayConstants';\n\n@Injectable({\n  providedIn: 'root',\n})\n/**\n * Manipulates the DOM during replay to only show the elements of the current Step\n */\nexport class DomManipulationService {\n  constructor(private elementRegistryService: ElementRegistryService) {}\n\n  showAll(): void {\n    this.removeHighlights();\n    this.elementRegistryService\n      .getAllCanvasObjects()\n      .slice()\n      .concat(this.elementRegistryService.getAllGroups().slice())\n      .map((e) => e.businessObject)\n      .forEach((element) => {\n        const domObject = document.querySelector(\n          '[data-element-id=' + element.id + ']'\n        );\n        // @ts-ignore\n        domObject.style.display = 'block';\n      });\n  }\n\n  showStep(replayStep: StoryStep, previousStep?: StoryStep): void {\n    this.removeHighlights();\n    const notShown = this.getAllNotShown(replayStep.objects);\n\n    notShown.forEach((element) => {\n      const domObject = document.querySelector(\n        '[data-element-id=' + element.id + ']'\n      );\n      if (domObject) {\n        // @ts-ignore\n        domObject.style.display = 'none';\n      }\n    });\n\n    this.hightlightStep(\n      previousStep\n        ? replayStep.objects.filter((o) => !previousStep.objects.includes(o))\n        : replayStep.objects\n    );\n\n    replayStep.objects.forEach((element) => {\n      const domObject = document.querySelector(\n        '[data-element-id=' + element.id + ']'\n      );\n      if (domObject) {\n        // @ts-ignore\n        domObject.style.display = 'block';\n      }\n    });\n  }\n\n  getNumberDomForActivity(activity: SVGPolylineElement): any {\n    const numberDOMS = activity.parentElement?.getElementsByClassName(\n      'djs-labelNumber'\n    ) || ['', ''];\n    return {\n      numberBackgroundDom: numberDOMS[0],\n      numberTextDom: numberDOMS[1],\n    };\n  }\n\n  private removeHighlights(): void {\n    const allActivities = this.elementRegistryService.getAllActivities();\n    const allConnections = this.elementRegistryService.getAllConnections();\n\n    allActivities.forEach((activity) => {\n      const querySelector = document.querySelector(\n        '[data-element-id=' + activity.id + ']'\n      );\n      if (querySelector) {\n        const activityDomObject =\n          querySelector.getElementsByTagName('polyline')[0];\n\n        activityDomObject.style.stroke =\n          activity.businessObject.pickedColor || 'black';\n        activityDomObject.style.strokeWidth = STROKE_WIDTH;\n\n        const { numberBackgroundDom, numberTextDom } =\n          this.getNumberDomForActivity(activityDomObject);\n        if (numberBackgroundDom && numberTextDom) {\n          numberBackgroundDom.style.fill = NUMBER_BACKGROUND_COLOR;\n          numberTextDom.style.fill = NUMBER_COLOR;\n        }\n      }\n    });\n\n    allConnections.forEach((connection) => {\n      // @ts-ignore\n      const connectionDomObject = document\n        .querySelector('[data-element-id=' + connection.id + ']')\n        .getElementsByTagName('polyline')[0];\n\n      connectionDomObject.style.stroke =\n        connection.businessObject.pickedColor || 'black';\n      connectionDomObject.style.strokeWidth = '1.5';\n    });\n  }\n\n  private hightlightStep(stepObjects: BusinessObject[]): void {\n    stepObjects\n      .filter((e) => e.type === elementTypes.ACTIVITY)\n      .forEach((activity) => {\n        const querySelector = document.querySelector(\n          '[data-element-id=' + activity.id + ']'\n        );\n        if (querySelector) {\n          const activityDomObject =\n            querySelector.getElementsByTagName('polyline')[0];\n\n          activityDomObject.style.stroke = HIGHLIGHT_COLOR;\n          activityDomObject.style.strokeWidth = HIGHLIGHT_STROKE_WIDTH;\n\n          const { numberBackgroundDom, numberTextDom } =\n            this.getNumberDomForActivity(activityDomObject);\n          if (numberTextDom && numberBackgroundDom) {\n            numberBackgroundDom.style.fill = HIGHLIGHT_NUMBER_BACKGROUNG_COLOR;\n            numberTextDom.style.fill = HIGHLIGHT_NUMBER_COLOR;\n          }\n        }\n      });\n  }\n\n  private getAllNotShown(shownElements: BusinessObject[]): BusinessObject[] {\n    const notShownElements: BusinessObject[] = [];\n    const allObjects = this.elementRegistryService\n      .getAllCanvasObjects()\n      .concat(this.elementRegistryService.getAllGroups());\n\n    allObjects.forEach((element) => {\n      if (!shownElements.includes(element.businessObject)) {\n        if (element.type.includes(elementTypes.CONNECTION)) {\n          // @ts-ignore\n          if (!element.source.type.includes(elementTypes.GROUP)) {\n            notShownElements.push(element.businessObject);\n          } else {\n            // @ts-ignore\n            shownElements.push(element.target);\n          }\n        } else {\n          notShownElements.push(element.businessObject);\n        }\n      }\n    });\n    return notShownElements;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\nimport { IconDictionaryService } from 'src/app/Service/DomainConfiguration/icon-dictionary.service';\nimport { Dictionary } from 'src/app/Domain/Common/dictionary/dictionary';\nimport { elementTypes } from 'src/app/Domain/Common/elementTypes';\nimport {\n  CustomDomainConfiguration,\n  DomainConfiguration,\n  DomainConfigurationForExport,\n} from 'src/app/Domain/Common/domainConfiguration';\nimport { defaultConf } from '../../Domain/Common/iconConfiguration';\nimport { TitleService } from '../Title/title.service';\nimport { INITIAL_DOMAIN_NAME } from '../../Domain/Common/constants';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DomainConfigurationService {\n  constructor(\n    private iconDictionaryService: IconDictionaryService,\n    private elementRegistryService: ElementRegistryService,\n    private titleService: TitleService\n  ) {}\n\n  setDomainName(domainName: string): void {\n    this.titleService.setDomainName(\n      domainName ? domainName : INITIAL_DOMAIN_NAME\n    );\n  }\n\n  exportConfiguration(): void {\n    const domainConfiguration = this.getCurrentConfigurationForExport();\n    if (!domainConfiguration) {\n      return;\n    }\n\n    const configJSONString = JSON.stringify(domainConfiguration, null, 2);\n    const filename = this.titleService.getDomainName();\n    const element = document.createElement('a');\n\n    element.setAttribute(\n      'href',\n      'data:text/plain;charset=utf-8,' + encodeURIComponent(configJSONString)\n    );\n    element.setAttribute('download', filename + '.domain');\n    element.style.display = 'none';\n    document.body.appendChild(element);\n\n    element.click();\n\n    document.body.removeChild(element);\n  }\n\n  loadConfiguration(\n    customConfig: DomainConfiguration,\n    updateDomainName = true\n  ): void {\n    let actorDict = new Dictionary();\n    let workObjectDict = new Dictionary();\n\n    if (customConfig.actors.keysArray()) {\n      actorDict = customConfig.actors;\n      workObjectDict = customConfig.workObjects;\n    } else {\n      actorDict.addEach(customConfig.actors);\n      workObjectDict.addEach(customConfig.workObjects);\n    }\n\n    const actorKeys = actorDict.keysArray();\n    const workObjectKeys = workObjectDict.keysArray();\n\n    this.iconDictionaryService.updateIconRegistries([], [], customConfig);\n\n    this.iconDictionaryService\n      .getIconConfiguration()\n      .appendSRCFile(actorKeys, actorDict, workObjectKeys, workObjectDict);\n\n    this.iconDictionaryService.addIconsFromDomainConfiguration(\n      elementTypes.ACTOR,\n      actorKeys.map((a) => elementTypes.ACTOR + a)\n    );\n    this.iconDictionaryService.addIconsFromDomainConfiguration(\n      elementTypes.WORKOBJECT,\n      workObjectKeys.map((w) => elementTypes.WORKOBJECT + w)\n    );\n\n    if (updateDomainName) {\n      const configurationName = customConfig.name;\n      this.setDomainName(configurationName);\n    }\n  }\n\n  getCurrentConfiguration(): DomainConfiguration | undefined {\n    const actors = this.iconDictionaryService.getActorsDictionary();\n    const workObjects = this.iconDictionaryService.getWorkObjectsDictionary();\n\n    let domainConfiguration;\n\n    if (actors.size() > 0 && workObjects.size() > 0) {\n      domainConfiguration = this.createConfigFromDictionaries(\n        actors,\n        workObjects\n      );\n    }\n    return domainConfiguration;\n  }\n\n  getCurrentConfigurationForExport(): DomainConfigurationForExport | undefined {\n    const currentConfiguration = this.getCurrentConfiguration();\n\n    if (currentConfiguration) {\n      const actors: any = {};\n      const workObjects: any = {};\n\n      currentConfiguration.actors.all().forEach((entry) => {\n        actors[entry.key] = entry.value;\n      });\n      currentConfiguration.workObjects.all().forEach((entry) => {\n        workObjects[entry.key] = entry.value;\n      });\n\n      return {\n        name: currentConfiguration.name,\n        actors: actors,\n        workObjects: workObjects,\n      };\n    }\n    return;\n  }\n\n  getCurrentConfigurationNamesWithoutPrefix(): CustomDomainConfiguration {\n    return {\n      name: this.titleService.getDomainName() || INITIAL_DOMAIN_NAME,\n      actors: this.iconDictionaryService\n        .getActorsDictionary()\n        .keysArray()\n        .map((a) => a.replace(elementTypes.ACTOR, '')),\n      workObjects: this.iconDictionaryService\n        .getWorkObjectsDictionary()\n        .keysArray()\n        .map((w) => w.replace(elementTypes.WORKOBJECT, '')),\n    };\n  }\n\n  createMinimalConfigurationWithDefaultIcons(): DomainConfiguration {\n    const minimalConfig = this.createConfigFromCanvas();\n\n    defaultConf.actors.forEach((iconName) => {\n      minimalConfig.actors.add(\n        this.iconDictionaryService.getIconSource(iconName),\n        iconName\n      );\n    });\n    defaultConf.workObjects.forEach((iconName) => {\n      minimalConfig.workObjects.add(\n        this.iconDictionaryService.getIconSource(iconName),\n        iconName\n      );\n    });\n\n    return minimalConfig;\n  }\n\n  private createConfigFromDictionaries(\n    actorsDict: Dictionary,\n    workObjectsDict: Dictionary\n  ): DomainConfiguration {\n    const actorNames = actorsDict.keysArray();\n    const workobjectNames = workObjectsDict.keysArray();\n    const newActors = new Dictionary();\n    const newWorkobjects = new Dictionary();\n\n    // Fill Configuration from Canvas-Objects\n    actorNames.forEach((actor) => {\n      newActors.add(\n        actorsDict.get(actor),\n        actor.replace(elementTypes.ACTOR, '')\n      );\n    });\n    workobjectNames.forEach((workObject) => {\n      newWorkobjects.add(\n        workObjectsDict.get(workObject),\n        workObject.replace(elementTypes.WORKOBJECT, '')\n      );\n    });\n\n    return {\n      name: this.titleService.getDomainName(),\n      actors: newActors,\n      workObjects: newWorkobjects,\n    };\n  }\n\n  private createConfigFromCanvas(): DomainConfiguration {\n    const config = {\n      name: INITIAL_DOMAIN_NAME,\n      actors: new Dictionary(),\n      workObjects: new Dictionary(),\n    };\n\n    let allCanvasObjects = this.elementRegistryService.getAllCanvasObjects();\n\n    allCanvasObjects\n      .map((e) => e.businessObject)\n      .forEach((element) => {\n        const type = element.type\n          .replace(elementTypes.ACTOR, '')\n          .replace(elementTypes.WORKOBJECT, '');\n        if (element.type.includes(elementTypes.ACTOR)) {\n          let src = this.iconDictionaryService.getIconSource(type) || '';\n          config.actors.add(src, type);\n        } else if (element.type.includes(elementTypes.WORKOBJECT)) {\n          let src = this.iconDictionaryService.getIconSource(type) || '';\n          config.workObjects.add(src, type);\n        }\n      });\n\n    return config;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  CustomDomainConfiguration,\n  DomainConfiguration,\n} from '../../Domain/Common/domainConfiguration';\nimport { BehaviorSubject } from 'rxjs';\nimport { DomainConfigurationService } from './domain-configuration.service';\nimport { IconDictionaryService } from './icon-dictionary.service';\nimport { getNameFromType } from '../../Utils/naming';\nimport { elementTypes } from '../../Domain/Common/elementTypes';\nimport { IconListItem } from '../../Domain/Domain-Configuration/iconListItem';\nimport { Dictionary } from '../../Domain/Common/dictionary/dictionary';\nimport { ImportDomainStoryService } from '../Import/import-domain-story.service';\nimport { TitleService } from '../Title/title.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport {\n  SNACKBAR_DURATION,\n  SNACKBAR_INFO,\n  SNACKBAR_SUCCESS,\n} from '../../Domain/Common/constants';\nimport { StorageService } from '../BrowserStorage/storage.service';\nimport { UsedIconList } from 'src/app/Domain/Domain-Configuration/UsedIconList';\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DomainCustomizationService {\n  private readonly domainConfigurationTypes: BehaviorSubject<CustomDomainConfiguration>;\n\n  private allIconListItems = new Dictionary();\n\n  private configurationHasChanged = false;\n\n  selectedActors$ = new BehaviorSubject<string[]>([]);\n  selectedWorkobjects$ = new BehaviorSubject<string[]>([]);\n  private changedDomainCofiguration: DomainConfiguration | undefined;\n\n  constructor(\n    private configurationService: DomainConfigurationService,\n    private iconDictionaryService: IconDictionaryService,\n    private importService: ImportDomainStoryService,\n    private titleService: TitleService,\n    private storageService: StorageService,\n    private elementRegistryService: ElementRegistryService,\n    private snackbar: MatSnackBar\n  ) {\n    this.domainConfigurationTypes = new BehaviorSubject(\n      this.configurationService.getCurrentConfigurationNamesWithoutPrefix()\n    );\n\n    this.selectedWorkobjects$.next(\n      this.domainConfigurationTypes.value.workObjects\n    );\n    this.selectedActors$.next(this.domainConfigurationTypes.value.actors);\n\n    iconDictionaryService\n      .getAllIconDictionary()\n      .keysArray()\n      .forEach((iconName) => {\n        this.addIconToAllIconList(iconName);\n      });\n\n    importService.importedConfigurationEvent.subscribe((config) => {\n      this.importConfiguration(config);\n    });\n    const storedDomainConfiguration =\n      this.storageService.getStoredDomainConfiguration();\n    if (storedDomainConfiguration) {\n      this.importConfiguration(storedDomainConfiguration, false);\n    }\n    const importedConfiguration = this.importService.getImportedConfiguration();\n    if (importedConfiguration) {\n      this.importConfiguration(importedConfiguration, false);\n    }\n  }\n\n  importConfiguration(\n    customConfig: DomainConfiguration,\n    saveDomain = true\n  ): void {\n    const actorKeys = customConfig.actors.keysArray();\n    const workObjectKeys = customConfig.workObjects.keysArray();\n\n    this.changeName(customConfig.name);\n    actorKeys.forEach((iconName) => {\n      if (!this.allIconListItems.has(iconName)) {\n        this.addIconToAllIconList(iconName);\n      }\n      const selectedActorNames = this.selectedActors$.value;\n      if (!selectedActorNames.includes(iconName)) {\n        this.selectActor(iconName);\n      }\n    });\n    workObjectKeys.forEach((iconName) => {\n      if (!this.allIconListItems.has(iconName)) {\n        this.addIconToAllIconList(iconName);\n      }\n      const selectedWorkobjectNames = this.selectedWorkobjects$.value;\n      if (!selectedWorkobjectNames.includes(iconName)) {\n        this.selectWorkObject(iconName);\n      }\n    });\n    if (saveDomain) {\n      this.saveDomain(this.elementRegistryService.getUsedIcons(), true);\n    }\n  }\n\n  /** Getter & Setter **/\n  getDomainConfiguration(): BehaviorSubject<CustomDomainConfiguration> {\n    return this.domainConfigurationTypes;\n  }\n\n  getIconForName(iconName: string): BehaviorSubject<IconListItem> {\n    return this.allIconListItems.get(iconName);\n  }\n\n  isIconActor(iconName: string): boolean {\n    return (\n      this.domainConfigurationTypes.value.actors.filter(\n        (actor: string) => actor === iconName\n      ).length > 0\n    );\n  }\n\n  isIconWorkObject(iconName: string): boolean {\n    return (\n      this.domainConfigurationTypes.value.workObjects.filter(\n        (workObject: string) => workObject === iconName\n      ).length > 0\n    );\n  }\n\n  changeName(domainName: string): void {\n    this.titleService.setDomainName(domainName);\n    const changedDomain = this.domainConfigurationTypes.value;\n    changedDomain.name = domainName;\n    this.domainConfigurationTypes.next(changedDomain);\n  }\n\n  /** Seleted Icons **/\n  setAsUnassigned(iconName: string, isActor: boolean): void {\n    if (isActor) {\n      this.deselectActor(iconName);\n    } else {\n      this.deselectWorkobject(iconName);\n    }\n    this.updateIcon(false, false, iconName);\n  }\n\n  setAsActor(isActor: boolean, actor: string): void {\n    if (isActor) {\n      this.updateIcon(true, false, actor);\n      this.selectActor(actor);\n      this.deselectWorkobject(actor);\n\n      const icon = this.iconDictionaryService.getFullDictionary().get(actor);\n      this.iconDictionaryService.getActorsDictionary().add(icon, actor);\n    } else {\n      this.deselectActor(actor);\n      this.updateIcon(false, false, actor);\n      this.iconDictionaryService.getActorsDictionary().delete(actor);\n    }\n  }\n\n  setAsWorkobject(isWorkobject: boolean, workobject: string): void {\n    if (isWorkobject) {\n      this.updateIcon(false, true, workobject);\n      this.selectWorkObject(workobject);\n      this.deselectActor(workobject);\n\n      const icon = this.iconDictionaryService\n        .getFullDictionary()\n        .get(workobject);\n      this.iconDictionaryService\n        .getWorkObjectsDictionary()\n        .add(icon, workobject);\n    } else {\n      this.deselectWorkobject(workobject);\n      this.updateIcon(false, false, workobject);\n      this.iconDictionaryService.getWorkObjectsDictionary().delete(workobject);\n    }\n  }\n\n  selectActor(actor: string): void {\n    const value = this.domainConfigurationTypes.value;\n    if (!value.actors.includes(actor)) {\n      value.actors.push(actor);\n      this.domainConfigurationTypes.next(value);\n      this.updateActorSubject();\n    }\n  }\n\n  selectWorkObject(workObject: string): void {\n    const value = this.domainConfigurationTypes.value;\n    if (!value.workObjects.includes(workObject)) {\n      value.workObjects.push(workObject);\n      this.domainConfigurationTypes.next(value);\n      this.updateWorkObjectSubject();\n    }\n  }\n\n  deselectActor(actor: string): void {\n    if (this.domainConfigurationTypes) {\n      this.domainConfigurationTypes.next({\n        name: this.domainConfigurationTypes.value.name,\n        actors: this.domainConfigurationTypes.value.actors.filter(\n          (a: string) => !a.includes(actor)\n        ),\n        workObjects: this.domainConfigurationTypes.value.workObjects,\n      });\n    }\n    this.updateActorSubject();\n  }\n\n  deselectWorkobject(workobject: string): void {\n    if (this.domainConfigurationTypes) {\n      this.domainConfigurationTypes.next({\n        name: this.domainConfigurationTypes.value.name,\n        actors: this.domainConfigurationTypes.value.actors,\n        workObjects: this.domainConfigurationTypes.value.workObjects.filter(\n          (w: string) => !w.includes(workobject)\n        ),\n      });\n    }\n    this.updateWorkObjectSubject();\n  }\n\n  setSelectedWorkObject(sortedList: string[]): void {\n    const value = this.domainConfigurationTypes.value;\n    value.workObjects = sortedList;\n    this.domainConfigurationTypes.next(value);\n    this.updateWorkObjectSubject();\n  }\n\n  setSelectedActors(sortedList: string[]): void {\n    const value = this.domainConfigurationTypes.value;\n    value.actors = sortedList;\n    this.domainConfigurationTypes.next(value);\n    this.updateActorSubject();\n  }\n\n  private updateActorSubject(): void {\n    this.selectedActors$.next(this.domainConfigurationTypes.value.actors);\n    this.configurationHasChanged = true;\n  }\n\n  private updateWorkObjectSubject(): void {\n    this.selectedWorkobjects$.next(\n      this.domainConfigurationTypes.value.workObjects\n    );\n    this.configurationHasChanged = true;\n  }\n\n  /** Revert Domain **/\n  resetDomain(): void {\n    const defaultConfig =\n      this.configurationService.createMinimalConfigurationWithDefaultIcons();\n\n    this.selectedWorkobjects$.value.forEach((workObjectName) => {\n      if (!defaultConfig.workObjects.has(workObjectName)) {\n        this.deselectWorkobject(workObjectName);\n      }\n    });\n    this.selectedActors$.value.forEach((actorName) => {\n      if (!defaultConfig.actors.has(actorName)) {\n        this.deselectActor(actorName);\n      }\n    });\n\n    this.domainConfigurationTypes.next({\n      name: defaultConfig.name,\n      actors: defaultConfig.actors.keysArray(),\n      workObjects: defaultConfig.workObjects.keysArray(),\n    } as CustomDomainConfiguration);\n\n    this.updateAllIconBehaviourSubjects();\n  }\n\n  cancel(): void {\n    this.domainConfigurationTypes.next(\n      this.configurationService.getCurrentConfigurationNamesWithoutPrefix()\n    );\n    this.updateAllIconBehaviourSubjects();\n    this.resetToInitialConfiguration();\n  }\n\n  private resetToInitialConfiguration(): void {\n    this.updateActorSubject();\n    this.updateWorkObjectSubject();\n  }\n\n  /** Persist Domain **/\n  saveDomain(usedIcons: UsedIconList, imported = false): void {\n    const changedActors: string[] = [];\n    const changedWorkobjects: string[] = [];\n    if (this.configurationHasChanged) {\n      const changedDomain = this.createDomainConfiguration();\n\n      const configurationActors = changedDomain.actors.keysArray();\n      usedIcons?.actors.forEach((actor) => {\n        if (\n          !configurationActors?.includes(actor) &&\n          !changedActors.includes(actor)\n        ) {\n          changedActors.push(actor);\n        }\n      });\n      const configurationWorkobjects = changedDomain.workObjects.keysArray();\n      usedIcons?.workobjects.forEach((workobject) => {\n        if (\n          !configurationWorkobjects?.includes(workobject) &&\n          !changedWorkobjects.includes(workobject)\n        ) {\n          changedWorkobjects.push(workobject);\n        }\n      });\n\n      if (!changedActors.length && !changedWorkobjects.length) {\n        this.changedDomainCofiguration = changedDomain;\n\n        this.updateIcons(changedDomain);\n\n        this.storageService.setStoredDomainConfiguration(\n          this.changedDomainCofiguration\n        );\n        this.snackbar.open(\n          imported\n            ? 'Configuration imported successfully'\n            : 'Configuration saved sucessfully',\n          undefined,\n          {\n            duration: SNACKBAR_DURATION,\n            panelClass: SNACKBAR_SUCCESS,\n          }\n        );\n      }\n    } else {\n      this.snackbar.open(\n        imported\n          ? 'No configuration to be imported'\n          : 'No configuration to be saved',\n        undefined,\n        {\n          duration: SNACKBAR_DURATION,\n          panelClass: SNACKBAR_INFO,\n        }\n      );\n    }\n    if (changedActors.length || changedWorkobjects.length) {\n      if (changedActors.length) {\n        const actors = changedActors.join(', ');\n        this.snackbar.open(\n          `The following icons are already in use as actors and cannot be changed: ${actors}`,\n          undefined,\n          {\n            duration: SNACKBAR_DURATION * 3,\n            panelClass: SNACKBAR_INFO,\n          }\n        );\n      }\n      if (changedWorkobjects.length) {\n        const workobjects = changedWorkobjects.join(', ');\n        this.snackbar.open(\n          `The following icons are already in use as workobjects and cannot be changed: ${workobjects}`,\n          undefined,\n          {\n            duration: SNACKBAR_DURATION * 3,\n            panelClass: SNACKBAR_INFO,\n          }\n        );\n      }\n    }\n  }\n\n  exportDomain(): void {\n    this.configurationService.exportConfiguration();\n  }\n\n  getAndClearSavedConfiguration(): DomainConfiguration | undefined {\n    const temp = this.changedDomainCofiguration;\n    this.changedDomainCofiguration = undefined;\n\n    return temp;\n  }\n\n  private createDomainConfiguration(): DomainConfiguration {\n    const actors = new Dictionary();\n    const workObjects = new Dictionary();\n\n    this.domainConfigurationTypes.value.actors.forEach((type: string) => {\n      actors.add(this.iconDictionaryService.getIconSource(type), type);\n    });\n    this.domainConfigurationTypes.value.workObjects.forEach((type: string) => {\n      workObjects.add(this.iconDictionaryService.getIconSource(type), type);\n    });\n\n    return {\n      name: this.domainConfigurationTypes.value.name || '',\n      actors,\n      workObjects,\n    };\n  }\n\n  /** Update Icons **/\n  addNewIcon(iconName: string): void {\n    const iconDict = new Dictionary();\n    iconDict.add(this.getSrcForIcon(iconName), iconName);\n    this.iconDictionaryService.addIconsToCss(iconDict);\n    this.addIconToAllIconList(iconName);\n  }\n\n  private addIconToAllIconList(iconName: string): void {\n    this.allIconListItems.add(\n      new BehaviorSubject({\n        name: iconName,\n        svg: this.getSrcForIcon(iconName),\n        isActor: this.isIconActor(iconName),\n        isWorkObject: this.isIconWorkObject(iconName),\n      }),\n      iconName\n    );\n  }\n\n  private updateIcon(\n    isActor: boolean,\n    isWorkobject: boolean,\n    iconName: string\n  ) {\n    const iconBehaviourSubject = this.getIconForName(iconName);\n    const icon = iconBehaviourSubject.value;\n    icon.isActor = isActor;\n    icon.isWorkObject = isWorkobject;\n\n    iconBehaviourSubject.next(icon);\n  }\n\n  private updateAllIconBehaviourSubjects(): void {\n    const customDomainCofiguration = this.domainConfigurationTypes.value;\n    this.allIconListItems.keysArray().forEach((iconName) => {\n      if (customDomainCofiguration.actors.includes(iconName)) {\n        this.updateIcon(true, false, iconName);\n      } else if (customDomainCofiguration.workObjects.includes(iconName)) {\n        this.updateIcon(false, true, iconName);\n      } else {\n        this.updateIcon(false, false, iconName);\n      }\n    });\n  }\n\n  private getSrcForIcon(name: string): string {\n    let iconName: string;\n    if (name.includes(elementTypes.DOMAINSTORY)) {\n      iconName = getNameFromType(name);\n    } else {\n      iconName = name;\n    }\n    const rawSrc = this.iconDictionaryService.getIconSource(iconName);\n\n    if (!rawSrc) {\n      return '';\n    }\n\n    if (rawSrc.startsWith('data')) {\n      return rawSrc;\n    } else {\n      return 'data:image/svg+xml,' + rawSrc;\n    }\n  }\n\n  private updateIcons(changedDomain: DomainConfiguration) {\n    this.allIconListItems\n      .keysArray()\n      .forEach((item) => this.setAsUnassigned(item, this.isIconActor(item)));\n    changedDomain.actors\n      .keysArray()\n      .forEach((actor) => this.setAsActor(true, actor));\n    changedDomain.workObjects\n      .keysArray()\n      .forEach((workObject) => this.setAsWorkobject(true, workObject));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Dictionary } from 'src/app/Domain/Common/dictionary/dictionary';\nimport { elementTypes } from 'src/app/Domain/Common/elementTypes';\nimport { getNameFromType } from 'src/app/Utils/naming';\nimport {\n  allIcons,\n  appendedIcons,\n} from 'src/app/Domain/Domain-Configuration/allIcons';\nimport {\n  defaultConf,\n  IconConfiguration,\n} from 'src/app/Domain/Common/iconConfiguration';\nimport { Configuration } from 'src/app/Domain/Common/configuration';\nimport { BusinessObject } from 'src/app/Domain/Common/businessObject';\nimport { DomainConfiguration } from 'src/app/Domain/Common/domainConfiguration';\nimport { sanitizeIconName } from '../../Utils/sanitizer';\n\nexport const ICON_PREFIX = 'icon-domain-story-';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class IconDictionaryService {\n  private actorIconDictionary = new Dictionary();\n  private workObjectDictionary = new Dictionary();\n\n  private allIconDictionary = new Dictionary();\n  private iconDictionaryForBPMN = new Dictionary();\n\n  private customConfiguration?: DomainConfiguration;\n\n  private readonly iconConfig: IconConfiguration;\n\n  constructor() {\n    this.allIconDictionary.addEach(allIcons);\n    this.iconConfig = new IconConfiguration(this.allIconDictionary);\n  }\n\n  initTypeDictionaries(actors: string[], workObjects: string[]): void {\n    if (!actors || actors.length == 0) {\n      actors = defaultConf.actors;\n    }\n    if (!workObjects || workObjects.length == 0) {\n      workObjects = defaultConf.workObjects;\n    }\n\n    const allTypes = new Dictionary();\n    allTypes.addEach(allIcons);\n    allTypes.appendDict(this.getAppendedIconDictionary());\n\n    this.initDictionary(\n      actors,\n      allTypes,\n      this.actorIconDictionary,\n      elementTypes.ACTOR\n    );\n    this.initDictionary(\n      workObjects,\n      allTypes,\n      this.workObjectDictionary,\n      elementTypes.WORKOBJECT\n    );\n  }\n\n  private initDictionary(\n    keys: string[],\n    allTypes: Dictionary,\n    dictionary: Dictionary,\n    namePrefix: elementTypes\n  ) {\n    dictionary.clear();\n    for (const key of keys) {\n      const name = namePrefix + key;\n      dictionary.add(allTypes.get(key), name);\n    }\n\n    dictionary.keysArray().forEach((entry) => {\n      const name = getNameFromType(entry);\n      this.registerIconForBPMN(\n        entry,\n        ICON_PREFIX + sanitizeIconName(name.toLowerCase())\n      );\n    });\n  }\n\n  getCurrentIconConfigurationForBPMN(): Configuration {\n    if (this.customConfiguration) {\n      return this.iconConfig.createCustomConf(this.customConfiguration);\n    }\n    return this.iconConfig.getDefaultConf();\n  }\n\n  allInTypeDictionary(type: elementTypes, elements: BusinessObject[]): boolean {\n    let collection: Dictionary;\n    if (type === elementTypes.ACTOR) {\n      collection = this.actorIconDictionary;\n    } else if (type === elementTypes.WORKOBJECT) {\n      collection = this.workObjectDictionary;\n    }\n\n    let allIn = true;\n    if (elements) {\n      elements.forEach((element) => {\n        if (!collection.has(element.type)) {\n          allIn = false;\n        }\n      });\n    } else {\n      return false;\n    }\n    return allIn;\n  }\n\n  /** Load Icons from Configuration **/\n\n  addIconsFromDomainConfiguration(\n    dictionaryType: elementTypes,\n    iconTypes: string[]\n  ): void {\n    let collection: Dictionary;\n    if (dictionaryType === elementTypes.ACTOR) {\n      collection = this.actorIconDictionary;\n    } else if (dictionaryType === elementTypes.WORKOBJECT) {\n      collection = this.workObjectDictionary;\n    }\n\n    const allTypes = new Dictionary();\n    allTypes.addEach(allIcons);\n    allTypes.appendDict(appendedIcons);\n\n    iconTypes.forEach((type) => {\n      if (!collection.has(type)) {\n        const name = getNameFromType(type);\n        const src = allTypes.get(name);\n        if (src) {\n          this.registerIconForType(dictionaryType, type, src);\n          this.registerIconForBPMN(\n            type,\n            sanitizeIconName(ICON_PREFIX + name.toLowerCase())\n          );\n        }\n      }\n    });\n  }\n\n  /** Add Icon(s) to Dictionary **/\n  registerIconForBPMN(name: string, src: string): void {\n    this.iconDictionaryForBPMN.set(name, src);\n  }\n\n  addIconsToTypeDictionary(\n    actorIcons: BusinessObject[],\n    workObjectIcons: BusinessObject[]\n  ) {\n    if (!this.allInTypeDictionary(elementTypes.ACTOR, actorIcons)) {\n      this.addIconsFromDomainConfiguration(\n        elementTypes.ACTOR,\n        actorIcons.map((element) => element.type)\n      );\n    }\n    if (!this.allInTypeDictionary(elementTypes.WORKOBJECT, workObjectIcons)) {\n      this.addIconsFromDomainConfiguration(\n        elementTypes.WORKOBJECT,\n        workObjectIcons.map((element) => element.type)\n      );\n    }\n  }\n\n  registerIconForType(type: elementTypes, name: string, src: string): void {\n    if (!name.includes(type)) {\n      name = type + name;\n    }\n\n    let collection = new Dictionary();\n    if (type === elementTypes.ACTOR) {\n      collection = this.actorIconDictionary;\n    } else if (type === elementTypes.WORKOBJECT) {\n      collection = this.workObjectDictionary;\n    }\n    collection.set(name, src);\n  }\n\n  updateIconRegistries(\n    actors: BusinessObject[],\n    workObjects: BusinessObject[],\n    config: DomainConfiguration\n  ): void {\n    const elements: BusinessObject[] = [];\n\n    actors.forEach((a) => elements.push(a));\n    workObjects.forEach((w) => elements.push(w));\n\n    const customIcons = new Dictionary();\n\n    const actorsDict = new Dictionary();\n    const workObjectsDict = new Dictionary();\n    config.actors.keysArray().forEach((key) => {\n      actorsDict.add(config.actors.get(key), key);\n    });\n    config.workObjects.keysArray().forEach((key) => {\n      workObjectsDict.add(config.workObjects.get(key), key);\n    });\n\n    this.extractCustomIconsFromDictionary(actorsDict, customIcons);\n    this.extractCustomIconsFromDictionary(workObjectsDict, customIcons);\n\n    elements.forEach((element) => {\n      const name = sanitizeIconName(\n        element.type\n          .replace(elementTypes.ACTOR, '')\n          .replace(elementTypes.WORKOBJECT, '')\n      );\n      if (\n        (element.type.includes(elementTypes.ACTOR) ||\n          element.type.includes(elementTypes.WORKOBJECT)) &&\n        !this.getFullDictionary().has(name)\n      ) {\n        this.registerIconForBPMN(\n          ICON_PREFIX + name.toLowerCase(),\n          element.type\n        );\n      }\n    });\n\n    this.addNewIconsToDictionary(customIcons);\n    this.addIconsToTypeDictionary(actors, workObjects);\n  }\n\n  private extractCustomIconsFromDictionary(\n    elementDictionary: Dictionary,\n    customIcons: Dictionary\n  ) {\n    elementDictionary.keysArray().forEach((name) => {\n      const sanitizedName = sanitizeIconName(name);\n      if (!this.getFullDictionary().has(sanitizedName)) {\n        customIcons.add(elementDictionary.get(name), sanitizedName);\n      }\n    });\n  }\n\n  /** Add new Icon(s) **/\n\n  addNewIconsToDictionary(customIcons: Dictionary) {\n    customIcons.keysArray().forEach((key) => {\n      const custom = customIcons.get(key);\n      this.addIMGToIconDictionary(custom.src, key);\n    });\n    this.addIconsToCss(customIcons);\n  }\n\n  addIMGToIconDictionary(input: string, name: string): void {\n    appendedIcons.set(name, input);\n  }\n\n  addIconsToCss(customIcons: Dictionary) {\n    const sheetEl = document.getElementById('iconsCss');\n    customIcons.keysArray().forEach((key) => {\n      const src = customIcons.get(key);\n      const iconStyle =\n        '.' +\n        ICON_PREFIX +\n        sanitizeIconName(key.toLowerCase()) +\n        '::before{ content: url(\"data:image/svg+xml;utf8,' +\n        this.wrapSRCInSVG(src) +\n        '\"); margin: 3px;}';\n      // @ts-ignore\n      sheetEl?.sheet?.insertRule(iconStyle, sheetEl.sheet.cssRules.length);\n    });\n  }\n\n  private wrapSRCInSVG(src: string): string {\n    return (\n      \"<svg viewBox='0 0 22 22' width='22' height='22' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><image width='22' height='22' xlink:href='\" +\n      src +\n      \"'/></svg>\"\n    );\n  }\n\n  /** Getter & Setter **/\n\n  getFullDictionary(): Dictionary {\n    const fullDictionary = new Dictionary();\n    fullDictionary.appendDict(this.allIconDictionary);\n    fullDictionary.appendDict(this.getAppendedIconDictionary());\n    return fullDictionary;\n  }\n\n  getAppendedIconDictionary(): Dictionary {\n    const appendedDict = new Dictionary();\n    appendedIcons.keysArray().forEach((key) => {\n      if (!this.allIconDictionary.has(key)) {\n        appendedDict.set(key, appendedIcons.get(key));\n      }\n    });\n    return appendedDict;\n  }\n\n  getTypeDictionary(type: elementTypes): Dictionary {\n    if (type === elementTypes.ACTOR) {\n      return this.actorIconDictionary;\n    } else if (type === elementTypes.WORKOBJECT) {\n      return this.workObjectDictionary;\n    }\n    return new Dictionary();\n  }\n\n  getTypeDictionaryKeys(type: elementTypes): string[] {\n    return this.getTypeDictionary(type).keysArray();\n  }\n\n  getTypeIconSRC(type: elementTypes, name: string): string | null {\n    if (type === elementTypes.ACTOR) {\n      if (!name.startsWith(elementTypes.ACTOR)) {\n        name = elementTypes.ACTOR + name;\n      }\n      return this.actorIconDictionary.get(name);\n    } else if (type === elementTypes.WORKOBJECT) {\n      if (!name.startsWith(elementTypes.WORKOBJECT)) {\n        name = elementTypes.WORKOBJECT + name;\n      }\n      return this.workObjectDictionary.get(name);\n    }\n    return null;\n  }\n\n  getIconForBPMN(type: elementTypes): string | null {\n    return this.iconDictionaryForBPMN.get(type);\n  }\n\n  getIconSource(name: string): string | null {\n    if (this.allIconDictionary.has(name)) {\n      return this.allIconDictionary.get(name);\n    } else if (appendedIcons.has(name)) {\n      return appendedIcons.get(name);\n    }\n    return null;\n  }\n\n  getElementsOfType(\n    elements: BusinessObject[],\n    type: elementTypes\n  ): BusinessObject[] {\n    const elementOfType: any = [];\n    elements.forEach((element) => {\n      if (element.type.includes(type)) {\n        elementOfType.push(element);\n      }\n    });\n    return elementOfType;\n  }\n\n  getAllIconDictionary(): Dictionary {\n    return this.allIconDictionary;\n  }\n\n  getActorsDictionary(): Dictionary {\n    return this.actorIconDictionary;\n  }\n\n  getWorkObjectsDictionary(): Dictionary {\n    return this.workObjectDictionary;\n  }\n\n  getIconConfiguration(): IconConfiguration {\n    return this.iconConfig;\n  }\n\n  setCusomtConfiguration(customConfiguration: DomainConfiguration): void {\n    this.customConfiguration = customConfiguration;\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { elementTypes } from 'src/app/Domain/Common/elementTypes';\nimport { CanvasObject } from 'src/app/Domain/Common/canvasObject';\nimport { GroupCanvasObject } from '../../Domain/Common/groupCanvasObject';\nimport { ActivityCanvasObject } from '../../Domain/Common/activityCanvasObject';\nimport { UsedIconList } from 'src/app/Domain/Domain-Configuration/UsedIconList';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ElementRegistryService {\n  private registry: any;\n  private fullyInitialized = false;\n\n  /**\n   * Initially the registry has only the root-Element.\n   * Once the canvas has bees initialized, we adjust the reference to point to the elements on the canvas for convenience\n   */\n  correctInitialize(): void {\n    if (!this.fullyInitialized) {\n      if (this.registry.__implicitroot) {\n        this.registry = this.registry.__implicitroot.element.children;\n        this.fullyInitialized = true;\n      }\n    }\n  }\n\n  setElementRegistry(registry: any): void {\n    this.registry = registry._elements;\n  }\n\n  clear(): void {\n    this.registry = null;\n    this.fullyInitialized = false;\n  }\n\n  createObjectListForDSTDownload(): CanvasObject[] {\n    if (this.registry) {\n      const allObjectsFromCanvas = this.getAllCanvasObjects();\n      const groups = this.getAllGroups();\n\n      const objectList: CanvasObject[] = [];\n\n      this.fillListOfCanvasObjects(allObjectsFromCanvas, objectList, groups);\n\n      return objectList;\n    }\n    return [];\n  }\n\n  private fillListOfCanvasObjects(\n    allObjectsFromCanvas: CanvasObject[],\n    objectList: CanvasObject[],\n    groups: GroupCanvasObject[]\n  ): void {\n    allObjectsFromCanvas.forEach((canvasElement) => {\n      if (canvasElement.type === elementTypes.ACTIVITY) {\n        objectList.push(canvasElement);\n      }\n\n      // ensure that Activities are always after Actors, Workobjects and Groups in .dst files\n      else {\n        if (canvasElement.type === elementTypes.TEXTANNOTATION) {\n          canvasElement.businessObject.width = canvasElement.width;\n          canvasElement.businessObject.height = canvasElement.height;\n        }\n        if (!objectList.includes(canvasElement)) {\n          objectList.unshift(canvasElement);\n        }\n      }\n    });\n\n    groups.forEach((group) => {\n      objectList.push(group);\n    });\n  }\n\n  getAllActivities(): ActivityCanvasObject[] {\n    const activities: ActivityCanvasObject[] = [];\n\n    this.getAllCanvasObjects().forEach((element) => {\n      if (element.type.includes(elementTypes.ACTIVITY)) {\n        activities.push(element as ActivityCanvasObject);\n      }\n    });\n    return activities;\n  }\n\n  getAllConnections(): ActivityCanvasObject[] {\n    const connections: ActivityCanvasObject[] = [];\n    this.getAllCanvasObjects().forEach((element) => {\n      const type = element.type;\n      if (type === elementTypes.CONNECTION) {\n        connections.push(element as ActivityCanvasObject);\n      }\n    });\n    return connections;\n  }\n\n  getAllCanvasObjects(): CanvasObject[] {\n    const allObjects: CanvasObject[] = [];\n    const groupObjects: GroupCanvasObject[] = [];\n\n    this.checkChildForGroup(groupObjects, allObjects);\n\n    // for each memorized group, remove it from the group-array and check its children, whether they are groups or not\n    // if a child is a group, memorize it in the group-array\n    // other children should already be in the allObjects list\n    let i = groupObjects.length - 1;\n    while (groupObjects.length >= 1) {\n      const currentGroup = groupObjects.pop();\n      // @ts-ignore\n      currentGroup.children.forEach((child: CanvasObject) => {\n        const type = child.type;\n        if (type.includes(elementTypes.GROUP)) {\n          groupObjects.push(child as GroupCanvasObject);\n        }\n      });\n      i = groupObjects.length - 1;\n    }\n    return allObjects;\n  }\n\n  // returns all groups on the canvas and inside other groups\n  getAllGroups(): GroupCanvasObject[] {\n    const groupObjects: GroupCanvasObject[] = [];\n    const allObjects: CanvasObject[] = [];\n\n    this.checkChildForGroup(groupObjects, allObjects);\n\n    for (const group of groupObjects) {\n      group.children?.forEach((child: CanvasObject) => {\n        if (child.type.includes(elementTypes.GROUP)) {\n          groupObjects.push(child as GroupCanvasObject);\n        }\n      });\n    }\n    return groupObjects;\n  }\n\n  private checkChildForGroup(\n    groupObjects: GroupCanvasObject[],\n    allObjects: CanvasObject[]\n  ): void {\n    const registryElementNames = Object.keys(this.registry);\n    for (let name of registryElementNames) {\n      const entry = this.registry[name].element;\n      if (entry.businessObject) {\n        const type = entry.type;\n        if (type && type.includes(elementTypes.GROUP)) {\n          // if it is a group, memorize this for later\n          groupObjects.push(entry);\n        } else if (type) {\n          allObjects.push(entry);\n        }\n      }\n    }\n  }\n\n  // get a list of activities, that originate from an actor-type\n  getActivitiesFromActors(): ActivityCanvasObject[] {\n    const activitiesFromActors: ActivityCanvasObject[] = [];\n    const activities = this.getAllActivities();\n\n    activities.forEach((activity: ActivityCanvasObject) => {\n      if (activity.source?.type.includes(elementTypes.ACTOR)) {\n        activitiesFromActors.push(activity);\n      }\n    });\n    return activitiesFromActors;\n  }\n\n  getUsedIcons(): UsedIconList {\n    const actors = this.getAllActors();\n    const workobjects = this.getAllWorkobjects();\n\n    return {\n      actors: actors.map((a) => a.type.replace(elementTypes.ACTOR, '')),\n      workobjects: workobjects.map((w) =>\n        w.type.replace(elementTypes.WORKOBJECT, '')\n      ),\n    };\n  }\n\n  private getAllActors() {\n    return this.getAllCanvasObjects().filter((co) =>\n      co.type.includes(elementTypes.ACTOR)\n    );\n  }\n\n  getAllWorkobjects() {\n    return this.getAllCanvasObjects().filter((co) =>\n      co.type.includes(elementTypes.WORKOBJECT)\n    );\n  }\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { DomainConfigurationService } from 'src/app/Service/DomainConfiguration/domain-configuration.service';\nimport { sanitizeForDesktop } from 'src/app/Utils/sanitizer';\nimport { TitleService } from 'src/app/Service/Title/title.service';\nimport { ConfigAndDST } from 'src/app/Domain/Export/configAndDst';\nimport { DirtyFlagService } from 'src/app/Service/DirtyFlag/dirty-flag.service';\nimport { PngService } from 'src/app/Service/Export/png.service';\nimport { SvgService } from 'src/app/Service/Export/svg.service';\nimport { Subscription } from 'rxjs';\nimport { RendererService } from '../Renderer/renderer.service';\nimport { HtmlPresentationService } from './html-presentation.service';\nimport { formatDate } from '@angular/common';\nimport { environment } from '../../../environments/environment';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ExportService implements OnDestroy {\n  titleSubscription: Subscription;\n  descriptionSubscription: Subscription;\n\n  title = '';\n  description = '';\n\n  constructor(\n    private configurationService: DomainConfigurationService,\n    private titleService: TitleService,\n    private dirtyFlagService: DirtyFlagService,\n    private pngService: PngService,\n    private svgService: SvgService,\n    private htmlPresentationService: HtmlPresentationService,\n    private rendererService: RendererService\n  ) {\n    this.titleSubscription = this.titleService.title$.subscribe(\n      (title: string) => {\n        this.title = title;\n      }\n    );\n    this.descriptionSubscription = this.titleService.description$.subscribe(\n      (description: string) => {\n        this.description = description;\n      }\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.titleSubscription.unsubscribe();\n    this.descriptionSubscription.unsubscribe();\n  }\n\n  isDomainStoryExportable(): boolean {\n    return this.rendererService.getStory().length >= 1;\n  }\n\n  createConfigAndDST(DomainStory: any): ConfigAndDST {\n    return new ConfigAndDST(\n      this.configurationService.getCurrentConfigurationForExport(),\n      DomainStory\n    );\n  }\n\n  downloadDST(): void {\n    const dst = this.getStoryForDownload();\n    const configAndDST = this.createConfigAndDST(dst);\n    const json = JSON.stringify(configAndDST, null, 2);\n\n    const filename = sanitizeForDesktop(\n      this.title + '_' + this.getCurrentDateString()\n    );\n\n    this.downloadFile(\n      json,\n      'data:text/plain;charset=utf-8,',\n      filename,\n      '.egn',\n      true\n    );\n  }\n\n  private downloadFile(\n    data: string,\n    datatype: string,\n    filename: string,\n    fileEnding: string,\n    makeClean: boolean\n  ) {\n    const element = document.createElement('a');\n    element.setAttribute('href', datatype + encodeURIComponent(data));\n    element.setAttribute('download', filename + fileEnding);\n\n    element.style.display = 'none';\n    document.body.appendChild(element);\n\n    element.click();\n\n    if (makeClean) {\n      this.dirtyFlagService.makeClean();\n    }\n\n    document.body.removeChild(element);\n  }\n\n  downloadSVG(withTitle: boolean, useWhiteBackground: boolean): void {\n    const story = this.getStoryForDownload();\n    const dst = this.createConfigAndDST(story);\n\n    const svgData = this.svgService.createSVGData(\n      this.title,\n      this.description,\n      dst,\n      withTitle,\n      useWhiteBackground\n    );\n\n    this.downloadFile(\n      svgData,\n      'data:application/bpmn20-xml;charset=UTF-8,',\n      sanitizeForDesktop(this.title + '_' + this.getCurrentDateString()),\n      '.egn.svg',\n      true\n    );\n  }\n\n  downloadPNG(withTitle: boolean): void {\n    const canvas = document.getElementById('canvas');\n    if (canvas) {\n      const container = canvas.getElementsByClassName('djs-container');\n      const svgElements = container[0].getElementsByTagName('svg');\n      const outerSVGElement = svgElements[0];\n      const viewport = outerSVGElement.getElementsByClassName('viewport')[0];\n      const layerBase = viewport.getElementsByClassName('layer-base')[0];\n\n      const image = document.createElement('img');\n\n      // removes unwanted black dots in image\n      let svg = this.pngService.extractSVG(viewport, outerSVGElement);\n\n      svg = this.pngService.prepareSVG(\n        svg,\n        layerBase,\n        this.description,\n        this.title,\n        withTitle\n      );\n\n      image.onload = () => {\n        const tempCanvas = document.createElement('canvas');\n\n        // add a 10px buffer to the right and lower boundary\n        tempCanvas.width = this.pngService.getWidth() + 10;\n        tempCanvas.height = this.pngService.getHeight() + 10;\n\n        const ctx = tempCanvas.getContext('2d');\n        if (ctx) {\n          // fill with white background\n          ctx.rect(0, 0, tempCanvas.width, tempCanvas.height);\n          ctx.fillStyle = 'white';\n          ctx.fill();\n\n          ctx.drawImage(image, 0, 0);\n        }\n\n        const png64 = tempCanvas.toDataURL('image/png');\n        const ele = document.createElement('a');\n        ele.setAttribute(\n          'download',\n          sanitizeForDesktop(this.title) +\n            '_' +\n            this.getCurrentDateString() +\n            '.png'\n        );\n        ele.setAttribute('href', png64);\n        document.body.appendChild(ele);\n        ele.click();\n        document.body.removeChild(ele);\n\n        // image source has to be removed to circumvent browser caching\n        image.src = '';\n      };\n      image.onchange = image.onload;\n\n      image.width = this.pngService.getWidth();\n      image.height = this.pngService.getHeight();\n\n      image.src = 'data:image/svg+xml,' + svg;\n    }\n  }\n\n  downloadHTMLPresentation(): void {\n    const filename = sanitizeForDesktop(\n      this.title + '_' + this.getCurrentDateString()\n    );\n    this.htmlPresentationService.downloadHTMLPresentation(filename).then();\n  }\n\n  private getStoryForDownload(): unknown[] {\n    const story = this.rendererService.getStory() as unknown[];\n    story.push({ info: this.titleService.getDescription() });\n    story.push({ version: environment.version });\n    return story;\n  }\n\n  private getCurrentDateString(): string {\n    return formatDate(new Date(), 'YYYY-MM-dd', 'en-GB');\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { sanitizeForDesktop } from '../../Utils/sanitizer';\nimport { ReplayService } from '../Replay/replay.service';\n// @ts-ignore\nimport doT from 'dot';\nimport { TitleService } from '../Title/title.service';\n\n@Injectable({\n  providedIn: 'root',\n})\n/**\n * Initial idea and PR from https://github.com/indika-dev\n */\nexport class HtmlPresentationService {\n  constructor(\n    private replayService: ReplayService,\n    private titleService: TitleService\n  ) {}\n\n  private multiplexSecret: any;\n  private multiplexId: any;\n\n  private modeler: any;\n\n  setModelerClasses(canvas: any, selection: any, modeler: any): void {\n    this.modeler = modeler;\n  }\n\n  private static viewBoxCoordinates(svg: any): any {\n    const ViewBoxCoordinate =\n      /width=\"([^\"]+)\"\\s+height=\"([^\"]+)\"\\s+viewBox=\"([^\"]+)\"/;\n    const match = svg.match(ViewBoxCoordinate);\n    return match[3];\n  }\n\n  /*\n  ---------------------------\n  SVG handling starts here\n  ----------------------------\n  */\n\n  async downloadHTMLPresentation(filename: string): Promise<void> {\n    const svgData = [];\n    // export all sentences of domain story\n    this.replayService.startReplay();\n    try {\n      const result = await this.modeler.saveSVG({});\n      this.fixActivityMarkersForEachStep(\n        result,\n        this.replayService.getCurrentStepNumber()\n      );\n      svgData.push({\n        content: HtmlPresentationService.createSVGData(result.svg),\n        transition: 'slide',\n      });\n    } catch (err) {\n      alert('There was an error exporting the SVG.\\n' + err);\n    }\n    while (\n      this.replayService.getCurrentStepNumber() <\n      this.replayService.getMaxStepNumber()\n    ) {\n      this.replayService.nextStep();\n      try {\n        const result = await this.modeler.saveSVG({});\n        this.fixActivityMarkersForEachStep(\n          result,\n          this.replayService.getCurrentStepNumber()\n        );\n        svgData.push({\n          content: HtmlPresentationService.createSVGData(result.svg),\n          transition: 'slide',\n        });\n      } catch (err) {\n        alert('There was an error exporting the SVG.\\n' + err);\n      }\n    }\n    this.replayService.stopReplay();\n\n    // create download for presentation\n    const revealjsTemplate = document.getElementById('revealjs-template');\n    const dots = doT.template(revealjsTemplate?.innerHTML);\n    const revealjsData = {\n      script: 'script',\n      title: this.titleService.getTitle(),\n      description: this.titleService.getDescription(),\n      sentences: svgData,\n      multiplexSecret: this.multiplexSecret,\n      multiplexId: this.multiplexId,\n    };\n    const element = document.createElement('a');\n    element.setAttribute(\n      'href',\n      'data:text/html;charset=UTF-8,' +\n        this.fixMalformedHtmlScript(dots, revealjsData)\n    );\n    element.setAttribute('download', sanitizeForDesktop(filename) + '.html');\n    element.style.display = 'none';\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  }\n\n  private fixMalformedHtmlScript(\n    dots: any,\n    revealjsData: {\n      multiplexId: any;\n      sentences: any[];\n      multiplexSecret: any;\n      description: string;\n      title: string;\n      script: string;\n    }\n  ) {\n    return dots(revealjsData).replace('</ script', '</script');\n  }\n\n  // tslint:disable-next-line:align\n  private static createSVGData(svg: any): string {\n    let data = structuredClone(svg);\n\n    // to ensure that the title and description are inside the SVG container and do not overlap with any elements,\n    // we change the confines of the SVG viewbox\n    let viewBoxIndex = data.indexOf('width=\"');\n\n    const viewBox = HtmlPresentationService.viewBoxCoordinates(data);\n\n    let xLeft: number;\n    let width: number;\n    let yUp: number;\n    let height: number;\n    const splitViewBox = viewBox.split(/\\s/);\n\n    xLeft = +splitViewBox[0];\n    yUp = +splitViewBox[1];\n    width = +splitViewBox[2];\n    height = +splitViewBox[3];\n\n    if (width < 300) {\n      width += 300;\n    }\n\n    const dataStart = data.substring(0, viewBoxIndex);\n    viewBoxIndex = data.indexOf('\" version');\n    const dataEnd = data.substring(viewBoxIndex);\n    dataEnd.substring(viewBoxIndex);\n\n    data = dataStart + this.createBounds(xLeft, yUp, width, height) + dataEnd;\n\n    return encodeURIComponent(data);\n  }\n\n  private static createBounds(\n    xLeft: number,\n    yUp: number,\n    width: number,\n    height: number\n  ) {\n    return (\n      'width=\"100%\"' +\n      ' height=\"100%\" ' +\n      ' preserveAspectRatio=\"xMidYMid meet\"' +\n      ' viewBox=\"' +\n      xLeft +\n      ' ' +\n      yUp +\n      ' ' +\n      (xLeft + width) +\n      ' ' +\n      (yUp + height)\n    );\n  }\n\n  /**\n   * There is a Problem in the HTML-Presentation, where the Arrow-Heads of the Activities are not shown after the 4th Step\n   * This is due to the fact, that the marker for the Arrow-Head is defined in each Step with the same ID\n   * When the 5th step is reached, the first marker is set to display none, which propagates to all other markers\n   *\n   * To fix this, for each Step the marker and its references are renamed\n   */\n  private fixActivityMarkersForEachStep(\n    result: { svg: string },\n    sectionIndex: number\n  ): void {\n    const defs = result.svg.substring(\n      result.svg.indexOf('<defs>'),\n      result.svg.indexOf('</defs>') + 7\n    );\n    const split = defs.split('<marker ');\n\n    let newDefs = split[0];\n\n    for (let i = 1; i < split.length; i++) {\n      const ids = split[i].match(/(id=\"[^\"]*\")/g);\n      ids?.forEach((id) => {\n        const idToReplace = id.substring(4, id.length - 1);\n        const newId =\n          idToReplace.slice(0, id.length - 5) +\n          'customId' +\n          sectionIndex +\n          idToReplace.slice(idToReplace.length - 2);\n        // @ts-ignore\n        result.svg = result.svg.replaceAll(idToReplace, newId);\n      });\n      newDefs += '<marker display= \"block !important\"; ' + split[i];\n    }\n\n    result.svg = result.svg.replace(defs, newDefs);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { createTitleAndDescriptionSVGElement } from 'src/app/Service/Export/exportUtil';\nimport { BrowserSpecs } from 'src/app/Domain/Export/browserSpecs';\nimport { Box } from 'src/app/Domain/Export/box';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PngService {\n  private width: number;\n  private height: number;\n\n  constructor() {\n    this.width = 0;\n    this.height = 0;\n  }\n\n  private browserSpecs(): BrowserSpecs {\n    const ua = navigator.userAgent;\n    let tem;\n    let M =\n      ua.match(\n        /(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i\n      ) || [];\n    if (/trident/i.test(M[1])) {\n      tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n      return { name: 'IE', version: tem[1] || '' };\n    }\n    if (M[1] === 'Chrome') {\n      tem = ua.match(/\\b(OPR|Edge)\\/(\\d+)/);\n      if (tem != null) {\n        return { name: tem[1].replace('OPR', 'Opera'), version: tem[2] };\n      }\n    }\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    // tslint:disable-next-line:no-conditional-assignment\n    if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {\n      M.splice(1, 1, tem[1]);\n    }\n    return { name: M[0], version: M[1] };\n  }\n\n  /** Needed for an SVG-Fix in CHrome where the # needs to be replaced by %23 **/\n  URIHashtagFix(svg: string): string {\n    let fix = false;\n\n    const browser = this.browserSpecs();\n\n    const name = browser.name;\n    const version = parseInt(browser.version);\n\n    // only implemented in chrome and firefox at the moment\n    if (name.includes('Chrome')) {\n      if (version >= 72) {\n        fix = true;\n        // https://www.chromestatus.com/features/5656049583390720\n      }\n    } else if (name.includes('Firefox')) {\n      fix = true;\n\n      // versionNumber of implementation unknown\n    }\n    if (fix) {\n      while (svg.includes('#')) {\n        svg = svg.replace('#', '%23');\n      }\n    }\n    return svg;\n  }\n\n  findMostOuterElements(svg: HTMLElement): Box {\n    let xLeft = 0;\n    let xRight = 0;\n    let yUp = 0;\n    let yDown = 0;\n\n    const elements = svg.getElementsByClassName('djs-group');\n\n    // tslint:disable-next-line:prefer-for-of\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      const sub = element.children;\n\n      let elXLeft: number;\n      let elXRight: number;\n      let elYUp: number;\n      let elYDown: number;\n\n      const transform = sub[0].getAttribute('transform');\n      if (transform) {\n        let nums;\n\n        if (transform.includes('matrix')) {\n          transform.replace('matrix(', '');\n          transform.replace(')', '');\n          nums = transform.split(' ');\n          elXLeft = parseInt(nums[4]);\n          elYUp = parseInt(nums[5]);\n        } else {\n          transform.replace('translate(', '');\n          transform.replace(')', '');\n          nums = transform.split(' ');\n          elXLeft = parseInt(nums[0]);\n          elYUp = parseInt(nums[1]);\n        }\n\n        const rects = sub[0].getElementsByTagName('rect');\n        const outerRect = rects[rects.length - 1];\n\n        const width = outerRect.getAttribute('width');\n\n        elXRight = elXLeft + parseInt(width != null ? width : '0');\n        elYDown = elYUp + sub[0].getBoundingClientRect().height;\n      } else {\n        const rects = element.getElementsByTagName('rect');\n        const outerRect = rects[rects.length - 1];\n\n        const x = outerRect.getAttribute('x');\n        const y = outerRect.getAttribute('y');\n\n        elXLeft = parseInt(x != null ? x : '0');\n        elYUp = parseInt(y != null ? y : '0');\n\n        const width = outerRect.getAttribute('width');\n        const height = outerRect.getAttribute('height');\n\n        elXRight = elXLeft + parseInt(width != null ? width : '0');\n        elYDown = elYUp + parseInt(height != null ? height : '0') + 20; // Add 20 px as Padding for text at the bottom\n      }\n      if (elXLeft < xLeft) {\n        xLeft = elXLeft;\n      }\n      if (elXRight > xRight) {\n        xRight = elXRight;\n      }\n      if (elYUp < yUp) {\n        yUp = elYUp;\n      }\n      if (elYDown > yDown) {\n        yDown = elYDown;\n      }\n    }\n\n    yUp -= 75; // we need to adjust yUp to have space for the title and description\n\n    return {\n      xLeft,\n      xRight,\n      yUp,\n      yDown,\n    };\n  }\n\n  prepareSVG(\n    svg: string,\n    layerBase: any,\n    description: string,\n    title: string,\n    withTitle: boolean\n  ): string {\n    const box = this.findMostOuterElements(layerBase);\n    let viewBoxIndex = svg.indexOf('width=\"');\n\n    this.calculateWidthAndHeight(box);\n\n    const { insertText, extraHeight } = createTitleAndDescriptionSVGElement(\n      title,\n      description,\n      box.xLeft,\n      box.yUp + 20,\n      this.width\n    );\n    if (withTitle) {\n      this.height += extraHeight;\n    }\n\n    const bounds = this.createBounds(box, extraHeight);\n\n    const dataStart = svg.substring(0, viewBoxIndex);\n    viewBoxIndex = svg.indexOf('style=\"');\n\n    const dataEnd = svg.substring(viewBoxIndex);\n    dataEnd.substring(viewBoxIndex);\n\n    svg = dataStart + bounds + dataEnd;\n\n    const insertIndex = svg.indexOf('<g class=\"viewport\">') + 20;\n\n    if (withTitle) {\n      svg = [\n        svg.slice(0, insertIndex),\n        insertText,\n        svg.slice(insertIndex),\n      ].join('');\n    }\n    svg = this.URIHashtagFix(svg);\n\n    return svg;\n  }\n\n  private createBounds(box: Box, extraHeight: number) {\n    return (\n      'width=\"' +\n      this.width +\n      '\" height=\"' +\n      this.height +\n      '\" viewBox=\" ' +\n      box.xLeft +\n      ' ' +\n      (box.yUp - extraHeight) +\n      ' ' +\n      this.width +\n      ' ' +\n      this.height +\n      '\" '\n    );\n  }\n\n  /**\n   * Calculate the Width and Height of the Bounding Box for the PNG so no Parts are cut off\n   * TODO Longer Iconnames can still be cut of, when the Element is the lowest Object on the canvas, same for Activities\n   */\n  private calculateWidthAndHeight(box: Box): [number, number] {\n    if (box.xLeft < 0) {\n      if (box.xRight < 0) {\n        this.width = Math.abs(box.xLeft - box.xRight);\n      } else {\n        this.width = Math.abs(box.xLeft) + box.xRight;\n      }\n    } else {\n      this.width = box.xRight - box.xLeft;\n    }\n\n    if (box.yUp < 0) {\n      if (box.yDown < 0) {\n        this.height = Math.abs(box.yUp - box.yDown);\n      } else {\n        this.height = Math.abs(box.yUp) + box.yDown;\n      }\n    } else {\n      this.height = box.yDown - box.yUp;\n    }\n\n    // if the domain-Story is smaller than 300px in width or height, increase its dimensions\n    if (this.height < 300) {\n      this.height += 300;\n      box.yUp -= 150;\n      box.yDown += 150;\n    }\n    if (this.width < 300) {\n      this.width += 300;\n      box.xLeft -= 150;\n      box.xRight += 150;\n    }\n    return [this.height, this.width];\n  }\n\n  extractSVG(viewport: any, outerSVGElement: any): string {\n    const layerResizers = viewport.getElementsByClassName('layer-resizers');\n    const layerOverlays = viewport.getElementsByClassName('layer-overlays');\n    const transform = viewport.getAttribute('transform');\n    const translate = viewport.getAttribute('translate');\n\n    if (layerResizers[0]) {\n      layerResizers[0].parentNode.removeChild(layerResizers[0]);\n    }\n    if (layerOverlays[0]) {\n      layerOverlays[0].parentNode.removeChild(layerOverlays[0]);\n    }\n\n    // remove canvas scrolling and scaling before serializeToString of SVG\n    if (transform) {\n      viewport.removeAttribute('transform');\n    }\n    if (translate) {\n      viewport.removeAttribute('translate');\n    }\n\n    const svg = new XMLSerializer().serializeToString(outerSVGElement);\n\n    // re-add canvas scrolling and scaling\n    if (transform) {\n      viewport.setAttribute('transform', transform);\n    }\n    if (translate) {\n      viewport.setAttribute('translate', translate);\n    }\n    return svg;\n  }\n\n  getWidth(): number {\n    return this.width;\n  }\n\n  getHeight(): number {\n    return this.height;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ConfigAndDST } from 'src/app/Domain/Export/configAndDst';\nimport { createTitleAndDescriptionSVGElement } from 'src/app/Service/Export/exportUtil';\nimport { ModelerService } from '../Modeler/modeler.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SvgService {\n  private cacheData = '';\n\n  constructor(private modelerService: ModelerService) {}\n\n  createSVGData(\n    title: string,\n    description: string,\n    dst: ConfigAndDST,\n    withTitle: boolean,\n    useWhiteBackground: boolean\n  ): string {\n    this.cacheData = this.modelerService.getEncoded();\n\n    let data = structuredClone(this.cacheData);\n\n    let viewBoxIndex = data.indexOf('width=\"');\n\n    let { width, height, viewBox } = this.viewBoxCoordinates(data);\n\n    let xLeft: number;\n    let xRight: number;\n    let yUp: number;\n    let yDown: number;\n    const splitViewBox = viewBox.split(/\\s/);\n\n    xLeft = +splitViewBox[0];\n    yUp = +splitViewBox[1];\n    xRight = +splitViewBox[2];\n    yDown = +splitViewBox[3];\n\n    if (xRight < 300) {\n      xRight += 300;\n      width += 300;\n    }\n\n    const { insertText, extraHeight } = createTitleAndDescriptionSVGElement(\n      title,\n      description,\n      xLeft,\n      yUp,\n      width\n    );\n    if (withTitle) {\n      // to display the title and description in the SVG-file, we need to add a container for the text-elements\n      height += extraHeight + 80;\n    }\n\n    const bounds = this.createBounds(\n      width,\n      height,\n      xLeft,\n      yUp,\n      xRight,\n      yDown,\n      withTitle\n    );\n\n    const dataStart = data.substring(0, viewBoxIndex);\n    viewBoxIndex = data.indexOf('\" version');\n\n    const dataEnd = data.substring(viewBoxIndex);\n    dataEnd.substring(viewBoxIndex);\n\n    data = dataStart + bounds + dataEnd;\n\n    const insertIndex = this.findIndexToInsertData(data);\n\n    if (withTitle) {\n      data = data.slice(0, insertIndex) + insertText + data.slice(insertIndex);\n    }\n\n    if (useWhiteBackground) {\n      const svgIndex = data.indexOf('width=\"');\n      const backgroundColorWhite = 'style=\"background-color:white\" ';\n      data =\n        data.slice(0, svgIndex) + backgroundColorWhite + data.slice(svgIndex);\n    }\n\n    return this.appendDST(data, dst);\n  }\n\n  private findIndexToInsertData(data: string) {\n    let insertIndex = data.indexOf('</defs>');\n    if (insertIndex < 0) {\n      insertIndex = data.indexOf('version=\"1.2\">') + 14;\n    } else {\n      insertIndex += 7;\n    }\n    return insertIndex;\n  }\n\n  private createBounds(\n    width: number,\n    height: number,\n    xLeft: number,\n    yUp: number,\n    xRight: number,\n    yDown: number,\n    withTitle: boolean\n  ): string {\n    return (\n      'width=\"' +\n      width +\n      '\" height=\" ' +\n      height +\n      '\" viewBox=\"' +\n      xLeft +\n      ' ' +\n      (withTitle ? yUp - 80 : yUp) +\n      ' ' +\n      xRight +\n      ' ' +\n      (yDown + 30)\n    );\n  }\n\n  private viewBoxCoordinates(svg: string): {\n    width: number;\n    height: number;\n    viewBox: string;\n  } {\n    const ViewBoxCoordinate =\n      /width=\"([^\"]+)\"\\s+height=\"([^\"]+)\"\\s+viewBox=\"([^\"]+)\"/;\n    const match = svg.match(ViewBoxCoordinate);\n    if (match) {\n      return { width: +match[1], height: +match[2], viewBox: match[3] };\n    }\n    return { width: 0, height: 0, viewBox: '' };\n  }\n\n  private appendDST(data: string, dst: ConfigAndDST): string {\n    data += '\\n<!-- <DST>\\n' + JSON.stringify(dst, null, 2) + '\\n </DST> -->';\n    return data;\n  }\n}\n","import { EventEmitter, Injectable, OnDestroy } from '@angular/core';\nimport { IconDictionaryService } from 'src/app/Service/DomainConfiguration/icon-dictionary.service';\nimport { Dictionary } from 'src/app/Domain/Common/dictionary/dictionary';\nimport { elementTypes } from 'src/app/Domain/Common/elementTypes';\nimport { TitleService } from 'src/app/Service/Title/title.service';\nimport { ImportRepairService } from 'src/app/Service/Import/import-repair.service';\nimport { Observable, Subscription } from 'rxjs';\nimport { RendererService } from 'src/app/Service/Renderer/renderer.service';\nimport { BusinessObject } from 'src/app/Domain/Common/businessObject';\nimport {\n  DomainConfiguration,\n  fromConfigurationFromFile,\n} from 'src/app/Domain/Common/domainConfiguration';\nimport { DialogService } from '../Dialog/dialog.service';\nimport { InfoDialogComponent } from '../../Presentation/Dialog/info-dialog/info-dialog.component';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { InfoDialogData } from '../../Domain/Dialog/infoDialogData';\nimport { restoreTitleFromFileName } from '../../Utils/sanitizer';\nimport {\n  INITIAL_DESCRIPTION,\n  INITIAL_TITLE,\n  SNACKBAR_DURATION,\n  SNACKBAR_ERROR,\n  SNACKBAR_INFO,\n} from '../../Domain/Common/constants';\nimport { DomainConfigurationService } from '../DomainConfiguration/domain-configuration.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ImportDomainStoryService implements OnDestroy {\n  titleSubscription: Subscription;\n  descriptionSubscription: Subscription;\n\n  title = INITIAL_TITLE;\n  description = INITIAL_DESCRIPTION;\n  private importedConfiguration: DomainConfiguration | null = null;\n\n  private importedConfigurationEmitter =\n    new EventEmitter<DomainConfiguration>();\n\n  constructor(\n    private iconDictionaryService: IconDictionaryService,\n    private importRepairService: ImportRepairService,\n    private titleService: TitleService,\n    private rendererService: RendererService,\n    private dialogService: DialogService,\n    private domainConfigurationService: DomainConfigurationService,\n    private snackbar: MatSnackBar\n  ) {\n    this.titleSubscription = this.titleService.title$.subscribe(\n      (title: string) => {\n        this.title = title;\n      }\n    );\n    this.descriptionSubscription = this.titleService.description$.subscribe(\n      (description: string) => {\n        this.description = description;\n      }\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.titleSubscription.unsubscribe();\n    this.descriptionSubscription.unsubscribe();\n  }\n\n  get importedConfigurationEvent(): Observable<DomainConfiguration> {\n    return this.importedConfigurationEmitter.asObservable();\n  }\n\n  getImportedConfiguration(): DomainConfiguration {\n    const config: DomainConfiguration = {\n      name: this.importedConfiguration?.name || '',\n      actors: this.importedConfiguration?.actors || new Dictionary(),\n      workObjects: this.importedConfiguration?.workObjects || new Dictionary(),\n    };\n    this.importedConfiguration = null;\n    return config;\n  }\n\n  importDST(input: Blob, filename: string, isSVG: boolean): void {\n    const fileReader = new FileReader();\n    const titleText = restoreTitleFromFileName(filename, isSVG);\n\n    // no need to put this on the commandStack\n    this.titleService.updateTitleAndDescription(titleText, null, false);\n\n    fileReader.onloadend = (e) => {\n      if (e && e.target) {\n        this.fileReaderFunction(e.target.result, isSVG, false);\n      }\n    };\n\n    fileReader.readAsText(input);\n  }\n\n  importEGN(input: Blob, filename: string, isSVG: boolean): void {\n    const fileReader = new FileReader();\n    const titleText = restoreTitleFromFileName(filename, isSVG);\n\n    // no need to put this on the commandStack\n    this.titleService.updateTitleAndDescription(titleText, null, false);\n\n    fileReader.onloadend = (e) => {\n      if (e && e.target) {\n        this.fileReaderFunction(e.target.result, isSVG, true);\n      }\n    };\n\n    fileReader.readAsText(input);\n  }\n\n  private fileReaderFunction(\n    text: string | ArrayBuffer | null,\n    isSVG: boolean,\n    isEGN: boolean\n  ): void {\n    let dstText;\n    if (typeof text === 'string') {\n      if (isSVG) {\n        dstText = this.removeXMLComments(text);\n      } else {\n        dstText = text;\n      }\n\n      let elements: any[];\n      let config: DomainConfiguration;\n      let configFromFile: {\n        name: string;\n        actors: { [key: string]: any };\n        workObjects: { [key: string]: any };\n      };\n\n      let dstAndConfig = this.extractDstAndConfig(dstText, isSVG);\n      if (dstAndConfig == null) {\n        return;\n      }\n\n      // current implementation\n      if (dstAndConfig.domain) {\n        configFromFile = isEGN\n          ? dstAndConfig.domain\n          : JSON.parse(dstAndConfig.domain);\n        config = fromConfigurationFromFile(configFromFile);\n        elements = isEGN ? dstAndConfig.dst : JSON.parse(dstAndConfig.dst);\n      } else {\n        // legacy implementation\n        if (dstAndConfig.config) {\n          configFromFile = JSON.parse(dstAndConfig.config);\n          config = fromConfigurationFromFile(configFromFile);\n          elements = JSON.parse(dstAndConfig.dst);\n        } else {\n          // implementation prior to configuration\n          elements = JSON.parse(dstText);\n          config =\n            this.domainConfigurationService.createMinimalConfigurationWithDefaultIcons();\n        }\n      }\n\n      const configChanged = this.checkConfigForChanges(config);\n\n      let lastElement = elements[elements.length - 1];\n      if (!lastElement.id) {\n        lastElement = elements.pop();\n        let importVersionNumber = lastElement;\n\n        // if the last element has the importedVersionNumber has the tag version,\n        // then there exists another meta tag 'info' for the description\n        if (importVersionNumber.version) {\n          lastElement = elements.pop();\n        }\n\n        if (importVersionNumber.version) {\n          importVersionNumber = importVersionNumber.version as string;\n        } else {\n          importVersionNumber = '?';\n          this.snackbar.open(`The version number is unreadable.`, undefined, {\n            duration: SNACKBAR_DURATION,\n            panelClass: SNACKBAR_ERROR,\n          });\n        }\n        elements = this.handleVersionNumber(importVersionNumber, elements);\n      }\n\n      if (\n        !this.importRepairService.checkForUnreferencedElementsInActivitiesAndRepair(\n          elements\n        )\n      ) {\n        this.showBrokenImportDialog(isSVG ? 'SVG' : 'DST');\n      }\n\n      this.titleService.updateTitleAndDescription(\n        null,\n        lastElement.info,\n        false\n      );\n\n      this.importRepairService.adjustPositions(elements);\n\n      this.updateIconRegistries(elements, config);\n      this.rendererService.importStory(elements, configChanged, config);\n    }\n  }\n\n  private handleVersionNumber(\n    importVersionNumber: string,\n    elements: BusinessObject[]\n  ): BusinessObject[] {\n    const versionPrefix = +importVersionNumber.substring(\n      0,\n      importVersionNumber.lastIndexOf('.')\n    );\n    if (versionPrefix <= 0.5) {\n      elements =\n        this.importRepairService.updateCustomElementsPreviousV050(elements);\n      this.showPreviousV050Dialog(versionPrefix);\n    }\n    return elements;\n  }\n\n  private extractDstAndConfig(dstText: string, isSVG: boolean) {\n    let dstAndConfig = null;\n    try {\n      dstAndConfig = JSON.parse(dstText);\n    } catch (e) {\n      this.showBrokenImportDialog(isSVG ? 'SVG' : 'DST');\n    }\n    return dstAndConfig;\n  }\n\n  private removeXMLComments(xmlText: string): string {\n    xmlText = xmlText.substring(xmlText.indexOf('<DST>'));\n    while (xmlText.includes('<!--') || xmlText.includes('-->')) {\n      xmlText = xmlText.replace('<!--', '').replace('-->', '');\n    }\n    xmlText = xmlText.replace('<DST>', '');\n    xmlText = xmlText.replace('</DST>', '');\n    return xmlText;\n  }\n\n  checkConfigForChanges(domainConfiguration: DomainConfiguration): boolean {\n    const newActorKeys = domainConfiguration.actors.keysArray();\n    const newWorkObjectKeys = domainConfiguration.workObjects.keysArray();\n\n    const currentActorKeys = this.iconDictionaryService.getTypeDictionaryKeys(\n      elementTypes.ACTOR\n    );\n    const currentWorkobjectKeys =\n      this.iconDictionaryService.getTypeDictionaryKeys(elementTypes.WORKOBJECT);\n\n    let changed = false;\n\n    if (\n      newActorKeys.length !== currentActorKeys.length ||\n      newWorkObjectKeys.length !== currentWorkobjectKeys.length\n    ) {\n      return true;\n    }\n\n    for (let i = 0; i < newActorKeys.length; i++) {\n      changed =\n        this.clearName(currentActorKeys[i]) !== this.clearName(newActorKeys[i]);\n      if (changed) {\n        i = newActorKeys.length;\n      }\n    }\n    if (changed) {\n      return changed;\n    }\n    for (let i = 0; i < newWorkObjectKeys.length; i++) {\n      changed =\n        this.clearName(currentWorkobjectKeys[i]) !==\n        this.clearName(newWorkObjectKeys[i]);\n      if (changed) {\n        i = newWorkObjectKeys.length;\n      }\n    }\n    return changed;\n  }\n\n  private clearName(name: string): string {\n    return name\n      .replace(elementTypes.ACTOR, '')\n      .replace(elementTypes.WORKOBJECT, '');\n  }\n\n  private updateIconRegistries(\n    elements: BusinessObject[],\n    config: DomainConfiguration\n  ): void {\n    const actorIcons = this.iconDictionaryService.getElementsOfType(\n      elements,\n      elementTypes.ACTOR\n    );\n    const workObjectIcons = this.iconDictionaryService.getElementsOfType(\n      elements,\n      elementTypes.WORKOBJECT\n    );\n    this.iconDictionaryService.updateIconRegistries(\n      actorIcons,\n      workObjectIcons,\n      config\n    );\n\n    this.setImportedConfigurationAndEmit(config);\n  }\n\n  private showPreviousV050Dialog(version: number): void {\n    const title = 'Compatability-Warning';\n    const text =\n      'The uploaded Domain-Story is from version ' +\n      version +\n      '. There may be problems with the default actors or workobjects contained in the story.';\n\n    const config = new MatDialogConfig();\n    config.disableClose = false;\n    config.autoFocus = true;\n\n    config.data = new InfoDialogData(title, text, true);\n\n    this.dialogService.openDialog(InfoDialogComponent, config);\n  }\n\n  private setImportedConfigurationAndEmit(config: DomainConfiguration) {\n    this.importedConfiguration = config;\n    this.importedConfigurationEmitter.emit(config);\n  }\n\n  private showBrokenImportDialog(type: string) {\n    const config = new MatDialogConfig();\n    config.disableClose = false;\n    config.autoFocus = true;\n    config.data = new InfoDialogData(\n      'Error during import',\n      'The uploaded ' +\n        type +\n        ' is not complete, there could be elements missing from the canvas.',\n      true,\n      false\n    );\n\n    this.dialogService.openDialog(InfoDialogComponent, config);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { elementTypes } from 'src/app/Domain/Common/elementTypes';\nimport { BusinessObject } from 'src/app/Domain/Common/businessObject';\nimport { Waypoint } from 'src/app/Domain/Common/waypoint';\nimport { ActivityBusinessObject } from '../../Domain/Common/activityBusinessObject';\n\n/**\n * Repairs broken Domain Stories so that it can be rendered onto the canvas\n * by removing activities and connections that reference elements that don't exists\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ImportRepairService {\n  checkForUnreferencedElementsInActivitiesAndRepair(\n    elements: BusinessObject[]\n  ): boolean {\n    const activities: ActivityBusinessObject[] = [];\n    const objectIDs: string[] = [];\n\n    let complete = true;\n\n    elements.forEach((element) => {\n      const type = element.type;\n      if (type === elementTypes.ACTIVITY || type === elementTypes.CONNECTION) {\n        activities.push(element as ActivityBusinessObject);\n      } else {\n        objectIDs.push(element.id);\n      }\n    });\n\n    activities.forEach((activity) => {\n      const source = activity.source;\n      const target = activity.target;\n      if (!objectIDs.includes(source) || !objectIDs.includes(target)) {\n        complete = false;\n        const activityIndex = elements.indexOf(activity);\n        elements = elements.splice(activityIndex, 1);\n      }\n    });\n    return complete;\n  }\n\n  /**\n   * Ensure backwards compatibility.\n   * Previously Document had no special name and was just addressed as workObject\n   * Bubble was renamed to Conversation\n   */\n  updateCustomElementsPreviousV050(\n    elements: BusinessObject[]\n  ): BusinessObject[] {\n    for (const element of elements) {\n      if (element.type === elementTypes.WORKOBJECT) {\n        element.type = elementTypes.WORKOBJECT + 'Document';\n      } else if (element.type === elementTypes.WORKOBJECT + 'Bubble') {\n        element.type = elementTypes.WORKOBJECT + 'Conversation';\n      }\n    }\n    return elements;\n  }\n\n  /**\n   * Adjusts Positions of Elements to ensure the Domain Story starts in the visible parts of the canvas\n   */\n  adjustPositions(elements: BusinessObject[]): void {\n    let xLeft = 0;\n    let yUp = 0;\n    let isFirst = true;\n\n    this.findFirstElement(elements, isFirst, xLeft, yUp);\n\n    if (xLeft < 75 || xLeft > 150 || yUp < 0 || yUp > 50) {\n      // add Padding for the Palette and the top\n      xLeft -= 75;\n      yUp -= 50;\n\n      elements.forEach((element) =>\n        this.adjustElementPosition(element, xLeft, yUp)\n      );\n    }\n  }\n\n  private adjustElementPosition(\n    element: BusinessObject,\n    xLeft: number,\n    yUp: number\n  ): void {\n    if (\n      element.type === elementTypes.ACTIVITY ||\n      element.type === elementTypes.CONNECTION\n    ) {\n      const waypoints = (element as ActivityBusinessObject).waypoints;\n      waypoints.forEach((point: Waypoint) => {\n        point.x -= xLeft;\n        point.y -= yUp;\n\n        if (point.original) {\n          point.original.x = point.x;\n          point.original.y = point.y;\n        }\n      });\n    } else {\n      element.x -= xLeft;\n      element.y -= yUp;\n    }\n  }\n\n  private findFirstElement(\n    elements: BusinessObject[],\n    isFirst: boolean,\n    xLeft: number,\n    yUp: number\n  ) {\n    elements.forEach((element) => {\n      let elXLeft;\n      let elYUp;\n      if (\n        element.type !== elementTypes.ACTIVITY &&\n        element.type !== elementTypes.CONNECTION\n      ) {\n        if (isFirst) {\n          xLeft = element.x;\n          yUp = element.y;\n          isFirst = false;\n        }\n        elXLeft = element.x;\n        elYUp = element.y;\n        if (elXLeft < xLeft) {\n          xLeft = elXLeft;\n        }\n        if (elYUp < yUp) {\n          yUp = elYUp;\n        }\n      }\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\nimport { elementTypes } from 'src/app/Domain/Common/elementTypes';\nimport { MassNamingService } from 'src/app/Service/LabelDictionary/mass-naming.service';\nimport { IconDictionaryService } from '../DomainConfiguration/icon-dictionary.service';\nimport { WorkObjectLabelEntry } from '../../Domain/LabelDictionary/workObjectLabelEntry';\nimport { LabelEntry } from '../../Domain/LabelDictionary/labelEntry';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LabelDictionaryService {\n  activityLabels: LabelEntry[] = [];\n  workObjektLabels: WorkObjectLabelEntry[] = [];\n\n  constructor(\n    private massNamingService: MassNamingService,\n    private elementRegistryService: ElementRegistryService,\n    private iconDictionaryService: IconDictionaryService\n  ) {}\n\n  createLabelDictionaries(): void {\n    this.activityLabels = [];\n    this.workObjektLabels = [];\n\n    const allObjects = this.elementRegistryService.getAllCanvasObjects();\n\n    allObjects.forEach((element) => {\n      const name = element.businessObject.name;\n      if (\n        name &&\n        name.length > 0 &&\n        element.type.includes(elementTypes.ACTIVITY) &&\n        !this.activityLabels.map((a) => a.name).includes(name)\n      ) {\n        this.activityLabels.push({\n          name,\n          originalName: name,\n        });\n      } else if (\n        name &&\n        name.length > 0 &&\n        element.type.includes(elementTypes.WORKOBJECT) &&\n        !this.workObjektLabels.map((e) => e.name).includes(name)\n      ) {\n        const iconName = element.type.replace(elementTypes.WORKOBJECT, '');\n        let icon = this.iconDictionaryService.getIconSource(iconName);\n        if (!icon) {\n          return;\n        }\n        if (!icon.startsWith('data')) {\n          icon = 'data:image/svg+xml,' + icon;\n        }\n        this.workObjektLabels.push({\n          name,\n          originalName: name,\n          icon,\n        });\n      }\n    });\n    this.activityLabels.sort((a, b) => {\n      return a.name.toLowerCase().localeCompare(b.name.toLowerCase());\n    });\n    this.workObjektLabels.sort((a, b) => {\n      return a.name.toLowerCase().localeCompare(b.name.toLowerCase());\n    });\n  }\n\n  getActivityLabels(): LabelEntry[] {\n    return this.activityLabels.slice();\n  }\n\n  getWorkObjectLabels(): WorkObjectLabelEntry[] {\n    return this.workObjektLabels.slice();\n  }\n\n  getUniqueWorkObjectNames(): String[] {\n    const workObjects = this.elementRegistryService.getAllWorkobjects();\n    return [\n      ...new Set(\n        workObjects\n          .filter((workObject) => {\n            return !!workObject.businessObject.name;\n          })\n          .map((workObject) => workObject.businessObject.name)\n      ),\n    ];\n  }\n\n  massRenameLabels(\n    activityNames: string[],\n    originalActivityNames: string[],\n    workObjectNames: string[],\n    originalWorkObjectNames: string[]\n  ): void {\n    for (let i = 0; i < originalActivityNames.length; i++) {\n      if (!activityNames[i]) {\n        activityNames[i] = '';\n      }\n      if (!(activityNames[i] == originalActivityNames[i])) {\n        this.massNamingService.massChangeNames(\n          originalActivityNames[i],\n          activityNames[i],\n          elementTypes.ACTIVITY\n        );\n      }\n    }\n    for (let i = 0; i < originalWorkObjectNames.length; i++) {\n      if (!workObjectNames[i]) {\n        workObjectNames[i] = '';\n      }\n      if (!(workObjectNames[i] == originalWorkObjectNames[i])) {\n        this.massNamingService.massChangeNames(\n          originalWorkObjectNames[i],\n          workObjectNames[i],\n          elementTypes.WORKOBJECT\n        );\n      }\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\nimport { CanvasObject } from 'src/app/Domain/Common/canvasObject';\nimport { elementTypes } from '../../Domain/Common/elementTypes';\nimport { CommandStackService } from '../CommandStack/command-stack.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MassNamingService {\n  constructor(\n    private elementRegistryService: ElementRegistryService,\n    private commandStackService: CommandStackService\n  ) {}\n\n  massChangeNames(\n    oldValue: string,\n    newValue: string,\n    type: elementTypes\n  ): void {\n    const allRelevantObjects: CanvasObject[] = [];\n\n    this.elementRegistryService.getAllCanvasObjects().forEach((element) => {\n      if (\n        element.type.includes(type) &&\n        element.businessObject.name === oldValue\n      ) {\n        allRelevantObjects.push(element);\n      }\n    });\n\n    const context = {\n      elements: allRelevantObjects,\n      newValue,\n    };\n\n    this.commandStackService.execute('domainStoryObjects.massRename', context);\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { initializeContextPadProvider } from '../../Modeler/modeler/context-pad/domainStoryContextPadProvider';\nimport {\n  getMultipleNumberRegistry,\n  getNumberRegistry,\n  initializeNumbering,\n  setNumberIsMultiple,\n  updateExistingNumbersAtEditing,\n} from '../../Modeler/modeler/numbering/numbering';\nimport { initializePalette } from '../../Modeler/modeler/palette/domainStoryPalette';\nimport { initializeRenderer } from '../../Modeler/modeler/domainStoryRenderer';\nimport {\n  initializeLabelEditingProvider,\n  toggleStashUse,\n} from '../../Modeler/modeler/labeling/dsLabelEditingProvider';\nimport { initializeReplaceOptions } from '../../Modeler/modeler/change-icon/replaceOptions';\n\nimport { DirtyFlagService } from '../DirtyFlag/dirty-flag.service';\nimport { IconDictionaryService } from '../DomainConfiguration/icon-dictionary.service';\nimport { ElementRegistryService } from '../ElementRegistry/element-registry.service';\nimport { DomainConfigurationService } from '../DomainConfiguration/domain-configuration.service';\nimport { LabelDictionaryService } from '../LabelDictionary/label-dictionary.service';\nimport { elementTypes } from '../../Domain/Common/elementTypes';\nimport { ReplayStateService } from '../Replay/replay-state.service';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { ActivityDialogData } from '../../Domain/Dialog/activityDialogData';\nimport { ActivityDialogComponent } from '../../Presentation/Dialog/activity-dialog/activity-dialog.component';\nimport { DialogService } from '../Dialog/dialog.service';\nimport massRenameHandler from '../../Modeler/modeler/updateHandler/massRenameHandler';\nimport headlineAndDescriptionUpdateHandler from '../../Modeler/modeler/updateHandler/headlineAndDescriptionUpdateHandler';\nimport { TitleService } from '../Title/title.service';\nimport { ActivityCanvasObject } from '../../Domain/Common/activityCanvasObject';\nimport { HtmlPresentationService } from '../Export/html-presentation.service';\nimport { positionsMatch } from '../../Utils/mathExtensions';\nimport activityUpdateHandler, {\n  initializeActivityUpdateHandler,\n} from '../../Modeler/modeler/updateHandler/activityUpdateHandlers';\nimport elementUpdateHandler from '../../Modeler/modeler/updateHandler/elementUpdateHandler';\nimport { CommandStackService } from '../CommandStack/command-stack.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class InitializerService {\n  constructor(\n    private dirtyFlagService: DirtyFlagService,\n    private iconDictionaryService: IconDictionaryService,\n    private elementRegistryService: ElementRegistryService,\n    private configurationService: DomainConfigurationService,\n    private labelDictionaryService: LabelDictionaryService,\n    private replayStateService: ReplayStateService,\n    private dialogService: DialogService,\n    private commandStackService: CommandStackService,\n    private titleService: TitleService,\n    private htmlPresentationService: HtmlPresentationService\n  ) {}\n\n  initializeDomainStoryModelerClasses(): void {\n    initializeContextPadProvider(\n      this.dirtyFlagService,\n      this.iconDictionaryService\n    );\n    /** The Palette and the Context Menu need the Icons present in the Domain,\n     * so the IconDictionaryService and the DomainConfigurationService needs to be given to the Palette **/\n    initializePalette(this.iconDictionaryService, this.configurationService);\n    initializeRenderer(\n      this.iconDictionaryService,\n      this.elementRegistryService,\n      this.dirtyFlagService\n    );\n    initializeLabelEditingProvider(this.labelDictionaryService);\n    initializeReplaceOptions(this.iconDictionaryService);\n    initializeNumbering(this.elementRegistryService);\n    initializeActivityUpdateHandler(this.elementRegistryService);\n  }\n\n  propagateDomainStoryModelerClassesToServices(\n    commandStack: any,\n    elementRegistry: any,\n    canvas: any,\n    selection: any,\n    modeler: any\n  ): void {\n    this.commandStackService.setCommandStack(commandStack);\n    this.elementRegistryService.setElementRegistry(elementRegistry);\n    this.htmlPresentationService.setModelerClasses(canvas, selection, modeler);\n  }\n\n  initializeDomainStoryModelerEventHandlers(\n    commandStack: any,\n    eventBus: any\n  ): void {\n    activityUpdateHandler(commandStack, eventBus);\n    massRenameHandler(commandStack, eventBus);\n    elementUpdateHandler(commandStack, eventBus);\n    headlineAndDescriptionUpdateHandler(commandStack, this.titleService);\n  }\n\n  initiateEventBusListeners(eventBus: any, commandStack: any): void {\n    eventBus.on('element.dblclick', (e: any) => {\n      if (!this.replayStateService.getReplayOn()) {\n        const element = e.element;\n        if (element.type === elementTypes.ACTIVITY) {\n          // override the doubleClickListener on activities\n          this.activityDoubleClick(element, eventBus, commandStack);\n        } else {\n          const renderedNumberRegistry = getNumberRegistry();\n\n          // add a DoubleClickListener to the number on activities\n          if (renderedNumberRegistry.length > 1) {\n            const allActivities =\n              this.elementRegistryService.getActivitiesFromActors();\n\n            if (allActivities.length > 0) {\n              const htmlCanvas = document.getElementById('canvas');\n              if (htmlCanvas) {\n                const container =\n                  htmlCanvas.getElementsByClassName('djs-container');\n                const svgElements = container[0].getElementsByTagName('svg');\n                const outerSVGElement = svgElements[0];\n                const viewport =\n                  outerSVGElement.getElementsByClassName('viewport')[0];\n                let transform = viewport.getAttribute('transform');\n\n                let transformX = 0;\n                let transformY = 0;\n                let zoomX = 1;\n                let zoomY = 1;\n                let nums;\n\n                const clickX = e.originalEvent.offsetX;\n                const clickY = e.originalEvent.offsetY;\n\n                // adjust for zoom and panning\n                if (transform) {\n                  transform = transform.replace('matrix(', '');\n                  transform.replace(')', '');\n                  nums = transform.split(',');\n                  zoomX = parseFloat(nums[0]);\n                  zoomY = parseFloat(nums[3]);\n                  transformX = parseInt(nums[4], undefined);\n                  transformY = parseInt(nums[5], undefined);\n                }\n\n                const width = 25 * zoomX;\n                const height = 22 * zoomY;\n\n                for (let i = 1; i < renderedNumberRegistry.length; i++) {\n                  const currentNum = renderedNumberRegistry[i];\n                  if (currentNum) {\n                    const tspan = currentNum.getElementsByTagName('tspan')[0];\n                    const tx = tspan.getAttribute('x');\n                    const ty = tspan.getAttribute('y');\n                    const tNumber = parseInt(tspan.innerHTML, undefined);\n\n                    const elementX = Math.floor(\n                      tx * zoomX + (transformX - 11 * zoomX)\n                    );\n                    const elementY = Math.floor(\n                      ty * zoomY + (transformY - 15 * zoomY)\n                    );\n\n                    allActivities.forEach((activity: ActivityCanvasObject) => {\n                      const activityNumber = activity.businessObject.number;\n                      if (activityNumber === tNumber) {\n                        if (\n                          positionsMatch(\n                            width,\n                            height,\n                            elementX,\n                            elementY,\n                            clickX,\n                            clickY\n                          )\n                        ) {\n                          this.activityDoubleClick(\n                            activity,\n                            eventBus,\n                            commandStack\n                          );\n                        }\n                      }\n                    });\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    });\n\n    // when in replay, do not allow any interaction on the canvas\n    eventBus.on(\n      [\n        'element.click',\n        'element.dblclick',\n        'element.mousedown',\n        'drag.init',\n        'canvas.viewbox.changing',\n        'autoPlace',\n        'popupMenu.open',\n      ],\n      10000000000,\n      (event: any) => {\n        if (this.replayStateService.getReplayOn()) {\n          event.stopPropagation();\n          event.preventDefault();\n        }\n      }\n    );\n  }\n\n  /** Overrrides for Canvas Functions **/\n  private activityDoubleClick(\n    activity: ActivityCanvasObject,\n    eventBus: any,\n    commandStack: any\n  ): void {\n    const source = activity.source;\n\n    // ensure the right number when changing the direction of an activity\n    toggleStashUse(false);\n\n    const config = new MatDialogConfig();\n    config.disableClose = false;\n    config.autoFocus = true;\n\n    if (\n      activity.businessObject.number &&\n      source &&\n      source.type.includes(elementTypes.ACTOR)\n    ) {\n      config.data = new ActivityDialogData(\n        activity,\n        getMultipleNumberRegistry()[activity.businessObject.number],\n        true,\n        (data: any) => this.saveActivityInputLabel(data, eventBus, commandStack)\n      );\n    } else if (source && source.type.includes(elementTypes.WORKOBJECT)) {\n      config.data = new ActivityDialogData(\n        activity,\n        false,\n        false,\n        (activityData: any) =>\n          this.saveActivityInputLabel(activityData, eventBus, commandStack)\n      );\n    }\n    this.dialogService.openDialog(ActivityDialogComponent, config);\n  }\n\n  private saveActivityInputLabel(\n    activityData: any,\n    eventBus: any,\n    commandStack: any\n  ): void {\n    const label = activityData.activityLabel;\n    const hasNumber = activityData.activityNumber ?? false;\n    const activityNumber = activityData.activityNumber;\n    const multipleNumberAllowed = activityData.multipleNumbers ?? false;\n    const element = activityData.activity;\n\n    const activitiesFromActors =\n      this.elementRegistryService.getActivitiesFromActors();\n    const index = activitiesFromActors.indexOf(element);\n\n    activitiesFromActors.splice(index, 1);\n    if (hasNumber) {\n      setNumberIsMultiple(activityNumber, multipleNumberAllowed);\n    }\n    element.businessObject.multipleNumberAllowed = multipleNumberAllowed;\n\n    let options: any;\n    if (hasNumber) {\n      options = {\n        businessObject: element.businessObject,\n        newLabel: label,\n        newNumber: activityNumber,\n        element,\n      };\n    } else {\n      options = {\n        businessObject: element.businessObject,\n        newLabel: label,\n        element,\n      };\n    }\n\n    commandStack.execute('activity.changed', options);\n    if (element.businessObject.multipleNumberAllowed !== false) {\n      if (getMultipleNumberRegistry()[activityNumber] === false) {\n        updateExistingNumbersAtEditing(\n          activitiesFromActors,\n          activityNumber,\n          eventBus\n        );\n      }\n    } else if (element.businessObject.multipleNumberAllowed === false) {\n      updateExistingNumbersAtEditing(\n        activitiesFromActors,\n        activityNumber,\n        eventBus\n      );\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { assign } from 'min-dash';\nimport DomainStoryModeler from 'src/app/Modeler';\nimport { DomainConfiguration } from 'src/app/Domain/Common/domainConfiguration';\nimport { InitializerService } from './initializer.service';\nimport { ElementRegistryService } from '../ElementRegistry/element-registry.service';\nimport { IconDictionaryService } from '../DomainConfiguration/icon-dictionary.service';\nimport { DomainConfigurationService } from '../DomainConfiguration/domain-configuration.service';\nimport { BusinessObject } from '../../Domain/Common/businessObject';\nimport { StorageService } from '../BrowserStorage/storage.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ModelerService {\n  constructor(\n    private initializerService: InitializerService,\n    private elementRegistryService: ElementRegistryService,\n    private iconDictionaryService: IconDictionaryService,\n    private domainConfigurationService: DomainConfigurationService,\n    private storageService: StorageService\n  ) {}\n\n  private modeler: any;\n  private canvas: any;\n  private elementRegistry: any;\n  private commandStack: any;\n  private selection: any;\n  private eventBus: any;\n\n  private encoded: string | undefined;\n\n  postInit(): void {\n    const storedDomainConfiguration =\n      this.storageService.getStoredDomainConfiguration();\n    if (storedDomainConfiguration) {\n      this.iconDictionaryService.setCusomtConfiguration(\n        storedDomainConfiguration\n      );\n      this.domainConfigurationService.loadConfiguration(\n        storedDomainConfiguration\n      );\n    }\n    this.initializerService.initializeDomainStoryModelerClasses();\n    this.modeler = new DomainStoryModeler({\n      container: '#canvas',\n      keyboard: {\n        bindTo: document,\n      },\n\n      // Disable BPMN-SearchModule and re-enable browser Search\n      additionalModules: [\n        {\n          bpmnSearch: ['value', 'foo'],\n        },\n      ],\n    });\n\n    if (this.modeler.get) {\n      this.canvas = this.modeler.get('canvas');\n      this.elementRegistry = this.modeler.get('elementRegistry');\n      this.eventBus = this.modeler.get('eventBus');\n      this.commandStack = this.modeler.get('commandStack');\n      this.selection = this.modeler.get('selection');\n    }\n\n    this.initializerService.initializeDomainStoryModelerEventHandlers(\n      this.commandStack,\n      this.eventBus\n    );\n    this.initializerService.propagateDomainStoryModelerClassesToServices(\n      this.commandStack,\n      this.elementRegistry,\n      this.canvas,\n      this.selection,\n      this.modeler\n    );\n\n    const exportArtifacts = this.debounce(this.saveSVG, 500);\n    if (this.modeler.get) {\n      this.modeler.on('commandStack.changed', exportArtifacts);\n    }\n\n    this.initializerService.initiateEventBusListeners(\n      this.eventBus,\n      this.commandStack\n    );\n\n    this.modeler.createDiagram();\n    // expose bpmnjs to window for debugging purposes\n    assign(window, { bpmnjs: this.modeler });\n\n    this.startDebounce();\n  }\n\n  restart(\n    domainConfiguration?: DomainConfiguration,\n    domainStory?: BusinessObject[]\n  ): void {\n    const currentStory =\n      domainStory != undefined\n        ? domainStory\n        : this.elementRegistryService\n            .createObjectListForDSTDownload()\n            .map((e) => e.businessObject);\n    if (!domainConfiguration) {\n      domainConfiguration = this.storageService.getStoredDomainConfiguration();\n    }\n    if (domainConfiguration) {\n      this.storageService.setStoredDomainConfiguration(domainConfiguration);\n      this.iconDictionaryService.setCusomtConfiguration(domainConfiguration);\n      this.domainConfigurationService.loadConfiguration(domainConfiguration);\n    }\n\n    this.elementRegistryService.clear();\n    this.modeler?.destroy();\n    this.postInit();\n    if (currentStory && this.modeler.get) {\n      this.modeler.importCustomElements(currentStory);\n    }\n  }\n\n  /** Interactions with the Modeler **/\n  getModeler(): any {\n    return this.modeler;\n  }\n\n  commandStackChanged(): void {\n    // to update the title of the svg, we need to tell the command stack, that a value has changed\n    this.eventBus.fire(\n      'commandStack.changed',\n      this.debounce(this.saveSVG, 500)\n    );\n  }\n\n  startDebounce(): void {\n    this.debounce(this.saveSVG, 500);\n  }\n\n  debounce(fn: any, timeout: number): any {\n    return () => {\n      let timer;\n      if (timer) {\n        clearTimeout(timer);\n      }\n      timer = setTimeout(() => {\n        // tslint:disable-next-line:no-unused-expression\n        fn(this.modeler).then((svg: string) => {\n          this.encoded = svg;\n        }) as Promise<any>;\n      }, timeout);\n    };\n  }\n\n  getEncoded(): string {\n    return this.encoded ? this.encoded : '';\n  }\n\n  async saveSVG(modeler: any): Promise<any> {\n    try {\n      const result = await modeler.saveSVG();\n      return result.svg;\n    } catch (err) {\n      alert('There was an error saving the SVG.\\n' + err);\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ModelerService } from 'src/app/Service/Modeler/modeler.service';\nimport { BusinessObject } from 'src/app/Domain/Common/businessObject';\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\nimport { DirtyFlagService } from 'src/app/Service/DirtyFlag/dirty-flag.service';\nimport { DomainConfiguration } from 'src/app/Domain/Common/domainConfiguration';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class RendererService {\n  constructor(\n    private modelerService: ModelerService,\n    private elementRegistryService: ElementRegistryService,\n    private dirtyFlagService: DirtyFlagService\n  ) {}\n\n  renderStory(domainStory: BusinessObject[]): void {\n    this.modelerService.getModeler().importCustomElements(domainStory);\n  }\n\n  reset(): void {\n    this.renderStory([]);\n  }\n\n  importStory(\n    domainStory: BusinessObject[],\n    configurationChange: boolean,\n    config?: DomainConfiguration,\n    makeClean = true\n  ): void {\n    this.modelerService.restart(config, domainStory);\n    this.renderStory(domainStory);\n\n    this.elementRegistryService.correctInitialize();\n\n    this.modelerService.commandStackChanged();\n    this.modelerService.startDebounce();\n\n    if (makeClean) {\n      this.dirtyFlagService.makeClean();\n    }\n  }\n\n  getStory(): BusinessObject[] {\n    return this.elementRegistryService\n      .createObjectListForDSTDownload()\n      .map((c) => c.businessObject);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ReplayStateService {\n  private replayOnSubject = new BehaviorSubject<boolean>(false);\n\n  replayOn$ = this.replayOnSubject.asObservable();\n\n  setReplayState(state: boolean): void {\n    this.replayOnSubject.next(state);\n  }\n\n  getReplayOn(): boolean {\n    return this.replayOnSubject.value;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ReplayStateService } from 'src/app/Service/Replay/replay-state.service';\nimport { DomManipulationService } from 'src/app/Service/DomManipulation/dom-manipulation.service';\nimport { StoryStep } from 'src/app/Domain/Replay/storyStep';\nimport { StoryCreatorService } from './storyCreator/story-creator.service';\nimport { BehaviorSubject } from 'rxjs';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport {\n  SNACKBAR_DURATION,\n  SNACKBAR_INFO,\n} from '../../Domain/Common/constants';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ReplayService {\n  private story: StoryStep[] = [];\n  private currentStep = new BehaviorSubject(-1);\n  private maxStepNumber = new BehaviorSubject(0);\n\n  currentStep$ = this.currentStep.asObservable();\n  maxStepNumber$ = this.maxStepNumber.asObservable();\n\n  constructor(\n    private replayStateService: ReplayStateService,\n    private domManipulationService: DomManipulationService,\n    private storyCreatorService: StoryCreatorService,\n    private snackbar: MatSnackBar\n  ) {}\n\n  initializeReplay(): void {\n    this.currentStep.next(1);\n    this.story = this.storyCreatorService.traceActivitiesAndCreateStory();\n    this.maxStepNumber.next(this.story.length);\n  }\n\n  getCurrentStepNumber(): number {\n    return this.currentStep.value;\n  }\n\n  getMaxStepNumber(): number {\n    return this.maxStepNumber.value;\n  }\n\n  nextStep(): void {\n    if (this.currentStep.value < this.story.length) {\n      this.currentStep.next(this.currentStep.value + 1);\n      this.showCurrentStep();\n    }\n  }\n\n  previousStep(): void {\n    if (this.currentStep.value > 1) {\n      this.currentStep.next(this.currentStep.value - 1);\n      this.showCurrentStep();\n    }\n  }\n\n  private showCurrentStep() {\n    this.domManipulationService.showStep(\n      this.story[this.currentStep.value - 1],\n      this.currentStep.value > 1\n        ? this.story[this.currentStep.value - 2]\n        : undefined\n    );\n  }\n\n  startReplay(): void {\n    this.initializeReplay();\n    if (this.story?.length) {\n      const missingSteps = this.storyCreatorService.getMissingSteps(this.story);\n      if (missingSteps.length === 0) {\n        this.replayStateService.setReplayState(true);\n        this.domManipulationService.showStep(\n          this.story[this.currentStep.getValue() - 1]\n        );\n      } else {\n        const steps = missingSteps.join(', ');\n        this.snackbar.open(\n          steps.length === 1\n            ? `The Domain Story is not complete. Step ${steps} is missing.`\n            : `The Domain Story is not complete. Steps ${steps} are missing.`,\n          undefined,\n          {\n            duration: SNACKBAR_DURATION * 2,\n            panelClass: SNACKBAR_INFO,\n          }\n        );\n      }\n    } else {\n      this.snackbar.open('You need a Domain Story for replay.', undefined, {\n        duration: SNACKBAR_DURATION * 2,\n        panelClass: SNACKBAR_INFO,\n      });\n    }\n  }\n\n  stopReplay(): void {\n    this.currentStep.next(-1);\n    this.maxStepNumber.next(0);\n    this.replayStateService.setReplayState(false);\n    this.domManipulationService.showAll();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { elementTypes } from '../../../Domain/Common/elementTypes';\nimport { ActivityCanvasObject } from '../../../Domain/Common/activityCanvasObject';\nimport { BusinessObject } from '../../../Domain/Common/businessObject';\nimport { CanvasObject } from '../../../Domain/Common/canvasObject';\nimport { ElementRegistryService } from '../../ElementRegistry/element-registry.service';\nimport { StoryStep } from '../../../Domain/Replay/storyStep';\nimport { Dictionary } from '../../../Domain/Common/dictionary/dictionary';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class StoryCreatorService {\n  constructor(private elementRegistryService: ElementRegistryService) {}\n\n  traceActivitiesAndCreateStory(): StoryStep[] {\n    const tracedActivityMap = new Dictionary();\n    const story: StoryStep[] = [];\n    const activities = this.elementRegistryService.getActivitiesFromActors();\n\n    activities.forEach((activity) => {\n      const activityNumber = Number(activity.businessObject.number); // Sometimes the activityNumber is a string for some reason\n      const tracedItem = tracedActivityMap.get(`${activityNumber - 1}`)\n        ? tracedActivityMap.get(`${activityNumber - 1}`)\n        : [];\n      tracedItem.push(activity);\n      tracedActivityMap.set(`${activityNumber - 1}`, tracedItem);\n    });\n\n    for (let i = 0; i < tracedActivityMap.keysArray().length; i++) {\n      this.createStep(tracedActivityMap, i, story);\n    }\n    this.addGroupStep(story);\n    return story;\n  }\n\n  private createStep(\n    tracedActivityMap: Dictionary,\n    i: number,\n    story: StoryStep[]\n  ): void {\n    const stepObjects = this.getStepObjects(\n      tracedActivityMap.get(`${i}`) || []\n    );\n    const highlightedElements = stepObjects.map((t) => t.id);\n    if (i > 0) {\n      story[i - 1].objects.forEach((object) => {\n        if (!stepObjects.includes(object)) {\n          stepObjects.push(object);\n        }\n      });\n    }\n    story[i] = {\n      highlightedObjects: highlightedElements,\n      objects: stepObjects,\n    };\n  }\n\n  getMissingSteps(story: StoryStep[]): number[] {\n    if (!story || story.length === 0) {\n      return [];\n    }\n\n    const missingSteps: number[] = [];\n    let complete = true;\n    for (let i = 0; i < story.length; i++) {\n      if (\n        !story[i] ||\n        !(story[i].objects.length > 0) ||\n        story[i].objects.filter(\n          (element) => element.type === elementTypes.ACTIVITY\n        ).length <= 0\n      ) {\n        missingSteps.push(i + 1);\n        complete = false;\n      }\n    }\n    return missingSteps;\n  }\n\n  private getStepObjects(\n    tracedActivity: ActivityCanvasObject[]\n  ): BusinessObject[] {\n    const initialSource: CanvasObject[] = [];\n    const activities = tracedActivity;\n    const targetObjects: CanvasObject[] = [];\n\n    tracedActivity.forEach((parallelStep: ActivityCanvasObject) => {\n      initialSource.push(parallelStep.source);\n\n      const firstTarget = parallelStep.target;\n      targetObjects.push(firstTarget);\n\n      // check the outgoing activities for each target\n      for (const checkTarget of targetObjects) {\n        if (\n          checkTarget.businessObject &&\n          !checkTarget.businessObject.type.includes('actor') &&\n          checkTarget.outgoing\n        ) {\n          // check the target for each outgoing activity\n          checkTarget.outgoing.forEach((activity: ActivityCanvasObject) => {\n            activities.push(activity);\n            const activityTarget = activity.target;\n            if (activityTarget && !targetObjects.includes(activityTarget)) {\n              targetObjects.push(activityTarget);\n            }\n          });\n        }\n      }\n    });\n    return initialSource\n      .map((e) => e.businessObject)\n      .concat(activities.map((a) => a.businessObject))\n      .concat(targetObjects.map((t) => t.businessObject));\n  }\n\n  /** Groups should be shown at the End of the Story **/\n  private addGroupStep(story: StoryStep[]): void {\n    const groups = this.elementRegistryService.getAllGroups() as CanvasObject[];\n    if (groups.length > 0) {\n      story.push({\n        highlightedObjects: [],\n        objects: groups\n          .map((g) => g.businessObject)\n          .concat(story[story.length - 1].objects),\n      });\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SettingsService {\n  private showSettings = new BehaviorSubject(false);\n  showSettings$ = this.showSettings.asObservable();\n\n  close(): void {\n    this.showSettings.next(false);\n  }\n\n  open(): void {\n    this.showSettings.next(true);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport {\n  INITIAL_DESCRIPTION,\n  INITIAL_DOMAIN_NAME,\n  INITIAL_TITLE,\n} from '../../Domain/Common/constants';\nimport { CommandStackService } from '../CommandStack/command-stack.service';\nimport { environment } from '../../../environments/environment';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TitleService {\n  private titleSubject = new BehaviorSubject<string>(INITIAL_TITLE);\n  private descriptionSubject = new BehaviorSubject<string>(INITIAL_DESCRIPTION);\n  private domainNameSubject = new BehaviorSubject<string>(INITIAL_DOMAIN_NAME);\n  private showDescriptionSubject = new BehaviorSubject<boolean>(true);\n\n  title$ = this.titleSubject.asObservable();\n  description$ = this.descriptionSubject.asObservable();\n  showDescription$ = this.showDescriptionSubject.asObservable();\n  domainName$ = this.domainNameSubject.asObservable();\n\n  constructor(private commandStackService: CommandStackService) {}\n\n  updateTitleAndDescription(\n    title: string | null,\n    description: string | null,\n    allowUndo: boolean\n  ): void {\n    if (allowUndo) {\n      this.fireTitleAndDescriptionUpdate(title, description);\n    } else {\n      this.updateTitle(title);\n      this.updateDescription(description);\n    }\n  }\n\n  reset(): void {\n    this.updateTitleAndDescription(INITIAL_TITLE, INITIAL_DESCRIPTION, false);\n  }\n\n  private updateTitle(title: string | null): void {\n    this.titleSubject.next(title ?? this.titleSubject.value);\n    document.title = title ?? this.titleSubject.value + ' - egon.io';\n  }\n\n  private updateDescription(description: string | null): void {\n    this.descriptionSubject.next(description ?? this.descriptionSubject.value);\n  }\n\n  setShowDescription(show: boolean): void {\n    this.showDescriptionSubject.next(show);\n  }\n\n  setDomainName(name: string): void {\n    this.domainNameSubject.next(name);\n  }\n\n  getTitle(): string {\n    return this.titleSubject.value;\n  }\n\n  getDescription(): string {\n    return this.descriptionSubject.value;\n  }\n\n  getDomainName(): string {\n    return this.domainNameSubject.value;\n  }\n\n  getVersion(): string {\n    return environment.version;\n  }\n\n  private fireTitleAndDescriptionUpdate(\n    newTitle: string | null,\n    newDescription: string | null\n  ): void {\n    const context = {\n      newTitle,\n      newDescription,\n    };\n    this.commandStackService.execute(\n      'story.updateHeadlineAndDescription',\n      context\n    );\n  }\n}\n","'use strict';\n\n// convert rad to deg\nexport function degrees(radians: number): number {\n  return (radians * 180) / Math.PI;\n}\n\n// calculate the angle between two points in 2D\nexport function angleBetween(\n  startPoint: Point,\n  endPoint: Point\n): number | undefined {\n  let quadrant;\n\n  // determine in which quadrant we are\n  if (startPoint.x <= endPoint.x) {\n    if (startPoint.y >= endPoint.y) {\n      quadrant = 0;\n    } // upper right quadrant\n    else {\n      quadrant = 3;\n    } // lower right quadrant\n  } else {\n    if (startPoint.y >= endPoint.y) {\n      quadrant = 1;\n    } // upper left Quadrant\n    else {\n      quadrant = 2;\n    } // lower left quadrant\n  }\n\n  const adjacent = Math.abs(startPoint.y - endPoint.y);\n  const opposite = Math.abs(startPoint.x - endPoint.x);\n\n  // since the arcus-tangens only gives values between 0 and 90, we have to adjust for the quadrant we are in\n\n  if (quadrant === 0) {\n    return 90 - degrees(Math.atan2(opposite, adjacent));\n  }\n  if (quadrant === 1) {\n    return 90 + degrees(Math.atan2(opposite, adjacent));\n  }\n  if (quadrant === 2) {\n    return 270 - degrees(Math.atan2(opposite, adjacent));\n  }\n  if (quadrant === 3) {\n    return 270 + degrees(Math.atan2(opposite, adjacent));\n  }\n  return undefined;\n}\n\nexport function positionsMatch(\n  width: number,\n  height: number,\n  elementX: number,\n  elementY: number,\n  clickX: number,\n  clickY: number\n): boolean {\n  if (clickX > elementX && clickX < elementX + width) {\n    if (clickY > elementY && clickY < elementY + height) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport class Point {\n  y = 0;\n  x = 0;\n}\n","import { elementTypes } from 'src/app/Domain/Common/elementTypes';\n\nexport function getNameFromType(type: string): string {\n  if (type.includes(elementTypes.ACTOR)) {\n    return type.replace(elementTypes.ACTOR, '');\n  } else if (type.includes(elementTypes.WORKOBJECT)) {\n    return type.replace(elementTypes.WORKOBJECT, '');\n  }\n  return '';\n}\n","'use strict';\n\n// sanitize user-Input to be Desktop-Filename safe\nexport function sanitizeForDesktop(str: string): string {\n  const map: { [key: string]: string } = {\n    '/': '',\n    '\\\\': '',\n    ':': '',\n    '*': '',\n    '?': '',\n    '\"': '',\n    '<': '',\n    '>': '',\n    '|': '',\n  };\n  const reg = /[/\\\\:*?\"<>|]/gi;\n  return str ? str.replace(reg, (match) => map[match]) : '';\n}\n\nexport function sanitizeIconName(name: string): string {\n  const map: { [key: string]: string } = {\n    '/': '',\n    '\\\\': '',\n    ':': '',\n    '*': '',\n    '?': '',\n    '\"': '',\n    '<': '',\n    '>': '',\n    '|': '',\n    '(': '',\n    ')': '',\n    ' ': '-',\n    '.': '_',\n  };\n  const reg = /[/\\\\:*?\"<>|() .]/gi;\n  return name\n    ? name.replace(reg, (match) => {\n        return map[match];\n      })\n    : '';\n}\n\nexport function restoreTitleFromFileName(\n  filename: string,\n  isSVG: boolean\n): string {\n  let title;\n\n  const domainStoryRegex = /_\\d+-\\d+-\\d+( ?_?-?\\(\\d+\\))?(-?\\d)?(.dst|.egn)/;\n  const svgRegex = /_\\d+-\\d+-\\d+( ?_?-?\\(\\d+\\))?(-?\\d)?(.dst|.egn).svg/;\n\n  const egnSuffix = '.egn';\n  const dstSuffix = '.dst';\n  const svgSuffix = '.svg';\n\n  let filenameWithoutDateSuffix = filename.replace(\n    isSVG ? svgRegex : domainStoryRegex,\n    ''\n  );\n  if (filenameWithoutDateSuffix.includes(isSVG ? svgSuffix : dstSuffix)) {\n    filenameWithoutDateSuffix = filenameWithoutDateSuffix\n      .replace(svgSuffix, '')\n      .replace(dstSuffix, '')\n      .replace(egnSuffix, '');\n  }\n  title = filenameWithoutDateSuffix;\n  return title;\n}\n","import { Component, OnInit } from '@angular/core';\nimport { SettingsService } from 'src/app/Service/Settings/settings.service';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { DialogService } from './Service/Dialog/dialog.service';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { InfoDialogData } from './Domain/Dialog/infoDialogData';\nimport { InfoDialogComponent } from './Presentation/Dialog/info-dialog/info-dialog.component';\nimport { TitleService } from './Service/Title/title.service';\nimport { ExportService } from './Service/Export/export.service';\nimport { ReplayStateService } from './Service/Replay/replay-state.service';\nimport { ReplayService } from './Service/Replay/replay.service';\nimport { environment } from '../environments/environment';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n})\nexport class AppComponent implements OnInit {\n  showSettings$: Observable<boolean> | BehaviorSubject<boolean>;\n  showDescription$: Observable<boolean>;\n  version: string = environment.version;\n\n  constructor(\n    private settingsService: SettingsService,\n    private dialogService: DialogService,\n    private titleService: TitleService,\n    private exportService: ExportService,\n    private replayStateSerice: ReplayStateService,\n    replayService: ReplayService\n  ) {\n    this.showSettings$ = new BehaviorSubject(false);\n    this.showDescription$ = new BehaviorSubject(true);\n\n    document.onkeydown = (e: KeyboardEvent) => {\n      if (e.ctrlKey && e.key === 's') {\n        if (this.exportService.isDomainStoryExportable()) {\n          this.exportService.downloadDST();\n        }\n        e.preventDefault();\n        e.stopPropagation();\n      }\n      if (e.ctrlKey && e.key === 'l') {\n        document.getElementById('import')?.click();\n        e.preventDefault();\n        e.stopPropagation();\n      }\n      if (e.key === 'ArrowRight' && this.replayStateSerice.getReplayOn()) {\n        e.preventDefault();\n        e.stopPropagation();\n        replayService.nextStep();\n      }\n      if (e.key === 'ArrowLeft' && this.replayStateSerice.getReplayOn()) {\n        e.preventDefault();\n        e.stopPropagation();\n        replayService.previousStep();\n      }\n    };\n  }\n\n  ngOnInit(): void {\n    this.showDescription$ = this.titleService.showDescription$;\n    this.showSettings$ = this.settingsService.showSettings$;\n  }\n\n  openLinkDialog(link: string, title: string, text: string): void {\n    const config = new MatDialogConfig();\n    config.disableClose = false;\n    config.autoFocus = true;\n\n    config.data = new InfoDialogData(title, text, true, true, link);\n\n    this.dialogService.openDialog(InfoDialogComponent, config);\n  }\n}\n","<div class=\"content\" role=\"main\">\n  <app-settings *ngIf=\"showSettings$ | async\"></app-settings>\n  <div\n    [class.headerAndCanvas]=\"\n      !(showSettings$ | async) && (showDescription$ | async)\n    \"\n    [class.headerAndCanvasCollapsed]=\"\n      !(showSettings$ | async) && !(showDescription$ | async)\n    \"\n    [class.hidden]=\"showSettings$ | async\"\n  >\n    <input type=\"color\" id=\"colorPicker\" style=\"display: none\" />\n\n    <app-header\n      [class.header]=\"showDescription$ | async\"\n      [class.headerCollapsed]=\"!(showDescription$ | async)\"\n    ></app-header>\n    <app-modeler></app-modeler>\n  </div>\n\n  <div\n    [class.logoContainer]=\"!(showSettings$ | async)\"\n    [class.hidden]=\"showSettings$ | async\"\n  >\n    <img\n      src=\"./assets/logo/dst_logo.png\"\n      height=\"74\"\n      width=\"74\"\n      alt=\"\"\n      (click)=\"\n        openLinkDialog(\n          'https://domainstorytelling.org/',\n          'Domain-Storytelling',\n          'Check us out at: '\n        )\n      \"\n    />\n    <span>\n      <a href=\"https://egon.io\" target=\"_blank\">egon.io</a>\n    </span>\n    <span>\n      <a\n        href=\"https://github.com/WPS/egon.io/releases/latest\"\n        target=\"_blank\"\n        >{{ version }}</a\n      >\n      by <a href=\"https://www.wps.de/\" target=\"_blank\">WPS</a>\n    </span>\n  </div>\n</div>\n","import { ApplicationRef, DoBootstrap, NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport {\n  MAT_CHECKBOX_DEFAULT_OPTIONS,\n  MatCheckboxDefaultOptions,\n} from '@angular/material/checkbox';\n\nimport { NoopAnimationsModule } from '@angular/platform-browser/animations';\nimport { HeaderComponent } from 'src/app/Presentation/Header/header.component';\nimport { SettingsComponent } from 'src/app/Presentation/Settings/settings.component';\nimport { AppComponent } from 'src/app/app.component';\nimport { ExportService } from 'src/app/Service/Export/export.service';\nimport { ImportDomainStoryService } from 'src/app/Service/Import/import-domain-story.service';\nimport { ImportRepairService } from 'src/app/Service/Import/import-repair.service';\nimport { ModelerService } from 'src/app/Service/Modeler/modeler.service';\nimport { TitleService } from 'src/app/Service/Title/title.service';\nimport { LabelDictionaryService } from 'src/app/Service/LabelDictionary/label-dictionary.service';\nimport { ReplayService } from 'src/app/Service/Replay/replay.service';\nimport { ElementRegistryService } from 'src/app/Service/ElementRegistry/element-registry.service';\nimport { DomainConfigurationService } from 'src/app/Service/DomainConfiguration/domain-configuration.service';\nimport { MassNamingService } from 'src/app/Service/LabelDictionary/mass-naming.service';\nimport { InfoDialogComponent } from 'src/app/Presentation/Dialog/info-dialog/info-dialog.component';\nimport { ExportDialogComponent } from 'src/app/Presentation/Dialog/export-dialog/export-dialog.component';\nimport { ActivityDialogComponent } from 'src/app/Presentation/Dialog/activity-dialog/activity-dialog.component';\nimport { UntypedFormBuilder, ReactiveFormsModule } from '@angular/forms';\nimport { HeaderDialogComponent } from 'src/app/Presentation/Dialog/header-dialog/header-dialog.component';\nimport { IconDictionaryService } from 'src/app/Service/DomainConfiguration/icon-dictionary.service';\nimport { ModelerComponent } from 'src/app/Presentation/Canvas/modeler.component';\nimport { SettingsModule } from 'src/app/Modules/settings.module';\nimport { AutosaveService } from './Service/Autosave/autosave.service';\nimport { DomainStoryModelerModuleModule } from './Modules/domain-story-modeler-module.module';\nimport { LabelDictionaryDialogComponent } from './Presentation/Dialog/label-dictionary-dialog/label-dictionary-dialog.component';\nimport { MaterialModule } from './material.module';\n\n@NgModule({\n  declarations: [\n    HeaderComponent,\n    SettingsComponent,\n    AppComponent,\n    InfoDialogComponent,\n    ExportDialogComponent,\n    ActivityDialogComponent,\n    HeaderDialogComponent,\n    ModelerComponent,\n    LabelDictionaryDialogComponent,\n  ],\n  imports: [\n    BrowserModule,\n    NoopAnimationsModule,\n    ReactiveFormsModule,\n    SettingsModule,\n    DomainStoryModelerModuleModule,\n    MaterialModule,\n  ],\n  providers: [\n    AutosaveService,\n    ExportService,\n    ImportDomainStoryService,\n    ImportRepairService,\n    IconDictionaryService,\n    TitleService,\n    LabelDictionaryService,\n    ReplayService,\n    ElementRegistryService,\n    DomainConfigurationService,\n    ModelerService,\n    MassNamingService,\n    UntypedFormBuilder,\n    {\n      provide: MAT_CHECKBOX_DEFAULT_OPTIONS,\n      useValue: { clickAction: 'noop' } as MatCheckboxDefaultOptions,\n    },\n  ],\n})\nexport class AppModule implements DoBootstrap {\n  constructor(private autosaveService: AutosaveService) {\n    // autosaveService wird so automatisch initialisiert, auf keinen Fall entfernen!\n  }\n\n  ngDoBootstrap(app: ApplicationRef): void {\n    const componentElement = document.createElement('app-root');\n    document.body.append(componentElement);\n    app.bootstrap(AppComponent);\n  }\n}\n","import { MatDialogModule } from '@angular/material/dialog';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatExpansionModule } from '@angular/material/expansion';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { NgModule } from '@angular/core';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatListModule } from '@angular/material/list';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\n\n@NgModule({\n  imports: [\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatListModule,\n    MatCheckboxModule,\n    MatDialogModule,\n    MatFormFieldModule,\n    MatGridListModule,\n    MatInputModule,\n    MatToolbarModule,\n    MatExpansionModule,\n    MatSnackBarModule,\n    MatCardModule,\n  ],\n  exports: [\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatListModule,\n    MatCheckboxModule,\n    MatDialogModule,\n    MatFormFieldModule,\n    MatGridListModule,\n    MatInputModule,\n    MatToolbarModule,\n    MatExpansionModule,\n    MatSnackBarModule,\n    MatCardModule,\n  ],\n})\nexport class MaterialModule {}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  version: 'development',\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch((err) => console.error(err));\n"],"names":["Modeler","ResizeModule","assign","isArray","inherits","DomainStoryModule","LabelEditingModule","ModelingModule","elementTypes","DomainStoryModeler","options","call","_customElements","_groupElements","prototype","_modules","concat","_addCustomShape","customElement","parentId","parent","children","push","canvas","get","elementFactory","customAttrs","businessObject","customShape","create","isGroup","id","parentShape","addShape","_addCustomConnection","elementRegistry","connection","source","target","addConnection","importCustomElements","elements","fire","addCustomElements","customElements","Error","shapes","connections","groups","forEach","isConnection","getCustomElements","createDiagram","done","element","type","ACTIVITY","CONNECTION","GROUP","Replace","modeling","_modeling","replaceElement","oldElement","newElementData","newElement","setCenterOfElement","outgoingActivities","outgoing","incomingActivities","incoming","x","Math","ceil","width","y","height","name","replaceShape","replaceOptions","ReplaceMenuProvider","_dsReplace","$inject","getEntries","entries","includes","actorReplaceOptions","workObjectReplaceOptions","_createEntries","menuEntries","self","definition","entry","_createMenuEntry","action","replaceAction","label","className","actionName","getNameFromType","iconDictionaryService","initializeReplaceOptions","iconDictionary","actorTypes","getTypeDictionary","ACTOR","replaceOption","i","keysArray","actorType","typeName","toLowerCase","getIconForBPMN","workObjectTypes","WORKOBJECT","workObjectType","ContextPadProvider","bind","generateAutomaticNumber","getAllStandardIconKeys","dirtyFlagService","initializeContextPadProvider","dirtyFlag","DomainStoryContextPadProvider","injector","connect","translate","contextPad","popupMenu","replaceMenuProvider","commandStack","eventBus","startConnect","selectedElement","invoke","autoPlace","cached","getContextPadEntries","colorPicker","document","getElementById","onchange","ev","context","newColor","value","execute","makeDirty","registerProvider","allStandardIconKeys","actions","event","autoActivate","start","replace","addColorChange","addConnectWithActivity","addTextAnnotation","addActors","appendAction","addWorkObjects","addChangeWorkObjectTypeMenu","addChangeActorTypeMenu","delete","deleteGroup","group","title","click","removeGroup","moveDeleteActionToEndOfArray","removeElements","changeDirection","position","getReplaceMenuPosition","cursor","open","colorChange","TEXTANNOTATION","dragstart","icon","newNumber","Y_OFFSET","diagramContainer","getContainer","pad","getPad","html","diagramRect","getBoundingClientRect","padRect","top","left","appendStart","shape","createShape","hints","BpmnElementFactory","DEFAULT_LABEL_SIZE","DomainStoryIdFactory","DomainStoryElementFactory","bpmnFactory","moddle","domainStoryIdFactory","elementType","attrs","baseCreate","test","registerId","getId","key","set","$type","di","$descriptor","_getCustomElementSize","Object","defineProperty","createBpmnElement","__default","Dimensions","idList","generateId","idNumber","fourDigitsId","idSuffix","containsId","floor","random","same","BaseRenderer","Ids","getAnnotationBoxHeight","componentsToPath","createLine","append","svgAppend","attr","svgAttr","classes","svgClasses","svgCreate","query","domQuery","isObject","getNumberStash","addNumberToRegistry","numberBoxDefinitions","calculateTextWidth","countLines","labelPosition","angleBetween","RENDERER_IDS","numbers","DEFAULT_COLOR","initializeRenderer","elementRegistryService","DomainStoryRenderer","styles","textRenderer","pathMap","rendererId","next","markers","computeStyle","generateActivityNumber","parentGfx","box","numberStash","semantic","use","number","newRenderedNumber","renderNumber","numberStyle","fitBox","style","getExternalStyle","fill","backgroundBoxStyle","fontSize","fontFamily","backgroundDotStyle","renderEmbeddedLabel","align","padding","renderLabel","renderExternalLabel","waypoints","lines","startPoint","selected","endPoint","angle","alignment","boxWidth","xStart","abs","textAlign","length","wordWrap","overflowWrap","hyphens","renderExternalNumber","String","text","createText","add","setCoordinates","drawEllipse","textLength","ellipse","cx","cy","rx","ry","innerHTML","manipulateInnerHTMLXLabel","manipulateInnerHTMLYLabel","firstChild","attributes","nodeValue","offset","result","outerHTML","Number","drawGroup","pickedColor","rect","drawRect","stroke","useColorForElement","iconSRC","match","index","indexOf","substring","getIconSrc","startsWith","drawActor","svgDynamicSizeAttributes","actor","getTypeIconSRC","drawWorkObject","workObject","useColorForActivity","strokeWidth","strokeLinejoin","markerEnd","marker","drawActivity","p","adjustForTextOverlap","fixConnectionInHTML","parentElement","checkIfPointOverlapsText","point","lineOffset","getLineOffset","objects","getElementsByClassName","data_id","item","getAttribute","object","getElementsByTagName","tspans","tspan","wantedConnection","polylines","setAttribute","drawDSConnection","strokeDasharray","drawAnnotation","textElement","textPathData","getScaledPath","xScaleFactor","yScaleFactor","containerWidth","containerHeight","mx","my","drawPath","d","path","r","createMarker","sequenceflowEnd","addMarker","ref","scale","strokeLinecap","viewBox","refX","refY","markerWidth","markerHeight","orient","defs","_svg","getWorkObjectPath","rectangle","getRectPath","getGroupPath","getActivityPath","map","original","activityPath","waypoint","getActorPath","canRender","drawShape","search","pos","correctInitialize","getShapePath","drawConnection","every","reduce","RuleProvider","is","HIGH_PRIORITY","MIN_SIZE","isDomainStory","isDomainStoryGroup","isActor","isWorkObject","isActivity","isAnnotation","canConnect","canResize","newBounds","lowerLeft","lowerRight","upperRight","canAttach","Array","canConnectToAnnotation","DomainStoryRules","init","canCreate","addRule","host","s","undefined","hover","pick","CommandInterceptor","collectionAdd","remove","collectionRemove","reworkGroupElements","DomainStoryUpdater","bpmnjs","updateCustomElement","e","DOMAINSTORY","updateCustomConnection","newTarget","newSource","copyWaypoints","executed","ifDomainStoryElement","reverted","fn","DomainStoryPalette","ElementFactory","CreateModule","PathMap","PopupMenuModule","ContextPadModule","CommandStack","UpdateLabelHandler","headlineAndDescriptionUpdateHandler","DSModeling","__depends__","__init__","domainStoryRenderer","paletteProvider","domainStoryRules","domainStoryUpdater","contextPadProvider","elementFactoryBpmn","updateLabelHandler","svgRemove","MARKER_HIDDEN","MARKER_LABEL_HIDDEN","annotationBoxHeight","DSLabelEditingPreview","defaultLayer","getDefaultLayer","absoluteElementBBox","gfx","on","activeProvider","active","getAbsoluteBBox","getStrokeColor","labelTarget","dy","newElementHeight","max","removeMarker","autocomplete","getLabel","isAny","getExternalLabelMid","hasExternalLabel","isLabel","isLabelExternal","dictionaryService","stashUse","initializeLabelEditingProvider","labelingDictionary","toggleStashUse","focusElement","setTimeout","focus","DSLabelEditingProvider","directEditing","resizeHandles","_canvas","_textRenderer","_updateLabelHandler","activateDirectEdit","complete","isActive","cancel","removeResizers","createAutocomplete","canExecute","isTouch","editingBox","force","activate","getUniqueWorkObjectNames","bounds","getEditingBBox","autoResize","resizable","bbox","mid","zoom","defaultStyle","getDefaultStyle","externalStyle","externalFontSize","externalLineHeight","lineHeight","defaultFontSize","defaultLineHeight","fontWeight","minWidth","maxWidth","minHeight","paddingTop","paddingBottom","paddingLeft","paddingRight","externalLabelMid","absoluteBBox","update","newLabel","activeContextText","updateLabel","getLabelAttr","getNumberAttr","getNumber","setLabel","setNumber","textNumber","selectPartOfActivity","angleActivity","selectedActivity","linelength","fontsize","input","workObjectNames","closeAllLists","currentFocus","addEventListener","autocompleteList","autocompleteItem","val","createElement","parentNode","appendChild","toUpperCase","visibility","onkeydown","keyCode","addActive","preventDefault","removeActive","classList","survivor","removeChild","ChangeSupportModule","DirectEditingModule","dSlabelEditingProvider","dSlabelEditingPreview","str","split","amountWaypoints","determinedPosition","xPos","yPos","labelPositionX","labelPositionY","offsetX","scaledAngle","offsetY","Modeling","_commandStack","updateNumber","oldShape","newShape","newData","numberRegistry","multipleNumberRegistry","canvasElementRegistry","initializeNumbering","canvasElementRegistryService","boxHeight","elementActivity","usedNumbers","wantedNumber","activitiesFromActors","getActivitiesFromActors","updateExistingNumbersAtGeneration","updateExistingNumbersAtEditing","sortedActivities","activity","currentNumber","setNumberOfActivity","getNumbersAndIDs","iDWithNumber","activities","renderedNumber","setNumberIsMultiple","multi","getNumberRegistry","slice","getMultipleNumberRegistry","elementArray","overrideAppendedIcons","Dictionary","APPENDED_ICONS_TAG","configuration","initializePalette","configurationService","PaletteProvider","palette","spaceTool","lassoTool","_create","_elementFactory","_spaceTool","_lassoTool","getPaletteEntries","createAction","createListener","isExpanded","shortType","initPalette","appendCSSStyleCheat","customIcons","sheetEl","head","customIconDict","appendDict","customIconDictKeys","getAppendedIconDictionary","has","src","iconStyle","wrapSRCInSVG","sheet","insertRule","cssRules","config","getCurrentIconConfigurationForBPMN","localStorage","getItem","JSON","parse","customIconsLegacy","convertLegacyAppendedIconsToDict","customIconsDict","putEntry","initTypeDictionaries","actors","workObjects","addCanvasObjectTypes","separator","activateSelection","keys","dict","initializeActivityUpdateHandler","activityUpdateHandler","registerHandler","activity_directionChange","activity_changed","preExecute","oldLabel","oldNumbersWithIDs","oldNumber","revert","revertAutomaticNumberGenerationChange","oldWaypoints","swapSource","newWaypoints","getActivitesFromActors","j","splice","undoGroupRework","elementUpdateHandler","element_colorChange","removeGroupWithoutChildren","oldColor","ctx","child","titleService","handlerFunction","oldTitle","getTitle","oldDescription","getDescription","updateTitleAndDescription","newTitle","newDescription","DSMassRenameHandler","massRename","relevantElements","confirm","newValue","getBusinessObject","NULL_DIMENSIONS","labelCenter","createLabel","setText","postExecute","trim","removeShape","bo","getLayoutedBounds","resizeShape","numberTarget","some","$instanceOf","types","t","innerShape","superParent","svgShape","querySelector","svgGroup","svgGroupParent","SVG_LINK","TEXTSPAN_DESCRIPTION_HEIGHT","TEXTSPAN_TITLE_HEIGHT","X_OFFSET_UTIL","extraHeight","createTitleAndDescriptionSVGElement","description","xLeft","yUp","titleElement","createTitle","descriptionElement","createDescription","insertText","tempCanvas","getContext","font","createTextSpans","descriptionParts","yOffset","heightOffset","textSpans","words","textTag","textSpan","createElementNS","textNode","createTextNode","data","len","measureText","testBusinessObject","Configuration","constructor","INITIAL_TITLE","INITIAL_DESCRIPTION","INITIAL_DOMAIN_NAME","DOMAIN_CONFIGURATION_TAG","DEFAULT_AUTOSAVES_ENABLED","DEFAULT_AUTOSAVES_AMOUNT","DEFAULT_AUTOSAVES_INTERVAL","SNACKBAR_DURATION","SNACKBAR_SUCCESS","SNACKBAR_ERROR","SNACKBAR_INFO","IMPLICIT_ROOT_ID","all","size","isEmpty","Entry","addEach","clear","filter","found","sort","sortByName","a","b","structuredClone","testCustomDomainConfiguration","fromConfigurationFromFile","configFromFile","actorsDict","workObjectsDict","IconConfiguration","allIconDictionary","getDefaultConf","defaultConf","updateAllIconRegistry","appendSRCFile","newAppendedIcons","appen","createCustomConf","domainConfiguration","domainName","allIconsConf","ActivityDialogData","numberIsAllowedMultipleTimes","showNumberFields","saveFN","ExportDialogData","ExportOption","tooltip","InfoDialogData","infoText","isInfo","isLink","linkText","NUMBER_BACKGROUND_COLOR","NUMBER_COLOR","STROKE_WIDTH","HIGHLIGHT_NUMBER_BACKGROUNG_COLOR","HIGHLIGHT_NUMBER_COLOR","HIGHLIGHT_COLOR","HIGHLIGHT_STROKE_WIDTH","appendedIcons","allIcons","Person","Group","Pet","Conversation","World","Store","Theater","Business","Water","Hotel","Dining","Courthouse","Flag","Place","Car","Bus","Train","Truck","Taxi","Bike","Boat","Motorcycle","Plane","Shuttle","Walking","Traffic","Commute","System","Printer","Document","Folder","Call","Email","Copyright","DNS","Settings","Cellphone","Update","Briefcase","Microphone","Signal","Key","Pencil","Sum","Headset","Keyboard","Mouse","Router","Scanner","Security","Desktop","Tablet","Label","Receipt","Calendar","Cloud","Assessment","Dashboard","Problem","Grid","Watch","Euro","Dollar","Info","Alarm","Wrench","Favorite","Gavel","Blind","Hourglass","Time","Search","Shopping","Couch","Attach","Ruler","Education","allIconsDict","newIcons","IconFilterEnum","ConfigAndDST","domain","dst","testConfigAndDst","CommonModule","AutosaveSettingsComponent","AutosaveOptionsComponent","AutosavedDraftsComponent","FormsModule","MaterialModule","AutosaveSettingsModule","declarations","imports","exports","HeaderButtonsComponent","DomainStoryModelerModuleModule","DomainConfigurationComponent","IconListItemComponent","DetailsListItemComponent","DomainDetailsComponent","GeneralSettingsComponent","LabelDictionaryComponent","SettingsModule","i0","autosaveConfiguration","snackbar","save","activated","amount","interval","setConfiguration","duration","panelClass","selectors","decls","vars","consts","template","autosaveService","subscription","autosavedDraftsChanged$","subscribe","initDrafts","ngOnInit","drafts","loadCurrentDrafts","loadDraft","draft","removeAllDrafts","ModelerComponent","modelerService","postInit","loadLatestDraft","MAT_DIALOG_DATA","ActivityDialogComponent","fb","dialogRef","activityLabel","activityNumber","form","multipleNumbers","onSubmit","patchValue","close","BehaviorSubject","ExportDialogComponent","withTitle","useWhiteBackground","doOption","updateWithTitle","$event","checked","updateUseWhiteBackground","HeaderDialogComponent","InfoDialogComponent","showConfirmButton","hasLink","ngAfterViewInit","span","scrollHeight","LabelDictionaryDialogComponent","ngAfterViewChecked","createIcon","img","iconInitiated","svg","inputs","sanitizeIconName","domainCustomizationService","ICON_FILTER_NONE","domainConfigurationTypes","getDomainConfiguration","getFullDictionary","allIconNames","selectedActors","selectedActors$","selectedWorkobjects","selectedWorkobjects$","allFiltered","getFilteredNamesForType","allFilteredIconNames","loadMinimalIconConfigurationWithDefaultIcons","resetDomain","loadInitialConfiguration","saveDomain","getUsedIcons","exportDomain","startIconUpload","importIcon","files","iconInputFile","reader","FileReader","iconName","onloadend","addIMGToIconDictionary","registerIconForBPMN","addNewIcon","readAsDataURL","startDomainImport","importDomain","domainInputFile","loadConfiguration","importConfiguration","readAsText","filterForActors","ICON_FILTER_ACTOR","filterForWorkobjects","ICON_FILTER_WORKOBJECT","filterForUnassigned","ICON_FILTER_UNASSIGNED","filterByNameAndType","filteredByNameAndType","isIconActor","isIconWorkObject","customizationService","domainName$","changeName","getIconForName","allowDrop","listName","draggedList","onDrop","list","sortedList","draggedIndex","setSelectedActors","setSelectedWorkObject","onDragStart","isWorkobject","isNone","toggleNone","setAsUnassigned","toggleActor","setAsActor","toggleWorkobject","setAsWorkobject","MatDialogConfig","settingsService","replayStateService","dialogService","replayService","exportService","importService","renderService","isReplay$","replayOn$","isDirty$","dirty$","import","filename","endsWith","importDST","importEGN","commandStackChanged","openSettings","openDownloadDialog","isDomainStoryExportable","SVGDownloadOption","downloadSVG","EGNDownloadOption","downloadDST","PNGDownloadOption","downloadPNG","HTMLDownloadOption","downloadHTMLPresentation","disableClose","autoFocus","openDialog","openKeyboardShortcutsDialog","shortCutText","openLabelDictionary","createNewDomainStory","reset","startReplay","stopReplay","previousStep","nextStep","combineLatest","HeaderComponent","title$","description$","showDescription$","stepDescription$","currentStep$","maxStepNumber$","pipe","step","count","showDescription","openHeaderDialog","setShowDescription","show","EventEmitter","labelDictionaryService","createLabelDictionaries","workObjectEntries","getWorkObjectLabels","activityEntries","getActivityLabels","workobjectEntriesSubject","activityEntriesSubject","activityNames","originalActivityNames","originalWorkObjectNames","originalName","w","workobject","massRenameLabels","closeEmitter","emit","updateActivityEntry","activityEntry","updateWorkobjectEntry","workobjectEntry","outputs","SettingsComponent","savedConfiguration","getAndClearSavedConfiguration","restart","openGeneralSettings","showGeneralSettings","showDomainCustomization","openDomainCustomization","ReplaySubject","AUTOSAVE_CONFIGURATION_TAG","defaultConfiguration","AutosaveConfigurationService","storageService","configurationSubject","asObservable","initializeConfiguration","saveConfiguration","factory","providedIn","Subject","DRAFTS_TAG","AutosaveService","rendererService","configuration$","updateConfiguration","readDrafts","sortDrafts","configAndDST","story","actorIcons","getElementsOfType","workObjectIcons","updateIconRegistries","importStory","stopTimer","startTimer","autosaveTimer","clearInterval","setInterval","newDraft","createDraft","isChanged","isSame","isDraftEmpty","unshift","pop","writeDrafts","stringify","getStory","createConfigAndDST","date","Date","toString","aDate","bDate","StorageService","setItem","json","removeItem","checkValidityOfConfiguration","configuratioFromFile","getStoredDomainConfiguration","domainString","setStoredDomainConfiguration","configForStorage","CommandStackService","setCommandStack","payload","DialogService","matDialog","dialog","DirtyFlagService","isDirtySubject","makeClean","dirty","DomManipulationService","showAll","removeHighlights","getAllCanvasObjects","getAllGroups","domObject","display","showStep","replayStep","notShown","getAllNotShown","hightlightStep","o","getNumberDomForActivity","numberDOMS","numberBackgroundDom","numberTextDom","allActivities","getAllActivities","allConnections","getAllConnections","activityDomObject","connectionDomObject","stepObjects","shownElements","notShownElements","allObjects","DomainConfigurationService","setDomainName","exportConfiguration","getCurrentConfigurationForExport","configJSONString","getDomainName","encodeURIComponent","body","customConfig","updateDomainName","actorDict","workObjectDict","actorKeys","workObjectKeys","getIconConfiguration","addIconsFromDomainConfiguration","configurationName","getCurrentConfiguration","getActorsDictionary","getWorkObjectsDictionary","createConfigFromDictionaries","currentConfiguration","getCurrentConfigurationNamesWithoutPrefix","createMinimalConfigurationWithDefaultIcons","minimalConfig","createConfigFromCanvas","getIconSource","actorNames","workobjectNames","newActors","newWorkobjects","allCanvasObjects","DomainCustomizationService","getAllIconDictionary","addIconToAllIconList","importedConfigurationEvent","storedDomainConfiguration","importedConfiguration","getImportedConfiguration","allIconListItems","selectedActorNames","selectActor","selectedWorkobjectNames","selectWorkObject","changedDomain","deselectActor","deselectWorkobject","updateIcon","updateActorSubject","updateWorkObjectSubject","configurationHasChanged","defaultConfig","workObjectName","actorName","updateAllIconBehaviourSubjects","resetToInitialConfiguration","usedIcons","imported","changedActors","changedWorkobjects","createDomainConfiguration","configurationActors","configurationWorkobjects","workobjects","changedDomainCofiguration","updateIcons","join","temp","iconDict","getSrcForIcon","addIconsToCss","iconBehaviourSubject","customDomainCofiguration","rawSrc","ICON_PREFIX","IconDictionaryService","iconConfig","allTypes","initDictionary","actorIconDictionary","workObjectDictionary","dictionary","namePrefix","customConfiguration","allInTypeDictionary","collection","allIn","dictionaryType","iconTypes","registerIconForType","iconDictionaryForBPMN","addIconsToTypeDictionary","extractCustomIconsFromDictionary","addNewIconsToDictionary","elementDictionary","sanitizedName","custom","fullDictionary","appendedDict","getTypeDictionaryKeys","elementOfType","setCusomtConfiguration","ElementRegistryService","fullyInitialized","registry","__implicitroot","setElementRegistry","_elements","createObjectListForDSTDownload","allObjectsFromCanvas","objectList","fillListOfCanvasObjects","canvasElement","groupObjects","checkChildForGroup","currentGroup","registryElementNames","getAllActors","getAllWorkobjects","co","sanitizeForDesktop","formatDate","environment","ExportService","pngService","svgService","htmlPresentationService","titleSubscription","descriptionSubscription","ngOnDestroy","unsubscribe","DomainStory","getStoryForDownload","getCurrentDateString","downloadFile","datatype","fileEnding","svgData","createSVGData","container","svgElements","outerSVGElement","viewport","layerBase","image","extractSVG","prepareSVG","onload","getWidth","getHeight","fillStyle","drawImage","png64","toDataURL","ele","then","info","version","doT","HtmlPresentationService","setModelerClasses","selection","modeler","viewBoxCoordinates","ViewBoxCoordinate","saveSVG","fixActivityMarkersForEachStep","getCurrentStepNumber","content","transition","err","alert","getMaxStepNumber","revealjsTemplate","dots","revealjsData","script","sentences","multiplexSecret","multiplexId","fixMalformedHtmlScript","viewBoxIndex","splitViewBox","dataStart","dataEnd","createBounds","sectionIndex","newDefs","ids","idToReplace","newId","replaceAll","PngService","browserSpecs","ua","navigator","userAgent","tem","M","exec","appName","appVersion","URIHashtagFix","fix","browser","parseInt","findMostOuterElements","xRight","yDown","sub","elXLeft","elXRight","elYUp","elYDown","transform","nums","rects","outerRect","calculateWidthAndHeight","insertIndex","layerResizers","layerOverlays","removeAttribute","XMLSerializer","serializeToString","SvgService","cacheData","getEncoded","findIndexToInsertData","svgIndex","backgroundColorWhite","appendDST","restoreTitleFromFileName","ImportDomainStoryService","importRepairService","domainConfigurationService","importedConfigurationEmitter","isSVG","fileReader","titleText","fileReaderFunction","isEGN","dstText","removeXMLComments","dstAndConfig","extractDstAndConfig","configChanged","checkConfigForChanges","lastElement","importVersionNumber","handleVersionNumber","checkForUnreferencedElementsInActivitiesAndRepair","showBrokenImportDialog","adjustPositions","versionPrefix","lastIndexOf","updateCustomElementsPreviousV050","showPreviousV050Dialog","xmlText","newActorKeys","newWorkObjectKeys","currentActorKeys","currentWorkobjectKeys","changed","clearName","setImportedConfigurationAndEmit","ImportRepairService","objectIDs","activityIndex","isFirst","findFirstElement","adjustElementPosition","LabelDictionaryService","massNamingService","activityLabels","workObjektLabels","localeCompare","Set","massChangeNames","MassNamingService","commandStackService","oldValue","allRelevantObjects","massRenameHandler","positionsMatch","InitializerService","initializeDomainStoryModelerClasses","propagateDomainStoryModelerClassesToServices","initializeDomainStoryModelerEventHandlers","initiateEventBusListeners","getReplayOn","activityDoubleClick","renderedNumberRegistry","htmlCanvas","transformX","transformY","zoomX","zoomY","clickX","originalEvent","clickY","parseFloat","currentNum","tx","ty","tNumber","elementX","elementY","stopPropagation","saveActivityInputLabel","activityData","hasNumber","multipleNumberAllowed","ModelerService","initializerService","keyboard","bindTo","additionalModules","bpmnSearch","exportArtifacts","debounce","window","startDebounce","domainStory","currentStory","destroy","getModeler","timeout","timer","clearTimeout","encoded","RendererService","renderStory","configurationChange","c","ReplayStateService","replayOnSubject","setReplayState","state","ReplayService","domManipulationService","storyCreatorService","currentStep","maxStepNumber","initializeReplay","traceActivitiesAndCreateStory","showCurrentStep","missingSteps","getMissingSteps","getValue","steps","StoryCreatorService","tracedActivityMap","tracedItem","createStep","addGroupStep","getStepObjects","highlightedElements","highlightedObjects","tracedActivity","initialSource","targetObjects","parallelStep","firstTarget","checkTarget","activityTarget","g","SettingsService","showSettings","TitleService","titleSubject","descriptionSubject","showDescriptionSubject","domainNameSubject","allowUndo","fireTitleAndDescriptionUpdate","updateTitle","updateDescription","getVersion","degrees","radians","PI","quadrant","adjacent","opposite","atan2","Point","reg","domainStoryRegex","svgRegex","egnSuffix","dstSuffix","svgSuffix","filenameWithoutDateSuffix","AppComponent","replayStateSerice","showSettings$","ctrlKey","openLinkDialog","link","BrowserModule","MAT_CHECKBOX_DEFAULT_OPTIONS","NoopAnimationsModule","UntypedFormBuilder","ReactiveFormsModule","AppModule","ngDoBootstrap","app","componentElement","bootstrap","provide","useValue","clickAction","MatDialogModule","MatFormFieldModule","MatInputModule","MatToolbarModule","MatExpansionModule","MatCardModule","MatSnackBarModule","MatButtonModule","MatGridListModule","MatButtonToggleModule","MatListModule","MatCheckboxModule","production","enableProdMode","__NgCli_bootstrap_1","bootstrapModule","catch","console","error"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}